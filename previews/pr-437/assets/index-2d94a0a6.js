var Pg=Object.defineProperty;var Lg=(re,ee,ne)=>ee in re?Pg(re,ee,{enumerable:!0,configurable:!0,writable:!0,value:ne}):re[ee]=ne;var nc=(re,ee,ne)=>(Lg(re,typeof ee!="symbol"?ee+"":ee,ne),ne);import{a as buffer$2,p as process$1,P as ParametersInvalidBeaconError,d as commonjsGlobal,g as getDefaultExportFromCjs,e as axios,M as MichelCodecPacker,S as Schema,O as OpKind,f as Parser$2,T as TezosToolkit,h as BeaconWallet,N as NetworkType,i as MichelsonMap,j as getAugmentedNamespace,B as Buffer$2,b as browser$1$1,k as require$$1$1,r as require$$0$1,_ as __awaiter$1,l as __decorate$8,m as base,n as bytes2Char,v as validateAddress,V as ValidationResult,o as char2Bytes,q as emitMicheline,s as encodePubKey,t as encodeKeyHash}from"./contracts-aa63cee0.js";import{r as reactExports,a as React,d as displayWorkerWarning,p as pdfExports,D as Document$1,P as Page$1,b as PropTypes,_ as _defineProperty$2,c as _objectWithoutProperties$1,e as _slicedToArray,f as _getPrototypeOf,g as _possibleConstructorReturn,R as React$1,h as _typeof,i as _extends$2,j as _inherits,k as _classCallCheck$1,l as _toConsumableArray,m as _createClass$1}from"./pdf-2306f406.js";import{c as classNames$1,N as NavLink,m as motion,a as create$2,A as AnimatePresence,u as useRouteError,i as isRouteErrorResponse,L as Link,b as useParams,r as reactDomExports,d as useLocation,e as useNavigate,f as useSearchParams,O as Outlet,g as Navigate,h as useOutlet,j as createSearchParams,k as useOutletContext,S as ScrollRestoration,l as createBrowserRouter,n as createRoutesFromChildren,R as RouterProvider,o as Route}from"./ui-a85aa905.js";import{L as Loader,F as FileLoader,B as BufferGeometry,a as BufferAttribute,T as TrianglesDrawMode,b as TriangleFanDrawMode,c as TriangleStripDrawMode,d as LoaderUtils,C as Color,S as SpotLight,P as PointLight,D as DirectionalLight,M as MeshBasicMaterial,s as sRGBEncoding,e as MeshPhysicalMaterial,V as Vector2,f as Matrix4,g as Vector3,I as InstancedMesh,O as Object3D,h as TextureLoader,i as ImageBitmapLoader,j as InterleavedBuffer,k as LinearFilter,l as LinearMipmapLinearFilter,R as RepeatWrapping,m as PointsMaterial,n as Material$1,o as LineBasicMaterial,p as MeshStandardMaterial,q as DoubleSide,r as PropertyBinding,t as SkinnedMesh,u as Mesh,v as LineSegments,w as Line$1,x as LineLoop,y as Points,G as Group$1,z as PerspectiveCamera,A as MathUtils,E as OrthographicCamera,H as Skeleton,J as InterpolateLinear,K as AnimationClip,N as Bone,Q as Quaternion,U as NearestFilter,W as NearestMipmapNearestFilter,X as LinearMipmapNearestFilter,Y as NearestMipmapLinearFilter,Z as ClampToEdgeWrapping,_ as MirroredRepeatWrapping,$ as InterpolateDiscrete,a0 as FrontSide,a1 as InterleavedBufferAttribute,a2 as Texture$1,a3 as VectorKeyframeTrack,a4 as QuaternionKeyframeTrack,a5 as NumberKeyframeTrack,a6 as Box3,a7 as Sphere,a8 as Interpolant,a9 as CompressedArrayTexture,aa as UnsignedByteType,ab as CompressedTexture,ac as LinearEncoding,ad as RGBAFormat,ae as RGBA_ASTC_4x4_Format,af as RGBA_BPTC_Format,ag as RGBA_ETC2_EAC_Format,ah as RGBA_PVRTC_4BPPV1_Format,ai as RGBA_S3TC_DXT5_Format,aj as RGB_ETC1_Format,ak as RGB_ETC2_Format,al as RGB_PVRTC_4BPPV1_Format,am as RGB_S3TC_DXT1_Format,an as FloatType,ao as HalfFloatType,ap as DataTexture,aq as Data3DTexture,ar as RGFormat,as as RedFormat,at as EventDispatcher,au as Source$2,av as Scene,aw as LightProbe,ax as WebGLCubeRenderTarget,ay as Float32BufferAttribute,az as PlaneGeometry,aA as Spherical,aB as Matrix3,aC as Euler,aD as ShaderMaterial,aE as WebGLRenderTarget,aF as DataTextureLoader,aG as DataUtils,aH as BoxGeometry,aI as BackSide,aJ as EquirectangularReflectionMapping,aK as CubeCamera,aL as NoToneMapping,aM as NoBlending,aN as WebGLRenderer,aO as ACESFilmicToneMapping,aP as VideoTexture,aQ as CanvasTexture,aR as Triangle,aS as MeshDepthMaterial,aT as Raycaster,aU as AnimationMixer,aV as LoopPingPong,aW as LoopRepeat,aX as LoopOnce}from"./three-c1875886.js";(function(){const ee=document.createElement("link").relList;if(ee&&ee.supports&&ee.supports("modulepreload"))return;for(const oe of document.querySelectorAll('link[rel="modulepreload"]'))ie(oe);new MutationObserver(oe=>{for(const ae of oe)if(ae.type==="childList")for(const ce of ae.addedNodes)ce.tagName==="LINK"&&ce.rel==="modulepreload"&&ie(ce)}).observe(document,{childList:!0,subtree:!0});function ne(oe){const ae={};return oe.integrity&&(ae.integrity=oe.integrity),oe.referrerPolicy&&(ae.referrerPolicy=oe.referrerPolicy),oe.crossOrigin==="use-credentials"?ae.credentials="include":oe.crossOrigin==="anonymous"?ae.credentials="omit":ae.credentials="same-origin",ae}function ie(oe){if(oe.ep)return;oe.ep=!0;const ae=ne(oe);fetch(oe.href,ae)}})();globalThis.Buffer=buffer$2.Buffer;globalThis.process=process$1;typeof process>"u"&&(globalThis.process={});process.hrtime||(process.hrtime=function(re){var ee=performance.now()*.001,ne=Math.floor(ee),ie=Math.floor(ee%1*1e9);return re&&(ne=ne-re[0],ie=ie-re[1],ie<0&&(ne--,ie+=1e9)),[ne,ie]});var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$3=reactExports,k$3=Symbol.for("react.element"),l$5=Symbol.for("react.fragment"),m$5=Object.prototype.hasOwnProperty,n$8=f$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$5={key:!0,ref:!0,__self:!0,__source:!0};function q$2(re,ee,ne){var ie,oe={},ae=null,ce=null;ne!==void 0&&(ae=""+ne),ee.key!==void 0&&(ae=""+ee.key),ee.ref!==void 0&&(ce=ee.ref);for(ie in ee)m$5.call(ee,ie)&&!p$5.hasOwnProperty(ie)&&(oe[ie]=ee[ie]);if(re&&re.defaultProps)for(ie in ee=re.defaultProps,ee)oe[ie]===void 0&&(oe[ie]=ee[ie]);return{$$typeof:k$3,type:re,key:ae,ref:ce,props:oe,_owner:n$8.current}}reactJsxRuntime_production_min.Fragment=l$5;reactJsxRuntime_production_min.jsx=q$2;reactJsxRuntime_production_min.jsxs=q$2;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const Fragment=jsxRuntimeExports.Fragment,jsx$1=jsxRuntimeExports.jsx,jsxs=jsxRuntimeExports.jsxs,container$D="_container_12gil_216",msg_box="_msg_box_12gil_217",styles$$={container:container$D,msg_box},loader$1="_loader_158c3_216",container$C="_container_158c3_223",circle="_circle_158c3_230",message$1="_message_158c3_241",flicker="_flicker_158c3_1",styles$_={loader:loader$1,container:container$C,circle,message:message$1,flicker},Loading=({message:re})=>jsx$1("div",{className:styles$_.container,children:jsxs("div",{className:styles$_.loader,children:[jsx$1("div",{className:styles$_.circle}),re&&jsx$1("p",{className:styles$_.message,children:re})]})}),strong="_strong_afy91_216",container$B="_container_afy91_220",inline$1="_inline_afy91_240",fit="_fit_afy91_244",small$2="_small_afy91_247",disabled$2="_disabled_afy91_250",full="_full_afy91_255",primary="_primary_afy91_268",selected$3="_selected_afy91_272",active$1="_active_afy91_272",menu$3="_menu_afy91_276",secondary$1="_secondary_afy91_292",box$1="_box_afy91_307",shadow_box="_shadow_box_afy91_336",left$2="_left_afy91_353",button_theme="_button_theme_afy91_357",pagination_button="_pagination_button_afy91_368",styles$Z={strong,container:container$B,inline:inline$1,fit,small:small$2,disabled:disabled$2,full,primary,selected:selected$3,active:active$1,menu:menu$3,secondary:secondary$1,box:box$1,shadow_box,left:left$2,button_theme,pagination_button},Button=({to:re,href:ee,onClick:ne,onTo:ie,children:oe,className:ae,style:ce,alt:le,disabled:ue,selected:he,fit:fe,full:me,box:ge,strong:ve,shadow_box:ye,secondary:be,small:Ce,inline:Se,activeClass:$e,...Te})=>{const Ie=`${classNames$1({[styles$Z.container]:!0,[styles$Z.disabled]:ue,[styles$Z.fit]:fe,[styles$Z.full]:me,[styles$Z.small]:Ce,[styles$Z.strong]:ve,[styles$Z.inline]:Se,[styles$Z.selected]:he,[styles$Z.primary]:!be})} ${ae||""}`;return ge?oe=jsx$1("div",{className:styles$Z.box,children:oe}):ye&&(oe=jsx$1("div",{className:styles$Z.shadow_box,children:oe})),re!=null?jsx$1(NavLink,{"aria-label":le,to:re,onClick:ie,className:({isActive:ke})=>ke?`${styles$Z.active} ${Ie} ${$e||""}`:Ie,...Te,end:!0,children:oe}):ee!=null?jsx$1(motion.a,{style:ce,href:ee,target:"_blank",rel:"noopener noreferrer",className:Ie,"aria-label":le,...Te,children:oe}):jsx$1(motion.button,{style:ce,"aria-label":le,onClick:ne,className:Ie,...Te,children:oe})},Secondary=({children:re,selected:ee,label:ne=""})=>{const ie=classNames$1({[styles$Z.secondary]:!0,[styles$Z.selected]:ee});return jsx$1("div",{className:ie,role:"button","aria-label":ne,children:re})},Secondary$1=reactExports.memo(Secondary);function IncrementButtons({onClick:re}){return jsxs("div",{children:[jsx$1(Button,{shadow_box:!0,inline:!0,onClick:ee=>re(ee,!0),children:"+"}),jsx$1(Button,{shadow_box:!0,inline:!0,onClick:ee=>re(ee,!1),children:"-"})]})}function PaginationButtons({path:re,current:ee,min:ne,max:ie}){return jsxs("div",{children:[jsx$1(Button,{to:`${re}/${Math.max(ne,ee-1)}`,className:styles$Z.pagination_button,shadow_box:!0,children:ee>ne?"❰":"|"})," ",jsx$1(Button,{to:`${re}/${Math.min(ee+1,ie)}`,className:styles$Z.pagination_button,shadow_box:!0,children:ee<ie?"❱":"|"})]})}const fadeIn=()=>({initial:{opacity:0,transition:{duration:.2,ease:"easeOut"}},animate:{opacity:1,transition:{duration:.2,ease:"easeOut"}},exit:{opacity:0,transition:{duration:.2,ease:"easeInOut"}}}),containerMenu={hidden:{border:0,y:-25,opacity:0,transition:{ease:"easeOut",duration:.2,staggerChildren:.02,staggerDirection:-1}},show:{border:"1px",y:0,opacity:1,transition:{ease:"easeOut",staggerChildren:.04}}},containerVariants={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.333}},exit:{opacity:0,transition:{ease:"easeInOut"}}},container$A="_container_jg3vp_1",content$5="_content_jg3vp_13",message="_message_jg3vp_21",buttons$3="_buttons_jg3vp_33",loader="_loader_jg3vp_39",styles$Y={container:container$A,content:content$5,message,buttons:buttons$3,loader};function n$7(){return n$7=Object.assign||function(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee];for(var ie in ne)Object.prototype.hasOwnProperty.call(ne,ie)&&(re[ie]=ne[ie])}return re},n$7.apply(this,arguments)}const e$5=["children","options"],r$5=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","className","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((re,ee)=>(re[ee.toLowerCase()]=ee,re),{for:"htmlFor"}),o$5={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},c$5=["style","script"],a$3=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,u$1=/mailto:/i,_$2=/\n{2,}$/,i$5=/^( *>[^\n]+(\n[^\n]+)*\n*)+\n{2,}/,s$5=/^ *> ?/gm,l$4=/^ {2,}\n/,f$2=/^(?:( *[-*_]) *){3,}(?:\n *)+\n/,d$3=/^\s*(`{3,}|~{3,}) *(\S+)?([^\n]*?)?\n([\s\S]+?)\s*\1 *(?:\n *)*\n?/,p$4=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,g$3=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,m$4=/^(?:\n *)*\n/,y$2=/\r\n?/g,h$3=/^\[\^([^\]]+)](:.*)\n/,k$2=/^\[\^([^\]]+)]/,x$5=/\f/g,b$3=/^\s*?\[(x|\s)\]/,v$2=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,S$2=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,$$1=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?([^>]*)\/{0}>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1)[\s\S])*?)<\/\1>\n*/i,w$2=/&([a-zA-Z]+);/g,z$2=/^<!--[\s\S]*?(?:-->)/,E$1=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,A$3=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,L=/^\{.*\}$/,R$1=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,I$2=/^<([^ >]+@[^ >]+)>/,M$2=/^<([^ >]+:\/[^ >]+)>/,O=/-([a-z])?/gi,B$1=/^(.*\|?.*)\n *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*)\n?/,T$1=/^\[([^\]]*)\]:\s+(\S+)\s*("([^"]*)")?/,j$1=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,C$2=/^\[([^\]]*)\] ?\[([^\]]*)\]/,Z$1=/(\[|\])/g,D=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,N$1=/\t/g,F=/^ *\| */,P$1=/(^ *\||\| *$)/g,G=/ *$/,H$1=/^ *:-+: *$/,q$1=/^ *:-+ *$/,U=/^ *-+: *$/,V$1=/^([*_])\1((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1\1(?!\1)/,W=/^([*_])((?:\[.*?\][([].*?[)\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~+.*?~+|.)*?)\1(?!\1|\w)/,Q$1=/^~~((?:\[.*?\]|<.*?>(?:.*?<.*?>)?|`.*?`|.)*?)~~/,X=/^\\([^0-9A-Za-z\s])/,J=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,K=/^\n+/,Y=/^([ \t]*)/,tt=/\\([^0-9A-Z\s])/gi,nt$1=/ *\n+$/,et$2=/(?:^|\n)( *)$/,rt="(?:\\d+\\.)",ot="(?:[*+-])";function ct$1(re){return"( *)("+(re===1?rt:ot)+") +"}const at=ct$1(1),ut=ct$1(2);function _t(re){return new RegExp("^"+(re===1?at:ut))}const it=_t(1),st=_t(2);function lt(re){return new RegExp("^"+(re===1?at:ut)+"[^\\n]*(?:\\n(?!\\1"+(re===1?rt:ot)+" )[^\\n]*)*(\\n|$)","gm")}const ft=lt(1),dt$1=lt(2);function pt(re){const ee=re===1?rt:ot;return new RegExp("^( *)("+ee+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+ee+" (?!"+ee+" ))\\n*|\\s*\\n*$)")}const gt$1=pt(1),mt=pt(2);function yt$1(re,ee){const ne=ee===1,ie=ne?gt$1:mt,oe=ne?ft:dt$1,ae=ne?it:st;return{t(ce,le,ue){const he=et$2.exec(ue);return he&&(le.o||!le.u&&!le._)?ie.exec(ce=he[1]+ce):null},i:Ht.HIGH,l(ce,le,ue){const he=ne?+ce[2]:void 0,fe=ce[0].replace(_$2,`
`).match(oe);let me=!1;return{p:fe.map(function(ge,ve){const ye=ae.exec(ge)[0].length,be=new RegExp("^ {1,"+ye+"}","gm"),Ce=ge.replace(be,"").replace(ae,""),Se=ve===fe.length-1,$e=Ce.indexOf(`

`)!==-1||Se&&me;me=$e;const Te=ue.u,Ne=ue.o;let Ie;ue.o=!0,$e?(ue.u=!1,Ie=Ce.replace(nt$1,`

`)):(ue.u=!0,Ie=Ce.replace(nt$1,""));const ke=le(Ie,ue);return ue.u=Te,ue.o=Ne,ke}),g:ne,m:he}},h:(ce,le,ue)=>re(ce.g?"ol":"ul",{key:ue.k,start:ce.m},ce.p.map(function(he,fe){return re("li",{key:fe},le(he,ue))}))}}const ht="(?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*",kt=`\\s*<?((?:[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*`,xt=new RegExp("^\\[("+ht+")\\]\\("+kt+"\\)"),bt=new RegExp("^!\\[("+ht+")\\]\\("+kt+"\\)"),vt=[i$5,d$3,p$4,v$2,S$2,z$2,B$1,ft,gt$1,dt$1,mt],St=[...vt,/^[^\n]+(?:  \n|\n{2,})/,$$1,A$3];function $t$1(re){return re.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function wt(re){return U.test(re)?"right":H$1.test(re)?"center":q$1.test(re)?"left":null}function zt(re,ee,ne){const ie=ne.v;ne.v=!0;const oe=ee(re.trim(),ne);ne.v=ie;let ae=[[]];return oe.forEach(function(ce,le){ce.type==="tableSeparator"?le!==0&&le!==oe.length-1&&ae.push([]):(ce.type!=="text"||oe[le+1]!=null&&oe[le+1].type!=="tableSeparator"||(ce.S=ce.S.replace(G,"")),ae[ae.length-1].push(ce))}),ae}function Et(re,ee,ne){ne.u=!0;const ie=zt(re[1],ee,ne),oe=re[2].replace(P$1,"").split("|").map(wt),ae=function(ce,le,ue){return ce.trim().split(`
`).map(function(he){return zt(he,le,ue)})}(re[3],ee,ne);return ne.u=!1,{$:oe,A:ae,L:ie,type:"table"}}function At(re,ee){return re.$[ee]==null?{}:{textAlign:re.$[ee]}}function Lt(re){return function(ee,ne){return ne.u?re.exec(ee):null}}function Rt(re){return function(ee,ne){return ne.u||ne._?re.exec(ee):null}}function It(re){return function(ee,ne){return ne.u||ne._?null:re.exec(ee)}}function Mt(re){return function(ee){return re.exec(ee)}}function Ot$1(re,ee,ne){if(ee.u||ee._||ne&&!ne.endsWith(`
`))return null;let ie="";re.split(`
`).every(ae=>!vt.some(ce=>ce.test(ae))&&(ie+=ae+`
`,ae.trim()));const oe=ie.trimEnd();return oe==""?null:[ie,oe]}function Bt(re){try{if(decodeURIComponent(re).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data):/i))return null}catch{return null}return re}function Tt(re){return re.replace(tt,"$1")}function jt(re,ee,ne){const ie=ne.u||!1,oe=ne._||!1;ne.u=!0,ne._=!0;const ae=re(ee,ne);return ne.u=ie,ne._=oe,ae}function Ct(re,ee,ne){const ie=ne.u||!1,oe=ne._||!1;ne.u=!1,ne._=!0;const ae=re(ee,ne);return ne.u=ie,ne._=oe,ae}function Zt(re,ee,ne){return ne.u=!1,re(ee+`

`,ne)}const Dt=(re,ee,ne)=>({S:jt(ee,re[1],ne)});function Nt(){return{}}function Ft$1(){return null}function Pt(...re){return re.filter(Boolean).join(" ")}function Gt(re,ee,ne){let ie=re;const oe=ee.split(".");for(;oe.length&&(ie=ie[oe[0]],ie!==void 0);)oe.shift();return ie||ne}var Ht;function qt(re,ee={}){ee.overrides=ee.overrides||{},ee.slugify=ee.slugify||$t$1,ee.namedCodesToUnicode=ee.namedCodesToUnicode?n$7({},o$5,ee.namedCodesToUnicode):o$5;const ne=ee.createElement||reactExports.createElement;function ie(ve,ye,...be){const Ce=Gt(ee.overrides,`${ve}.props`,{});return ne(function(Se,$e){const Te=Gt($e,Se);return Te?typeof Te=="function"||typeof Te=="object"&&"render"in Te?Te:Gt($e,`${Se}.component`,Se):Se}(ve,ee.overrides),n$7({},ye,Ce,{className:Pt(ye==null?void 0:ye.className,Ce.className)||void 0}),...be)}function oe(ve){let ye=!1;ee.forceInline?ye=!0:ee.forceBlock||(ye=D.test(ve)===!1);const be=fe(he(ye?ve:`${ve.trimEnd().replace(K,"")}

`,{u:ye}));for(;typeof be[be.length-1]=="string"&&!be[be.length-1].trim();)be.pop();if(ee.wrapper===null)return be;const Ce=ee.wrapper||(ye?"span":"div");let Se;if(be.length>1||ee.forceWrapper)Se=be;else{if(be.length===1)return Se=be[0],typeof Se=="string"?ie("span",{key:"outer"},Se):Se;Se=null}return reactExports.createElement(Ce,{key:"outer"},Se)}function ae(ve){const ye=ve.match(a$3);return ye?ye.reduce(function(be,Ce,Se){const $e=Ce.indexOf("=");if($e!==-1){const Te=function(De){return De.indexOf("-")!==-1&&De.match(E$1)===null&&(De=De.replace(O,function(Oe,Be){return Be.toUpperCase()})),De}(Ce.slice(0,$e)).trim(),Ne=function(De){const Oe=De[0];return(Oe==='"'||Oe==="'")&&De.length>=2&&De[De.length-1]===Oe?De.slice(1,-1):De}(Ce.slice($e+1).trim()),Ie=r$5[Te]||Te,ke=be[Ie]=function(De,Oe){return De==="style"?Oe.split(/;\s?/).reduce(function(Be,Me){const Le=Me.slice(0,Me.indexOf(":"));return Be[Le.replace(/(-[a-z])/g,je=>je[1].toUpperCase())]=Me.slice(Le.length+1).trim(),Be},{}):De==="href"?Bt(Oe):(Oe.match(L)&&(Oe=Oe.slice(1,Oe.length-1)),Oe==="true"||Oe!=="false"&&Oe)}(Te,Ne);typeof ke=="string"&&($$1.test(ke)||A$3.test(ke))&&(be[Ie]=reactExports.cloneElement(oe(ke.trim()),{key:Se}))}else Ce!=="style"&&(be[r$5[Ce]||Ce]=!0);return be},{}):void 0}const ce=[],le={},ue={blockQuote:{t:It(i$5),i:Ht.HIGH,l:(ve,ye,be)=>({S:ye(ve[0].replace(s$5,""),be)}),h:(ve,ye,be)=>ie("blockquote",{key:be.k},ye(ve.S,be))},breakLine:{t:Mt(l$4),i:Ht.HIGH,l:Nt,h:(ve,ye,be)=>ie("br",{key:be.k})},breakThematic:{t:It(f$2),i:Ht.HIGH,l:Nt,h:(ve,ye,be)=>ie("hr",{key:be.k})},codeBlock:{t:It(p$4),i:Ht.MAX,l:ve=>({S:ve[0].replace(/^ {4}/gm,"").replace(/\n+$/,""),R:void 0}),h:(ve,ye,be)=>ie("pre",{key:be.k},ie("code",n$7({},ve.I,{className:ve.R?`lang-${ve.R}`:""}),ve.S))},codeFenced:{t:It(d$3),i:Ht.MAX,l:ve=>({I:ae(ve[3]||""),S:ve[4],R:ve[2]||void 0,type:"codeBlock"})},codeInline:{t:Rt(g$3),i:Ht.LOW,l:ve=>({S:ve[2]}),h:(ve,ye,be)=>ie("code",{key:be.k},ve.S)},footnote:{t:It(h$3),i:Ht.MAX,l:ve=>(ce.push({M:ve[2],O:ve[1]}),{}),h:Ft$1},footnoteReference:{t:Lt(k$2),i:Ht.HIGH,l:ve=>({S:ve[1],B:`#${ee.slugify(ve[1])}`}),h:(ve,ye,be)=>ie("a",{key:be.k,href:Bt(ve.B)},ie("sup",{key:be.k},ve.S))},gfmTask:{t:Lt(b$3),i:Ht.HIGH,l:ve=>({T:ve[1].toLowerCase()==="x"}),h:(ve,ye,be)=>ie("input",{checked:ve.T,key:be.k,readOnly:!0,type:"checkbox"})},heading:{t:It(v$2),i:Ht.HIGH,l:(ve,ye,be)=>({S:jt(ye,ve[2],be),j:ee.slugify(ve[2]),C:ve[1].length}),h:(ve,ye,be)=>ie(`h${ve.C}`,{id:ve.j,key:be.k},ye(ve.S,be))},headingSetext:{t:It(S$2),i:Ht.MAX,l:(ve,ye,be)=>({S:jt(ye,ve[1],be),C:ve[2]==="="?1:2,type:"heading"})},htmlComment:{t:Mt(z$2),i:Ht.HIGH,l:()=>({}),h:Ft$1},image:{t:Rt(bt),i:Ht.HIGH,l:ve=>({Z:ve[1],B:Tt(ve[2]),D:ve[3]}),h:(ve,ye,be)=>ie("img",{key:be.k,alt:ve.Z||void 0,title:ve.D||void 0,src:Bt(ve.B)})},link:{t:Lt(xt),i:Ht.LOW,l:(ve,ye,be)=>({S:Ct(ye,ve[1],be),B:Tt(ve[2]),D:ve[3]}),h:(ve,ye,be)=>ie("a",{key:be.k,href:Bt(ve.B),title:ve.D},ye(ve.S,be))},linkAngleBraceStyleDetector:{t:Lt(M$2),i:Ht.MAX,l:ve=>({S:[{S:ve[1],type:"text"}],B:ve[1],type:"link"})},linkBareUrlDetector:{t:(ve,ye)=>ye.N?null:Lt(R$1)(ve,ye),i:Ht.MAX,l:ve=>({S:[{S:ve[1],type:"text"}],B:ve[1],D:void 0,type:"link"})},linkMailtoDetector:{t:Lt(I$2),i:Ht.MAX,l(ve){let ye=ve[1],be=ve[1];return u$1.test(be)||(be="mailto:"+be),{S:[{S:ye.replace("mailto:",""),type:"text"}],B:be,type:"link"}}},orderedList:yt$1(ie,1),unorderedList:yt$1(ie,2),newlineCoalescer:{t:It(m$4),i:Ht.LOW,l:Nt,h:()=>`
`},paragraph:{t:Ot$1,i:Ht.LOW,l:Dt,h:(ve,ye,be)=>ie("p",{key:be.k},ye(ve.S,be))},ref:{t:Lt(T$1),i:Ht.MAX,l:ve=>(le[ve[1]]={B:ve[2],D:ve[4]},{}),h:Ft$1},refImage:{t:Rt(j$1),i:Ht.MAX,l:ve=>({Z:ve[1]||void 0,F:ve[2]}),h:(ve,ye,be)=>ie("img",{key:be.k,alt:ve.Z,src:Bt(le[ve.F].B),title:le[ve.F].D})},refLink:{t:Lt(C$2),i:Ht.MAX,l:(ve,ye,be)=>({S:ye(ve[1],be),P:ye(ve[0].replace(Z$1,"\\$1"),be),F:ve[2]}),h:(ve,ye,be)=>le[ve.F]?ie("a",{key:be.k,href:Bt(le[ve.F].B),title:le[ve.F].D},ye(ve.S,be)):ie("span",{key:be.k},ye(ve.P,be))},table:{t:It(B$1),i:Ht.HIGH,l:Et,h:(ve,ye,be)=>ie("table",{key:be.k},ie("thead",null,ie("tr",null,ve.L.map(function(Ce,Se){return ie("th",{key:Se,style:At(ve,Se)},ye(Ce,be))}))),ie("tbody",null,ve.A.map(function(Ce,Se){return ie("tr",{key:Se},Ce.map(function($e,Te){return ie("td",{key:Te,style:At(ve,Te)},ye($e,be))}))})))},tableSeparator:{t:function(ve,ye){return ye.v?F.exec(ve):null},i:Ht.HIGH,l:function(){return{type:"tableSeparator"}},h:()=>" | "},text:{t:Mt(J),i:Ht.MIN,l:ve=>({S:ve[0].replace(w$2,(ye,be)=>ee.namedCodesToUnicode[be]?ee.namedCodesToUnicode[be]:ye)}),h:ve=>ve.S},textBolded:{t:Rt(V$1),i:Ht.MED,l:(ve,ye,be)=>({S:ye(ve[2],be)}),h:(ve,ye,be)=>ie("strong",{key:be.k},ye(ve.S,be))},textEmphasized:{t:Rt(W),i:Ht.LOW,l:(ve,ye,be)=>({S:ye(ve[2],be)}),h:(ve,ye,be)=>ie("em",{key:be.k},ye(ve.S,be))},textEscaped:{t:Rt(X),i:Ht.HIGH,l:ve=>({S:ve[1],type:"text"})},textStrikethroughed:{t:Rt(Q$1),i:Ht.LOW,l:Dt,h:(ve,ye,be)=>ie("del",{key:be.k},ye(ve.S,be))}};ee.disableParsingRawHTML!==!0&&(ue.htmlBlock={t:Mt($$1),i:Ht.HIGH,l(ve,ye,be){const[,Ce]=ve[3].match(Y),Se=new RegExp(`^${Ce}`,"gm"),$e=ve[3].replace(Se,""),Te=(Ne=$e,St.some(Oe=>Oe.test(Ne))?Zt:jt);var Ne;const Ie=ve[1].toLowerCase(),ke=c$5.indexOf(Ie)!==-1;be.N=be.N||Ie==="a";const De=ke?ve[3]:Te(ye,$e,be);return be.N=!1,{I:ae(ve[2]),S:De,G:ke,H:ke?Ie:ve[1]}},h:(ve,ye,be)=>ie(ve.H,n$7({key:be.k},ve.I),ve.G?ve.S:ye(ve.S,be))},ue.htmlSelfClosing={t:Mt(A$3),i:Ht.HIGH,l:ve=>({I:ae(ve[2]||""),H:ve[1]}),h:(ve,ye,be)=>ie(ve.H,n$7({},ve.I,{key:be.k}))});const he=function(ve){let ye=Object.keys(ve);function be(Ce,Se){let $e=[],Te="";for(;Ce;){let Ne=0;for(;Ne<ye.length;){const Ie=ye[Ne],ke=ve[Ie],De=ke.t(Ce,Se,Te);if(De){const Oe=De[0];Ce=Ce.substring(Oe.length);const Be=ke.l(De,be,Se);Be.type==null&&(Be.type=Ie),$e.push(Be),Te=Oe;break}Ne++}}return $e}return ye.sort(function(Ce,Se){let $e=ve[Ce].i,Te=ve[Se].i;return $e!==Te?$e-Te:Ce<Se?-1:1}),function(Ce,Se){return be(function($e){return $e.replace(y$2,`
`).replace(x$5,"").replace(N$1,"    ")}(Ce),Se)}}(ue),fe=(me=function(ve){return function(ye,be,Ce){return ve[ye.type].h(ye,be,Ce)}}(ue),function ve(ye,be={}){if(Array.isArray(ye)){const Ce=be.k,Se=[];let $e=!1;for(let Te=0;Te<ye.length;Te++){be.k=Te;const Ne=ve(ye[Te],be),Ie=typeof Ne=="string";Ie&&$e?Se[Se.length-1]+=Ne:Ne!==null&&Se.push(Ne),$e=Ie}return be.k=Ce,Se}return me(ye,ve,be)});var me;const ge=oe(re);return ce.length?ie("div",null,ge,ie("footer",{key:"footer"},ce.map(function(ve){return ie("div",{id:ee.slugify(ve.O),key:ve.O},ve.O,fe(he(ve.M,{u:!0})))}))):ge}(function(re){re[re.MAX=0]="MAX",re[re.HIGH=1]="HIGH",re[re.MED=2]="MED",re[re.LOW=3]="LOW",re[re.MIN=4]="MIN"})(Ht||(Ht={}));const Markdown$1=re=>{let{children:ee,options:ne}=re,ie=function(oe,ae){if(oe==null)return{};var ce,le,ue={},he=Object.keys(oe);for(le=0;le<he.length;le++)ae.indexOf(ce=he[le])>=0||(ue[ce]=oe[ce]);return ue}(re,e$5);return reactExports.cloneElement(qt(ee,ne),ie)},content$4="_content_1qqc3_216",styles$X={content:content$4},LinkRenderer=re=>jsx$1("a",{href:re.href,target:"_blank",rel:"noreferrer",children:re.children}),Markdown=({children:re,className:ee})=>jsx$1(Markdown$1,{options:{forceBlock:!0,overrides:{a:{component:LinkRenderer},hr:{props:{className:styles$X.spacer}}}},className:`${ee||""} ${styles$X.content}`,children:re}),subscribeWithSelectorImpl=re=>(ee,ne,ie)=>{const oe=ie.subscribe;return ie.subscribe=(ce,le,ue)=>{let he=ce;if(le){const fe=(ue==null?void 0:ue.equalityFn)||Object.is;let me=ce(ie.getState());he=ge=>{const ve=ce(ge);if(!fe(me,ve)){const ye=me;le(me=ve,ye)}},ue!=null&&ue.fireImmediately&&le(me,me)}return oe(he)},re(ee,ne,ie)},subscribeWithSelector=subscribeWithSelectorImpl;function createJSONStorage(re){let ee;try{ee=re()}catch{return}return{getItem:ie=>{var oe;const ae=le=>le===null?null:JSON.parse(le),ce=(oe=ee.getItem(ie))!=null?oe:null;return ce instanceof Promise?ce.then(ae):ae(ce)},setItem:(ie,oe)=>ee.setItem(ie,JSON.stringify(oe)),removeItem:ie=>ee.removeItem(ie)}}const toThenable=re=>ee=>{try{const ne=re(ee);return ne instanceof Promise?ne:{then(ie){return toThenable(ie)(ne)},catch(ie){return this}}}catch(ne){return{then(ie){return this},catch(ie){return toThenable(ie)(ne)}}}},oldImpl=(re,ee)=>(ne,ie,oe)=>{let ae={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:Ce=>Ce,version:0,merge:(Ce,Se)=>({...Se,...Ce}),...ee},ce=!1;const le=new Set,ue=new Set;let he;try{he=ae.getStorage()}catch{}if(!he)return re((...Ce)=>{console.warn(`[zustand persist middleware] Unable to update item '${ae.name}', the given storage is currently unavailable.`),ne(...Ce)},ie,oe);const fe=toThenable(ae.serialize),me=()=>{const Ce=ae.partialize({...ie()});let Se;const $e=fe({state:Ce,version:ae.version}).then(Te=>he.setItem(ae.name,Te)).catch(Te=>{Se=Te});if(Se)throw Se;return $e},ge=oe.setState;oe.setState=(Ce,Se)=>{ge(Ce,Se),me()};const ve=re((...Ce)=>{ne(...Ce),me()},ie,oe);let ye;const be=()=>{var Ce;if(!he)return;ce=!1,le.forEach($e=>$e(ie()));const Se=((Ce=ae.onRehydrateStorage)==null?void 0:Ce.call(ae,ie()))||void 0;return toThenable(he.getItem.bind(he))(ae.name).then($e=>{if($e)return ae.deserialize($e)}).then($e=>{if($e)if(typeof $e.version=="number"&&$e.version!==ae.version){if(ae.migrate)return ae.migrate($e.state,$e.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return $e.state}).then($e=>{var Te;return ye=ae.merge($e,(Te=ie())!=null?Te:ve),ne(ye,!0),me()}).then(()=>{Se==null||Se(ye,void 0),ce=!0,ue.forEach($e=>$e(ye))}).catch($e=>{Se==null||Se(void 0,$e)})};return oe.persist={setOptions:Ce=>{ae={...ae,...Ce},Ce.getStorage&&(he=Ce.getStorage())},clearStorage:()=>{he==null||he.removeItem(ae.name)},getOptions:()=>ae,rehydrate:()=>be(),hasHydrated:()=>ce,onHydrate:Ce=>(le.add(Ce),()=>{le.delete(Ce)}),onFinishHydration:Ce=>(ue.add(Ce),()=>{ue.delete(Ce)})},be(),ye||ve},newImpl=(re,ee)=>(ne,ie,oe)=>{let ae={storage:createJSONStorage(()=>localStorage),partialize:be=>be,version:0,merge:(be,Ce)=>({...Ce,...be}),...ee},ce=!1;const le=new Set,ue=new Set;let he=ae.storage;if(!he)return re((...be)=>{console.warn(`[zustand persist middleware] Unable to update item '${ae.name}', the given storage is currently unavailable.`),ne(...be)},ie,oe);const fe=()=>{const be=ae.partialize({...ie()});return he.setItem(ae.name,{state:be,version:ae.version})},me=oe.setState;oe.setState=(be,Ce)=>{me(be,Ce),fe()};const ge=re((...be)=>{ne(...be),fe()},ie,oe);let ve;const ye=()=>{var be;if(!he)return;ce=!1,le.forEach(Se=>Se(ie()));const Ce=((be=ae.onRehydrateStorage)==null?void 0:be.call(ae,ie()))||void 0;return toThenable(he.getItem.bind(he))(ae.name).then(Se=>{if(Se)if(typeof Se.version=="number"&&Se.version!==ae.version){if(ae.migrate)return ae.migrate(Se.state,Se.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return Se.state}).then(Se=>{var $e;return ve=ae.merge(Se,($e=ie())!=null?$e:ge),ne(ve,!0),fe()}).then(()=>{Ce==null||Ce(ve,void 0),ce=!0,ue.forEach(Se=>Se(ve))}).catch(Se=>{Ce==null||Ce(void 0,Se)})};return oe.persist={setOptions:be=>{ae={...ae,...be},be.storage&&(he=be.storage)},clearStorage:()=>{he==null||he.removeItem(ae.name)},getOptions:()=>ae,rehydrate:()=>ye(),hasHydrated:()=>ce,onHydrate:be=>(le.add(be),()=>{le.delete(be)}),onFinishHydration:be=>(ue.add(be),()=>{ue.delete(be)})},ye(),ve||ge},persistImpl=(re,ee)=>{var ne;return"getStorage"in ee||"serialize"in ee||"deserialize"in ee?(((ne={VITE_TEIA_REPORT:"https://lists.teia.art",VITE_LOGOS:"https://lists.teia.art/teia-logos/dist",VITE_TEIA_GRAPHQL_API:"https://teztok.teia.rocks/v1/graphql",VITE_TEZOSDOMAINS_GRAPHQL_API:"https://api.tezos.domains/graphql",VITE_TZKT_API:"https://api.tzkt.io",VITE_TZPROFILES_GRAPHQL_API:"https://indexer.tzprofiles.com/v1/graphql",VITE_IMGPROXY:"https://imgproxy.teia.rocks",VITE_IPFS_UPLOAD_PROXY:"https://ipfsproxy.teia.rocks",VITE_IPFS_DEFAULT_GATEWAY:"CDN",VITE_TEZOS_RPC:"https://mainnet.teia.rocks",BASE_URL:"/teia-ui/previews/pr-437/",MODE:"production",DEV:!1,PROD:!0,SSR:!1})==null?void 0:ne.MODE)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),oldImpl(re,ee)):newImpl(re,ee)},persist=persistImpl,useModalStore=create$2()(subscribeWithSelector((re,ee)=>({collapsed:!0,visible:!1,message:"",progress:!1,confirm:!0,confirmCallback:()=>ee().close(),show:(ne,ie)=>{re({message:`# ${ne}
${ie||""}`,progress:!1,visible:!0,confirm:!0,confirmCallback:()=>{re({visible:!1})}})},showError(ne,ie){const oe=ee().show;console.error(ie),ie instanceof Error&&oe(`${ne} (Error)`,ie.message),ie instanceof ParametersInvalidBeaconError&&oe(`${ne} (${ie.title})`,ie.description)},setCollapsed:ne=>re({collapsed:ne}),toggleMenu:()=>re({collapsed:!ee().collapsed}),step:(ne,ie,oe)=>{oe&&window.scrollTo(0,0),re({progress:!0,visible:!0,confirm:!1,message:`# ${ne}
${ie}`})},close:()=>{re({visible:!1,progress:!1})}}))),FeedbackComponent=()=>{const[re,ee,ne,ie,oe]=useModalStore(ae=>[ae.visible,ae.message,ae.progress,ae.confirm,ae.confirmCallback]);return jsx$1(AnimatePresence,{children:re&&jsx$1(motion.div,{className:styles$Y.container,...fadeIn(),children:jsxs("div",{className:styles$Y.content,children:[jsx$1(Markdown,{className:styles$Y.message,children:ee}),jsx$1("div",{className:styles$Y.loader,children:ne&&jsx$1(Loading,{})}),ie&&jsx$1("div",{className:styles$Y.buttons,children:jsx$1(Button,{shadow_box:!0,onClick:()=>oe(),children:"close"})})]})})})},container$z="_container_1y6ng_216",content$3="_content_1y6ng_227",feed$1="_feed_1y6ng_235",styles$W={container:container$z,content:content$3,feed:feed$1};function useTitle(re){reactExports.useEffect(()=>{document.title=re?`${re} - teia`:"teia"},[re])}const footer={mint:"This open-source, experimental dApp is developed and maintained by the Teia Community and powered by the Tezos blockchain.",warning:"use it consciously. visit artists profiles. be careful with copy minters."},mint={supports:"Supports"},about$1={paragraphs:["a collaborative artwork made of artworks, a place for ideas and creative works.","a non-profit, open-source online platform for trading digital assets as OBJKT NFTs.","a collective, aligning under the values of sustainability, accessibility, and equity.","owned and maintained by its community, built and improved by its participants.","Teia is and always will be a work-in-progress.","If you're having trouble with the website, please report an %ISSUE%"]},en={footer,mint,about:about$1};function useLanguage(){return{language:en}}const container$y="_container_hi362_216",pinned="_pinned_hi362_226",content$2="_content_hi362_231",minimal$2="_minimal_hi362_257",logo$2="_logo_hi362_260",menus="_menus_hi362_264",menu_left$2="_menu_left_hi362_272",menu_right$1="_menu_right_hi362_279",address$2="_address_hi362_286",copyright="_copyright_hi362_307",state_buttons$1="_state_buttons_hi362_311",styles$V={container:container$y,pinned,content:content$2,minimal:minimal$2,logo:logo$2,menus,menu_left:menu_left$2,menu_right:menu_right$1,address:address$2,copyright,state_buttons:state_buttons$1},walletPreview=re=>{try{return`${re.slice(0,5)}...${re.slice(re.length-5,re.length)}`}catch{return""}},capitalizeFirstLetter=re=>re[0].toUpperCase()+re.slice(1),theme_selection="_theme_selection_1vkey_216",menu$2="_menu_1vkey_220",content$1="_content_1vkey_237",menu_label="_menu_label_1vkey_248",address$1="_address_1vkey_261",menu_left$1="_menu_left_1vkey_267",menu_right="_menu_right_1vkey_268",disabled$1="_disabled_1vkey_299",state_buttons="_state_buttons_1vkey_303",line$4="_line_1vkey_312",styles$U={theme_selection,menu:menu$2,content:content$1,menu_label,address:address$1,menu_left:menu_left$1,menu_right,disabled:disabled$1,state_buttons,line:line$4};var lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lodash.exports;(function(re,ee){(function(){var ne,ie="4.17.21",oe=200,ae="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",ce="Expected a function",le="Invalid `variable` option passed into `_.template`",ue="__lodash_hash_undefined__",he=500,fe="__lodash_placeholder__",me=1,ge=2,ve=4,ye=1,be=2,Ce=1,Se=2,$e=4,Te=8,Ne=16,Ie=32,ke=64,De=128,Oe=256,Be=512,Me=30,Le="...",je=800,ze=16,Ve=1,He=2,We=3,Ye=1/0,Ue=9007199254740991,Ke=17976931348623157e292,Xe=0/0,Vt=4294967295,Wt=Vt-1,Kt=Vt>>>1,tn=[["ary",De],["bind",Ce],["bindKey",Se],["curry",Te],["curryRight",Ne],["flip",Be],["partial",Ie],["partialRight",ke],["rearg",Oe]],Xt="[object Arguments]",dn="[object Array]",nn="[object AsyncFunction]",rn="[object Boolean]",vn="[object Date]",yn="[object DOMException]",Sn="[object Error]",kn="[object Function]",Bn="[object GeneratorFunction]",Dn="[object Map]",Je="[object Number]",Yt="[object Null]",an="[object Object]",An="[object Promise]",fn="[object Proxy]",mn="[object RegExp]",Tn="[object Set]",Vn="[object String]",Gn="[object Symbol]",Pn="[object Undefined]",Un="[object WeakMap]",ls="[object WeakSet]",Rn="[object ArrayBuffer]",Kn="[object DataView]",pn="[object Float32Array]",sn="[object Float64Array]",Nn="[object Int8Array]",wn="[object Int16Array]",is="[object Int32Array]",Cs="[object Uint8Array]",ss="[object Uint8ClampedArray]",bn="[object Uint16Array]",$n="[object Uint32Array]",Ln=/\b__p \+= '';/g,zn=/\b(__p \+=) '' \+/g,Xn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,cs=/&(?:amp|lt|gt|quot|#39);/g,fs=/[&<>"']/g,ms=RegExp(cs.source),ds=RegExp(fs.source),_s=/<%-([\s\S]+?)%>/g,ys=/<%([\s\S]+?)%>/g,ws=/<%=([\s\S]+?)%>/g,lr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ms=/^\w*$/,vr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tr=/[\\^$.*+?()[\]{}|]/g,Kr=RegExp(Tr.source),Ls=/^\s+/,Ns=/\s/,ko=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Yr=/\{\n\/\* \[wrapped with (.+)\] \*/,fr=/,? & /,Fo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,pi=/[()=,{}\[\]\/\s]/,Oo=/\\(\\)?/g,Ro=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Bi=/\w*$/,Mo=/^[-+]0x[0-9a-f]+$/i,Bo=/^0b[01]+$/i,Po=/^\[object .+?Constructor\]$/,Lo=/^0o[0-7]+$/i,zo=/^(?:0|[1-9]\d*)$/,Vo=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xr=/($^)/,jo=/['\n\r\u2028\u2029\\]/g,Jr="\\ud800-\\udfff",Uo="\\u0300-\\u036f",Go="\\ufe20-\\ufe2f",qo="\\u20d0-\\u20ff",Li=Uo+Go+qo,zi="\\u2700-\\u27bf",Vi="a-z\\xdf-\\xf6\\xf8-\\xff",Ho="\\xac\\xb1\\xd7\\xf7",Zs="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fi="\\u2000-\\u206f",ji=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",mi="A-Z\\xc0-\\xd6\\xd8-\\xde",Ui="\\ufe0e\\ufe0f",Ir=Ho+Zs+fi+ji,gi="['’]",Wo="["+Jr+"]",Ai="["+Ir+"]",Zr="["+Li+"]",Gi="\\d+",Re="["+zi+"]",Ge="["+Vi+"]",Ut="[^"+Jr+Ir+Gi+zi+Vi+mi+"]",cn="\\ud83c[\\udffb-\\udfff]",En="(?:"+Zr+"|"+cn+")",Fn="[^"+Jr+"]",Jn="(?:\\ud83c[\\udde6-\\uddff]){2}",os="[\\ud800-\\udbff][\\udc00-\\udfff]",xs="["+mi+"]",$s="\\u200d",uc="(?:"+Ge+"|"+Ut+")",Iu="(?:"+xs+"|"+Ut+")",dc="(?:"+gi+"(?:d|ll|m|re|s|t|ve))?",hc="(?:"+gi+"(?:D|LL|M|RE|S|T|VE))?",pc=En+"?",fc="["+Ui+"]?",Nu="(?:"+$s+"(?:"+[Fn,Jn,os].join("|")+")"+fc+pc+")*",Du="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ku="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mc=fc+pc+Nu,Fu="(?:"+[Re,Jn,os].join("|")+")"+mc,Ou="(?:"+[Fn+Zr+"?",Zr,Jn,os,Wo].join("|")+")",Ru=RegExp(gi,"g"),Mu=RegExp(Zr,"g"),Qo=RegExp(cn+"(?="+cn+")|"+Ou+mc,"g"),Bu=RegExp([xs+"?"+Ge+"+"+dc+"(?="+[Ai,xs,"$"].join("|")+")",Iu+"+"+hc+"(?="+[Ai,xs+uc,"$"].join("|")+")",xs+"?"+uc+"+"+dc,xs+"+"+hc,ku,Du,Gi,Fu].join("|"),"g"),Pu=RegExp("["+$s+Jr+Li+Ui+"]"),Lu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zu=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vu=-1,vs={};vs[pn]=vs[sn]=vs[Nn]=vs[wn]=vs[is]=vs[Cs]=vs[ss]=vs[bn]=vs[$n]=!0,vs[Xt]=vs[dn]=vs[Rn]=vs[rn]=vs[Kn]=vs[vn]=vs[Sn]=vs[kn]=vs[Dn]=vs[Je]=vs[an]=vs[mn]=vs[Tn]=vs[Vn]=vs[Un]=!1;var As={};As[Xt]=As[dn]=As[Rn]=As[Kn]=As[rn]=As[vn]=As[pn]=As[sn]=As[Nn]=As[wn]=As[is]=As[Dn]=As[Je]=As[an]=As[mn]=As[Tn]=As[Vn]=As[Gn]=As[Cs]=As[ss]=As[bn]=As[$n]=!0,As[Sn]=As[kn]=As[Un]=!1;var ju={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Uu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gu={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Hu=parseFloat,Wu=parseInt,gc=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,Qu=typeof self=="object"&&self&&self.Object===Object&&self,Os=gc||Qu||Function("return this")(),Ko=ee&&!ee.nodeType&&ee,Lr=Ko&&!0&&re&&!re.nodeType&&re,Ac=Lr&&Lr.exports===Ko,Yo=Ac&&gc.process,er=function(){try{var un=Lr&&Lr.require&&Lr.require("util").types;return un||Yo&&Yo.binding&&Yo.binding("util")}catch{}}(),vc=er&&er.isArrayBuffer,yc=er&&er.isDate,xc=er&&er.isMap,bc=er&&er.isRegExp,Ec=er&&er.isSet,Cc=er&&er.isTypedArray;function Ws(un,xn,gn){switch(gn.length){case 0:return un.call(xn);case 1:return un.call(xn,gn[0]);case 2:return un.call(xn,gn[0],gn[1]);case 3:return un.call(xn,gn[0],gn[1],gn[2])}return un.apply(xn,gn)}function Ku(un,xn,gn,Mn){for(var Qn=-1,us=un==null?0:un.length;++Qn<us;){var Ds=un[Qn];xn(Mn,Ds,gn(Ds),un)}return Mn}function tr(un,xn){for(var gn=-1,Mn=un==null?0:un.length;++gn<Mn&&xn(un[gn],gn,un)!==!1;);return un}function Yu(un,xn){for(var gn=un==null?0:un.length;gn--&&xn(un[gn],gn,un)!==!1;);return un}function Sc(un,xn){for(var gn=-1,Mn=un==null?0:un.length;++gn<Mn;)if(!xn(un[gn],gn,un))return!1;return!0}function Nr(un,xn){for(var gn=-1,Mn=un==null?0:un.length,Qn=0,us=[];++gn<Mn;){var Ds=un[gn];xn(Ds,gn,un)&&(us[Qn++]=Ds)}return us}function qi(un,xn){var gn=un==null?0:un.length;return!!gn&&ei(un,xn,0)>-1}function Xo(un,xn,gn){for(var Mn=-1,Qn=un==null?0:un.length;++Mn<Qn;)if(gn(xn,un[Mn]))return!0;return!1}function bs(un,xn){for(var gn=-1,Mn=un==null?0:un.length,Qn=Array(Mn);++gn<Mn;)Qn[gn]=xn(un[gn],gn,un);return Qn}function Dr(un,xn){for(var gn=-1,Mn=xn.length,Qn=un.length;++gn<Mn;)un[Qn+gn]=xn[gn];return un}function Jo(un,xn,gn,Mn){var Qn=-1,us=un==null?0:un.length;for(Mn&&us&&(gn=un[++Qn]);++Qn<us;)gn=xn(gn,un[Qn],Qn,un);return gn}function Xu(un,xn,gn,Mn){var Qn=un==null?0:un.length;for(Mn&&Qn&&(gn=un[--Qn]);Qn--;)gn=xn(gn,un[Qn],Qn,un);return gn}function Zo(un,xn){for(var gn=-1,Mn=un==null?0:un.length;++gn<Mn;)if(xn(un[gn],gn,un))return!0;return!1}var Ju=ea("length");function Zu(un){return un.split("")}function ed(un){return un.match(Fo)||[]}function wc(un,xn,gn){var Mn;return gn(un,function(Qn,us,Ds){if(xn(Qn,us,Ds))return Mn=us,!1}),Mn}function Hi(un,xn,gn,Mn){for(var Qn=un.length,us=gn+(Mn?1:-1);Mn?us--:++us<Qn;)if(xn(un[us],us,un))return us;return-1}function ei(un,xn,gn){return xn===xn?pd(un,xn,gn):Hi(un,$c,gn)}function nd(un,xn,gn,Mn){for(var Qn=gn-1,us=un.length;++Qn<us;)if(Mn(un[Qn],xn))return Qn;return-1}function $c(un){return un!==un}function Tc(un,xn){var gn=un==null?0:un.length;return gn?na(un,xn)/gn:Xe}function ea(un){return function(xn){return xn==null?ne:xn[un]}}function ta(un){return function(xn){return un==null?ne:un[xn]}}function Ic(un,xn,gn,Mn,Qn){return Qn(un,function(us,Ds,gs){gn=Mn?(Mn=!1,us):xn(gn,us,Ds,gs)}),gn}function sd(un,xn){var gn=un.length;for(un.sort(xn);gn--;)un[gn]=un[gn].value;return un}function na(un,xn){for(var gn,Mn=-1,Qn=un.length;++Mn<Qn;){var us=xn(un[Mn]);us!==ne&&(gn=gn===ne?us:gn+us)}return gn}function sa(un,xn){for(var gn=-1,Mn=Array(un);++gn<un;)Mn[gn]=xn(gn);return Mn}function rd(un,xn){return bs(xn,function(gn){return[gn,un[gn]]})}function Nc(un){return un&&un.slice(0,Oc(un)+1).replace(Ls,"")}function Qs(un){return function(xn){return un(xn)}}function ra(un,xn){return bs(xn,function(gn){return un[gn]})}function vi(un,xn){return un.has(xn)}function Dc(un,xn){for(var gn=-1,Mn=un.length;++gn<Mn&&ei(xn,un[gn],0)>-1;);return gn}function kc(un,xn){for(var gn=un.length;gn--&&ei(xn,un[gn],0)>-1;);return gn}function id(un,xn){for(var gn=un.length,Mn=0;gn--;)un[gn]===xn&&++Mn;return Mn}var od=ta(ju),ad=ta(Uu);function cd(un){return"\\"+qu[un]}function ld(un,xn){return un==null?ne:un[xn]}function ti(un){return Pu.test(un)}function ud(un){return Lu.test(un)}function dd(un){for(var xn,gn=[];!(xn=un.next()).done;)gn.push(xn.value);return gn}function ia(un){var xn=-1,gn=Array(un.size);return un.forEach(function(Mn,Qn){gn[++xn]=[Qn,Mn]}),gn}function Fc(un,xn){return function(gn){return un(xn(gn))}}function kr(un,xn){for(var gn=-1,Mn=un.length,Qn=0,us=[];++gn<Mn;){var Ds=un[gn];(Ds===xn||Ds===fe)&&(un[gn]=fe,us[Qn++]=gn)}return us}function Wi(un){var xn=-1,gn=Array(un.size);return un.forEach(function(Mn){gn[++xn]=Mn}),gn}function hd(un){var xn=-1,gn=Array(un.size);return un.forEach(function(Mn){gn[++xn]=[Mn,Mn]}),gn}function pd(un,xn,gn){for(var Mn=gn-1,Qn=un.length;++Mn<Qn;)if(un[Mn]===xn)return Mn;return-1}function md(un,xn,gn){for(var Mn=gn+1;Mn--;)if(un[Mn]===xn)return Mn;return Mn}function ni(un){return ti(un)?Ad(un):Ju(un)}function ur(un){return ti(un)?vd(un):Zu(un)}function Oc(un){for(var xn=un.length;xn--&&Ns.test(un.charAt(xn)););return xn}var gd=ta(Gu);function Ad(un){for(var xn=Qo.lastIndex=0;Qo.test(un);)++xn;return xn}function vd(un){return un.match(Qo)||[]}function yd(un){return un.match(Bu)||[]}var xd=function un(xn){xn=xn==null?Os:si.defaults(Os.Object(),xn,si.pick(Os,zu));var gn=xn.Array,Mn=xn.Date,Qn=xn.Error,us=xn.Function,Ds=xn.Math,gs=xn.Object,oa=xn.RegExp,bd=xn.String,nr=xn.TypeError,Qi=gn.prototype,Ed=us.prototype,ri=gs.prototype,Ki=xn["__core-js_shared__"],Yi=Ed.toString,ps=ri.hasOwnProperty,Cd=0,Rc=function(){var Ee=/[^.]+$/.exec(Ki&&Ki.keys&&Ki.keys.IE_PROTO||"");return Ee?"Symbol(src)_1."+Ee:""}(),Xi=ri.toString,Sd=Yi.call(gs),wd=Os._,$d=oa("^"+Yi.call(ps).replace(Tr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ji=Ac?xn.Buffer:ne,Fr=xn.Symbol,Zi=xn.Uint8Array,Mc=Ji?Ji.allocUnsafe:ne,eo=Fc(gs.getPrototypeOf,gs),Bc=gs.create,Pc=ri.propertyIsEnumerable,to=Qi.splice,Lc=Fr?Fr.isConcatSpreadable:ne,yi=Fr?Fr.iterator:ne,zr=Fr?Fr.toStringTag:ne,no=function(){try{var Ee=Hr(gs,"defineProperty");return Ee({},"",{}),Ee}catch{}}(),Td=xn.clearTimeout!==Os.clearTimeout&&xn.clearTimeout,Id=Mn&&Mn.now!==Os.Date.now&&Mn.now,Nd=xn.setTimeout!==Os.setTimeout&&xn.setTimeout,so=Ds.ceil,ro=Ds.floor,aa=gs.getOwnPropertySymbols,Dd=Ji?Ji.isBuffer:ne,zc=xn.isFinite,kd=Qi.join,Fd=Fc(gs.keys,gs),ks=Ds.max,Bs=Ds.min,Od=Mn.now,Rd=xn.parseInt,Vc=Ds.random,Md=Qi.reverse,ca=Hr(xn,"DataView"),xi=Hr(xn,"Map"),la=Hr(xn,"Promise"),ii=Hr(xn,"Set"),bi=Hr(xn,"WeakMap"),Ci=Hr(gs,"create"),io=bi&&new bi,oi={},Bd=Wr(ca),Pd=Wr(xi),Ld=Wr(la),zd=Wr(ii),Vd=Wr(bi),oo=Fr?Fr.prototype:ne,_i=oo?oo.valueOf:ne,jc=oo?oo.toString:ne;function Qe(Ee){if(Ss(Ee)&&!Yn(Ee)&&!(Ee instanceof rs)){if(Ee instanceof rr)return Ee;if(ps.call(Ee,"__wrapped__"))return ql(Ee)}return new rr(Ee)}var ai=function(){function Ee(){}return function(we){if(!Es(we))return{};if(Bc)return Bc(we);Ee.prototype=we;var Fe=new Ee;return Ee.prototype=ne,Fe}}();function ao(){}function rr(Ee,we){this.__wrapped__=Ee,this.__actions__=[],this.__chain__=!!we,this.__index__=0,this.__values__=ne}Qe.templateSettings={escape:_s,evaluate:ys,interpolate:ws,variable:"",imports:{_:Qe}},Qe.prototype=ao.prototype,Qe.prototype.constructor=Qe,rr.prototype=ai(ao.prototype),rr.prototype.constructor=rr;function rs(Ee){this.__wrapped__=Ee,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Vt,this.__views__=[]}function jd(){var Ee=new rs(this.__wrapped__);return Ee.__actions__=Us(this.__actions__),Ee.__dir__=this.__dir__,Ee.__filtered__=this.__filtered__,Ee.__iteratees__=Us(this.__iteratees__),Ee.__takeCount__=this.__takeCount__,Ee.__views__=Us(this.__views__),Ee}function Ud(){if(this.__filtered__){var Ee=new rs(this);Ee.__dir__=-1,Ee.__filtered__=!0}else Ee=this.clone(),Ee.__dir__*=-1;return Ee}function Gd(){var Ee=this.__wrapped__.value(),we=this.__dir__,Fe=Yn(Ee),Pe=we<0,qe=Fe?Ee.length:0,Ze=rp(0,qe,this.__views__),Qt=Ze.start,Jt=Ze.end,hn=Jt-Qt,Cn=Pe?Jt:Qt-1,_n=this.__iteratees__,In=_n.length,On=0,jn=Bs(hn,this.__takeCount__);if(!Fe||!Pe&&qe==hn&&jn==hn)return hl(Ee,this.__actions__);var Hn=[];e:for(;hn--&&On<jn;){Cn+=we;for(var es=-1,Wn=Ee[Cn];++es<In;){var ns=_n[es],as=ns.iteratee,Xs=ns.type,js=as(Wn);if(Xs==He)Wn=js;else if(!js){if(Xs==Ve)continue e;break e}}Hn[On++]=Wn}return Hn}rs.prototype=ai(ao.prototype),rs.prototype.constructor=rs;function Vr(Ee){var we=-1,Fe=Ee==null?0:Ee.length;for(this.clear();++we<Fe;){var Pe=Ee[we];this.set(Pe[0],Pe[1])}}function qd(){this.__data__=Ci?Ci(null):{},this.size=0}function Hd(Ee){var we=this.has(Ee)&&delete this.__data__[Ee];return this.size-=we?1:0,we}function Wd(Ee){var we=this.__data__;if(Ci){var Fe=we[Ee];return Fe===ue?ne:Fe}return ps.call(we,Ee)?we[Ee]:ne}function Qd(Ee){var we=this.__data__;return Ci?we[Ee]!==ne:ps.call(we,Ee)}function Kd(Ee,we){var Fe=this.__data__;return this.size+=this.has(Ee)?0:1,Fe[Ee]=Ci&&we===ne?ue:we,this}Vr.prototype.clear=qd,Vr.prototype.delete=Hd,Vr.prototype.get=Wd,Vr.prototype.has=Qd,Vr.prototype.set=Kd;function yr(Ee){var we=-1,Fe=Ee==null?0:Ee.length;for(this.clear();++we<Fe;){var Pe=Ee[we];this.set(Pe[0],Pe[1])}}function Yd(){this.__data__=[],this.size=0}function Xd(Ee){var we=this.__data__,Fe=co(we,Ee);if(Fe<0)return!1;var Pe=we.length-1;return Fe==Pe?we.pop():to.call(we,Fe,1),--this.size,!0}function Jd(Ee){var we=this.__data__,Fe=co(we,Ee);return Fe<0?ne:we[Fe][1]}function Zd(Ee){return co(this.__data__,Ee)>-1}function eh(Ee,we){var Fe=this.__data__,Pe=co(Fe,Ee);return Pe<0?(++this.size,Fe.push([Ee,we])):Fe[Pe][1]=we,this}yr.prototype.clear=Yd,yr.prototype.delete=Xd,yr.prototype.get=Jd,yr.prototype.has=Zd,yr.prototype.set=eh;function xr(Ee){var we=-1,Fe=Ee==null?0:Ee.length;for(this.clear();++we<Fe;){var Pe=Ee[we];this.set(Pe[0],Pe[1])}}function th(){this.size=0,this.__data__={hash:new Vr,map:new(xi||yr),string:new Vr}}function nh(Ee){var we=bo(this,Ee).delete(Ee);return this.size-=we?1:0,we}function sh(Ee){return bo(this,Ee).get(Ee)}function rh(Ee){return bo(this,Ee).has(Ee)}function ih(Ee,we){var Fe=bo(this,Ee),Pe=Fe.size;return Fe.set(Ee,we),this.size+=Fe.size==Pe?0:1,this}xr.prototype.clear=th,xr.prototype.delete=nh,xr.prototype.get=sh,xr.prototype.has=rh,xr.prototype.set=ih;function jr(Ee){var we=-1,Fe=Ee==null?0:Ee.length;for(this.__data__=new xr;++we<Fe;)this.add(Ee[we])}function oh(Ee){return this.__data__.set(Ee,ue),this}function ah(Ee){return this.__data__.has(Ee)}jr.prototype.add=jr.prototype.push=oh,jr.prototype.has=ah;function dr(Ee){var we=this.__data__=new yr(Ee);this.size=we.size}function ch(){this.__data__=new yr,this.size=0}function lh(Ee){var we=this.__data__,Fe=we.delete(Ee);return this.size=we.size,Fe}function uh(Ee){return this.__data__.get(Ee)}function dh(Ee){return this.__data__.has(Ee)}function hh(Ee,we){var Fe=this.__data__;if(Fe instanceof yr){var Pe=Fe.__data__;if(!xi||Pe.length<oe-1)return Pe.push([Ee,we]),this.size=++Fe.size,this;Fe=this.__data__=new xr(Pe)}return Fe.set(Ee,we),this.size=Fe.size,this}dr.prototype.clear=ch,dr.prototype.delete=lh,dr.prototype.get=uh,dr.prototype.has=dh,dr.prototype.set=hh;function Uc(Ee,we){var Fe=Yn(Ee),Pe=!Fe&&Qr(Ee),qe=!Fe&&!Pe&&Pr(Ee),Ze=!Fe&&!Pe&&!qe&&di(Ee),Qt=Fe||Pe||qe||Ze,Jt=Qt?sa(Ee.length,bd):[],hn=Jt.length;for(var Cn in Ee)(we||ps.call(Ee,Cn))&&!(Qt&&(Cn=="length"||qe&&(Cn=="offset"||Cn=="parent")||Ze&&(Cn=="buffer"||Cn=="byteLength"||Cn=="byteOffset")||_r(Cn,hn)))&&Jt.push(Cn);return Jt}function Gc(Ee){var we=Ee.length;return we?Ee[xa(0,we-1)]:ne}function ph(Ee,we){return Eo(Us(Ee),Ur(we,0,Ee.length))}function fh(Ee){return Eo(Us(Ee))}function ua(Ee,we,Fe){(Fe!==ne&&!hr(Ee[we],Fe)||Fe===ne&&!(we in Ee))&&br(Ee,we,Fe)}function wi(Ee,we,Fe){var Pe=Ee[we];(!(ps.call(Ee,we)&&hr(Pe,Fe))||Fe===ne&&!(we in Ee))&&br(Ee,we,Fe)}function co(Ee,we){for(var Fe=Ee.length;Fe--;)if(hr(Ee[Fe][0],we))return Fe;return-1}function mh(Ee,we,Fe,Pe){return Or(Ee,function(qe,Ze,Qt){we(Pe,qe,Fe(qe),Qt)}),Pe}function qc(Ee,we){return Ee&&gr(we,Fs(we),Ee)}function gh(Ee,we){return Ee&&gr(we,qs(we),Ee)}function br(Ee,we,Fe){we=="__proto__"&&no?no(Ee,we,{configurable:!0,enumerable:!0,value:Fe,writable:!0}):Ee[we]=Fe}function da(Ee,we){for(var Fe=-1,Pe=we.length,qe=gn(Pe),Ze=Ee==null;++Fe<Pe;)qe[Fe]=Ze?ne:Ha(Ee,we[Fe]);return qe}function Ur(Ee,we,Fe){return Ee===Ee&&(Fe!==ne&&(Ee=Ee<=Fe?Ee:Fe),we!==ne&&(Ee=Ee>=we?Ee:we)),Ee}function ir(Ee,we,Fe,Pe,qe,Ze){var Qt,Jt=we&me,hn=we&ge,Cn=we&ve;if(Fe&&(Qt=qe?Fe(Ee,Pe,qe,Ze):Fe(Ee)),Qt!==ne)return Qt;if(!Es(Ee))return Ee;var _n=Yn(Ee);if(_n){if(Qt=ap(Ee),!Jt)return Us(Ee,Qt)}else{var In=Ps(Ee),On=In==kn||In==Bn;if(Pr(Ee))return gl(Ee,Jt);if(In==an||In==Xt||On&&!qe){if(Qt=hn||On?{}:Ml(Ee),!Jt)return hn?Kh(Ee,gh(Qt,Ee)):Qh(Ee,qc(Qt,Ee))}else{if(!As[In])return qe?Ee:{};Qt=cp(Ee,In,Jt)}}Ze||(Ze=new dr);var jn=Ze.get(Ee);if(jn)return jn;Ze.set(Ee,Qt),du(Ee)?Ee.forEach(function(Wn){Qt.add(ir(Wn,we,Fe,Wn,Ee,Ze))}):lu(Ee)&&Ee.forEach(function(Wn,ns){Qt.set(ns,ir(Wn,we,Fe,ns,Ee,Ze))});var Hn=Cn?hn?ka:Da:hn?qs:Fs,es=_n?ne:Hn(Ee);return tr(es||Ee,function(Wn,ns){es&&(ns=Wn,Wn=Ee[ns]),wi(Qt,ns,ir(Wn,we,Fe,ns,Ee,Ze))}),Qt}function Ah(Ee){var we=Fs(Ee);return function(Fe){return Hc(Fe,Ee,we)}}function Hc(Ee,we,Fe){var Pe=Fe.length;if(Ee==null)return!Pe;for(Ee=gs(Ee);Pe--;){var qe=Fe[Pe],Ze=we[qe],Qt=Ee[qe];if(Qt===ne&&!(qe in Ee)||!Ze(Qt))return!1}return!0}function Wc(Ee,we,Fe){if(typeof Ee!="function")throw new nr(ce);return Ri(function(){Ee.apply(ne,Fe)},we)}function $i(Ee,we,Fe,Pe){var qe=-1,Ze=qi,Qt=!0,Jt=Ee.length,hn=[],Cn=we.length;if(!Jt)return hn;Fe&&(we=bs(we,Qs(Fe))),Pe?(Ze=Xo,Qt=!1):we.length>=oe&&(Ze=vi,Qt=!1,we=new jr(we));e:for(;++qe<Jt;){var _n=Ee[qe],In=Fe==null?_n:Fe(_n);if(_n=Pe||_n!==0?_n:0,Qt&&In===In){for(var On=Cn;On--;)if(we[On]===In)continue e;hn.push(_n)}else Ze(we,In,Pe)||hn.push(_n)}return hn}var Or=bl(mr),Qc=bl(pa,!0);function vh(Ee,we){var Fe=!0;return Or(Ee,function(Pe,qe,Ze){return Fe=!!we(Pe,qe,Ze),Fe}),Fe}function lo(Ee,we,Fe){for(var Pe=-1,qe=Ee.length;++Pe<qe;){var Ze=Ee[Pe],Qt=we(Ze);if(Qt!=null&&(Jt===ne?Qt===Qt&&!Ys(Qt):Fe(Qt,Jt)))var Jt=Qt,hn=Ze}return hn}function yh(Ee,we,Fe,Pe){var qe=Ee.length;for(Fe=Zn(Fe),Fe<0&&(Fe=-Fe>qe?0:qe+Fe),Pe=Pe===ne||Pe>qe?qe:Zn(Pe),Pe<0&&(Pe+=qe),Pe=Fe>Pe?0:pu(Pe);Fe<Pe;)Ee[Fe++]=we;return Ee}function Kc(Ee,we){var Fe=[];return Or(Ee,function(Pe,qe,Ze){we(Pe,qe,Ze)&&Fe.push(Pe)}),Fe}function Rs(Ee,we,Fe,Pe,qe){var Ze=-1,Qt=Ee.length;for(Fe||(Fe=up),qe||(qe=[]);++Ze<Qt;){var Jt=Ee[Ze];we>0&&Fe(Jt)?we>1?Rs(Jt,we-1,Fe,Pe,qe):Dr(qe,Jt):Pe||(qe[qe.length]=Jt)}return qe}var ha=El(),Yc=El(!0);function mr(Ee,we){return Ee&&ha(Ee,we,Fs)}function pa(Ee,we){return Ee&&Yc(Ee,we,Fs)}function uo(Ee,we){return Nr(we,function(Fe){return Sr(Ee[Fe])})}function Gr(Ee,we){we=Mr(we,Ee);for(var Fe=0,Pe=we.length;Ee!=null&&Fe<Pe;)Ee=Ee[Ar(we[Fe++])];return Fe&&Fe==Pe?Ee:ne}function Xc(Ee,we,Fe){var Pe=we(Ee);return Yn(Ee)?Pe:Dr(Pe,Fe(Ee))}function zs(Ee){return Ee==null?Ee===ne?Pn:Yt:zr&&zr in gs(Ee)?sp(Ee):Ap(Ee)}function fa(Ee,we){return Ee>we}function xh(Ee,we){return Ee!=null&&ps.call(Ee,we)}function bh(Ee,we){return Ee!=null&&we in gs(Ee)}function Eh(Ee,we,Fe){return Ee>=Bs(we,Fe)&&Ee<ks(we,Fe)}function ma(Ee,we,Fe){for(var Pe=Fe?Xo:qi,qe=Ee[0].length,Ze=Ee.length,Qt=Ze,Jt=gn(Ze),hn=1/0,Cn=[];Qt--;){var _n=Ee[Qt];Qt&&we&&(_n=bs(_n,Qs(we))),hn=Bs(_n.length,hn),Jt[Qt]=!Fe&&(we||qe>=120&&_n.length>=120)?new jr(Qt&&_n):ne}_n=Ee[0];var In=-1,On=Jt[0];e:for(;++In<qe&&Cn.length<hn;){var jn=_n[In],Hn=we?we(jn):jn;if(jn=Fe||jn!==0?jn:0,!(On?vi(On,Hn):Pe(Cn,Hn,Fe))){for(Qt=Ze;--Qt;){var es=Jt[Qt];if(!(es?vi(es,Hn):Pe(Ee[Qt],Hn,Fe)))continue e}On&&On.push(Hn),Cn.push(jn)}}return Cn}function Ch(Ee,we,Fe,Pe){return mr(Ee,function(qe,Ze,Qt){we(Pe,Fe(qe),Ze,Qt)}),Pe}function Ni(Ee,we,Fe){we=Mr(we,Ee),Ee=zl(Ee,we);var Pe=Ee==null?Ee:Ee[Ar(ar(we))];return Pe==null?ne:Ws(Pe,Ee,Fe)}function Jc(Ee){return Ss(Ee)&&zs(Ee)==Xt}function Sh(Ee){return Ss(Ee)&&zs(Ee)==Rn}function wh(Ee){return Ss(Ee)&&zs(Ee)==vn}function Di(Ee,we,Fe,Pe,qe){return Ee===we?!0:Ee==null||we==null||!Ss(Ee)&&!Ss(we)?Ee!==Ee&&we!==we:$h(Ee,we,Fe,Pe,Di,qe)}function $h(Ee,we,Fe,Pe,qe,Ze){var Qt=Yn(Ee),Jt=Yn(we),hn=Qt?dn:Ps(Ee),Cn=Jt?dn:Ps(we);hn=hn==Xt?an:hn,Cn=Cn==Xt?an:Cn;var _n=hn==an,In=Cn==an,On=hn==Cn;if(On&&Pr(Ee)){if(!Pr(we))return!1;Qt=!0,_n=!1}if(On&&!_n)return Ze||(Ze=new dr),Qt||di(Ee)?Fl(Ee,we,Fe,Pe,qe,Ze):tp(Ee,we,hn,Fe,Pe,qe,Ze);if(!(Fe&ye)){var jn=_n&&ps.call(Ee,"__wrapped__"),Hn=In&&ps.call(we,"__wrapped__");if(jn||Hn){var es=jn?Ee.value():Ee,Wn=Hn?we.value():we;return Ze||(Ze=new dr),qe(es,Wn,Fe,Pe,Ze)}}return On?(Ze||(Ze=new dr),np(Ee,we,Fe,Pe,qe,Ze)):!1}function Th(Ee){return Ss(Ee)&&Ps(Ee)==Dn}function ga(Ee,we,Fe,Pe){var qe=Fe.length,Ze=qe,Qt=!Pe;if(Ee==null)return!Ze;for(Ee=gs(Ee);qe--;){var Jt=Fe[qe];if(Qt&&Jt[2]?Jt[1]!==Ee[Jt[0]]:!(Jt[0]in Ee))return!1}for(;++qe<Ze;){Jt=Fe[qe];var hn=Jt[0],Cn=Ee[hn],_n=Jt[1];if(Qt&&Jt[2]){if(Cn===ne&&!(hn in Ee))return!1}else{var In=new dr;if(Pe)var On=Pe(Cn,_n,hn,Ee,we,In);if(!(On===ne?Di(_n,Cn,ye|be,Pe,In):On))return!1}}return!0}function Zc(Ee){if(!Es(Ee)||hp(Ee))return!1;var we=Sr(Ee)?$d:Po;return we.test(Wr(Ee))}function Ih(Ee){return Ss(Ee)&&zs(Ee)==mn}function Nh(Ee){return Ss(Ee)&&Ps(Ee)==Tn}function Dh(Ee){return Ss(Ee)&&Io(Ee.length)&&!!vs[zs(Ee)]}function el(Ee){return typeof Ee=="function"?Ee:Ee==null?Hs:typeof Ee=="object"?Yn(Ee)?sl(Ee[0],Ee[1]):nl(Ee):_u(Ee)}function Aa(Ee){if(!Oi(Ee))return Fd(Ee);var we=[];for(var Fe in gs(Ee))ps.call(Ee,Fe)&&Fe!="constructor"&&we.push(Fe);return we}function kh(Ee){if(!Es(Ee))return gp(Ee);var we=Oi(Ee),Fe=[];for(var Pe in Ee)Pe=="constructor"&&(we||!ps.call(Ee,Pe))||Fe.push(Pe);return Fe}function va(Ee,we){return Ee<we}function tl(Ee,we){var Fe=-1,Pe=Gs(Ee)?gn(Ee.length):[];return Or(Ee,function(qe,Ze,Qt){Pe[++Fe]=we(qe,Ze,Qt)}),Pe}function nl(Ee){var we=Oa(Ee);return we.length==1&&we[0][2]?Pl(we[0][0],we[0][1]):function(Fe){return Fe===Ee||ga(Fe,Ee,we)}}function sl(Ee,we){return Ma(Ee)&&Bl(we)?Pl(Ar(Ee),we):function(Fe){var Pe=Ha(Fe,Ee);return Pe===ne&&Pe===we?Wa(Fe,Ee):Di(we,Pe,ye|be)}}function ho(Ee,we,Fe,Pe,qe){Ee!==we&&ha(we,function(Ze,Qt){if(qe||(qe=new dr),Es(Ze))Fh(Ee,we,Qt,Fe,ho,Pe,qe);else{var Jt=Pe?Pe(Pa(Ee,Qt),Ze,Qt+"",Ee,we,qe):ne;Jt===ne&&(Jt=Ze),ua(Ee,Qt,Jt)}},qs)}function Fh(Ee,we,Fe,Pe,qe,Ze,Qt){var Jt=Pa(Ee,Fe),hn=Pa(we,Fe),Cn=Qt.get(hn);if(Cn){ua(Ee,Fe,Cn);return}var _n=Ze?Ze(Jt,hn,Fe+"",Ee,we,Qt):ne,In=_n===ne;if(In){var On=Yn(hn),jn=!On&&Pr(hn),Hn=!On&&!jn&&di(hn);_n=hn,On||jn||Hn?Yn(Jt)?_n=Jt:Ts(Jt)?_n=Us(Jt):jn?(In=!1,_n=gl(hn,!0)):Hn?(In=!1,_n=Al(hn,!0)):_n=[]:Mi(hn)||Qr(hn)?(_n=Jt,Qr(Jt)?_n=fu(Jt):(!Es(Jt)||Sr(Jt))&&(_n=Ml(hn))):In=!1}In&&(Qt.set(hn,_n),qe(_n,hn,Pe,Ze,Qt),Qt.delete(hn)),ua(Ee,Fe,_n)}function rl(Ee,we){var Fe=Ee.length;if(Fe)return we+=we<0?Fe:0,_r(we,Fe)?Ee[we]:ne}function il(Ee,we,Fe){we.length?we=bs(we,function(Ze){return Yn(Ze)?function(Qt){return Gr(Qt,Ze.length===1?Ze[0]:Ze)}:Ze}):we=[Hs];var Pe=-1;we=bs(we,Qs(qn()));var qe=tl(Ee,function(Ze,Qt,Jt){var hn=bs(we,function(Cn){return Cn(Ze)});return{criteria:hn,index:++Pe,value:Ze}});return sd(qe,function(Ze,Qt){return Wh(Ze,Qt,Fe)})}function Oh(Ee,we){return ol(Ee,we,function(Fe,Pe){return Wa(Ee,Pe)})}function ol(Ee,we,Fe){for(var Pe=-1,qe=we.length,Ze={};++Pe<qe;){var Qt=we[Pe],Jt=Gr(Ee,Qt);Fe(Jt,Qt)&&ki(Ze,Mr(Qt,Ee),Jt)}return Ze}function Rh(Ee){return function(we){return Gr(we,Ee)}}function ya(Ee,we,Fe,Pe){var qe=Pe?nd:ei,Ze=-1,Qt=we.length,Jt=Ee;for(Ee===we&&(we=Us(we)),Fe&&(Jt=bs(Ee,Qs(Fe)));++Ze<Qt;)for(var hn=0,Cn=we[Ze],_n=Fe?Fe(Cn):Cn;(hn=qe(Jt,_n,hn,Pe))>-1;)Jt!==Ee&&to.call(Jt,hn,1),to.call(Ee,hn,1);return Ee}function al(Ee,we){for(var Fe=Ee?we.length:0,Pe=Fe-1;Fe--;){var qe=we[Fe];if(Fe==Pe||qe!==Ze){var Ze=qe;_r(qe)?to.call(Ee,qe,1):Ca(Ee,qe)}}return Ee}function xa(Ee,we){return Ee+ro(Vc()*(we-Ee+1))}function Mh(Ee,we,Fe,Pe){for(var qe=-1,Ze=ks(so((we-Ee)/(Fe||1)),0),Qt=gn(Ze);Ze--;)Qt[Pe?Ze:++qe]=Ee,Ee+=Fe;return Qt}function ba(Ee,we){var Fe="";if(!Ee||we<1||we>Ue)return Fe;do we%2&&(Fe+=Ee),we=ro(we/2),we&&(Ee+=Ee);while(we);return Fe}function ts(Ee,we){return La(Ll(Ee,we,Hs),Ee+"")}function Bh(Ee){return Gc(hi(Ee))}function Ph(Ee,we){var Fe=hi(Ee);return Eo(Fe,Ur(we,0,Fe.length))}function ki(Ee,we,Fe,Pe){if(!Es(Ee))return Ee;we=Mr(we,Ee);for(var qe=-1,Ze=we.length,Qt=Ze-1,Jt=Ee;Jt!=null&&++qe<Ze;){var hn=Ar(we[qe]),Cn=Fe;if(hn==="__proto__"||hn==="constructor"||hn==="prototype")return Ee;if(qe!=Qt){var _n=Jt[hn];Cn=Pe?Pe(_n,hn,Jt):ne,Cn===ne&&(Cn=Es(_n)?_n:_r(we[qe+1])?[]:{})}wi(Jt,hn,Cn),Jt=Jt[hn]}return Ee}var cl=io?function(Ee,we){return io.set(Ee,we),Ee}:Hs,Lh=no?function(Ee,we){return no(Ee,"toString",{configurable:!0,enumerable:!1,value:Ka(we),writable:!0})}:Hs;function Vh(Ee){return Eo(hi(Ee))}function or(Ee,we,Fe){var Pe=-1,qe=Ee.length;we<0&&(we=-we>qe?0:qe+we),Fe=Fe>qe?qe:Fe,Fe<0&&(Fe+=qe),qe=we>Fe?0:Fe-we>>>0,we>>>=0;for(var Ze=gn(qe);++Pe<qe;)Ze[Pe]=Ee[Pe+we];return Ze}function jh(Ee,we){var Fe;return Or(Ee,function(Pe,qe,Ze){return Fe=we(Pe,qe,Ze),!Fe}),!!Fe}function po(Ee,we,Fe){var Pe=0,qe=Ee==null?Pe:Ee.length;if(typeof we=="number"&&we===we&&qe<=Kt){for(;Pe<qe;){var Ze=Pe+qe>>>1,Qt=Ee[Ze];Qt!==null&&!Ys(Qt)&&(Fe?Qt<=we:Qt<we)?Pe=Ze+1:qe=Ze}return qe}return Ea(Ee,we,Hs,Fe)}function Ea(Ee,we,Fe,Pe){var qe=0,Ze=Ee==null?0:Ee.length;if(Ze===0)return 0;we=Fe(we);for(var Qt=we!==we,Jt=we===null,hn=Ys(we),Cn=we===ne;qe<Ze;){var _n=ro((qe+Ze)/2),In=Fe(Ee[_n]),On=In!==ne,jn=In===null,Hn=In===In,es=Ys(In);if(Qt)var Wn=Pe||Hn;else Cn?Wn=Hn&&(Pe||On):Jt?Wn=Hn&&On&&(Pe||!jn):hn?Wn=Hn&&On&&!jn&&(Pe||!es):jn||es?Wn=!1:Wn=Pe?In<=we:In<we;Wn?qe=_n+1:Ze=_n}return Bs(Ze,Wt)}function ll(Ee,we){for(var Fe=-1,Pe=Ee.length,qe=0,Ze=[];++Fe<Pe;){var Qt=Ee[Fe],Jt=we?we(Qt):Qt;if(!Fe||!hr(Jt,hn)){var hn=Jt;Ze[qe++]=Qt===0?0:Qt}}return Ze}function ul(Ee){return typeof Ee=="number"?Ee:Ys(Ee)?Xe:+Ee}function Ks(Ee){if(typeof Ee=="string")return Ee;if(Yn(Ee))return bs(Ee,Ks)+"";if(Ys(Ee))return jc?jc.call(Ee):"";var we=Ee+"";return we=="0"&&1/Ee==-Ye?"-0":we}function Rr(Ee,we,Fe){var Pe=-1,qe=qi,Ze=Ee.length,Qt=!0,Jt=[],hn=Jt;if(Fe)Qt=!1,qe=Xo;else if(Ze>=oe){var Cn=we?null:Zh(Ee);if(Cn)return Wi(Cn);Qt=!1,qe=vi,hn=new jr}else hn=we?[]:Jt;e:for(;++Pe<Ze;){var _n=Ee[Pe],In=we?we(_n):_n;if(_n=Fe||_n!==0?_n:0,Qt&&In===In){for(var On=hn.length;On--;)if(hn[On]===In)continue e;we&&hn.push(In),Jt.push(_n)}else qe(hn,In,Fe)||(hn!==Jt&&hn.push(In),Jt.push(_n))}return Jt}function Ca(Ee,we){return we=Mr(we,Ee),Ee=zl(Ee,we),Ee==null||delete Ee[Ar(ar(we))]}function dl(Ee,we,Fe,Pe){return ki(Ee,we,Fe(Gr(Ee,we)),Pe)}function fo(Ee,we,Fe,Pe){for(var qe=Ee.length,Ze=Pe?qe:-1;(Pe?Ze--:++Ze<qe)&&we(Ee[Ze],Ze,Ee););return Fe?or(Ee,Pe?0:Ze,Pe?Ze+1:qe):or(Ee,Pe?Ze+1:0,Pe?qe:Ze)}function hl(Ee,we){var Fe=Ee;return Fe instanceof rs&&(Fe=Fe.value()),Jo(we,function(Pe,qe){return qe.func.apply(qe.thisArg,Dr([Pe],qe.args))},Fe)}function Sa(Ee,we,Fe){var Pe=Ee.length;if(Pe<2)return Pe?Rr(Ee[0]):[];for(var qe=-1,Ze=gn(Pe);++qe<Pe;)for(var Qt=Ee[qe],Jt=-1;++Jt<Pe;)Jt!=qe&&(Ze[qe]=$i(Ze[qe]||Qt,Ee[Jt],we,Fe));return Rr(Rs(Ze,1),we,Fe)}function pl(Ee,we,Fe){for(var Pe=-1,qe=Ee.length,Ze=we.length,Qt={};++Pe<qe;){var Jt=Pe<Ze?we[Pe]:ne;Fe(Qt,Ee[Pe],Jt)}return Qt}function wa(Ee){return Ts(Ee)?Ee:[]}function $a(Ee){return typeof Ee=="function"?Ee:Hs}function Mr(Ee,we){return Yn(Ee)?Ee:Ma(Ee,we)?[Ee]:Gl(hs(Ee))}var Uh=ts;function Br(Ee,we,Fe){var Pe=Ee.length;return Fe=Fe===ne?Pe:Fe,!we&&Fe>=Pe?Ee:or(Ee,we,Fe)}var ml=Td||function(Ee){return Os.clearTimeout(Ee)};function gl(Ee,we){if(we)return Ee.slice();var Fe=Ee.length,Pe=Mc?Mc(Fe):new Ee.constructor(Fe);return Ee.copy(Pe),Pe}function Ta(Ee){var we=new Ee.constructor(Ee.byteLength);return new Zi(we).set(new Zi(Ee)),we}function Gh(Ee,we){var Fe=we?Ta(Ee.buffer):Ee.buffer;return new Ee.constructor(Fe,Ee.byteOffset,Ee.byteLength)}function qh(Ee){var we=new Ee.constructor(Ee.source,Bi.exec(Ee));return we.lastIndex=Ee.lastIndex,we}function Hh(Ee){return _i?gs(_i.call(Ee)):{}}function Al(Ee,we){var Fe=we?Ta(Ee.buffer):Ee.buffer;return new Ee.constructor(Fe,Ee.byteOffset,Ee.length)}function vl(Ee,we){if(Ee!==we){var Fe=Ee!==ne,Pe=Ee===null,qe=Ee===Ee,Ze=Ys(Ee),Qt=we!==ne,Jt=we===null,hn=we===we,Cn=Ys(we);if(!Jt&&!Cn&&!Ze&&Ee>we||Ze&&Qt&&hn&&!Jt&&!Cn||Pe&&Qt&&hn||!Fe&&hn||!qe)return 1;if(!Pe&&!Ze&&!Cn&&Ee<we||Cn&&Fe&&qe&&!Pe&&!Ze||Jt&&Fe&&qe||!Qt&&qe||!hn)return-1}return 0}function Wh(Ee,we,Fe){for(var Pe=-1,qe=Ee.criteria,Ze=we.criteria,Qt=qe.length,Jt=Fe.length;++Pe<Qt;){var hn=vl(qe[Pe],Ze[Pe]);if(hn){if(Pe>=Jt)return hn;var Cn=Fe[Pe];return hn*(Cn=="desc"?-1:1)}}return Ee.index-we.index}function yl(Ee,we,Fe,Pe){for(var qe=-1,Ze=Ee.length,Qt=Fe.length,Jt=-1,hn=we.length,Cn=ks(Ze-Qt,0),_n=gn(hn+Cn),In=!Pe;++Jt<hn;)_n[Jt]=we[Jt];for(;++qe<Qt;)(In||qe<Ze)&&(_n[Fe[qe]]=Ee[qe]);for(;Cn--;)_n[Jt++]=Ee[qe++];return _n}function xl(Ee,we,Fe,Pe){for(var qe=-1,Ze=Ee.length,Qt=-1,Jt=Fe.length,hn=-1,Cn=we.length,_n=ks(Ze-Jt,0),In=gn(_n+Cn),On=!Pe;++qe<_n;)In[qe]=Ee[qe];for(var jn=qe;++hn<Cn;)In[jn+hn]=we[hn];for(;++Qt<Jt;)(On||qe<Ze)&&(In[jn+Fe[Qt]]=Ee[qe++]);return In}function Us(Ee,we){var Fe=-1,Pe=Ee.length;for(we||(we=gn(Pe));++Fe<Pe;)we[Fe]=Ee[Fe];return we}function gr(Ee,we,Fe,Pe){var qe=!Fe;Fe||(Fe={});for(var Ze=-1,Qt=we.length;++Ze<Qt;){var Jt=we[Ze],hn=Pe?Pe(Fe[Jt],Ee[Jt],Jt,Fe,Ee):ne;hn===ne&&(hn=Ee[Jt]),qe?br(Fe,Jt,hn):wi(Fe,Jt,hn)}return Fe}function Qh(Ee,we){return gr(Ee,Ra(Ee),we)}function Kh(Ee,we){return gr(Ee,Ol(Ee),we)}function mo(Ee,we){return function(Fe,Pe){var qe=Yn(Fe)?Ku:mh,Ze=we?we():{};return qe(Fe,Ee,qn(Pe,2),Ze)}}function ci(Ee){return ts(function(we,Fe){var Pe=-1,qe=Fe.length,Ze=qe>1?Fe[qe-1]:ne,Qt=qe>2?Fe[2]:ne;for(Ze=Ee.length>3&&typeof Ze=="function"?(qe--,Ze):ne,Qt&&Vs(Fe[0],Fe[1],Qt)&&(Ze=qe<3?ne:Ze,qe=1),we=gs(we);++Pe<qe;){var Jt=Fe[Pe];Jt&&Ee(we,Jt,Pe,Ze)}return we})}function bl(Ee,we){return function(Fe,Pe){if(Fe==null)return Fe;if(!Gs(Fe))return Ee(Fe,Pe);for(var qe=Fe.length,Ze=we?qe:-1,Qt=gs(Fe);(we?Ze--:++Ze<qe)&&Pe(Qt[Ze],Ze,Qt)!==!1;);return Fe}}function El(Ee){return function(we,Fe,Pe){for(var qe=-1,Ze=gs(we),Qt=Pe(we),Jt=Qt.length;Jt--;){var hn=Qt[Ee?Jt:++qe];if(Fe(Ze[hn],hn,Ze)===!1)break}return we}}function Yh(Ee,we,Fe){var Pe=we&Ce,qe=Fi(Ee);function Ze(){var Qt=this&&this!==Os&&this instanceof Ze?qe:Ee;return Qt.apply(Pe?Fe:this,arguments)}return Ze}function Cl(Ee){return function(we){we=hs(we);var Fe=ti(we)?ur(we):ne,Pe=Fe?Fe[0]:we.charAt(0),qe=Fe?Br(Fe,1).join(""):we.slice(1);return Pe[Ee]()+qe}}function li(Ee){return function(we){return Jo(Eu(bu(we).replace(Ru,"")),Ee,"")}}function Fi(Ee){return function(){var we=arguments;switch(we.length){case 0:return new Ee;case 1:return new Ee(we[0]);case 2:return new Ee(we[0],we[1]);case 3:return new Ee(we[0],we[1],we[2]);case 4:return new Ee(we[0],we[1],we[2],we[3]);case 5:return new Ee(we[0],we[1],we[2],we[3],we[4]);case 6:return new Ee(we[0],we[1],we[2],we[3],we[4],we[5]);case 7:return new Ee(we[0],we[1],we[2],we[3],we[4],we[5],we[6])}var Fe=ai(Ee.prototype),Pe=Ee.apply(Fe,we);return Es(Pe)?Pe:Fe}}function Xh(Ee,we,Fe){var Pe=Fi(Ee);function qe(){for(var Ze=arguments.length,Qt=gn(Ze),Jt=Ze,hn=ui(qe);Jt--;)Qt[Jt]=arguments[Jt];var Cn=Ze<3&&Qt[0]!==hn&&Qt[Ze-1]!==hn?[]:kr(Qt,hn);if(Ze-=Cn.length,Ze<Fe)return Il(Ee,we,go,qe.placeholder,ne,Qt,Cn,ne,ne,Fe-Ze);var _n=this&&this!==Os&&this instanceof qe?Pe:Ee;return Ws(_n,this,Qt)}return qe}function Sl(Ee){return function(we,Fe,Pe){var qe=gs(we);if(!Gs(we)){var Ze=qn(Fe,3);we=Fs(we),Fe=function(Jt){return Ze(qe[Jt],Jt,qe)}}var Qt=Ee(we,Fe,Pe);return Qt>-1?qe[Ze?we[Qt]:Qt]:ne}}function wl(Ee){return Cr(function(we){var Fe=we.length,Pe=Fe,qe=rr.prototype.thru;for(Ee&&we.reverse();Pe--;){var Ze=we[Pe];if(typeof Ze!="function")throw new nr(ce);if(qe&&!Qt&&xo(Ze)=="wrapper")var Qt=new rr([],!0)}for(Pe=Qt?Pe:Fe;++Pe<Fe;){Ze=we[Pe];var Jt=xo(Ze),hn=Jt=="wrapper"?Fa(Ze):ne;hn&&Ba(hn[0])&&hn[1]==(De|Te|Ie|Oe)&&!hn[4].length&&hn[9]==1?Qt=Qt[xo(hn[0])].apply(Qt,hn[3]):Qt=Ze.length==1&&Ba(Ze)?Qt[Jt]():Qt.thru(Ze)}return function(){var Cn=arguments,_n=Cn[0];if(Qt&&Cn.length==1&&Yn(_n))return Qt.plant(_n).value();for(var In=0,On=Fe?we[In].apply(this,Cn):_n;++In<Fe;)On=we[In].call(this,On);return On}})}function go(Ee,we,Fe,Pe,qe,Ze,Qt,Jt,hn,Cn){var _n=we&De,In=we&Ce,On=we&Se,jn=we&(Te|Ne),Hn=we&Be,es=On?ne:Fi(Ee);function Wn(){for(var ns=arguments.length,as=gn(ns),Xs=ns;Xs--;)as[Xs]=arguments[Xs];if(jn)var js=ui(Wn),Js=id(as,js);if(Pe&&(as=yl(as,Pe,qe,jn)),Ze&&(as=xl(as,Ze,Qt,jn)),ns-=Js,jn&&ns<Cn){var Is=kr(as,js);return Il(Ee,we,go,Wn.placeholder,Fe,as,Is,Jt,hn,Cn-ns)}var pr=In?Fe:this,$r=On?pr[Ee]:Ee;return ns=as.length,Jt?as=vp(as,Jt):Hn&&ns>1&&as.reverse(),_n&&hn<ns&&(as.length=hn),this&&this!==Os&&this instanceof Wn&&($r=es||Fi($r)),$r.apply(pr,as)}return Wn}function $l(Ee,we){return function(Fe,Pe){return Ch(Fe,Ee,we(Pe),{})}}function Ao(Ee,we){return function(Fe,Pe){var qe;if(Fe===ne&&Pe===ne)return we;if(Fe!==ne&&(qe=Fe),Pe!==ne){if(qe===ne)return Pe;typeof Fe=="string"||typeof Pe=="string"?(Fe=Ks(Fe),Pe=Ks(Pe)):(Fe=ul(Fe),Pe=ul(Pe)),qe=Ee(Fe,Pe)}return qe}}function Ia(Ee){return Cr(function(we){return we=bs(we,Qs(qn())),ts(function(Fe){var Pe=this;return Ee(we,function(qe){return Ws(qe,Pe,Fe)})})})}function vo(Ee,we){we=we===ne?" ":Ks(we);var Fe=we.length;if(Fe<2)return Fe?ba(we,Ee):we;var Pe=ba(we,so(Ee/ni(we)));return ti(we)?Br(ur(Pe),0,Ee).join(""):Pe.slice(0,Ee)}function Jh(Ee,we,Fe,Pe){var qe=we&Ce,Ze=Fi(Ee);function Qt(){for(var Jt=-1,hn=arguments.length,Cn=-1,_n=Pe.length,In=gn(_n+hn),On=this&&this!==Os&&this instanceof Qt?Ze:Ee;++Cn<_n;)In[Cn]=Pe[Cn];for(;hn--;)In[Cn++]=arguments[++Jt];return Ws(On,qe?Fe:this,In)}return Qt}function Tl(Ee){return function(we,Fe,Pe){return Pe&&typeof Pe!="number"&&Vs(we,Fe,Pe)&&(Fe=Pe=ne),we=wr(we),Fe===ne?(Fe=we,we=0):Fe=wr(Fe),Pe=Pe===ne?we<Fe?1:-1:wr(Pe),Mh(we,Fe,Pe,Ee)}}function yo(Ee){return function(we,Fe){return typeof we=="string"&&typeof Fe=="string"||(we=cr(we),Fe=cr(Fe)),Ee(we,Fe)}}function Il(Ee,we,Fe,Pe,qe,Ze,Qt,Jt,hn,Cn){var _n=we&Te,In=_n?Qt:ne,On=_n?ne:Qt,jn=_n?Ze:ne,Hn=_n?ne:Ze;we|=_n?Ie:ke,we&=~(_n?ke:Ie),we&$e||(we&=~(Ce|Se));var es=[Ee,we,qe,jn,In,Hn,On,Jt,hn,Cn],Wn=Fe.apply(ne,es);return Ba(Ee)&&Vl(Wn,es),Wn.placeholder=Pe,jl(Wn,Ee,we)}function Na(Ee){var we=Ds[Ee];return function(Fe,Pe){if(Fe=cr(Fe),Pe=Pe==null?0:Bs(Zn(Pe),292),Pe&&zc(Fe)){var qe=(hs(Fe)+"e").split("e"),Ze=we(qe[0]+"e"+(+qe[1]+Pe));return qe=(hs(Ze)+"e").split("e"),+(qe[0]+"e"+(+qe[1]-Pe))}return we(Fe)}}var Zh=ii&&1/Wi(new ii([,-0]))[1]==Ye?function(Ee){return new ii(Ee)}:Ja;function Nl(Ee){return function(we){var Fe=Ps(we);return Fe==Dn?ia(we):Fe==Tn?hd(we):rd(we,Ee(we))}}function Er(Ee,we,Fe,Pe,qe,Ze,Qt,Jt){var hn=we&Se;if(!hn&&typeof Ee!="function")throw new nr(ce);var Cn=Pe?Pe.length:0;if(Cn||(we&=~(Ie|ke),Pe=qe=ne),Qt=Qt===ne?Qt:ks(Zn(Qt),0),Jt=Jt===ne?Jt:Zn(Jt),Cn-=qe?qe.length:0,we&ke){var _n=Pe,In=qe;Pe=qe=ne}var On=hn?ne:Fa(Ee),jn=[Ee,we,Fe,Pe,qe,_n,In,Ze,Qt,Jt];if(On&&mp(jn,On),Ee=jn[0],we=jn[1],Fe=jn[2],Pe=jn[3],qe=jn[4],Jt=jn[9]=jn[9]===ne?hn?0:Ee.length:ks(jn[9]-Cn,0),!Jt&&we&(Te|Ne)&&(we&=~(Te|Ne)),!we||we==Ce)var Hn=Yh(Ee,we,Fe);else we==Te||we==Ne?Hn=Xh(Ee,we,Jt):(we==Ie||we==(Ce|Ie))&&!qe.length?Hn=Jh(Ee,we,Fe,Pe):Hn=go.apply(ne,jn);var es=On?cl:Vl;return jl(es(Hn,jn),Ee,we)}function Dl(Ee,we,Fe,Pe){return Ee===ne||hr(Ee,ri[Fe])&&!ps.call(Pe,Fe)?we:Ee}function kl(Ee,we,Fe,Pe,qe,Ze){return Es(Ee)&&Es(we)&&(Ze.set(we,Ee),ho(Ee,we,ne,kl,Ze),Ze.delete(we)),Ee}function ep(Ee){return Mi(Ee)?ne:Ee}function Fl(Ee,we,Fe,Pe,qe,Ze){var Qt=Fe&ye,Jt=Ee.length,hn=we.length;if(Jt!=hn&&!(Qt&&hn>Jt))return!1;var Cn=Ze.get(Ee),_n=Ze.get(we);if(Cn&&_n)return Cn==we&&_n==Ee;var In=-1,On=!0,jn=Fe&be?new jr:ne;for(Ze.set(Ee,we),Ze.set(we,Ee);++In<Jt;){var Hn=Ee[In],es=we[In];if(Pe)var Wn=Qt?Pe(es,Hn,In,we,Ee,Ze):Pe(Hn,es,In,Ee,we,Ze);if(Wn!==ne){if(Wn)continue;On=!1;break}if(jn){if(!Zo(we,function(ns,as){if(!vi(jn,as)&&(Hn===ns||qe(Hn,ns,Fe,Pe,Ze)))return jn.push(as)})){On=!1;break}}else if(!(Hn===es||qe(Hn,es,Fe,Pe,Ze))){On=!1;break}}return Ze.delete(Ee),Ze.delete(we),On}function tp(Ee,we,Fe,Pe,qe,Ze,Qt){switch(Fe){case Kn:if(Ee.byteLength!=we.byteLength||Ee.byteOffset!=we.byteOffset)return!1;Ee=Ee.buffer,we=we.buffer;case Rn:return!(Ee.byteLength!=we.byteLength||!Ze(new Zi(Ee),new Zi(we)));case rn:case vn:case Je:return hr(+Ee,+we);case Sn:return Ee.name==we.name&&Ee.message==we.message;case mn:case Vn:return Ee==we+"";case Dn:var Jt=ia;case Tn:var hn=Pe&ye;if(Jt||(Jt=Wi),Ee.size!=we.size&&!hn)return!1;var Cn=Qt.get(Ee);if(Cn)return Cn==we;Pe|=be,Qt.set(Ee,we);var _n=Fl(Jt(Ee),Jt(we),Pe,qe,Ze,Qt);return Qt.delete(Ee),_n;case Gn:if(_i)return _i.call(Ee)==_i.call(we)}return!1}function np(Ee,we,Fe,Pe,qe,Ze){var Qt=Fe&ye,Jt=Da(Ee),hn=Jt.length,Cn=Da(we),_n=Cn.length;if(hn!=_n&&!Qt)return!1;for(var In=hn;In--;){var On=Jt[In];if(!(Qt?On in we:ps.call(we,On)))return!1}var jn=Ze.get(Ee),Hn=Ze.get(we);if(jn&&Hn)return jn==we&&Hn==Ee;var es=!0;Ze.set(Ee,we),Ze.set(we,Ee);for(var Wn=Qt;++In<hn;){On=Jt[In];var ns=Ee[On],as=we[On];if(Pe)var Xs=Qt?Pe(as,ns,On,we,Ee,Ze):Pe(ns,as,On,Ee,we,Ze);if(!(Xs===ne?ns===as||qe(ns,as,Fe,Pe,Ze):Xs)){es=!1;break}Wn||(Wn=On=="constructor")}if(es&&!Wn){var js=Ee.constructor,Js=we.constructor;js!=Js&&"constructor"in Ee&&"constructor"in we&&!(typeof js=="function"&&js instanceof js&&typeof Js=="function"&&Js instanceof Js)&&(es=!1)}return Ze.delete(Ee),Ze.delete(we),es}function Cr(Ee){return La(Ll(Ee,ne,Ql),Ee+"")}function Da(Ee){return Xc(Ee,Fs,Ra)}function ka(Ee){return Xc(Ee,qs,Ol)}var Fa=io?function(Ee){return io.get(Ee)}:Ja;function xo(Ee){for(var we=Ee.name+"",Fe=oi[we],Pe=ps.call(oi,we)?Fe.length:0;Pe--;){var qe=Fe[Pe],Ze=qe.func;if(Ze==null||Ze==Ee)return qe.name}return we}function ui(Ee){var we=ps.call(Qe,"placeholder")?Qe:Ee;return we.placeholder}function qn(){var Ee=Qe.iteratee||Ya;return Ee=Ee===Ya?el:Ee,arguments.length?Ee(arguments[0],arguments[1]):Ee}function bo(Ee,we){var Fe=Ee.__data__;return dp(we)?Fe[typeof we=="string"?"string":"hash"]:Fe.map}function Oa(Ee){for(var we=Fs(Ee),Fe=we.length;Fe--;){var Pe=we[Fe],qe=Ee[Pe];we[Fe]=[Pe,qe,Bl(qe)]}return we}function Hr(Ee,we){var Fe=ld(Ee,we);return Zc(Fe)?Fe:ne}function sp(Ee){var we=ps.call(Ee,zr),Fe=Ee[zr];try{Ee[zr]=ne;var Pe=!0}catch{}var qe=Xi.call(Ee);return Pe&&(we?Ee[zr]=Fe:delete Ee[zr]),qe}var Ra=aa?function(Ee){return Ee==null?[]:(Ee=gs(Ee),Nr(aa(Ee),function(we){return Pc.call(Ee,we)}))}:Za,Ol=aa?function(Ee){for(var we=[];Ee;)Dr(we,Ra(Ee)),Ee=eo(Ee);return we}:Za,Ps=zs;(ca&&Ps(new ca(new ArrayBuffer(1)))!=Kn||xi&&Ps(new xi)!=Dn||la&&Ps(la.resolve())!=An||ii&&Ps(new ii)!=Tn||bi&&Ps(new bi)!=Un)&&(Ps=function(Ee){var we=zs(Ee),Fe=we==an?Ee.constructor:ne,Pe=Fe?Wr(Fe):"";if(Pe)switch(Pe){case Bd:return Kn;case Pd:return Dn;case Ld:return An;case zd:return Tn;case Vd:return Un}return we});function rp(Ee,we,Fe){for(var Pe=-1,qe=Fe.length;++Pe<qe;){var Ze=Fe[Pe],Qt=Ze.size;switch(Ze.type){case"drop":Ee+=Qt;break;case"dropRight":we-=Qt;break;case"take":we=Bs(we,Ee+Qt);break;case"takeRight":Ee=ks(Ee,we-Qt);break}}return{start:Ee,end:we}}function ip(Ee){var we=Ee.match(Yr);return we?we[1].split(fr):[]}function Rl(Ee,we,Fe){we=Mr(we,Ee);for(var Pe=-1,qe=we.length,Ze=!1;++Pe<qe;){var Qt=Ar(we[Pe]);if(!(Ze=Ee!=null&&Fe(Ee,Qt)))break;Ee=Ee[Qt]}return Ze||++Pe!=qe?Ze:(qe=Ee==null?0:Ee.length,!!qe&&Io(qe)&&_r(Qt,qe)&&(Yn(Ee)||Qr(Ee)))}function ap(Ee){var we=Ee.length,Fe=new Ee.constructor(we);return we&&typeof Ee[0]=="string"&&ps.call(Ee,"index")&&(Fe.index=Ee.index,Fe.input=Ee.input),Fe}function Ml(Ee){return typeof Ee.constructor=="function"&&!Oi(Ee)?ai(eo(Ee)):{}}function cp(Ee,we,Fe){var Pe=Ee.constructor;switch(we){case Rn:return Ta(Ee);case rn:case vn:return new Pe(+Ee);case Kn:return Gh(Ee,Fe);case pn:case sn:case Nn:case wn:case is:case Cs:case ss:case bn:case $n:return Al(Ee,Fe);case Dn:return new Pe;case Je:case Vn:return new Pe(Ee);case mn:return qh(Ee);case Tn:return new Pe;case Gn:return Hh(Ee)}}function lp(Ee,we){var Fe=we.length;if(!Fe)return Ee;var Pe=Fe-1;return we[Pe]=(Fe>1?"& ":"")+we[Pe],we=we.join(Fe>2?", ":" "),Ee.replace(ko,`{
/* [wrapped with `+we+`] */
`)}function up(Ee){return Yn(Ee)||Qr(Ee)||!!(Lc&&Ee&&Ee[Lc])}function _r(Ee,we){var Fe=typeof Ee;return we=we??Ue,!!we&&(Fe=="number"||Fe!="symbol"&&zo.test(Ee))&&Ee>-1&&Ee%1==0&&Ee<we}function Vs(Ee,we,Fe){if(!Es(Fe))return!1;var Pe=typeof we;return(Pe=="number"?Gs(Fe)&&_r(we,Fe.length):Pe=="string"&&we in Fe)?hr(Fe[we],Ee):!1}function Ma(Ee,we){if(Yn(Ee))return!1;var Fe=typeof Ee;return Fe=="number"||Fe=="symbol"||Fe=="boolean"||Ee==null||Ys(Ee)?!0:Ms.test(Ee)||!lr.test(Ee)||we!=null&&Ee in gs(we)}function dp(Ee){var we=typeof Ee;return we=="string"||we=="number"||we=="symbol"||we=="boolean"?Ee!=="__proto__":Ee===null}function Ba(Ee){var we=xo(Ee),Fe=Qe[we];if(typeof Fe!="function"||!(we in rs.prototype))return!1;if(Ee===Fe)return!0;var Pe=Fa(Fe);return!!Pe&&Ee===Pe[0]}function hp(Ee){return!!Rc&&Rc in Ee}var pp=Ki?Sr:tc;function Oi(Ee){var we=Ee&&Ee.constructor,Fe=typeof we=="function"&&we.prototype||ri;return Ee===Fe}function Bl(Ee){return Ee===Ee&&!Es(Ee)}function Pl(Ee,we){return function(Fe){return Fe==null?!1:Fe[Ee]===we&&(we!==ne||Ee in gs(Fe))}}function fp(Ee){var we=$o(Ee,function(Pe){return Fe.size===he&&Fe.clear(),Pe}),Fe=we.cache;return we}function mp(Ee,we){var Fe=Ee[1],Pe=we[1],qe=Fe|Pe,Ze=qe<(Ce|Se|De),Qt=Pe==De&&Fe==Te||Pe==De&&Fe==Oe&&Ee[7].length<=we[8]||Pe==(De|Oe)&&we[7].length<=we[8]&&Fe==Te;if(!(Ze||Qt))return Ee;Pe&Ce&&(Ee[2]=we[2],qe|=Fe&Ce?0:$e);var Jt=we[3];if(Jt){var hn=Ee[3];Ee[3]=hn?yl(hn,Jt,we[4]):Jt,Ee[4]=hn?kr(Ee[3],fe):we[4]}return Jt=we[5],Jt&&(hn=Ee[5],Ee[5]=hn?xl(hn,Jt,we[6]):Jt,Ee[6]=hn?kr(Ee[5],fe):we[6]),Jt=we[7],Jt&&(Ee[7]=Jt),Pe&De&&(Ee[8]=Ee[8]==null?we[8]:Bs(Ee[8],we[8])),Ee[9]==null&&(Ee[9]=we[9]),Ee[0]=we[0],Ee[1]=qe,Ee}function gp(Ee){var we=[];if(Ee!=null)for(var Fe in gs(Ee))we.push(Fe);return we}function Ap(Ee){return Xi.call(Ee)}function Ll(Ee,we,Fe){return we=ks(we===ne?Ee.length-1:we,0),function(){for(var Pe=arguments,qe=-1,Ze=ks(Pe.length-we,0),Qt=gn(Ze);++qe<Ze;)Qt[qe]=Pe[we+qe];qe=-1;for(var Jt=gn(we+1);++qe<we;)Jt[qe]=Pe[qe];return Jt[we]=Fe(Qt),Ws(Ee,this,Jt)}}function zl(Ee,we){return we.length<2?Ee:Gr(Ee,or(we,0,-1))}function vp(Ee,we){for(var Fe=Ee.length,Pe=Bs(we.length,Fe),qe=Us(Ee);Pe--;){var Ze=we[Pe];Ee[Pe]=_r(Ze,Fe)?qe[Ze]:ne}return Ee}function Pa(Ee,we){if(!(we==="constructor"&&typeof Ee[we]=="function")&&we!="__proto__")return Ee[we]}var Vl=Ul(cl),Ri=Nd||function(Ee,we){return Os.setTimeout(Ee,we)},La=Ul(Lh);function jl(Ee,we,Fe){var Pe=we+"";return La(Ee,lp(Pe,yp(ip(Pe),Fe)))}function Ul(Ee){var we=0,Fe=0;return function(){var Pe=Od(),qe=ze-(Pe-Fe);if(Fe=Pe,qe>0){if(++we>=je)return arguments[0]}else we=0;return Ee.apply(ne,arguments)}}function Eo(Ee,we){var Fe=-1,Pe=Ee.length,qe=Pe-1;for(we=we===ne?Pe:we;++Fe<we;){var Ze=xa(Fe,qe),Qt=Ee[Ze];Ee[Ze]=Ee[Fe],Ee[Fe]=Qt}return Ee.length=we,Ee}var Gl=fp(function(Ee){var we=[];return Ee.charCodeAt(0)===46&&we.push(""),Ee.replace(vr,function(Fe,Pe,qe,Ze){we.push(qe?Ze.replace(Oo,"$1"):Pe||Fe)}),we});function Ar(Ee){if(typeof Ee=="string"||Ys(Ee))return Ee;var we=Ee+"";return we=="0"&&1/Ee==-Ye?"-0":we}function Wr(Ee){if(Ee!=null){try{return Yi.call(Ee)}catch{}try{return Ee+""}catch{}}return""}function yp(Ee,we){return tr(tn,function(Fe){var Pe="_."+Fe[0];we&Fe[1]&&!qi(Ee,Pe)&&Ee.push(Pe)}),Ee.sort()}function ql(Ee){if(Ee instanceof rs)return Ee.clone();var we=new rr(Ee.__wrapped__,Ee.__chain__);return we.__actions__=Us(Ee.__actions__),we.__index__=Ee.__index__,we.__values__=Ee.__values__,we}function xp(Ee,we,Fe){(Fe?Vs(Ee,we,Fe):we===ne)?we=1:we=ks(Zn(we),0);var Pe=Ee==null?0:Ee.length;if(!Pe||we<1)return[];for(var qe=0,Ze=0,Qt=gn(so(Pe/we));qe<Pe;)Qt[Ze++]=or(Ee,qe,qe+=we);return Qt}function bp(Ee){for(var we=-1,Fe=Ee==null?0:Ee.length,Pe=0,qe=[];++we<Fe;){var Ze=Ee[we];Ze&&(qe[Pe++]=Ze)}return qe}function Ep(){var Ee=arguments.length;if(!Ee)return[];for(var we=gn(Ee-1),Fe=arguments[0],Pe=Ee;Pe--;)we[Pe-1]=arguments[Pe];return Dr(Yn(Fe)?Us(Fe):[Fe],Rs(we,1))}var Cp=ts(function(Ee,we){return Ts(Ee)?$i(Ee,Rs(we,1,Ts,!0)):[]}),_p=ts(function(Ee,we){var Fe=ar(we);return Ts(Fe)&&(Fe=ne),Ts(Ee)?$i(Ee,Rs(we,1,Ts,!0),qn(Fe,2)):[]}),Sp=ts(function(Ee,we){var Fe=ar(we);return Ts(Fe)&&(Fe=ne),Ts(Ee)?$i(Ee,Rs(we,1,Ts,!0),ne,Fe):[]});function wp(Ee,we,Fe){var Pe=Ee==null?0:Ee.length;return Pe?(we=Fe||we===ne?1:Zn(we),or(Ee,we<0?0:we,Pe)):[]}function $p(Ee,we,Fe){var Pe=Ee==null?0:Ee.length;return Pe?(we=Fe||we===ne?1:Zn(we),we=Pe-we,or(Ee,0,we<0?0:we)):[]}function Tp(Ee,we){return Ee&&Ee.length?fo(Ee,qn(we,3),!0,!0):[]}function Ip(Ee,we){return Ee&&Ee.length?fo(Ee,qn(we,3),!0):[]}function Np(Ee,we,Fe,Pe){var qe=Ee==null?0:Ee.length;return qe?(Fe&&typeof Fe!="number"&&Vs(Ee,we,Fe)&&(Fe=0,Pe=qe),yh(Ee,we,Fe,Pe)):[]}function Hl(Ee,we,Fe){var Pe=Ee==null?0:Ee.length;if(!Pe)return-1;var qe=Fe==null?0:Zn(Fe);return qe<0&&(qe=ks(Pe+qe,0)),Hi(Ee,qn(we,3),qe)}function Wl(Ee,we,Fe){var Pe=Ee==null?0:Ee.length;if(!Pe)return-1;var qe=Pe-1;return Fe!==ne&&(qe=Zn(Fe),qe=Fe<0?ks(Pe+qe,0):Bs(qe,Pe-1)),Hi(Ee,qn(we,3),qe,!0)}function Ql(Ee){var we=Ee==null?0:Ee.length;return we?Rs(Ee,1):[]}function Dp(Ee){var we=Ee==null?0:Ee.length;return we?Rs(Ee,Ye):[]}function kp(Ee,we){var Fe=Ee==null?0:Ee.length;return Fe?(we=we===ne?1:Zn(we),Rs(Ee,we)):[]}function Fp(Ee){for(var we=-1,Fe=Ee==null?0:Ee.length,Pe={};++we<Fe;){var qe=Ee[we];Pe[qe[0]]=qe[1]}return Pe}function Kl(Ee){return Ee&&Ee.length?Ee[0]:ne}function Rp(Ee,we,Fe){var Pe=Ee==null?0:Ee.length;if(!Pe)return-1;var qe=Fe==null?0:Zn(Fe);return qe<0&&(qe=ks(Pe+qe,0)),ei(Ee,we,qe)}function Mp(Ee){var we=Ee==null?0:Ee.length;return we?or(Ee,0,-1):[]}var Bp=ts(function(Ee){var we=bs(Ee,wa);return we.length&&we[0]===Ee[0]?ma(we):[]}),Pp=ts(function(Ee){var we=ar(Ee),Fe=bs(Ee,wa);return we===ar(Fe)?we=ne:Fe.pop(),Fe.length&&Fe[0]===Ee[0]?ma(Fe,qn(we,2)):[]}),Lp=ts(function(Ee){var we=ar(Ee),Fe=bs(Ee,wa);return we=typeof we=="function"?we:ne,we&&Fe.pop(),Fe.length&&Fe[0]===Ee[0]?ma(Fe,ne,we):[]});function zp(Ee,we){return Ee==null?"":kd.call(Ee,we)}function ar(Ee){var we=Ee==null?0:Ee.length;return we?Ee[we-1]:ne}function Vp(Ee,we,Fe){var Pe=Ee==null?0:Ee.length;if(!Pe)return-1;var qe=Pe;return Fe!==ne&&(qe=Zn(Fe),qe=qe<0?ks(Pe+qe,0):Bs(qe,Pe-1)),we===we?md(Ee,we,qe):Hi(Ee,$c,qe,!0)}function jp(Ee,we){return Ee&&Ee.length?rl(Ee,Zn(we)):ne}var Up=ts(Yl);function Yl(Ee,we){return Ee&&Ee.length&&we&&we.length?ya(Ee,we):Ee}function Gp(Ee,we,Fe){return Ee&&Ee.length&&we&&we.length?ya(Ee,we,qn(Fe,2)):Ee}function qp(Ee,we,Fe){return Ee&&Ee.length&&we&&we.length?ya(Ee,we,ne,Fe):Ee}var Hp=Cr(function(Ee,we){var Fe=Ee==null?0:Ee.length,Pe=da(Ee,we);return al(Ee,bs(we,function(qe){return _r(qe,Fe)?+qe:qe}).sort(vl)),Pe});function Wp(Ee,we){var Fe=[];if(!(Ee&&Ee.length))return Fe;var Pe=-1,qe=[],Ze=Ee.length;for(we=qn(we,3);++Pe<Ze;){var Qt=Ee[Pe];we(Qt,Pe,Ee)&&(Fe.push(Qt),qe.push(Pe))}return al(Ee,qe),Fe}function za(Ee){return Ee==null?Ee:Md.call(Ee)}function Qp(Ee,we,Fe){var Pe=Ee==null?0:Ee.length;return Pe?(Fe&&typeof Fe!="number"&&Vs(Ee,we,Fe)?(we=0,Fe=Pe):(we=we==null?0:Zn(we),Fe=Fe===ne?Pe:Zn(Fe)),or(Ee,we,Fe)):[]}function Kp(Ee,we){return po(Ee,we)}function Yp(Ee,we,Fe){return Ea(Ee,we,qn(Fe,2))}function Xp(Ee,we){var Fe=Ee==null?0:Ee.length;if(Fe){var Pe=po(Ee,we);if(Pe<Fe&&hr(Ee[Pe],we))return Pe}return-1}function Jp(Ee,we){return po(Ee,we,!0)}function Zp(Ee,we,Fe){return Ea(Ee,we,qn(Fe,2),!0)}function ef(Ee,we){var Fe=Ee==null?0:Ee.length;if(Fe){var Pe=po(Ee,we,!0)-1;if(hr(Ee[Pe],we))return Pe}return-1}function tf(Ee){return Ee&&Ee.length?ll(Ee):[]}function nf(Ee,we){return Ee&&Ee.length?ll(Ee,qn(we,2)):[]}function sf(Ee){var we=Ee==null?0:Ee.length;return we?or(Ee,1,we):[]}function rf(Ee,we,Fe){return Ee&&Ee.length?(we=Fe||we===ne?1:Zn(we),or(Ee,0,we<0?0:we)):[]}function of(Ee,we,Fe){var Pe=Ee==null?0:Ee.length;return Pe?(we=Fe||we===ne?1:Zn(we),we=Pe-we,or(Ee,we<0?0:we,Pe)):[]}function af(Ee,we){return Ee&&Ee.length?fo(Ee,qn(we,3),!1,!0):[]}function cf(Ee,we){return Ee&&Ee.length?fo(Ee,qn(we,3)):[]}var lf=ts(function(Ee){return Rr(Rs(Ee,1,Ts,!0))}),uf=ts(function(Ee){var we=ar(Ee);return Ts(we)&&(we=ne),Rr(Rs(Ee,1,Ts,!0),qn(we,2))}),df=ts(function(Ee){var we=ar(Ee);return we=typeof we=="function"?we:ne,Rr(Rs(Ee,1,Ts,!0),ne,we)});function hf(Ee){return Ee&&Ee.length?Rr(Ee):[]}function pf(Ee,we){return Ee&&Ee.length?Rr(Ee,qn(we,2)):[]}function ff(Ee,we){return we=typeof we=="function"?we:ne,Ee&&Ee.length?Rr(Ee,ne,we):[]}function Va(Ee){if(!(Ee&&Ee.length))return[];var we=0;return Ee=Nr(Ee,function(Fe){if(Ts(Fe))return we=ks(Fe.length,we),!0}),sa(we,function(Fe){return bs(Ee,ea(Fe))})}function Xl(Ee,we){if(!(Ee&&Ee.length))return[];var Fe=Va(Ee);return we==null?Fe:bs(Fe,function(Pe){return Ws(we,ne,Pe)})}var mf=ts(function(Ee,we){return Ts(Ee)?$i(Ee,we):[]}),gf=ts(function(Ee){return Sa(Nr(Ee,Ts))}),Af=ts(function(Ee){var we=ar(Ee);return Ts(we)&&(we=ne),Sa(Nr(Ee,Ts),qn(we,2))}),vf=ts(function(Ee){var we=ar(Ee);return we=typeof we=="function"?we:ne,Sa(Nr(Ee,Ts),ne,we)}),yf=ts(Va);function xf(Ee,we){return pl(Ee||[],we||[],wi)}function bf(Ee,we){return pl(Ee||[],we||[],ki)}var Ef=ts(function(Ee){var we=Ee.length,Fe=we>1?Ee[we-1]:ne;return Fe=typeof Fe=="function"?(Ee.pop(),Fe):ne,Xl(Ee,Fe)});function Jl(Ee){var we=Qe(Ee);return we.__chain__=!0,we}function Cf(Ee,we){return we(Ee),Ee}function Co(Ee,we){return we(Ee)}var Sf=Cr(function(Ee){var we=Ee.length,Fe=we?Ee[0]:0,Pe=this.__wrapped__,qe=function(Ze){return da(Ze,Ee)};return we>1||this.__actions__.length||!(Pe instanceof rs)||!_r(Fe)?this.thru(qe):(Pe=Pe.slice(Fe,+Fe+(we?1:0)),Pe.__actions__.push({func:Co,args:[qe],thisArg:ne}),new rr(Pe,this.__chain__).thru(function(Ze){return we&&!Ze.length&&Ze.push(ne),Ze}))});function wf(){return Jl(this)}function $f(){return new rr(this.value(),this.__chain__)}function Tf(){this.__values__===ne&&(this.__values__=hu(this.value()));var Ee=this.__index__>=this.__values__.length,we=Ee?ne:this.__values__[this.__index__++];return{done:Ee,value:we}}function If(){return this}function Nf(Ee){for(var we,Fe=this;Fe instanceof ao;){var Pe=ql(Fe);Pe.__index__=0,Pe.__values__=ne,we?qe.__wrapped__=Pe:we=Pe;var qe=Pe;Fe=Fe.__wrapped__}return qe.__wrapped__=Ee,we}function Df(){var Ee=this.__wrapped__;if(Ee instanceof rs){var we=Ee;return this.__actions__.length&&(we=new rs(this)),we=we.reverse(),we.__actions__.push({func:Co,args:[za],thisArg:ne}),new rr(we,this.__chain__)}return this.thru(za)}function kf(){return hl(this.__wrapped__,this.__actions__)}var Ff=mo(function(Ee,we,Fe){ps.call(Ee,Fe)?++Ee[Fe]:br(Ee,Fe,1)});function Of(Ee,we,Fe){var Pe=Yn(Ee)?Sc:vh;return Fe&&Vs(Ee,we,Fe)&&(we=ne),Pe(Ee,qn(we,3))}function Rf(Ee,we){var Fe=Yn(Ee)?Nr:Kc;return Fe(Ee,qn(we,3))}var Mf=Sl(Hl),Bf=Sl(Wl);function Pf(Ee,we){return Rs(So(Ee,we),1)}function Lf(Ee,we){return Rs(So(Ee,we),Ye)}function zf(Ee,we,Fe){return Fe=Fe===ne?1:Zn(Fe),Rs(So(Ee,we),Fe)}function Zl(Ee,we){var Fe=Yn(Ee)?tr:Or;return Fe(Ee,qn(we,3))}function eu(Ee,we){var Fe=Yn(Ee)?Yu:Qc;return Fe(Ee,qn(we,3))}var Vf=mo(function(Ee,we,Fe){ps.call(Ee,Fe)?Ee[Fe].push(we):br(Ee,Fe,[we])});function jf(Ee,we,Fe,Pe){Ee=Gs(Ee)?Ee:hi(Ee),Fe=Fe&&!Pe?Zn(Fe):0;var qe=Ee.length;return Fe<0&&(Fe=ks(qe+Fe,0)),No(Ee)?Fe<=qe&&Ee.indexOf(we,Fe)>-1:!!qe&&ei(Ee,we,Fe)>-1}var Uf=ts(function(Ee,we,Fe){var Pe=-1,qe=typeof we=="function",Ze=Gs(Ee)?gn(Ee.length):[];return Or(Ee,function(Qt){Ze[++Pe]=qe?Ws(we,Qt,Fe):Ni(Qt,we,Fe)}),Ze}),Gf=mo(function(Ee,we,Fe){br(Ee,Fe,we)});function So(Ee,we){var Fe=Yn(Ee)?bs:tl;return Fe(Ee,qn(we,3))}function qf(Ee,we,Fe,Pe){return Ee==null?[]:(Yn(we)||(we=we==null?[]:[we]),Fe=Pe?ne:Fe,Yn(Fe)||(Fe=Fe==null?[]:[Fe]),il(Ee,we,Fe))}var Hf=mo(function(Ee,we,Fe){Ee[Fe?0:1].push(we)},function(){return[[],[]]});function Wf(Ee,we,Fe){var Pe=Yn(Ee)?Jo:Ic,qe=arguments.length<3;return Pe(Ee,qn(we,4),Fe,qe,Or)}function Qf(Ee,we,Fe){var Pe=Yn(Ee)?Xu:Ic,qe=arguments.length<3;return Pe(Ee,qn(we,4),Fe,qe,Qc)}function Kf(Ee,we){var Fe=Yn(Ee)?Nr:Kc;return Fe(Ee,To(qn(we,3)))}function Yf(Ee){var we=Yn(Ee)?Gc:Bh;return we(Ee)}function Xf(Ee,we,Fe){(Fe?Vs(Ee,we,Fe):we===ne)?we=1:we=Zn(we);var Pe=Yn(Ee)?ph:Ph;return Pe(Ee,we)}function Jf(Ee){var we=Yn(Ee)?fh:Vh;return we(Ee)}function Zf(Ee){if(Ee==null)return 0;if(Gs(Ee))return No(Ee)?ni(Ee):Ee.length;var we=Ps(Ee);return we==Dn||we==Tn?Ee.size:Aa(Ee).length}function em(Ee,we,Fe){var Pe=Yn(Ee)?Zo:jh;return Fe&&Vs(Ee,we,Fe)&&(we=ne),Pe(Ee,qn(we,3))}var tm=ts(function(Ee,we){if(Ee==null)return[];var Fe=we.length;return Fe>1&&Vs(Ee,we[0],we[1])?we=[]:Fe>2&&Vs(we[0],we[1],we[2])&&(we=[we[0]]),il(Ee,Rs(we,1),[])}),wo=Id||function(){return Os.Date.now()};function nm(Ee,we){if(typeof we!="function")throw new nr(ce);return Ee=Zn(Ee),function(){if(--Ee<1)return we.apply(this,arguments)}}function tu(Ee,we,Fe){return we=Fe?ne:we,we=Ee&&we==null?Ee.length:we,Er(Ee,De,ne,ne,ne,ne,we)}function nu(Ee,we){var Fe;if(typeof we!="function")throw new nr(ce);return Ee=Zn(Ee),function(){return--Ee>0&&(Fe=we.apply(this,arguments)),Ee<=1&&(we=ne),Fe}}var ja=ts(function(Ee,we,Fe){var Pe=Ce;if(Fe.length){var qe=kr(Fe,ui(ja));Pe|=Ie}return Er(Ee,Pe,we,Fe,qe)}),su=ts(function(Ee,we,Fe){var Pe=Ce|Se;if(Fe.length){var qe=kr(Fe,ui(su));Pe|=Ie}return Er(we,Pe,Ee,Fe,qe)});function ru(Ee,we,Fe){we=Fe?ne:we;var Pe=Er(Ee,Te,ne,ne,ne,ne,ne,we);return Pe.placeholder=ru.placeholder,Pe}function iu(Ee,we,Fe){we=Fe?ne:we;var Pe=Er(Ee,Ne,ne,ne,ne,ne,ne,we);return Pe.placeholder=iu.placeholder,Pe}function ou(Ee,we,Fe){var Pe,qe,Ze,Qt,Jt,hn,Cn=0,_n=!1,In=!1,On=!0;if(typeof Ee!="function")throw new nr(ce);we=cr(we)||0,Es(Fe)&&(_n=!!Fe.leading,In="maxWait"in Fe,Ze=In?ks(cr(Fe.maxWait)||0,we):Ze,On="trailing"in Fe?!!Fe.trailing:On);function jn(Is){var pr=Pe,$r=qe;return Pe=qe=ne,Cn=Is,Qt=Ee.apply($r,pr),Qt}function Hn(Is){return Cn=Is,Jt=Ri(ns,we),_n?jn(Is):Qt}function es(Is){var pr=Is-hn,$r=Is-Cn,Su=we-pr;return In?Bs(Su,Ze-$r):Su}function Wn(Is){var pr=Is-hn,$r=Is-Cn;return hn===ne||pr>=we||pr<0||In&&$r>=Ze}function ns(){var Is=wo();if(Wn(Is))return as(Is);Jt=Ri(ns,es(Is))}function as(Is){return Jt=ne,On&&Pe?jn(Is):(Pe=qe=ne,Qt)}function Xs(){Jt!==ne&&ml(Jt),Cn=0,Pe=hn=qe=Jt=ne}function js(){return Jt===ne?Qt:as(wo())}function Js(){var Is=wo(),pr=Wn(Is);if(Pe=arguments,qe=this,hn=Is,pr){if(Jt===ne)return Hn(hn);if(In)return ml(Jt),Jt=Ri(ns,we),jn(hn)}return Jt===ne&&(Jt=Ri(ns,we)),Qt}return Js.cancel=Xs,Js.flush=js,Js}var sm=ts(function(Ee,we){return Wc(Ee,1,we)}),rm=ts(function(Ee,we,Fe){return Wc(Ee,cr(we)||0,Fe)});function im(Ee){return Er(Ee,Be)}function $o(Ee,we){if(typeof Ee!="function"||we!=null&&typeof we!="function")throw new nr(ce);var Fe=function(){var Pe=arguments,qe=we?we.apply(this,Pe):Pe[0],Ze=Fe.cache;if(Ze.has(qe))return Ze.get(qe);var Qt=Ee.apply(this,Pe);return Fe.cache=Ze.set(qe,Qt)||Ze,Qt};return Fe.cache=new($o.Cache||xr),Fe}$o.Cache=xr;function To(Ee){if(typeof Ee!="function")throw new nr(ce);return function(){var we=arguments;switch(we.length){case 0:return!Ee.call(this);case 1:return!Ee.call(this,we[0]);case 2:return!Ee.call(this,we[0],we[1]);case 3:return!Ee.call(this,we[0],we[1],we[2])}return!Ee.apply(this,we)}}function om(Ee){return nu(2,Ee)}var am=Uh(function(Ee,we){we=we.length==1&&Yn(we[0])?bs(we[0],Qs(qn())):bs(Rs(we,1),Qs(qn()));var Fe=we.length;return ts(function(Pe){for(var qe=-1,Ze=Bs(Pe.length,Fe);++qe<Ze;)Pe[qe]=we[qe].call(this,Pe[qe]);return Ws(Ee,this,Pe)})}),Ua=ts(function(Ee,we){var Fe=kr(we,ui(Ua));return Er(Ee,Ie,ne,we,Fe)}),au=ts(function(Ee,we){var Fe=kr(we,ui(au));return Er(Ee,ke,ne,we,Fe)}),cm=Cr(function(Ee,we){return Er(Ee,Oe,ne,ne,ne,we)});function lm(Ee,we){if(typeof Ee!="function")throw new nr(ce);return we=we===ne?we:Zn(we),ts(Ee,we)}function um(Ee,we){if(typeof Ee!="function")throw new nr(ce);return we=we==null?0:ks(Zn(we),0),ts(function(Fe){var Pe=Fe[we],qe=Br(Fe,0,we);return Pe&&Dr(qe,Pe),Ws(Ee,this,qe)})}function dm(Ee,we,Fe){var Pe=!0,qe=!0;if(typeof Ee!="function")throw new nr(ce);return Es(Fe)&&(Pe="leading"in Fe?!!Fe.leading:Pe,qe="trailing"in Fe?!!Fe.trailing:qe),ou(Ee,we,{leading:Pe,maxWait:we,trailing:qe})}function hm(Ee){return tu(Ee,1)}function pm(Ee,we){return Ua($a(we),Ee)}function fm(){if(!arguments.length)return[];var Ee=arguments[0];return Yn(Ee)?Ee:[Ee]}function mm(Ee){return ir(Ee,ve)}function gm(Ee,we){return we=typeof we=="function"?we:ne,ir(Ee,ve,we)}function Am(Ee){return ir(Ee,me|ve)}function vm(Ee,we){return we=typeof we=="function"?we:ne,ir(Ee,me|ve,we)}function ym(Ee,we){return we==null||Hc(Ee,we,Fs(we))}function hr(Ee,we){return Ee===we||Ee!==Ee&&we!==we}var xm=yo(fa),bm=yo(function(Ee,we){return Ee>=we}),Qr=Jc(function(){return arguments}())?Jc:function(Ee){return Ss(Ee)&&ps.call(Ee,"callee")&&!Pc.call(Ee,"callee")},Yn=gn.isArray,Em=vc?Qs(vc):Sh;function Gs(Ee){return Ee!=null&&Io(Ee.length)&&!Sr(Ee)}function Ts(Ee){return Ss(Ee)&&Gs(Ee)}function Cm(Ee){return Ee===!0||Ee===!1||Ss(Ee)&&zs(Ee)==rn}var Pr=Dd||tc,Sm=yc?Qs(yc):wh;function wm(Ee){return Ss(Ee)&&Ee.nodeType===1&&!Mi(Ee)}function $m(Ee){if(Ee==null)return!0;if(Gs(Ee)&&(Yn(Ee)||typeof Ee=="string"||typeof Ee.splice=="function"||Pr(Ee)||di(Ee)||Qr(Ee)))return!Ee.length;var we=Ps(Ee);if(we==Dn||we==Tn)return!Ee.size;if(Oi(Ee))return!Aa(Ee).length;for(var Fe in Ee)if(ps.call(Ee,Fe))return!1;return!0}function Tm(Ee,we){return Di(Ee,we)}function Im(Ee,we,Fe){Fe=typeof Fe=="function"?Fe:ne;var Pe=Fe?Fe(Ee,we):ne;return Pe===ne?Di(Ee,we,ne,Fe):!!Pe}function Ga(Ee){if(!Ss(Ee))return!1;var we=zs(Ee);return we==Sn||we==yn||typeof Ee.message=="string"&&typeof Ee.name=="string"&&!Mi(Ee)}function Nm(Ee){return typeof Ee=="number"&&zc(Ee)}function Sr(Ee){if(!Es(Ee))return!1;var we=zs(Ee);return we==kn||we==Bn||we==nn||we==fn}function cu(Ee){return typeof Ee=="number"&&Ee==Zn(Ee)}function Io(Ee){return typeof Ee=="number"&&Ee>-1&&Ee%1==0&&Ee<=Ue}function Es(Ee){var we=typeof Ee;return Ee!=null&&(we=="object"||we=="function")}function Ss(Ee){return Ee!=null&&typeof Ee=="object"}var lu=xc?Qs(xc):Th;function Dm(Ee,we){return Ee===we||ga(Ee,we,Oa(we))}function km(Ee,we,Fe){return Fe=typeof Fe=="function"?Fe:ne,ga(Ee,we,Oa(we),Fe)}function Fm(Ee){return uu(Ee)&&Ee!=+Ee}function Om(Ee){if(pp(Ee))throw new Qn(ae);return Zc(Ee)}function Rm(Ee){return Ee===null}function Mm(Ee){return Ee==null}function uu(Ee){return typeof Ee=="number"||Ss(Ee)&&zs(Ee)==Je}function Mi(Ee){if(!Ss(Ee)||zs(Ee)!=an)return!1;var we=eo(Ee);if(we===null)return!0;var Fe=ps.call(we,"constructor")&&we.constructor;return typeof Fe=="function"&&Fe instanceof Fe&&Yi.call(Fe)==Sd}var qa=bc?Qs(bc):Ih;function Bm(Ee){return cu(Ee)&&Ee>=-Ue&&Ee<=Ue}var du=Ec?Qs(Ec):Nh;function No(Ee){return typeof Ee=="string"||!Yn(Ee)&&Ss(Ee)&&zs(Ee)==Vn}function Ys(Ee){return typeof Ee=="symbol"||Ss(Ee)&&zs(Ee)==Gn}var di=Cc?Qs(Cc):Dh;function Pm(Ee){return Ee===ne}function Lm(Ee){return Ss(Ee)&&Ps(Ee)==Un}function zm(Ee){return Ss(Ee)&&zs(Ee)==ls}var Vm=yo(va),jm=yo(function(Ee,we){return Ee<=we});function hu(Ee){if(!Ee)return[];if(Gs(Ee))return No(Ee)?ur(Ee):Us(Ee);if(yi&&Ee[yi])return dd(Ee[yi]());var we=Ps(Ee),Fe=we==Dn?ia:we==Tn?Wi:hi;return Fe(Ee)}function wr(Ee){if(!Ee)return Ee===0?Ee:0;if(Ee=cr(Ee),Ee===Ye||Ee===-Ye){var we=Ee<0?-1:1;return we*Ke}return Ee===Ee?Ee:0}function Zn(Ee){var we=wr(Ee),Fe=we%1;return we===we?Fe?we-Fe:we:0}function pu(Ee){return Ee?Ur(Zn(Ee),0,Vt):0}function cr(Ee){if(typeof Ee=="number")return Ee;if(Ys(Ee))return Xe;if(Es(Ee)){var we=typeof Ee.valueOf=="function"?Ee.valueOf():Ee;Ee=Es(we)?we+"":we}if(typeof Ee!="string")return Ee===0?Ee:+Ee;Ee=Nc(Ee);var Fe=Bo.test(Ee);return Fe||Lo.test(Ee)?Wu(Ee.slice(2),Fe?2:8):Mo.test(Ee)?Xe:+Ee}function fu(Ee){return gr(Ee,qs(Ee))}function Um(Ee){return Ee?Ur(Zn(Ee),-Ue,Ue):Ee===0?Ee:0}function hs(Ee){return Ee==null?"":Ks(Ee)}var Gm=ci(function(Ee,we){if(Oi(we)||Gs(we)){gr(we,Fs(we),Ee);return}for(var Fe in we)ps.call(we,Fe)&&wi(Ee,Fe,we[Fe])}),mu=ci(function(Ee,we){gr(we,qs(we),Ee)}),Do=ci(function(Ee,we,Fe,Pe){gr(we,qs(we),Ee,Pe)}),qm=ci(function(Ee,we,Fe,Pe){gr(we,Fs(we),Ee,Pe)}),Hm=Cr(da);function Wm(Ee,we){var Fe=ai(Ee);return we==null?Fe:qc(Fe,we)}var Qm=ts(function(Ee,we){Ee=gs(Ee);var Fe=-1,Pe=we.length,qe=Pe>2?we[2]:ne;for(qe&&Vs(we[0],we[1],qe)&&(Pe=1);++Fe<Pe;)for(var Ze=we[Fe],Qt=qs(Ze),Jt=-1,hn=Qt.length;++Jt<hn;){var Cn=Qt[Jt],_n=Ee[Cn];(_n===ne||hr(_n,ri[Cn])&&!ps.call(Ee,Cn))&&(Ee[Cn]=Ze[Cn])}return Ee}),Km=ts(function(Ee){return Ee.push(ne,kl),Ws(gu,ne,Ee)});function Ym(Ee,we){return wc(Ee,qn(we,3),mr)}function Xm(Ee,we){return wc(Ee,qn(we,3),pa)}function Jm(Ee,we){return Ee==null?Ee:ha(Ee,qn(we,3),qs)}function Zm(Ee,we){return Ee==null?Ee:Yc(Ee,qn(we,3),qs)}function e1(Ee,we){return Ee&&mr(Ee,qn(we,3))}function t1(Ee,we){return Ee&&pa(Ee,qn(we,3))}function n1(Ee){return Ee==null?[]:uo(Ee,Fs(Ee))}function s1(Ee){return Ee==null?[]:uo(Ee,qs(Ee))}function Ha(Ee,we,Fe){var Pe=Ee==null?ne:Gr(Ee,we);return Pe===ne?Fe:Pe}function r1(Ee,we){return Ee!=null&&Rl(Ee,we,xh)}function Wa(Ee,we){return Ee!=null&&Rl(Ee,we,bh)}var i1=$l(function(Ee,we,Fe){we!=null&&typeof we.toString!="function"&&(we=Xi.call(we)),Ee[we]=Fe},Ka(Hs)),o1=$l(function(Ee,we,Fe){we!=null&&typeof we.toString!="function"&&(we=Xi.call(we)),ps.call(Ee,we)?Ee[we].push(Fe):Ee[we]=[Fe]},qn),c1=ts(Ni);function Fs(Ee){return Gs(Ee)?Uc(Ee):Aa(Ee)}function qs(Ee){return Gs(Ee)?Uc(Ee,!0):kh(Ee)}function l1(Ee,we){var Fe={};return we=qn(we,3),mr(Ee,function(Pe,qe,Ze){br(Fe,we(Pe,qe,Ze),Pe)}),Fe}function u1(Ee,we){var Fe={};return we=qn(we,3),mr(Ee,function(Pe,qe,Ze){br(Fe,qe,we(Pe,qe,Ze))}),Fe}var d1=ci(function(Ee,we,Fe){ho(Ee,we,Fe)}),gu=ci(function(Ee,we,Fe,Pe){ho(Ee,we,Fe,Pe)}),h1=Cr(function(Ee,we){var Fe={};if(Ee==null)return Fe;var Pe=!1;we=bs(we,function(Ze){return Ze=Mr(Ze,Ee),Pe||(Pe=Ze.length>1),Ze}),gr(Ee,ka(Ee),Fe),Pe&&(Fe=ir(Fe,me|ge|ve,ep));for(var qe=we.length;qe--;)Ca(Fe,we[qe]);return Fe});function p1(Ee,we){return Au(Ee,To(qn(we)))}var f1=Cr(function(Ee,we){return Ee==null?{}:Oh(Ee,we)});function Au(Ee,we){if(Ee==null)return{};var Fe=bs(ka(Ee),function(Pe){return[Pe]});return we=qn(we),ol(Ee,Fe,function(Pe,qe){return we(Pe,qe[0])})}function m1(Ee,we,Fe){we=Mr(we,Ee);var Pe=-1,qe=we.length;for(qe||(qe=1,Ee=ne);++Pe<qe;){var Ze=Ee==null?ne:Ee[Ar(we[Pe])];Ze===ne&&(Pe=qe,Ze=Fe),Ee=Sr(Ze)?Ze.call(Ee):Ze}return Ee}function g1(Ee,we,Fe){return Ee==null?Ee:ki(Ee,we,Fe)}function A1(Ee,we,Fe,Pe){return Pe=typeof Pe=="function"?Pe:ne,Ee==null?Ee:ki(Ee,we,Fe,Pe)}var vu=Nl(Fs),yu=Nl(qs);function v1(Ee,we,Fe){var Pe=Yn(Ee),qe=Pe||Pr(Ee)||di(Ee);if(we=qn(we,4),Fe==null){var Ze=Ee&&Ee.constructor;qe?Fe=Pe?new Ze:[]:Es(Ee)?Fe=Sr(Ze)?ai(eo(Ee)):{}:Fe={}}return(qe?tr:mr)(Ee,function(Qt,Jt,hn){return we(Fe,Qt,Jt,hn)}),Fe}function y1(Ee,we){return Ee==null?!0:Ca(Ee,we)}function x1(Ee,we,Fe){return Ee==null?Ee:dl(Ee,we,$a(Fe))}function b1(Ee,we,Fe,Pe){return Pe=typeof Pe=="function"?Pe:ne,Ee==null?Ee:dl(Ee,we,$a(Fe),Pe)}function hi(Ee){return Ee==null?[]:ra(Ee,Fs(Ee))}function E1(Ee){return Ee==null?[]:ra(Ee,qs(Ee))}function C1(Ee,we,Fe){return Fe===ne&&(Fe=we,we=ne),Fe!==ne&&(Fe=cr(Fe),Fe=Fe===Fe?Fe:0),we!==ne&&(we=cr(we),we=we===we?we:0),Ur(cr(Ee),we,Fe)}function _1(Ee,we,Fe){return we=wr(we),Fe===ne?(Fe=we,we=0):Fe=wr(Fe),Ee=cr(Ee),Eh(Ee,we,Fe)}function S1(Ee,we,Fe){if(Fe&&typeof Fe!="boolean"&&Vs(Ee,we,Fe)&&(we=Fe=ne),Fe===ne&&(typeof we=="boolean"?(Fe=we,we=ne):typeof Ee=="boolean"&&(Fe=Ee,Ee=ne)),Ee===ne&&we===ne?(Ee=0,we=1):(Ee=wr(Ee),we===ne?(we=Ee,Ee=0):we=wr(we)),Ee>we){var Pe=Ee;Ee=we,we=Pe}if(Fe||Ee%1||we%1){var qe=Vc();return Bs(Ee+qe*(we-Ee+Hu("1e-"+((qe+"").length-1))),we)}return xa(Ee,we)}var w1=li(function(Ee,we,Fe){return we=we.toLowerCase(),Ee+(Fe?xu(we):we)});function xu(Ee){return Qa(hs(Ee).toLowerCase())}function bu(Ee){return Ee=hs(Ee),Ee&&Ee.replace(Vo,od).replace(Mu,"")}function $1(Ee,we,Fe){Ee=hs(Ee),we=Ks(we);var Pe=Ee.length;Fe=Fe===ne?Pe:Ur(Zn(Fe),0,Pe);var qe=Fe;return Fe-=we.length,Fe>=0&&Ee.slice(Fe,qe)==we}function T1(Ee){return Ee=hs(Ee),Ee&&ds.test(Ee)?Ee.replace(fs,ad):Ee}function I1(Ee){return Ee=hs(Ee),Ee&&Kr.test(Ee)?Ee.replace(Tr,"\\$&"):Ee}var N1=li(function(Ee,we,Fe){return Ee+(Fe?"-":"")+we.toLowerCase()}),D1=li(function(Ee,we,Fe){return Ee+(Fe?" ":"")+we.toLowerCase()}),k1=Cl("toLowerCase");function F1(Ee,we,Fe){Ee=hs(Ee),we=Zn(we);var Pe=we?ni(Ee):0;if(!we||Pe>=we)return Ee;var qe=(we-Pe)/2;return vo(ro(qe),Fe)+Ee+vo(so(qe),Fe)}function O1(Ee,we,Fe){Ee=hs(Ee),we=Zn(we);var Pe=we?ni(Ee):0;return we&&Pe<we?Ee+vo(we-Pe,Fe):Ee}function R1(Ee,we,Fe){Ee=hs(Ee),we=Zn(we);var Pe=we?ni(Ee):0;return we&&Pe<we?vo(we-Pe,Fe)+Ee:Ee}function M1(Ee,we,Fe){return Fe||we==null?we=0:we&&(we=+we),Rd(hs(Ee).replace(Ls,""),we||0)}function B1(Ee,we,Fe){return(Fe?Vs(Ee,we,Fe):we===ne)?we=1:we=Zn(we),ba(hs(Ee),we)}function P1(){var Ee=arguments,we=hs(Ee[0]);return Ee.length<3?we:we.replace(Ee[1],Ee[2])}var L1=li(function(Ee,we,Fe){return Ee+(Fe?"_":"")+we.toLowerCase()});function z1(Ee,we,Fe){return Fe&&typeof Fe!="number"&&Vs(Ee,we,Fe)&&(we=Fe=ne),Fe=Fe===ne?Vt:Fe>>>0,Fe?(Ee=hs(Ee),Ee&&(typeof we=="string"||we!=null&&!qa(we))&&(we=Ks(we),!we&&ti(Ee))?Br(ur(Ee),0,Fe):Ee.split(we,Fe)):[]}var V1=li(function(Ee,we,Fe){return Ee+(Fe?" ":"")+Qa(we)});function j1(Ee,we,Fe){return Ee=hs(Ee),Fe=Fe==null?0:Ur(Zn(Fe),0,Ee.length),we=Ks(we),Ee.slice(Fe,Fe+we.length)==we}function U1(Ee,we,Fe){var Pe=Qe.templateSettings;Fe&&Vs(Ee,we,Fe)&&(we=ne),Ee=hs(Ee),we=Do({},we,Pe,Dl);var qe=Do({},we.imports,Pe.imports,Dl),Ze=Fs(qe),Qt=ra(qe,Ze),Jt,hn,Cn=0,_n=we.interpolate||Xr,In="__p += '",On=oa((we.escape||Xr).source+"|"+_n.source+"|"+(_n===ws?Ro:Xr).source+"|"+(we.evaluate||Xr).source+"|$","g"),jn="//# sourceURL="+(ps.call(we,"sourceURL")?(we.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vu+"]")+`
`;Ee.replace(On,function(Wn,ns,as,Xs,js,Js){return as||(as=Xs),In+=Ee.slice(Cn,Js).replace(jo,cd),ns&&(Jt=!0,In+=`' +
__e(`+ns+`) +
'`),js&&(hn=!0,In+=`';
`+js+`;
__p += '`),as&&(In+=`' +
((__t = (`+as+`)) == null ? '' : __t) +
'`),Cn=Js+Wn.length,Wn}),In+=`';
`;var Hn=ps.call(we,"variable")&&we.variable;if(!Hn)In=`with (obj) {
`+In+`
}
`;else if(pi.test(Hn))throw new Qn(le);In=(hn?In.replace(Ln,""):In).replace(zn,"$1").replace(Xn,"$1;"),In="function("+(Hn||"obj")+`) {
`+(Hn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Jt?", __e = _.escape":"")+(hn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+In+`return __p
}`;var es=Cu(function(){return us(Ze,jn+"return "+In).apply(ne,Qt)});if(es.source=In,Ga(es))throw es;return es}function G1(Ee){return hs(Ee).toLowerCase()}function q1(Ee){return hs(Ee).toUpperCase()}function H1(Ee,we,Fe){if(Ee=hs(Ee),Ee&&(Fe||we===ne))return Nc(Ee);if(!Ee||!(we=Ks(we)))return Ee;var Pe=ur(Ee),qe=ur(we),Ze=Dc(Pe,qe),Qt=kc(Pe,qe)+1;return Br(Pe,Ze,Qt).join("")}function W1(Ee,we,Fe){if(Ee=hs(Ee),Ee&&(Fe||we===ne))return Ee.slice(0,Oc(Ee)+1);if(!Ee||!(we=Ks(we)))return Ee;var Pe=ur(Ee),qe=kc(Pe,ur(we))+1;return Br(Pe,0,qe).join("")}function Q1(Ee,we,Fe){if(Ee=hs(Ee),Ee&&(Fe||we===ne))return Ee.replace(Ls,"");if(!Ee||!(we=Ks(we)))return Ee;var Pe=ur(Ee),qe=Dc(Pe,ur(we));return Br(Pe,qe).join("")}function K1(Ee,we){var Fe=Me,Pe=Le;if(Es(we)){var qe="separator"in we?we.separator:qe;Fe="length"in we?Zn(we.length):Fe,Pe="omission"in we?Ks(we.omission):Pe}Ee=hs(Ee);var Ze=Ee.length;if(ti(Ee)){var Qt=ur(Ee);Ze=Qt.length}if(Fe>=Ze)return Ee;var Jt=Fe-ni(Pe);if(Jt<1)return Pe;var hn=Qt?Br(Qt,0,Jt).join(""):Ee.slice(0,Jt);if(qe===ne)return hn+Pe;if(Qt&&(Jt+=hn.length-Jt),qa(qe)){if(Ee.slice(Jt).search(qe)){var Cn,_n=hn;for(qe.global||(qe=oa(qe.source,hs(Bi.exec(qe))+"g")),qe.lastIndex=0;Cn=qe.exec(_n);)var In=Cn.index;hn=hn.slice(0,In===ne?Jt:In)}}else if(Ee.indexOf(Ks(qe),Jt)!=Jt){var On=hn.lastIndexOf(qe);On>-1&&(hn=hn.slice(0,On))}return hn+Pe}function Y1(Ee){return Ee=hs(Ee),Ee&&ms.test(Ee)?Ee.replace(cs,gd):Ee}var X1=li(function(Ee,we,Fe){return Ee+(Fe?" ":"")+we.toUpperCase()}),Qa=Cl("toUpperCase");function Eu(Ee,we,Fe){return Ee=hs(Ee),we=Fe?ne:we,we===ne?ud(Ee)?yd(Ee):ed(Ee):Ee.match(we)||[]}var Cu=ts(function(Ee,we){try{return Ws(Ee,ne,we)}catch(Fe){return Ga(Fe)?Fe:new Qn(Fe)}}),J1=Cr(function(Ee,we){return tr(we,function(Fe){Fe=Ar(Fe),br(Ee,Fe,ja(Ee[Fe],Ee))}),Ee});function Z1(Ee){var we=Ee==null?0:Ee.length,Fe=qn();return Ee=we?bs(Ee,function(Pe){if(typeof Pe[1]!="function")throw new nr(ce);return[Fe(Pe[0]),Pe[1]]}):[],ts(function(Pe){for(var qe=-1;++qe<we;){var Ze=Ee[qe];if(Ws(Ze[0],this,Pe))return Ws(Ze[1],this,Pe)}})}function eg(Ee){return Ah(ir(Ee,me))}function Ka(Ee){return function(){return Ee}}function tg(Ee,we){return Ee==null||Ee!==Ee?we:Ee}var ng=wl(),sg=wl(!0);function Hs(Ee){return Ee}function Ya(Ee){return el(typeof Ee=="function"?Ee:ir(Ee,me))}function rg(Ee){return nl(ir(Ee,me))}function ig(Ee,we){return sl(Ee,ir(we,me))}var og=ts(function(Ee,we){return function(Fe){return Ni(Fe,Ee,we)}}),ag=ts(function(Ee,we){return function(Fe){return Ni(Ee,Fe,we)}});function Xa(Ee,we,Fe){var Pe=Fs(we),qe=uo(we,Pe);Fe==null&&!(Es(we)&&(qe.length||!Pe.length))&&(Fe=we,we=Ee,Ee=this,qe=uo(we,Fs(we)));var Ze=!(Es(Fe)&&"chain"in Fe)||!!Fe.chain,Qt=Sr(Ee);return tr(qe,function(Jt){var hn=we[Jt];Ee[Jt]=hn,Qt&&(Ee.prototype[Jt]=function(){var Cn=this.__chain__;if(Ze||Cn){var _n=Ee(this.__wrapped__),In=_n.__actions__=Us(this.__actions__);return In.push({func:hn,args:arguments,thisArg:Ee}),_n.__chain__=Cn,_n}return hn.apply(Ee,Dr([this.value()],arguments))})}),Ee}function cg(){return Os._===this&&(Os._=wd),this}function Ja(){}function lg(Ee){return Ee=Zn(Ee),ts(function(we){return rl(we,Ee)})}var ug=Ia(bs),dg=Ia(Sc),hg=Ia(Zo);function _u(Ee){return Ma(Ee)?ea(Ar(Ee)):Rh(Ee)}function pg(Ee){return function(we){return Ee==null?ne:Gr(Ee,we)}}var fg=Tl(),mg=Tl(!0);function Za(){return[]}function tc(){return!1}function gg(){return{}}function Ag(){return""}function vg(){return!0}function yg(Ee,we){if(Ee=Zn(Ee),Ee<1||Ee>Ue)return[];var Fe=Vt,Pe=Bs(Ee,Vt);we=qn(we),Ee-=Vt;for(var qe=sa(Pe,we);++Fe<Ee;)we(Fe);return qe}function xg(Ee){return Yn(Ee)?bs(Ee,Ar):Ys(Ee)?[Ee]:Us(Gl(hs(Ee)))}function bg(Ee){var we=++Cd;return hs(Ee)+we}var Eg=Ao(function(Ee,we){return Ee+we},0),Cg=Na("ceil"),Sg=Ao(function(Ee,we){return Ee/we},1),wg=Na("floor");function $g(Ee){return Ee&&Ee.length?lo(Ee,Hs,fa):ne}function Tg(Ee,we){return Ee&&Ee.length?lo(Ee,qn(we,2),fa):ne}function Ig(Ee){return Tc(Ee,Hs)}function Ng(Ee,we){return Tc(Ee,qn(we,2))}function Dg(Ee){return Ee&&Ee.length?lo(Ee,Hs,va):ne}function kg(Ee,we){return Ee&&Ee.length?lo(Ee,qn(we,2),va):ne}var Fg=Ao(function(Ee,we){return Ee*we},1),Og=Na("round"),Rg=Ao(function(Ee,we){return Ee-we},0);function Mg(Ee){return Ee&&Ee.length?na(Ee,Hs):0}function Bg(Ee,we){return Ee&&Ee.length?na(Ee,qn(we,2)):0}return Qe.after=nm,Qe.ary=tu,Qe.assign=Gm,Qe.assignIn=mu,Qe.assignInWith=Do,Qe.assignWith=qm,Qe.at=Hm,Qe.before=nu,Qe.bind=ja,Qe.bindAll=J1,Qe.bindKey=su,Qe.castArray=fm,Qe.chain=Jl,Qe.chunk=xp,Qe.compact=bp,Qe.concat=Ep,Qe.cond=Z1,Qe.conforms=eg,Qe.constant=Ka,Qe.countBy=Ff,Qe.create=Wm,Qe.curry=ru,Qe.curryRight=iu,Qe.debounce=ou,Qe.defaults=Qm,Qe.defaultsDeep=Km,Qe.defer=sm,Qe.delay=rm,Qe.difference=Cp,Qe.differenceBy=_p,Qe.differenceWith=Sp,Qe.drop=wp,Qe.dropRight=$p,Qe.dropRightWhile=Tp,Qe.dropWhile=Ip,Qe.fill=Np,Qe.filter=Rf,Qe.flatMap=Pf,Qe.flatMapDeep=Lf,Qe.flatMapDepth=zf,Qe.flatten=Ql,Qe.flattenDeep=Dp,Qe.flattenDepth=kp,Qe.flip=im,Qe.flow=ng,Qe.flowRight=sg,Qe.fromPairs=Fp,Qe.functions=n1,Qe.functionsIn=s1,Qe.groupBy=Vf,Qe.initial=Mp,Qe.intersection=Bp,Qe.intersectionBy=Pp,Qe.intersectionWith=Lp,Qe.invert=i1,Qe.invertBy=o1,Qe.invokeMap=Uf,Qe.iteratee=Ya,Qe.keyBy=Gf,Qe.keys=Fs,Qe.keysIn=qs,Qe.map=So,Qe.mapKeys=l1,Qe.mapValues=u1,Qe.matches=rg,Qe.matchesProperty=ig,Qe.memoize=$o,Qe.merge=d1,Qe.mergeWith=gu,Qe.method=og,Qe.methodOf=ag,Qe.mixin=Xa,Qe.negate=To,Qe.nthArg=lg,Qe.omit=h1,Qe.omitBy=p1,Qe.once=om,Qe.orderBy=qf,Qe.over=ug,Qe.overArgs=am,Qe.overEvery=dg,Qe.overSome=hg,Qe.partial=Ua,Qe.partialRight=au,Qe.partition=Hf,Qe.pick=f1,Qe.pickBy=Au,Qe.property=_u,Qe.propertyOf=pg,Qe.pull=Up,Qe.pullAll=Yl,Qe.pullAllBy=Gp,Qe.pullAllWith=qp,Qe.pullAt=Hp,Qe.range=fg,Qe.rangeRight=mg,Qe.rearg=cm,Qe.reject=Kf,Qe.remove=Wp,Qe.rest=lm,Qe.reverse=za,Qe.sampleSize=Xf,Qe.set=g1,Qe.setWith=A1,Qe.shuffle=Jf,Qe.slice=Qp,Qe.sortBy=tm,Qe.sortedUniq=tf,Qe.sortedUniqBy=nf,Qe.split=z1,Qe.spread=um,Qe.tail=sf,Qe.take=rf,Qe.takeRight=of,Qe.takeRightWhile=af,Qe.takeWhile=cf,Qe.tap=Cf,Qe.throttle=dm,Qe.thru=Co,Qe.toArray=hu,Qe.toPairs=vu,Qe.toPairsIn=yu,Qe.toPath=xg,Qe.toPlainObject=fu,Qe.transform=v1,Qe.unary=hm,Qe.union=lf,Qe.unionBy=uf,Qe.unionWith=df,Qe.uniq=hf,Qe.uniqBy=pf,Qe.uniqWith=ff,Qe.unset=y1,Qe.unzip=Va,Qe.unzipWith=Xl,Qe.update=x1,Qe.updateWith=b1,Qe.values=hi,Qe.valuesIn=E1,Qe.without=mf,Qe.words=Eu,Qe.wrap=pm,Qe.xor=gf,Qe.xorBy=Af,Qe.xorWith=vf,Qe.zip=yf,Qe.zipObject=xf,Qe.zipObjectDeep=bf,Qe.zipWith=Ef,Qe.entries=vu,Qe.entriesIn=yu,Qe.extend=mu,Qe.extendWith=Do,Xa(Qe,Qe),Qe.add=Eg,Qe.attempt=Cu,Qe.camelCase=w1,Qe.capitalize=xu,Qe.ceil=Cg,Qe.clamp=C1,Qe.clone=mm,Qe.cloneDeep=Am,Qe.cloneDeepWith=vm,Qe.cloneWith=gm,Qe.conformsTo=ym,Qe.deburr=bu,Qe.defaultTo=tg,Qe.divide=Sg,Qe.endsWith=$1,Qe.eq=hr,Qe.escape=T1,Qe.escapeRegExp=I1,Qe.every=Of,Qe.find=Mf,Qe.findIndex=Hl,Qe.findKey=Ym,Qe.findLast=Bf,Qe.findLastIndex=Wl,Qe.findLastKey=Xm,Qe.floor=wg,Qe.forEach=Zl,Qe.forEachRight=eu,Qe.forIn=Jm,Qe.forInRight=Zm,Qe.forOwn=e1,Qe.forOwnRight=t1,Qe.get=Ha,Qe.gt=xm,Qe.gte=bm,Qe.has=r1,Qe.hasIn=Wa,Qe.head=Kl,Qe.identity=Hs,Qe.includes=jf,Qe.indexOf=Rp,Qe.inRange=_1,Qe.invoke=c1,Qe.isArguments=Qr,Qe.isArray=Yn,Qe.isArrayBuffer=Em,Qe.isArrayLike=Gs,Qe.isArrayLikeObject=Ts,Qe.isBoolean=Cm,Qe.isBuffer=Pr,Qe.isDate=Sm,Qe.isElement=wm,Qe.isEmpty=$m,Qe.isEqual=Tm,Qe.isEqualWith=Im,Qe.isError=Ga,Qe.isFinite=Nm,Qe.isFunction=Sr,Qe.isInteger=cu,Qe.isLength=Io,Qe.isMap=lu,Qe.isMatch=Dm,Qe.isMatchWith=km,Qe.isNaN=Fm,Qe.isNative=Om,Qe.isNil=Mm,Qe.isNull=Rm,Qe.isNumber=uu,Qe.isObject=Es,Qe.isObjectLike=Ss,Qe.isPlainObject=Mi,Qe.isRegExp=qa,Qe.isSafeInteger=Bm,Qe.isSet=du,Qe.isString=No,Qe.isSymbol=Ys,Qe.isTypedArray=di,Qe.isUndefined=Pm,Qe.isWeakMap=Lm,Qe.isWeakSet=zm,Qe.join=zp,Qe.kebabCase=N1,Qe.last=ar,Qe.lastIndexOf=Vp,Qe.lowerCase=D1,Qe.lowerFirst=k1,Qe.lt=Vm,Qe.lte=jm,Qe.max=$g,Qe.maxBy=Tg,Qe.mean=Ig,Qe.meanBy=Ng,Qe.min=Dg,Qe.minBy=kg,Qe.stubArray=Za,Qe.stubFalse=tc,Qe.stubObject=gg,Qe.stubString=Ag,Qe.stubTrue=vg,Qe.multiply=Fg,Qe.nth=jp,Qe.noConflict=cg,Qe.noop=Ja,Qe.now=wo,Qe.pad=F1,Qe.padEnd=O1,Qe.padStart=R1,Qe.parseInt=M1,Qe.random=S1,Qe.reduce=Wf,Qe.reduceRight=Qf,Qe.repeat=B1,Qe.replace=P1,Qe.result=m1,Qe.round=Og,Qe.runInContext=un,Qe.sample=Yf,Qe.size=Zf,Qe.snakeCase=L1,Qe.some=em,Qe.sortedIndex=Kp,Qe.sortedIndexBy=Yp,Qe.sortedIndexOf=Xp,Qe.sortedLastIndex=Jp,Qe.sortedLastIndexBy=Zp,Qe.sortedLastIndexOf=ef,Qe.startCase=V1,Qe.startsWith=j1,Qe.subtract=Rg,Qe.sum=Mg,Qe.sumBy=Bg,Qe.template=U1,Qe.times=yg,Qe.toFinite=wr,Qe.toInteger=Zn,Qe.toLength=pu,Qe.toLower=G1,Qe.toNumber=cr,Qe.toSafeInteger=Um,Qe.toString=hs,Qe.toUpper=q1,Qe.trim=H1,Qe.trimEnd=W1,Qe.trimStart=Q1,Qe.truncate=K1,Qe.unescape=Y1,Qe.uniqueId=bg,Qe.upperCase=X1,Qe.upperFirst=Qa,Qe.each=Zl,Qe.eachRight=eu,Qe.first=Kl,Xa(Qe,function(){var Ee={};return mr(Qe,function(we,Fe){ps.call(Qe.prototype,Fe)||(Ee[Fe]=we)}),Ee}(),{chain:!1}),Qe.VERSION=ie,tr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(Ee){Qe[Ee].placeholder=Qe}),tr(["drop","take"],function(Ee,we){rs.prototype[Ee]=function(Fe){Fe=Fe===ne?1:ks(Zn(Fe),0);var Pe=this.__filtered__&&!we?new rs(this):this.clone();return Pe.__filtered__?Pe.__takeCount__=Bs(Fe,Pe.__takeCount__):Pe.__views__.push({size:Bs(Fe,Vt),type:Ee+(Pe.__dir__<0?"Right":"")}),Pe},rs.prototype[Ee+"Right"]=function(Fe){return this.reverse()[Ee](Fe).reverse()}}),tr(["filter","map","takeWhile"],function(Ee,we){var Fe=we+1,Pe=Fe==Ve||Fe==We;rs.prototype[Ee]=function(qe){var Ze=this.clone();return Ze.__iteratees__.push({iteratee:qn(qe,3),type:Fe}),Ze.__filtered__=Ze.__filtered__||Pe,Ze}}),tr(["head","last"],function(Ee,we){var Fe="take"+(we?"Right":"");rs.prototype[Ee]=function(){return this[Fe](1).value()[0]}}),tr(["initial","tail"],function(Ee,we){var Fe="drop"+(we?"":"Right");rs.prototype[Ee]=function(){return this.__filtered__?new rs(this):this[Fe](1)}}),rs.prototype.compact=function(){return this.filter(Hs)},rs.prototype.find=function(Ee){return this.filter(Ee).head()},rs.prototype.findLast=function(Ee){return this.reverse().find(Ee)},rs.prototype.invokeMap=ts(function(Ee,we){return typeof Ee=="function"?new rs(this):this.map(function(Fe){return Ni(Fe,Ee,we)})}),rs.prototype.reject=function(Ee){return this.filter(To(qn(Ee)))},rs.prototype.slice=function(Ee,we){Ee=Zn(Ee);var Fe=this;return Fe.__filtered__&&(Ee>0||we<0)?new rs(Fe):(Ee<0?Fe=Fe.takeRight(-Ee):Ee&&(Fe=Fe.drop(Ee)),we!==ne&&(we=Zn(we),Fe=we<0?Fe.dropRight(-we):Fe.take(we-Ee)),Fe)},rs.prototype.takeRightWhile=function(Ee){return this.reverse().takeWhile(Ee).reverse()},rs.prototype.toArray=function(){return this.take(Vt)},mr(rs.prototype,function(Ee,we){var Fe=/^(?:filter|find|map|reject)|While$/.test(we),Pe=/^(?:head|last)$/.test(we),qe=Qe[Pe?"take"+(we=="last"?"Right":""):we],Ze=Pe||/^find/.test(we);qe&&(Qe.prototype[we]=function(){var Qt=this.__wrapped__,Jt=Pe?[1]:arguments,hn=Qt instanceof rs,Cn=Jt[0],_n=hn||Yn(Qt),In=function(ns){var as=qe.apply(Qe,Dr([ns],Jt));return Pe&&On?as[0]:as};_n&&Fe&&typeof Cn=="function"&&Cn.length!=1&&(hn=_n=!1);var On=this.__chain__,jn=!!this.__actions__.length,Hn=Ze&&!On,es=hn&&!jn;if(!Ze&&_n){Qt=es?Qt:new rs(this);var Wn=Ee.apply(Qt,Jt);return Wn.__actions__.push({func:Co,args:[In],thisArg:ne}),new rr(Wn,On)}return Hn&&es?Ee.apply(this,Jt):(Wn=this.thru(In),Hn?Pe?Wn.value()[0]:Wn.value():Wn)})}),tr(["pop","push","shift","sort","splice","unshift"],function(Ee){var we=Qi[Ee],Fe=/^(?:push|sort|unshift)$/.test(Ee)?"tap":"thru",Pe=/^(?:pop|shift)$/.test(Ee);Qe.prototype[Ee]=function(){var qe=arguments;if(Pe&&!this.__chain__){var Ze=this.value();return we.apply(Yn(Ze)?Ze:[],qe)}return this[Fe](function(Qt){return we.apply(Yn(Qt)?Qt:[],qe)})}}),mr(rs.prototype,function(Ee,we){var Fe=Qe[we];if(Fe){var Pe=Fe.name+"";ps.call(oi,Pe)||(oi[Pe]=[]),oi[Pe].push({name:we,func:Fe})}}),oi[go(ne,Se).name]=[{name:"wrapper",func:ne}],rs.prototype.clone=jd,rs.prototype.reverse=Ud,rs.prototype.value=Gd,Qe.prototype.at=Sf,Qe.prototype.chain=wf,Qe.prototype.commit=$f,Qe.prototype.next=Tf,Qe.prototype.plant=Nf,Qe.prototype.reverse=Df,Qe.prototype.toJSON=Qe.prototype.valueOf=Qe.prototype.value=kf,Qe.prototype.first=Qe.prototype.head,yi&&(Qe.prototype[yi]=If),Qe},si=xd();Lr?((Lr.exports=si)._=si,Ko._=si):Os._=si}).call(commonjsGlobal)})(lodash,lodash.exports);var lodashExports=lodash.exports;const _$1=getDefaultExportFromCjs(lodashExports),flipObject=re=>Object.fromEntries(Object.entries(re).map(ee=>ee.reverse()));function randomSeed(re){let ee=Math.sin(re)*1e4;return ee-=Math.floor(ee)}const CIDToURL=(re,ee="CDN",ne)=>{if(re==null)return"";switch(ee!=="CDN"&&!lodashExports.isEmpty(ne)&&console.warn("Using options for IPFS Gateways does nothing"),ee){case"CDN":return`https://cache.teia.rocks/ipfs/${re}`;case"CLOUDFLARE":return`https://cloudflare-ipfs.com/ipfs/${re}`;case"PINATA":return`https://gateway.pinata.cloud/ipfs/${re}`;case"IPFS":return`https://ipfs.io/ipfs/${re}`;case"DWEB":return`http://dweb.link/ipfs/${re}`;case"NFTSTORAGE":return`https://nftstorage.link/ipfs/${re}`;default:return console.error("please specify type"),re}},HashToURL=(re,ee="CDN",ne={size:"raw"})=>{if(re==null)return"";const ie=re.split("ipfs://")[1];return CIDToURL(ie,ee,ne)};function formatRoyalties(re){const ee=lodashExports.get(re,"royalty_receivers.0.royalties");return lodashExports.isNumber(ee)?`${ee/1e4}%`:"-"}const BANNER_URL="https://lists.teia.art/teia-status",PATH={FEED:"/",ISSUER:"/tz",COLLAB:"/kt",ABOUT:"/about",FAQ:"/faq",CLAIM:"/claim",DAO:"/dao",PROPOSAL:"/proposal",POLLS:"/polls",POLL:"/poll",SYNC:"/sync",MINT:"/mint",OBJKT:"/objkt",TAGS:"/tags"},MINT_FILESIZE=2e3,MIMETYPE={BMP:"image/bmp",FLAC:"audio/flac",GIF:"image/gif",GLB:"model/gltf-binary",GLTF:"model/gltf+json",DIRECTORY:"application/x-directory",JPEG:"image/jpeg",MD:"text/markdown",MIDI:"audio/midi",MID:"audio/mid",MP3:"audio/mpeg",MP4:"video/mp4",OGA:"audio/ogg",OGV:"video/ogg",PDF:"application/pdf",PNG:"image/png",QUICKTIME:"video/quicktime",SVG:"image/svg+xml",TIFF:"image/tiff",WAV:"audio/wav",WEBM:"video/webm",WEBP:"image/webp",XWAV:"audio/x-wav",ZIP:"application/zip",ZIP1:"application/x-zip-compressed",ZIP2:"multipart/x-zip",TXT:"text/plain"},ALLOWED_MIMETYPES=Object.keys(MIMETYPE).map(re=>MIMETYPE[re]).filter(re=>re!==MIMETYPE.GLTF||re!==MIMETYPE.TXT),ALLOWED_FILETYPES_LABEL=Object.entries(MIMETYPE).filter(re=>ALLOWED_MIMETYPES.includes(re[1])).filter(re=>!["ZIP1","ZIP2","OGA","OGV","BMP","TIFF","XWAV","QUICKTIME","WEBP","TXT"].includes(re[0])).map(re=>re[0]==="ZIP"?"HTML (ZIP ARCHIVE)":re[0]).join(", "),FEED_LIST=["Recent Sales","Random","New OBJKTs","Friends","Quake Aid","🇵🇸 Tez4Pal","🇺🇦 Ukraine","🇵🇰 Pakistan","🇮🇷 Iran","🏳️‍🌈 Tezospride","Art4Artists","Image","Video","Audio","3D","HTML & SVG","GIF","PDF","Markdown"],DEFAULT_START_FEED="Recent Sales",ALLOWED_COVER_MIMETYPES=[MIMETYPE.JPEG,MIMETYPE.PNG,MIMETYPE.GIF,MIMETYPE.MP4],AUTO_GENERATE_COVER_MIMETYPES=["text/plain","audio/midi","audio/mid"],ALLOWED_COVER_FILETYPES_LABEL="jpeg, png, gif, mp4",MAX_EDITIONS=1e4,MIN_ROYALTIES=10,MAX_ROYALTIES=25,IPFS_DEFAULT_THUMBNAIL_URI="ipfs://QmNrhZHUaEqxhyLfqoq1mtHSipkWHeT31LNHb1QEbDHgnc",MARKETPLACE_CONTRACT_V1="KT1Hkg5qeNhfwpKW4fXvq7HGZB9z2EnmCCA9",MARKETPLACE_CONTRACT_V2="KT1HbQepzV1nVGg8QVznG7z4RcHseD5kwqBn",MARKETPLACE_CONTRACT_TEIA="KT1PHubm9HtyQEJ4BBpMTVomq6mhbfNZ9z5w",MARKETPLACE_CONTRACT_OBJKTCOM_V1="KT1FvqJwEDWb1Gwc55Jd1jjTHRVWbYKUUpyq",MARKETPLACE_CONTRACT_OBJKTCOM_V4="KT1WvzYHCNBvDSdwafTHv7nJ1dWmZ8GCYuuC",MARKETPLACE_CONTRACTS_FROM_NAME={"HEN v1 Marketplace":MARKETPLACE_CONTRACT_V1,"HEN v2 Marketplace":MARKETPLACE_CONTRACT_V2,"Teia Marketplace":MARKETPLACE_CONTRACT_TEIA,"OBJKT v1 Marketplace":MARKETPLACE_CONTRACT_OBJKTCOM_V1,"OBJKT v4 Marketplace":MARKETPLACE_CONTRACT_OBJKTCOM_V4,"Crunchy Burner":"KT1CZMurPAjSfZqcn6LBUNUhG4byE6AJgDT6"},MARKETPLACE_CONTRACTS_TO_NAME=flipObject(MARKETPLACE_CONTRACTS_FROM_NAME),HEN_CONTRACT_FA2="KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",ART4ARTISTS_BREADFOND_CONTRACT="KT1LgnHXu8NVa674xJhSFhnKjrn7v2ZMsu2a",TEZ4PAL_FUNDING_ADDRESS="tz2TfuukrHVoeUqFvcRViPJ2VqL7nEQi7xgW",UKRAINE_FUNDING_CONTRACT="KT1DWnLiUkNtAQDErXxudFEH63JC6mqg3HEx",PAKISTAN_FUNDING_CONTRACT="KT1Jpf2TAcZS7QfBraQMBeCxjFhH6kAdDL4z",IRAN_FUNDING_CONTRACT="KT1KYfj97fpdomqyKsZSBdSVvh9afh93b4Ge",QUAKE_FUNDING_CONTRACT="KT1X1jyohFrZyDYWvCPXw9KvWxk2VDwxyg2g",MOROCCO_QUAKE_FUNDING_CONTRACT="KT1RwXEP8Sj1UQDHPG4oEjRohBdzG2R7FCpA",POLLS_CONTRACT="KT1SUExZfkmxf2fafrVgYjZGEKDete2siWoU",DAO_GOVERNANCE_CONTRACT="KT1GHX73W5BcjbYRSZSrUJcnZE3Uw92VYF66",DAO_TOKEN_CONTRACT="KT1QrtA753MSv8VGxkDrKKyJniG5JtuHHbtV",DAO_TOKEN_CLAIM_CONTRACT="KT1NrfV4e2qWqFrnrKyPTJth5wq2KP9VyBei",DISTRIBUTION_MAPPING_IPFS_PATH="QmbRmck8A5sBYQC7WEuK8dApnGQGXBhyPEgQpLm8ftfAtL",MERKLE_DATA_IPFS_PATHS={0:"QmUETPfQaoE2mTzBUMbXGk4VgJUqvitwmti2iuk7p1KUPa",1:"Qme3evVseBhLhoK4iefXiSHnr2wegGVnPccCYKQWqrDuPy",2:"QmdGaYaM1gdqqVVaApmwxdg5Mu5Ckkh9hdDSfnC6nP6G14",3:"QmZQzGdwZgMa8aNwhyFiLy2rKHmyvfFpi6pYfdE3t7wHTV",4:"QmbB2LyNoVEy6jZTZ66GZL4ousBxGA1EeiEV5vCWyH2Wkq",5:"QmPi7kuiRLD2rV854AV8gfMYchQhamxcp4X16phnyzdPLR",6:"QmdrhhjL2R49SYdwdPF3eEVU1GHDSdJ4Ykya3jvt7TdRTu",7:"QmXiD3T5erwNAZ5yFYpz3AA2h6FXfPMt7XzKCDrKwJSMDX",8:"QmW4jpn5EnjQx6aCbSAodEhh6BW2UqvZSGvubu2tv4UWCn"},CLAIMED_DAO_TOKENS_BIGMAP_ID="518731",DAO_TOKEN_DECIMALS=1e6,TOKENS=[{name:"TEIA",fa2:"KT1QrtA753MSv8VGxkDrKKyJniG5JtuHHbtV",multiasset:!1,decimals:DAO_TOKEN_DECIMALS,website:void 0},{name:"OBJKT",fa2:"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton",multiasset:!0,decimals:1,website:"https://teia.art/objkt/"},{name:"hDAO",fa2:"KT1AFA2mwNUMNd4SsujE1YYp29vd8BZejyKW",multiasset:!1,decimals:1e6,website:void 0}],SUBJKT_CONTRACT="KT1My1wDZHDGweCrJnQJi3wcFaS67iksirvj",PROXY_FACTORY_CONTRACT="KT1DoyD6kr8yLK8mRBFusyKYJUk2ZxNHKP1N",SIGNING_CONTRACT="KT1BcLnWRziLDNJNRn3phAANKrEBiXhytsMY",SWAP_TYPE_TEIA="TEIA",SWAP_TYPE_HEN="HEN",MAIN_MARKETPLACE_CONTRACT=MARKETPLACE_CONTRACT_TEIA,MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE=SWAP_TYPE_TEIA,BURN_ADDRESS="tz1burnburnburnburnburnburnburjAYjjX",COVER_COMPRESSOR_OPTIONS={quality:.85,maxWidth:1024,maxHeight:1024},THUMBNAIL_COMPRESSOR_OPTIONS={quality:.85,maxWidth:350,maxHeight:350},LICENSE_TYPES={none:"None (All rights reserved)","cc-by-4.0":"CC-BY-4.0 (Attribution)","cc-by-sa-4.0":"CC BY-SA 4.0 (Attribution ShareAlike)","cc-by-nd-4.0":"CC BY-ND 4.0 (Attribution-NoDerivs)","cc-by-nc-4.0":"CC BY-NC 4.0 (Attribution-NonCommercial)","cc-by-nc-sa-4.0":"CC BY-NC-SA 4.0 (Attribution-NonCommercial-ShareAlike)","cc-by-nc-nd-4.0":"CC BY-NC-ND 4.0 (Attribution-NonCommercial-NoDerivs)",custom:"Custom License"},LICENSE_TYPES_OPTIONS=Object.keys(LICENSE_TYPES).map(re=>({label:LICENSE_TYPES[re],value:re})),THEMES={dark:"Dark",light:"Light",kawaii:"Kawaii",aqua:"Aqua",coffee:"Coffee",midnight:"Midnight",grass:"Grass"},THEME_OPTIONS=Object.keys(THEMES).map(re=>({label:THEMES[re],value:re})),LANGUAGES={none:"None",af:"Afrikaans (Afrikaans)",sq:"Albanian (shqipe)",gsw:"Alsatian (Elsässisch)",am:"Amharic (አማርኛ)",ar:"Arabic (العربية)",hy:"Armenian (Հայերեն)",as:"Assamese (অসমীয়া)",az:"Azeri (Azərbaycan­ılı)",ba:"Bashkir (Башҡорт)",eu:"Basque (euskara)",be:"Belarusian (беларуская)",bn:"Bengali (বাংলা)",bs:"Bosnian (bosanski)/босански",br:"Breton (brezhoneg)",bg:"Bulgarian (български)",my:"Burmese (Myanmar)",ca:"Catalan (català)",zh:"Chinese (中文)",co:"Corsican (Corsu)",hr:"Croatian (hrvatski)",cs:"Czech (čeština)",da:"Danish (dansk)",prs:"Dari (درى)",dv:"Divehi (ދިވެހިބަސް)",nl:"Dutch (Nederlands)",en:"English (English)",et:"Estonian (eesti)",fo:"Faroese (føroyskt)",fil:"Filipino (Filipino)",fi:"Finnish (suomi)",fr:"French (français)",fy:"Frisian (Frysk)",gl:"Galician (galego)",ka:"Georgian (ქართული)",de:"German (Deutsch)",el:"Greek (ελληνικά)",kl:"Greenlandic (kalaallisut)",gu:"Gujarati (ગુજરાતી)",ha:"Hausa (Hausa)",he:"Hebrew (עברית)",hi:"Hindi (हिंदी)",hu:"Hungarian (magyar)",is:"Icelandic (íslenska)",ig:"Igbo (Igbo)",id:"Indonesian (Bahasa Indonesia)",iu:"Inuktitut (Inuktitut /ᐃᓄᒃᑎᑐᑦ (ᑲᓇᑕ))",ga:"Irish (Gaeilge)",it:"Italian (italiano)",ja:"Japanese (日本語)",quc:"K'iche (K'iche)",kn:"Kannada (ಕನ್ನಡ)",kk:"Kazakh (Қазащb)",km:"Khmer (ខ្មែរ)",rw:"Kinyarwanda (Kinyarwanda)",sw:"Kiswahili (Kiswahili)",kok:"Konkani (कोंकणी)",ko:"Korean (한국어)",ky:"Kyrgyz (Кыргыз)",lo:"Lao (ລາວ)",lv:"Latvian (latviešu)",lt:"Lithuanian (lietuvių)",dsb:"Lower Sorbian (dolnoserbšćina)",lb:"Luxembourgish (Lëtzebuergesch)",mk:"Macedonian (македонски јазик)",ms:"Malay (Bahasa Malaysia)",ml:"Malayalam (മലയാളം)",mt:"Maltese (Malti)",mi:"Maori (Reo Māori)",arn:"Mapudungun (Mapudungun)",mr:"Marathi (मराठी)",moh:"Mohawk (Kanien'kéha)",mn:"Mongolian (Монгол хэл/ᠮᠤᠨᠭᠭᠤᠯ ᠬᠡᠯᠡ)",ne:"Nepali (नेपाली (नेपाल))",nb:"Norwegian 'Bokmål' (norsk 'bokmål')",no:"Norwegian (norsk)",nn:"Norwegian Nynorsk (norsk (nynorsk))",oc:"Occitan (Occitan)",or:"Oriya (ଓଡ଼ିଆ)",ps:"Pashto (پښتو)",fa:"Persian (فارسى)",pl:"Polish (polski)",pt:"Portuguese (Português)",pa:"Punjabi (ਪੰਜਾਬੀ)",quz:"Quechua (runasimi)",ro:"Romanian (română)",rm:"Romansh (Rumantsch)",ru:"Russian (русский)",smn:"Sami Inari (sämikielâ)",smj:"Sami Lule (julevusámegiella)",se:"Sami Northern (davvisámegiella)",sms:"Sami Skolt (sääm´ǩiõll)",sma:"Sami Southern (åarjelsaemiengiel)e",sa:"Sanskrit (संस्कृत)",gd:"Scottish Gaelic (Gàidhlig)",sr:"Serbian (srpski/српски)",nso:"Sesotho (Sesotho sa Leboa)",tn:"Setswana (Setswana)",si:"Sinhala (සිංහ)",sk:"Slovak (slovenčina)",sl:"Slovenian (slovenski)",es:"Spanish (español)",sv:"Swedish (svenska)",syr:"Syriac (ܣܘܪܝܝܐ)",tg:"Tajik (Тоҷикӣ)",tzm:"Tamazight (Tamazight)",ta:"Tamil (தமிழ்)",tt:"Tatar (Татар)",te:"Telugu (తెలుగు)",th:"Thai (ไทย)",bo:"Tibetan (བོད་ཡིག)",tr:"Turkish (Türkçe)",tk:"Turkmen (türkmençe)",uk:"Ukrainian (українська)",hsb:"Upper (Sorbian) hornjoserbšćina",ur:"Urdu (اُردو)",ug:"Uyghur (ئۇيغۇرچە)",uz:"Uzbek (U'zbek/Ўзбек)",vi:"Vietnamese (Tiếng Việt)",cy:"Welsh (Cymraeg)",wo:"Wolof (Wolof)",sah:"Yakut (саха)",ii:"Yi (ꆈꌠꁱꂷ)",yo:"Yoruba (Yoruba)",xh:"isiXhosa (isiXhosa)",zu:"isiZulu (isiZulu)"},LANGUAGES_OPTIONS=Object.keys(LANGUAGES).map(re=>({label:LANGUAGES[re],value:re})),METADATA_CONTENT_RATING_MATURE="mature",METADATA_ACCESSIBILITY_HAZARDS_PHOTOSENS="flashing",CollaboratorType={ADMIN:"admin",CREATOR:"creator",BENEFICIARY:"benefactor",CORE_PARTICIPANT:"core_participant"},ossProjects=[{name:"Art4Artists Breadfond",address:"KT1LgnHXu8NVa674xJhSFhnKjrn7v2ZMsu2a"},{name:"Tez4Pal Fundraiser",address:"tz2TfuukrHVoeUqFvcRViPJ2VqL7nEQi7xgW"},{name:"TezQuakeAid Morocco Fundraiser",address:"KT1RwXEP8Sj1UQDHPG4oEjRohBdzG2R7FCpA"},{name:"TezQuakeAid Turkey/Syria Fundraiser",address:"KT1X1jyohFrZyDYWvCPXw9KvWxk2VDwxyg2g"},{name:"Tezos4Iran Fundraiser",address:"KT1KYfj97fpdomqyKsZSBdSVvh9afh93b4Ge"},{name:"SavePakistan Fundraiser",address:"KT1Jpf2TAcZS7QfBraQMBeCxjFhH6kAdDL4z"},{name:"Ukraine Relief Fundraiser",address:"KT1DWnLiUkNtAQDErXxudFEH63JC6mqg3HEx"},{name:"Teia Fountain Donations",address:"KT1EsvmkijLKPQmcJMbjDeKRXdwky1LWvwpG"},{name:"Community Representation/Equity Donations (Multisig)",address:"KT1TGJGjh9oMntcny4J7eVn1NDPgCXimHqss"},{name:"WG3.2 (collab contract dev team)",address:"KT1BBYzfuYjgRdeHJ79vG3fZd8cHW9ueCEcN"},{name:"Processing",address:"tz1aPHze1U5BEEKrGYt3dvY6aAQEeiWm8jjK"},{name:"three.js",address:"tz1ZUohCAkGjp7vPjQcC4VWcpgYZR1t3Si5C"}],collaboratorTemplate={address:"",tezAddress:"",shares:void 0},tipOptions=[1,5,10],createProxySchema=`
(map address (pair (bool %isCore) (nat %share))))
`,teiaSwapSchema=`
(pair (address %marketplaceAddress)
  (pair %params (address %fa2)
    (pair (nat %objkt_id)
      (pair (nat %objkt_amount)
        (pair (mutez %xtz_per_objkt)
          (pair (nat %royalties) (address %creator)))))))
`,teiaCancelSwapSchema=`
(pair (address %marketplaceAddress) (nat %swap_id))
`,rpc_nodes=["https://mainnet.api.tez.ie","https://mainnet.smartpy.io","https://rpc.tzbeta.net","https://mainnet.tezos.marigold.dev","https://rpc.tzkt.io/mainnet","https://mainnet.teia.rocks","https://teia.art/rpc","custom"],defaultValues$1={viewMode:"single",nsfwFriendly:!1,photosensitiveFriendly:!1,startFeed:DEFAULT_START_FEED,zen:!1,theme:"dark",themeDark:"dark",themeLight:"light",rpcNode:rpc_nodes[5],customRpcNode:"",tilted:!1,imgproxy:!0,has_seen_banner:!1},useLocalSettings=create$2()(subscribeWithSelector(persist((re,ee)=>({...defaultValues$1,setHasSeenBanner:ne=>re({has_seen_banner:ne}),setTilted:ne=>re({tilted:ne}),setImgproxy:ne=>re({imgproxy:ne}),toggleViewMode:()=>re(ne=>({viewMode:ne.viewMode==="single"?"masonry":"single"})),toggleZen:()=>re(ne=>({zen:!ne.zen})),setZen:ne=>re({zen:ne}),toggleTheme:()=>re(ne=>({theme:ne.theme===ne.themeDark?ne.themeLight:ne.themeDark})),setViewMode:ne=>re({viewMode:ne}),setTheme:(ne,ie)=>{re({theme:ne}),ie&&ee().applyTheme(ne)},applyTheme:ne=>{document.documentElement.setAttribute("data-theme",ne)},getRpcNode:()=>{const ne=ee().rpcNode;return ne==="custom"&&ee().customRpcNode||ne},setCustomRpcNode:ne=>{ne&&(ne.startsWith("http")||(ne=`https://${ne}`),re({customRpcNode:ne}))},setRpcNode:async ne=>{re({rpcNode:ne})},setNsfwFriendly:ne=>re({nsfwFriendly:ne}),setPhotosensitiveFriendly:ne=>re({photosensitiveFriendly:ne}),setStartFeed:ne=>re({startFeed:ne})}),{name:"settings",storage:createJSONStorage(()=>localStorage),version:2,partialize:re=>Object.fromEntries(Object.entries(re).filter(([ee])=>Object.keys(defaultValues$1).includes(ee))),onRehydrateStorage:re=>(ee,ne)=>{ne&&console.error("an error happened during hydration",ne)},migrate:(re,ee)=>(console.debug("migrating settings from version",ee),re.has_seen_banner=!1,re)}))),BaseTokenFieldsFragment=`
fragment baseTokenFields on tokens {
  artifact_uri
  display_uri
  thumbnail_uri
  metadata_uri

  artist_address
  artist_profile {
    name
    is_split
  }
  description
  editions
  fa2_address
  listings(where: {status: {_eq: "active"}}, order_by: {price: asc}) {
    amount
    amount_left
    contract_address
    price
    status
    type
  }
  mime_type
  minted_at
  metadata_status
  name
  price
  
  royalties
  royalties_total
 
  royalty_receivers {
    receiver_address
    royalties
  }
  teia_meta {
    accessibility
    content_rating
    is_signed
    preview_uri
  }

  tags {
    tag
  }
  
  token_id
}
`;async function fetchGraphQL(re,ee,ne){return await(await fetch("https://teztok.teia.rocks/v1/graphql",{method:"POST",body:JSON.stringify({query:re,variables:ne,operationName:ee})})).json()}const getCollabsForAddress=`query GetCollabs($address: String!) {
  split_contracts: teia_split_contracts(where: {_or: [{administrator_address: {_eq: $address}}, {shareholders: {shareholder_address: {_eq: $address}}}]}) {
    contract_address
    contract_profile {
      name
      metadata {
        data
      }
    }
    administrator_address
    shareholders {
      shareholder_address
      shareholder_profile {
        name
      }
      shares
      holder_type
    }
  }
}`,query_objkt=`
${BaseTokenFieldsFragment}
query objkt($id: String!) {
  tokens_by_pk(fa2_address: "${HEN_CONTRACT_FA2}", token_id: $id) {
    ...baseTokenFields
    artist_profile {
      name
      is_split
      split_contract {
        administrator_address
        shareholders {
          shareholder_address
          shareholder_profile {
            user_address
            name
          }
          holder_type
          shares
        }
      }
    }
    signatures {
      shareholder_address
    }
    rights
    right_uri
    listings(where: {status: {_eq: "active"}}, order_by: {price: asc}) {
      type
      contract_address
      amount
      amount_left
      swap_id
      ask_id
      offer_id
      price
      start_price
      end_price
      seller_address
      seller_profile {
        name
      }
      status
    }
    holdings(where: {amount: {_gt: "0"}}) {
      holder_address
      amount
      holder_profile {
        name
      }
    }
    tags {
      tag
    }
    events(where: { _or: [{ implements: {_eq: "SALE"} }, { type: {_in: ["HEN_MINT", "TEIA_SWAP", "HEN_SWAP", "HEN_SWAP_V2", "VERSUM_SWAP", "FA2_TRANSFER", "OBJKT_ASK", "OBJKT_ASK_V2", "OBJKT_ASK_V3", "OBJKT_ASK_V3_PRE"]} }]}, order_by: [{level: desc}, {opid: desc}]) {
      timestamp
      implements
      ophash
      id
      type
      price
      amount
      editions
      seller_address
      seller_profile {
        name
      }
      buyer_address
      buyer_profile {
        name
      }
      from_address
      from_profile {
        name
      }
      to_address
      to_profile {
        name
      }
    }
  }
}
`;async function getUser(re,ee="user_address"){var ie;const{data:ne}=await fetchGraphQL(`
  query addressQuery($addressOrName: String!) {
    teia_users(where: { ${ee}: {_eq: $addressOrName}}) {
      user_address
      name
      metadata {
        data
      }
    }
  }
  `,"addressQuery",{addressOrName:re});return(ie=ne==null?void 0:ne.teia_users)!=null&&ie.length?ne.teia_users[0]:null}async function fetchCollabCreations(re,ee="address"){const{data:ne}=await fetchGraphQL(`
    ${BaseTokenFieldsFragment}
    query GetCollabCreations($addressOrSubjkt: String!) {
      tokens(where: {${ee==="address"?"artist_address: {_eq: $addressOrSubjkt}":"artist_profile: {name: {_eq: $addressOrSubjkt }}"}, editions: {_gt: "0"}}, order_by: {token_id: desc}) {
        ...baseTokenFields
        tags {
          tag
        }
      }
      split_contracts: teia_split_contracts(where: {${ee==="address"?"contract_address: {_eq: $addressOrSubjkt}":"contract_profile: {name: {_eq: $addressOrSubjkt}}"}}) {
        administrator_address
        shareholders {
          shareholder_address
          shareholder_profile {
            name
          }
          holder_type
        }
        contract_address
        contract_profile {
          name
          metadata {
            data
          }
        }
      }
    }`,"GetCollabCreations",{addressOrSubjkt:re});return ne}async function fetchObjktDetails(re){const{data:ee}=await fetchGraphQL(query_objkt,"objkt",{id:re});return ee.tokens_by_pk}const GetUserMetadata=async re=>await getTzktData(`/v1/accounts/${re}/metadata`);async function getTzktData(re,ee={},ne=!1){const ie="https://api.tzkt.io"+re,oe=await axios.get(ie,{params:ee}).catch(ae=>console.log(`The following TzKT query returned an error: ${ie}`,ae));return ne&&console.log(`Executed TzKT query: ${ie}`),oe==null?void 0:oe.data}async function getClaimedDaoTokens(re){const ee=await getTzktData(`/v1/bigmaps/${CLAIMED_DAO_TOKENS_BIGMAP_ID}/keys/${re}`);return ee!=null&&ee.value?parseInt(ee.value)/DAO_TOKEN_DECIMALS:0}const teiaSwapLambda=[{prim:"CDR"},{prim:"UNPACK",args:[{prim:"pair",args:[{prim:"address",annots:["%marketplaceAddress"]},{prim:"pair",args:[{prim:"address",annots:["%fa2"]},{prim:"pair",args:[{prim:"nat",annots:["%objkt_id"]},{prim:"pair",args:[{prim:"nat",annots:["%objkt_amount"]},{prim:"pair",args:[{prim:"mutez",annots:["%xtz_per_objkt"]},{prim:"pair",args:[{prim:"nat",annots:["%royalties"]},{prim:"address",annots:["%creator"]}]}]}]}]}],annots:["%params"]}]}]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Unpack failed"}]},{prim:"FAILWITH"}],[]]},{prim:"DUP"},{prim:"CAR"},{prim:"CONTRACT",args:[{prim:"pair",args:[{prim:"address",annots:["%fa2"]},{prim:"pair",args:[{prim:"nat",annots:["%objkt_id"]},{prim:"pair",args:[{prim:"nat",annots:["%objkt_amount"]},{prim:"pair",args:[{prim:"mutez",annots:["%xtz_per_objkt"]},{prim:"pair",args:[{prim:"nat",annots:["%royalties"]},{prim:"address",annots:["%creator"]}]}]}]}]}]}],annots:["%swap"]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Marketplace V3 is not found"}]},{prim:"FAILWITH"}],[]]},{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"CDR"},{prim:"TRANSFER_TOKENS"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"SWAP"},{prim:"CONS"}],Packer$1=new MichelCodecPacker,packData=(re,ee)=>{const ie=new Parser$2().parseData(ee);if(ie)return{data:new Schema(ie).Encode(re),type:ie};throw Error("Cannot pack data",{cause:"invalid schema"})};function createAddOperatorCall(re,ee,ne,ie){return{kind:OpKind.TRANSACTION,...re.methods.update_operators([{add_operator:{operator:ie,token_id:parseFloat(ee),owner:ne}}]).toTransferParams({amount:0,mutez:!0,storageLimit:175})}}function createRemoveOperatorCall(re,ee,ne,ie){return{kind:OpKind.TRANSACTION,...re.methods.update_operators([{remove_operator:{operator:ie,token_id:parseFloat(ee),owner:ne}}]).toTransferParams({amount:0,mutez:!0,storageLimit:175})}}function createSwapCall(re,ee,ne,ie,oe,ae,ce,le,ue=MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE){if(ue===SWAP_TYPE_TEIA)return{kind:OpKind.TRANSACTION,...re.methods.swap(ee,parseFloat(ne),oe,ae,ce,le).toTransferParams({amount:0,mutez:!0,storageLimit:300})};if(ue===SWAP_TYPE_HEN)return{kind:OpKind.TRANSACTION,...re.methods.swap(le,oe,ne,ce,ae).toTransferParams({amount:0,mutez:!0,storageLimit:300})};throw Error("Invalid Swap Type",{cause:"Requested swap is neither a Teia or HEN swap"})}function createSwapCalls(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe=MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE){return[createAddOperatorCall(re,oe,ae,ie),createSwapCall(ee,ne,oe,ae,ce,le,ue,he,fe),createRemoveOperatorCall(re,oe,ae,ie)]}async function createLambdaSwapCall(re,ee,ne,ie,oe,ae,ce,le,ue){const he={marketplaceAddress:ee,params:{fa2:ne,objkt_id:parseFloat(ie),objkt_amount:ae,royalties:le,xtz_per_objkt:ce,creator:ue}},fe=packData(he,teiaSwapSchema),{packed:me}=await Packer$1.packData(fe);return{kind:OpKind.TRANSACTION,...re.methods.execute(teiaSwapLambda,me).toTransferParams({amount:0,mutez:!0,storageLimit:300})}}const teiaCancelSwapLambda=[{prim:"CDR"},{prim:"UNPACK",args:[{prim:"pair",args:[{prim:"address",annots:["%marketplaceAddress"]},{prim:"nat",annots:["%swap_id"]}]}]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Unpack failed"}]},{prim:"FAILWITH"}],[]]},{prim:"DUP"},{prim:"CAR"},{prim:"CONTRACT",args:[{prim:"nat"}],annots:["%cancel_swap"]},{prim:"IF_NONE",args:[[{prim:"PUSH",args:[{prim:"string"},{string:"Marketplace V3 is not found"}]},{prim:"FAILWITH"}],[]]},{prim:"PUSH",args:[{prim:"mutez"},{int:"0"}]},{prim:"DIG",args:[{int:"2"}]},{prim:"CDR"},{prim:"TRANSFER_TOKENS"},{prim:"NIL",args:[{prim:"operation"}]},{prim:"SWAP"},{prim:"CONS"}],Tezos=new TezosToolkit(useLocalSettings.getState().getRpcNode()),Packer=new MichelCodecPacker,wallet=new BeaconWallet({name:"teia.art",appUrl:"https://teia.art",iconUrl:"https://teia.art/icons/android-chrome-512x512.png",preferredNetwork:NetworkType.MAINNET});Tezos.setWalletProvider(wallet);const useUserStore=create$2()(subscribeWithSelector(persist((re,ee)=>({address:void 0,proxyAddress:void 0,proxyName:void 0,subjktInfo:void 0,handleOp:async(ne,ie,oe)=>{const ae=useModalStore.getState().step,ce=useModalStore.getState().show,le=useModalStore.getState().showError,ue=setTimeout(()=>{ce(ie,"Something seems to hang, did you abort the transaction?")},15e3),he=await ne.send(oe);clearTimeout(ue);try{ae(ie,`Awaiting for confirmation of the [operation](https://tzkt.io/${he.opHash})
              *closing this dialog has no effect on the transaction*`),useModalStore.setState({confirm:!0});const fe=await he.confirmation();return ce(fe.completed?`${ie} Successful`:`${ie} Error`,`[see on tzkt.io](https://tzkt.io/${he.opHash})`),he.opHash}catch(fe){le("Transfer",fe)}},sync:async ne=>{var ce;const ie={type:NetworkType.MAINNET,rpcUrl:(ne==null?void 0:ne.rpcNode)||useLocalSettings.getState().getRpcNode()};let oe=await wallet.client.getActiveAccount();(oe===void 0||((ce=oe==null?void 0:oe.network)==null?void 0:ce.rpcUrl)!==ie.rpcUrl)&&(await wallet.requestPermissions({network:ie}),oe=await wallet.client.getActiveAccount());const ae=await wallet.getPKH();if(ae){const le=await getUser(ae);console.log("getting user info",le),re({address:ae,userInfo:await getUser(ae)})}return ae},unsync:async()=>{await wallet.client.clearActiveAccount(),re({address:void 0,userInfo:void 0,proxyAddress:void 0,proxyName:void 0})},setAccount:async()=>{const ne=Tezos!==void 0?await wallet.client.getActiveAccount():void 0;ne!=null&&ne.address&&re({userInfo:await getUser(ne.address,"user_address"),address:ne.address})},getBalance:async ne=>{if(ne)return(await Tezos.tz.getBalance(ne)).toNumber();const ie=ee().address,oe=ee().proxyAddress;return ie?(await Tezos.tz.getBalance(oe||ie)).toNumber():-1},resetProxy:()=>re({proxyAddress:void 0,proxyName:void 0}),registry:async(ne,ie)=>{const oe=ee().handleOp,ae=ee().proxyAddress||SUBJKT_CONTRACT,le=(await Tezos.wallet.at(ae)).methods.registry(`ipfs://${ie}`.split("").reduce((ue,he)=>ue+=he.charCodeAt(0).toString(16).padStart(2,"0"),""),ne.split("").reduce((ue,he)=>ue+=he.charCodeAt(0).toString(16).padStart(2,"0"),""));return await oe(le,"Editing Profile",{amount:0})},swap:async(ne,ie,oe,ae,ce,le)=>{const{proxyAddress:ue,handleOp:he}=ee(),fe=useModalStore.getState().showError,me=useModalStore.getState().step;if(me("Swap","Preparing swap",!0),ue){const Ce=await Tezos.wallet.at(ue),Se=await createLambdaSwapCall(Ce,MAIN_MARKETPLACE_CONTRACT,HEN_CONTRACT_FA2,ae,ue,le,oe,ie,ce),$e=[createAddOperatorCall(Ce,ae,ue,MAIN_MARKETPLACE_CONTRACT),Se,createRemoveOperatorCall(Ce,ae,ue,MAIN_MARKETPLACE_CONTRACT)],Te=Tezos.wallet.batch($e);return await he(Te,"Swap")}const ge=HEN_CONTRACT_FA2,[ve,ye]=await Promise.all([Tezos.wallet.at(ge),Tezos.wallet.at(MAIN_MARKETPLACE_CONTRACT)]),be=createSwapCalls(ve,ye,ge,MAIN_MARKETPLACE_CONTRACT,ae,ne,le,oe,ie,ce,MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE);try{const Ce=Tezos.wallet.batch(be);return await he(Ce,"Swap")}catch(Ce){fe("Swap",Ce)}},burn:async(ne,ie)=>{const{proxyAddress:oe,handleOp:ae}=ee(),ce=useModalStore.getState().step;ce("Burn",`Burning ${ie} edition of OBJKT #${ne}`,!0);const le=await wallet.client.getActiveAccount(),ue=oe||HEN_CONTRACT_FA2,he=oe||(le==null?void 0:le.address);console.debug("Using",ue,"for burn");const me=(await Tezos.wallet.at(ue)).methods.transfer([{from_:he,txs:[{to_:BURN_ADDRESS,token_id:parseInt(ne),amount:ie}]}]);return await ae(me,"Burn")},transfer:async ne=>{const ie=ee().handleOp,oe=useModalStore.getState().showError,ae=useModalStore.getState().step;ae("Transferring tokens","Waiting for confirmation",!0);const{proxyAddress:ce,address:le}=ee(),ue=ce||HEN_CONTRACT_FA2;try{const fe=(await Tezos.wallet.at(ue)).methods.transfer([{from_:ce||le,txs:ne}]);return await ie(fe,"Transfer")}catch(he){oe("Transfer",he)}},collect:async ne=>{const ie=ee().handleOp,oe=useModalStore.getState().show,ae=useModalStore.getState().showError;let ce;try{if(["HEN_SWAP_V2","TEIA_SWAP"].includes(ne.type)?ce=(await Tezos.wallet.at(ne.contract_address)).methods.collect(parseInt(ne.swap_id)):["OBJKT_ASK","OBJKT_ASK_V2"].includes(ne.type)?ce=(await Tezos.wallet.at(ne.contract_address)).methods.fulfill_ask(ne.ask_id):["OBJKT_ASK_V3","OBJKT_ASK_V3_PRE"].includes(ne.type)?ce=(await Tezos.wallet.at(ne.contract_address)).methods.fulfill_ask(ne.ask_id,1,null,null,MichelsonMap.fromLiteral({})):["VERSUM_SWAP"].includes(ne.type)&&(ce=(await Tezos.wallet.at(ne.contract_address)).methods.collect_swap("1",ne.swap_id)),ce)return await ie(ce,"Collect",{amount:parseInt(ne.price),mutez:!0,storageLimit:350});oe("Collect Error","unsupported listing")}catch(le){ae("Collect",le)}},cancelV1:async ne=>await Tezos.wallet.at(MARKETPLACE_CONTRACT_V1).then(ie=>ie.methods.cancel_swap(parseFloat(ne)).send({amount:0,storageLimit:310})).catch(ie=>ie),cancel:async(ne,ie)=>{const{proxyAddress:oe,handleOp:ae}=ee(),ce=useModalStore.getState().step;if(ce("Cancel Swap","Waiting for wallet",!0),oe&&ne===MARKETPLACE_CONTRACT_TEIA){const me=packData({marketplaceAddress:ne,swap_id:ie},teiaCancelSwapSchema),{packed:ge}=await Packer.packData(me),ye=(await Tezos.wallet.at(oe)).methods.execute(teiaCancelSwapLambda,ge);return ae(ye,"Cancel Swap",{amount:0,storageLimit:310})}const he=(await Tezos.wallet.at(oe||ne)).methods.cancel_swap(ie);return ae(he,"Cancel Swap",{amount:0,storageLimit:310})},reswap:async(ne,ie,oe)=>{const{proxyAddress:ae,handleOp:ce}=ee(),le=useModalStore.getState().step,ue=useModalStore.getState().showError,he=useModalStore.getState().show;le("Reswapping",`reswapping ${ne.token_id} for ${ie/1e6}tz`,!0),console.debug({nft:ne,price:ie,swap:oe});const fe=ne.token_id,me=ne.artist_address,ge=oe.seller_address;if(ae){he("Reswap","reswapping is not yet supported in collab mode");return}const[ve,ye,be]=await Promise.all([Tezos.wallet.at(HEN_CONTRACT_FA2),Tezos.wallet.at(oe.contract_address),Tezos.wallet.at(MAIN_MARKETPLACE_CONTRACT)]),Ce=ye,Se=[{kind:OpKind.TRANSACTION,...Ce.methods.cancel_swap(oe.swap_id).toTransferParams({amount:0,mutez:!0,storageLimit:310})},...createSwapCalls(ve,be,HEN_CONTRACT_FA2,MAIN_MARKETPLACE_CONTRACT,fe,ge,oe.amount_left,ie,ne.royalties_total/1e3,me,MAIN_MARKETPLACE_CONTRACT_SWAP_TYPE)];console.debug(Se);try{const $e=Tezos.wallet.batch(Se);return await ce($e,"Reswap")}catch($e){ue("Reswap",$e)}},mint:async(ne,ie,oe,ae)=>{const ce=ee().handleOp,le=useModalStore.getState().step,{proxyAddress:ue}=ee();console.debug("CID",oe),le("Mint","minting OBJKT",!0);const fe=(await Tezos.wallet.at(ue||MARKETPLACE_CONTRACT_V1)).methods.mint_OBJKT(ne,ie,`ipfs://${oe}`.split("").reduce((me,ge)=>me+=ge.charCodeAt(0).toString(16).padStart(2,"0"),""),ae*10);return await ce(fe,"Mint",{amount:0,storageLimit:310})}}),{name:"user",storage:createJSONStorage(()=>localStorage)}))),MenuItem=({label:re,route:ee,need_sync:ne,className:ie})=>{re=re||capitalizeFirstLetter(ee);const oe=useUserStore(ce=>ce.address),ae=useModalStore(ce=>ce.setCollapsed);return jsx$1(Button,{className:`${ne&&!oe?styles$U.disabled:""} ${ie||""} `,to:ne?"/sync":`/${ee}`,state:ne?`/${ee}`:null,onTo:()=>ae(!0),children:re})},base_toggle="_base_toggle_17ekr_216",box_toggle="_box_toggle_17ekr_225",toggled="_toggled_17ekr_236",minimal_toggle="_minimal_toggle_17ekr_241",styles$T={base_toggle,box_toggle,toggled,minimal_toggle},useControlled=(re,ee)=>{const ne=reactExports.useRef(!1);ne.current=re!==void 0;const[ie,oe]=reactExports.useState(ee),ae=ne.current?re:ie,ce=reactExports.useCallback(le=>{ne.current||oe(le)},[ne]);return[ae,ce,ne.current]},Toggle=({label:re,initial:ee,toggled:ne,style:ie={},alt:oe,box:ae,onToggle:ce,className:le})=>{const[ue,he]=useControlled(ne,ee),fe=reactExports.useCallback(ge=>{const{checked:ve}=ge.target;he(ve),ce==null||ce(ve)},[he,ce]),me=classNames$1({[styles$T.base_toggle]:!0,[styles$T.box_toggle]:ae,[styles$T.toggled]:ue,className:le});return jsxs("label",{style:ie,className:me,children:[jsx$1("input",{defaultChecked:ee,checked:ne,"aria-label":oe||(typeof re=="string"?re:"icon-toggle"),"aria-checked":ue,type:"checkbox",onChange:fe}),re]})},IconToggle=({icon:re,toggled:ee,alt:ne,onClick:ie})=>{const oe=classNames$1({[styles$T.base_toggle]:!0,[styles$T.minimal_toggle]:!0,[styles$T.toggled]:ee});return jsx$1(Button,{onClick:ie,alt:ne,className:oe,children:re})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function __awaiter(re,ee,ne,ie){function oe(ae){return ae instanceof ne?ae:new ne(function(ce){ce(ae)})}return new(ne||(ne=Promise))(function(ae,ce){function le(fe){try{he(ie.next(fe))}catch(me){ce(me)}}function ue(fe){try{he(ie.throw(fe))}catch(me){ce(me)}}function he(fe){fe.done?ae(fe.value):oe(fe.value).then(le,ue)}he((ie=ie.apply(re,ee||[])).next())})}function __generator(re,ee){var ne={label:0,sent:function(){if(ae[0]&1)throw ae[1];return ae[1]},trys:[],ops:[]},ie,oe,ae,ce;return ce={next:le(0),throw:le(1),return:le(2)},typeof Symbol=="function"&&(ce[Symbol.iterator]=function(){return this}),ce;function le(he){return function(fe){return ue([he,fe])}}function ue(he){if(ie)throw new TypeError("Generator is already executing.");for(;ne;)try{if(ie=1,oe&&(ae=he[0]&2?oe.return:he[0]?oe.throw||((ae=oe.return)&&ae.call(oe),0):oe.next)&&!(ae=ae.call(oe,he[1])).done)return ae;switch(oe=0,ae&&(he=[he[0]&2,ae.value]),he[0]){case 0:case 1:ae=he;break;case 4:return ne.label++,{value:he[1],done:!1};case 5:ne.label++,oe=he[1],he=[0];continue;case 7:he=ne.ops.pop(),ne.trys.pop();continue;default:if(ae=ne.trys,!(ae=ae.length>0&&ae[ae.length-1])&&(he[0]===6||he[0]===2)){ne=0;continue}if(he[0]===3&&(!ae||he[1]>ae[0]&&he[1]<ae[3])){ne.label=he[1];break}if(he[0]===6&&ne.label<ae[1]){ne.label=ae[1],ae=he;break}if(ae&&ne.label<ae[2]){ne.label=ae[2],ne.ops.push(he);break}ae[2]&&ne.ops.pop(),ne.trys.pop();continue}he=ee.call(re,ne)}catch(fe){he=[6,fe],oe=0}finally{ie=ae=0}if(he[0]&5)throw he[1];return{value:he[0]?he[1]:void 0,done:!0}}}var noop$4=function(){},UNDEFINED=noop$4(),OBJECT=Object,isUndefined$1=function(re){return re===UNDEFINED},isFunction$6=function(re){return typeof re=="function"},mergeObjects=function(re,ee){return OBJECT.assign({},re,ee)},STR_UNDEFINED="undefined",hasWindow=function(){return typeof window!=STR_UNDEFINED},hasDocument=function(){return typeof document!=STR_UNDEFINED},hasRequestAnimationFrame=function(){return hasWindow()&&typeof window.requestAnimationFrame!=STR_UNDEFINED},table$1=new WeakMap,counter=0,stableHash=function(re){var ee=typeof re,ne=re&&re.constructor,ie=ne==Date,oe,ae;if(OBJECT(re)===re&&!ie&&ne!=RegExp){if(oe=table$1.get(re),oe)return oe;if(oe=++counter+"~",table$1.set(re,oe),ne==Array){for(oe="@",ae=0;ae<re.length;ae++)oe+=stableHash(re[ae])+",";table$1.set(re,oe)}if(ne==OBJECT){oe="#";for(var ce=OBJECT.keys(re).sort();!isUndefined$1(ae=ce.pop());)isUndefined$1(re[ae])||(oe+=ae+":"+stableHash(re[ae])+",");table$1.set(re,oe)}}else oe=ie?re.toJSON():ee=="symbol"?re.toString():ee=="string"?JSON.stringify(re):""+re;return oe},online=!0,isOnline=function(){return online},hasWin=hasWindow(),hasDoc=hasDocument(),onWindowEvent=hasWin&&window.addEventListener?window.addEventListener.bind(window):noop$4,onDocumentEvent=hasDoc?document.addEventListener.bind(document):noop$4,offWindowEvent=hasWin&&window.removeEventListener?window.removeEventListener.bind(window):noop$4,offDocumentEvent=hasDoc?document.removeEventListener.bind(document):noop$4,isVisible=function(){var re=hasDoc&&document.visibilityState;return isUndefined$1(re)||re!=="hidden"},initFocus=function(re){return onDocumentEvent("visibilitychange",re),onWindowEvent("focus",re),function(){offDocumentEvent("visibilitychange",re),offWindowEvent("focus",re)}},initReconnect=function(re){var ee=function(){online=!0,re()},ne=function(){online=!1};return onWindowEvent("online",ee),onWindowEvent("offline",ne),function(){offWindowEvent("online",ee),offWindowEvent("offline",ne)}},preset={isOnline,isVisible},defaultConfigOptions={initFocus,initReconnect},IS_SERVER=!hasWindow()||"Deno"in window,rAF=function(re){return hasRequestAnimationFrame()?window.requestAnimationFrame(re):setTimeout(re,1)},useIsomorphicLayoutEffect=IS_SERVER?reactExports.useEffect:reactExports.useLayoutEffect,navigatorConnection=typeof navigator<"u"&&navigator.connection,slowConnection=!IS_SERVER&&navigatorConnection&&(["slow-2g","2g"].includes(navigatorConnection.effectiveType)||navigatorConnection.saveData),serialize$1=function(re){if(isFunction$6(re))try{re=re()}catch{re=""}var ee=[].concat(re);re=typeof re=="string"?re:(Array.isArray(re)?re.length:re)?stableHash(re):"";var ne=re?"$swr$"+re:"";return[re,ee,ne]},SWRGlobalState=new WeakMap,FOCUS_EVENT=0,RECONNECT_EVENT=1,MUTATE_EVENT=2,broadcastState=function(re,ee,ne,ie,oe,ae,ce){ce===void 0&&(ce=!0);var le=SWRGlobalState.get(re),ue=le[0],he=le[1],fe=le[3],me=ue[ee],ge=he[ee];if(ce&&ge)for(var ve=0;ve<ge.length;++ve)ge[ve](ne,ie,oe);return ae&&(delete fe[ee],me&&me[0])?me[0](MUTATE_EVENT).then(function(){return re.get(ee)}):re.get(ee)},__timestamp=0,getTimestamp=function(){return++__timestamp},internalMutate=function(){for(var re=[],ee=0;ee<arguments.length;ee++)re[ee]=arguments[ee];return __awaiter(void 0,void 0,void 0,function(){var ne,ie,oe,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ce,Se,$e,Te,Ne,Ie,ke;return __generator(this,function(De){switch(De.label){case 0:if(ne=re[0],ie=re[1],oe=re[2],ae=re[3],ce=typeof ae=="boolean"?{revalidate:ae}:ae||{},le=isUndefined$1(ce.populateCache)?!0:ce.populateCache,ue=ce.revalidate!==!1,he=ce.rollbackOnError!==!1,fe=ce.optimisticData,me=serialize$1(ie),ge=me[0],ve=me[2],!ge)return[2];if(ye=SWRGlobalState.get(ne),be=ye[2],re.length<3)return[2,broadcastState(ne,ge,ne.get(ge),UNDEFINED,UNDEFINED,ue,!0)];if(Ce=oe,$e=getTimestamp(),be[ge]=[$e,0],Te=!isUndefined$1(fe),Ne=ne.get(ge),Te&&(Ie=isFunction$6(fe)?fe(Ne):fe,ne.set(ge,Ie),broadcastState(ne,ge,Ie)),isFunction$6(Ce))try{Ce=Ce(ne.get(ge))}catch(Oe){Se=Oe}return Ce&&isFunction$6(Ce.then)?[4,Ce.catch(function(Oe){Se=Oe})]:[3,2];case 1:if(Ce=De.sent(),$e!==be[ge][0]){if(Se)throw Se;return[2,Ce]}else Se&&Te&&he&&(le=!0,Ce=Ne,ne.set(ge,Ne));De.label=2;case 2:return le&&(Se||(isFunction$6(le)&&(Ce=le(Ce,Ne)),ne.set(ge,Ce)),ne.set(ve,mergeObjects(ne.get(ve),{error:Se}))),be[ge][1]=getTimestamp(),[4,broadcastState(ne,ge,Ce,Se,UNDEFINED,ue,!!le)];case 3:if(ke=De.sent(),Se)throw Se;return[2,le?ke:Ce]}})})},revalidateAllKeys=function(re,ee){for(var ne in re)re[ne][0]&&re[ne][0](ee)},initCache=function(re,ee){if(!SWRGlobalState.has(re)){var ne=mergeObjects(defaultConfigOptions,ee),ie={},oe=internalMutate.bind(UNDEFINED,re),ae=noop$4;if(SWRGlobalState.set(re,[ie,{},{},{},oe]),!IS_SERVER){var ce=ne.initFocus(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,ie,FOCUS_EVENT))),le=ne.initReconnect(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,ie,RECONNECT_EVENT)));ae=function(){ce&&ce(),le&&le(),SWRGlobalState.delete(re)}}return[re,oe,ae]}return[re,SWRGlobalState.get(re)[4]]},onErrorRetry=function(re,ee,ne,ie,oe){var ae=ne.errorRetryCount,ce=oe.retryCount,le=~~((Math.random()+.5)*(1<<(ce<8?ce:8)))*ne.errorRetryInterval;!isUndefined$1(ae)&&ce>ae||setTimeout(ie,le,oe)},_a$b=initCache(new Map),cache$2=_a$b[0],mutate=_a$b[1],defaultConfig=mergeObjects({onLoadingSlow:noop$4,onSuccess:noop$4,onError:noop$4,onErrorRetry,onDiscarded:noop$4,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:slowConnection?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:slowConnection?5e3:3e3,compare:function(re,ee){return stableHash(re)==stableHash(ee)},isPaused:function(){return!1},cache:cache$2,mutate,fallback:{}},preset),mergeConfigs=function(re,ee){var ne=mergeObjects(re,ee);if(ee){var ie=re.use,oe=re.fallback,ae=ee.use,ce=ee.fallback;ie&&ae&&(ne.use=ie.concat(ae)),oe&&ce&&(ne.fallback=mergeObjects(oe,ce))}return ne},SWRConfigContext=reactExports.createContext({}),useStateWithDeps=function(re,ee){var ne=reactExports.useState({})[1],ie=reactExports.useRef(re),oe=reactExports.useRef({data:!1,error:!1,isValidating:!1}),ae=reactExports.useCallback(function(ce){var le=!1,ue=ie.current;for(var he in ce){var fe=he;ue[fe]!==ce[fe]&&(ue[fe]=ce[fe],oe.current[fe]&&(le=!0))}le&&!ee.current&&ne({})},[]);return useIsomorphicLayoutEffect(function(){ie.current=re}),[ie,oe.current,ae]},normalize=function(re){return isFunction$6(re[1])?[re[0],re[1],re[2]||{}]:[re[0],null,(re[1]===null?re[2]:re[1])||{}]},useSWRConfig=function(){return mergeObjects(defaultConfig,reactExports.useContext(SWRConfigContext))},withArgs=function(re){return function(){for(var ne=[],ie=0;ie<arguments.length;ie++)ne[ie]=arguments[ie];var oe=useSWRConfig(),ae=normalize(ne),ce=ae[0],le=ae[1],ue=ae[2],he=mergeConfigs(oe,ue),fe=re,me=he.use;if(me)for(var ge=me.length;ge-- >0;)fe=me[ge](fe);return fe(ce,le||he.fetcher,he)}},subscribeCallback=function(re,ee,ne){var ie=ee[re]||(ee[re]=[]);return ie.push(ne),function(){var oe=ie.indexOf(ne);oe>=0&&(ie[oe]=ie[ie.length-1],ie.pop())}},WITH_DEDUPE={dedupe:!0},useSWRHandler=function(re,ee,ne){var ie=ne.cache,oe=ne.compare,ae=ne.fallbackData,ce=ne.suspense,le=ne.revalidateOnMount,ue=ne.refreshInterval,he=ne.refreshWhenHidden,fe=ne.refreshWhenOffline,me=SWRGlobalState.get(ie),ge=me[0],ve=me[1],ye=me[2],be=me[3],Ce=serialize$1(re),Se=Ce[0],$e=Ce[1],Te=Ce[2],Ne=reactExports.useRef(!1),Ie=reactExports.useRef(!1),ke=reactExports.useRef(Se),De=reactExports.useRef(ee),Oe=reactExports.useRef(ne),Be=function(){return Oe.current},Me=function(){return Be().isVisible()&&Be().isOnline()},Le=function(nn){return ie.set(Te,mergeObjects(ie.get(Te),nn))},je=ie.get(Se),ze=isUndefined$1(ae)?ne.fallback[Se]:ae,Ve=isUndefined$1(je)?ze:je,He=ie.get(Te)||{},We=He.error,Ye=!Ne.current,Ue=function(){return Ye&&!isUndefined$1(le)?le:Be().isPaused()?!1:ce?isUndefined$1(Ve)?!1:ne.revalidateIfStale:isUndefined$1(Ve)||ne.revalidateIfStale},Ke=function(){return!Se||!ee?!1:He.isValidating?!0:Ye&&Ue()},Xe=Ke(),Vt=useStateWithDeps({data:Ve,error:We,isValidating:Xe},Ie),Wt=Vt[0],Kt=Vt[1],tn=Vt[2],Xt=reactExports.useCallback(function(nn){return __awaiter(void 0,void 0,void 0,function(){var rn,vn,yn,Sn,kn,Bn,Dn,Je,Yt,an,An,fn,mn;return __generator(this,function(Tn){switch(Tn.label){case 0:if(rn=De.current,!Se||!rn||Ie.current||Be().isPaused())return[2,!1];Sn=!0,kn=nn||{},Bn=!be[Se]||!kn.dedupe,Dn=function(){return!Ie.current&&Se===ke.current&&Ne.current},Je=function(){var Vn=be[Se];Vn&&Vn[1]===yn&&delete be[Se]},Yt={isValidating:!1},an=function(){Le({isValidating:!1}),Dn()&&tn(Yt)},Le({isValidating:!0}),tn({isValidating:!0}),Tn.label=1;case 1:return Tn.trys.push([1,3,,4]),Bn&&(broadcastState(ie,Se,Wt.current.data,Wt.current.error,!0),ne.loadingTimeout&&!ie.get(Se)&&setTimeout(function(){Sn&&Dn()&&Be().onLoadingSlow(Se,ne)},ne.loadingTimeout),be[Se]=[rn.apply(void 0,$e),getTimestamp()]),mn=be[Se],vn=mn[0],yn=mn[1],[4,vn];case 2:return vn=Tn.sent(),Bn&&setTimeout(Je,ne.dedupingInterval),!be[Se]||be[Se][1]!==yn?(Bn&&Dn()&&Be().onDiscarded(Se),[2,!1]):(Le({error:UNDEFINED}),Yt.error=UNDEFINED,An=ye[Se],!isUndefined$1(An)&&(yn<=An[0]||yn<=An[1]||An[1]===0)?(an(),Bn&&Dn()&&Be().onDiscarded(Se),[2,!1]):(oe(Wt.current.data,vn)?Yt.data=Wt.current.data:Yt.data=vn,oe(ie.get(Se),vn)||ie.set(Se,vn),Bn&&Dn()&&Be().onSuccess(vn,Se,ne),[3,4]));case 3:return fn=Tn.sent(),Je(),Be().isPaused()||(Le({error:fn}),Yt.error=fn,Bn&&Dn()&&(Be().onError(fn,Se,ne),(typeof ne.shouldRetryOnError=="boolean"&&ne.shouldRetryOnError||isFunction$6(ne.shouldRetryOnError)&&ne.shouldRetryOnError(fn))&&Me()&&Be().onErrorRetry(fn,Se,ne,Xt,{retryCount:(kn.retryCount||0)+1,dedupe:!0}))),[3,4];case 4:return Sn=!1,an(),Dn()&&Bn&&broadcastState(ie,Se,Yt.data,Yt.error,!1),[2,!0]}})})},[Se]),dn=reactExports.useCallback(internalMutate.bind(UNDEFINED,ie,function(){return ke.current}),[]);if(useIsomorphicLayoutEffect(function(){De.current=ee,Oe.current=ne}),useIsomorphicLayoutEffect(function(){if(Se){var nn=Se!==ke.current,rn=Xt.bind(UNDEFINED,WITH_DEDUPE),vn=function(Dn,Je,Yt){tn(mergeObjects({error:Je,isValidating:Yt},oe(Wt.current.data,Dn)?UNDEFINED:{data:Dn}))},yn=0,Sn=function(Dn){if(Dn==FOCUS_EVENT){var Je=Date.now();Be().revalidateOnFocus&&Je>yn&&Me()&&(yn=Je+Be().focusThrottleInterval,rn())}else if(Dn==RECONNECT_EVENT)Be().revalidateOnReconnect&&Me()&&rn();else if(Dn==MUTATE_EVENT)return Xt()},kn=subscribeCallback(Se,ve,vn),Bn=subscribeCallback(Se,ge,Sn);return Ie.current=!1,ke.current=Se,Ne.current=!0,nn&&tn({data:Ve,error:We,isValidating:Xe}),Ue()&&(isUndefined$1(Ve)||IS_SERVER?rn():rAF(rn)),function(){Ie.current=!0,kn(),Bn()}}},[Se,Xt]),useIsomorphicLayoutEffect(function(){var nn;function rn(){var yn=isFunction$6(ue)?ue(Ve):ue;yn&&nn!==-1&&(nn=setTimeout(vn,yn))}function vn(){!Wt.current.error&&(he||Be().isVisible())&&(fe||Be().isOnline())?Xt(WITH_DEDUPE).then(rn):rn()}return rn(),function(){nn&&(clearTimeout(nn),nn=-1)}},[ue,he,fe,Xt]),reactExports.useDebugValue(Ve),ce&&isUndefined$1(Ve)&&Se)throw De.current=ee,Oe.current=ne,Ie.current=!1,isUndefined$1(We)?Xt(WITH_DEDUPE):We;return{mutate:dn,get data(){return Kt.data=!0,Ve},get error(){return Kt.error=!0,We},get isValidating(){return Kt.isValidating=!0,Xe}}},useSWR=withArgs(useSWRHandler);function arrayPush$2(re,ee){for(var ne=-1,ie=ee.length,oe=re.length;++ne<ie;)re[oe+ne]=ee[ne];return re}var _arrayPush=arrayPush$2,freeGlobal$1=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$9=freeGlobal||freeSelf||Function("return this")(),_root=root$9,root$8=_root,Symbol$6=root$8.Symbol,_Symbol=Symbol$6,Symbol$5=_Symbol,objectProto$b=Object.prototype,hasOwnProperty$9=objectProto$b.hasOwnProperty,nativeObjectToString$1=objectProto$b.toString,symToStringTag$1=Symbol$5?Symbol$5.toStringTag:void 0;function getRawTag$1(re){var ee=hasOwnProperty$9.call(re,symToStringTag$1),ne=re[symToStringTag$1];try{re[symToStringTag$1]=void 0;var ie=!0}catch{}var oe=nativeObjectToString$1.call(re);return ie&&(ee?re[symToStringTag$1]=ne:delete re[symToStringTag$1]),oe}var _getRawTag=getRawTag$1,objectProto$a=Object.prototype,nativeObjectToString=objectProto$a.toString;function objectToString$1(re){return nativeObjectToString.call(re)}var _objectToString=objectToString$1,Symbol$4=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$4?Symbol$4.toStringTag:void 0;function baseGetTag$6(re){return re==null?re===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(re)?getRawTag(re):objectToString(re)}var _baseGetTag=baseGetTag$6;function isObjectLike$7(re){return re!=null&&typeof re=="object"}var isObjectLike_1=isObjectLike$7,baseGetTag$5=_baseGetTag,isObjectLike$6=isObjectLike_1,argsTag$2="[object Arguments]";function baseIsArguments$1(re){return isObjectLike$6(re)&&baseGetTag$5(re)==argsTag$2}var _baseIsArguments=baseIsArguments$1,baseIsArguments=_baseIsArguments,isObjectLike$5=isObjectLike_1,objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty,propertyIsEnumerable$1=objectProto$9.propertyIsEnumerable,isArguments$3=baseIsArguments(function(){return arguments}())?baseIsArguments:function(re){return isObjectLike$5(re)&&hasOwnProperty$8.call(re,"callee")&&!propertyIsEnumerable$1.call(re,"callee")},isArguments_1=isArguments$3,isArray$d=Array.isArray,isArray_1=isArray$d,Symbol$3=_Symbol,isArguments$2=isArguments_1,isArray$c=isArray_1,spreadableSymbol=Symbol$3?Symbol$3.isConcatSpreadable:void 0;function isFlattenable$1(re){return isArray$c(re)||isArguments$2(re)||!!(spreadableSymbol&&re&&re[spreadableSymbol])}var _isFlattenable=isFlattenable$1,arrayPush$1=_arrayPush,isFlattenable=_isFlattenable;function baseFlatten$1(re,ee,ne,ie,oe){var ae=-1,ce=re.length;for(ne||(ne=isFlattenable),oe||(oe=[]);++ae<ce;){var le=re[ae];ee>0&&ne(le)?ee>1?baseFlatten$1(le,ee-1,ne,ie,oe):arrayPush$1(oe,le):ie||(oe[oe.length]=le)}return oe}var _baseFlatten=baseFlatten$1,baseFlatten=_baseFlatten;function flatten$3(re){var ee=re==null?0:re.length;return ee?baseFlatten(re,1):[]}var flatten_1=flatten$3;const flatten$4=getDefaultExportFromCjs(flatten_1);function shuffleLogos(re){const ee=[...re];let ne=ee.length,ie,oe;const ae=new Date(Date.now());let ce=(Date.UTC(ae.getFullYear(),ae.getMonth(),ae.getDate())-Date.UTC(ae.getFullYear(),0,0))/24/60/60/1e3;const le=()=>{const ue=Math.sin(ce++)*1e4;return ue-Math.floor(ue)};for(;ne!==0;)oe=Math.floor(le()*ne),ne--,ie=ee[ne],ee[ne]=ee[oe],ee[oe]=ie;return ee}function filterWalletBlockList(re,ee){const ne=flatten$4(ee),ie=flatten$4(re).filter(oe=>!ne.includes(oe));return mapFromList(ie)}const mapFromList=re=>{const ee=new Map;return re.forEach(ne=>{ee.set(ne,1)}),ee},report_url=re=>`https://lists.teia.art/${re}`;async function fetchSettings(){const[re,ee,ne,ie,oe,ae,ce,le,ue,he]=await Promise.all([axios.get(report_url("restricted_objkt.json")),axios.get("https://lists.teia.art/teia-logos/dist/logos.json"),axios.get("https://lists.teia.art/teia-logos/dist/logos_pride.json"),axios.get(report_url("restricted.json")),axios.get(report_url("permitted.json")),axios.get(report_url("nsfw.json")),axios.get(report_url("photosensitive.json")),axios.get(report_url("under_review.json")),axios.get(report_url("ignore_uri.json")),axios.get(report_url("fund_feed_ignored_addresses.json"))]),me=[ee,ne].flatMap(Te=>Te.data.logos.map(Ne=>({name:Ne,themable:Te.data.themable,collection:Te.data.collection}))),ge=mapFromList(re.data.map(Te=>Te.toString())),ve=mapFromList(ae.data.map(Te=>Te.toString())),ye=mapFromList(ce.data.map(Te=>Te.toString())),be=mapFromList(le.data),Ce=mapFromList(ue.data),Se=mapFromList(he.data),$e=filterWalletBlockList([ie.data],[oe.data]);return{logos:shuffleLogos(me),walletBlockMap:$e,nsfwMap:ve,photosensitiveMap:ye,underReviewMap:be,ignoreUriMap:Ce,objktBlockMap:ge,feedIgnoreUriMap:Se}}function useSettings(){const{data:re,error:ee,isValidating:ne}=useSWR("/settings",fetchSettings,{revalidateIfStale:!1,revalidateOnFocus:!1});return{...re||{},error:ee,isLoading:ne}}const logo$1="_logo_159i4_216",container$x="_container_159i4_231",beta="_beta_159i4_236",styles$S={logo:logo$1,container:container$x,beta},SvgAcidmanhattan01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M241.9 5.7H0v90.7h83.1v181.4h90.8V96.4H257V5.7h-7.6zm347.7 0H347.7v90.7h257V5.7h-7.5zm181.4 0h-75.6v272.1h90.7V5.7h-7.5zm355.3 0H876.9v272.1h90.7V96.4h75.5v181.4h90.8V5.7zM589.6 187.1H347.7v90.7h257v-90.7h-7.5z"})),SvgAcidmanhattan02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M247.1 10.9H0v87.2h87.2v174.5h87.2V98.1h87.3V10.9h-7.3zm348.9 0H348.9v87.2h261.6V10.9h-7.2zm174.4 0h-72.6v261.7H785V10.9h-7.3zm356.2 0H872.1v262.5h87.6V229h87.6v43.8h87.6v-262h-8.3zm-80 94.5v36.5h-87.2V98.1h87.6v7.3zM596 185.3H348.9v87.3h261.6v-87.3h-7.2z"})),SvgAfrizalRizki01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M410 170.1h56.7v56.7H410zM466.7 0v56.7h113.4V0h-56.7zm56.7 170.1h56.7v-56.7H466.7v56.7zm0 113.4h56.7v-56.7H466.7v56.7zM636.7 56.7v226.8h56.7V0h-56.7zm113.4 0h56.7v56.7h-56.7zM806.8 0h56.7v56.7h-56.7zm56.7 56.7h56.7v56.7h-56.7zm-679.9 0h56.7v56.7h-56.7zM240.3 0H297v56.7h-56.7zM297 113.4v170.1h56.7V56.7H297zM410.4 0h-56.7v56.7H410v56.7h56.7V56.7h-56.3zm339.7 170.1v113.4h56.7v-85.1h56.7v85.1h56.7V139.8H750.1z"})),SvgAlterebro01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M268.4 2.9H0v92.6h185.1v185.1h92.6V2.9h-4.6zm347.1 0H347.1v277.7h277.7V188H439.7V95.5h185.1V2.9h-4.6zm162 0h-83.3v277.7h92.6V2.9h-4.7zm351.7 0h-273v277.7h92.5V95.5h92.6v185.1h92.6V2.9z"})),SvgAlterebro02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M597.9 0H0v79.7h606.8V0h-4.4zm101.9 0h-70.9v79.7h79.8V0h-4.5zm429.6 0H730.8v79.7h403.1V0zM172.7 101.9h-70.8v181.6h79.7V101.9h-4.4zm425.2 0H203.7v79.7h403.1v-79.7h-4.4zm101.9 0h-70.9v181.6h79.8V101.9h-4.5zm425.2 0H730.8v181.6h79.7V181.6h243.6v101.9h79.8V101.9h-4.5zM597.9 203.7H203.7v79.8h403.1v-79.8h-4.4z"})),SvgAlterebro03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M372 62H221.5v53.2h106.3v106.3h53.1V62h-4.4zm212.6 0H434.1v53.2h159.4V62h-4.4zm106.3 0h-44.2v159.5h53.1V62h-4.4zM908 62H753v159.5h53.1V115.2h53.2v106.3h53.1V62zM584.6 168.3H434.1v53.2h159.4v-53.2h-4.4z"})),SvgAnnekatrinenderlein01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"m208 114-15-8V42l8 4 27 14 18 10v16l-3-2-35-18v8l19 10 19 10v16l-2-1a4531 4531 0 0 1-36-18v7l15 8 16 9-15 8-16-9Zm91-3-22-11V78l18-9 18-10 32 17 32 17-8 4-8 4-10-5-11-6-6 3-12 7-7 3 11 5 10 6-16 8-21-11Zm13-22 12-7-6-3-5-3-12 6-13 7 11 6 13-6Z"}),reactExports.createElement("path",{d:"M255 86V65l-7-4-6-3 7-4 7-4 7 4 6 3v42l-7 4-7 4V86ZM147 50l-8-4 19-11 19-10-9-5c-8-4-9-4-8-5l7-4 7-3 24 12 27 14 3 2-8 3-8 4-10-6-9-4-20 10-20 10-6-3Z"}))),SvgBurkabayram01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{d:"M173 65V7h166v116H173V65Zm153 0V19H185l-1 44 1 46v3l70-1h71V65Z"}),reactExports.createElement("path",{d:"M191 74V43h26l25 1v41l-19 1-19 1v5h39v12h-52V74Zm38-9v-8h-25v15h25v-7Zm20 29V83h12v21h-12V94Zm18-10V63h40v-5l-20-1h-19V44l26-1h25v61h-52V84Zm40 0v-8h-26v16h26v-8Zm-58-15v-6h12v13h-12v-7Z"}),reactExports.createElement("path",{d:"M249 48V38h-58V25h128v13h-58v19h-12v-9Z"})),SvgCarolyn01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"m187.55 68.08 68.444-64.483H187.55V68.08zm68.444 56.323h34.228L255.994 3.597l-34.216 120.806h34.216zM324.45 3.597h-68.456L324.45 68.08V3.597z"})),SvgCryptemes01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",xmlSpace:"preserve",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M501 59.7H376.8c-2.8 0-5.2 2.3-5.2 5.2v53.5c0 2.8 2.3 5.2 5.2 5.2s5.2-2.3 5.2-5.2V70h51.8v143.4h-33.4c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h77.2c2.8 0 5.2-2.3 5.2-5.2s-2.3-5.2-5.2-5.2h-33.4V70H496v48.4c0 2.8 2.3 5.2 5.2 5.2s5.2-2.3 5.2-5.2V64.9c-.2-2.9-2.6-5.2-5.4-5.2zM839.3 70c2.8 0 5.2-2.3 5.2-5.2 0-2.8-2.3-5.2-5.2-5.2h-98.1c-2.8 0-5.2 2.3-5.2 5.2 0 2.8 2.3 5.2 5.2 5.2h43.9v143.4h-43.9c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h98.1c2.8 0 5.2-2.3 5.2-5.2s-2.3-5.2-5.2-5.2h-43.9V70h43.9zm-162.8 94.8c-2.8 0-5.2 2.3-5.2 5.2v43.4H578V144h43.9v19.4c0 2.8 2.3 5.2 5.2 5.2 2.8 0 5.2-2.3 5.2-5.2v-24c0-.2.1-.4.1-.6s0-.4-.1-.6v-24c0-2.8-2.3-5.2-5.2-5.2-2.8 0-5.2 2.3-5.2 5.2v19.5H578V70h85.8v32.5c0 2.8 2.3 5.2 5.2 5.2 2.8 0 5.2-2.3 5.2-5.2V64.9c0-2.8-2.3-5.2-5.2-5.2H547c-2.8 0-5.2 2.3-5.2 5.2 0 2.8 2.3 5.2 5.2 5.2h20.7v143.4H547c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h129.5c2.8 0 5.2-2.3 5.2-5.2V170c-.1-2.9-2.4-5.2-5.2-5.2zm375.2 48.6h-12L978.6 62.9c-.8-1.9-2.7-3.2-4.8-3.2h-58.7c-2.8 0-5.2 2.3-5.2 5.2 0 2.8 2.3 5.2 5.2 5.2h41.8l-58.2 143.4h-14.1c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h54c2.8 0 5.2-2.3 5.2-5.2s-2.3-5.2-5.2-5.2h-28.7l18.8-46.3h81.2l18.8 46.3h-30.9c-2.8 0-5.2 2.3-5.2 5.2s2.3 5.2 5.2 5.2h53.9c2.8 0 5.2-2.3 5.2-5.2s-2.3-5.3-5.2-5.3zm-118.9-56.6L968 70h2.3l35.2 86.7h-72.7zm-616.4-15.1c0-33.1-16.5-62.4-41.8-80l20.8-33.1c.1-.2.2-.5.3-.7 0-.1.1-.2.1-.2.8-2.3 0-4.9-2.1-6.2C271.3 7.4 245.3 0 218.7 0c-18.7 0-36.5 3.6-52.8 10.2-.1 0-.3.1-.4.1-.1 0-.2.1-.2.1C113.5 31.6 77 82.5 77 141.7c0 51 27.1 95.9 67.7 120.8.1.1.3.2.4.3.2.1.5.3.7.4 21.3 12.8 46.2 20.2 72.9 20.2 27 0 53.3-7.6 76-22.1 2.1-1.3 2.9-3.9 2.1-6.1v-.1l-.3-.6c-.1-.1-.1-.2-.2-.3l-20.9-33.1c24.8-17.6 41-46.6 41-79.4zm-10.5-5.1H269c-2.6-25.5-24.2-45.4-50.3-45.4-4.2 0-8.3.5-12.2 1.5l-14.6-34c8.6-2.8 17.6-4.2 26.8-4.2 46.4-.1 84.5 36.3 87.2 82.1zm-137.5 10.3c1.5 14.5 9.2 27.3 20.3 35.5l-19.3 31.3c-21.6-14.8-36.2-39.1-37.9-66.9h36.9zm29.2 40.8c6.4 3 13.6 4.6 21.1 4.6 8.2 0 16-2 22.8-5.5l19.7 31.2c-12.6 7-27.1 11.1-42.5 11.1-14.6 0-28.4-3.6-40.5-10l19.4-31.4zm21.1-5.7c-22.2 0-40.3-18.1-40.3-40.3s18.1-40.3 40.3-40.3 40.3 18.1 40.3 40.3-18.1 40.3-40.3 40.3zm65.1-154.4-18 28.7c-14-7.7-30.1-12.2-47.1-12.2-10.6 0-21 1.7-30.9 5L174.4 18c13.8-5 28.8-7.7 44.3-7.7 22.9 0 45.3 6 65.1 17.3zM87.3 141.7c0-53.3 31.9-99.3 77.5-119.9l31.9 74.3c-15.5 7.5-26.6 22.6-28.4 40.4h-42.2c-2.8 0-5.2 2.3-5.2 5.2 0 33.6 17 63.2 42.9 80.8l-17.7 28.7c-35.4-23.5-58.8-63.8-58.8-109.5zm197.4 113.7c-20 11.6-42.7 17.8-66 17.8-23.1 0-44.8-6-63.7-16.5l17.7-28.8c13.7 7.3 29.3 11.5 45.9 11.5 17.4 0 33.8-4.6 48-12.6l18.1 28.6zm-14.8-42.9-19.7-31.2c10.4-8.3 17.4-20.5 18.8-34.4h36.9c-1.6 26.9-15.4 50.6-36 65.6z"})),SvgDjkero01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"m231.62 57.401-18.431 18.431V97.72l28.038-28.057L253.488 57.4 216.99 20.883l-3.801-3.8V38.95l3.8 3.801 14.63 14.65zm-63.754 0v17.17h19.004V18.248L147.717 57.4h20.15z"}),reactExports.createElement("path",{d:"M208.185 57.401h20.15L216.99 46.037l-3.801-3.8-21.888-21.87-2.12-2.12v56.324h19.004v-17.17zm2.674 42.84V84.35l-17.705 17.723 18.85 18.87.727.707 4.125-4.125 19.806-19.806 12.835-12.835V64.678l-38.638 38.638v-3.075zm16.349-93.892-10.715 10.734 10.715 10.733V6.35zm4.202 113.736 15.165-15.184H231.41v15.184zm20.398-56.305v.02l.019-.02h-.02zm0 20.608h20.589L251.807 63.8v20.59zm26.128-75.537h-.02l-18.965 18.965h37.931L277.916 8.851h.02zM258.95 67.658l20.379 20.36v-57.89h-20.38v37.53zm62.57-39.842L300.91 7.227H279.56l20.608 20.59h21.353zm12.165 12.167-10.695-10.696-10.677 10.696-30.597 30.597h21.372l19.902-19.902 19.901 19.902h21.391l-30.597-30.597z"}),reactExports.createElement("path",{d:"m322.99 53.963-9.816 9.817h19.634l-9.817-9.817z"}))),SvgImnot01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M267 121V87c-2-2-7-2-8 0v33c2 3 6 3 8 1Z"}),reactExports.createElement("path",{d:"M303 107c3-3 2-5-8-15l-9-10 4-8 5-8 11-2c9 0 10-1 12-2 2-2 2-3 1-4 0-2-2-3-3-3l-7-8-11-18-7-11-7-2-10-3-11-4c-8-4-11-4-12 0-1 2-1 3 1 5 2 1 25 10 28 10 2 0 2 3 0 4l-6 8-8 13-4 6-19-19c-15-15-19-18-21-18-3 0-28 37-28 41 1 2 1 3 4 3 2 0 3 0 13-16l12-17 7 7 7 7-3 3c-5 6-11 14-11 16s4 4 6 4l8-9 6-8c1 0 13 12 13 14l-19 24-10 15 2 3c2 1 3 1 5-1l24-28c4-6 6-7 7-5l8 9 16 18c9 10 12 11 14 9Zm-27-36-2-4 4-1 5 1-3 7-4-3Zm-4-15 1-2 8-12 8-11 7 10a466 466 0 0 0 7 14l-11 2c-20 1-20 1-20-1Z"}))),SvgSantiagoItzcoatl01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M1129.4 0H0v282.2h1127V0h2.4zm0 8.9v268.9H4.4V4.4h1118.2v4.5z"}),reactExports.createElement("path",{d:"M1009.8 13.3h-899v260.1h902v-260h-4.4 1.4zm0 22.1v158.8h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v-163h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v4.4zm0 181.6v48.4H119.6V22.2h52.8v4.4H168V31h-4.4v4.4h-4.4v4.4H155v4.4h-4.4v4.4h-4.4V93h70.4v145.2h44v-4.4h4.4v-4.4h4.4V225h4.4v-4.4h4.4V217h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v101.2h184.8v-4.4h4.4v-4.4h4.4v-4.4h4.4V221h4.4v-4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v57.2h-35.2v44H727v-4.4h4.4v-4.4h4.4v-4.4h4.4V221h4.4v-4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v61.6h44v-4.4h4.4V230h4.4v-4.4h4.4v-4.4h4.4V217h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h30.8v74.8h44v-4.4h4.4V230h4.4v-4.4h4.4v-4.4h4.4V217h4.4v-4.4h4.4v4.4zM1001 26.6h-4.4V31h-4.4v4.4h-4.4v4.4h-4.4v4.4H979v4.4H810.6v-4.4h4.4v-4.4h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h167.2v4.4zM890.3 168.3v4.4h-4.4v4.4h-4.4v4.4H877v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H855v4.4h-4.4v4.4H846v4.4h-4.4v4.4h-4.4V164h57.2v4.4h-4.1zm-252.5-35.4v4.4h-4.4v4.4H629v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H607v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H585v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H563v4.4h-4.4v4.4h-4.4v4.4h-4.4v-21.5h4.4V195h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V133h4.4v-4.4h4.4V124h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V102h4.4v22h-4.4v4.4h-4.4v4.4h-4.4zm-287.9 0v4.4h-4.4v4.4H341v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H319v4.4h-4.4v4.4H310v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H288v4.4h-4.4v4.4H279v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4V93h74.8v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V71h4.4v-4.4h4.4v57.2h-4.4v4.4h-4.4v4.4h-3.9zm429.6 39.8h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H753v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H731v-17.6h4.4v-4.4h4.4v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v17.6h-4.4v4.4H784v4.4h-4.4v4.5zM637.8 97.4v4.4h-4.4v4.4H629v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H607v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H585v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H563v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H417.8v-4.4h4.4V186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164H519v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V133h4.4v-4.4h4.4V124h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V102h4.4v-4.4h4.4V93h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V71h4.4v-4.4h4.4V93h26.4v4.4h-4.4zm-106.3 0h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-92.4V115h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V93h92.4v4.4zm-110.7 0v4.4h-4.4v4.4H412v4.4h-4.4V93h17.6v4.4h-4.4zm4.4 70.9h-4.4v4.4h-4.4v4.4H412v4.4h-4.4v-17.6h17.6v4.4zM708.7 186h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V164h4.4v-4.4h4.4V155h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V133h4.4v-4.4h4.4V124h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V124h-4.4v4.4H784v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H762v4.4h-4.4v4.4H753v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H731v4.4h-4.4v4.4h-4.4v4.4h-17.6V190h4.4v-4zM939 97.4v22h-88.4V115h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V93h66v4.4zm-101.9 8.9V93h17.6v4.4h-4.4v4.4H846v4.4h-4.4v4.4h-4.4v-4.3zm-17.7-79.7H815V31h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H793v39.8h-4.4V93H784v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H762v4.4h-4.4v4.4H753v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H731v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H709v4.4h-4.4v4.4h-4.4v4.4h-4.4V93H731v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V71h4.4v-4.4h4.4V62h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h22v4.4zm-35.4 0h-4.4V31h-4.4v4.4h-4.4v4.4h-4.4v4.4H762v4.4h-4.4V53H753v4.4h-4.4V62h-4.4v4.4h-4.4v4.4h-4.4v4.4H731v-22h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h22v4.4zm-35.5 0h-4.4V31h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-92.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h92.4v4.4zm-110.7 0h-4.4V31H629v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4V53H607v4.4h-4.4V62h-4.4v4.4h-4.4v4.4h-4.4v4.4H585v4.4h-4.4V84h-4.4v4.4h-4.4V93h-4.4v4.4H563v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H541v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H519v4.4h-4.4v-17.6h4.4V124h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V102h4.4v-4.4h4.4V93h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V71h4.4v-4.4h4.4V62h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h17.6v4.4zm-35.4 0H598V31h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H576V53h-4.4v4.4h-4.4V62h-4.4v4.4h-4.4v4.4H554v4.4h-4.4V57.6h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h17.6v4.4zm-35.5 0h-4.4V31h-4.4v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H382.1v-4.4h4.4v-4.4h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h162.8v4.4zm-181.6 0h-4.4V31h-4.4v4.4H372v4.4h-4.4v4.4h-4.4v4.4h-4.4V53h-4.4v4.4H350V62h-4.4v4.4H341v4.4h-4.4v4.4h-4.4V57.6h4.4v-4.4h4.4v-4.4h4.4v-4.4h4.4V40h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4H385v4.4zm-35.4 0h-4.4V31H341v4.4h-4.4v4.4h-4.4v4.4h-4.4v4.4H164v-4.4h4.4v-4.4h4.4v-4.4h4.4V31h4.4v-4.4h4.4v-4.4h162.8v4.4z"})),SvgSantiagoItzcoatl02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M236.8 19.7H1v243.8h244.2V20.2h-8.4zm-18.5 37v174.8H33.4V52.4h184.2v4.3zm314.4-37H297v243.8h243.8V20.2h-8.1zm-18.4 37v174.8H329.4V52.4h184v4.3zm314.4-37H593v243.8h243.8V20.2h-8.1zm-18.5 37v174.8H625.4V52.4h184v4.3zm319-37H888.8v243.8h243.8V20.2h-3.4zm-23.1 37v174.8H921.2V52.4h184v4.3z"}),reactExports.createElement("path",{d:"M186 70.6H56.5v32.3h50.8V126H84.2v32.4h23.1v50.9h32.4v-50.9h27.8V126h-27.8v-23.1h55.5V70.6h-4.6zm295.9 0H352.4v138h138v-27h-54.6v-23.2h27.6V126h-27.6v-23H491V70.8h-9.1zm-78.6 37V126h-18.5v-23h18.4v4.6zm-18.5 69.3v-18.5h18.4v23h-18.4v-4.5zm393-106.3H648.3v32.3h50.9V126h-23.1v32.4h23.1v23.1h-50.9v27.8h138.8v-27.8h-55.5v-23.1h27.7V126h-27.7v-23.1h55.5V70.6h-4.7zm295.9 0H944.4v138h32.2v-50.2H995V186h32.2v-27.6h23V209h32.2V70.8h-8.7zm-23.1 37V126h-23v-23h23v4.6zm-74 13.8V103H995v23h-18.4v-4.6z"})),SvgKlausJoerres01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M252.5 0H0v283.5h261.3V0h-4.4zm345.4 0H345.5v93h261.3V0h-4.4zm531.5 0h-434v283.5H784V93h84.1v190.5h88.6V93h88.6v190.5h88.6V0zM597.9 190.5H345.5v93h261.3v-93h-4.4z"})),SvgSpencerLinkous03=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M274.6 46.5H0v93h93V237h97.5v-97.5h93v-93H279zm473.9 0h-88.6V237h97.5V46.5H753zm-190.4 93H376.5V237h190.4v-97.5h-4.4zm571.3 0h-88.6v-93h-97.4v93h-93V237h283.5v-97.5z"})),SvgMaes02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M45.07 121.74c-2.59-3.99-3.19-10.77-3.19-37.88v-32.9H29.92c-10.17 0-12.16-.6-14.15-4.38a84.87 84.87 0 0 0-6.98-10.17c-6.38-7.57-6.98-27.9-1-31.3 2.6-1.2 46.45-2 128.59-2h124.4l2.6 7.39c2.39 7.57 1 38.07-2 41.06-.8.8-39.27 1.2-85.53 1l-84.13-.6-.4 30.9-.6 30.7-6.97 2c-3.79 1-9.77 3.99-13.36 6.58-8.77 6.38-20.93 6.38-25.32-.4Z"}),reactExports.createElement("path",{d:"M168.48 123.33c-10.17-.6-14.56-1.59-16.35-3.98-3.19-4.19-3.59-40.67-.6-43.66 1.4-1.4 24.13-1.8 66.79-1.2l64.8 1v-34.1c0-30.5.39-34.28 3.58-35.88 1.8-1 11.36-2.4 21.13-3.19 24.92-1.8 25.12-1.6 25.12 29.1 0 12.97.4 23.53.8 23.53 1 0 66.99-34.49 87.12-45.45 11.76-6.58 17.15-8.37 24.52-8.37 5.19 0 10.57 1.2 11.77 2.59 7.97 8.37 13.95 18.74 14.95 25.91 1 7.78 14.55 31.9 30.7 54.03 5.78 7.98 7.18 16.55 3.59 23.33-3.99 7.17-21.93 15.75-32.9 15.75-11.36-.2-9.17 2.19-30.9-31.9-7.97-12.56-14.75-23.33-15.15-23.73-.6-.6-12.96 5.59-69.58 34.7-11.96 6.17-23.32 12.35-24.92 13.95-1.8 1.6-4.38 2.99-5.78 2.99-1.4 0-3.79 1.4-5.38 2.99-2.6 2.6-12.96 2.99-71.18 2.6-37.48-.2-74.36-.6-82.13-1Z"}))),SvgMumuthestan02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{d:"M313.58 102.25V83.47h39.38v37.55h-39.38v-18.77Zm-265.31-.61V82.86H10.72V43.5h37.55V7.75h38.77V43.5h36.35v39.36H87.03v37.56H48.27v-18.78Zm114.49-.91V81.05h112.06v39.37H162.76v-19.69Zm227.33 18.97c.12-.43 8.84-25.33 19.38-55.31 10.48-29.99 19.26-55 19.5-55.55.43-1.03 1.76-1.09 16.6-1.09h16.12l19.99 55.55a7897.4 7897.4 0 0 1 20.17 56.27c.18.73-3.21.85-20.78.73l-21.02-.18-6.48-18.78c-7.7-22.3-7.27-21.14-7.7-20.72-.18.18-3.38 9.15-7.08 19.93L432 120.12l-21.13.18c-16.78.12-21.02 0-20.78-.6ZM162.76 27.14V7.75h112.06v38.77H162.76V27.14Zm150.82-.91V8.36h39.38V44.1h-39.38V26.23Z"})),SvgMumuthestan03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("g",null,reactExports.createElement("path",{fill:"currentColor",d:"M34.86 64.27V2.05h66.83v9.22h9.99v9.99h9.2v9.2h10v10h9.21v86.01H34.86V64.26Zm96.01 19.2v-33.8h-9.99v57.6H54.07V21.26h38.4v-9.98H44.08v106h86.8v-33.8Zm-19.2 9.6v-5h-9.98v-9.21h9.99V49.67H92.46v-19.2H63.28v19.2h9.99v9.99h-9.99v19.2h9.99v9.22h-9.99v9.99h48.4v-5Zm9.22-57.6v-5h-9.21v-9.21h-10v19.2h19.2v-5Z"}),reactExports.createElement("path",{fill:"currentColor",d:"M73.27 73.87v-5h28.42v9.99H73.27v-5Zm9.21-19.21v-4.99h-9.21v-9.22h9.21v9.22h9.99v9.99h-9.99v-5Zm134.42 67.21v-4.6h-9.22v-19.2h9.21V59.65h-19.2v-9.99h29.2v-19.2h9.21v-19.2h9.99v19.2h-9.99v19.2h19.2v9.99h-28.42v38.4h-9.99v19.2h29.2v9.22h-29.2v-4.6Zm67.6 0v-4.6h-10v-10h-9.21v-19.2h9.21v-19.2h9.99v-9.21h9.2v-9.99h29.2v9.99h9.21v19.2h-9.21v9.22h-48.4v19.2h10v9.98h28.41v-9.99h9.99v10h-9.99v9.21h-28.4v-4.6Zm38.4-52.61v-9.6h-29.2v9.21h-9.2v9.99h38.4v-9.6Zm19.2 52.61v-4.6h19.2v-19.2h9.22v-29.2h9.99v-9.21h-29.2v-9.99h38.4v19.2h-9.2v29.2h-10v19.2h19.2v9.21H342.1v-4.6Zm76.8 0v-4.6h-9.98v-29.2h9.99v-9.21h38.4v-9.99h9.21v-9.21h-38.4v9.21h-9.21v-9.21h9.21v-9.99h38.4v9.99h10v9.21h-10v29.2h-9.2v19.2h19.2v9.21h-19.2v-9.22h-10v9.22h-28.41v-4.6Zm28.43-14.2v-9.6h9.99v-10H418.9v29.2h28.42v-9.6ZM380.5 25.86v-4.6h19.2v9.2h-19.2v-4.6Z"}))),SvgMumuthestan04=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M327.695 6.908h-143.39v114.184h143.01v-2.283.241V6.92h.38v-.012zM193.96 112.162V16.588h123.776v95.46h-8.222.267-115.784v.114h-.037z"}),reactExports.createElement("path",{d:"M261.975 45.515h8.73V35.86h-9.643v9.655h.914-.001zm19.31 0h8.729V35.86h-9.654v9.655h.926zM214.184 74.01H299.2V55.17h-9.186v9.186h-28.952V55.17h-9.655v9.186h-28.495V35.86h-9.655v38.15h.926v.001zm17.457 9.655h-8.728v9.642h9.655v-9.642h-.927zm18.841 0h-8.729v9.642h9.655v-9.642h-.926z"}))),SvgNatived01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("style",{type:"text/css"},`
		.st0 {
			fill: var(--gray-50);
		}

		.st2 {
			fill: "currentColor"
		}
	`),reactExports.createElement("path",{d:"M235.6 35H21.8v214.6h229.4V35h-15.6zm7.4 22.1v177.6h-7.4v7.4h-199v-7.4h-7.4V49.4h7.4V42h199.8v7.4h7.4v7.7zM522.8 35H309.2v214.6h229.4V35h-15.8zm7.3 22.1v177.6h-7.4v7.4H324v-7.4h-7.4V49.4h7.4V42h199.8v7.4h7.4v7.7zM809.9 35H596v214.6h229.4V35h-15.5zm7.4 22.1v177.6h-7.4v7.4H610.8v-7.4h-7.4V49.4h7.4V42h199.8v7.4h7.4v7.7zM1104.4 35h-221v214.6h229.4V35h-8.4zm0 22.1v177.6h-7.4v7.4H898.2v-7.4h-7.4V49.4h7.4V42H1098v7.4h7.4v7.7z",className:"st0"}),reactExports.createElement("path",{d:"M508 57.1h-7.3v169.3h7.3V219h7.4v-7.3H508V71.8h7.4v-7.4H508zm117.8 29.4v117.8h7.4V79.1h-7.4zm162 0v117.8h7.4V79.1h-7.4zM220.9 204.3V79.1h-7.4v132.6H58.9V79.1h-7.4v132.6h-7.3v7.3h7.3v7.4h7.4V219h154.6v7.4h7.4V219h7.3v-7.3h-7.3zm684.7 7.4h7.4v7.4h-7.4zm162 0H920.3v7.3H1075v-7.3zm14.7 0h7.4v7.4h-7.4zM913 219h7.4v7.4H913z",className:"st0"}),reactExports.createElement("path",{d:"M1075 219h7.4v7.4h-7.4z",className:"st0"}),reactExports.createElement("path",{d:"M257.7 12.9H0v258.9h273.4v-259h-15.7zm7.4 22.1v222h-7.4v7.4H14.4V257h-7V27.6h7.4v-7.4h243.8v7.4h7.4V35zm279.7-22.1H287v258.9h273.8v-259h-16zm7.4 22.1v222h-7.4v7.4h-243V257h-7.4V27.6h7.4v-7.4H546v7.4h7.4V35zM832 12.9H574.2v258.9H848v-259h-16zm7.3 22.1v222H832v7.4H589V257h-7.4V27.6h7.4v-7.4h244.2v7.4h7.4V35zm287.2-22.1H861.2v258.9H1135v-259h-8.5zm0 22.1v222h-7.4v7.4H876V257h-7.4V27.6h7.4v-7.4h244.2v7.4h7.4V35z",className:"st2"}),reactExports.createElement("path",{d:"M220.9 57.1h-7.4v7.3H58.9v-7.3h-7.4v7.3h-7.3v7.4h7.3v7.3h7.4v-7.3h73.6v29.4h-7.3v7.4h7.3v14.7h-7.3v7.4h7.3v22.1h-7.3v7.3h7.3v22.1h-7.3v7.4h7.3v22.1h7.4v-29.5h7.4v-7.3h-7.4v-14.8h7.4v-7.3h-7.4v-14.7h7.4v-7.4h-7.4v-29.5h7.4v-7.3h-7.4V71.8h73.6v7.3h7.4v-7.3h7.3v-7.4h-7.3zm574.3 0h-7.4v7.3H633.2v-7.3h-7.4v7.3h-7.3v7.4h7.3v7.3h7.4v-7.3h73.6v29.4h-7.3v7.4h7.3v14.7h-7.3v7.4h7.3v22.1h-7.3v7.3h7.3v22.1h-7.3v7.4h7.3v22.1h-73.6v-7.4h-7.4v7.4h-7.3v7.3h7.3v7.4h7.4V219h154.6v7.4h7.4V219h7.3v-7.3h-7.3v-7.4h-7.4v7.4h-73.6v-29.5h7.3v-7.3h-7.3v-14.8h7.3v-7.3h-7.3v-14.7h7.3v-7.4h-7.3v-29.5h7.3v-7.3h-7.3V71.8h73.6v7.3h7.4v-7.3h7.3v-7.4h-7.3zm287.1 0h-7.4v7.4h-37v-7.4h-7.4v7.4h-29.6v-7.4H994v7.4h-29.6v-7.4H957v7.4h-37v-7.4h-7v7.4h-7.4v7.4h7.4v29.6h-7.4v7.4h7.4v14.8h-7.4v7.4h7.4v22.2h-7.4v7.4h7.4v22.2h-7.4v7.4h7.4v29.6h7.4v-37.7h7.4v-7.4h-7.4V160h7.4v-7.4h-7.4v-14.8h155.4v14.8h-7.4v7.4h7.4v22.2h-7.4v7.4h7.4v29.6h7.4v-37h7.4v-7.4h-7.4V160h7.4v-7.4h-7.4v-14.8h7.4v-7.4h-7.4v-29.2h7.4v-7.4h-7.4V71.6h7.4v-7.4h-7.4v-7.1zm-7.3 22v22.2h-7.4v7.4h7.4v22.2H920v-29.7h7.4v-7.4H920V71.6h44.4V79h7.4v-7.4h14.8V79h7.4v-7.4h7.4V79h7.4v-7.4h14.8V79h7.4v-7.4h44.4v7.5zM485.9 64.4H346v-7.3h-7.3v7.3h-7.4v7.4h7.4v29.4h-7.4v7.4h7.4v14.7h-7.4v7.4h7.4v22.1h-7.4v7.3h7.4v22.1h-7.4v7.4h7.4v22.1h-7.4v7.3h7.4v7.4h7.3V219h154.7v-7.3H346v-29.5h7.4v-7.3H346v-14.8h7.4v-7.3H346v-14.7h22.1v7.3h7.4v-7.3h29.4v7.3h7.4v-7.3h36.8v7.3h7.4v-7.3h44.2v-7.4h-51.6v-7.4h-7.3v7.4h-22.1v-7.4h-7.4v7.4h-29.4v-7.4h-7.4v7.4H346v-29.5h7.4v-7.3H346V71.8h154.7v-7.4h-7.4z",className:"st2"})),SvgNorulesjustfeels07=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{fill:"currentColor",d:"m155.28 1-27.94.62-27.04.6V127.8l26.85-.62 27.1-.6.62-62.8.4-62.8Zm136.58.21-61.56.4-61.77.63-.62 28.12-.6 27.94h124.55V1.2Zm12.23 2.03V64.4c0 33.64.41 61.16 1.03 61.16.6 0 28.74-13.87 62.58-30.8L429.47 64l-60.13-30.37C336.3 17.11 307.98 3.45 306.76 3.45l-2.67-.21ZM167.51 70.53v55.04h124.35V70.53H167.51Z"})),Svg111V1Ab01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M669.7 0h-280v35h285V0h-5zm0 10v20h-275V5h275v5zm0 114.4H391.2v34.7h283.5v-34.7zM326.6 0H48.1v34.8h124.4v248.7h34.7V34.8h124.4V0zm343.1 248.6h-280v35h285v-35h-5zm0 10v20h-275v-25h275v5zM764.2 0h-29.8v283.5h34.8V0z"}),reactExports.createElement("path",{d:"M734.4 0h34.8v283.5h-34.8zm118.5 283.5 97.2-203.4 97.2 203.4h38.5L969.4 39.7 950.6.4l-.2-.4-.3.1-.3-.1-.2.4-18.8 39.3-116.4 243.8z"})),Svg111V1Ab02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M41.6 0h283.2v32H41.6zm342.6 32h283.2v32H384.2zm0 188.2h283.2v32H384.2z"}),reactExports.createElement("path",{d:"M199.216.28v283.2h-32V.28zM760.519.276v283.2h-32V.276z"}),reactExports.createElement("circle",{cx:418.6,cy:141.8,r:29.1}),reactExports.createElement("path",{d:"m980.6 39.5-5.1-10h-25.7l-5.1 10L833 261.1h35.8l93.8-186 93.9 186h35.8z"})),SvgOviy01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M857 0H272.4v283.5h221.4V217h-155v-39.8h155v-70.9h-155V66.4H795v39.9H640v177.2h70.9V177.2H795v106.3h66.5V0z"}),reactExports.createElement("path",{d:"M591.3 106.3h-57.6v177.2h66.4V106.3h-4.4z"})),SvgOviy02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M363.2 0H199.3v66.4H248v217.1h70.9V66.4H372V0h-4.4zm225.9 0h-176v282.2h184.8V217H479.1v-31h118.8V0h-8.8zm-57.6 70.9V115h-52.8V66.6h52.8v4.3zM699.8 0h-62v66.4h70.9V0h-4.5zm230.3 0H748.6v66.4h118.8v31H748.6v184.8h184.8V0h-3.3zm-62 172.7v44H815v-48.3h52.8v4.3zM699.8 97.4h-62v186.1h70.9V97.4h-4.5z"})),SvgPilhei01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{fill:"currentColor",d:"M129.24 121.84c-4.26-4.26-4.42-7.7-.5-17.02.99-2.3 2.46-5.9 3.44-8.19a62.6 62.6 0 0 1 3.28-7.36c13.42-25.37 22.42-44.03 22.42-46.65 0-1.8.66-3.28 1.48-3.28 2.13 0 6.7-9.49 6.7-13.58 0-2.3-.65-2.78-2.78-1.97-1.63.82-7.69 1.8-13.58 2.46-5.9.65-13.26 1.8-16.53 2.3-5.24 1.14-6.55.65-10.97-3.94-6.55-6.38-7.37-14.56-1.47-14.9 1.96-.16 6.87-.48 10.96-.65 4.1-.16 18.5-1.3 31.92-2.62 13.59-1.14 30.77-2.29 38.47-2.29 12.93 0 13.91.17 13.42 3.28-1.3 9.33-4.91 11.95-16.7 12.76-8.34.66-12.6 3.6-13.9 9.66-.66 2.95-2.96 8.19-5.08 11.46-2.13 3.44-3.93 6.87-3.93 7.7 0 .97-1.8 4.9-4.1 9-2.28 4.09-4.08 8.5-4.08 9.82 0 1.47-.66 2.61-1.48 2.61-1.63 0-16.37 29.8-24.88 50.42-2.78 6.38-6.38 6.71-12.11.98ZM261 118.57c0-1.48 2.62-8.19 5.9-14.73 3.27-6.72 6.05-13.75 6.22-16.05.32-2.12 2.13-6.05 3.93-8.83 1.96-2.62 3.6-5.4 3.6-5.9 0-1.47 10.3-24.39 22.42-49.27 6.88-14.24 9.5-16.04 18.5-11.94 6.22 2.61 6.22 6.22 0 15.55-2.62 3.92-4.91 8.34-4.91 9.65 0 1.15-.5 2.3-1.31 2.3-.66 0-2.13 2.45-3.28 5.4-4.9 11.78-20.62 43.2-24.06 47.8-1.96 2.77-4.09 7.03-4.75 9.48-.65 2.79-3.27 5.9-6.54 7.86-3.11 1.8-6.06 4.26-6.55 5.57a3.94 3.94 0 0 1-3.44 2.45c-1.3 0-2.45.82-2.45 1.64 0 .98-.66 1.64-1.64 1.64-.82 0-1.64-1.15-1.64-2.62Zm120.15-.33c-.98-.66-2.62-4.58-3.6-8.84-3.44-14.08-5.08-21.77-5.57-25.86-.33-2.46-1.63-4.26-3.6-4.58-3.27-.66-13.1 1.8-21.6 5.4a64.48 64.48 0 0 1-11.3 3.43c-6.22 1.15-17.68 11.3-23.4 20.63-3.12 5.4-6.06 6.71-9.83 4.75a41.2 41.2 0 0 0-5.56-2.46c-1.64-.49-2.95-1.8-2.95-2.95 0-1.14 8.51-13.42 18.82-27.33 10.32-13.75 20.14-27.83 21.61-31.1 1.47-3.27 5.57-10.15 9-15.22 3.44-5.08 6.22-10.32 6.22-11.62 0-1.31 1.15-3.28 2.46-4.42 1.3-1.15 2.45-3.44 2.45-5.08 0-2.45 1.15-3.1 5.4-3.1 2.79 0 6.55.97 8.03 2.28 2.94 2.13 7.85 22.26 7.85 32.25 0 3.27 1.15 8.67 2.46 11.95l2.45 5.89h10.48c7.2 0 10.97.82 12.44 2.46 3.6 4.25.65 7.36-6.88 7.36-12.1 0-12.93 2.46-8.02 22.92.99 4.09 2.3 10.14 2.95 13.58.82 5.4.5 6.06-2.62 6.06-1.96 0-3.44.98-3.44 2.45 0 2.62-1.47 3.11-4.25 1.15Zm-24.4-49.1 8.2-2.95.48-8.84c.33-5.9-.32-10.15-1.8-12.11-2.29-3.11-2.45-3.11-7.36.49-5.73 3.93-14.24 20.13-12.77 23.9 1.15 3.1 3.27 3.1 13.26-.5Zm-171.69 44.84c-.5-2.29-.5-5.4 0-7.03 1.3-3.93 3.92-10.48 5.89-14.08.82-1.64.98-3.77.33-4.75-.66-.82-.33-2.13.49-2.78 2.12-1.31 10.3-16.04 10.3-18.5 0-1.14 6.06-14.24 13.6-29.46l13.42-27.33 22.58-.17c19.48 0 22.6.33 23.58 2.62 1.3 3.6-3.6 7.2-10.15 7.2-2.79 0-5.73.66-6.55 1.31-.98.66-4.58 2.3-8.19 3.44-9 3.1-15.55 10.64-15.55 18.17 0 1.64-1.14 3.76-2.45 4.9-4.91 4.1-2.62 5.25 7.86 4.26 11.45-1.14 14.73.17 13.91 5.73-.5 3.44-1.8 4.1-12.77 6.06-18.99 3.27-21.77 5.07-27.33 17.02-2.79 5.57-5.57 12.12-6.22 14.24-1.15 3.77-.99 3.93 5.73 2.95 3.92-.5 7.53-1.47 8.02-2.3.49-.65 4.74-1.47 9.16-1.47 4.59-.16 12.44-.81 17.68-1.47 8.51-1.14 9.33-.98 9.33 1.8-.16 5.73-3.93 8.35-13.1 9.5-21.44 2.78-41.73 7.69-46.8 11.62-5.08 3.93-11.63 3.1-12.78-1.48Z"})),SvgHermanPretorius01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M217 28.8H0v115.1h115.2v110.8h110.7V28.8h-4.4zm567 0H682.1v225.9h110.7V28.8h-4.4zm345.4 0h-110.7v115.1H908v110.8h225.9V28.8zM558.1 143.9H451.8V28.8H341v225.9h225.9V143.9h-4.4z"})),SvgQizzio02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M562.8 0H413.2v62h-30.8v158.6h30.8v61.6h158.4v-29.6H444v-31h30.8v-62h61.6V124h-61.6V62H444V31h127.6V0h-8.8zM443.2 97.4v26.4h-30.8V93h30.8v4.4zm0 66.5v26.4h-30.8v-30.7h30.8v4.3zm-62-137.3V0H97.8v31h61.6v62H221v127.6h-30.2v61.6h30.8v-29.6h35.2v30.8h30.8v-61.8h-30.4V93h61.6V31h61.6v-4.4zm-93 8.8V62h-31V31H288v4.4zm-97.5 22.2V31h30.8v31h-30.7v-4.4zm567 31V0H603.4v93H665v127.6h-30.8v61.6H665v-29.6h30.8v30.8h30.8v-61.8h-30.8V93h61.6v-4.4zm-124-31V31h30.8v31h-30.8v-4.4zm62 0V31h30.8v31h-30.7v-4.4zm279 194.9h-26.5V0h-62v31H917v62h-97.2V31H855V0h-66.2v251.4h-31v30.8h61.6v-91.6h96.8V283h61.6v-30.4h-3.1zm-155-97.5v-31h35.2v35.2h-35.1V155zm66.4 0v-31h30.8v35.2h-30.7V155z"})),SvgRodicqart01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M255.1 9.4H0v56.7h264.6V9.4h-4.8zm302.4 0H378v18.9h-18.9v18.9h-18.9v18.9h226.7V9.4h-4.7zm207.9 0h-66.2v56.7h75.6V9.4h-4.7zm363.7 56.7H1115V47.2h-18.9V28.3h-18.9V9.4H926v18.9h-18.9v18.9h-18.9v18.9h-18.9V274h75.6V85h18.9V66.1h75.6V85h18.9v189h75.6V66.1zm-968.5 56.7H94.5V274h75.6V122.8h-4.7zm604.8 0h-66.2V274h75.6V122.8h-4.7z"}),reactExports.createElement("path",{d:"M1029.9 122.8h-66.1v37.8h75.6v-37.8h-4.8zm-472.4 94.5H415.7v-18.9h-18.8v-18.9H378v-18.9h132.2v-37.8H302.4v75.6h18.9v18.9h18.9v18.9h18.9v18.9H378V274h188.9v-56.7h-4.7z"})),SvgKerimSafa01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M372.358 9.081H264.146V24.75h-15.792V9.08H138.1v31.335h15.667V24.832h15.75v47.002h15.668V24.832h47.002v15.667h-31.001v15.667h31.334v15.668h-31.334V87.5h31.334v15.667h-15.667v15.667h31.334V40.582h15.667v78.337h31.335v-15.293h-15.292V56.333h47.001V72h15.668V24.832h15.667v15.667H373.9V9.165h-1.542V9.08zm-45.272 17.71v13.708h-47.19V24.832h47.002v1.958h.188z"})),Svg33301=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M468.5 0H192.1v90.6H282v192.9h96.6V90.6h89.9zm191.6 0v283.5h96.6V0h-96.6zm48.3 84C686.6 84 669 66.3 669 44.6c0-21.8 17.6-39.4 39.4-39.4 21.8 0 39.4 17.6 39.4 39.4 0 21.7-17.7 39.4-39.4 39.4z",className:"st0"}),reactExports.createElement("path",{d:"M580.1 235.9c-44.7 0-49.3-31.7-49.3-31.7h98.5c0-74.2-47-108.1-96.8-108.1s-104.7 22.6-104.7 96.2 64 91.2 64 91.2h88.3c24.3 0 49.3-31.7 49.3-31.7V215c0-.1-13.6 20.9-49.3 20.9zm-32.8-94c12.1 0 22 13.8 22.6 31.2h-45.2c.5-17.4 10.4-31.2 22.6-31.2zm334.9-48c-47.5 0-93.5 23.2-93.5 23.2v59.5s12-19.1 52.1-19.1C881 157.5 881 187 881 187s-11.5-4.2-31.3-4.2c-31.3 0-66.4 18.2-66.4 55.2 0 37.1 28.2 45.5 28.2 45.5h46c14.7 0 23.6-14.6 23.6-14.6v14.6h95.4V161.9c0-45.6-46.8-68-94.3-68zm-1.1 144.2c-2.8 6.3-9 9.6-16.3 9.6-9.9 0-19.9-7-19.9-16.9s10-16.9 19.9-16.9c7.3 0 13.6 3.4 16.3 9.6v14.6z",className:"st0"})),SvgVarda01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M242.883 4.05H196.05v16.855h16.855v33.721h16.866v-33.72h16.855V4.05H242.883zm71.185 0h-48.705v16.855h50.587V4.05h-1.882zm-1.872 33.72h-46.833v16.856h50.587V37.771h-3.754zm-86.168 26.225h-13.123V80.86h16.866V63.995H226.028zm86.168 9.368H282.23V90.23h16.855v33.721h16.866V73.363h-3.754zM226.028 90.23h-13.123v33.721h16.866V90.23H226.028zm52.447 0h-13.112v33.721h16.866V90.23h-3.754z"})),SvgVarda02=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M573.6 0h-22.2v26.6h31V0H578zM516 26.6h-75.3v115.1h-57.6v26.6h57.6v88.6h57.6v-31h-31v-57.6h31v-26.6h-31V57.6h31v84.1h26.6V26.6h-4.5zm168.3 0H640v31h26.6v57.6H640v26.5h26.6v84.2H640v-84.2h-31v115.2h84.2V141.7h57.5v-26.5h-57.5V26.6h-4.5zm-425.2 31h-17.7v26.6H268V57.6h-4.5zm314.5 0h-22.2v168.3h31V57.6H578z"}),reactExports.createElement("path",{d:"M631.2 57.6H609v26.6h31V57.6h-4.4zM888 199.3h-22.1v26.6h26.6v-26.6zm-380.9 26.6h17.8v-26.6h-26.6v26.6h4.4zm349.9 0h-48.7V0H693.2v26.6h88.5v199.3h-57.5v57.6h26.5v-26.6h115.2v-31h-4.4zm-425.2 31h-75.3V57.6h53.2V0h-26.6v26.6H268v31h57.5v225.9h115.2v-26.6h-4.4zm141.8 0h-22.2v26.6h31v-26.6H578z"})),SvgSimoneVirgini01=re=>reactExports.createElement("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M403.1 0H270.2v163.9h13.3V155h8.8v-13.3h13.3v-13.3h-13.3v-93h13.3V22.1h13.3v13.3h8.9v128.5h-8.9v13.3h-13.3v13.3h13.3v8.8h8.9v62h-8.9v8.9h-13.3v13.3h70.9v-13.3h-13.3v-8.9h-8.9v-62h8.9v-8.8h13.3v-13.3h-13.3v-13.3h-8.9V35.4h8.9V22.1h13.3v13.3h13.3v93h-13.3v13.3h13.3V155h8.8v8.9h13.3V0h-4.4zm256.8 88.6v-4.4h-35.4V22.1h13.3v-8.8h13.3V0h-75.3v13.3h13.3v8.8h13.3v62.1h-35.5V93h8.9v13.3h13.3v13.3h13.3v44.3h-13.3v8.8h-13.3v17.8h13.3v8.8h13.3v62h-13.3v8.9h-13.3v13.3h75.3v-13.3h-13.3v-8.9h-13.3v-62h13.3v-8.8h13.3v-17.8h-13.3v-8.8h-13.3v-44.3h13.3v-13.3h13.3V93h8.8z"}),reactExports.createElement("path",{d:"M558.1 248h-4.4v13.2h-83.6V248h-8.8v-48.6h8.8v-8.8h61.6v-13.4h8.8V164h13.2v-44.4h-13.2v-13.2h-8.8V93h-61.6v-8.8h-8.8V35.6h8.8V22.2h70.4v13.2h13.2v13.2h13.2V0H426.1v13.2h8.8V269h-8.8v13.2h140.8V248h-8.8zm-26.6-93h-13.2v8.8h-48.4V155h-8.8v-26.4h8.8v-9h48.4v8.8h13.2V155zm327.8 115.2h-8.8v-8.8h-13.3v-26.6h-8.8v-44.2H815V164h13.2v-9h8.8v-26.4h-8.8v-9H815V48.8h13.2V22.2h8.8v-8.8h13.2V0H673.8v13.2H687V22h8.8v26.6H709v70.8h-13.2v8.8H687v26.4h8.8v8.8H709v26.4h-13.2v44H687v26.4h-13.2v8.8h-13.2v13.2h61.6v-12H709V248h13.2v-35.4h8.8v-13.2h61.6v13.2h8.8v35.2h13.2v22h-13.2V283H863v-12.8h-3.7zM801.7 35.4h-8.8v128h-13.3v13.2h-35.4v-13.2H731V35.6h-8.8V22.2h79.2v13.2z"})),SvgChristianWaadt02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",stroke:"null",shapeRendering:"crispEdges",style:{vectorEffect:"non-scaling-stroke"},viewBox:"0 0 512 128",...re},reactExports.createElement("path",{d:"M277.873 5.233h-14.679v117.534h18.349V5.233h-3.67zM138.3 18.087v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37H145.638zm95.515 0H153v18.37h18.348v73.456h18.37V36.457h55.107v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.669v-18.37h-3.67zm29.398 0v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37h-3.67zm78.97 0h-71.652V36.54h55.357v18.453H299.89v55.356H373.7V18.046h-2.156v.041zM355.02 75.02v16.607H318.28V73.174h36.905v1.845h-.166z"}),reactExports.createElement("path",{d:"M195.232 54.805v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.69v-18.37h-3.69zm38.583 0h-33.068v18.37h36.738v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.669v-18.37h-3.67zm29.398 0v18.37h3.67v-18.37h-3.67zm7.34 0v18.37h3.67v-18.37h-3.67zm-97.34 36.739v18.369h3.669v-18.37h-3.67zm7.339 0v18.369h3.69v-18.37h-3.69zm38.583 0h-33.068v18.369h36.738v-18.37h-3.67zm7.34 0v18.369h3.67v-18.37h-3.67zm7.34 0v18.369h3.669v-18.37h-3.67zm29.398 0v18.369h3.67v-18.37h-3.67zm7.34 0v18.369h3.67v-18.37h-3.67z"})),SvgChristianWaadt03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",xmlSpace:"preserve",shapeRendering:"crispEdges",viewBox:"0 0 1133.9 283.5",...re},reactExports.createElement("path",{d:"M581.1 113.4h-102v56.7h113.3v-56.7h-5.6zm0 113.4h-102v56.7h113.3v-56.7h-5.6z"}),reactExports.createElement("path",{d:"m989.3 277.8-17-17-5.7-5.7-11.3-11.3-5.7-5.7-11.3-11.3-5.7-5.7-5.7-5.7-11.3-11.3-5.7-5.7-17-17-5.7-5.7-17-17-39.6-39.6-17.1-17.1-39.6-39.6-22.7-22.7-17-17L711.5 0H138.9l283.5 283.5v-85.1L280.6 56.7h396.9L688.8 68l11.4 11.4 5.6 5.6 11.4 11.4 11.3 11.3 17 17 11.4 11.4 5.6 5.6 5.7 5.7 5.7 5.7 11.3 11.3 5.7 5.7 17 17 11.3 11.3 28.4 28.4H705.8V113.4h-56.7v170.1H995z"})),SvgWans01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:10,clipRule:"evenodd",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M138.9 123.67c-4.22-.82-6.47-1.9-8.7-4.17a13.62 13.62 0 0 1-3.49-5.85c-.95-3.05-1.12-4.3-1.09-9.12 0-4.49.11-5.76.93-10.61.62-3.7 1.47-7.4 2.72-12.11.95-3.49.98-3.65 1.39-4.9.24-.68.81-2.5 1.3-4.08a95.3 95.3 0 0 1 2.18-6.67c.14-.3.55-1.47.93-2.59.81-2.5 2.01-5.93 2.34-6.67l.54-1.5c.2-.51.44-1.2.55-1.5l.78-2.09c.33-.87.82-2.28 1.15-3.13l.79-2.12.54-1.5c.2-.51.44-1.2.55-1.5.1-.3.46-1.22.76-2.04l1-2.72c1.97-5.2 3.19-9.88 3.49-13.42.1-1.17.05-1.3-.52-1.44a241 241 0 0 0-11.67 0c-6.08.08-16 .25-22.1.33-13.64.19-14.38.08-17.34-2.61a7.16 7.16 0 0 1-2.45-5.72c-.03-1.74.08-2.23.7-3.27 2.26-3.86 6.4-5.47 14.92-5.85l9.12-.4c28.8-1.34 48.47-1.8 89.27-2.16 30-.24 58.44-.16 142.5.5 55.93.43 56.6.46 60.96 1.82 4.38 1.38 6.59 4.51 5.72 8.13-1.7 7-10.37 9.45-30.22 8.58-10.94-.5-73.54-1.23-123.97-1.47-40.56-.2-93.28.54-94.83 1.28a1.6 1.6 0 0 0-.85 1.14c-.1.46-.35 1.5-.52 2.31-.19.82-.43 1.8-.57 2.18l-.54 1.9c-.65 2.32-.82 2.9-3.13 9.8A251.61 251.61 0 0 1 158.09 52c-.24.6-1.44 3.95-2.07 5.86-.21.68-.51 1.47-.65 1.77-.24.57-1.41 3.83-2.07 5.85-.22.68-.52 1.47-.65 1.77-.3.62-4.82 14.34-5.66 17.14-2.4 7.9-3.57 13.89-3.6 18.32 0 2.02 0 2.02 1.72 1.83a51.7 51.7 0 0 0 5.77-.96l2.59-.57c.81-.16 1.8-.4 2.17-.52l1.9-.54c5.67-1.6 11.47-4.08 14.7-6.26 3.35-2.29 6.81-6.67 6.81-8.68 0-.3.1-1.12.27-1.85.14-.71.38-2.24.55-3.35.54-3.65 1.33-7.95 1.82-9.8.76-2.89.84-3.13 1.03-3.68.85-2.42 3.16-6.88 4.03-7.8.17-.2.76-.9 1.31-1.59a41.41 41.41 0 0 1 10.04-8.65 46.5 46.5 0 0 1 14.97-5.55c2.37-.47 10.56-.44 12.52.02 3.98.96 6.1 1.85 8.3 3.52 6.9 5.2 5.75 14.4-3.2 25.63-2.13 2.67-10.24 10.73-13.53 13.45l-3.27 2.72c-.82.68-5.3 4.06-7.13 5.34-1.85 1.28-1.74 1.68.4 1.5a97.54 97.54 0 0 0 9.72-1.5c.52-.14 1.58-.38 2.32-.57 1.5-.36 5.85-1.75 6.94-2.2a69.64 69.64 0 0 0 9.58-4.6c.38-.3.79-.53.87-.53.25 0 4.06-2.55 5.47-3.64 6.7-5.23 11.81-11.1 15-17.2a109.1 109.1 0 0 1 5.9-10.32c3.43-5.17 6.73-8.41 10.18-9.99a7.77 7.77 0 0 1 4.09-.84 9.3 9.3 0 0 1 2.85.27c.36.16 1.1.52 1.7.76a8.92 8.92 0 0 1 4.78 5.8c.66 2.8-.62 6.83-4.1 12.7-.9 1.56-2.78 4.23-8.14 11.58-6.27 8.57-8.33 12.16-9.42 16.27-.87 3.27-.2 3.54 3.15 1.31l1.64-1.14c.21-.2 1.14-.93 2.04-1.64a174.6 174.6 0 0 0 6.94-5.93l2.72-2.45 5.3-4.9c5.07-4.74 6.43-5.99 8.86-8.06 1.11-.98 2.1-1.82 2.17-1.9.08-.08.93-.82 1.9-1.63a173.66 173.66 0 0 1 9-7.27c9.3-7.05 17.27-11.35 24.65-13.31 1.96-.5 5.9-.76 8.33-.55 1.52.17 2.2.36 2.7.8 1.9 1.68 2.96 4.51 2.96 7.89 0 3.8-.93 5.22-5.44 8.33a43.56 43.56 0 0 1-7.49 4.1l-2.45 1.1c-.6.27-1.58.67-2.18.92a67.32 67.32 0 0 0-12.17 6.34c-5.57 4-11.56 11.16-12.98 15.57-1.28 3.95 1.2 7.35 5.34 7.38 2.78 0 7.6-1.96 10.4-4.22 5.36-4.33 9.77-9.96 14.29-18.21 1.96-3.57 4.24-6.23 6.75-7.9 2.64-1.76 4.9-1.87 6.53-.32 1.88 1.77 3.78 5.66 5.06 10.37.9 3.24 1.52 4.98 2.26 6.01 2.48 3.62 8.25 5.28 22.02 6.37 2.01.17 4.79.41 6.18.55 1.36.16 4.54.27 7.07.27 6.62 0 9.8-.73 12.69-2.86 2.42-1.85 5.42-3.13 7.21-3.13 3.3 0 6.53 3.02 7.81 7.27 1.53 5-1.8 10.34-8.84 14.13a34.1 34.1 0 0 1-7.35 2.8l-2.59.57c-7.6 1.63-12.87 1.77-20.82.52a60.22 60.22 0 0 1-5.36-1.1 107.9 107.9 0 0 1-17.91-6.5c-1.2-.51-2.78-1.25-7.46-3.5-1.58-.74-2.01-.74-3.07.18a143.8 143.8 0 0 1-13.07 9.18c-4.33 2.53-10.97 5.33-14.5 6.1-6.16 1.3-9.62 1.16-15.38-.6-1.88-.6-6.13-2.97-8.3-4.66a53.36 53.36 0 0 1-7.03-7.02c-.33-.44-.7-.77-.9-.77-.16 0-1.22.66-2.34 1.45-8 5.69-15.21 9.44-21.31 11.1-.79.22-2.67.38-4.5.38-2.96-.02-3.23-.05-4.94-.9-2.89-1.38-5.1-4.32-6.18-8.21-.55-1.94-.82-2.45-1.17-2.45a25 25 0 0 0-3.35 1.47 122.4 122.4 0 0 1-4.27 2.04c-.74.32-1.88.84-2.59 1.14l-2.53 1.12-2.67 1.2c-.79.35-1.5.65-1.55.65-.08 0-.74.24-1.44.57a72.35 72.35 0 0 1-11.22 3.86c-.98.25-2.45.58-3.26.8-2.07.48-10.54.46-12.66-.03a41.24 41.24 0 0 1-11.84-4.77c-1.52-.92-1.99-1.09-3.24-1.06-.81.03-1.74.16-2.04.3a58.52 58.52 0 0 0-4.93 2.5 60.82 60.82 0 0 1-5.98 3l-2.73 1.2c-.73.35-2.4 1-3.67 1.5-1.28.48-2.56 1-2.86 1.14-.92.38-6.48 2.2-7.48 2.45-.52.1-1.45.35-2.05.51-4.43 1.2-11.2 1.85-13.88 1.31Zm59.42-45.32c.9-.57 9.94-7.3 10.45-7.76.2-.19.8-.68 1.36-1.08.55-.41 1.15-.9 1.37-1.1.19-.18.78-.7 1.3-1.1 1.72-1.4 4.9-4.64 4.9-5.02 0-.57-1.39-.4-3.3.36-4.95 2.01-6.66 3.07-10.06 6.4-5.64 5.5-9.56 11.53-6.02 9.3Z"}),reactExports.createElement("path",{d:"M284.66 44.14c-3.24-.76-4.66-1.74-6.5-4.52a16.4 16.4 0 0 1-1.91-3.62c-.41-1-.38-4.16.05-5.36.87-2.48 2.91-4.6 5.72-5.96 2.47-1.17 3.32-1.4 5.69-1.4 2.4 0 3.8.53 5.3 1.91.98.93 2.54 3.08 2.54 3.52 0 .16.1.51.24.78.82 1.47 1.09 5.23.54 7.24-.7 2.59-1.27 3.65-2.83 5.2-2.12 2.13-5.52 2.97-8.84 2.2Z"}))),SvgYazid01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",shapeRendering:"crispEdges",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M255.994 18.436 189.55 124.754h132.9L255.994 18.436zm-41.76 93.027 41.772-66.445 41.772 66.445h-83.544zM189.55 3.246h132.9v13.291h-132.9V3.247z"})),SvgActiveprinciple01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",fill:"currentColor",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{d:"M4 9.215h113.54v48.74H91.66v-23.05H75.04v58.19h42.51v25.69H4v-25.69h42.69v-58.19H29.88v23.05H4V9.215zm168.88 25.69-10.01 10.2v5.29h42.51v27.2h-42.51v15.49h84.82v25.69H134.16v-74.04l35.33-35.52h78.21v25.69h-74.82zm204.97-25.69v25.69h-42.32v58.19h42.32v25.69H264.31v-25.69h42.51v-58.19h-42.51V9.215h113.54zm51.94 0h42.88L508 44.735v74.05h-28.71v-42.32h-39.48v-26.07h39.48v-5.29l-10.2-10.2h-35.7l-10.2 10.2v73.68h-28.72v-74.05l35.32-35.52z"})),SvgActiveprinciple02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M106.324 104.855c-2.636-2.637-4.018-6.152-4.018-9.789V55.778L89.129 45.735c-3.388-2.637-5.394-6.777-5.394-11.043 0-7.535 6.273-13.68 13.807-13.68h67.4c7.406 0 13.558 6.152 13.558 13.68 0 4.394-2.133 8.533-4.77 10.546l-13.686 10.54v39.288c0 3.643-1.503 7.152-4.14 9.789-2.509 2.509-6.024 4.019-9.667 4.019h-30.252c-3.636-.007-7.151-1.51-9.66-4.02zm39.913.624a9.95 9.95 0 0 0 7.279-3.14 10.356 10.356 0 0 0 3.012-7.28V54.02l15.062-11.546c2.134-1.63 3.516-5.018 3.516-7.91 0-5.018-4.643-10.164-10.165-10.164H97.535c-5.521 0-10.419 4.515-10.419 10.292 0 3.14 1.51 6.272 4.14 8.285l14.438 11.043v41.046c0 2.764 1.127 5.394 3.012 7.28 2.006 2.006 4.643 3.14 7.28 3.14l30.25-.007zm-37.028-10.42V52.384l-15.94-12.17c-1.63-1.255-2.637-3.388-2.637-5.394a6.885 6.885 0 0 1 6.904-6.904h67.278c3.643 0 6.776 2.382 6.776 7.152 0 1.51-.376 3.14-1.382 3.891L153.14 52.39v42.676c0 3.764-3.14 6.904-6.903 6.904h-30.252c-3.763-.007-6.776-3.14-6.776-6.91zm37.028 3.516c1.885 0 3.388-1.63 3.388-3.515V50.632l17.443-13.304c1.007-.751 1.127-1.63 1.127-2.509 0-2.006-1.51-3.516-3.515-3.516H97.536c-2.134 0-3.516 2.134-3.516 3.516 0 1.006.503 2.006 1.382 2.637l17.195 13.176v44.434c0 1.886 1.51 3.516 3.388 3.516h30.252v-.007zm-30.252-49.58-18.45-14.183h67.151l-18.45 14.183V95.06h-30.25V48.995zm26.736 42.676V48.995c0-1.127.503-2.133 1.382-2.764l11.801-8.03h-49.459l11.674 8.03c.879.63 1.382 1.63 1.382 2.764v42.676h23.22zm44.809 13.184c-2.508-2.637-4.018-6.152-4.018-9.789V34.82c0-3.643 1.382-7.28 4.019-9.789 2.636-2.509 6.152-4.018 9.788-4.018h60.503c7.03 0 13.559 6.152 13.559 13.68 0 3.26-1.007 6.655-3.261 9.037l-11.298 11.418c2.637 2.51 4.14 6.025 4.14 9.668s-1.383 7.28-4.14 9.916L267.368 85.4c2.637 2.636 4.02 6.152 4.02 9.788 0 1.758-.377 3.516-1.007 5.146-2.006 5.146-7.152 8.534-12.801 8.534h-60.247c-3.657 0-7.293-1.376-9.802-4.012zm70.037.624c4.139 0 8.03-2.51 9.54-6.4.503-1.255.751-2.637.751-4.02 0-2.636-.879-5.273-2.885-7.279l-13.055-13.056 2.509-2.381c2.006-2.006 3.26-4.77 3.14-7.535-.128-4.018-1.758-5.897-5.65-9.667l13.68-13.808c1.63-1.63 2.382-4.394 2.382-6.527 0-5.395-4.14-10.42-10.164-10.42h-60.502c-2.765 0-5.274 1.255-7.28 3.14s-3.14 4.515-3.14 7.28v60.247c0 2.764 1.255 5.273 3.14 7.28s4.515 3.139 7.28 3.139l60.254.007zm-67.151-10.42V34.813c0-3.891 3.012-6.903 6.903-6.903h60.248c3.763 0 6.903 2.885 6.903 6.903a6.93 6.93 0 0 1-2.006 4.898L246.9 55.275l5.019 4.643c1.382 1.254 2.133 3.012 2.133 4.897 0 1.885-.751 3.764-2.006 5.019l-5.018 4.897 15.437 15.438c1.382 1.382 2.006 3.14 2.006 4.897 0 4.14-3.26 6.904-6.903 6.904H197.32c-3.891-.007-6.903-3.02-6.903-6.91zm67.15 3.516c1.383 0 2.765-.751 3.261-2.133.128-.376.248-.88.248-1.255 0-.879-.375-1.758-1.006-2.51l-17.947-17.946 7.407-7.28c.752-.75 1.127-1.63 1.127-2.508 0-1.007-.503-1.886-1.127-2.51l-7.534-7.03L260.069 37.2c.63-.631 1.006-1.51 1.006-2.382 0-1.885-1.63-3.516-3.515-3.516h-60.247c-1.886 0-3.516 1.63-3.516 3.516v60.247c0 1.885 1.63 3.516 3.516 3.516h60.254v-.007zM197.32 34.812h60.248l-20.584 20.584 10.164 9.54-9.916 9.788 20.336 20.336H197.32V34.812zm53.216 56.86-15.692-14.56c-.63-.623-1.006-1.502-1.006-2.508a3.4 3.4 0 0 1 1.006-2.382l7.28-7.152-7.535-7.031c-.63-.63-1.006-1.63-1.006-2.51s.248-1.884 1.006-2.508l15.94-14.814h-49.827v53.471l49.834-.007zm29.874 13.183c-2.508-2.637-4.018-6.152-4.018-9.789V34.82c0-3.643 1.382-7.28 4.019-9.789s6.152-4.018 9.788-4.018h30.124c3.643 0 7.28 1.382 9.789 4.018s4.018 6.153 4.018 9.789v60.247c0 3.643-1.382 7.28-4.018 9.789-2.637 2.509-6.153 4.019-9.789 4.019h-30.124c-3.643-.007-7.279-1.383-9.788-4.02zm40.04.624c2.765 0 5.274-1.255 7.28-3.14 2.006-1.885 3.012-4.522 3.012-7.28V34.813c0-2.764-1.127-5.273-3.012-7.28s-4.522-3.139-7.28-3.139h-30.123c-2.764 0-5.273 1.255-7.28 3.14a9.976 9.976 0 0 0-3.14 7.28V95.06c0 2.764 1.255 5.273 3.14 7.279s4.522 3.14 7.28 3.14h30.124zm-37.154-10.42V34.813c0-3.891 3.012-6.903 6.903-6.903h30.124a6.885 6.885 0 0 1 6.904 6.903V95.06a6.885 6.885 0 0 1-6.904 6.903h-30.124c-3.89 0-6.903-3.012-6.903-6.903zm37.155 3.516c1.885 0 3.388-1.63 3.388-3.515V34.812c0-1.885-1.51-3.515-3.388-3.515h-30.124c-1.885 0-3.516 1.63-3.516 3.515V95.06c0 1.885 1.63 3.515 3.516 3.515h30.124zm-30.252-63.763h30.124V95.06h-30.124V34.812zm26.736 56.86V38.2h-23.348v53.471h23.348zm25.602 10.674c-1.382-2.261-2.134-4.77-2.134-7.407 0-2.006.503-4.14 1.382-6.025L371.91 26.91c2.382-4.77 7.152-7.783 12.425-7.783s10.044 3.013 12.425 7.783l30.124 62.005c1.006 2.006 1.382 4.019 1.382 6.152 0 2.51-.63 5.019-2.006 7.28-2.51 4.018-7.031 6.527-11.801 6.527H354.21c-4.77-.006-9.164-2.515-11.673-6.527zm71.92 3.012c3.644 0 6.904-1.758 8.79-4.898 1.006-1.63 1.63-3.515 1.63-5.521 0-1.51-.376-3.013-1.127-4.522l-30.124-62.005c-1.758-3.516-5.273-5.777-9.285-5.777-3.891 0-7.534 2.261-9.286 5.777l-30.123 62.005c-.752 1.51-1.127 3.012-1.127 4.522 0 2.006.624 3.891 1.63 5.521 1.885 3.14 5.146 4.898 8.789 4.898h60.234zm-66.144-6.655a6.733 6.733 0 0 1-1.006-3.516c0-1.127.248-2.26.751-3.26l30.124-62.006c1.127-2.381 3.515-3.89 6.152-3.89s5.018 1.509 6.152 3.89l30.251 62.005c.504 1.007.631 2.006.631 3.013 0 1.382-.255 2.636-1.006 3.764a7.01 7.01 0 0 1-5.898 3.26h-60.247a7.013 7.013 0 0 1-5.904-3.26zm66.145-.249c1.254 0 2.381-.63 3.012-1.63.376-.503.503-1.127.503-1.758a3.9 3.9 0 0 0-.375-1.63l-30.124-62.005c-.503-1.127-1.758-1.885-3.14-1.885-1.254 0-2.637.751-3.14 1.885l-30.123 62.005c-.249.503-.249 1.006-.249 1.51 0 .623.128 1.254.504 1.885.63 1.006 1.63 1.63 2.884 1.63l60.248-.007zm-30.124-65.4 30.124 61.878H354.21l30.124-61.878zm24.602 58.497-24.602-50.707-24.602 50.707h49.204z"})),SvgActiveprinciple03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M185.987 23.31c0 .25-.25.881-.63 1.382-.5 1.26-.75 2.89-1.13 4.28-1.01 4.532-5.541 3.651-7.173 5.792v2.01c.38.501 1.26.752 1.89 1.26-.5.502-1.38 1.382-2.14 1.64-1.89.501-5.791 1.382-6.542 1.382-4.03 0-4.152-3.021-4.911-3.021-.38 0-2.52-.25-4.03-.25-.63 0-1.382.13-1.511.25 0 3.02-.38 5.282-1.64 8.812-.63 1.76-.88 3.271-.88 4.782 0 2.64 1.01 4.03.88 7.042-.25.76-.751 10.064-.751 13.715 0 1.13.13 2.261.25 3.65.13 5.913-1.64 9.063-1.26 15.105.13.5.88 1.01 1.01 1.51.13.25.13.38.13 1.13 0 1.762-.63 3.401-.63 5.162-.13 1.13-.13 2.261-1.01 3.271-.501 0-1.26.25-1.89.76-.25-.25-.63-.25-.88-.5v.129c0 .63 1.89 2.52 1.51 2.891-1.26 3.521-2.771 2.77-4.031 6.292-1.64 1.64-2.14 2.14-2.52 2.77-.76.63-5.032 1.51-7.173 1.51-1.01 0-1.89.13-2.77.13-1.89 0-3.021-.76-3.772-2.64-.25-.752-.13-2.771-.5-4.282-.13-1.38-.63-3.02-1.131-3.771-.63-1.381-1.01-2.77-1.01-4.402 0-2.641.76-5.161.88-7.423 0-.5-.63-1.26-.63-1.76.25-3.15.38-5.283.38-6.793 0-1.01 0-1.26-.13-1.76-.5-2.892-1.26-8.562-2.52-11.454-.25-.5-.129-1.01.501-1.26v-.13c0-1.51 1.51-2.39 1.01-3.65-.25.25-2.641 1.51-2.641 2.01 0-.88 2.64-3.02 2.52-4.03 0-.13-.13-.25-.25-.13 0-.5-.25-1.38-.751-2.52.25-2.77 2.77-8.812 2.64-11.574-.25-.25-.5-.25-1.26 0-.25-3.4-.379-5.912-.5-6.421l.13-1.51c-.38-.25-.63-.38-.88-.63 0 .129-.13.129-.13.129-.38 0-.38-4.402-.76-3.02 0-.501-.25-.881-.5-.881-.76 0-2.14 1.89-2.892 1.89-.25 0-.38-.25-.38-1.01l-.63.25c-.38.25-.75.38-1.26.38-1.64 0-3.9-1.01-5.282-1.01-1.26 0-2.77-.25-3.521-.63.13 0 1.89.25 2.14 0-.5-.38-1.38-.5-2.39-.5-3.772-.38-7.173-4.402-7.803-9.183-.25-.25-.25-.25-.88-.25-.5 0-.5.5-1.13.63-1.382.38-2.012 2.89-2.642 3.771-.25-1.26-.63-3.521-.63-4.531.13-2.14.5-3.021 1.64-3.901 0 .13.25.25.38.25.5-.38.88-1.13 1.26-1.64l-.75-1.38c-.502.379-.881 1.009-.881 1.51v-.13c0-.5.38-1.26.88-1.76-.25-.25-.25-.38-.25-1.01.13-3.401 2.52-1.89 6.162-4.402.63-.5 3.522-1.381 4.531-1.381.501 0 6.543 1.26 7.173 1.51 2.64-1.38 6.292-2.01 11.453-2.01 4.151 0 8.553.379 12.333.379 7.173 0 14.846-3.142 23.407-3.142 1.26 0 2.262 0 3.651.25.13-.25.5-.5.751-.38 2.14.631 3.271 2.521 4.911 3.902 2.39 1.89 4.402 5.032 6.922 8.053l-.25.25c.112.12.613.242 1.113.242zm-80.785 3.272c-1.38.25-2.261 2.77-2.64 3.4.759-1.26 2.01-2.64 2.64-3.4zm-2.261 1.39c.25-.501.25-1.131.38-1.64-.63 2.52-.38 1.38-.38 1.64zm1.001-2.65c.25.25.5.63.88.63l.13-.38c-.25 0-.751-.12-1.01-.25zm.63 4.28c.13-.129.5-.25.63-.25 0 .25-.63.5-.63.25zM127.1 68.235c0 .25.25.76.13.88h-.63c.25 0 .5-.5.5-.88zm2.52 10.444c0 .13.25.88.25 1.38-.25 0-.63-.5-1.38-1.51-.251.5-.251 1.01-.76 1.51v-1.13c0 .13.13.25.25.63v-.25c0-1.01-1.01-2.261-.13-3.142h.13c.63 0 1.13 1.26.75 2.011.26.25.64.5.89.5zm-1.14-18.876h.501l-.13 1.51c-.5.501-.88.63-1.01.13 0-.13-.129-.25-.129-.38.018-.38.268-.76.769-1.26zm.89 2.641v.25c0 .501-.25 1.131-.501 1.381 0 .38-.25.63-.63.38a.97.97 0 0 1 .13-1.26c.742-.872.871-1.001 1-.75zm-1.01 10.953h.5l.13 1.13h-.751c-.259-.25-.259-1.01.12-1.13zm.88-12.204.38-.751h.38l-.38.88-.38-.13zm0 3.012h1.26c0 .25-.38.76-.38 1.01 0-.25-.129-.63-.38-.88-.37 0-.5 0-.5-.13zm.25 10.573c.751.88.88 2.77 1.26 4.401-.25-1.13-1.01-2.01-1.13-3.4-.13.13-.25.5-.25.88 0-.241-.13-1.881.12-1.881zm0-15.855c.13-.13.25-.38.25-.5 0 .5-.63.75-.25.5zm0-.88c0-.13 0 0 .38-.881 0 .13 0 .25.13.25-.13.13-.26.38-.51.63zm.38-.881c.25-.88 1.64-3.65 1.64-3.901.12.38-.51 1.89-1.64 3.901zm.121-13.214c.38-.25.5-.25.63-.13.13.38-.371.38-.63.13zm.38 49.585.38.129-.38.63-.38-.13.38-.63zm1.76-49.706h-.5l-.13 2.52h.501l.13-2.52zm42.913-31.339-1.01-.25v.38l.88.25.13-.38zm88.759 85.195c-.13 3.4.25 4.652-1.01 5.161-1.51.63-3.4.25-5.282.25-3.9 0-3.27.76-6.162 1.01-1.76.25-4.781.88-6.792 1.26l-8.813 1.51c-.25.13-.25-.379-.75-.379.38.13-.38-.13-.76-.13-.88.38-1.64.13-2.39.13l-.63.5c.379.13.88.251 1.63.251-.13.13-.88.5-1.26.63.5.25 1.13.5 1.761.5.25 0 1.38.13 2.39.13.76.13 1.26 0 1.89 0 .501 0 9.184-.88 9.693-.88.501 0 .63.63 1.26.63h.13c.25-.38 1.26 0 .88-.63.13 0 .38.25 2.262.25v-.5l4.91-.38c-.88.13-1.76.38-2.26 1.01h-1.382l.13.25c1.26 0 2.52.25 3.521.38-1.38 0-2.39.13-3.4.25 0-.13 0-.13.13-.13-1.64-.25-3.902.13-7.044 1.01.88.13 1.632.25 2.262.25 2.14 0 4.781-.38 8.182-.759-3.522.63-9.063 1.51-9.693 1.51-.5 0-.88-.5-1.26-.5-.5 0-3.142.88-4.652 1.13-1.38.13-3.271.13-4.652.38-1.51.13-3.02.38-4.402.751-7.932 2.011-16.735 2.77-24.287 4.782-.88.13-2.891.38-3.651.38-2.52 0-2.14.38-6.542-1.26-.63-.13-1.89-1.131-3.4-2.642-3.022-2.52-5.162-6.542-5.162-10.193 0-2.261.63-5.411 1.26-6.421.38-7.172 3.271-17.366 3.901-24.037 0-.76 1.01-5.792 1.01-6.292 0-1.26-2.011-3.271-2.52-4.281-.63-1.01-1.13-3.02-1.13-4.782 0-4.652 3.65-7.301 3.65-8.933l-.25-4.401c-.13-.88-.5-2.011-1.13-2.892-.251 0-.752.25-1.01.501.25-.38.25-.88 0-1.51-.38-.13-.63-.63-.76-.88-.63-.881-.751-2.012-1.26-2.642-2.641-4.151-2.391-3.65-2.391-5.282 0-2.01.75-3.521 3.772-7.552.63-.76 2.14-1.51 2.89-2.261.881-.88-.129-2.641 2.262-3.522 3.651-2.01 7.673-3.521 11.704-4.652.25 0 .5-1.51 2.52-.75 3.15.38 4.03.5 6.042.5 7.422 0 13.964-1.26 29.949-1.26 7.422 0 12.454 1.51 13.844 4.151.5 1.26 1.13 3.772 1.13 4.911 0 6.163-8.933 4.03-9.942 6.922 0 .25.5.5.88 1.01V31c-1.26.38-2.77 1.01-4.152 1.762-.129 0-.5-.25-.63-.13-.63.38-1.38.38-1.76 0-1.51.38-3.021 1.13-4.532.88-.38 0-12.583 2.011-12.963 2.011-.63 0-1.76.13-2.641.13.38 0 .76-.13 1.13-.5h-.129c-.5.129-.63-.13-.88-.38-.88.25-2.011.759-2.641.759-.13 0-.501-.63-1.381-.38.76.5 1.13.5.63 1.64-.13.13-.25.25-.13.38 1.51-.38 3.651-.38 6.042-.76.13-.13-.25-.38-.76-.38.13 0 8.554-1.38 11.833-1.38.63 0 1.131.13 1.26.25.88 0 2.641-.5 3.272-.5.5 0 1.01.63 1.38.759-1.51.88-15.224 2.77-16.735 3.02v.501c-1.38.63-2.64 1.131-3.772 1.761h-1.63c-.501 0-.881.13-1.64.38.63.13 1.26.13 1.89.13-.501 0-1.01.379-3.272.379l.25.63c.13 0 .63-.25 1.131-.25-.88.63-1.89 1.01-1.76 2.14-.76.13-2.641.25-3.15 1.381-.13 0-.13.13 0 .25.759-.129 2.39-.25 3.771-.25.5 0 1.26-.5 1.89-.63 1.26-.38 4.911-.76 9.693-1.01-1.76.5-4.402 1.13-5.282 1.26-.5 0-1.381.38-2.011.63v.13c.13 0 .25.13.25.13.38 0 .75-.25 1.13-.25l.38.129c-.76.129-1.38 0-2.01 1.01.25.25.5.38 1.26.63 1.64.25 7.672-.25 11.323-.25 1.76 0 2.011 0 2.391.129.63.76 2.011 1.64 2.891 2.26.38.251 1.89 4.031 1.89 4.653 0 3.271-2.52 6.162-5.79 6.672-.251 0-.63.25-1.131.25-.63.25-1.381 1.13-1.64 1.76.25.13.25.25.38.25.88 0 2.01-2.01 3.141-2.01.5 0 1.26.38 1.89.63.25.13.38.76.13 1.13.63.501-5.541 2.262-5.032 2.771-.38.38-.25 1.26-.76 1.76-.38.38-1.26.501-1.51 1.26l-1.381-.25c0 .13-.13-.25.75 1.382-.63.38-1.639 1.64-2.77 1.76-1.26.13-2.52.13-3.65.13-4.402 0-4.782-1.01-8.183.88-2.14.76-4.53 1.51-4.151 3.142.25.76 0 3.15 1.76 3.15.63 0 8.053-.13 12.714-.38 1.76-.13 3.4-.38 5.032-.38 3.4 0 4.91-.5 6.041 0 .63.25.25 1.51-1.26 1.761-4.28.76-9.062 1.89-11.453 2.011-1.38 0-2.891.38-4.652.63-.25.25-.63.38-1.01.38-.63 0-1.38-.25-2.14-.13h-.13c-.5 0-.76-1.38-1.01-.759-2.26.88-2.52.25-3.52 1.26.25.5.129.63.379.76 1.26-.38 2.52-.63 3.27-.63 0 .129.13.25.13.5l.501 1.13c-.13-.129-.25-.25-.38-.25l-.13-.38v.251l-.129.13c-.38-.38-.76-.501-1.38-.501-.63 0-1.64.76-1.64 1.38-.501 0-.76 0-1.01.13.38.25.38.38.63.5 1.38.13 2.64.251 3.27.13l.251-.25c.38 0 .5 2.39 1.13 2.261l.251.25c3.901-.63 7.423-1.38 10.694-2.26-.38.129-1.01.63-1.51.759-1.01.25-2.642.38-3.651 1.26h-.13l.5.13c.501 0 1.26-.25 1.64-.63l22.398-.76c.5 0 2.39.5 2.891.5.63 0 .63-1.26 1.89-.5 1.26.13 1.76 1.01 3.021 1.51.5.5 1.13 1.381 2.011 1.89.76 1.26 3.142.501 3.142 3.021.38.88.76 2.14 1.01 2.641.785 1.468-1.226 1.347-1.356 1.597zM220.02 84.59l.25.38-.13.13c-.129.129-.129-.13-.25-.63.13 0 .13 0 .13.12zm.25.38.13.25c-.13 0-.13-.12-.13-.25zm.121-.121c.13.13.25.25.25.38l-.25-.38zm.25.371.13.38v.38l-.38-.76h.25zm0 0c.25 0 .5-.13.63 0v.38l-.13.38c.01.12-.24-.25-.5-.76zm1.64-.5c.25 0 .751-.13 1.13 0l-.5.25c-.25-.121-.38-.25-.63-.25zm2.011-1.26h-1.38v-.38h1.38v.38zm0 1.13-.63-.25.13-.38.63.25-.13.38zm2.02 3.65-2.52.38v.25l2.52-.379v-.25zm-1.51-5.03v-.38l1.01.25v.38l-1.01-.25zm7.293 3.02h-.13.13zm1.01-20.766 3.4.76c-.13-.76-.13-.13.38-1.26-1.64.25-2.78.25-3.78.5zm3.141 1.51h-.88c-.63 0-1.01 0-1.26.13.25.13.38.13 1.01.13.38-.01.759-.13 1.13-.26zm-1.252 19.006v-.38l1.89-.25v.38l-1.89.25zm2.391-.88c1.13 0 2.641-.251 3.772-.251-.76.13-1.76.38-2.641.38-.38-.009-.76-.009-1.13-.13zm3.142-4.411c.38 0 .76.13.88.25-.5.009-1.13-.25-.88-.25zm.38 28.818.76.25.129-.38-.88-.25-.01.38zm.5-29.19 2.391.251v.25l-2.39-.13v-.37zm2.77.372.251-.5.38.129-.38.38h-.25v-.01zm.752-.622h1.64v.38h-1.64v-.38zm.509 29.06h1.13v-.38h-1.13v.38zm2.132-77.004.38.25.5-.75-.38-.251-.5.75zm5.29 76.754h.501-.5zm6.413-2.01c-.88 0-1.76 0-2.52.129 1.13-.25 2.39-.13 3.142-.13h-.622zm1.14-80.536c.88.501 1.51 1.131 2.14 1.761-.38.38-.88.63-1.26.63-1.381 0-3.15-1.38-2.641-2.01l1.76-.38zm19.427 73.234c-.38-1.26.38 4.53-.501 4.03-2.14-1.01-2.641-1.89-2.641-3.9 0-.38.38-2.141.88-2.892.63.38 1.131.76 1.26.5-1.13-1.38-3.02-2.14-3.02-4.151 0-.76 1.13-1.381 1.13-2.011 0-1.01-1.13-3.4-1.76-3.901-1.01-1.01-1.01 2.14-1.01 2.77 0 1.26 2.261 5.912 2.14 8.683-.38 1.13-3.771-4.782-3.771-9.693 0-4.652 1.38-3.771 1.38-6.292l.501-27.938c.13-6.041-5.412-38.131 10.573-42.282 2.891-.38 3.02.5 3.65.63 3.401 1.01 5.412 0 8.053 0 6.793 0 7.173 11.453 7.173 15.855 0 2.14.76 6.162-.63 7.802-2.14 2.261-3.021 5.411-3.021 11.453l-.38 9.693c0 8.682 1.64 15.354 1.64 17.115v8.682c0 1.89 1.89 4.281 1.89 8.812 0 .76-.25 2.641-.25 11.574 0 7.423-4.03 12.205-9.693 12.205-6.671-.01-12.083-7.682-13.593-16.744zm21.637-53.978c0-1.51 1.01-3.4 2.011-2.52.25.63.38 1.01.38 1.76s-.88 4.031-1.51 3.522c-.501-.25-.88-2.132-.88-2.762zm1.89 10.564.25-.75c.501-1.01 1.131 1.51.76 2.14-.25 0-.38 1.51-1.01.38-.12-.51 0-1.26 0-1.77zm.501 5.662c-.38-1.38.38-1.01.76-.13.5.88 1.63 1.01 1.63 2.012 0 1.89-1.38 1.89-1.76 1.38-.371-.742-.25-2.502-.63-3.262zm93.965 54.997c.25-1.382 1.26-.881 2.14-2.262.13-.13.13-.25.13-.38 0-1.01-2.391-1.26-2.892-1.76-.5-.38-.76-1.761-1.26-2.52-.63-1.01-2.52-2.521-3.02-2.521-.501-.13 0 .13-.501.13-.63-.13-1.89-1.64-2.14-2.391-2.892-4.532-7.933-13.344-8.433-13.465-.5 0 0 .25-.63.13-.38 0-5.162-2.011-7.932-3.02-1.01-.38-1.89-.13-2.891-.251-.13.13 4.151 1.01 3.27 1.76-.129.13-.38.25-.63.13-1.01-.5-3.02-1.26-3.52-1.26a29.203 29.203 0 0 0-4.653-.38c-3.141 0-5.411.5-7.552 1.76-1.01.63 1.01 1.64 3.651 1.761.25.25-.38.751-.76.88-.759-.129-1.64.13-2.14 0-.25-.129.38-.379.25-.63-.13-.129-.25-.129-.38 0-.38.251-.25.881-.63 1.131s-.88.38-1.38.38c-.63-.13.5-.38-.13-.5h-.38c-.5 0-1.13-3.401-1.64-3.021-.25.13-.25 1.01-1.13 1.51-.25.25.25 0 .63 0 .25.13-.13.5-.63.76-1.631.38-1.13 0-2.261.38-.38 0 .25-.38.129-.63l-.88-.13c-.25.13.25.63 0 .76-1.01.759-2.77 1.01-4.152 1.51v.13c2.011-.251 4.152-.76 6.422-1.26-2.262.5-6.793 2.14-7.302 2.14-.5-.13.13-.5-.38-.5-.5-.13-3.65 1.13-5.541 1.51-1.51.5-4.911.25-5.412 1.89-1.76 7.051-4.151 11.574-6.792 12.713-.38.25-1.26 1.89-2.011 2.77-.63.76-2.261 2.011-3.4 2.642-1.382.759-4.782 1.26-6.793 1.13-4.402-.63-6.672-3.4-6.672-7.802 0-3.15-3.65 4.781 4.402-9.442.38-.76.63-1.51.63-2.391s-.25-1.76-.13-2.261c.501-2.641 1.64-5.412 2.642-8.053 4.401-11.954 6.421-15.605 9.813-23.528 1.01-2.261 2.52-5.411 3.271-7.802.13-.38 1.01-1.01 1.13-1.381 1.511-3.271 3.142-6.542 4.402-9.563.38-.88 1.51-2.641 2.14-3.901 3.902-7.803 7.052-14.845 12.585-20.887.63-.76 2.261-1.51 3.27-1.51 0 .129.13.25.251.129.63-.76 1.01-2.011 1.64-2.77.63-.76 1.51-1.64 2.261-2.642.25-.38.25-1.01 0-1.01-.38.881-1.01 1.511-1.76 1.761-.38.13.5-.63.5-1.13 0-.13-.13-.25-.25-.25-.38 0-.88.25-1.01-.13s1.381-1.51 2.77-2.011c.38-.13.881-.5 1.382-1.01.129-.13 0-.5.129-.63 3.15-1.13 4.531-1.76 6.292-1.76.76 0 1.51.129 2.39.25.501.13 3.272 2.64 3.902 2.77.5.13.13-.25.63-.13.25 0 1.64 2.262 1.64 2.771.63 2.52-.63 4.911-1.01 7.302-.13.63-1.64 2.011-1.76 2.52 0 .5.63 1.26.63 1.76-.251 1.762.25 3.652 1.51 5.412 1.38 2.011 3.65 4.402 5.411 6.543 3.4 4.28 6.422 8.812 9.313 13.084 2.891 4.531 4.782 9.434 6.672 13.085.13.25.5.129.76.25.25.13-.38.25-.251.5 0 1.26.75 2.262 1.51 2.14.13 0-.63-.759-.38-1.38.13-.25.88-.25.88-.13.13.25.13.501.13 1.51v1.762c0 1.01 0 1.26.13 1.64s1.01 4.652 1.51 5.16c.38.251.76 1.131 1.13 1.89.13.251.13.752.38.631.501-.13.13-1.01.63-1.01.63.38.13 5.032 1.511 5.282 1.64.76 3.901 8.182 5.912 12.204v-.13c0-.25-.13-.63-.13-1.009 0-.5.251-.88.63-1.01 1.261-.25 1.64 3.271 1.132 3.772-.25.25-.63-1.01-1.26-.5-.25.25-.38.75-.38 1.26 0 .63.25 1.76 1.13 4.15.13.38.13 0 .38-.129.5-.129-.13-1.13.13-1.26.25-.13.5-.25.76.13.25.38.5 1.38.5 1.89-.13 1.13-.5.25-1.761 1.51-.38.501-.63 1.131-.76 1.89-.129 1.131-.5 2.262-.88 3.772v.25c0 .76 1.89.88 2.52 1.64 1.381 1.64 1.26 2.262 1.131 3.401-.13.5-.5 3.02-1.13 4.151-1.01 1.51-3.522 2.892-4.653 2.52-.38-.25.13-1.26-.25-1.38-.13 0-.25-.13-.38 0-.5.5-.38 1.76-1.01 1.51-2.26-.656-5.411-.405-5.031-3.297zm-48.195-46.936c.88 0 2.77-.38 3.27-.76 3.522-.88 9.434-2.14 14.095-3.02.13 0 .38-.13.38-.25 0-.25-1.01-1.131-.76-1.131h.38c1.51 0 1.01.75 1.64.63.13 0 .25-.38.25-.5 0-.501-.5-1.26-.38-1.64.13-.88.25-1.381.13-1.89 0-.38-.25-.76-.13-.88.38-.38 1.761-.251 1.51-.76-.75-1.51-2.14-2.391-3.02-3.272-.25-.25-.25-.5-.13-.63l.25-.25c.38-.25.63.25 1.01.38.501 0 2.012 5.282 3.272 4.03 1.26-1.13-1.26-3.52-2.14-4.53-.251-.38-.76-.38-.881-.501-1.01-1.51-1.76-3.4-2.891-4.402-1.51-1.89-5.032-4.782-6.042-4.911-.63 0-1.76.25-2.14.75 0 .13 0 .63-.13.76-.25.25-.76.13-1.01.38-1.01 1.89-2.891 4.03-3.27 5.161-1.261 3.651-3.773 10.064-3.773 10.323-.88 1.89-.5 3.901-.76 5.912.13.63.76 1.01 1.01 1.01h.26v-.009zm-1.01-50.594.13-1.01c.129-.88 1.38-2.52 2.52-3.141.5-.13 1.38-.76 1.51-.501l-.5.88c-.251.25-.63.63-.76 1.01-.25.38-.13 1.13-.38 1.64-.38.5-.76 1.381-1.64 1.64-.25.112-.621-.518-.88-.518zm4.781-3.392.38-.75.25.129-.38.76-.25-.139zm4.41-4.151c-.25.13-.129.5.13.63.242.12.5-.88-.13-.63zm1.511-.13v-.38l-.5.13-.13.38.63-.13zm3.901 83.936c2.14 0-.5.76-3.141.88-1.27.25 1.501-.88 3.141-.88zm.88-35.361c-.25-.13-.38-1.13-.129-1.13.38-.13 1.26-.251 1.64-.251.5.13 1.381 1.13 1.64 2.01a1 1 0 0 1-.25.63c-.64-.129-1.77-.759-2.9-1.26zm1.252 34.98v-.379l.76.13v.38l-.76-.13zm1.14-.12v-.25h.63l-.13.38-.5-.13zm.75-37.63h.13c.5 0 1.01.759.76 1.26-.13.38-1.14-1.26-.89-1.26zm2.77 5.54c-.129-.13-.25 0-.379 0 0 .38-.25 1.01 0 1.26l.38.13c0-.51.25-1.269 0-1.39zm1.01 31.46h-.129c0-.13 2.77 0 2.892-.5.129-.251.25-.251.5-.251.5 0 1.76.38 2.52.88.13.13-.5.38-.5.63-.13.25.88.38.63.38-1.89-.388-3.78-.638-5.912-1.14zm39.004.88c.13-.13.25-.13.38 0 0 .25.129.5-.13.76-.13.13-.25 0-.38 0-.12-.26-.12-.51.13-.76z"})),SvgActiveprinciple04=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M193.066 29.207h-14.002c-2.596 0-3.614 2.743-3.614 5.199v6.496c0 2.743-1.732 3.178-3.9 2.02l-11.408-6.496c-1.157-.723-2.307-.862-2.307-3.178v-1.733c0-1.733-1.01-2.308-2.456-2.308h-15.44c-2.743 0-4.189-1.445-4.189-4.188v-7.367c0-2.595 1.298-4.188 4.041-4.188h53.563c2.89 0 4.188 1.445 4.188 4.188v7.367c0 2.883-1.872 4.188-4.476 4.188zm-35.371 48.94V51.29c0-3.9 2.168-5.486 5.773-3.465l7.942 4.475c1.733 1.01 4.04 2.743 4.04 5.051v13.28c0 2.89-1.157 4.189-3.613 5.634l-8.377 5.05c-3.597 2.169-5.765.436-5.765-3.17zm13.862 36.381c2.456 0 4.041-1.445 4.041-4.04l-.148-18.914c0-4.04-2.168-5.338-5.633-3.178l-8.804 5.346c-2.308 1.445-3.318 2.595-3.318 5.338l.147 11.547c0 2.743 1.733 3.901 4.328 3.901h9.387zm40.711-84.311c-2.596-1.585-3.901-3.03-3.901-5.486v-7.366c0-2.596 1.733-3.901 4.04-3.901h43.454c2.168 0 3.9 1.733 3.9 3.9v7.795c0 2.308-1.732 4.04-3.9 4.04h-21.797c-4.911 0-6.784 1.446-8.081 5.051-.863 2.308-2.456 2.89-5.199 1.158l-8.517-5.19zm-3.894 54.573V43.932c0-1.88.863-3.03 2.456-3.03 1.158 0 2.02.575 3.318 1.298l7.942 4.91c2.595 1.586 4.04 2.456 4.04 4.912 0 2.308 1.01 2.89 4.328 2.89h14.586c2.743 0 4.04 1.298 4.04 4.041l.148 6.931c0 2.891-1.445 4.041-4.188 4.041h-14.725c-3.466 0-4.189 1.585-4.189 5.346 0 3.753-1.297 4.764-3.613 6.209l-8.369 5.183c-1.298.723-2.456 1.298-3.318 1.298-1.593 0-2.456-1.01-2.456-3.17zm25.698 14.003h21.796a3.884 3.884 0 0 1 3.901 3.9v7.795c0 2.307-1.733 4.04-3.9 4.04h-43.454c-2.308 0-4.04-1.733-4.04-4.04v-6.349c0-2.456 1.297-3.9 3.9-5.486l8.517-5.199c2.455-1.445 4.328-1.157 5.198 1.158 1.298 3.598 3.17 4.18 8.082 4.18zm60.222-81.428v6.496c0 3.318-1.01 4.476-3.318 5.921l-8.804 5.486c-3.466 2.168-5.634 1.01-5.634-3.178V17.365a3.884 3.884 0 0 1 3.9-3.901h9.815c2.308 0 4.04 1.733 4.04 3.9zm-5.774 63.96c3.606 2.168 5.774.435 5.774-3.179v-32.48c0-3.902-2.168-5.634-5.774-3.466l-8.951 5.486c-2.168 1.297-3.031 2.595-3.031 4.91V70.5c0 2.89 1.158 4.188 3.606 5.634l8.376 5.19zm5.774 29.302c0 2.168-1.733 3.901-4.04 3.901h-9.823a3.884 3.884 0 0 1-3.9-3.9V91.425c0-4.188 2.167-5.346 5.633-3.178l8.804 5.486c2.308 1.446 3.318 2.596 3.318 5.921l.008 10.972zm14.313-2.02 4.328-20.359c.87-4.328 1.881-6.06 5.199-8.081l10.972-6.497c3.9-2.307 5.634-2.89 9.1-2.89h6.348c3.03 0 4.763-1.88 4.328-5.051l-3.318-22.667c-.435-2.595 0-3.753 2.596-5.198l6.783-3.754c3.03-1.732 5.051-1.297 5.774 2.168l9.962 48.365c.722 3.465-1.585 4.475-3.03 4.475-2.456 0-13.864-4.328-22.38-4.328h-7.359c-5.05 0-7.071 1.446-7.941 5.774l-3.606 19.776c-.575 2.89-2.168 4.188-5.486 4.188H312.5c-3.753 0-4.763-2.02-3.893-5.92zm8.804-45.046 10.972-46.484c.288-1.297 2.168-3.613 4.911-3.613h18.191c2.891 0 4.189 1.298 4.189 3.9v2.169c0 2.89-1.158 4.188-3.606 5.486l-8.229 4.328c-2.743 1.445-3.466 3.466-4.04 6.209L335.897 52.3c-1.586 6.644-1.298 6.784-5.774 9.527l-8.081 5.051c-3.474 2.168-5.502.435-4.632-3.318zm39.848 46.779-1.733-9.814c-.435-2.743 1.01-4.189 4.188-3.466l10.11 2.455c3.178.723 4.763 1.733 5.338 4.911l1.01 6.21c.436 2.89-1.01 3.9-3.465 3.9h-9.814c-3.179-.008-5.059-.73-5.634-4.196z"})),SvgActiveprinciple05=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M131.96 114.562V28.269c0-3.503 1.885-5.396 5.396-5.396h14.83c3.503 0 5.396 1.885 5.396 5.396v2.563h21.442c1.215 0 2.02.813 2.02 2.02v4.047c0 1.215-.814 2.019-2.02 2.019h-21.45v70.248c0 1.751.947 2.698 2.698 2.698h2.698c1.751 0 2.698-.947 2.698-2.698V80.443c0-3.502 1.885-5.396 5.396-5.396h14.83c3.503 0 5.396 1.886 5.396 5.396v34.11c0 3.503-1.885 5.397-5.396 5.397h-48.546c-3.503 0-5.388-1.886-5.388-5.388zm68.757 0V36.354c0-3.502 1.885-5.396 5.396-5.396h53.934c3.502 0 5.396 1.885 5.396 5.396V69.66c0 3.502-1.885 5.396-5.396 5.396h-33.708v39.506c0 3.502-1.885 5.396-5.396 5.396h-14.83c-3.511-.008-5.396-1.894-5.396-5.396zm39.104-47.6V41.75c0-1.751-.947-2.698-2.698-2.698h-8.086c-1.751 0-2.698.947-2.698 2.698v25.212h13.482zm0 47.6v-23.46c0-3.503 1.885-5.397 5.395-5.397h14.831c3.502 0 5.396 1.886 5.396 5.396v23.461c0 3.502-1.885 5.396-5.396 5.396h-14.83c-3.511-.008-5.396-1.894-5.396-5.396zm43.142-106.52h14.83c3.503 0 5.397 1.885 5.397 5.396v4.047c0 3.502-1.886 5.396-5.396 5.396h-14.831c-3.502 0-5.396-1.885-5.396-5.396v-4.047c0-3.51 1.885-5.396 5.396-5.396zm0 22.925h14.83c3.503 0 5.397 1.885 5.397 5.395v78.2c0 3.502-1.886 5.396-5.396 5.396h-14.831c-3.502 0-5.396-1.885-5.396-5.396V36.354c0-3.502 1.885-5.387 5.396-5.387zm32.359 83.595V80.443c0-3.502 1.885-5.396 5.396-5.396h33.708V41.75c0-1.751-.947-2.698-2.698-2.698h-5.396c-1.751 0-2.698.947-2.698 2.698v14.428c0 3.503-1.885 5.396-5.396 5.396h-14.83c-3.503 0-5.396-1.885-5.396-5.396V36.354c0-3.502 1.885-5.396 5.396-5.396h51.236c3.502 0 5.396 1.885 5.396 5.396v78.2c0 3.502-1.885 5.396-5.396 5.396h-14.83c-3.503 0-5.396-1.886-5.396-5.396V83.14h-10.784c-1.751 0-2.698.947-2.698 2.698v28.723c0 3.502-1.885 5.396-5.396 5.396h-14.83c-3.503-.008-5.388-1.894-5.388-5.396z"})),SvgActiveprinciple06=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{d:"M144.624 108.848h-34.23c0-3.36-.17-6.71 0-10.24 0-1.85 1.51-11.07-2.18-11.24-5.7 0-11.58 0-17.11.17-6.54.17-12.92.5-19.3.67-7.89.5-15.94 1.17-23.83 1.17 0-3.02.34-5.87.34-8.72.17-4.7 0-9.06-.34-13.76 0-1.68.17-3.02.17-4.7 0-4.03 0-8.22-.17-12.58 0-2.52-2.01-13.93 2.68-13.09 2.85.67 5.87.34 9.06.34 2.52 0 5.03-.17 7.89 0 1.01 0 2.35.5 3.52.5 2.18 0 4.87-.67 6.88 0 4.36 1.51 9.06-.17 13.09 1.17 4.19 1.34 8.05 0 12.08.84.84.17 1.68-.5 2.68-.84 0-2.52-.34-5.2 0-7.89.5-4.19 1.01-9.56 1.01-13.76 0-2.52 0-5.03.17-7.72 2.18 0 4.36-.17 6.54 0 4.03.17 8.05.67 12.08.84 2.68.17 5.54-.34 8.05.17 4.03.84 7.72.67 11.58.5.5 0 1.34.84 1.51 1.51.17 2.35.17 4.53.17 6.88.17 2.68.34 5.54.17 8.22 0 2.01-1.01 3.86-.67 5.54 1.01 2.85-.34 5.54 0 8.22.17 1.17-.17 2.52-.17 3.69.17 1.85.17 3.86.17 5.7 0 3.86-.5 7.72-.5 11.41 0 1.51.34 3.02.17 4.53 0 1.68-.84 3.19.34 4.7l.17.67c-2.01 1.85-.17 4.19-.5 6.38-.84 3.19-.84 6.38-.5 9.56 0 1.17-.67 2.52.17 4.19.5.84-.34 2.85-.5 4.36-.17 1.34-.34 2.85-.34 4.36v7.38c-.02.36-.19.7-.35.87zm119.96-25.84c-.33 2.01-1.01 4.2-1.34 6.21-.17 1.68 0 3.19 0 4.7-.17 1.85-.5 3.52-.67 5.2 0 .17.17 7.72-.34 11.91-.17 1.85-.17 4.36-.17 6.54-.17 0-.33.17-.33.17-5.54-.5-11.07-.84-16.61-1.17l-11.24-.5c-4.03 0-8.22-.67-12.08-.5-12.25.34-24.5.84-36.91 1.01-5.03 0-10.23.34-15.44.5-6.38 0-2.52-11.41-2.52-15.77 0-4.7-.67-9.4-.67-14.09 0-1.34-.5-2.52-.5-4.03 0-2.18.34-4.03.17-6.04 0-1.34.5-4.7.34-6.04 0 0 .5-6.04.34-6.04 0-4.19 0-8.39.17-12.58.17-4.03.67-8.22 1.01-12.08.5-4.36-1.01-9.4 0-13.76.67-2.68-.34-5.87-.5-8.89 0-2.35.34-4.7.5-7.21h24.5c.84 5.03.5 8.56.5 13.26 0 2.18.5 4.03.67 6.04-.17.5-.67 10.91-.84 14.77 0 1.01-.84 2.01-.84 3.19.17 1.51.34 3.19.84 4.87 0 .34 1.17-.17 1.85-.17 1.85 0 6.71-1.85 8.05-2.01.17-1.51.33-3.19.33-4.87-.33-1.51.67-7.72 1.01-9.56 2.85-1.51 6.88-.5 10.07-1.17 1.68-.34 3.36 0 5.54.17-.34 2.18-.5 4.36-.67 6.38-.17 1.34.33 2.35.17 3.69-.33 4.53-.67 11.24-.84 11.91l.17 3.19c-.17.5 0 1.17.34 1.51.17.17.84.17 1.17 0 5.2-2.35 10.4-5.03 16.95-4.53 0-3.69-.17-7.21 0-10.74.17-1.85 1.01-3.69 1.01-5.54.17-1.68 0-4.03 0-5.37 0-4.03.67-7.05.34-10.91-.34-3.02-.5-6.21-.67-9.23-.17-.84 0-1.68.17-2.68 8.56-.17 17.45-1.01 26.34.17-.34 2.85-.5 5.37-.67 7.89-.67-1.85.84 13.42.84 16.44 0 1.01.5 4.19.17 5.03 0 2.35.17 6.21.17 6.88.5 3.19.5 5.87.5 9.06.17 4.53.17 9.23.34 13.76 0 2.85-.5 5.7-.67 8.39-.21.79.12 1.8-.05 2.64zm-71.14-53.02v-.17.17zm76.01 64.59c2.52-4.19 5.71-8.72 8.05-12.92 2.52-4.03 4.53-8.39 6.88-12.25 4.53-8.05 9.56-16.11 14.09-24.16 2.52-4.19 4.53-8.89 7.05-13.09 1.85-3.36 4.53-6.54 6.54-9.9 1.85-3.02 3.52-6.21 5.2-9.4.5-.84.67-1.51 2.35-.5 3.86 2.35 8.05 4.03 11.91 6.21 6.21 3.19 12.08 6.71 18.12 10.07 2.01 1.34 4.19 2.52 6.21 3.86 1.01.67 1.68 1.68.84 3.19-4.36 7.05-8.22 14.26-12.42 21.81-2.68 4.36-5.37 8.56-8.05 13.09-3.19 6.21-6.71 12.75-10.24 18.96-2.18 4.03-4.7 8.05-6.88 12.08l-9.06 15.77c-13.57-7.55-27-15.1-40.59-22.82zm85.91 24.33c.17-3.69.5-7.05.84-10.57-.17.17-.33.17-.5.17 2.68-7.38 2.18-16.11 3.52-23.99.67-4.03 1.01-8.05 1.51-12.08.34-1.85-.17-6.21.84-7.72 1.34-8.39 1.68-16.78 3.19-25 1.51-7.89 3.02-15.44 3.86-23.49 25-2.85 50-5.54 75-5.54 1.85 8.39 3.86 16.61 5.7 25 1.68 7.72 3.19 15.6 4.87 23.49.17 1.01.17 2.18.33 3.19 0 .67.34 1.17.5 1.68 1.34 2.85 1.01 7.21 1.85 10.4.84 3.52.67 7.89 2.35 11.24.34 1.68.5 3.52.84 5.37 1.01 4.03 2.52 7.55 2.01 11.75 1.51 1.68 4.03 8.73.84 10.07-3.19 1.34-6.88 1.01-10.4 1.34-7.72.67-17.11 3.36-24.83 2.68-5.2-.5-5.87-7.21-8.05-11.75-.84-1.51-10.4-1.01-12.25-1.17-4.87-.67-14.43-3.86-18.96-.84-3.52 2.52-5.7 11.75-6.54 15.77h-26.52z"})),SvgBentameleon01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 1",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M98.428 58.82c-1.528.606-2.935.938-4.092 1.662-4.643 2.906-9.111 6.093-13.826 8.874-5.916 3.489-11.806 7.138-18.082 9.877-6.342 2.767-11.084.445-14.594-5.59-4.022-6.916-3.914-14.238-2.543-21.72 1.19-6.49 2.18-13.106 6.702-18.37 2.094-2.438 4.547-4.574 6.836-6.847l.664.396c.238 1.807.638 3.608.687 5.421.158 5.736-.193 11.313-1.697 17.027-1.304 4.954-.498 10.465-.433 15.727.006.456 1.562 1.388 2.2 1.244 1.653-.371 3.299-1.05 4.765-1.91 6.74-3.952 13.45-7.96 20.11-12.044 4.2-2.576 8.323-5.279 12.397-8.047.507-.345.667-1.425.697-2.176.09-2.214.032-4.435.032-6.652l1.065-.438c1.015 1.034 2.218 1.945 3.006 3.127 1.55 2.322 1.596 2.31 4.176.942 9.818-5.207 19.626-10.433 29.553-15.43 4.332-2.18 7.8-1.612 10.422 1.146 2.06 2.168 2.54 4.918 2.501 7.79-.01.833-.001 1.668-.001 2.791 3.414-1.541 6.548-3.117 9.805-4.387a154.007 154.007 0 0 1 11.983-4.125c1.375-.408 2.98-.064 4.478-.064.114.323.229.646.342.97-1.219.975-2.372 2.048-3.669 2.911-8.21 5.467-16.452 10.887-24.687 16.319-2.302 1.519-4.025 3.329-4.362 6.284-.09.796-1.585 2.184-2.155 2.058-4.272-.942-5.975 2.66-8.81 4.201l.106.82c1.664 0 3.333.092 4.99-.016 6.276-.41 12.55-.85 18.818-1.348 3.706-.295 6.671 1.154 7.766 3.956 1.173 3.002.066 6.098-3.046 8.298-2.427 1.715-4.83 3.484-7.376 5.014-4.618 2.775-7.377 7.133-10.13 11.449-2.898 4.544-2.35 9.416-.324 14.094 1.122 2.59 3.422 3.832 6.376 4.098 6.068.543 11.947-.56 17.707-2.068 9.143-2.394 17.298-6.93 24.15-13.285 3.126-2.9 5.573-6.78 7.49-10.624 2.702-5.425-.555-11.297-6.428-12.859-2.347-.623-4.613-1.553-6.97-2.113-1.788-.424-1.964-1.377-1.696-2.907.973-5.563 6.64-9.355 12.495-8.235 1.452.278 2.867.742 4.481 1.168 0-3.653.26-7.266-.06-10.83-.501-5.594.317-11.013 1.695-16.366.232-.902 1.708-2.17 2.475-2.084.901.1 2.231 1.403 2.38 2.339.888 5.587 1.453 11.222 2.199 16.833.346 2.603.856 5.186 1.293 7.777.49 2.897.93 5.804 1.482 8.69.858 4.491 1.571 9.026 2.748 13.438 1.562 5.85 3.37 11.645 5.34 17.374 1.473 4.284 3.594 8.257 8.123 10.45-.881-6.693-.354-13.221 1.111-19.69.354-1.558-.222-2.532-1.699-3.105-1.68-.652-3.318-1.42-5.012-2.033-1.876-.678-2.239-2.17-1.954-3.767.309-1.732 1.856-1.597 3.2-1.508 1.873.122 3.742.291 5.875.46.49-3.006 1.05-5.879 1.411-8.777 1.12-8.996 2.25-17.994 3.19-27.01.361-3.468.133-6.993.35-10.48.089-1.441.412-2.958 1.019-4.263 1.824-3.92 6.26-4.826 9.238-1.74 1.502 1.559 2.905 3.587 3.424 5.633 3.04 11.978 8.622 22.441 17.936 30.803 4.072 3.657 8.17 7.293 12.398 10.77.884.728 2.477 1.18 3.593.973 9.092-1.691 18.192-3.383 27.2-5.456 5.793-1.332 11.484-3.163 17.135-5.025 11.305-3.73 22.528-7.703 33.828-11.447 10.115-3.35 20.163-7.003 30.47-9.651 10.842-2.787 21.805-5.426 33.123-5.753 9.708-.28 19.23.715 27.857 5.489 10.266 5.68 15.804 14.365 15.885 26.18.015 2.226.002 4.453.002 6.515-3.98-4.475-7.971-8.75-11.723-13.22-6.915-8.238-15.935-11.305-26.48-11.368-13.339-.079-26.234 2.5-39.015 5.839-5.221 1.363-10.36 3.047-15.503 4.687-11.486 3.662-22.953 7.382-34.423 11.093-6.774 2.19-13.503 4.521-20.32 6.573-3.75 1.13-7.63 1.845-11.464 2.689-4.56 1.003-9.132 1.941-13.978 2.967 1.393.922 2.651 1.938 4.062 2.659 8.56 4.377 17.391 7.888 27.116 8.935 2.212.237 4.513 1.404 6.372 2.703 3.495 2.44 3.139 6.483-.468 8.84-2.649 1.73-5.582 1.998-8.608 1.617-8.984-1.13-17.526-3.822-25.407-8.14-6.782-3.718-13.174-8.127-19.848-12.046-1.504-.882-3.49-1.448-5.22-1.378-6.671.269-13.326 1.084-19.998 1.244-4.605.111-9.228-.521-13.844-.82-.925-.06-1.85-.112-2.874-.174-.856 4.867-1.705 9.578-2.507 14.3-.453 2.676-.806 5.37-1.257 8.048-.097.576-.415 1.118-.652 1.667-.323.756-.936 1.497-.954 2.255-.08 3.34-2.954 5.992-6.363 5.736-2.931-.218-5.143-1.696-7.089-3.751-4.199-4.434-7.244-9.551-9.393-15.217-.27-.711-.604-1.398-.912-2.106-3.163 2.805-6.029 5.782-9.329 8.172-4.855 3.516-9.985 6.666-15.066 9.87-2.57 1.621-5.219 2.966-8.46 3.19-1.52.105-2.844 1.937-4.43 2.371-3.164.87-6.44 1.365-9.685 1.925-6.538 1.126-13.082 1.083-19.246-1.489-5.92-2.47-9.657-7.282-11.233-13.295-.841-3.206-.823-6.823-.35-10.136 1.064-7.434 3.104-14.61 9.216-20.788-2.51-.113-4.246-.283-5.977-.253-5.016.09-9.681-.783-13.621-4.17-4.013-3.447-4.276-6.934-.764-10.846 5.528-6.156 11.964-11.219 19.09-15.42 1.928-1.136 2.857-2.448 2.448-4.731-.235-1.317-.043-2.708-.043-4.313-4.469 2.55-8.562 4.78-12.549 7.184-6.373 3.843-12.66 7.827-19.021 11.689-1.49.903-1.78 1.82-1.476 3.613 1.464 8.647 2.609 17.346 3.958 26.014.75 4.825 1.679 9.622 2.529 14.432.013.075.056.145.075.22 1 4.104-.497 7.529-3.606 8.253-2.845.663-6.8-2.309-7.306-5.941-1.133-8.148-2.172-16.316-2.929-24.505-.413-4.475-.159-9.008-.24-13.515-.012-.67-.21-1.34-.374-2.311h.005zm144.933-9.307c-1.559 7.927-3.116 15.854-4.792 24.382 8.263-.267 16.071-.521 24.47-.794-6.674-8.292-14.665-14.5-19.678-23.59v.002z"}),reactExports.createElement("path",{d:"M202.708 8.169c4.256.027 8.365 4.315 8.387 8.747.017 3.638-3.45 7.072-7.064 7-4.224-.085-9.461-4.885-9.435-8.649.026-3.894 3.722-7.127 8.112-7.098z"}))),SvgFakeart01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M44.592 9.85H16.068v19.256c0 4.36 3.554 7.914 7.914 7.914s7.914-3.555 7.914-7.914V25.72h12.696v84.516c0 4.359 3.555 7.914 7.914 7.914s7.914-3.555 7.914-7.914V25.678h12.696v3.386c0 4.359 3.555 7.914 7.915 7.914 4.359 0 7.914-3.555 7.914-7.914V9.85H44.592zm171.697 15.828c4.36 0 7.914-3.555 7.914-7.914s-3.555-7.914-7.914-7.914h-63.482v108.258h63.482c4.36 0 7.914-3.555 7.914-7.914s-3.555-7.914-7.914-7.914h-47.654V71.893h22.811c4.36 0 7.915-3.555 7.915-7.914 0-4.36-3.555-7.914-7.915-7.914h-22.81V25.678h47.653zm136.486 0c4.359 0 7.914-3.555 7.914-7.914s-3.555-7.914-7.914-7.914h-58.192c-4.359 0-7.914 3.555-7.914 7.914s3.555 7.914 7.914 7.914h21.203v76.602h-21.203c-4.359 0-7.914 3.554-7.914 7.914s3.555 7.914 7.914 7.914h58.192c4.359 0 7.914-3.555 7.914-7.914s-3.555-7.914-7.914-7.914h-21.203V25.678h21.203zm142.834 82.272-6.645-22.133v-.043l-21.033-70.253v-.042c-.043-.17-.127-.339-.17-.508-.042-.085-.042-.17-.084-.254-.043-.085-.085-.212-.127-.296a5.757 5.757 0 0 0-1.016-1.608s0-.043-.042-.043c-.127-.127-.212-.254-.339-.38a.743.743 0 0 1-.17-.212c-.084-.085-.168-.127-.253-.212-.127-.085-.212-.211-.339-.296l-.084-.085a6.999 6.999 0 0 0-1.524-.93c-.127-.043-.254-.128-.38-.17-.085-.042-.128-.042-.212-.085-.17-.084-.339-.127-.55-.211h-.043c-.042 0-.127-.043-.169-.043-.17-.042-.38-.084-.55-.127-.085 0-.212-.042-.296-.042-.17-.042-.297-.042-.466-.085-.127 0-.254 0-.38-.042h-1.186c-.17 0-.338.042-.508.085-.084 0-.169.042-.254.042-.211.042-.38.085-.592.127-.042 0-.127.042-.17.042h-.042c-.211.043-.38.127-.592.212-.043.042-.127.042-.17.085a1.976 1.976 0 0 0-.423.211c-.508.254-.973.55-1.439.889-.042.042-.084.042-.127.085-.127.084-.211.211-.338.296-.085.084-.17.17-.254.211-.042.043-.127.127-.17.212a2.738 2.738 0 0 0-.338.38l-.042.043c-.381.508-.72 1.058-1.016 1.65-.042.085-.085.212-.127.297-.042.085-.042.17-.085.254-.084.17-.127.339-.169.508v.042l-21.034 70.253v.085l-6.602 22.092c-1.27 4.19 1.143 8.59 5.333 9.86.762.212 1.523.339 2.285.339 3.428 0 6.56-2.2 7.576-5.629l4.909-16.42h30.387l4.909 16.42c1.016 3.428 4.19 5.629 7.575 5.629.762 0 1.524-.127 2.286-.339 4.147-1.27 6.517-5.67 5.29-9.86zm-35.296-27.72H449.86l10.453-34.83 10.453 34.83h-10.453z"})),SvgHeracles01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M325.757 62.199c3.089-5.395 8.111-13.246 11.088-18.418 2.307-4.093 6.028-6.064 10.046-3.572 4.874 3.051.93 6.437-1.042 9.265-4.8 6.772-18.194 24.333-18.194 24.333s.26 7.367 3.832 11.311c4.54 4.986 9.376 0 13.47-2.977 1.04-.78 1.785-1.6 2.715-2.567a39.6 39.6 0 0 0 2.344-2.641c1.303-1.638 2.568-2.903 4.502-1.414 2.344 1.748.075 4.316-.893 6.139-2.902 5.618-6.548 10.753-11.422 14.92-7.888 6.66-13.171 5.32-17.078-4.242-.93-2.344-2.381-7.255-3.423-10.157-4.39 6.51-5.916 9.487-9.45 12.576-5.693 5.06-11.944 9.487-19.534 6.436-7.367-2.976-7.479-10.901-7.479-17.598 0-12.986 4.205-24.631 12.092-34.938 4.316-5.618 9.6-10.38 17.488-8.743 7.59 1.6 8.408 8.52 10.008 14.548.335 1.525.335 2.38.93 7.739zm-5.432 5.32c-.93-5.804-1.153-7.33-2.418-10.567-3.386-8.446-8.297-9.19-15.292-3.423-7.218 5.954-11.609 21.73-8.67 30.473 2.233 6.623 6.065 7.516 12.093 5.172 6.623-2.568 14.399-14.623 14.287-21.655z"}),reactExports.createElement("path",{stroke:"#000",strokeMiterlimit:10,strokeWidth:.75,d:"M225.522 116.67c-10.232-.484-18.008-5.88-20.278-13.693-2.344-8.148.484-15.106 7.665-19.384.967-.596 2.158-1.042 2.828-1.526.297-.223.446-.67.26-1.005-.335-.855-1.042-2.492-1.6-3.757-4.278-10.046-.446-18.083 9.823-21.543 10.641-3.572 21.059.781 24.11 10.195.707 2.12 1.674 4.8-.67 6.25-2.381 1.489-4.353-.558-5.841-2.27-4.279-4.873-9.6-5.952-15.664-4.353-3.87 1.005-5.619 3.833-5.246 7.74.297 3.832 2.306 6.362 6.51 6.51.596.038 1.154 0 1.712.038 4.279.298 8.781.26 11.05 4.948.67 1.34.522 3.014-.706 3.907-3.907 3.014-8.26 1.972-12.316.484-4.762-1.749-9.376-3.61-13.32 1.116-2.232 2.679-2.046 5.879-.41 8.818 2.94 5.209 7.666 7.702 13.581 7.18 2.79-.222 5.507-1.599 8.26-2.231 2.01-.447 4.093-.447 5.247 1.748s0 3.907-1.452 5.284c-3.98 4.018-9.264 5.171-13.543 5.543z",className:"st0"}),reactExports.createElement("path",{d:"M233.708 45.381c-3.647-.037-4.019-2.344-2.902-4.614 4.241-8.966 8.632-17.933 13.245-26.751 1.228-2.27 3.832-3.647 6.66-2.195s3.237 4.427 1.935 6.622c-5.358 8.707-11.162 17.19-16.855 25.636-.483.744-1.45.967-2.083 1.302zm-18.715-7.069c-5.619.186-14.92-.335-33.859 1.228-22.026 1.86-25.3 15.7-24.593 28.016.148 2.493 3.72 2.903 4.39.484 2.865-10.604 8.893-16.594 25.375-17.078.67-.037 1.154.707.819 1.302-7.516 14.548-15.516 40.556-15.516 40.556-2.492 6.139 3.163 7.888 11.162 4.986 6.214-2.233 10.94-6.437 14.586-11.535 2.232-3.125-.745-6.808-4.242-5.246-2.084.93-4.093 1.749-5.655 2.27-.782.26-1.563-.484-1.34-1.302l8.632-28.426c.447-1.489 1.786-2.456 3.386-2.419l17.078.521c3.46 0 6.288-2.456 6.288-7.07 0-3.571-2.977-6.436-6.511-6.287z"}),reactExports.createElement("circle",{cx:258.971,cy:39.093,r:8.632}),reactExports.createElement("circle",{cx:282.374,cy:39.093,r:8.632}),reactExports.createElement("path",{stroke:"#000",strokeMiterlimit:10,d:"M269.315 56.246c-2.79-.856-5.767.706-6.623 3.497l-2.01 6.511-1.971 6.437-1.898 6.437c-.595 2.158-1.228 4.316-1.786 6.474-1.19 4.316-2.27 8.669-3.311 13.022-.26 1.116-.521 2.195-.744 3.312-.26 1.116-.484 2.195-.707 3.31-.484 2.196-.893 4.429-1.34 6.698-.26 1.414.186 2.94 1.414 3.907 1.712 1.414 4.279 1.19 5.693-.558l.335-.41c.744-.632 1.413-1.339 2.083-2.046.67-.707 1.302-1.451 1.972-2.195 1.265-1.488 2.419-3.014 3.61-4.54l3.422-4.539c1.154-1.488 2.233-2.976 3.237-4.316l.15-.223c.78-1.004.966-2.418.334-3.683-.856-1.712-2.94-2.382-4.65-1.526-1.117.558-2.01 1.563-2.903 2.195-.781.596-2.79 2.419-3.758 3.312.819-3.163 1.712-6.325 2.753-9.45 1.34-4.13 2.828-8.186 4.465-12.242a170.49 170.49 0 0 1 2.567-5.99c.447-.967.893-1.972 1.377-2.94l.707-1.45c.223-.484.52-.968.707-1.414v-.038c.149-.26.26-.595.335-.892a5.279 5.279 0 0 0-3.46-6.66z",className:"st1"}))),SvgHoroMox01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M245.989 35.521h-18.488v19.941h18.488v37.017h19.982V55.462h18.488V35.521h-18.488z"}),reactExports.createElement("path",{d:"M256 6.78c-31.567 0-57.2 25.673-57.2 57.24 0 31.567 25.673 57.2 57.2 57.2s57.2-25.673 57.2-57.2c0-31.567-25.673-57.24-57.2-57.24zm0 108.99c-28.54 0-51.79-23.21-51.79-51.79 0-28.54 23.21-51.75 51.79-51.75s51.75 23.21 51.75 51.79c0 28.54-23.21 51.75-51.75 51.75z"}))),SvgHoroMox03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M236.122 7.25H199.25v39.755h36.872v73.745h39.756V47.005h36.872V7.25h-76.628z"})),SvgIcecreamgreezer01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"m409.65 121.291-.325-113.038c0-1.422-.488-1.87-1.057-1.87h-61.882c-.569 0-1.057.488-1.057 1.87l-1.95 113.038c0-.203.488.285 1.057.285h14.586a1.05 1.05 0 0 0 1.057-1.057V91.102c0-.61.487-1.057 1.056-1.057h30.8a1.05 1.05 0 0 1 1.056 1.057v29.417c0 .61.487 1.057 1.097 1.057h14.465c.61 0 1.097-.488 1.097-.285zm-49.53-52.375V43.643c0-.61.487-1.056 1.056-1.056h30.799c.61 0 1.056.488 1.056 1.056v25.273a1.05 1.05 0 0 1-1.056 1.057h-30.799c-.569.04-1.056-.447-1.056-1.057zm-94.957-26.004h12.636c.61 0 1.056.488 1.056 1.056v42.014a1.05 1.05 0 0 1-1.056 1.056h-15.074a1.05 1.05 0 0 0-1.057 1.057v32.384a1.05 1.05 0 0 0 1.057 1.056h64.93a1.05 1.05 0 0 0 1.056-1.056V88.095a1.05 1.05 0 0 0-1.056-1.057h-14.75a1.05 1.05 0 0 1-1.056-1.056V43.968c0-.61.487-1.056 1.056-1.056h14.709a1.05 1.05 0 0 0 1.056-1.056V7.44a1.05 1.05 0 0 0-1.056-1.056h-62.451a1.05 1.05 0 0 0-1.057 1.056v34.375c0 .61.447 1.097 1.057 1.097zM183.37 7.4l-4.51 113.038a1.07 1.07 0 0 0 1.057 1.138h64.767a1.05 1.05 0 0 0 1.056-1.057v-18.325a1.05 1.05 0 0 0-1.056-1.056h-29.336c-.61 0-1.097-.488-1.057-1.097l.57-25.233c0-.569.487-1.056 1.056-1.056h30.392a1.05 1.05 0 0 0 1.057-1.057V54.33a1.05 1.05 0 0 0-1.057-1.057h-29.905c-.61 0-1.097-.487-1.056-1.097l.528-23.85c0-.57.487-1.057 1.056-1.057h31.206a1.05 1.05 0 0 0 1.056-1.057V7.44a1.05 1.05 0 0 0-1.056-1.056h-63.671c-.569 0-1.056.447-1.097 1.016zm-79.964 33.684 12.556.243c.61 0 1.097.529 1.056 1.138l-4.429 78.014a1.069 1.069 0 0 0 1.057 1.137h35.268a1.05 1.05 0 0 0 1.057-1.056l1.91-78.136c0-.568.487-1.056 1.056-1.056h16.537a1.05 1.05 0 0 0 1.057-1.056V7.44a1.05 1.05 0 0 0-1.057-1.056h-65.296a1.05 1.05 0 0 0-1.056 1.056l-.772 32.546a1.11 1.11 0 0 0 1.056 1.098z"})),SvgJeanSaucisse01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M257.748 21.861h-7.846v91.433h-6.749V37.107h-7.846v84.074h7.846v-.04h6.749v.04h7.846V60.158h24.027l16.669 61.226 8.05-.284-27.036-99.239h-21.71zm0 30.45V29.709h15.734l6.138 22.604h-21.872z"}),reactExports.createElement("path",{fill:"#FFF",d:"m298.281 121.628-.04-.162-16.628-61.105H257.95v60.983h-8.25v-.041h-6.302v.04h-8.253v-84.44h8.253v76.147h6.302V21.658h29.921l.041.163 27.117 99.523-8.497.284zm-40.777-61.673h24.393l16.669 61.226 7.643-.285-26.914-98.831h-29.19v91.432h-7.155V37.31h-7.44v83.668h7.44v-.04h7.155v.04h7.44V59.955h-.04zm22.36-7.44h-22.36v-23.01h16.059l6.301 23.01zm-21.913-.407h21.426l-6.058-22.197h-15.368v22.197z",className:"st0"}),reactExports.createElement("path",{d:"M317.633 105.488 290.679 6.575h-63.137l11.708 22.726 7.684-14.88h37.768l26.914 98.873 2.155 7.846h7.561l.163.041v-.04l.203-.732 1.952-7.156 13.538-49.64-7.562-2.073-11.993 43.948zM239.21 21.251l-5.651-10.976h11.302L239.21 21.25z"}),reactExports.createElement("path",{fill:"#FFF",d:"m321.617 121.425-.366-.081h-7.684l-2.195-8.01-26.873-98.71h-37.484l-7.805 15.124-12.034-23.376H290.8l.04.162 26.751 98.182 11.83-43.379 7.969 2.155-.04.203-15.734 57.73zm-7.725-.488h7.44l15.571-57.16-7.196-1.952-12.115 44.436-27.076-99.483h-62.65l11.384 22.076 7.562-14.636h38.053l.04.163 28.988 106.556zM239.21 21.7l-5.977-11.628h11.993L239.21 21.7zm-5.326-11.221 5.326 10.367 5.325-10.367h-10.651z",className:"st0"}),reactExports.createElement("path",{d:"M197.294 21.861v30.451h-15.001V14.096h-7.847v38.216h-7.602v7.846h7.602v61.023h7.847v-.041h46.062v-7.846h-46.062V60.158h15.001v30.491h31.061v-7.846h-23.214V60.158h23.214v-7.846h-23.214V29.708h23.214v-7.847h-23.214z"}),reactExports.createElement("path",{fill:"#FFF",d:"M182.496 121.384h-8.253V60.402H166.6v-8.253h7.643V13.893h8.253v38.256h14.595V21.658h31.467v8.253h-23.214v22.197h23.214v8.253h-23.214V82.56h23.214v8.253h-31.467V60.32h-14.554v52.688h46.062v8.253h-46.103v.122zm-7.846-.406h7.44v-.04h46.061v-7.44H182.09V59.954h15.408v30.491h30.653v-7.44h-23.213v-23.05h23.213v-7.44h-23.213v-23.01h23.213v-7.44h-30.653v30.49H182.13V14.3h-7.44v38.257h-7.643v7.44h7.643v60.982h-.04z",className:"st0"}),reactExports.createElement("path",{d:"m345.115 65.647-3.008-11.465-3.049-11.465-8.416 8.375-8.375 8.334 11.424 3.09z"}),reactExports.createElement("path",{fill:"#FFF",d:"m345.4 65.931-23.54-6.383 17.32-17.197 6.22 23.58zm-22.726-6.586 22.197 6.017-5.894-22.238-16.303 16.221z",className:"st0"}))),SvgJudoKazate01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M147.257 12.605h25.453v102.789h-25.453zm153.767 0h25.453v102.789h-25.453z"}),reactExports.createElement("path",{strokeWidth:.363,d:"M172.79 12.612v25.453H70V12.612zm115.51.005V38.07H185.512V12.617zm.011 38.661v25.453H185.522V51.278zm.011 38.662v25.452H185.533V89.939zM121.956 45.428l17.997 17.998-51.941 51.941L70.014 97.37zm242.792 69.967h-25.452V12.605h25.452z"}),reactExports.createElement("path",{strokeWidth:.363,d:"M442 12.613v25.452H339.21V12.613zm-.006 84.769-17.998 17.997-51.941-51.941 17.997-17.998z"}))),SvgJulioGlatt01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null","data-name":"Layer 1"},reactExports.createElement("path",{fill:"none",stroke:"#000",strokeMiterlimit:10,strokeWidth:7,d:"m256.24 119.306-40.779-11.562V95.082l-19.791-6.188V23.35l61.606-14.655 59.054 14.671V88.99l-19.791 5.438v13.795l-40.284 11.068-.016.016zm-30.971-18.977 31.018 8.787 30.444-8.373V86.95l19.791-5.438V31.02l-49.294-12.249-51.734 12.312V81.67l19.79 6.188v12.455l-.015.016z",className:"cls-1"}),reactExports.createElement("path",{d:"M229.559 68.465V51.003h-4.832v-1.93h11.817v1.93h-4.832v17.462h-2.17.017zm16.952.208c-.51 0-1.02-.048-1.547-.128-.526-.096-1.004-.24-1.483-.478s-.893-.527-1.26-.877c-.383-.367-.686-.782-.925-1.244s-.398-.957-.494-1.468a8.378 8.378 0 0 1-.144-1.562v-2.632c0-.51.048-1.02.128-1.547.08-.526.255-1.004.494-1.467.24-.462.543-.877.925-1.244.383-.367.798-.67 1.26-.893s.941-.383 1.467-.478c.51-.08 1.037-.128 1.547-.128s1.02.048 1.547.128 1.005.239 1.467.478c.463.223.877.526 1.26.893s.686.782.925 1.244c.24.463.399.941.495 1.467s.127 1.037.127 1.547v2.297h-9.409v.335c0 .334.032.67.08 1.004.048.335.143.654.287.957s.335.574.574.83c.24.255.494.462.797.605.287.144.606.256.941.32.335.063.67.095 1.005.095.383 0 .765-.032 1.132-.08a3.76 3.76 0 0 0 1.069-.319c.335-.16.638-.382.877-.685s.383-.638.414-1.021h2.185a4.164 4.164 0 0 1-.303 1.26c-.16.399-.398.765-.67 1.1-.287.32-.606.606-.972.83s-.766.414-1.18.542c-.415.127-.83.223-1.26.27s-.861.065-1.308.065l-.048-.016zm-3.668-8.038h7.224V60.3c0-.335-.031-.67-.08-.989s-.143-.638-.286-.956c-.144-.303-.32-.59-.543-.83s-.478-.446-.781-.606c-.303-.16-.606-.27-.94-.335s-.655-.111-.99-.111-.67.032-.988.111-.638.192-.941.335c-.303.16-.558.367-.782.606-.223.24-.398.527-.542.83-.144.303-.24.621-.287.956s-.08.654-.08.99v.334h.016zm14.146 7.83V66.52h4.433v-9.84h-4.003v-1.93h6.172v11.77h4.003v1.945h-10.605zm5.294-16.027c-.223 0-.446-.032-.653-.096a1.344 1.344 0 0 1-.894-.893c-.063-.207-.095-.43-.095-.654s.032-.446.095-.654c.064-.207.176-.398.335-.558.16-.16.335-.27.559-.335s.43-.111.653-.111.447.032.654.111.399.192.558.335c.16.16.272.335.335.558.064.208.112.431.112.654s-.032.447-.112.654-.191.399-.335.558c-.16.16-.334.271-.558.335-.207.064-.43.096-.654.096zm14.529 16.235a8.74 8.74 0 0 1-1.117-.08 4.302 4.302 0 0 1-1.1-.287 4.005 4.005 0 0 1-.973-.574 3.37 3.37 0 0 1-.75-.83 3.03 3.03 0 0 1-.43-1.02 4.486 4.486 0 0 1-.128-1.132c0-.495.08-.973.24-1.436s.398-.877.733-1.228.718-.638 1.148-.86c.431-.224.878-.4 1.356-.527.478-.128.957-.223 1.435-.271s.957-.064 1.436-.064h2.854V59.31a3.08 3.08 0 0 0-.111-.845 2.377 2.377 0 0 0-.335-.765 2.314 2.314 0 0 0-.59-.59 3.696 3.696 0 0 0-.75-.383c-.271-.096-.542-.144-.813-.192a7.507 7.507 0 0 0-.845-.047c-.383 0-.766.032-1.149.095a3.789 3.789 0 0 0-1.084.367 2.339 2.339 0 0 0-.845.782 1.93 1.93 0 0 0-.335 1.084h-2.185c0-.447.08-.861.223-1.292s.367-.797.638-1.148.59-.638.957-.877.765-.447 1.18-.574c.415-.144.845-.24 1.276-.287.446-.048.877-.08 1.324-.08.478 0 .94.032 1.403.096.462.063.909.175 1.34.35.43.16.829.4 1.212.67.382.287.701.622.956 1.005.272.383.447.813.559 1.26.111.462.16.925.16 1.403v9.154h-2.186V66.12a4.25 4.25 0 0 1-.797 1.148 4.649 4.649 0 0 1-1.148.846 4.76 4.76 0 0 1-1.34.462 8.35 8.35 0 0 1-1.403.128l-.016-.032zm.813-1.93c.319 0 .638-.032.957-.08.319-.048.622-.127.925-.239s.574-.255.845-.446c.271-.192.494-.415.67-.686s.319-.558.383-.877.111-.638.111-.941v-1.18h-2.854c-.287 0-.574 0-.877.031-.303.016-.59.064-.878.112a8.265 8.265 0 0 0-.845.223c-.287.08-.542.208-.797.383-.24.176-.447.383-.574.654s-.208.542-.208.813c0 .367.096.718.287 1.021.192.319.447.574.75.75s.638.303 1.005.366c.366.064.717.096 1.1.096z"}))),SvgJulioGlatt02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{"data-name":"Layer 1"},reactExports.createElement("rect",{width:61.68,height:47.89,x:90.865,y:61.12,rx:4.01,ry:4.01}),reactExports.createElement("rect",{width:43.87,height:41.92,x:46.995,y:18.98,rx:4.01,ry:4.01}),reactExports.createElement("path",{d:"M429.995 60.75a4.01 4.01 0 0 1-4.01-4.01V46.33h-3.74v-.12h-37.9v.12h-3.74v10.41a4.01 4.01 0 0 1-4.01 4.01h-37.35v.08h-156.91a4.01 4.01 0 0 1-4.01-4.01V22.99a4.01 4.01 0 0 0-4.01-4.01h-17.77a4.01 4.01 0 0 0-4.01 4.01V56.9a4.01 4.01 0 0 0 4.01 4.01h17.41a4.01 4.01 0 0 1 4.01 4.01v40.09a4.01 4.01 0 0 0 4.01 4.01h157.57v-.08h37.62a4.01 4.01 0 0 0 4.01-4.01V92.28a4.01 4.01 0 0 1 4.01-4.01h33.88a4.01 4.01 0 0 1 4.01 4.01v12.65a4.01 4.01 0 0 0 4.01 4.01h33.91a4.01 4.01 0 0 0 4.01-4.01V64.78a4.01 4.01 0 0 0-4.01-4.01h-30.99l-.01-.02z"}))),SvgJulioGlatt03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"m313.102 30.014.223 27.651L340.82 30.17l-27.718-.156zM238.996 64.4a2.813 2.813 0 0 0-.467-.711 2.356 2.356 0 0 0-.667-.523 3.48 3.48 0 0 0-.8-.3c-.278-.055-.567-.089-.856-.089s-.566.034-.855.09a2.69 2.69 0 0 0-.8.3 2.355 2.355 0 0 0-.667.522 3.026 3.026 0 0 0-.467.711c-.122.267-.2.534-.245.823a5.408 5.408 0 0 0-.066.844v.3h6.212v-.3a5.34 5.34 0 0 0-.066-.844 3.67 3.67 0 0 0-.245-.823h-.011zm24.15 3.412a4.01 4.01 0 0 0-.745.1 13.83 13.83 0 0 0-.722.189 2.566 2.566 0 0 0-.678.333c-.211.145-.378.334-.5.556s-.178.467-.178.7c0 .323.078.611.245.89.166.277.378.488.644.644.267.156.556.267.867.322a5.33 5.33 0 0 0 1.756.011c.278-.044.534-.11.79-.2.255-.089.5-.222.722-.389s.422-.366.578-.589c.155-.222.266-.478.333-.744a4.03 4.03 0 0 0 .089-.812v-1.022h-2.445c-.245 0-.49 0-.745.022l-.01-.011zm28.351 18.627V30.014H262.89V8.398l-57.602-.445-34.108 34.064v21.616h28.607v56.414h78.963l34.352-33.62h-21.616l.011.012zm-43.01-29.096c.056-.178.145-.345.29-.478.132-.133.3-.233.477-.289.178-.056.367-.089.567-.089s.389.033.567.089c.177.056.344.156.477.289.134.133.234.3.3.478s.09.367.09.567-.034.389-.09.566-.155.345-.3.478c-.133.134-.3.234-.477.278-.178.056-.367.078-.567.078s-.39-.022-.567-.078a1.154 1.154 0 0 1-.478-.278c-.133-.133-.233-.3-.289-.478s-.078-.366-.078-.566.023-.39.078-.567zm-20.805.744h-4.145v15.015h-1.856V58.087h-4.146v-1.655h10.158v1.655h-.01zm13.515 9.958h-8.091v.29c0 .288.022.577.066.866.045.29.134.556.245.823s.289.5.489.71.433.39.678.523c.244.134.522.223.8.278.289.056.578.078.867.078.333 0 .656-.022.978-.067.322-.044.622-.133.922-.267.3-.133.545-.333.756-.589.211-.255.333-.555.367-.878h1.878a3.993 3.993 0 0 1-.256 1.09 3.426 3.426 0 0 1-.578.944c-.244.278-.522.523-.833.712s-.656.355-1.011.466a5.265 5.265 0 0 1-1.09.223c-.366.033-.744.055-1.122.055a7.67 7.67 0 0 1-1.323-.11 4.574 4.574 0 0 1-2.356-1.168c-.322-.311-.589-.667-.789-1.067s-.344-.822-.433-1.256a6.693 6.693 0 0 1-.122-1.333V66.1c0-.434.033-.878.11-1.323a4.279 4.279 0 0 1 1.213-2.323c.321-.322.688-.578 1.077-.767s.811-.333 1.256-.41.89-.112 1.323-.112.877.033 1.322.111a4.387 4.387 0 0 1 2.334 1.178 4.28 4.28 0 0 1 1.211 2.323c.078.445.111.89.111 1.323v1.978-.034zm13.17 5.057h-9.114v-1.678h3.812v-8.458h-3.445V61.31h5.301v10.114h3.445v1.678zm13.858 0h-1.878v-2.045c-.167.367-.4.69-.69.99-.3.3-.622.533-.988.722a4.25 4.25 0 0 1-1.145.4 6.3 6.3 0 0 1-1.211.111c-.323 0-.634-.022-.967-.067a4.725 4.725 0 0 1-.945-.244c-.3-.122-.578-.29-.834-.49s-.477-.444-.644-.71a2.755 2.755 0 0 1-.378-.89 4.126 4.126 0 0 1-.111-.978c0-.422.067-.833.2-1.233.133-.4.344-.756.633-1.056s.612-.545.99-.734a5.918 5.918 0 0 1 1.166-.455c.412-.111.823-.19 1.234-.222s.823-.056 1.234-.056h2.445v-.911c0-.245-.034-.49-.09-.723a1.746 1.746 0 0 0-.3-.655 2.243 2.243 0 0 0-1.155-.834 3.037 3.037 0 0 0-.7-.156 5.362 5.362 0 0 0-.723-.044c-.333 0-.666.022-.989.078a2.916 2.916 0 0 0-.933.322 1.89 1.89 0 0 0-.723.667c-.189.289-.278.6-.278.933h-1.878c0-.377.067-.744.19-1.11a3.57 3.57 0 0 1 .544-.99c.233-.289.511-.545.822-.756s.656-.378 1.012-.5c.355-.122.722-.2 1.1-.244a9.695 9.695 0 0 1 2.345.01c.4.056.789.156 1.156.29.366.144.722.333 1.044.578s.6.533.823.866c.222.334.389.7.478 1.09s.133.789.133 1.2v7.868l.011-.022z","data-name":"Layer 1"})),SvgJulioGlatt04=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null","data-name":"Layer 1"},reactExports.createElement("path",{d:"M337.094 11.522v16.56a2.943 2.943 0 0 0-.177.188c-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.234.211-.334.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.111.1-.222.211-.322.322-.122.1-.234.211-.333.334-.112.1-.223.21-.323.322-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.223.211-.334.334-.122.1-.233.21-.333.333-.11.1-.222.21-.322.322-.122.1-.233.21-.333.333-.111.1-.222.211-.322.322-.122.1-.233.211-.333.333-.123.1-.222.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.333-.123.1-.222.211-.334.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.333-.123.1-.234.211-.334.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.122.1-.222.211-.333.333a3.346 3.346 0 0 0-1.022 1.6c-.155.388-.244.81-.244 1.243v26.2a1.43 1.43 0 0 0-.178.19c-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.122.1-.222.21-.333.333-.122.1-.233.21-.333.333-.123.1-.223.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.233.21-.333.333-.122.1-.233.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.233.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.233.211-.333.333-.122.1-.222.211-.333.334-.122.1-.233.21-.333.333-.122.1-.222.21-.333.333-.123.1-.234.211-.334.333-.122.1-.222.211-.333.333-.122.1-.233.211-.333.334-.067.055-.122.11-.189.177h-73.536V63.567a3.328 3.328 0 0 0-3.332-3.332h-25.257V43.687a1.43 1.43 0 0 0 .178-.19c.122-.1.233-.21.333-.332.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333.122-.1.233-.211.333-.333.122-.1.234-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.334-.334.122-.1.233-.21.333-.333.122-.1.222-.21.333-.333.122-.1.233-.211.333-.333.122-.1.222-.211.333-.333.122-.1.234-.211.334-.334.122-.1.222-.21.333-.333.122-.1.233-.21.333-.333.122-.1.222-.211.333-.333a1.43 1.43 0 0 0 .189-.178h131.046m3.332-3.332H204.338v.333h-.334v.334h-.333v.333h-.333v.333h-.333V10h-.333v.333h-.334v.334h-.333V11h-.333v.333h-.333v.333h-.333V12h-.334v.334h-.333v.333h-.333V13h-.333v.333h-.333v.333h-.334V14h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334v.334h-.333v.333h-.333v.333h-.333v.333h-.333v.333h-.334V63.59h28.589v56.377h78.912v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-.333h.333v-.333h.333v-.333h.334v-.333h.333v-.334h.333v-27.91h.111v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333v-.333h.333v-.333h.334v-.333h.333v-.333h.333v-.334h.333V8.19l.022.144z"}),reactExports.createElement("path",{d:"M341.315 8.034h-78.768v21.602h28.589v56.377h21.591V29.636h28.588V8.034zm-118.163 62.63V55.659h-4.142v-1.655h10.151v1.655h-4.143v15.005h-1.865zm14.572.178c-.444 0-.877-.034-1.322-.111a4.57 4.57 0 0 1-2.354-1.167c-.322-.31-.589-.666-.789-1.066s-.344-.822-.433-1.255a6.689 6.689 0 0 1-.122-1.333v-2.265c0-.434.033-.878.111-1.322.078-.444.211-.866.422-1.255.2-.389.467-.744.789-1.066.322-.322.688-.578 1.077-.767s.81-.333 1.255-.41.889-.112 1.322-.112.877.034 1.321.111.867.211 1.255.411c.39.2.756.456 1.078.767a4.278 4.278 0 0 1 1.21 2.32c.078.445.111.89.111 1.323v1.977h-8.085v.288c0 .29.022.578.067.867.044.288.133.555.244.822s.289.5.489.71.433.39.677.522c.244.134.522.222.8.278.289.056.577.078.866.078.333 0 .655-.022.977-.067a3.37 3.37 0 0 0 .922-.266c.3-.134.545-.334.756-.59.21-.255.333-.554.366-.877h1.877a3.99 3.99 0 0 1-.255 1.089 3.424 3.424 0 0 1-.578.944c-.244.278-.522.522-.833.71s-.655.356-1.01.467a5.261 5.261 0 0 1-1.089.222c-.367.034-.744.056-1.122.056v-.033zm-3.154-6.909h6.208v-.3a5.3 5.3 0 0 0-.066-.844 3.668 3.668 0 0 0-.245-.822 2.812 2.812 0 0 0-.466-.71 2.354 2.354 0 0 0-.666-.522 3.477 3.477 0 0 0-.8-.3c-.278-.056-.566-.09-.855-.09s-.567.034-.855.09a2.689 2.689 0 0 0-.8.3 2.354 2.354 0 0 0-.667.522 3.024 3.024 0 0 0-.466.71 3.05 3.05 0 0 0-.244.822 5.404 5.404 0 0 0-.067.844v.3h-.011zm12.15 6.731v-1.677h3.81v-8.452h-3.443V58.88h5.298v10.107h3.443v1.677h-9.108zm4.554-13.783c-.2 0-.389-.023-.566-.078a1.153 1.153 0 0 1-.478-.278c-.133-.133-.233-.3-.289-.477s-.077-.367-.077-.567.022-.388.077-.566.145-.344.29-.478c.132-.133.299-.233.477-.289.177-.055.366-.088.566-.088s.389.033.567.088c.177.056.344.156.477.29.133.133.233.3.3.477s.089.366.089.566-.033.389-.089.567-.155.344-.3.477c-.133.134-.3.234-.477.278a1.888 1.888 0 0 1-.567.078zm12.484 13.961c-.322 0-.633-.023-.966-.067a4.724 4.724 0 0 1-.944-.244c-.3-.123-.578-.29-.833-.489s-.478-.444-.645-.71a2.753 2.753 0 0 1-.377-.89 4.123 4.123 0 0 1-.111-.977c0-.422.066-.833.2-1.233.133-.4.344-.755.633-1.055s.61-.544.988-.733a5.915 5.915 0 0 1 1.166-.455c.411-.111.822-.189 1.233-.222s.822-.056 1.233-.056h2.443v-.91c0-.245-.033-.49-.088-.722-.056-.245-.156-.456-.3-.656s-.311-.366-.511-.51a2.19 2.19 0 0 0-.644-.323 3.035 3.035 0 0 0-.7-.155 5.358 5.358 0 0 0-.722-.045c-.333 0-.666.023-.988.078a2.914 2.914 0 0 0-.933.322 1.89 1.89 0 0 0-.722.667c-.19.288-.278.6-.278.933h-1.877c0-.378.067-.745.189-1.111.133-.367.31-.689.544-.989.233-.288.511-.544.822-.755s.655-.377 1.01-.5a5.26 5.26 0 0 1 1.1-.244 9.687 9.687 0 0 1 2.344.011c.4.056.788.156 1.155.289.366.144.722.333 1.044.577s.6.534.822.867c.222.333.388.7.477 1.088s.134.789.134 1.2v7.863h-1.877v-2.043c-.167.366-.4.688-.69.988-.299.3-.621.533-.988.722a4.248 4.248 0 0 1-1.144.4c-.4.078-.8.11-1.21.11l.01-.021zm.7-1.655a4.99 4.99 0 0 0 1.599-.267c.255-.089.5-.222.722-.389s.422-.366.577-.588c.156-.222.267-.478.334-.744.055-.267.089-.545.089-.811v-1.022h-2.444c-.244 0-.489 0-.744.022s-.511.045-.744.1c-.245.056-.489.122-.722.19a2.564 2.564 0 0 0-.678.332c-.21.145-.377.333-.5.556s-.177.466-.177.7c0 .321.078.61.244.888.167.277.378.489.644.644.267.156.556.267.867.322.31.056.622.078.944.078l-.011-.011z"}))),SvgJulioGlatt05=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M179.572 61.676h60.179v65.132h-60.179zM114.135 1.192h65.132v60.179h-65.132zM305.984 29.06a3.818 3.818 0 0 0-.648-1.002 3.37 3.37 0 0 0-.934-.727 4.73 4.73 0 0 0-1.13-.413c-.393-.088-.786-.127-1.19-.127s-.795.039-1.188.127-.767.226-1.13.413-.668.433-.934.727a3.818 3.818 0 0 0-.648 1.003 4.782 4.782 0 0 0-.354 1.14 7.977 7.977 0 0 0-.098 1.189v.412h8.706v-.412c0-.403-.03-.796-.098-1.19a3.935 3.935 0 0 0-.354-1.14zM240.056 1.193v60.18h157.809V1.191H240.056zm79.214 17.973c.079-.255.206-.481.393-.668a1.74 1.74 0 0 1 .668-.413c.256-.088.521-.128.796-.128s.54.04.796.128c.256.089.472.226.668.413.187.187.325.413.413.668.089.256.128.52.128.796s-.04.54-.128.796a1.816 1.816 0 0 1-.413.668 1.493 1.493 0 0 1-.668.393c-.255.079-.52.108-.796.108s-.54-.039-.796-.108a1.65 1.65 0 0 1-.668-.393 1.493 1.493 0 0 1-.393-.668c-.079-.255-.108-.52-.108-.796s.04-.54.108-.796zm-29.136 1.052h-5.818v21.029h-2.604v-21.03h-5.818v-2.319h14.23v2.32h.01zM309.06 34.16h-11.34v.413c0 .402.03.805.098 1.208.059.403.177.786.354 1.14.167.364.393.698.678 1.003.285.304.6.55.953.727.354.177.727.304 1.13.383.403.079.806.108 1.209.108.462 0 .924-.03 1.366-.098a4.313 4.313 0 0 0 1.287-.383c.413-.187.767-.462 1.061-.826s.462-.776.511-1.238h2.634a5.005 5.005 0 0 1-.364 1.523 4.987 4.987 0 0 1-.805 1.317c-.334.393-.728.727-1.18 1.002s-.913.492-1.415.649a7.362 7.362 0 0 1-1.523.314c-.52.05-1.041.079-1.572.079-.61 0-1.238-.05-1.857-.157a6.49 6.49 0 0 1-1.779-.57c-.56-.276-1.071-.63-1.523-1.062s-.826-.933-1.11-1.493a6.315 6.315 0 0 1-.6-1.76 9.88 9.88 0 0 1-.177-1.876V31.39c0-.61.05-1.239.157-1.858a6.092 6.092 0 0 1 .59-1.759 5.853 5.853 0 0 1 1.11-1.493c.452-.442.954-.806 1.514-1.081s1.14-.462 1.759-.57c.629-.108 1.248-.157 1.857-.157s1.228.049 1.857.157a6.256 6.256 0 0 1 1.76.57c.55.275 1.05.639 1.513 1.08.452.443.825.944 1.11 1.494.285.55.481 1.14.59 1.76.108.628.157 1.247.157 1.857v2.761l-.01.01zm18.455 7.085H314.75v-2.349h5.336v-11.85h-4.825v-2.32h7.429v14.17h4.825v2.349zm19.408 0h-2.634v-2.86c-.236.511-.56.973-.973 1.386a5.578 5.578 0 0 1-1.385 1.012 5.861 5.861 0 0 1-1.602.56c-.56.108-1.13.157-1.7.157-.442 0-.894-.029-1.346-.098a5.121 5.121 0 0 1-1.317-.354c-.423-.167-.816-.393-1.18-.678s-.658-.619-.903-1.002a3.819 3.819 0 0 1-.521-1.238 5.768 5.768 0 0 1-.158-1.366c0-.59.099-1.17.285-1.73.187-.56.492-1.051.895-1.474.403-.422.864-.766 1.385-1.031s1.062-.482 1.641-.64a9.548 9.548 0 0 1 1.73-.314 20.62 20.62 0 0 1 1.73-.078h3.429V30.23c0-.334-.04-.678-.128-1.012a3.02 3.02 0 0 0-.413-.924 2.926 2.926 0 0 0-.717-.717 3.744 3.744 0 0 0-.904-.462 5.49 5.49 0 0 0-.983-.226 8.867 8.867 0 0 0-2.397.05 4.467 4.467 0 0 0-1.307.441 2.72 2.72 0 0 0-1.013.934 2.318 2.318 0 0 0-.393 1.307h-2.633c0-.53.088-1.052.265-1.553.177-.51.433-.973.767-1.385a4.975 4.975 0 0 1 1.16-1.062c.441-.294.913-.53 1.414-.697a8.177 8.177 0 0 1 1.543-.354c.53-.069 1.061-.098 1.592-.098.57 0 1.14.039 1.7.108.56.078 1.1.216 1.622.412a6.66 6.66 0 0 1 1.464.806c.452.344.845.737 1.16 1.209.314.462.54.973.667 1.523s.187 1.11.187 1.68v11.026l-.03.01zm-7.115-7.4a6.16 6.16 0 0 0-1.051.148c-.334.078-.678.167-1.013.265a3.425 3.425 0 0 0-.953.462c-.295.206-.53.462-.697.776a2.093 2.093 0 0 0-.256.983c0 .442.118.855.354 1.238s.53.688.904.904a3.32 3.32 0 0 0 1.209.442c.432.079.874.109 1.316.109.384 0 .767-.03 1.14-.099a6.139 6.139 0 0 0 1.11-.285c.364-.127.698-.304 1.013-.54s.59-.511.806-.826a2.89 2.89 0 0 0 .462-1.051c.088-.383.127-.767.127-1.14v-1.425h-3.43c-.343 0-.687.01-1.05.03l.01.01z","data-name":"Layer 1"})),SvgJulioGlatt06=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 2",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null","data-name":"Layer 1"},reactExports.createElement("path",{d:"M321.526 13.743v65.611h-50.341l-1.758 1.44-28.676 23.52L244.331 87l1.577-7.635h-55.434V13.743h131.052m6.354-6.353H184.12v78.318h53.995l-7.212 34.902 42.559-34.902h54.418V7.39z"}),reactExports.createElement("path",{d:"M226.583 58.197V38.512h-5.443V36.34h13.321v2.17h-5.442v19.686h-2.436zm19.124.233c-.572 0-1.154-.053-1.736-.148-.583-.096-1.144-.276-1.663-.54s-.995-.593-1.43-.996c-.423-.402-.773-.868-1.037-1.397s-.456-1.08-.561-1.652-.16-1.165-.16-1.758v-2.976c0-.572.054-1.154.149-1.736a5.623 5.623 0 0 1 .55-1.652 5.334 5.334 0 0 1 1.038-1.398c.424-.413.9-.752 1.409-1.006s1.07-.434 1.652-.54 1.164-.148 1.736-.148 1.154.053 1.737.148 1.133.275 1.652.54c.519.254.985.593 1.408 1.006.424.413.773.879 1.038 1.398.265.519.455 1.07.55 1.652.096.582.149 1.164.149 1.736v2.584h-10.621v.381c0 .381.032.752.085 1.133.063.381.169.73.328 1.07.159.339.37.646.635.932s.561.519.89.688c.328.17.677.286 1.059.36.37.074.751.106 1.133.106.434 0 .857-.032 1.28-.085.414-.063.816-.18 1.208-.36s.72-.434.995-.773c.276-.339.435-.72.477-1.154h2.467a5.033 5.033 0 0 1-.339 1.43 4.65 4.65 0 0 1-.762 1.238 4.631 4.631 0 0 1-1.101.932 6.02 6.02 0 0 1-1.324.614 7.297 7.297 0 0 1-1.43.297c-.487.053-.974.074-1.471.074h.01zm-4.13-9.075h8.154v-.392c0-.37-.032-.752-.085-1.112a4.294 4.294 0 0 0-.328-1.07 3.472 3.472 0 0 0-.614-.931 3.13 3.13 0 0 0-.879-.688 4.25 4.25 0 0 0-1.059-.392c-.37-.074-.741-.117-1.112-.117s-.752.043-1.112.117c-.37.085-.72.212-1.059.392a2.95 2.95 0 0 0-.878.688 3.948 3.948 0 0 0-.615.932c-.158.35-.264.71-.328 1.07s-.085.74-.085 1.111v.392zm15.937 8.842v-2.202h4.998V44.897h-4.521v-2.17h6.957v13.268h4.522v2.202h-11.956zm5.983-18.086c-.254 0-.508-.032-.741-.106-.233-.074-.445-.19-.625-.37s-.307-.393-.37-.626-.106-.487-.106-.74.031-.51.106-.742.19-.445.37-.625.381-.307.625-.381c.244-.085.487-.117.741-.117s.508.043.741.117.445.212.625.381c.18.18.307.392.381.625.085.233.117.487.117.741s-.042.508-.117.741a1.66 1.66 0 0 1-.38.625c-.18.18-.393.297-.626.37s-.487.107-.74.107zm16.382 18.319c-.413 0-.837-.032-1.26-.085a5.632 5.632 0 0 1-1.24-.328c-.391-.159-.762-.37-1.1-.635s-.615-.583-.848-.932a3.536 3.536 0 0 1-.487-1.165 5.658 5.658 0 0 1-.148-1.281c0-.55.085-1.091.265-1.62.18-.53.455-.985.836-1.388.37-.402.805-.72 1.292-.963a8.384 8.384 0 0 1 1.536-.593c.54-.149 1.07-.244 1.62-.297s1.09-.074 1.62-.074h3.208v-1.186a4.19 4.19 0 0 0-.116-.953 2.642 2.642 0 0 0-1.059-1.525 3.377 3.377 0 0 0-.847-.434 5.297 5.297 0 0 0-.921-.212 7.508 7.508 0 0 0-2.245.042c-.424.075-.837.212-1.218.414s-.71.497-.953.879a2.22 2.22 0 0 0-.37 1.217h-2.468c0-.497.085-.984.254-1.461a4.4 4.4 0 0 1 .71-1.292c.307-.381.667-.72 1.09-.995a5.715 5.715 0 0 1 1.324-.657 7.293 7.293 0 0 1 1.44-.328c.498-.064.996-.085 1.483-.085.54 0 1.07.032 1.588.106.53.064 1.027.201 1.514.381.487.19.943.445 1.366.763.424.317.784.699 1.08 1.133.297.434.509.91.625 1.43.117.518.18 1.037.18 1.577v10.325h-2.467v-2.68a4.34 4.34 0 0 1-.91 1.292 4.91 4.91 0 0 1-1.293.953 5.388 5.388 0 0 1-1.503.52 8.958 8.958 0 0 1-1.589.148l.01-.011zm.921-2.17c.36 0 .71-.033 1.07-.085.36-.064.71-.149 1.037-.265.34-.117.657-.286.953-.508s.551-.477.763-.774.35-.624.434-.984c.074-.36.116-.71.116-1.07V51.24h-3.208c-.318 0-.646 0-.985.032s-.667.063-.985.137-.635.16-.953.254a3.153 3.153 0 0 0-.89.435c-.275.19-.497.434-.656.73a1.92 1.92 0 0 0-.233.922c0 .413.106.804.329 1.164.222.36.497.636.847.848.35.211.72.349 1.133.413.402.074.815.105 1.239.105l-.01-.02z"}))),SvgLukaPiskore01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M52.05 14.024h22.555v12.663H52.05zm32.304 0h46.621v12.663H84.354zm93.854 0h73.781v12.663h-73.781zm0 87.307h73.781v12.663h-73.781zm0-43.672h73.781v12.663h-73.781z"}),reactExports.createElement("path",{strokeWidth:.36,d:"M97.043 13.997v99.97H84.38v-99.97zm227.676.035v99.97h-12.663v-99.97z"}),reactExports.createElement("path",{d:"m404.551 20.643-35.361 93.171.503.179h12.987l28.67-75.507zm17.447-6.619h-13.562l37.952 99.969h13.562z"}))),SvgLululi02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M105.027 33.423H36.524c-3.834 0-6.99-3.115-6.99-6.99s3.156-6.99 6.99-6.99h68.503c3.875 0 6.99 3.156 6.99 6.99s-3.115 6.99-6.99 6.99zm120.829 0h-63.75c-3.874 0-6.99-3.155-6.99-6.99s3.156-6.99 6.99-6.99h63.75c3.875 0 6.99 3.156 6.99 6.99s-3.115 6.99-6.99 6.99zm0 75.134h-63.75c-3.874 0-6.99-3.156-6.99-6.99s3.156-6.99 6.99-6.99h63.75c3.875 0 6.99 3.155 6.99 6.99s-3.115 6.99-6.99 6.99zm0-37.547h-63.75c-3.874 0-6.99-3.155-6.99-6.99s3.156-6.99 6.99-6.99h63.75c3.875 0 6.99 3.155 6.99 6.99s-3.115 6.99-6.99 6.99z"}),reactExports.createElement("path",{d:"M70.796 108.557c-3.875 0-6.99-3.156-6.99-6.99V26.433c0-3.874 3.155-6.99 6.99-6.99s6.99 3.156 6.99 6.99v75.134a6.972 6.972 0 0 1-6.99 6.99zm247.09-3.315c-3.874 0-6.99-3.156-6.99-6.99V29.788c0-3.874 3.155-6.99 6.99-6.99 3.875 0 6.99 3.156 6.99 6.99v68.464c.04 3.834-3.115 6.99-6.99 6.99zm157.577 3.315h-68.862a6.951 6.951 0 0 1-5.952-3.315 6.975 6.975 0 0 1-.32-6.79l34.432-69.462a6.96 6.96 0 0 1 6.27-3.875c2.677 0 5.114 1.518 6.272 3.875l34.431 69.461a6.97 6.97 0 0 1-.32 6.79 7.001 7.001 0 0 1-5.95 3.316zm-57.598-13.98h46.254l-23.127-46.654-23.127 46.654z"}),reactExports.createElement("path",{d:"M338.377 108.557h-40.942c-3.874 0-6.99-3.156-6.99-6.99 0-3.875 3.155-6.99 6.99-6.99h40.982c3.875 0 6.99 3.155 6.99 6.99 0 3.874-3.155 6.99-7.03 6.99zm0-71.778h-40.942c-3.874 0-6.99-3.156-6.99-6.99 0-3.875 3.155-6.99 6.99-6.99h40.982c3.875 0 6.99 3.155 6.99 6.99 0 3.834-3.155 6.99-7.03 6.99z"}))),SvgMaes01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M289.2995 85.096c10.8352-6.7622 19.7724-11.4285 25.8227-22.2638 14.9875-26.8905 40.2567-39.8612 70.5085-43.8552 3.5985-.4746 7.988-1.3841 9.4116 4.2708.7514 2.9263 4.1127 1.7795 6.3668 2.254 20.0096 3.9941 29.7772 16.3716 27.6813 36.5395-.7118 6.7622 3.6777 5.0617 6.6831 5.1013 6.169.079 9.9258 1.74 9.4908 8.779-.2768 4.6662-1.74 7.4343-6.8808 7.4343-4.2709 0-8.5022.1187-12.773.2373-7.3949.1977-13.287 7.7508-12.259 15.6598.7119 5.5758-7.197 12.4566-11.7052 9.372-4.3104-2.9658-6.4458-.8699-9.5303.87-21.8287 12.338-44.053 14.7503-66.7912 2.4123-5.734-3.0845-10.9144-7.0785-13.3266-13.1289-2.1354-5.3385-4.6268-5.4176-8.5417-2.3727-4.943 3.8359-11.468 5.8527-14.2361 12.2194-1.1864 2.689-3.7172 2.689-6.2086 2.8077-31.3195 1.5027-62.5994 3.915-93.9585 3.7567-12.6148-.0395-14.3943-1.5027-13.4848-14.2757.87-12.6543.5932-25.2691 1.0677-37.8839.1978-5.5758-1.6608-7.2367-7.2762-7.0785a863.8271 863.8271 0 0 1-42.9457 0c-5.5758-.1582-7.3553 1.4631-7.3158 7.0785.0791 14.1175-.6722 28.2746-.7909 42.4316-.0395 5.5363-2.0168 8.2253-7.988 8.344-5.9713.1186-8.0276-2.4518-8.265-8.0276-.593-14.157-.3558-28.2746.5537-42.3921.3164-5.1408-.7909-7.553-6.8808-7.3949-7.553.1582-15.1456-1.305-22.7383-1.6609-5.5362-.2372-6.2876-3.4799-6.2876-7.8694s.9095-7.4344 6.248-8.1462c7.9882-1.0282 15.7785 1.1468 23.6874 1.0282 46.8211-.6328 93.7213 1.2654 140.5028-2.4518 6.604-.5141 12.4962-.0791 11.7053 9.0953-.356 4.3104-1.8982 6.3667-6.525 6.8808-13.9197 1.5027-27.8 3.8358-41.7988 3.0845-9.0162-.4745-6.5644 5.299-7.0785 9.9653-.6327 6.0899 2.7681 5.813 7.3158 5.4572 6.6435-.4746 13.4057.0395 20.0888-.2768 5.734-.2768 7.3948 2.7681 7.7507 7.6717.3955 5.0617-1.305 7.7508-6.8017 8.5021-7.3158 1.0282-14.592.9886-21.8683.6327-4.5476-.2372-6.5249 1.1864-6.8412 5.9318-.3955 5.8526 3.5986 4.5476 6.604 4.4685 22.501-.7513 45.002-1.819 67.5425-2.4122 4.7059-.1186 4.3104-2.5309 4.6268-5.6945 1.6213-15.3038.6723-30.6472.5536-45.9906-.0395-5.6945 1.0677-9.8071 7.474-9.8862 6.4853-.1186 9.9257 2.7286 9.649 9.9653-.5537 13.0893-.2373 26.2182-.2373 40.8102zm66.3166 28.2745c11.0726-.435 20.8006-2.8077 29.54-7.988 3.4404-2.0169 10.163-2.5705 7.553-9.0954-2.4517-6.0899-4.0335-13.287-13.6033-13.0893-16.9648.3559-33.9295.6327-50.9338-.87-4.7454-.3955-9.4907 3.4008-11.8634 7.3553-1.819 3.0845 1.6213 6.7622 3.9545 9.3721 9.6093 10.7167 22.5405 13.5244 35.353 14.3153zm25.8624-80.276c6.6435 4.864 1.305 10.3607 1.74 15.3038.5931 6.5645 5.2594 15.0666 11.7447 17.1625 7.6717 2.4518 16.767.7118 25.2296.435.7119-.0396 1.7005-2.3332 1.9773-3.6777 1.1863-6.6435 1.0677-13.0102-3.124-18.942-6.9204-9.807-23.1733-14.592-37.5676-10.2816zm-60.029 32.0708c16.6483-10.677 31.2403-20.0492 45.8324-29.4213-18.863 2.8077-34.9577 9.8467-45.8325 29.4213zm31.2403 1.1073h19.021c-3.7171-10.1235-8.423-10.163-19.021 0z"}),reactExports.createElement("path",{d:"M280.2832 28.3491c-4.6267-2.2145-11.6657-2.4913-10.163-10.163 1.0677-5.4177 2.254-11.7844 10.9144-9.8862 5.5758 1.2259 10.5585 3.2822 9.4907 9.649-.8304 5.0221-2.5308 10.9143-10.242 10.4002z"}))),SvgMaliciousSheep01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M301.113 11.5507h-90.2643c-.5378 0-.9987-.461-.9987-.9987s.461-.9986 1.037-.9986h90.2643c.5378 0 .9987.4609.9987.9986s-.461.9987-1.037.9987zm-25.274 16.9006h-39.5627c-.5377 0-.9987-.461-.9987-.9987 0-.5378.461-.9987.9987-.9987h39.601c.5378 0 .9987.461.9987.9987 0 .5377-.461.9987-1.037.9987zm0 16.8237h-39.5627c-.5377 0-.9987-.461-.9987-.9987 0-.5377.461-.9987.9987-.9987h39.601c.5378 0 .9987.461.9987.9987 0 .5377-.461.9987-1.037.9987zm0 16.8237h-39.5627c-.5377 0-.9987-.461-.9987-.9987 0-.5377.461-.9987.9987-.9987h39.601c.5378 0 .9987.461.9987.9987 0 .5378-.461.9987-1.037.9987zm-1.4212 37.9878h-36.7203c-.5378 0-.9987-.461-.9987-.9987s.461-.9987.9987-.9987h36.7203c.5377 0 .9986.461.9986.9987s-.4225.9987-.9986.9987z"}),reactExports.createElement("path",{d:"M256.0576 100.0865c-.5377 0-.9986-.461-.9986-.9987v-88.459c0-.5377.4609-.9986.9986-.9986s.9987.4609.9987.9986v88.459c0 .5762-.4225.9987-.9987.9987z"}),reactExports.createElement("path",{d:"M290.0123 118.4466c-.2688 0-.5761-.1152-.7682-.3457l-33.9547-39.9467c-.3457-.4225-.3073-1.037.1152-1.4212.4225-.3457 1.0371-.3073 1.4212.1153l33.9547 39.9467c.3457.4225.3073 1.037-.1152 1.4212a1.043 1.043 0 0 1-.653.2304z"}),reactExports.createElement("path",{d:"M222.1413 118.4466a1.043 1.043 0 0 1-.653-.2304c-.4225-.3457-.4609-.9987-.1152-1.4212l33.9547-39.9467c.3457-.4225.9987-.461 1.4212-.1153s.461.9987.1152 1.4212l-33.9547 39.9467c-.2304.2305-.4993.3457-.7682.3457z"}))),SvgMarkKnol01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M246.2306 24.7784h-97.9813v19.6212h19.5797v78.4016h19.6211V44.3996h19.5797v78.4016h39.2008v-19.6211H226.651V83.6004h19.5796V63.9792H226.651V44.3996h39.2008V24.7784zm19.6212 39.2008v58.822h19.5796V44.3996h-19.5796zm9.7483-39.2008h.083c5.3927 0 9.7483-4.3556 9.7483-9.7483v-.083c0-5.3927-4.3556-9.7483-9.7483-9.7483h-.083c-5.3927 0-9.7483 4.3556-9.7483 9.7483v.083c0 5.3927 4.3556 9.7483 9.7483 9.7483zm68.7363 0h-58.905v19.5797h19.5797v78.4017h19.5797V83.6003h19.5797v39.1594H363.75V44.3166c.083-10.7854-8.6698-19.5382-19.4137-19.5382zm-.1245 39.2009h-19.5796V44.3996h19.5796v19.5797z"})),SvgMarquesa01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M114.55 56.1406h15.7188v15.7188H114.55zm15.7188 47.1564h15.7188v15.7188h-15.7188zm0-62.8752h15.7188v15.7188h-15.7188zm15.7189 62.8752h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7189h15.7188v15.7188h-15.7188zm15.7188 78.5941h15.7188v15.7188h-15.7188zm0-62.8752h15.7188v15.7188h-15.7188zm15.7188 15.7188h15.7188v15.7188h-15.7188zm15.68 47.1564h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188z"}),reactExports.createElement("path",{d:"M193.1053 56.1406h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm15.7188 62.8752h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm0-15.7189h15.7188v15.7188h-15.7188zm15.7188 78.5941h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm15.7189 15.7188h15.7188v15.7188h-15.7188zm15.7188 47.1564h15.7188v15.7188h-15.7188zm0-62.8752h15.7188v15.7188h-15.7188zm15.7188 62.8752h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-31.4377h15.7188v15.7188h-15.7188zm15.7189 94.3129h15.7188v15.7188h-15.7188zm0-62.8752h15.7188v15.7188h-15.7188zm15.7188 15.7188h15.7188v15.7188h-15.7188zm15.7188 47.1564h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm15.7188 31.4376h15.7188v15.7188h-15.7188zm0-31.4376h15.7188v15.7188h-15.7188zm0-15.7189h15.7188v15.7188h-15.7188zm15.7188 78.5941h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm0-15.7188h15.7188v15.7188h-15.7188zm15.7189 62.8752h15.7188v15.7188h-15.7188zm0-47.1564h15.7188v15.7188h-15.7188zm15.7188-15.7188H397.45v15.7188h-15.7188z"}))),SvgMarquesa02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M141.1043 5.4565H24.1v58.5848h58.5021v58.5022h58.5849V5.5392h-.0827v-.0827zm16.9925.0827v117.0043h117.1696v-20.6308c-2.77 5.3334-8.3515 8.9717-14.7599 8.9717-9.1784 0-16.6204-7.442-16.6204-16.6204s7.442-16.6204 16.6204-16.6204c6.4084 0 11.9899 3.6383 14.76 8.9717V55.4831c-4.1345 10.9149-14.6773 18.6462-27.0392 18.6462-15.959 0-28.8997-12.9407-28.8997-28.8996s12.9408-28.8996 28.8997-28.8996c12.362 0 22.9047 7.7313 27.0391 18.6462V5.5393H158.0967l.0001-.0001zm134.7823 0h58.5848v117.0043h-58.5848V5.5392zm129.6556 0-65.3653 117.0043H487.9L422.5347 5.5392zm0 109.893c-16.7858 0-30.388-13.6022-30.388-30.388s13.6022-30.388 30.388-30.388 30.388 13.6022 30.388 30.388-13.5609 30.388-30.388 30.388z"})),SvgMerchantCoppola01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M82.8133 119.9192h23.1495v5.6462H82.8133zm0-11.6833h23.1495v5.6462H82.8133zm0-41.2608h23.1495v5.6462H82.8133zm0-11.6399h23.1495v5.6462H82.8133zm0-41.2607h23.1495v5.6462H82.8133zm0-11.6399h23.1495v5.6462H82.8133zM52.15 14.0745h23.1495v5.6462H52.15zm0-11.6399h23.1495v5.6462H52.15zm61.3266 11.6399h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm98.3309 11.6399h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm30.6633 11.6399h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0 117.4846h23.1495v5.6462h-23.1495zm0-11.6833h23.1495v5.6462h-23.1495zm-61.3266 11.6833h23.1495v5.6462h-23.1495zm0-11.6833h23.1495v5.6462h-23.1495zm0-41.2608h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0-41.2607h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm128.4297 117.4846h23.1495v5.6462h-23.1495zm0-11.6833h23.1495v5.6462h-23.1495zm0-41.2608h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0-41.2607h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm96.4633 64.5405h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0-41.2607h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zM211.8075 66.9751h23.1495v5.6462h-23.1495zm0-11.6399h23.1495v5.6462h-23.1495zm0 64.584h23.1495v5.6462h-23.1495zm0-11.6833h23.1495v5.6462h-23.1495zm224.893 11.6833H459.85v5.6462h-23.1495zm0-11.6833H459.85v5.6462h-23.1495zm-61.3265 11.6833h23.1495v5.6462H375.374zm0-11.6833h23.1495v5.6462H375.374zm61.3265-41.2608H459.85v5.6462h-23.1495zm0-11.6399H459.85v5.6462h-23.1495zM375.374 66.9751h23.1495v5.6462H375.374zm0-11.6399h23.1495v5.6462H375.374z"})),SvgMerchantCoppola02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M207.7674 11.8539c.4564-.2662.6085-.8366.3423-1.293-.2662-.4563-.8366-.6084-1.293-.3422L81.5926 83.3834c-.4563.2662-.6084.8366-.3422 1.293.1901.3042.4943.4563.7985.4563.1521 0 .3043-.038.4564-.1141l80.618-47.078-25.06 78.7548c-.1521.4944.114 1.0268.6085 1.1789.076.038.19.038.2661.038.3803 0 .7606-.2662.8747-.6465l25.6685-80.7322 42.2864-24.6797z"}),reactExports.createElement("path",{d:"M310.8978 16.7974c-.4183-.3042-.9888-.1901-1.293.2282l-57.8397 84.2307-39.9667-6.7309-9.545-23.501 54.3032-8.1378c.4944-.076.8746-.5704.7986-1.0647-.076-.4944-.5704-.8747-1.0648-.7986l-54.7594 8.2139-15.8955-39.1682 87.8053-11.5984c.4943-.076.8746-.5324.7986-1.0648-.076-.4943-.5324-.8746-1.0648-.7985l-90.163 11.9025 26.6192 65.6353-27.3797-4.6013c-.4944-.076-.9888.2662-1.0648.7606-.076.4943.2662.9887.7605 1.0647l28.4826 4.7915 7.6435 18.8616c.152.3802.4943.5704.8746.5704.114 0 .2282-.038.3423-.076.4943-.1902.7225-.7226.5323-1.217l-7.2252-17.7968 37.9894 6.3886-6.6548 9.697c-.3042.4183-.1901.9887.2282 1.293.152.114.3422.152.5323.152.3043 0 .6085-.152.7606-.4182l7.1491-10.3815 56.5088 9.5068h.152c.4564 0 .8367-.3042.9127-.7605.076-.4944-.2662-.9887-.7605-1.0648l-55.6721-9.3928 57.4213-83.432c.2662-.4184.1522-1.0268-.2661-1.293zM430.57 111.2195l-41.4879-38.2556 39.4344-13.0814c.4944-.1521.7606-.6845.6085-1.1789-.1521-.4943-.6845-.7605-1.1789-.6084L387.523 71.5189l-59.1707-54.5314v96.2094c0 .5324.4183.9507.9507.9507s.9507-.4183.9507-.9507v-20.687l56.813-18.8615 42.2484 38.978c.3803.3423.9887.3423 1.331-.038.3422-.4182.3042-1.0267-.076-1.369zm-100.3543-20.725V21.2466l55.2538 50.9567-55.2538 18.2912z"}))),SvgMightymoss01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M188.0409 9.6174h81.9575v23.7013h-81.9575zm0 42.4936h81.9575v23.7013h-81.9575zm0 42.4936h81.9575v23.7013h-81.9575zm-77.432-84.9872H81.5v23.7013h29.1089v85.0256h23.7397V33.3187h29.1089V9.6174h-29.1089zm189.227 0h23.7013v108.7269h-23.7013zm122.3034 0h-59.2916c-4.6406 0-8.3607 3.7584-8.3607 8.3606v100.4047h23.7014V89.5421h28.6103v28.8405H430.5V17.978c0-4.6022-3.7201-8.3606-8.3607-8.3606zm-43.951 57.911V31.6312h28.6104v35.8972h-28.6103z"})),SvgMiusoph01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M137.75 8.4509h29.6654v6.9363H137.75zm121.2871 0h26.9222v6.9363h-26.9222zm30.214 0h29.6262v6.9363h-29.6262zm35.7395 0h46.0068v6.9363h-46.0068zm0 52.0418h46.0068v6.9363h-46.0068zm-65.9535 52.0417h26.9222v6.9363h-26.9222zm30.214 0h29.6262v6.9363h-29.6262zM170.7072 8.4509h33.4274v6.9363h-33.4274zm39.2664 0h43.1853v6.9363h-43.1853zm0 52.0418h43.1853v6.9363h-43.1853zm0 52.0417h43.1853v6.9363h-43.1853zm-42.5583-97.1472h3.2526v104.1619h-3.2526zm118.5831 0h3.2526v97.1472h-3.2526zm35.7004.0392h3.2526v104.0835h-3.2526zm49.2986 0h3.2526v104.0835h-3.2526zm-164.2764-.0392h3.2526v97.1472h-3.2526z"})),SvgMiusoph02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M201.35 20.5131v7.2376h3.8028V13.2755H201.35zm23.6346 14.5161h-3.7619v7.2376h3.7619v7.2376h-3.7619v7.2376h3.7619v7.2375h-3.7619v7.2377h3.7619v7.2785h-3.7619v7.2375h3.7619v7.2377h-3.7619v7.2376h3.7619v7.2375h-3.7619v7.2377h3.7619v7.2784h3.8029v-7.2784h3.8028v-7.2377h-3.8028v-7.2375h3.8028v-7.2376h-3.8028v-7.2377h3.8028v-7.2375h-3.8028v-7.2785h3.8028v-7.2377h-3.8028V56.742h3.8028v-7.2376h-3.8028v-7.2376h3.8028v-7.2376h-3.8028v-7.2785h-3.8029zm21.3039 36.188v-7.2377h-3.8028V49.5044h-3.7619v14.4751h-3.8028v7.2377h3.8028v7.2785h3.7619v-7.2785zm-3.8028 7.2785v7.2375h7.6056v-7.2375h-3.8028zm17.0104-7.2785h-3.7619v7.2785h7.5648v-7.2785zm11.4084 7.2785h3.762v-7.2785h-7.5648v7.2785zm-3.8028-21.3039v6.7877h-3.8027v-6.7877h-7.5648v7.2375h7.5648v6.7879h3.8027v-6.7879h7.5648v-7.2375h-3.762zm-7.6056-29.4411h-3.7619v7.2785h7.5648v-7.2785zm11.4084 7.2785h3.762v-7.2785h-7.5648v7.2785zm-11.4084-21.7537h-3.7619v7.2376h7.5648v-7.2376zm7.6056 0v7.2376h7.5648v-7.2376h-3.762zm43.4257 14.4752V20.513h-3.8029v-7.2376h-3.8028V6.0379h-3.8028v7.2376h-3.8028V6.0379h-3.8028v7.2376h-3.8028V6.0379h-3.8028v7.2376h-3.8028v7.2376h-3.6802v7.2376h3.8028v7.2376h-3.8028v7.2376h3.8028v7.2376h-3.8028v7.2785h3.8028v7.2376h-3.8028v7.2376h3.8028v7.2376h-3.8028v7.2376h3.8028V92.93h-3.8028v7.2376h3.8028v7.9327h-3.8028v7.2376h3.8028v6.5834h7.6057v-7.2377h-3.8029v-6.5833h3.8029v-7.2376h-3.8029V78.4956h3.8029v7.2377h3.8028v-7.2377h3.8028v7.2377h3.8028v-7.2377h3.8028v21.7129h-3.8028v7.2375h3.8028v7.2377h-3.8028v7.2375h7.6056v-7.2375h3.8028v-7.2377h-3.8028v-7.2375h3.8028v-7.2377h-3.8028v-7.2375h3.8028v-7.2377h-3.8028v-7.2375h3.8028v-7.2377h-3.8028V56.742h3.8028v-7.2376h-3.8028v-7.2376h3.8028v-7.2376h-3.8028v-7.2785h3.6802zm-7.5648 7.2785h-3.8028v7.2376h3.8028v7.2376h-3.8028v7.2376h3.8028v14.4752h-3.8028v-7.2376h-3.8028v7.2376h-3.8028v-7.2376h-3.8028v7.2376h-3.8028V56.742h3.8028v-7.2376h-3.8028v-7.2376h3.8028v-7.2376h-3.8028V20.513h3.8028v7.2376h3.8028V20.513h3.8028v7.2376h3.8028V20.513h3.8028v14.5161zm-43.4665 50.704h-3.7619v7.2377h7.5648v-7.2377zm11.4084 7.2377h3.762v-7.2377h-7.5648v7.2377zm-11.4084 7.2376h-3.7619v7.2375h7.5648v-7.2375zm11.4084 7.2375h3.762v-7.2375h-7.5648v7.2375zm-24.616 14.5161h3.8028v-7.2784h-7.6056v7.2784zm6.1336-101.449v-7.2376h-3.8028v14.4752h3.8028zm-3.8028 14.5161h3.8028v7.2376h-3.8028z"}),reactExports.createElement("path",{d:"M242.4857 42.2668h6.1336v7.2376h-6.1336zm6.1336 7.2376h3.8028v7.2376h-3.8028zm1.4721 21.7128h3.8028v7.2376h-3.8028zm0 14.516h3.8028v7.2376h-3.8028zm-11.3676 7.2377v7.2376h-3.8028v7.2375h3.8028v7.2377h3.7619v-7.2377h3.8028v-7.2375h-3.8028V85.7332h-3.7619zm11.3676 14.4751h3.8028v7.2376h-3.8028zm-14.6797-86.9329v7.2376h3.8028V13.2755h2.8215v14.4752h3.7619V13.2755h2.6987V6.0379h-19.7091v7.2376h-3.8029V6.0379h-19.7091v7.2376h2.6988v14.4752h3.8027V13.2755h2.8215v14.4752h3.7619V13.2755h2.8623v14.4752h3.7619v-7.2376h3.8029v7.2376h3.8028V13.2755h2.8214zm27.8872-14.4752h3.8028v7.2376h-3.8028zm0 14.4752h3.8028v7.2376h-3.8028zm0 14.5161h3.8028v7.2376h-3.8028zm0 14.4752h3.8028v7.2376h-3.8028zm0 28.9912h3.8028v7.2376h-3.8028zm0 14.4752h3.8028v7.2376h-3.8028zm.0001 21.3039h-7.5648v7.2376h7.5648v-6.8286h3.8027v6.8286h7.5648v-7.2376h-7.5648v-6.8287h-3.8027z"}))),SvgQizzio01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M55.075 55.2705h94.0255V66.399H55.075z"}),reactExports.createElement("path",{strokeWidth:.3544,d:"M107.65 55.2698v52.5947H96.5215V55.2698zm124.3123-31.9277v89.2055h-7.3009V23.3421z"}),reactExports.createElement("path",{d:"M149.1005 55.4832h7.9742c0 3.0125 3.296 7.3009 6.8756 7.3009 3.5796 0 6.8756-2.41 6.8756-5.4226 0-2.658-2.3745-4.9263-5.5997-5.3161l-3.7922-.071v-7.159l3.7922-.071c3.1897-.3543 5.5997-2.658 5.5997-5.387 0-2.977-3.296-5.387-6.8756-5.387-3.5795 0-6.8756 4.6428-6.8756 7.6198h-7.9742c0-6.911 6.4148-14.8498 14.8498-14.8498 8.3642 0 15.5942 5.6706 15.5942 12.5816 0 3.5087-1.7012 6.7338-4.5365 9.002 2.8353 2.2683 4.5365 5.4935 4.5365 8.9667 0 6.982-7.23 12.5816-15.5942 12.5816-8.435.0709-14.8498-7.4072-14.8498-14.3891zm124.3277 53.6225c-.319 0-.638-.1063-.886-.3544-.4962-.4962-.4962-1.2759 0-1.772l91.1193-91.1548c.4962-.4962 1.2759-.4962 1.772 0 .4963.4961.4963 1.2758 0 1.772l-91.1192 91.1548c-.2481.248-.5671.3544-.886.3544z"}),reactExports.createElement("path",{d:"M455.6669 109.1057c-.319 0-.638-.1063-.886-.3544L363.6615 17.632c-.4962-.4962-.4962-1.276 0-1.7721.4962-.4962 1.2759-.4962 1.772 0l91.1194 91.1193c.4962.4962.4962 1.276 0 1.772-.248.2482-.567.3545-.886.3545z"}))),SvgRkhairunnas01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M145.8704 8.9204h-83.892C47.4848 8.9204 35.75 20.655 35.75 35.1488V46.767h83.892c14.4936 0 26.2284-11.7348 26.2284-26.2284V8.9204z"}),reactExports.createElement("path",{d:"M109.6947 92.8512v-46.123H98.0765c-14.4937 0-26.2285 11.7347-26.2285 26.2283v46.1231h11.6183c14.4936 0 26.2284-11.7347 26.2284-26.2284zM247.1703 8.9204h-83.9308v11.6182c0 14.4936 11.7347 26.2284 26.2284 26.2284h83.892V35.1488c0-14.4937-11.7348-26.2284-26.1895-26.2284zm100.0565 83.892V8.9204h-11.6182c-14.4547 0-26.1895 11.7347-26.1895 26.2284v83.892h11.6182c14.4547 0 26.1895-11.7348 26.1895-26.2284zm71.9242 0V8.9204h-11.6183c-14.4936 0-26.2284 11.7347-26.2284 26.2284v83.892h11.6571c14.4548 0 26.1895-11.7348 26.1895-26.2284zm55.099 26.2284v-83.892c0-14.4937-11.7348-26.2284-26.2284-26.2284h-11.6182v83.892c0 14.4936 11.7348 26.2284 26.2284 26.2284H474.25zM273.3599 81.233h-83.892c-14.4937 0-26.2285 11.7348-26.2285 26.2284v11.6182h83.892c14.4937 0 26.2285-11.7347 26.2285-26.2284V81.233z"}))),SvgSantiagoItzcoatl03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M63.39 57.1554h82.6357V39.1163H66.3098L159.265 8.7579V25.397h82.4357l21.9989 31.2384c.12.2.36.28.56.28v.24h63.0367v-.24c.16 0 .32-.04.44-.16l38.198-31.3984v.04H448.57V7.358H159.625c-.12-.04-.2-.04-.32 0h-.04L63.83 38.4763c-.28.08-.48.36-.48.64v18.039h.04zM365.9743 8.9179V23.637l-38.638 31.7584V40.6762c.16 0 .32-.04.44-.16l38.198-31.5983zm-1.92-.2-36.718 30.4384v-.04h-62.8367l-21.279-30.3984h120.8338zM263.7397 40.3962c.12.2.36.28.56.28v14.3593l-21.839-30.9585c-.12-.2-.36-.28-.56-.28V9.1979l21.8389 31.1983z"}),reactExports.createElement("path",{d:"M159.265 27.8769h18.0791v8.7596H159.265zm206.7093 0h18.0791v8.7596h-18.0791zm64.5566 0H448.61v8.7596h-18.0791zm-125.6734 72.2762V59.6352h-18.0791v38.638l-21.6389-30.2784c-.16-.2-.4-.32-.64-.28h-17.3589c-.36 0-.68.32-.68.68v1.2399l-21.159-29.9984c-.1199-.2-.3599-.28-.5599-.28v-.24H159.265v18.079h65.4766V41.1962l21.7189 30.7984v.76c0 .3599.32.6799.68.6799h17.279c.36 0 .68-.32.68-.68v-2.4798l21.159 29.5984c.1199.2.3599.28.5599.28h18.039zm-41.118-28.1185h-15.879v-2.9599h15.879v2.9599z"}),reactExports.createElement("path",{d:"M384.0134 87.7138V59.6352h-18.0791c-.12 0-.24.04-.36.12l-39.358 30.0385-.04.04-.04.04-.04.04-.04.04s-.04.04-.04.08c0 0 0 .04-.04.04 0 .04 0 .04-.04.08v12.4793h-61.4368l-21.9988-31.2384c-.12-.2-.36-.28-.56-.28v-.24H159.265v17.8391c-.08.2-.04.48.12.64l25.1587 29.9584h-70.8363v-58.237h45.5576v7.3197h18.079v-8.7596h-18.079v.08h-45.5576v-.08h-18.079v61.0369h249.3469c.16 0 .32-.04.44-.16l38.438-31.5984h.2v-.16c.28-.24.32-.68.08-.96-.04-.04-.08-.08-.12-.08zm-120.2738 16.1991c.12.2.36.28.56.28v14.5993l-22.3989-31.7584V72.9145l21.8389 30.9984zm-77.396 15.3992c0-.04-.04-.04-.04-.08L160.825 88.9137h80.7158l21.439 30.3984h-76.636zm140.9927-16.6791V90.7136l38.638-29.4785v26.3187c-.16 0-.32.04-.44.16l-38.198 31.3983V102.633zm17.3991 16.6791h-15.4792l36.958-30.3984h15.4793l-36.9581 30.3984zM448.61 87.9938V58.9953h-18.079v.6h-.04l-39.038 32.1183c-.16.12-.24.32-.24.52v27.7985c0 .08 0 .12.04.16v.04c0 .04.04.08.04.12v.04l.12.12s.04 0 .04.04c.04.04.08.04.12.08h.04c.04 0 .08.04.12.04h18.279c.16 0 .32-.04.44-.16l37.958-31.8384c.2-.16.24-.44.2-.68zm-55.997 4.5597 37.918-31.1984v25.8787l-37.918 31.3584V92.5535zm17.119 26.7586h-15.9192l37.5981-31.0784h15.3592l-37.038 31.0784z"}),reactExports.createElement("path",{d:"M325.9764 86.4338v.04c0 .04 0 .04.04.08 0 .04 0 .04.04.04l.04.04c0 .04.04.04.04.08l.04.04.08.08.04.04c.04 0 .04.04.08.04 0 0 .04 0 .04.04.04 0 .08.04.12.04h.2c.08 0 .12 0 .2-.04h.04c.08-.04.12-.04.16-.08l38.918-29.7184H448.65v-18.039h-82.5957c-.16 0-.36.04-.52.16l-39.318 33.1982c-.16.12-.24.32-.24.52v13.4393zm39.9979-45.7576v14.7992c-.04.04-.08.04-.12.08l-38.478 29.3985V73.2745l38.598-32.5983z"}))),SvgSantiagoItzcoatl04=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M376.0022 48.8862c-.7688 0-1.3978-.629-1.3978-1.3979v-.0349c0-.7688.629-1.3978 1.3978-1.3978.7688 0 1.3978.629 1.3978 1.3978v.035c0 .7687-.629 1.3978-1.3978 1.3978zm0 33.0582c-.7688 0-1.3978-.629-1.3978-1.3978v-.0699c0-.7688.629-1.3629 1.3978-1.3629.7688 0 1.3978.629 1.3978 1.3979v.035c0 .7687-.629 1.3977-1.3978 1.3977zM261.731 113.535h-46.7218c-17.7173 0-32.2196-14.048-32.9884-31.5906h-46.023c-.7688 0-1.3978-.629-1.3978-1.3978V47.4534c0-.7688.629-1.3978 1.3978-1.3978h46.023c.7688-17.5426 15.271-31.5906 32.9884-31.5906h46.7218c.7688 0 1.3978.629 1.3978 1.3978 0 .7688-.629 1.3978-1.3978 1.3978-16.1797 0-29.4589 12.79-30.1927 28.795h45.324c.7688 0 1.3979.629 1.3979 1.3978v33.1281c0 .7688-.629 1.3978-1.3979 1.3978h-45.324c.7688 16.005 14.013 28.795 30.1927 28.795.7688 0 1.3978.629 1.3978 1.3978s-.629 1.3629-1.3978 1.3629zM137.3956 79.1488h45.988c.7688 0 1.3979.629 1.3979 1.3978.035 16.634 13.5937 30.1927 30.2276 30.1927h33.4776c-11.6018-5.102-19.744-16.7038-19.779-30.1927 0-.3844.1398-.7339.4193-.9785.2447-.2446.629-.4193.9785-.4193h45.359V48.8163h-45.359c-.3844 0-.7338-.1398-.9785-.4194-.2446-.2446-.4193-.629-.4193-.9785.035-13.4539 8.1772-25.0557 19.779-30.1578h-33.4776c-16.634 0-30.2276 13.5588-30.2276 30.1928 0 .7688-.629 1.3978-1.3979 1.3978h-45.988v30.2976z"}),reactExports.createElement("path",{d:"M308.4878 113.535H261.731c-18.1715 0-32.9883-14.7819-33.0233-32.9534 0-.3845.1398-.7339.4194-.9785.2446-.2446.629-.4194.9784-.4194h46.7219c.7688 0 1.3978.629 1.3978 1.3978 0 10.938 5.9757 21.072 15.5856 26.3838 4.473 2.481 9.54 3.809 14.677 3.809.7688 0 1.3979.629 1.3979 1.3978s-.629 1.3629-1.3979 1.3629zm-76.9495-31.5906c.7688 16.005 14.013 28.795 30.1927 28.795h33.4776c-.9435-.4194-1.852-.8737-2.7607-1.363-10.0642-5.5912-16.4592-16.0049-16.9834-27.432h-43.9262zm45.324-33.1281h-46.7568c-.3844 0-.7338-.1398-.9784-.4194-.2447-.2446-.4194-.629-.4194-.9784.035-18.1716 14.8518-32.9535 33.0233-32.9535h46.7219c.7688 0 1.3978.629 1.3978 1.3979s-.629 1.3978-1.3978 1.3978c-5.137 0-10.204 1.3279-14.677 3.809-9.575 5.3466-15.5507 15.4458-15.5856 26.3837.0349.7688-.5592 1.3629-1.328 1.3629zm-45.324-2.7607h43.9612c.4892-11.4271 6.9191-21.8408 16.9834-27.432.9086-.4893 1.8172-.9436 2.7607-1.363H261.766c-16.2146 0-29.459 12.79-30.2277 28.795z"}),reactExports.createElement("path",{d:"M344.3767 113.535h-35.8889c-5.5912 0-11.1475-1.4328-16.005-4.1585-10.4835-5.8359-16.9833-16.8786-17.0183-28.8299V47.4184c.035-11.9512 6.5348-22.994 17.0184-28.7949 4.8574-2.7257 10.4137-4.1585 16.005-4.1585h35.8888c5.5912 0 11.1475 1.4328 16.005 4.1585 10.4486 5.801 16.9833 16.8437 17.0183 28.8299v33.1281c0 .2097-.035.4194-.1398.629-.035.07-.0699.1398-.1048.1748-.2447.3494-.664.594-1.1532.594h-64.2295v5.766c0 2.9005 2.3763 5.2768 5.2767 5.2768h55.7727c.4893 0 .9086.2446 1.1882.664.2446.4193.2795.9085.0699 1.3628-3.0053 6.1154-7.723 11.1126-13.6636 14.3975-4.8924 2.6558-10.4487 4.0886-16.04 4.0886zm-35.8889-96.2743c-5.137 0-10.204 1.3279-14.677 3.809-9.575 5.3466-15.5506 15.4458-15.5856 26.3837v33.0932c0 10.9379 5.9757 21.072 15.5856 26.3837 4.473 2.4811 9.54 3.809 14.677 3.809h35.8889c5.137 0 10.204-1.3279 14.677-3.809 4.7875-2.6558 8.7014-6.4998 11.462-11.1825h-53.4663c-4.438 0-8.0374-3.5994-8.0374-8.0374v-7.1638c0-.7688.629-1.3978 1.3978-1.3978h64.2295V47.4185c-.035-10.938-5.9756-21.072-15.5856-26.3838-4.473-2.481-9.54-3.774-14.677-3.774h-35.8889zm34.3163 31.5556H310.375c-.7688 0-1.3978-.629-1.3978-1.3978v-7.1289c0-4.438 3.5993-8.0374 8.0374-8.0374h19.115c4.4381 0 8.0375 3.5994 8.0375 8.0374v7.1638c.035.7688-.594 1.3629-1.3629 1.3629zm-31.0314-2.7607h29.6336v-5.766c0-2.9005-2.3763-5.2767-5.2767-5.2767h-19.1151c-2.9005 0-5.2767 2.3762-5.2767 5.2767v5.766h.035z"}),reactExports.createElement("path",{d:"M310.3749 81.8745h-33.5475c-.7688 0-1.3978-.629-1.3978-1.3978V47.4534c0-.7688.629-1.3978 1.3978-1.3978h33.5475c.7688 0 1.3978.629 1.3978 1.3978v33.0583c0 .7688-.629 1.3628-1.3978 1.3628zm-32.1497-2.7607h30.7519V48.8163h-30.7519v30.2975z"}))),SvgSomfay03=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M188.2668 10.3093h-81.7132c-1.4168 0-2.5835-1.1667-2.5835-2.5835v-.2083c0-1.4168 1.1667-2.5835 2.5835-2.5835h81.7132c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c.0416 1.4585-1.125 2.6252-2.5835 2.6252zm0 8.0421h-81.7132c-1.4168 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1667-2.5835 2.5835-2.5835h81.7132c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c.0416 1.4168-1.125 2.5835-2.5835 2.5835zm0 8.0422h-81.7132c-1.4168 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1667-2.5835 2.5835-2.5835h81.7132c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4167-1.125 2.5835-2.5835 2.5835zm110.6316-16.0843h-23.543c-1.4168 0-2.5836-1.1667-2.5836-2.5835v-.2083c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4585-1.1668 2.6252-2.5835 2.6252zm0 8.0421h-23.543c-1.4168 0-2.5836-1.1667-2.5836-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 16.1259h-30.7102c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h30.7102c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5834-2.5835 2.5834zm97.1308 0h-23.3764c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5834-2.5835 2.5834zm0 8.0422h-65.1706c-1.4167 0-2.5834-1.1668-2.5834-2.5835v-.1667c0-1.4167 1.1667-2.5835 2.5835-2.5835h65.1705c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm0 8.0421h-69.0041c-1.4168 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1667-2.5835 2.5835-2.5835h69.0041c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1666c.0417 1.4168-1.125 2.5835-2.5835 2.5835zm0 8.0839h-23.3764c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm0 8.0421h-23.3764c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c.0417 1.4168-1.125 2.5835-2.5835 2.5835zm0 8.0422h-23.3764c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm0 8.0838h-23.3764c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm0 8.0422h-23.3764c-1.4167 0-2.5835-1.1668-2.5835-2.5836v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.3764c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c.0417 1.4168-1.125 2.5835-2.5835 2.5835zm9.4172 8.042h-32.7936c-1.4167 0-2.5835-1.1667-2.5835-2.5834v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h32.7936c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1667 2.5835-2.5835 2.5835zm0 8.0422h-32.7936c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h32.7936c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1667 2.5835-2.5835 2.5835zm0 8.0838h-32.7936c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5834 2.5835-2.5834h32.7936c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1667 2.5835-2.5835 2.5835zm-57.0867-56.3783h-23.3764c-1.4168 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1667-2.5835 2.5835-2.5835h23.3764c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm-1.5001 8.0421h-23.3764c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.3764c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm-.4584 8.0422h-24.0014c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h24.0014c1.4168 0 2.5835 1.1667 2.5835 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5835 2.5835zm-1.0834 8.0838h-24.0014c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h24.0014c1.4168 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4167-1.1667 2.5835-2.5835 2.5835zm-.4167 8.0422h-24.0014c-1.4167 0-2.5835-1.1668-2.5835-2.5836v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h24.0015c1.4167 0 2.5834 1.1668 2.5834 2.5835v.1667c0 1.4168-1.1667 2.5835-2.5834 2.5835zm15.0843 8.042h-39.0857c-1.4167 0-2.5835-1.1667-2.5835-2.5834v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h39.0857c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-36.9606c-1.4167 0-2.5834-1.1667-2.5834-2.5835v-.1667c0-1.4167 1.1667-2.5835 2.5835-2.5835h36.9605c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0838h-31.1269c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5834 2.5835-2.5834h31.1269c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1668 2.5835-2.5835 2.5835zm1.6251-80.5465h-25.1682c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h25.1682c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5834-2.5835 2.5834zm-62.7121 8.0422h-30.7102c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h30.7102c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0421h-30.7102c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h30.7102c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0839h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0421h-23.543c-1.4168 0-2.5836-1.1667-2.5836-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0838h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-23.543c-1.4168 0-2.5836-1.1668-2.5836-2.5836v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h23.5431c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm7.5838 8.042H275.397c-1.4167 0-2.5835-1.1667-2.5835-2.5834v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h31.0852c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c0 1.4167-1.1668 2.5835-2.5835 2.5835zm0 8.0422h-28.6684c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h28.6684c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c0 1.4168-1.1668 2.5835-2.5835 2.5835zm0 8.0838H281.189c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5834 2.5835-2.5834h25.2932c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c0 1.4168-1.1668 2.5835-2.5835 2.5835zm-145.467-88.5886h-27.2517c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4168-1.1251 2.5835-2.5835 2.5835zm0 8.0421h-27.2517c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5834-2.5835 2.5834zm0 8.0422h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5835-2.5835 2.5835zm0 8.0421h-27.2517c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1666c0-1.4168 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1666c.0416 1.4168-1.1251 2.5835-2.5835 2.5835zm0 8.0839h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5835-2.5835 2.5835zm0 8.0421h-27.2517c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4168-1.1251 2.5835-2.5835 2.5835zm0 8.0422h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4168 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1667 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5835-2.5835 2.5835zm0 8.0838h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4167-1.1251 2.5835-2.5835 2.5835zm0 8.0422h-27.2517c-1.4167 0-2.5835-1.1668-2.5835-2.5836v-.1667c0-1.4167 1.1668-2.5835 2.5835-2.5835h27.2517c1.4167 0 2.5835 1.1668 2.5835 2.5835v.1667c.0416 1.4168-1.1251 2.5835-2.5835 2.5835zm10.5423 8.042h-37.0023c-1.4167 0-2.5834-1.1667-2.5834-2.5834v-.1667c0-1.4168 1.1667-2.5835 2.5834-2.5835h37.0023c1.4167 0 2.5834 1.1667 2.5834 2.5835v.1667c.0417 1.4167-1.125 2.5835-2.5834 2.5835zm0 8.0422h-35.5438c-1.4168 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1667-2.5835 2.5835-2.5835h35.5438c1.4167 0 2.5834 1.1668 2.5834 2.5835v.1667c.0417 1.4168-1.125 2.5835-2.5834 2.5835zm0 8.0838h-31.2936c-1.4167 0-2.5835-1.1667-2.5835-2.5835v-.1667c0-1.4167 1.1668-2.5834 2.5835-2.5834h31.2936c1.4167 0 2.5834 1.1667 2.5834 2.5835v.1666c.0417 1.4168-1.125 2.5835-2.5834 2.5835zm76.3379-80.5465h-49.0446c-1.1251 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9167-2.0418 2.0418-2.0418h49.0446c1.125 0 2.0417.9168 2.0417 2.0418v1.3334c0 1.1251-.9167 2.0418-2.0417 2.0418zm5.8753 8.0422h-62.587c-1.1251 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9167-2.0418 2.0417-2.0418h62.5871c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c-.0417 1.125-.9167 2.0418-2.0418 2.0418zm0 8.0421h-66.2123c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9168-2.0418 2.0418-2.0418h66.2123c1.125 0 2.0418.9168 2.0418 2.0418v1.3334c-.0417 1.1668-.9167 2.0418-2.0418 2.0418zm-41.8775 8.0839h-26.335c-1.125 0-2.0417-.9168-2.0417-2.0418v-1.3334c0-1.1251.9167-2.0418 2.0418-2.0418h26.3349c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c0 1.125-.9167 2.0418-2.0418 2.0418zm40.5024-.6251h-19.6261c-1.1251 0-2.0418-.9167-2.0418-2.0418v-.125c0-1.125.9167-2.0418 2.0418-2.0418h19.6261c1.125 0 2.0418.9167 2.0418 2.0418v.125c0 1.1668-.9167 2.0418-2.0418 2.0418zm-42.3776 8.6672h-24.4597c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9167-2.0418 2.0418-2.0418h24.4598c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c0 1.125-.9167 2.0418-2.0418 2.0418zm40.0442 0h-18.7928c-1.1251 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9167-2.0418 2.0418-2.0418h18.7928c1.125 0 2.0417.9167 2.0417 2.0418v1.3334c0 1.125-.9167 2.0418-2.0418 2.0418zM210.018 82.772h-24.4597c-1.125 0-2.0418-.9168-2.0418-2.0418v-1.3334c0-1.1251.9167-2.0418 2.0418-2.0418h24.4598c1.125 0 2.0418.9167 2.0418 2.0417v1.3335c0 1.1667-.9167 2.0418-2.0418 2.0418zm36.1273 0h-26.2516c-1.125 0-2.0418-.9168-2.0418-2.0418v-1.3334c0-1.1251.9167-2.0418 2.0418-2.0418h26.2516c1.125 0 2.0417.9167 2.0417 2.0417v1.3335c0 1.1667-.9167 2.0418-2.0417 2.0418zm-5.5837 8.0838h-55.0033c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.1251.9167-2.0418 2.0418-2.0418h55.0033c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c0 1.125-.9168 2.0418-2.0418 2.0418zm-29.5435 8.0422h-25.4598c-1.125 0-2.0418-.9168-2.0418-2.0419v-1.3334c0-1.125.9167-2.0418 2.0418-2.0418h25.4598c1.1251 0 2.0418.9167 2.0418 2.0418v1.3334c0 1.125-.9167 2.0418-2.0418 2.0418zm37.0023 8.042h-60.087c-1.125 0-2.0417-.9167-2.0417-2.0417v-1.3334c0-1.1251.9167-2.0418 2.0417-2.0418h60.087c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c-.0417 1.125-.9168 2.0418-2.0418 2.0418zm0 8.0422h-56.8368c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9168-2.0418 2.0418-2.0418h56.8368c1.125 0 2.0417.9167 2.0417 2.0418v1.3334c-.0416 1.1668-.9167 2.0418-2.0417 2.0418zm0 8.0838h-49.128c-1.125 0-2.0418-.9167-2.0418-2.0418v-1.3334c0-1.125.9168-2.0418 2.0418-2.0418h49.128c1.125 0 2.0418.9167 2.0418 2.0418v1.3334c-.0417 1.1251-.9168 2.0418-2.0418 2.0418z"})),SvgSpencerLinkous01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","data-name":"Ebene 1",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:5,d:"M14.16 10.2598h107.4803m-53.7439 0h0v107.4804m107.4804 0H282.857M175.384 10.2597h107.4804m53.7439 107.4804h0V10.2597m53.7438 107.4804h0L444.096 10.2597l53.744 107.4805H390.3597",className:"cls-1"})),SvgSpencerLinkous02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M267.8165 10.5529v29.5973h-91.6069V10.5529h91.6069m1.955-1.955h-95.5168v33.5072h95.4776V8.598h.0391zm-1.955 79.2911v29.5972h-91.6069V87.889h91.6069m1.955-1.9549h-95.5168v33.5071h95.4776v-33.507h.0391zm60.4065-75.3812v106.9333h-29.5973V10.553h29.5973m1.955-1.955h-33.5072v110.8432h33.5071V8.598zm-188.6876 1.9549v29.5973h-31.0048v77.336H82.8433V40.1501H51.8776V10.553h91.5678m1.9549-1.955H49.9227v33.5072h31.0048v77.336h33.507v-77.336h31.0049V8.598h-.0391zm307.8195 110.8431h-92.1152c-.3519 0-.6256-.1564-.821-.4692-.1564-.2736-.1955-.6255-.0391-.9383l38.5507-77.297c.1564-.3128.5083-.5474.8602-.5474s.7037.1955.8601.5474l7.5069 15.0528a1.0953 1.0953 0 0 1 0 .8602l-22.1687 44.4154h75.2248c.3128 0 .6256.1564.821.4301.1956.2737.1956.6256.0392.9384l-7.8587 16.4603c-.1564.3127-.5083.5473-.8602.5473zm-90.5513-1.9158h89.9257l6.9595-14.5445h-75.2248c-.3519 0-.6256-.1564-.821-.4692-.1564-.2736-.1955-.6255-.0392-.9383l22.6379-45.393-6.4121-12.9023-37.026 74.2473z"}),reactExports.createElement("path",{d:"M461.0785 102.9808H384.329c-.3519 0-.6256-.1564-.821-.4692-.1565-.2737-.1956-.6255-.0392-.9383l8.2106-16.4603c.1564-.3128.5083-.5474.8602-.5474h42.7343L398.4824 9.9664c-.1564-.3128-.1173-.6647.0391-.9384.1564-.2737.4692-.4691.821-.4691h15.6784c.352 0 .7038.1954.8602.5473l46.0967 92.467c.1564.3129.1173.6648-.0391.9384-.1955.2737-.5083.4692-.8602.4692zm-75.1857-1.9158h73.6609l-45.1583-90.5512h-13.528l36.7913 74.5992c.1564.3128.1173.6647-.039.9383-.1565.2737-.4692.4692-.8211.4692H393.126l-7.2332 14.5445z"}),reactExports.createElement("path",{d:"M361.1046 119.4411c-.391 0-.7037-.2346-.8601-.5473l-7.8588-16.4994a1.0953 1.0953 0 0 1 0-.8602l46.0967-92.3889c.1564-.3127.5083-.5473.8602-.5473s.7038.1955.8602.5473l37.456 76.0068c.1563.3128.1172.6647-.0391.9383-.1955.2737-.5083.4692-.8211.4301l-15.0919-.1955c-.3519 0-.7037-.1955-.8601-.5473L399.6554 43.317l-37.6906 75.5767c-.1564.3127-.4692.5473-.8602.5473zm-6.803-17.4377 6.8421 14.2708 37.6906-75.5376c.1564-.3128.5083-.5474.8602-.5474s.7037.1955.8601.5474l21.7777 43.6726 12.9415.1955-35.9312-72.8789-45.041 90.2776z"}))),SvgSpencerLinkous04=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M168.9861 5.0551h101.5474v35.6372H168.9861zm0 82.2526h101.5474v35.6372H168.9861zM301.2638 5.0551h35.6372v117.8898h-35.6372zm-162.9664 0H36.75v35.6372h32.9343v82.2526h35.6372V40.6923h32.9759z"}),reactExports.createElement("path",{fill:"none",d:"M417.1992 56.6189 402.0627 86.975h30.2729z",className:"st0"}),reactExports.createElement("path",{d:"m409.0072 40.235-8.6078 17.2987-32.6432 65.4112h99.385l8.1088-16.9246h-83.001c-.1664 0-.3327-.0831-.4575-.2495-.0831-.1663-.1247-.3326-.0415-.499l8.9404-17.9641 15.885-31.8115-7.5682-15.2612z"}),reactExports.createElement("path",{d:"M393.1222 104.9807H475.25L425.4328 5.0551h-15.9266l40.5441 82.211c0 .0416.0416.0831.0416.1247v.2911c0 .0416 0 .0416-.0416.0832-.0832.1247-.2495.2079-.4158.2495h-48.0708l-8.4415 16.9661zm8.4415-16.9245-8.4415 16.9245 8.4415-16.9245z"}),reactExports.createElement("path",{d:"m448.7196 86.975-22.7463-46.158L408.633 5.7206l-49.734 99.7177 8.0256 16.7998 41.6253-83.417c.0831-.1662.291-.291.4574-.291s.3742.1247.4574.291l23.9106 47.946 15.3444.208zM408.6329 5.7205l17.3404 35.0966z"}))),SvgSpencerLinkous05=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M148.1698 8.5686H59.5433c-6.0676 0-11 4.9324-11 11 0 6.1068 4.9324 11.0392 11.0391 11.0392h88.6265c6.1068 0 11.0392-4.9324 11.0392-11.0392-.0392-6.0676-4.9716-11-11.0783-11zm128.2813 0h-88.6265c-6.1067 0-11.0391 4.9324-11.0391 11.0392 0 6.1067 4.9324 11.0391 11.0391 11.0391h88.6265c6.1068 0 11.0392-4.9324 11.0392-11.0391 0-6.1068-4.9324-11.0392-11.0392-11.0392zm0 44.0784h-88.6265c-6.1067 0-11.0391 4.9324-11.0391 11.0391 0 6.1068 4.9324 11.0392 11.0391 11.0392h88.6265c6.1068 0 11.0392-4.9324 11.0392-11.0392 0-6.1068-4.9324-11.0391-11.0392-11.0391zm77.5874 55.8221v-89.331c0-6.1069-4.9324-10.6478-11.0392-10.6478-6.1068 0-11.0392 4.541-11.0392 10.6477v89.292c0 6.1068 4.9324 11.0391 11.0392 11.0391 6.1068 0 11.0392-4.9323 11.0392-11zm62.9075 4.7367 45.2528-88.3133c2.7793-5.4022.822-12.3702-4.5801-15.1495-5.4021-2.936-12.2527-.3523-15.032 5.089l-45.2528 88.3133c-2.7794 5.4021-.6263 12.4484 4.7758 15.2278 5.4413 2.7793 12.057.2348 14.8363-5.1673z"})),SvgTamasAntal01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M308.0824 36.8185c-.7879-1.5343-2.4051-2.3222-4.0223-2.1978h-.0415c-.1244 0-.2488.0415-.3732.0415-.0414 0-.083 0-.083.0415-.0828.0414-.2072.0414-.2902.083-.0414 0-.083.0414-.1244.0414-.083.0414-.1658.0414-.2488.083-.0414.0414-.1244.0414-.1658.0828-.083.0415-.1244.0415-.2074.083l-15.011 7.9616-14.472 7.6714c-.0414.0414-.1243.083-.1658.083-.0414.0414-.1244.0828-.1658.0828-.083.0415-.1244.083-.2074.166-.0414.0414-.083.0414-.1244.0828-.083.083-.1658.1244-.2073.2074l-.083.0829-.2487.2488-.0415.0415c-.083.0829-.1659.2073-.2073.2902-.8294 1.244-.9952 2.8612-.2488 4.2711v.0415c1.2025 2.3636 1.783 4.9346 1.783 7.6299 0 4.271-1.5757 8.3763-4.437 11.5278-1.5342 1.7001-1.4098 4.3125.2903 5.8468.788.705 1.7831 1.0781 2.7783 1.0781 1.1196 0 2.2392-.456 3.0686-1.3684 4.271-4.6857 6.5932-10.7399 6.5932-17.0843 0-2.6539-.4147-5.2248-1.2025-7.7128l7.2567-3.8565c1.3684 3.6906 2.0319 7.547 2.0319 11.5693 0 4.0637-.705 8.0031-2.1149 11.7766-.7878 2.1148.2903 4.5199 2.4051 5.3077.4976.166.9538.2488 1.4514.2488 1.6586 0 3.2344-1.0366 3.8564-2.6953 1.7416-4.6858 2.6539-9.6203 2.6539-14.6793 0-5.3077-1.0367-10.574-2.9442-15.4256l7.7958-4.1467c2.6124 6.1785 3.9393 12.7303 3.9393 19.5723 0 16.421-8.003 31.8466-21.4383 41.3425-1.866 1.327-2.3222 3.8979-.9952 5.7639.7878 1.1196 2.0733 1.7416 3.3588 1.7416.8293 0 1.6587-.2488 2.3636-.7464 15.633-11.0302 24.963-28.9853 24.963-48.06-.0829-9.3716-2.405-18.7846-6.7176-27.1194zm-37.4031 75.5111c-3.4418 1.0367-7.008 1.7002-10.6155 2.0319V89.0667c.9952-.1659 1.9904-.3732 2.9856-.6635 2.1977-.622 3.4417-2.9441 2.8197-5.1004-.622-2.1977-2.9441-3.4417-5.1004-2.8197-3.11.9122-6.5103.9122-9.5788 0-2.1978-.622-4.4785.622-5.1005 2.8197-.622 2.1978.622 4.4784 2.8198 5.1004.9952.2903 1.949.4976 2.9856.6635v25.2948c-3.6905-.2903-7.3396-.9952-10.9058-2.1148-2.1563-.6635-4.4784.539-5.1833 2.6953-.6635 2.1563.539 4.4785 2.6953 5.1834 5.6395 1.7416 11.5278 2.6539 17.4576 2.6539 5.8468 0 11.6107-.8708 17.1672-2.5295 2.1978-.6635 3.4003-2.9856 2.7368-5.1419-.7049-2.1977-3.027-3.4417-5.1833-2.7783zM222.163 26.4103c8.252-7.4226 18.6601-11.8595 29.6074-12.7718v25.2948c-.9952.1659-1.9904.3732-2.9856.6635-2.1978.622-3.4418 2.9441-2.8198 5.1004.539 1.8245 2.1563 2.9856 3.9394 2.9856.3732 0 .7878-.0415 1.161-.1659 3.11-.9123 6.5103-.9123 9.5789 0 2.1977.622 4.4784-.622 5.1004-2.8197.622-2.1978-.622-4.4785-2.8198-5.1005-.9537-.2902-1.9489-.4975-2.9856-.6634V13.6385c10.9888.9123 21.3555 5.3492 29.6074 12.7718.7878.705 1.783 1.0367 2.7368 1.0367 1.1196 0 2.2392-.4562 3.0685-1.3684 1.5343-1.7002 1.3684-4.3126-.3317-5.8469-10.6155-9.6618-24.5484-15.011-39.1032-15.011-14.5134 0-28.4463 5.3492-39.2692 15.0525-1.7 1.5343-1.8245 4.1467-.3317 5.8468 1.5758 1.6587 4.1882 1.783 5.8468.2903z"}),reactExports.createElement("circle",{cx:486.4639,cy:-139.1956,r:26.3,transform:"matrix(.40932 -.06643 .06643 .40932 66.0468 153.269)"}),reactExports.createElement("path",{d:"M243.6843 81.8515c1.6173-1.6172 1.6173-4.2296 0-5.8469-1.6172-1.6172-4.2296-1.6172-5.8468 0l-8.4178 8.4593c-4.5198-5.8468-6.9664-12.9791-6.9664-20.4846 0-3.9394.705-7.8787 2.0319-11.5278l10.5326 5.598c.622.3317 1.2854.4976 1.949.4976 1.4927 0 2.9026-.7879 3.649-2.1977 1.0781-2.032.2903-4.52-1.7001-5.598l-29.1098-15.4257-.3732-.2074c-1.949-1.0366-4.354-.3317-5.4736 1.4929l-.0415.0414C199.5221 45.029 197.2 54.442 197.2 63.9793c0 15.633 6.0542 30.3537 17.0843 41.4253.788.8294 1.866 1.2026 2.9442 1.2026.9123 0 1.866-.3317 2.6124-.9123.083-.083.2073-.1659.2903-.2488l12.0254-12.0254 11.5277-11.5692zm-34.3345-37.4446 7.7958 4.1467c-1.949 4.893-2.9442 10.1594-2.9442 15.4257 0 9.7032 3.2759 18.9088 9.3715 26.3314l-6.22 6.22c-7.7128-9.0812-11.901-20.526-11.901-32.5514-.0415-6.7177 1.327-13.3938 3.8979-19.5724z"}))),SvgThequrator01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M223.2474 42.9233h31.025v10.8752h-31.025zm0 30.0811h31.025v10.8752h-31.025zm-27.742-30.0811h-12.9271v10.8341h12.9271v30.1222h10.8342V53.7574h12.9271V42.9233h-12.9271zm65.9077 0h10.8752v40.9563h-10.8752zm46.0861 0h-27.9471v40.9563h10.8752V73.0044h17.113v10.8752h10.8751V42.9233h-10.9162zm-17.113 19.206v-8.3719h17.113v8.3718h-17.113z"}),reactExports.createElement("path",{strokeWidth:.4104,d:"m151.2491 65.0586 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zm14.5705.0035 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zm165.7939.0021 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zm14.5705.0035 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zM243.2284 27.686l7.2836-7.2837 7.2836 7.2836-7.2836 7.2836zm.0036-14.5706 7.2835-7.2836 7.2836 7.2836-7.2836 7.2836zm.0143 101.7684 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836zm-.0255-14.5995 7.2836-7.2836 7.2836 7.2836-7.2836 7.2836z"}),reactExports.createElement("path",{d:"M292.6433 104.0294h10.3006V114.33h-10.3006zm-10.3006-10.3006h10.3006v10.3006h-10.3006zm-89.3816 10.3006h10.3006V114.33h-10.3006zm10.3006-10.3006h10.3006v10.3006h-10.3006zm79.081-70.2988h10.3006v10.3006h-10.3006zm10.3006-10.3006h10.3006V23.43h-10.3006zm-99.6822 0h10.3006V23.43h-10.3006zM203.2617 23.43h10.3006v10.3006h-10.3006z"}))),SvgTofudog01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null",strokeWidth:.3507},reactExports.createElement("path",{d:"M129.0495 24.2257c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9258 4.4544 9.9258 9.926c0 5.5065-4.4544 9.9258-9.9259 9.9258s-9.9259-4.4193-9.9259-9.9259zm19.8872.0007c0-5.5066 4.4544-9.926 9.926-9.926s9.9259 4.4545 9.9259 9.926c0 5.5066-4.4544 9.926-9.926 9.926s-9.9259-4.4194-9.9259-9.926zm19.8867.0002c0-5.5066 4.4544-9.9259 9.926-9.9259s9.961 4.4544 9.961 9.926c0 5.5065-4.4545 9.9258-9.926 9.9258s-9.961-4.4193-9.961-9.9259zm35.214-.0008c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.926 4.4544 9.926 9.926c0 5.5066-4.4545 9.9259-9.926 9.9259s-9.926-4.4193-9.926-9.926zm19.8871.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.4715.0351-9.926-4.4193-9.926-9.9259zm19.8873-.0002c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9258 4.4544 9.9258 9.926c0 5.5065-4.4543 9.9258-9.9259 9.9258s-9.9259-4.4193-9.9259-9.9259zm39.7734.0003c0-5.5066 4.4543-9.926 9.9259-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926 0 5.5066-4.4544 9.9259-9.926 9.9259-5.4715.035-9.9258-4.4193-9.9258-9.926zm39.7744-.0007c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.5066.0351-9.926-4.4193-9.926-9.9259z"}),reactExports.createElement("path",{d:"M343.2111 24.2264c0-5.5066 4.4544-9.9259 9.926-9.9259 5.5065 0 9.9258 4.4544 9.9258 9.926 0 5.5065-4.4543 9.9258-9.9259 9.9258-5.4715.0351-9.9259-4.4193-9.9259-9.9259zm19.8869-.0004c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9258-9.926 9.9258s-9.9259-4.4193-9.9259-9.9259zM148.9368 44.1134c0-5.5066 4.4544-9.926 9.926-9.926s9.9258 4.4545 9.9258 9.926-4.4543 9.926-9.9259 9.926-9.9259-4.4194-9.9259-9.926zm55.1007-.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.9259 4.4544 9.9259 9.926-4.4544 9.9259-9.926 9.9259-9.9258-4.4194-9.9258-9.926zm79.5478.0007c0-5.5066 4.4543-9.926 9.9259-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926s-4.4544 9.9259-9.926 9.9259c-5.4715.035-9.9258-4.4193-9.9258-9.926zm39.774-.0007c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926s-4.4545 9.9258-9.926 9.9258c-5.5066.0351-9.926-4.4193-9.926-9.9259zm39.7387.0004c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926-4.4544 9.9258-9.926 9.9258-9.9259-4.4193-9.9259-9.9259zM148.937 64.0004c0-5.5066 4.4543-9.926 9.9258-9.926s9.926 4.4545 9.926 9.926c0 5.5066-4.4544 9.926-9.926 9.926s-9.9259-4.4194-9.9259-9.926zm55.1006-.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9259-9.926 9.9259s-9.9258-4.4194-9.9258-9.926zm19.8871.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.4715.0351-9.926-4.4193-9.926-9.9259zm19.8873-.0002c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9258 4.4544 9.9258 9.926c0 5.5065-4.4544 9.9258-9.9259 9.9258s-9.9259-4.4193-9.9259-9.9259zm39.7733-.0007c0-5.5067 4.4544-9.926 9.926-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926 0 5.5066-4.4544 9.9259-9.926 9.9259-5.4715.035-9.9259-4.4193-9.9259-9.926zm39.774.0003c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.5066.0351-9.926-4.4193-9.926-9.9259z"}),reactExports.createElement("path",{d:"M343.2111 63.9994c0-5.5066 4.4544-9.9259 9.926-9.9259 5.5065 0 9.9258 4.4544 9.9258 9.926 0 5.5065-4.4544 9.9258-9.9259 9.9258-5.4715.0351-9.9259-4.4193-9.9259-9.9259zm19.8869.0008c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9258-9.926 9.9258s-9.9259-4.4193-9.9259-9.9259zM148.937 83.8874c0-5.5066 4.4544-9.926 9.926-9.926s9.9258 4.4545 9.9258 9.926c0 5.5066-4.4543 9.926-9.9259 9.926s-9.9259-4.4194-9.9259-9.926zm55.1007-.0006c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9259-9.926 9.9259s-9.9258-4.4194-9.9258-9.926zm79.5478-.0003c0-5.5066 4.4543-9.926 9.9259-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926 0 5.5066-4.4544 9.9259-9.926 9.9259-5.4715.035-9.9258-4.4193-9.9258-9.926zm39.7738.0003c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926 0 5.5065-4.4545 9.9258-9.926 9.9258-5.5066.0351-9.926-4.4193-9.926-9.9259zm39.7387.0004c0-5.5066 4.4545-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926c0 5.5065-4.4544 9.9258-9.926 9.9258s-9.9258-4.4193-9.9258-9.9259zm-214.1609 19.8862c0-5.5066 4.4544-9.926 9.926-9.926s9.9258 4.4545 9.9258 9.926-4.4543 9.926-9.9259 9.926-9.9259-4.4194-9.9259-9.926zm55.1007.0004c0-5.5066 4.4544-9.9259 9.9259-9.9259s9.9259 4.4544 9.9259 9.926-4.4544 9.9259-9.926 9.9259-9.9258-4.4194-9.9258-9.926zm19.8871-.0004c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926s-4.4545 9.9258-9.926 9.9258c-5.4715.0351-9.926-4.4193-9.926-9.9259zm19.8863.0008c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9258 4.4544 9.9258 9.926-4.4544 9.9258-9.9259 9.9258-9.9259-4.4193-9.9259-9.9259zm39.7742-.0007c0-5.5066 4.4544-9.926 9.926-9.926 5.5066 0 9.9259 4.4544 9.9259 9.926s-4.4544 9.9259-9.926 9.9259c-5.4715.035-9.9259-4.4193-9.9259-9.926zm39.7739.0003c0-5.5066 4.4544-9.9259 9.9259-9.9259 5.5066 0 9.926 4.4544 9.926 9.926s-4.4545 9.9258-9.926 9.9258c-5.5066.0351-9.926-4.4193-9.926-9.9259zm39.7387-.0006c0-5.5066 4.4544-9.9259 9.926-9.9259s9.9259 4.4544 9.9259 9.926-4.4544 9.9258-9.926 9.9258-9.9259-4.4193-9.9259-9.9259z"}))),SvgTofudog02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M400.4148 42.4695c1.947-3.3212 1.947-7.444 0-10.7653-1.9469-3.3212-5.4971-5.3826-9.2764-5.3826-3.8938 0-7.444-2.0614-9.2765-5.3826-1.9469-3.3212-5.4971-5.3827-9.2764-5.3827-3.8939 0-7.444 2.0615-9.2765 5.3827-1.9469 3.3212-5.4971 5.3826-9.2764 5.3826-3.8939 0-7.444 2.0614-9.2765 5.3826-1.9469 3.3212-1.9469 7.444 0 10.7653 1.947 3.3212 1.947 7.444 0 10.7652-1.9469 3.3212-1.9469 7.4441 0 10.7653 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 5.4972 5.3827 9.2765 5.3827 3.8938 0 7.444-2.0615 9.2764-5.3827 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.444 0-10.7653 1.947-3.3212 5.4972-5.3826 9.2765-5.3826 3.8938 0 7.444 2.0614 9.2764 5.3826 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 5.4972 5.3827 9.2765 5.3827 3.8938 0 7.444-2.0615 9.2764-5.3827 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.444 0-10.7653 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.4441 0-10.7653 1.947-3.3212 1.947-7.444 0-10.7653-1.9469-3.3212-1.9469-7.444 0-10.7652zM363.08 53.2347c-1.947-3.3212-1.947-7.444 0-10.7652 1.9469-3.3212 5.4971-5.3826 9.2764-5.3826 3.8939 0 7.444 2.0614 9.2765 5.3826 1.9469 3.3212 1.9469 7.444 0 10.7652-1.947 3.3212-5.4972 5.3827-9.2765 5.3827s-7.3295-2.0615-9.2764-5.3827zm-47.642-23.1338a9.6229 9.6229 0 0 0 0-9.62c-1.7179-3.0922-4.9246-4.9246-8.3603-4.9246-3.4357 0-6.6424 1.8324-8.3602 4.81a9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.6201 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.6201 9.6229 9.6229 0 0 0 0 9.62c1.7178 2.9776 4.9245 4.81 8.3602 4.81 3.4357 0 6.6424-1.8324 8.3603-4.81a9.6229 9.6229 0 0 0 0-9.62 9.6229 9.6229 0 0 1 0-9.62 9.6229 9.6229 0 0 0 0-9.62 9.6229 9.6229 0 0 1 0-9.62 9.6229 9.6229 0 0 0 0-9.62 9.6229 9.6229 0 0 1 0-9.6201 9.6229 9.6229 0 0 0 0-9.62c-1.7179-2.8631-1.7179-6.5279 0-9.5055zm-62.5302 58.0637c-1.7178 2.9776-4.9245 4.81-8.3602 4.81-3.4357 0-6.6424-1.8324-8.3603-4.81a9.6229 9.6229 0 0 1 0-9.62c1.7179-2.9777 4.9246-4.81 8.3603-4.81 3.4357 0 6.6424-1.8324 8.3602-4.81a9.6229 9.6229 0 0 0 0-9.62c-1.7178-2.9777-4.9245-4.8101-8.3602-4.8101-3.4357 0-6.6424-1.8324-8.3603-4.81a9.6229 9.6229 0 0 1 0-9.62c1.7179-2.9777 4.9246-4.81 8.3603-4.81 3.4357 0 6.6424 1.8323 8.3602 4.81 1.718 2.9776 4.9246 4.81 8.3603 4.81 3.4357 0 6.6424-1.8324 8.3603-4.81a9.6229 9.6229 0 0 0 0-9.62c-1.7179-2.9777-4.9246-4.81-8.3603-4.81-3.4357 0-6.6424-1.8324-8.3603-4.81-1.7178-2.9777-4.9245-4.81-8.3602-4.81-3.4357 0-6.6424 1.8323-8.3603 4.81-1.7178 2.9776-4.9245 4.81-8.3602 4.81-3.4358 0-6.6424 1.8323-8.3603 4.81a9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62 9.6229 9.6229 0 0 1 0 9.62 9.6229 9.6229 0 0 0 0 9.62c1.7179 2.9777 4.9245 4.8101 8.3603 4.8101 3.4357 0 6.6424 1.8324 8.3602 4.81 1.7179 2.9776 4.9246 4.81 8.3603 4.81 3.4357 0 6.6424-1.8324 8.3602-4.81 1.718-2.9776 4.9246-4.81 8.3603-4.81 3.4357 0 6.6424-1.8324 8.3603-4.81a9.6229 9.6229 0 0 0 0-9.62c-1.7179-2.9777-4.9246-4.81-8.3603-4.81-3.4357-.1146-6.6424 1.8323-8.3603 4.81zm-57.6056-61.843c-3.8938 0-7.444-2.0614-9.2764-5.3826-1.947-3.3212-5.4972-5.3827-9.2765-5.3827-3.8938 0-7.444 2.0615-9.2764 5.3827-1.947 3.3212-5.4972 5.3826-9.2765 5.3826-3.8938 0-7.444-2.0614-9.2764-5.3826-2.0614-3.3212-5.6117-5.3827-9.5055-5.3827-3.8938 0-7.444 2.0615-9.2765 5.3827-1.9469 3.3212-5.4971 5.3826-9.2764 5.3826-3.8938 0-7.444 2.0614-9.2765 5.3826-1.9469 3.3212-1.9469 7.444 0 10.7653 1.947 3.3212 5.4972 5.3826 9.2765 5.3826 3.8938 0 7.444-2.0614 9.2764-5.3826 1.947-3.3212 5.4972-5.3826 9.2765-5.3826 3.8938 0 7.444 2.0614 9.2764 5.3826 1.947 3.3212 1.947 7.444 0 10.7652-1.9469 3.3212-1.9469 7.4441 0 10.7653 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 1.947 7.444 0 10.7653-1.9469 3.3212-1.9469 7.444 0 10.7652 1.947 3.3212 5.4972 5.3827 9.2765 5.3827 3.8938 0 7.444-2.0615 9.2764-5.3827 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.444 0-10.7653 1.947-3.3212 1.947-7.444 0-10.7652-1.9469-3.3212-1.9469-7.4441 0-10.7653 1.947-3.3212 1.947-7.444 0-10.7653-1.9469-3.3212-1.9469-7.444 0-10.7652 1.947-3.3212 5.4972-5.3826 9.2765-5.3826 3.8938 0 7.444 2.0614 9.2764 5.3826 1.947 3.3212 5.4972 5.3826 9.2765 5.3826 3.8938 0 7.444-2.0614 9.2764-5.3826 1.947-3.3212 1.947-7.444 0-10.7653-1.6033-3.3212-5.1535-5.3826-9.0474-5.3826z"})),SvgTxchiDu01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"#FFF",strokeMiterlimit:10},reactExports.createElement("path",{d:"m312.0294 39.7987-31.828-31.8681c-.4405-.4404-1.041-.6806-1.6815-.6806h-45.0397c-.6406 0-1.2411.2402-1.6815.6806l-31.868 31.868c-.4405.4405-.6807 1.041-.6807 1.6816v45.0396c0 .6406.2402 1.2411.6806 1.6815l31.868 31.8681c.4405.4404 1.041.6806 1.6816.6806h45.0396c.6406 0 1.2411-.2402 1.6815-.6806l31.8681-31.868c.4404-.4405.6806-1.041.6806-1.6816V41.4802c0-.6406-.2802-1.2411-.7206-1.6815zm-4.0036 45.7603-30.4668 30.4668h-43.118L203.9742 85.559V42.441l30.4668-30.4668h43.118l30.4668 30.4668v43.118z",className:"st0"}),reactExports.createElement("path",{d:"M295.775 46.5246 273.4755 24.225c-.04-.04-.08-.04-.08-.0801-.0801-.08-.1602-.1602-.2803-.2002-.08-.08-.2002-.1201-.3203-.1601-.04 0-.08-.04-.08-.04-.1602-.0401-.2803-.1202-.4405-.1202h-.1601c-.08 0-.2002-.04-.2802-.04-.0801 0-.1602 0-.2403.04-.08 0-.1601 0-.2402.04-.08 0-.12.04-.2001.04-.0801.0401-.1602.0401-.2403.0802-.08.04-.12.08-.2001.12-.0801.0401-.1602.0801-.2002.1202-.1201.08-.2402.2002-.3603.2802-.04.04-.04.0801-.0801.1201-.08.0801-.1601.1602-.2002.2403-.08.12-.1201.2001-.1601.3202 0 .04-.04.04-.04.0801l-11.0898 26.7436h-5.0445l-9.7285-23.5008h19.417c1.3212 0 2.3621-1.0409 2.3621-2.362s-1.0409-2.3621-2.362-2.3621H240.166c-.08 0-.2001 0-.2802.04-.1601.04-.2803.0801-.4004.1201h-.04s-.04 0-.04.04c-.1201.0401-.2402.1202-.3604.2003-.08.04-.1601.12-.2402.2001-.04.04-.08.04-.12.0801l-16.2144 16.2143a2.3439 2.3439 0 0 0 0 3.323c.4805.4403 1.081.6805 1.6815.6805s1.201-.2402 1.6815-.6806l13.732-13.732 9.7287 23.5006-3.5632 3.5632-12.1307-4.9644c-.04 0-.08-.04-.12-.04-.1202-.04-.2003-.0801-.3204-.0801-.12-.04-.2001-.04-.3202-.04h-.1602c-.12 0-.2802 0-.4003.04-.1602.04-.2803.08-.4004.1201-.04 0-.04 0-.08.04-.0801.04-.2002.0801-.2803.1602-.04.04-.08.04-.1201.08-.08.0401-.1201.1202-.2002.1602-.04.04-.1201.08-.1601.1201-.0801.08-.1201.1601-.2002.2402-.04.04-.08.08-.08.1201-.0801.1201-.1602.2803-.2403.4004 0 .04 0 .08-.04.08l-.1201.3604c-.04.12-.04.2402-.04.3603v19.4171c0 .6406.2401 1.241.6805 1.6815l12.531 12.531-4.2036 10.089-19.1369-19.137v-30.627c0-1.3211-1.041-2.362-2.362-2.362s-2.3622 1.0409-2.3622 2.362V79.834c0 .6405.2403 1.241.6806 1.6815l22.3397 22.3396.08.0801c.0802.08.1602.1602.2803.2402.0801.0801.2002.1201.3203.1602.04 0 .08.04.08.04l.3604.1201c.04 0 .04 0 .08.04h.0802c.12 0 .2402.0401.3603.0401.12 0 .2802 0 .4003-.04.04 0 .08 0 .1201-.04.0801-.0401.2002-.0401.2803-.0801.04 0 .08-.04.12-.04.1202-.0401.2403-.1202.3604-.2003.1201-.08.2402-.1601.3203-.2802 0 0 .04 0 .04-.04l.04-.0401c.0801-.08.1602-.1601.2003-.2803l.08-.08c.08-.1201.1201-.2402.2002-.3603l6.1254-14.813 4.9243-11.9306h5.0445l9.7286 23.5007h-3.243c-1.321 0-2.362 1.041-2.362 2.362s1.041 2.3622 2.362 2.3622h6.766c.1602 0 .3203 0 .4404-.04.3203-.0801.6006-.2003.8408-.3604.08-.08.1601-.1201.2402-.2002.04-.04.08-.04.1201-.08l4.7642-4.7642a2.3439 2.3439 0 0 0 0-3.323 2.3439 2.3439 0 0 0-3.323 0l-2.282 2.282-9.7285-23.5007 3.5631-3.5631 26.7836 11.0898c.2803.12.6006.1601.9208.1601.9209 0 1.8016-.5605 2.162-1.4413.4804-1.201-.0801-2.6023-1.2812-3.0827l-26.7836-11.0898V61.618l26.7436-11.0898c.04 0 .08-.04.12-.04.1202-.04.2003-.08.2803-.1602.0801-.08.2002-.16.2803-.2402l.08-.08c.1202-.1201.2002-.2402.2803-.3604.04-.04.08-.12.08-.16l.1202-.2403c.04-.08.04-.1601.08-.2402 0-.08.04-.1201.04-.2002 0-.08 0-.1201.0401-.2002 0-.08.04-.1601.04-.2402 0-.08 0-.1601-.04-.2402 0-.08 0-.1601-.04-.2002-.04-.1601-.08-.3203-.1201-.4404 0-.04-.04-.08-.04-.08-.0401-.1201-.0801-.2002-.1602-.3203-.08-.08-.1201-.1602-.2002-.2402.2002-.2402.1602-.2803.1201-.3203zm-29.3058 10.5693-3.5631-3.5631 9.7286-23.5007 17.3352 17.3352-23.5007 9.7286zm-7.3665 14.4527h-6.2455l-4.4439-4.4439v-6.2455l4.444-4.4439h6.2454l4.444 4.444v6.2454l-4.444 4.444zm-24.0612 1.121v-14.813l8.6877 3.6032v6.6458c0 .6406.2402 1.2411.6806 1.6815l4.6841 4.6841-3.6031 8.6877-10.4493-10.4893z",className:"st0"}),reactExports.createElement("circle",{cx:797.1289,cy:-60.4278,r:9,className:"st0",transform:"matrix(.15321 -.36989 .36989 .15321 156.199 368.1)"}))),SvgViscous01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M224.8418 33.1511h-13.7144c-19.592 0-35.5063 15.9143-35.5063 35.5063v39.2184c0 2.681 2.1655 4.8465 4.8465 4.8465s4.8464-2.1655 4.8464-4.8465V68.6574c0-14.23 11.5834-25.8477 25.8477-25.8477h13.7145c2.681 0 4.8464-2.1655 4.8464-4.8465s-2.2342-4.812-4.8808-4.812zm0-17.8734h-88.6454c-2.681 0-4.8464 2.1655-4.8464 4.8465s2.1654 4.8464 4.8464 4.8464h88.6454c2.681 0 4.8464-2.1654 4.8464-4.8464s-2.1998-4.8465-4.8464-4.8465zm65.3412 0h-43.3431c-2.681 0-4.8465 2.1655-4.8465 4.8465s2.1655 4.8464 4.8465 4.8464h43.343c2.681 0 4.8465-2.1654 4.8465-4.8464s-2.1998-4.8465-4.8465-4.8465zm-13.8863 27.532h13.8519c2.681 0 4.8464-2.1655 4.8464-4.8465s-2.1654-4.812-4.812-4.812h-13.852c-18.9046 0-34.3032 15.3986-34.3032 34.3032v40.4214c0 2.681 2.1654 4.8465 4.8464 4.8465h43.3431c2.681 0 4.8465-2.1654 4.8465-4.8465s-2.1655-4.8464-4.8465-4.8464h-38.4966v-35.575c-.0344-13.577 10.999-24.6447 24.576-24.6447zm34.8532-27.532c-2.681 0-4.8465 2.1655-4.8465 4.8465v87.7516c0 2.681 2.1654 4.8465 4.8464 4.8465s4.8465-2.1655 4.8465-4.8465V20.1242c0-2.681-2.1654-4.8465-4.8464-4.8465zm66.2004 20.8982c-.0687-.1719-.1375-.3437-.2406-.5156-5.7401-12.0302-18.0453-20.3826-32.2753-20.3826H331.12c-2.681 0-4.8465 2.1654-4.8465 4.8465v87.7516c0 2.681 2.1655 4.8465 4.8465 4.8465s4.8464-2.1655 4.8464-4.8465V24.9362h8.9024c7.4587 0 14.1956 3.1623 18.9733 8.1806h-14.9174c-2.681 0-4.8465 2.1654-4.8465 4.8464s2.1655 4.8465 4.8465 4.8465h20.692a26.0956 26.0956 0 0 1 1.3404 8.2492v56.817c0 2.681 2.1655 4.8464 4.8465 4.8464s4.8464-2.1655 4.8464-4.8465V51.059c-.0343-5.3276-1.203-10.346-3.2997-14.883z"})),SvgWans02=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("path",{stroke:"null",d:"M164.7912 16.3016c0-2.9157-2.355-5.2707-5.2707-5.2707h-24.4473v-.0748H88.4588v.0748H63.9743c-2.9157 0-5.2708 2.355-5.2708 5.2707v36.1102c0 2.9158 2.355 5.2708 5.2708 5.2708H87.3c.6355 0 1.1215.486 1.1215 1.1214v52.9692c0 2.9157 2.355 5.2707 5.2707 5.2707h36.1103c2.9157 0 5.2707-2.355 5.2707-5.2707V58.804c0-.6355.486-1.1214 1.1214-1.1214h23.3259c2.9157 0 5.2708-2.355 5.2708-5.2708V16.3016zm127.2455 95.4716V16.2268c0-2.9158 2.355-5.2708 5.2708-5.2708h36.1102c2.9158 0 5.2708 2.355 5.2708 5.2708v95.5463c0 2.9157-2.355 5.2707-5.2708 5.2707h-36.1102c-2.9157 0-5.2707-2.355-5.2707-5.2707zm-15.8496-54.0906h-95.5463c-2.9157 0-5.2707-2.355-5.2707-5.2708V16.3016c0-2.9157 2.355-5.2707 5.2707-5.2707h95.5463c2.9158 0 5.2708 2.355 5.2708 5.2707v36.1102c0 2.9158-2.355 5.2708-5.2708 5.2708zm0 59.3239h-95.5463c-2.9157 0-5.2707-2.355-5.2707-5.2707V75.6255c0-2.9157 2.355-5.2707 5.2707-5.2707h95.5463c2.9158 0 5.2708 2.355 5.2708 5.2707v36.1103c0 2.9157-2.355 5.2707-5.2708 5.2707zM399.059 13.8718l-51.1374 100.7797c-.5607 1.084.2243 2.3924 1.4579 2.3924h102.2749c1.2336 0 2.0186-1.3083 1.4578-2.3924L401.9749 13.8718c-.5981-1.1962-2.3176-1.1962-2.9157 0z"})),SvgZootghost01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 512 128",...re},reactExports.createElement("g",{stroke:"null"},reactExports.createElement("path",{d:"M441.6742 117.9702H490.9l-57.886-84.4048h-50.6346l-46.491 70.8139V33.5654H289.19v65.2615h-79.5154V82.7497h72.347v-18.066h-72.347V51.59h57.803V33.5654H21.1v21.008h47.4855v63.3968h46.6982V54.5733h47.6927v63.397h210.9501l7.3756-13.591h52.9965l7.3756 13.591zM391.6196 85.526l16.2843-29.9581 16.2015 29.9581h-32.4858z"}),reactExports.createElement("ellipse",{cx:68.2955,cy:33.5653,fill:"#FFF",className:"st0",rx:21.1323,ry:22.7483}),reactExports.createElement("path",{d:"M68.2955 11.6872c11.229 0 20.3035 9.8203 20.3035 21.9196s-9.0744 21.9196-20.3036 21.9196c-11.229 0-20.3035-9.8203-20.3035-21.9196s9.0744-21.9196 20.3036-21.9196m0-1.6574c-12.0993 0-21.961 10.5661-21.961 23.577s9.8617 23.577 21.961 23.577 21.961-10.5661 21.961-23.577-9.8618-23.577-21.961-23.577z"}),reactExports.createElement("ellipse",{cx:74.6766,cy:33.5653,rx:10.1932,ry:10.6905}),reactExports.createElement("ellipse",{cx:115.4909,cy:33.5653,fill:"#FFF",className:"st0",rx:21.1323,ry:22.7483}),reactExports.createElement("path",{d:"M115.491 11.6872c11.229 0 20.3035 9.8203 20.3035 21.9196s-9.0745 21.9196-20.3036 21.9196-20.3036-9.8203-20.3036-21.9196 9.0745-21.9196 20.3036-21.9196m0-1.6574c-12.0993 0-21.961 10.5661-21.961 23.577s9.8617 23.577 21.961 23.577 21.961-10.5661 21.961-23.577-9.8617-23.577-21.961-23.577z"}),reactExports.createElement("ellipse",{cx:109.1098,cy:33.5653,rx:10.1932,ry:10.6905}),reactExports.createElement("ellipse",{cx:384.2441,cy:33.5653,fill:"#FFF",className:"st0",rx:21.1323,ry:22.7483}),reactExports.createElement("path",{d:"M384.244 11.6872c11.2292 0 20.3036 9.8203 20.3036 21.9196s-9.0744 21.9196-20.3035 21.9196c-11.2292 0-20.3036-9.8203-20.3036-21.9196s9.1159-21.9196 20.3036-21.9196m0-1.6574c-12.0993 0-21.961 10.5661-21.961 23.577s9.8617 23.577 21.961 23.577c12.0992 0 21.961-10.5661 21.961-23.577s-9.8203-23.577-21.961-23.577z"}),reactExports.createElement("ellipse",{cx:390.6252,cy:33.5653,rx:10.1932,ry:10.6905}),reactExports.createElement("ellipse",{cx:431.481,cy:33.5653,fill:"#FFF",className:"st0",rx:21.1323,ry:22.7483}),reactExports.createElement("path",{d:"M431.481 11.6872c11.229 0 20.3035 9.8203 20.3035 21.9196s-9.0744 21.9196-20.3035 21.9196c-11.2292 0-20.3036-9.8203-20.3036-21.9196s9.0744-21.9196 20.3036-21.9196m0-1.6574c-12.0993 0-21.961 10.5661-21.961 23.577s9.8617 23.577 21.961 23.577c12.0992 0 21.961-10.5661 21.961-23.577s-9.8618-23.577-21.961-23.577z"}),reactExports.createElement("ellipse",{cx:425.0584,cy:33.5653,rx:10.1932,ry:10.6905}),reactExports.createElement("path",{fill:"#FFF",d:"M232.2987 85.8574c-6.0911 0-11.0634-5.428-11.0634-12.0993s4.9723-12.0992 11.0634-12.0992c6.091 0 11.0633 5.428 11.0633 12.0992s-4.9308 12.0993-11.0633 12.0993z",className:"st0"}),reactExports.createElement("path",{d:"M232.2987 62.529c5.6352 0 10.2346 5.0552 10.2346 11.2706S237.934 85.07 232.2987 85.07s-10.2347-5.0551-10.2347-11.2705 4.5994-11.2706 10.2347-11.2706m0-1.6574c-6.5469 0-11.8921 5.801-11.8921 12.928s5.3452 12.928 11.892 12.928c6.547 0 11.8922-5.801 11.8922-12.928s-5.3038-12.928-11.8921-12.928z"}),reactExports.createElement("ellipse",{cx:232.2987,cy:73.7582,rx:5.3452,ry:5.8839}),reactExports.createElement("path",{fill:"#FFF",d:"M256.2486 85.8574c-6.091 0-11.0634-5.428-11.0634-12.0993s4.9723-12.0992 11.0634-12.0992c6.091 0 11.0634 5.428 11.0634 12.0992s-4.9723 12.0993-11.0634 12.0993z",className:"st0"}),reactExports.createElement("path",{d:"M256.2486 62.529c5.6353 0 10.2347 5.0552 10.2347 11.2706S261.8839 85.07 256.2486 85.07s-10.2346-5.055-10.2346-11.2704 4.558-11.2706 10.2347-11.2706m0-1.6574c-6.5469 0-11.892 5.801-11.892 12.928s5.3451 12.928 11.892 12.928 11.8921-5.801 11.8921-12.928-5.3452-12.928-11.892-12.928z"}),reactExports.createElement("ellipse",{cx:256.2486,cy:73.7582,rx:5.3452,ry:5.8839}),reactExports.createElement("ellipse",{cx:302.7397,cy:32.6538,fill:"#FFF",className:"st0",rx:9.406,ry:8.9087}),reactExports.createElement("path",{d:"M302.7397 24.5738c4.7237 0 8.5772 3.6049 8.5772 8.08s-3.8121 8.08-8.5772 8.08-8.5773-3.605-8.5773-8.08 3.8536-8.08 8.5773-8.08m0-1.6575c-5.6353 0-10.2347 4.3508-10.2347 9.7374s4.5994 9.7375 10.2347 9.7375 10.2346-4.3508 10.2346-9.7374-4.5994-9.7375-10.2346-9.7375z"}),reactExports.createElement("ellipse",{cx:302.7397,cy:32.6538,rx:4.4751,ry:4.2265}),reactExports.createElement("ellipse",{cx:322.7532,cy:32.6538,fill:"#FFF",className:"st0",rx:9.406,ry:8.9087}),reactExports.createElement("path",{d:"M322.7532 24.5738c4.7237 0 8.5772 3.6049 8.5772 8.08s-3.812 8.08-8.5772 8.08-8.5772-3.605-8.5772-8.08 3.8535-8.08 8.5772-8.08m0-1.6575c-5.6353 0-10.2347 4.3508-10.2347 9.7374s4.5994 9.7375 10.2347 9.7375 10.2347-4.3508 10.2347-9.7374-4.5994-9.7375-10.2347-9.7375z"}),reactExports.createElement("ellipse",{cx:322.7532,cy:32.6538,rx:4.4751,ry:4.2265}))),SvgHanneMaes01=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 80.43442 33.86671",...re},reactExports.createElement("g",{fill:"currentColor"},reactExports.createElement("path",{d:"M-87.89572 152.05557q.55291-.5529 2.24847-1.25324 1.69557-.73721 4.16519-1.51127 2.50649-.77406 5.56588-1.54812 3.09624-.81093 6.37679-1.43755 3.28055-.66348 6.5611-1.1058 3.3174-.47918 6.22935-.62662 2.94881-.14744 5.30786.0737 2.3959.22116 3.83345.9215.70034.33174.81092 1.40069.11058 1.06894-.25802 2.24846-.3686 1.14266-1.17952 2.13789-.77406.99522-1.80615 1.17952-.7372.14744-1.87986 0-1.1058-.1843-2.94881-.3686-1.843-.1843-4.60751-.22116-2.72765-.0737-6.67168.29488 1.14266.9215 1.54812 1.76928.1843.44233.11058 1.95359-.03686 1.4744-.29488 3.50171-.22116 1.99044-.5529 4.20205-.33174 2.17475-.70034 4.09147-.33174 1.87987-.66348 3.13311-.29488 1.2901-.44232 1.40068-.22117.1843-.77407.22116-.51604.0737-1.17952-.0369-.62662-.11058-1.25324-.44232-.58976-.33174-.9215-.9215-.1843-.29488-.33175-1.40068-.14744-1.06895-.25802-2.61707-.11058-1.58498-.1843-3.46485-.07372-1.87986-.07372-3.79659t.03686-3.68601q.03686-1.80614.14744-3.16997-2.87509.40546-6.30308 1.1058-3.39112.66349-7.44573 1.62185-.62662.14744-1.21638-.22116-.58976-.3686-.99523-.95836-.3686-.62663-.44232-1.29011-.0369-.70034.44232-1.17952zm48.39732 6.96656q.25802-.14744.70034-.11058.47918.0369.9215.29488.47918.22116.81093.62662.33174.40546.33174.95836 0 .92151-.88465 2.28533-.84778 1.36382-2.35904 2.65393-1.4744 1.25324-3.53857 2.17474-2.06417.88464-4.42321.88464-1.54813 0-3.02253-.44232-1.4744-.44232-2.61707-1.2901-1.1058-.84778-1.80614-2.06417-.66349-1.25324-.66349-2.87508 0-1.54813.5529-2.72765.5529-1.21638 1.43755-2.02731.9215-.84778 2.06417-1.32696 1.14266-.47918 2.35904-.58976 1.14267-.11058 2.2116.11058 1.10581.22116 1.99045.70034.88465.44232 1.51127 1.14266.62662.70035.81092 1.58499.25802 1.21638-.25802 2.24846-.47918 1.03209-1.51127 1.62185-.99522.58976-2.3959.58976-1.40069 0-2.91195-.88464.47918.81092 1.43754 1.25324.95837.44232 2.10103.44232 1.17952 0 2.3959-.47918 1.25325-.47918 2.3222-1.51126.44231-.44232.77405-.92151.33175-.47918.58977-.9215.29488-.47918.5529-.84778.25802-.3686.51604-.5529zm-9.17817.0369q-.33174-.3686-.77406-.33174-.40546.0369-.70034.33174-.25802.25802-.29488.66348 0 .40546.40546.77406.40546.33174.77406.29488.40546-.0369.62662-.29488.25803-.25802.25803-.66348.03686-.40546-.29489-.77406zm10.2471-3.42803q.29489-.14744.81093-.14744.5529 0 1.1058.14744.5529.11058.99522.33174.47918.22116.62662.51604.14745.29488 0 .84778-.11057.5529-.25802 1.25325-.14744.70034-.25802 1.4744-.07372.7372.14744 1.43754.14744.58977.5529.95837.44233.33174.95837.47918.51604.11058 1.06894 0 .58976-.11058 1.06894-.47918.47918-.3686.77407-.88465.29488-.5529.47918-1.03208.1843-.51604.3686-.9215.1843-.40546.44232-.58976.25802-.14744.70034-.0737.44232.0369.88464.29488.44233.22116.77407.62662.3686.40546.40546.9215.07372.51604-.33174 1.54813-.3686 1.03208-1.14267 2.17474-.77406 1.14267-1.91672 2.21161-1.14267 1.03208-2.5802 1.62184-1.51127.58976-2.8751.40546-1.36382-.1843-2.43276-.9215-1.06895-.7372-1.73243-1.91672-.66348-1.21639-.77406-2.65393-.11058-1.43754.11058-2.72765.22116-1.32696.5529-2.35904.3686-1.03209.77406-1.69557.40546-.66348.70034-.84778zm6.30308-4.64437q0 1.4744-1.03208 2.50648-1.03208 1.03209-2.50649 1.03209-1.4744 0-2.50648-1.03209-1.03209-1.03208-1.03209-2.50648 0-1.47441 1.03209-2.50649 1.03208-1.03208 2.50648-1.03208 1.4744 0 2.50649 1.03208 1.03208 1.03208 1.03208 2.50649zm7.9249 4.46007q2.61706-.11058 4.0546 1.54812.40546-.66348.81093-.9215.33174-.14744.84778-.14744.5529 0 1.1058.14744.5529.11058.99522.33174.44232.22116.58976.51604.14745.29488 0 .77406-.11058.47919-.25802 1.10581-.14744.58976-.25802 1.2901-.07372.70034.14744 1.40068.14744.58977.51605.95837.40546.33174.88464.47918.47918.11058.99522 0 .5529-.11058 1.03208-.47918.47918-.3686.77407-.88465.29488-.5529.47918-1.03208.1843-.51604.3686-.9215.1843-.40546.44232-.58976.25802-.14744.70034-.0737.44232.0369.88464.29488.44232.22116.77406.62662.33174.40546.40547.9215.03686.51604-.3686 1.54813-.40547 1.03208-1.21639 2.17474-.81092 1.14267-1.99044 2.21161-1.17953 1.03208-2.61707 1.62184-2.10103.84779-3.7966.22116-1.69556-.66348-2.61706-2.17474-.84778 1.03208-1.91672 1.62184-1.06895.58976-2.17475.66348-1.21638.11058-2.32219-.25802-1.1058-.3686-1.95358-1.14266-.81092-.77406-1.2901-1.95359-.47919-1.17952-.44233-2.72764 0-1.54813.5529-2.83823.5529-1.2901 1.43755-2.21161.9215-.95836 2.06417-1.4744 1.14266-.5529 2.35904-.62662zm2.72764 6.04505q.07372-.66348-.07372-1.1058-.11058-.47918-.3686-.77406-.25802-.29488-.58976-.44232-.29489-.14744-.62663-.1843-.47918-.0369-.88464.14744-.3686.1843-.62662.5529-.25802.33174-.40546.77406-.14744.44232-.11058.88464.07372.88465.5529 1.54813.47918.66348 1.2901.58976.81093-.0737 1.2901-.58976.47919-.5529.5529-1.40069z",transform:"translate(88.34068 -144.51399)"}),reactExports.createElement("path",{d:"M-51.86699 177.02183q2.28283.0725 5.45827.26163 3.17367.22592 6.43057.41893 3.3366.23374 6.43058.41894 3.17543.18909 5.3768.25773 2.20313.0318 3.12926-.55116.92614-.58295.80026-1.36393-.1241-.8178-1.22934-1.60883-1.02378-.78712-2.88516-1.13466-1.21317-.24266-3.411-.38491-2.11638-.13832-4.72684-.18968-2.52723-.0843-5.3024-.10655-2.69369-.0184-5.14651.0485-2.3696.034-4.25039.0915-1.79932.0614-2.62105.16958-1.14936.12942-1.82933.68727-.5985.56175-.5488 1.22838.13293.63371 1.16906 1.1631 1.03612.5294 3.15602.59411z",transform:"translate(88.34068 -144.51399)"})));var fnv1a={exports:{}};(function(re,ee){Object.defineProperty(ee,"__esModule",{value:!0}),ne.BASE=2166136261;function ne(ie,oe=ne.BASE){const ae=ie.length;for(let ce=0;ce<ae;ce++)oe^=ie.charCodeAt(ce),oe+=(oe<<1)+(oe<<4)+(oe<<7)+(oe<<8)+(oe<<24);return oe>>>0}ee.default=ne,re.exports=ne})(fnv1a,fnv1a.exports);var fnv1aExports=fnv1a.exports;const hash$1=getDefaultExportFromCjs(fnv1aExports),IconCache=React.createContext({}),useIconCache=()=>React.useContext(IconCache),withIcon=(re,ee)=>{const ne=ie=>{const{size:oe=30,viewBox:ae=ee}=ie,ce=useIconCache(),le=ce[re];let ue;return le||(ue="icon-"+hash$1(re).toString(16),ce[re]=ue),jsx$1("svg",{viewBox:`0 0 ${ae||oe} ${ae||oe}`,width:oe,height:oe,fill:"none",dangerouslySetInnerHTML:{__html:le?`<use href="#${le}" />`:`<g id="${ue}">${re}</g>`}})};return reactExports.memo(ne)},IndexerStatus=`
<circle cx="15" cy="15" r="10" fill="#E81224" stroke="none" />
`;withIcon(IndexerStatus);const BurnIcon=withIcon(`<svg>
  <path d="M9.66 2.67c-.13.6-.26 1.2-.15 1.76.08.39.29.78.84 1.1l.16-.38.24-.64.63.34.25.16a7.07 7.07 0 0 1 2.14 2.12c1 1.55 1.53 3.83-.12 6.79a.62.62 0 0 1-.8.24.54.54 0 0 1-.26-.75c1.45-2.6.95-4.48.15-5.7-.4-.64-.9-1.12-1.3-1.44l-.1-.08a3.2 3.2 0 0 1-.07.13c-.06.1-.17.26-.33.38l-.27.2-.32-.13C9.08 6.28 8.5 5.5 8.33 4.63a3.83 3.83 0 0 1-.02-1.26 3.79 3.79 0 0 0-2.3 2.15 5.48 5.48 0 0 0 .14 3.8l.45 1.27-1.3-.6a4.84 4.84 0 0 1-1.6-1.43 8.76 8.76 0 0 1-.4-.54 3.2 3.2 0 0 0-.73 2.77c.2 1.09.86 2.04 1.32 2.5.22.22.2.57-.04.78-.24.2-.62.2-.85-.03a6.26 6.26 0 0 1-1.61-3.06 4.37 4.37 0 0 1 1.65-4.32l.67-.57.3.8c.03.09.24.46.56.89-.1-.9-.01-1.8.32-2.64.57-1.46 1.86-2.62 4.04-3.12l.93-.22-.2.87Z"/>
</svg>`,16),GenerativeIcon=withIcon(`
  <circle cx="15" cy="15" r="14.25" fill="var(--text-color)" stroke="var(--background-color)"/>
  <path fill="var(--background-color)" d="m10.6 13.34-3.3 1.7v.06l3.3 1.7v.92h-.15l-4.24-2.3v-.7l4.24-2.3h.14v.92Zm6.18-3.98h1l-4.15 11.51h-1l4.15-11.5Zm2.85 3.06 4.24 2.3v.7l-4.24 2.3h-.14v-.92l3.3-1.7v-.06l-3.3-1.7v-.92h.14Z"/>
  <path fill="var(--background-color)" d="m10.6 13.34.18.35.21-.11v-.24h-.4Zm-3.3 1.7-.2-.36-.2.12v.24h.4Zm0 .06h-.4v.24l.2.12.2-.36Zm3.3 1.7h.4v-.24l-.22-.11-.19.35Zm0 .92v.4h.4v-.4h-.4Zm-.15 0-.2.35.1.05h.1v-.4Zm-4.24-2.3h-.4v.24l.21.12.2-.36Zm0-.7-.19-.36-.2.12v.24h.4Zm4.24-2.3v-.4h-.1l-.1.05.2.35Zm.14 0h.4v-.4h-.4v.4Zm-.18.56-3.3 1.7.37.72 3.3-1.7-.37-.72Zm-3.52 2.06v.06h.8v-.06h-.8Zm.22.42 3.3 1.7.37-.71-3.3-1.7-.37.7Zm3.08 1.34v.92h.8v-.92h-.8Zm.4.52h-.14v.8h.14v-.8Zm.05.04L6.4 15.07l-.38.7 4.24 2.3.38-.7ZM6.6 15.42v-.7h-.8v.7h.8Zm-.2-.35 4.23-2.3-.38-.7-4.24 2.3.38.7Zm4.04-2.25h.14v-.8h-.14v.8Zm-.26-.4v.92h.8v-.92h-.8Zm6.59-3.06v-.4h-.28l-.1.27.38.13Zm1 0 .38.14.2-.54h-.58v.4Zm-4.15 11.51v.4h.28l.1-.26-.38-.14Zm-1 0-.38-.13-.2.53h.57v-.4Zm4.15-11.1h1v-.8h-1v.8Zm.63-.54-4.15 11.5.75.28L18.16 9.5l-.75-.27Zm-3.78 11.24h-1v.8h1v-.8Zm-.63.54L17.15 9.5l-.75-.27-4.15 11.5.75.28Zm6.63-8.59.19-.35-.09-.05h-.1v.4Zm4.24 2.3h.4v-.24l-.21-.12-.2.36Zm0 .7.19.36.2-.12v-.24h-.4Zm-4.24 2.3v.4h.1l.09-.05-.19-.35Zm-.14 0h-.4v.4h.4v-.4Zm0-.92-.19-.35-.21.11v.24h.4Zm3.3-1.7.2.36.2-.12v-.24h-.4Zm0-.06h.4v-.24l-.2-.12-.2.36Zm-3.3-1.7h-.4v.24l.21.11.19-.35Zm0-.92v-.4h-.4v.4h.4Zm-.05.36 4.24 2.29.38-.7-4.24-2.3-.38.7Zm4.03 1.94v.7h.8v-.7h-.8Zm.2.35-4.23 2.3.38.7 4.24-2.3-.38-.7Zm-4.04 2.25h-.14v.8h.14v-.8Zm.26.4v-.92h-.8v.92h.8Zm-.22-.56 3.31-1.7-.36-.72-3.32 1.7.37.72Zm3.53-2.06v-.06h-.8v.06h.8Zm-.22-.42-3.31-1.7-.37.71 3.32 1.7.36-.7Zm-3.1-1.34v-.92h-.8v.92h.8Zm-.4-.52h.15v-.8h-.14v.8Z"/>
`),SwapIcon=withIcon(`
<path d="M1.97 1.97a.56.56 0 0 1 .44-.16l5.5.36c.14 0 .27.06.37.16l5.63 5.63c.4.4.4 1.06 0 1.46l-4.49 4.5c-.4.4-1.05.4-1.46 0L2.33 8.27a.56.56 0 0 1-.16-.36L1.8 2.4a.56.56 0 0 1 .16-.44Zm1.3 5.66 5.42 5.42 4.36-4.36-5.41-5.42-4.67-.3.3 4.66Z"/>
`,16),TezosIcon=withIcon(`<path 
      fill="var(--text-color)" 
      d="M9.23 11.96a4.18 4.18 0 0 0 1.12-.16v.9a3.75 3.75 0 0 1-1.36.23c-.63 0-1.12-.16-1.47-.49-.34-.34-.51-.91-.51-1.72V6.57H6v-.56l1.06-.44L7.48 4h.69v1.64h7.57v.8l-3.15 3.35c1.21.06 2.09.36 2.62.89.53.52.79 1.23.79 2.12a3.3 3.3 0 0 1-.41 1.67c-.27.49-.67.86-1.2 1.13-.51.28-1.14.4-1.87.4-.95 0-1.78-.16-2.5-.47v-1.08a5.53 5.53 0 0 0 2.43.56c.8 0 1.39-.21 1.78-.64.39-.42.58-.96.58-1.61 0-.65-.22-1.15-.65-1.5-.43-.37-1.15-.55-2.14-.55h-.8v-.88l3.05-3.26h-6.1v4.1c0 .86.35 1.29 1.06 1.29Z" 
      />`,16),MintedIcon=withIcon(`
<path d="M7 2.63a1.07 1.07 0 0 1 2.03 0l1.01 3.12h3.28c1.03 0 1.46 1.32.63 1.93l-2.66 1.93 1.02 3.11c.32.99-.81 1.8-1.65 1.2l-2.65-1.93-2.65 1.93c-.84.6-1.96-.21-1.65-1.2l1.02-3.11-2.65-1.93c-.84-.6-.41-1.93.62-1.93h3.28L7 2.63Zm1.01.4-1 3.07c-.14.44-.55.74-1.01.74H2.77l2.61 1.9c.38.27.53.75.39 1.19l-1 3.07 2.61-1.9c.38-.27.88-.27 1.26 0l2.6 1.9-.99-3.07a1.1 1.1 0 0 1 .39-1.2l2.6-1.89h-3.22c-.46 0-.87-.3-1.01-.74L8 3.03Z"/>
`,16),TradeIcon=withIcon(`
<path d="M2.95 8.39v2.5c0 .34-.25.61-.56.61-.3 0-.56-.27-.56-.6V6.94c0-.34.25-.6.56-.6h3.67c.3 0 .56.26.56.6 0 .33-.25.6-.56.6H3.75l5.33 5.75c.22.24.22.62 0 .86a.53.53 0 0 1-.8 0L2.96 8.39Zm9.55 1.26-.02-.03-6.02-6.5a.64.64 0 0 1 0-.85.53.53 0 0 1 .79 0l6 6.48V6.29c0-.33.25-.6.56-.6.31 0 .56.27.56.6v3.96c0 .33-.25.6-.56.6h-3.67c-.3 0-.56-.27-.56-.6 0-.33.25-.6.56-.6h2.36Z"/>
`,16),VideoIcon=withIcon(`<g transform="translate(-240.658 -193.721)"><circle cx="252.673" cy="205.713" r="8.119" fill="var(--text-color)"/><path fill="var(--background-color)" d="M252.658 195.721c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10Zm0 18c-4.41 0-8-3.59-8-8a8 8 0 0 1 3.558-6.65 7.954 7.954 0 0 1 4.442-1.35c4.41 0 8 3.59 8 8s-3.59 8-8 8Zm-2-3.5 6-4.5-6-4.5v9Z" paint-order="fill"/></g> 
`,24),SvgConfig=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 16 16",...re},reactExports.createElement("path",{fill:"current",fillRule:"evenodd",d:"M9.6 4a.6.6 0 0 0-1.2 0v.4H1a.6.6 0 0 0 0 1.2h7.4V6a.6.6 0 0 0 1.2 0V4Zm4 0v.4H15a.6.6 0 1 1 0 1.2h-1.4V6a.6.6 0 0 1-1.2 0v-.94a.6.6 0 0 1 0-.12V4a.6.6 0 1 1 1.2 0Zm-4 5.4V9a.6.6 0 0 0-1.2 0v.94a.6.6 0 0 0 0 .12V11a.6.6 0 1 0 1.2 0v-.4H15a.6.6 0 1 0 0-1.2H9.6ZM1 9.4a.6.6 0 0 0 0 1.2h3.4v.4a.6.6 0 1 0 1.2 0V9a.6.6 0 0 0-1.2 0v.4H1Z",clipRule:"evenodd"})),SvgChevron=re=>reactExports.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...re},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.42583 11.4258C8.19151 11.6601 7.81161 11.6601 7.5773 11.4258L2.5773 6.42583C2.34298 6.19151 2.34298 5.81161 2.5773 5.5773C2.81161 5.34298 3.19151 5.34298 3.42583 5.5773L8.00156 10.153L12.5773 5.5773C12.8116 5.34298 13.1915 5.34298 13.4258 5.5773C13.6601 5.81161 13.6601 6.19151 13.4258 6.42583L8.42583 11.4258Z",fill:"current"})),SvgEvents=re=>reactExports.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...re},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.39844 2.99844C1.39844 2.11478 2.11478 1.39844 2.99844 1.39844H12.9984C13.8821 1.39844 14.5984 2.11478 14.5984 2.99844V5.99844C14.5984 6.88209 13.8821 7.59844 12.9984 7.59844H2.99844C2.11478 7.59844 1.39844 6.88209 1.39844 5.99844V2.99844ZM2.99844 2.59844C2.77752 2.59844 2.59844 2.77752 2.59844 2.99844V5.99844C2.59844 6.21935 2.77752 6.39844 2.99844 6.39844H12.9984C13.2194 6.39844 13.3984 6.21935 13.3984 5.99844V2.99844C13.3984 2.77752 13.2194 2.59844 12.9984 2.59844H2.99844ZM1.39844 9.99844C1.39844 9.66707 1.66707 9.39844 1.99844 9.39844L13.9984 9.39844C14.3298 9.39844 14.5984 9.66707 14.5984 9.99844C14.5984 10.3298 14.3298 10.5984 13.9984 10.5984L1.99844 10.5984C1.66707 10.5984 1.39844 10.3298 1.39844 9.99844ZM1.99844 12.3984C1.66707 12.3984 1.39844 12.6671 1.39844 12.9984C1.39844 13.3298 1.66707 13.5984 1.99844 13.5984L13.9984 13.5984C14.3298 13.5984 14.5984 13.3298 14.5984 12.9984C14.5984 12.6671 14.3298 12.3984 13.9984 12.3984L1.99844 12.3984Z",fill:"current"})),SvgMasonry=re=>reactExports.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...re},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.99844 0.398438C1.11478 0.398438 0.398438 1.11478 0.398438 1.99844V6.99844C0.398438 7.88209 1.11478 8.59844 1.99844 8.59844H7.99844C8.88209 8.59844 9.59844 7.88209 9.59844 6.99844V1.99844C9.59844 1.11478 8.88209 0.398438 7.99844 0.398438H1.99844ZM1.59844 1.99844C1.59844 1.77752 1.77752 1.59844 1.99844 1.59844H7.99844C8.21935 1.59844 8.39844 1.77752 8.39844 1.99844V6.99844C8.39844 7.21935 8.21935 7.39844 7.99844 7.39844H1.99844C1.77752 7.39844 1.59844 7.21935 1.59844 6.99844V1.99844ZM12.9984 0.398438C12.1148 0.398438 11.3984 1.11478 11.3984 1.99844V6.99844C11.3984 7.88209 12.1148 8.59844 12.9984 8.59844H13.9984C14.8821 8.59844 15.5984 7.88209 15.5984 6.99844V1.99844C15.5984 1.11478 14.8821 0.398438 13.9984 0.398438H12.9984ZM12.5984 1.99844C12.5984 1.77752 12.7775 1.59844 12.9984 1.59844H13.9984C14.2194 1.59844 14.3984 1.77752 14.3984 1.99844V6.99844C14.3984 7.21935 14.2194 7.39844 13.9984 7.39844H12.9984C12.7775 7.39844 12.5984 7.21935 12.5984 6.99844V1.99844ZM0.398438 11.9984C0.398438 11.1148 1.11478 10.3984 1.99844 10.3984H3.99844C4.88209 10.3984 5.59844 11.1148 5.59844 11.9984V13.9984C5.59844 14.8821 4.88209 15.5984 3.99844 15.5984H1.99844C1.11478 15.5984 0.398438 14.8821 0.398438 13.9984V11.9984ZM1.99844 11.5984C1.77752 11.5984 1.59844 11.7775 1.59844 11.9984V13.9984C1.59844 14.2194 1.77752 14.3984 1.99844 14.3984H3.99844C4.21935 14.3984 4.39844 14.2194 4.39844 13.9984V11.9984C4.39844 11.7775 4.21935 11.5984 3.99844 11.5984H1.99844ZM8.99844 10.3984C8.11478 10.3984 7.39844 11.1148 7.39844 11.9984V13.9984C7.39844 14.8821 8.11478 15.5984 8.99844 15.5984H13.9984C14.8821 15.5984 15.5984 14.8821 15.5984 13.9984V11.9984C15.5984 11.1148 14.8821 10.3984 13.9984 10.3984H8.99844ZM8.59844 11.9984C8.59844 11.7775 8.77752 11.5984 8.99844 11.5984H13.9984C14.2194 11.5984 14.3984 11.7775 14.3984 11.9984V13.9984C14.3984 14.2194 14.2194 14.3984 13.9984 14.3984H8.99844C8.77752 14.3984 8.59844 14.2194 8.59844 13.9984V11.9984Z",fill:"current"})),SvgSingleView=re=>reactExports.createElement("svg",{width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...re},reactExports.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.398438 1.99844C0.398438 1.11478 1.11478 0.398438 1.99844 0.398438H13.9984C14.8821 0.398438 15.5984 1.11478 15.5984 1.99844V13.9984C15.5984 14.8821 14.8821 15.5984 13.9984 15.5984H1.99844C1.11478 15.5984 0.398438 14.8821 0.398438 13.9984V1.99844ZM1.99844 1.59844C1.77752 1.59844 1.59844 1.77752 1.59844 1.99844V13.9984C1.59844 14.2194 1.77752 14.3984 1.99844 14.3984H13.9984C14.2194 14.3984 14.3984 14.2194 14.3984 13.9984V1.99844C14.3984 1.77752 14.2194 1.59844 13.9984 1.59844H1.99844Z",fill:"current"})),SvgPlay=re=>reactExports.createElement("svg",{viewBox:"0 0 24 24",...re},reactExports.createElement("path",{fill:"current",d:"M3.9 18.9V5.1c0-1.6 1.7-2.6 3-1.8l12 6.9c1.4.8 1.4 2.9 0 3.7l-12 6.9c-1.3.7-3-.3-3-1.9z"})),SvgPause=re=>reactExports.createElement("svg",{viewBox:"0 0 32 32",...re},reactExports.createElement("path",{fill:"current",d:"M20 4h8v24h-8zM4 4h8v24H4z"})),SvgClose=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 145.2 145.2",...re},reactExports.createElement("path",{fill:"current",d:"M145.2 15.7 129.8.3l-57.1 57-57-57L.3 15.7l57 57-57 57.1 15.4 15.4 57-57 57.1 57 15.4-15.4-57-57.1z"})),SvgFullscreenEnter=re=>reactExports.createElement("svg",{viewBox:"0 0 14 14",...re},reactExports.createElement("path",{fill:"current",d:"M0 11h3v3h2V9H0v2Zm3-8H0v2h5V0H3v3Zm6 11h2v-3h3V9H9v5Zm2-11V0H9v5h5V3h-3Z"})),SvgFullscreenExit=re=>reactExports.createElement("svg",{viewBox:"0 0 14 14",...re},reactExports.createElement("path",{fill:"current",d:"M2 9H0v5h5v-2H2V9ZM0 5h2V2h3V0H0v5Zm12 7H9v2h5V9h-2v3ZM9 0v2h3v3h2V0H9Z"})),SvgEnterAnav=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 -960 960 960",width:64,...re},reactExports.createElement("path",{d:"M480-80q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480h80q0 115 72.5 203T418-166l-58-58 56-56L598-98q-29 10-58.5 14T480-80Zm20-280v-240h120q17 0 28.5 11.5T660-560v160q0 17-11.5 28.5T620-360H500Zm-200 0v-60h100v-40h-60v-40h60v-40H300v-60h120q17 0 28.5 11.5T460-560v160q0 17-11.5 28.5T420-360H300Zm260-60h40v-120h-40v120Zm240-60q0-115-72.5-203T542-794l58 58-56 56-182-182q29-10 58.5-14t59.5-4q83 0 156 31.5T763-763q54 54 85.5 127T880-480h-80Z"})),SvgTeiaDao=re=>reactExports.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:280,height:128,...re},reactExports.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"null",d:"M72.825 8.864H15.5V61.29h57.325v57.847h53.47l-.001-57.847H264.5V8.864H126.294V61.29H72.825V8.864zm113.268 20.73v13.56h2.862v-13.56h3.62v-2.386h-10.102v2.386h3.62zm13.626-2.386v15.946h9.408v-2.386h-6.547V36.06h5.116v-2.387h-5.116v-4.079h6.547v-2.386h-9.408zm17.073 15.946v-2.386h2.927V29.594h-2.927v-2.386h8.714v2.386h-2.926v11.174h2.926v2.386h-8.714zm16.054-1.518-.369 1.518h2.949l.715-3.254h3.641l.715 3.254h2.95l-3.838-15.946h-3.295l-1.28 5.315-2.188 9.113zm5.354-9.113 1.084 4.99h-2.645l1.084-4.99a7.677 7.677 0 0 0 .108-.564l.13-.564a7.677 7.677 0 0 1 .109.564l.13.564z",clipRule:"evenodd"})),RotatingLogoSVG=[SvgAcidmanhattan01,SvgAcidmanhattan02,SvgAfrizalRizki01,SvgAlterebro01,SvgAlterebro02,SvgAlterebro03,SvgAnnekatrinenderlein01,SvgBurkabayram01,SvgCarolyn01,SvgCryptemes01,SvgDjkero01,SvgImnot01,SvgSantiagoItzcoatl01,SvgSantiagoItzcoatl02,SvgKlausJoerres01,SvgSpencerLinkous03,SvgMaes02,SvgMumuthestan02,SvgMumuthestan03,SvgMumuthestan04,SvgNatived01,SvgNorulesjustfeels07,Svg111V1Ab01,Svg111V1Ab02,SvgOviy01,SvgOviy02,SvgPilhei01,SvgHermanPretorius01,SvgQizzio02,SvgRodicqart01,SvgKerimSafa01,Svg33301,SvgVarda01,SvgVarda02,SvgSimoneVirgini01,SvgChristianWaadt02,SvgChristianWaadt03,SvgWans01,SvgYazid01,SvgActiveprinciple01,SvgActiveprinciple02,SvgActiveprinciple03,SvgActiveprinciple04,SvgActiveprinciple05,SvgActiveprinciple06,SvgBentameleon01,SvgFakeart01,SvgHeracles01,SvgHoroMox01,SvgHoroMox03,SvgIcecreamgreezer01,SvgJeanSaucisse01,SvgJudoKazate01,SvgJulioGlatt01,SvgJulioGlatt02,SvgJulioGlatt03,SvgJulioGlatt04,SvgJulioGlatt05,SvgJulioGlatt06,SvgLukaPiskore01,SvgLululi02,SvgMaes01,SvgMaliciousSheep01,SvgMarkKnol01,SvgMarquesa01,SvgMarquesa02,SvgMerchantCoppola01,SvgMerchantCoppola02,SvgMightymoss01,SvgMiusoph01,SvgMiusoph02,SvgQizzio01,SvgRkhairunnas01,SvgSantiagoItzcoatl03,SvgSantiagoItzcoatl04,SvgSomfay03,SvgSpencerLinkous01,SvgSpencerLinkous02,SvgSpencerLinkous04,SvgSpencerLinkous05,SvgTamasAntal01,SvgThequrator01,SvgTofudog01,SvgTofudog02,SvgTxchiDu01,SvgViscous01,SvgWans02,SvgZootghost01,SvgHanneMaes01],RotatingLogo=({className:re,seed:ee=1})=>{const ne=reactExports.useMemo(()=>RotatingLogoSVG[Math.floor(randomSeed(ee)*RotatingLogoSVG.length)],[ee]);return jsx$1("div",{className:styles$S.container,children:jsx$1(ne,{fill:"var(--text-color)",width:"132px"})})},RotatingLogo$1=reactExports.memo(RotatingLogo),horizontal="_horizontal_qh7uj_1",vertical$1="_vertical_qh7uj_7",styles$R={horizontal,vertical:vertical$1},Line=({vertical:re,className:ee,style:ne})=>{const ie=classNames$1({[styles$R.vertical]:re,[styles$R.horizontal]:!re});return jsx$1("hr",{style:ne,className:`${ee||""} ${ie} `})};function shallow(re,ee){if(Object.is(re,ee))return!0;if(typeof re!="object"||re===null||typeof ee!="object"||ee===null)return!1;if(re instanceof Map&&ee instanceof Map){if(re.size!==ee.size)return!1;for(const[ie,oe]of re)if(!Object.is(oe,ee.get(ie)))return!1;return!0}if(re instanceof Set&&ee instanceof Set){if(re.size!==ee.size)return!1;for(const ie of re)if(!ee.has(ie))return!1;return!0}const ne=Object.keys(re);if(ne.length!==Object.keys(ee).length)return!1;for(let ie=0;ie<ne.length;ie++)if(!Object.prototype.hasOwnProperty.call(ee,ne[ie])||!Object.is(re[ne[ie]],ee[ne[ie]]))return!1;return!0}const Footer=({menu:re,pin:ee})=>{const{language:ne}=useLanguage(),ie=useUserStore(ge=>ge.address),[oe,ae]=reactExports.useState(3);useLocalSettings(ge=>[ge.zen,ge.setZen],shallow);const[ce,le]=useLocalSettings(ge=>[ge.theme,ge.toggleTheme],shallow),{logos:ue}=useSettings(),he=()=>({initial:{opacity:0,y:100,transition:{duration:.2,ease:"easeOut"}},animate:{opacity:1,y:0,transition:{duration:.2,ease:"easeOut"}},exit:{opacity:0,y:100,transition:{duration:.2,ease:"easeInOut"}}}),fe=classNames$1({[styles$V.container]:!0,[styles$V.pinned]:ee}),me=classNames$1({[styles$V.content]:!0,[styles$V.minimal]:!re});return jsxs(motion.div,{...he(),className:fe,children:[jsx$1(Line,{}),jsxs(motion.footer,{...he(),className:me,children:[jsxs("div",{className:styles$V.logo,children:["Teia DAO LLC.",jsx$1("a",{href:"https://tzkt.io/",children:"Powered by TzKT API"}),re&&jsx$1(Button,{alt:"teia rotating logo",onClick:()=>ae(Math.random()*100),children:jsx$1(RotatingLogo,{theme:ce,logos:ue,seed:oe})})]}),jsx$1("div",{className:styles$V.copyright,children:ne.footer.mint}),re&&jsxs(Fragment,{children:[jsxs("div",{className:styles$V.menus,children:[jsxs("div",{className:styles$V.menu_left,children:[jsx$1(MenuItem,{className:styles$V.menu_label,route:"about"}),jsx$1(MenuItem,{className:styles$V.menu_label,label:"F.A.Q",route:"faq"})]}),jsx$1(Line,{vertical:!0}),jsxs("div",{className:styles$V.menu_right,children:[jsx$1("div",{className:styles$V.address,children:walletPreview(ie)}),jsx$1(MenuItem,{className:styles$V.menu_label,label:"Mint",route:"mint",need_sync:!0}),jsx$1(MenuItem,{className:styles$V.menu_label,label:"Assets",route:"tz",need_sync:!0}),jsx$1(MenuItem,{need_sync:!0,className:styles$V.menu_label,route:"collaborate"}),jsx$1(MenuItem,{className:styles$V.menu_label,label:"Profile",route:"subjkt",need_sync:!0})]})]}),!1]}),!1]})]})},Page=({title:re,children:ee,feed:ne,className:ie})=>{const oe=classNames$1({[styles$W.container]:!0,[styles$W.feed]:ne});return useTitle(re),jsxs(Fragment,{children:[jsx$1(FeedbackComponent,{}),jsx$1(motion.main,{initial:"hidden",animate:"visible",exit:"exit",variants:containerVariants,className:`${oe} ${ie||""}`,children:jsx$1(motion.div,{className:`${styles$W.content} no-fool`,children:ee})}),jsx$1(AnimatePresence,{children:jsx$1(Footer,{menu:!0})})]})},container$w="_container_1doqe_216",large$1="_large_1doqe_224",xlarge="_xlarge_1doqe_229",styles$Q={container:container$w,large:large$1,xlarge},Container$2=({children:re=null,large:ee=!1,xlarge:ne=!1})=>{const ie=classNames$1({[styles$Q.container]:!0,[styles$Q.large]:ee,[styles$Q.xlarge]:ne});return jsx$1("div",{className:ie,children:re})},Container$3=reactExports.memo(Container$2),status_to_string={404:"This page doesn't exist!",401:"You aren't authorized to see this",503:"Looks like our API is down",418:"🫖",default:"Something went wrong"};function RootErrorBoundary({title:re,msg:ee}){const ne=useRouteError();let ie="";return isRouteErrorResponse(ne)&&(ie=lodashExports.get(status_to_string,ne.status)),ie||(ie=status_to_string.default),jsx$1(Page,{title:"Error",children:jsxs("div",{className:styles$$.container,children:[jsxs("div",{className:styles$$.msg_box,children:[jsx$1("h1",{children:re||(ne==null?void 0:ne.cause)||ie}),jsx$1("p",{children:(ne==null?void 0:ne.message)||ee})]}),jsx$1(Button,{href:"https://github.com/teia-community/teia-ui/issues",children:jsx$1("strong",{children:"Report Issue"})}),jsx$1(Button,{to:"/",children:"Go back home"})]})})}var dist={},browserPonyfill={exports:{}};(function(re,ee){var ne=function(){function oe(){this.fetch=!1,this.DOMException=globalThis.DOMException}return oe.prototype=globalThis,new oe}();(function(oe){(function(ae){var ce={searchParams:"URLSearchParams"in oe,iterable:"Symbol"in oe&&"iterator"in Symbol,blob:"FileReader"in oe&&"Blob"in oe&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in oe,arrayBuffer:"ArrayBuffer"in oe};function le(ze){return ze&&DataView.prototype.isPrototypeOf(ze)}if(ce.arrayBuffer)var ue=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],he=ArrayBuffer.isView||function(ze){return ze&&ue.indexOf(Object.prototype.toString.call(ze))>-1};function fe(ze){if(typeof ze!="string"&&(ze=String(ze)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(ze))throw new TypeError("Invalid character in header field name");return ze.toLowerCase()}function me(ze){return typeof ze!="string"&&(ze=String(ze)),ze}function ge(ze){var Ve={next:function(){var He=ze.shift();return{done:He===void 0,value:He}}};return ce.iterable&&(Ve[Symbol.iterator]=function(){return Ve}),Ve}function ve(ze){this.map={},ze instanceof ve?ze.forEach(function(Ve,He){this.append(He,Ve)},this):Array.isArray(ze)?ze.forEach(function(Ve){this.append(Ve[0],Ve[1])},this):ze&&Object.getOwnPropertyNames(ze).forEach(function(Ve){this.append(Ve,ze[Ve])},this)}ve.prototype.append=function(ze,Ve){ze=fe(ze),Ve=me(Ve);var He=this.map[ze];this.map[ze]=He?He+", "+Ve:Ve},ve.prototype.delete=function(ze){delete this.map[fe(ze)]},ve.prototype.get=function(ze){return ze=fe(ze),this.has(ze)?this.map[ze]:null},ve.prototype.has=function(ze){return this.map.hasOwnProperty(fe(ze))},ve.prototype.set=function(ze,Ve){this.map[fe(ze)]=me(Ve)},ve.prototype.forEach=function(ze,Ve){for(var He in this.map)this.map.hasOwnProperty(He)&&ze.call(Ve,this.map[He],He,this)},ve.prototype.keys=function(){var ze=[];return this.forEach(function(Ve,He){ze.push(He)}),ge(ze)},ve.prototype.values=function(){var ze=[];return this.forEach(function(Ve){ze.push(Ve)}),ge(ze)},ve.prototype.entries=function(){var ze=[];return this.forEach(function(Ve,He){ze.push([He,Ve])}),ge(ze)},ce.iterable&&(ve.prototype[Symbol.iterator]=ve.prototype.entries);function ye(ze){if(ze.bodyUsed)return Promise.reject(new TypeError("Already read"));ze.bodyUsed=!0}function be(ze){return new Promise(function(Ve,He){ze.onload=function(){Ve(ze.result)},ze.onerror=function(){He(ze.error)}})}function Ce(ze){var Ve=new FileReader,He=be(Ve);return Ve.readAsArrayBuffer(ze),He}function Se(ze){var Ve=new FileReader,He=be(Ve);return Ve.readAsText(ze),He}function $e(ze){for(var Ve=new Uint8Array(ze),He=new Array(Ve.length),We=0;We<Ve.length;We++)He[We]=String.fromCharCode(Ve[We]);return He.join("")}function Te(ze){if(ze.slice)return ze.slice(0);var Ve=new Uint8Array(ze.byteLength);return Ve.set(new Uint8Array(ze)),Ve.buffer}function Ne(){return this.bodyUsed=!1,this._initBody=function(ze){this._bodyInit=ze,ze?typeof ze=="string"?this._bodyText=ze:ce.blob&&Blob.prototype.isPrototypeOf(ze)?this._bodyBlob=ze:ce.formData&&FormData.prototype.isPrototypeOf(ze)?this._bodyFormData=ze:ce.searchParams&&URLSearchParams.prototype.isPrototypeOf(ze)?this._bodyText=ze.toString():ce.arrayBuffer&&ce.blob&&le(ze)?(this._bodyArrayBuffer=Te(ze.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):ce.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(ze)||he(ze))?this._bodyArrayBuffer=Te(ze):this._bodyText=ze=Object.prototype.toString.call(ze):this._bodyText="",this.headers.get("content-type")||(typeof ze=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):ce.searchParams&&URLSearchParams.prototype.isPrototypeOf(ze)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},ce.blob&&(this.blob=function(){var ze=ye(this);if(ze)return ze;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?ye(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Ce)}),this.text=function(){var ze=ye(this);if(ze)return ze;if(this._bodyBlob)return Se(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve($e(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},ce.formData&&(this.formData=function(){return this.text().then(Oe)}),this.json=function(){return this.text().then(JSON.parse)},this}var Ie=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ke(ze){var Ve=ze.toUpperCase();return Ie.indexOf(Ve)>-1?Ve:ze}function De(ze,Ve){Ve=Ve||{};var He=Ve.body;if(ze instanceof De){if(ze.bodyUsed)throw new TypeError("Already read");this.url=ze.url,this.credentials=ze.credentials,Ve.headers||(this.headers=new ve(ze.headers)),this.method=ze.method,this.mode=ze.mode,this.signal=ze.signal,!He&&ze._bodyInit!=null&&(He=ze._bodyInit,ze.bodyUsed=!0)}else this.url=String(ze);if(this.credentials=Ve.credentials||this.credentials||"same-origin",(Ve.headers||!this.headers)&&(this.headers=new ve(Ve.headers)),this.method=ke(Ve.method||this.method||"GET"),this.mode=Ve.mode||this.mode||null,this.signal=Ve.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&He)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(He)}De.prototype.clone=function(){return new De(this,{body:this._bodyInit})};function Oe(ze){var Ve=new FormData;return ze.trim().split("&").forEach(function(He){if(He){var We=He.split("="),Ye=We.shift().replace(/\+/g," "),Ue=We.join("=").replace(/\+/g," ");Ve.append(decodeURIComponent(Ye),decodeURIComponent(Ue))}}),Ve}function Be(ze){var Ve=new ve,He=ze.replace(/\r?\n[\t ]+/g," ");return He.split(/\r?\n/).forEach(function(We){var Ye=We.split(":"),Ue=Ye.shift().trim();if(Ue){var Ke=Ye.join(":").trim();Ve.append(Ue,Ke)}}),Ve}Ne.call(De.prototype);function Me(ze,Ve){Ve||(Ve={}),this.type="default",this.status=Ve.status===void 0?200:Ve.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in Ve?Ve.statusText:"OK",this.headers=new ve(Ve.headers),this.url=Ve.url||"",this._initBody(ze)}Ne.call(Me.prototype),Me.prototype.clone=function(){return new Me(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new ve(this.headers),url:this.url})},Me.error=function(){var ze=new Me(null,{status:0,statusText:""});return ze.type="error",ze};var Le=[301,302,303,307,308];Me.redirect=function(ze,Ve){if(Le.indexOf(Ve)===-1)throw new RangeError("Invalid status code");return new Me(null,{status:Ve,headers:{location:ze}})},ae.DOMException=oe.DOMException;try{new ae.DOMException}catch{ae.DOMException=function(Ve,He){this.message=Ve,this.name=He;var We=Error(Ve);this.stack=We.stack},ae.DOMException.prototype=Object.create(Error.prototype),ae.DOMException.prototype.constructor=ae.DOMException}function je(ze,Ve){return new Promise(function(He,We){var Ye=new De(ze,Ve);if(Ye.signal&&Ye.signal.aborted)return We(new ae.DOMException("Aborted","AbortError"));var Ue=new XMLHttpRequest;function Ke(){Ue.abort()}Ue.onload=function(){var Xe={status:Ue.status,statusText:Ue.statusText,headers:Be(Ue.getAllResponseHeaders()||"")};Xe.url="responseURL"in Ue?Ue.responseURL:Xe.headers.get("X-Request-URL");var Vt="response"in Ue?Ue.response:Ue.responseText;He(new Me(Vt,Xe))},Ue.onerror=function(){We(new TypeError("Network request failed"))},Ue.ontimeout=function(){We(new TypeError("Network request failed"))},Ue.onabort=function(){We(new ae.DOMException("Aborted","AbortError"))},Ue.open(Ye.method,Ye.url,!0),Ye.credentials==="include"?Ue.withCredentials=!0:Ye.credentials==="omit"&&(Ue.withCredentials=!1),"responseType"in Ue&&ce.blob&&(Ue.responseType="blob"),Ye.headers.forEach(function(Xe,Vt){Ue.setRequestHeader(Vt,Xe)}),Ye.signal&&(Ye.signal.addEventListener("abort",Ke),Ue.onreadystatechange=function(){Ue.readyState===4&&Ye.signal.removeEventListener("abort",Ke)}),Ue.send(typeof Ye._bodyInit>"u"?null:Ye._bodyInit)})}return je.polyfill=!0,oe.fetch||(oe.fetch=je,oe.Headers=ve,oe.Request=De,oe.Response=Me),ae.Headers=ve,ae.Request=De,ae.Response=Me,ae.fetch=je,Object.defineProperty(ae,"__esModule",{value:!0}),ae})({})})(ne),ne.fetch.ponyfill=!0,delete ne.fetch.polyfill;var ie=ne;ee=ie.fetch,ee.default=ie.fetch,ee.fetch=ie.fetch,ee.Headers=ie.Headers,ee.Request=ie.Request,ee.Response=ie.Response,re.exports=ee})(browserPonyfill,browserPonyfill.exports);var browserPonyfillExports=browserPonyfill.exports;function isObjectLike$4(re){return typeof re=="object"&&re!==null}function invariant(re,ee){if(!!!re)throw new Error(ee??"Unexpected invariant triggered.")}const LineRegExp=/\r\n|[\n\r]/g;function getLocation(re,ee){let ne=0,ie=1;for(const oe of re.body.matchAll(LineRegExp)){if(typeof oe.index=="number"||invariant(!1),oe.index>=ee)break;ne=oe.index+oe[0].length,ie+=1}return{line:ie,column:ee+1-ne}}function printLocation(re){return printSourceLocation(re.source,getLocation(re.source,re.start))}function printSourceLocation(re,ee){const ne=re.locationOffset.column-1,ie="".padStart(ne)+re.body,oe=ee.line-1,ae=re.locationOffset.line-1,ce=ee.line+ae,le=ee.line===1?ne:0,ue=ee.column+le,he=`${re.name}:${ce}:${ue}
`,fe=ie.split(/\r\n|[\n\r]/g),me=fe[oe];if(me.length>120){const ge=Math.floor(ue/80),ve=ue%80,ye=[];for(let be=0;be<me.length;be+=80)ye.push(me.slice(be,be+80));return he+printPrefixedLines([[`${ce} |`,ye[0]],...ye.slice(1,ge+1).map(be=>["|",be]),["|","^".padStart(ve)],["|",ye[ge+1]]])}return he+printPrefixedLines([[`${ce-1} |`,fe[oe-1]],[`${ce} |`,me],["|","^".padStart(ue)],[`${ce+1} |`,fe[oe+1]]])}function printPrefixedLines(re){const ee=re.filter(([ie,oe])=>oe!==void 0),ne=Math.max(...ee.map(([ie])=>ie.length));return ee.map(([ie,oe])=>ie.padStart(ne)+(oe?" "+oe:"")).join(`
`)}function toNormalizedOptions(re){const ee=re[0];return ee==null||"kind"in ee||"length"in ee?{nodes:ee,source:re[1],positions:re[2],path:re[3],originalError:re[4],extensions:re[5]}:ee}class GraphQLError extends Error{constructor(ee,...ne){var ie,oe,ae;const{nodes:ce,source:le,positions:ue,path:he,originalError:fe,extensions:me}=toNormalizedOptions(ne);super(ee),this.name="GraphQLError",this.path=he??void 0,this.originalError=fe??void 0,this.nodes=undefinedIfEmpty(Array.isArray(ce)?ce:ce?[ce]:void 0);const ge=undefinedIfEmpty((ie=this.nodes)===null||ie===void 0?void 0:ie.map(ye=>ye.loc).filter(ye=>ye!=null));this.source=le??(ge==null||(oe=ge[0])===null||oe===void 0?void 0:oe.source),this.positions=ue??(ge==null?void 0:ge.map(ye=>ye.start)),this.locations=ue&&le?ue.map(ye=>getLocation(le,ye)):ge==null?void 0:ge.map(ye=>getLocation(ye.source,ye.start));const ve=isObjectLike$4(fe==null?void 0:fe.extensions)?fe==null?void 0:fe.extensions:void 0;this.extensions=(ae=me??ve)!==null&&ae!==void 0?ae:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),fe!=null&&fe.stack?Object.defineProperty(this,"stack",{value:fe.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,GraphQLError):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let ee=this.message;if(this.nodes)for(const ne of this.nodes)ne.loc&&(ee+=`

`+printLocation(ne.loc));else if(this.source&&this.locations)for(const ne of this.locations)ee+=`

`+printSourceLocation(this.source,ne);return ee}toJSON(){const ee={message:this.message};return this.locations!=null&&(ee.locations=this.locations),this.path!=null&&(ee.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(ee.extensions=this.extensions),ee}}function undefinedIfEmpty(re){return re===void 0||re.length===0?void 0:re}function syntaxError$1(re,ee,ne){return new GraphQLError(`Syntax Error: ${ne}`,{source:re,positions:[ee]})}class Location{constructor(ee,ne,ie){this.start=ee.start,this.end=ne.end,this.startToken=ee,this.endToken=ne,this.source=ie}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Token{constructor(ee,ne,ie,oe,ae,ce){this.kind=ee,this.start=ne,this.end=ie,this.line=oe,this.column=ae,this.value=ce,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const QueryDocumentKeys={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},kindValues=new Set(Object.keys(QueryDocumentKeys));function isNode$2(re){const ee=re==null?void 0:re.kind;return typeof ee=="string"&&kindValues.has(ee)}var OperationTypeNode;(function(re){re.QUERY="query",re.MUTATION="mutation",re.SUBSCRIPTION="subscription"})(OperationTypeNode||(OperationTypeNode={}));var DirectiveLocation;(function(re){re.QUERY="QUERY",re.MUTATION="MUTATION",re.SUBSCRIPTION="SUBSCRIPTION",re.FIELD="FIELD",re.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",re.FRAGMENT_SPREAD="FRAGMENT_SPREAD",re.INLINE_FRAGMENT="INLINE_FRAGMENT",re.VARIABLE_DEFINITION="VARIABLE_DEFINITION",re.SCHEMA="SCHEMA",re.SCALAR="SCALAR",re.OBJECT="OBJECT",re.FIELD_DEFINITION="FIELD_DEFINITION",re.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",re.INTERFACE="INTERFACE",re.UNION="UNION",re.ENUM="ENUM",re.ENUM_VALUE="ENUM_VALUE",re.INPUT_OBJECT="INPUT_OBJECT",re.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(DirectiveLocation||(DirectiveLocation={}));var Kind;(function(re){re.NAME="Name",re.DOCUMENT="Document",re.OPERATION_DEFINITION="OperationDefinition",re.VARIABLE_DEFINITION="VariableDefinition",re.SELECTION_SET="SelectionSet",re.FIELD="Field",re.ARGUMENT="Argument",re.FRAGMENT_SPREAD="FragmentSpread",re.INLINE_FRAGMENT="InlineFragment",re.FRAGMENT_DEFINITION="FragmentDefinition",re.VARIABLE="Variable",re.INT="IntValue",re.FLOAT="FloatValue",re.STRING="StringValue",re.BOOLEAN="BooleanValue",re.NULL="NullValue",re.ENUM="EnumValue",re.LIST="ListValue",re.OBJECT="ObjectValue",re.OBJECT_FIELD="ObjectField",re.DIRECTIVE="Directive",re.NAMED_TYPE="NamedType",re.LIST_TYPE="ListType",re.NON_NULL_TYPE="NonNullType",re.SCHEMA_DEFINITION="SchemaDefinition",re.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",re.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",re.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",re.FIELD_DEFINITION="FieldDefinition",re.INPUT_VALUE_DEFINITION="InputValueDefinition",re.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",re.UNION_TYPE_DEFINITION="UnionTypeDefinition",re.ENUM_TYPE_DEFINITION="EnumTypeDefinition",re.ENUM_VALUE_DEFINITION="EnumValueDefinition",re.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",re.DIRECTIVE_DEFINITION="DirectiveDefinition",re.SCHEMA_EXTENSION="SchemaExtension",re.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",re.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",re.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",re.UNION_TYPE_EXTENSION="UnionTypeExtension",re.ENUM_TYPE_EXTENSION="EnumTypeExtension",re.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(Kind||(Kind={}));function isWhiteSpace(re){return re===9||re===32}function isDigit(re){return re>=48&&re<=57}function isLetter(re){return re>=97&&re<=122||re>=65&&re<=90}function isNameStart(re){return isLetter(re)||re===95}function isNameContinue(re){return isLetter(re)||isDigit(re)||re===95}function dedentBlockStringLines(re){var ee;let ne=Number.MAX_SAFE_INTEGER,ie=null,oe=-1;for(let ce=0;ce<re.length;++ce){var ae;const le=re[ce],ue=leadingWhitespace(le);ue!==le.length&&(ie=(ae=ie)!==null&&ae!==void 0?ae:ce,oe=ce,ce!==0&&ue<ne&&(ne=ue))}return re.map((ce,le)=>le===0?ce:ce.slice(ne)).slice((ee=ie)!==null&&ee!==void 0?ee:0,oe+1)}function leadingWhitespace(re){let ee=0;for(;ee<re.length&&isWhiteSpace(re.charCodeAt(ee));)++ee;return ee}function printBlockString(re,ee){const ne=re.replace(/"""/g,'\\"""'),ie=ne.split(/\r\n|[\n\r]/g),oe=ie.length===1,ae=ie.length>1&&ie.slice(1).every(ve=>ve.length===0||isWhiteSpace(ve.charCodeAt(0))),ce=ne.endsWith('\\"""'),le=re.endsWith('"')&&!ce,ue=re.endsWith("\\"),he=le||ue,fe=!(ee!=null&&ee.minimize)&&(!oe||re.length>70||he||ae||ce);let me="";const ge=oe&&isWhiteSpace(re.charCodeAt(0));return(fe&&!ge||ae)&&(me+=`
`),me+=ne,(fe||he)&&(me+=`
`),'"""'+me+'"""'}var TokenKind;(function(re){re.SOF="<SOF>",re.EOF="<EOF>",re.BANG="!",re.DOLLAR="$",re.AMP="&",re.PAREN_L="(",re.PAREN_R=")",re.SPREAD="...",re.COLON=":",re.EQUALS="=",re.AT="@",re.BRACKET_L="[",re.BRACKET_R="]",re.BRACE_L="{",re.PIPE="|",re.BRACE_R="}",re.NAME="Name",re.INT="Int",re.FLOAT="Float",re.STRING="String",re.BLOCK_STRING="BlockString",re.COMMENT="Comment"})(TokenKind||(TokenKind={}));class Lexer{constructor(ee){const ne=new Token(TokenKind.SOF,0,0,0,0);this.source=ee,this.lastToken=ne,this.token=ne,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let ee=this.token;if(ee.kind!==TokenKind.EOF)do if(ee.next)ee=ee.next;else{const ne=readNextToken(this,ee.end);ee.next=ne,ne.prev=ee,ee=ne}while(ee.kind===TokenKind.COMMENT);return ee}}function isPunctuatorTokenKind(re){return re===TokenKind.BANG||re===TokenKind.DOLLAR||re===TokenKind.AMP||re===TokenKind.PAREN_L||re===TokenKind.PAREN_R||re===TokenKind.SPREAD||re===TokenKind.COLON||re===TokenKind.EQUALS||re===TokenKind.AT||re===TokenKind.BRACKET_L||re===TokenKind.BRACKET_R||re===TokenKind.BRACE_L||re===TokenKind.PIPE||re===TokenKind.BRACE_R}function isUnicodeScalarValue(re){return re>=0&&re<=55295||re>=57344&&re<=1114111}function isSupplementaryCodePoint(re,ee){return isLeadingSurrogate(re.charCodeAt(ee))&&isTrailingSurrogate(re.charCodeAt(ee+1))}function isLeadingSurrogate(re){return re>=55296&&re<=56319}function isTrailingSurrogate(re){return re>=56320&&re<=57343}function printCodePointAt(re,ee){const ne=re.source.body.codePointAt(ee);if(ne===void 0)return TokenKind.EOF;if(ne>=32&&ne<=126){const ie=String.fromCodePoint(ne);return ie==='"'?`'"'`:`"${ie}"`}return"U+"+ne.toString(16).toUpperCase().padStart(4,"0")}function createToken(re,ee,ne,ie,oe){const ae=re.line,ce=1+ne-re.lineStart;return new Token(ee,ne,ie,ae,ce,oe)}function readNextToken(re,ee){const ne=re.source.body,ie=ne.length;let oe=ee;for(;oe<ie;){const ae=ne.charCodeAt(oe);switch(ae){case 65279:case 9:case 32:case 44:++oe;continue;case 10:++oe,++re.line,re.lineStart=oe;continue;case 13:ne.charCodeAt(oe+1)===10?oe+=2:++oe,++re.line,re.lineStart=oe;continue;case 35:return readComment(re,oe);case 33:return createToken(re,TokenKind.BANG,oe,oe+1);case 36:return createToken(re,TokenKind.DOLLAR,oe,oe+1);case 38:return createToken(re,TokenKind.AMP,oe,oe+1);case 40:return createToken(re,TokenKind.PAREN_L,oe,oe+1);case 41:return createToken(re,TokenKind.PAREN_R,oe,oe+1);case 46:if(ne.charCodeAt(oe+1)===46&&ne.charCodeAt(oe+2)===46)return createToken(re,TokenKind.SPREAD,oe,oe+3);break;case 58:return createToken(re,TokenKind.COLON,oe,oe+1);case 61:return createToken(re,TokenKind.EQUALS,oe,oe+1);case 64:return createToken(re,TokenKind.AT,oe,oe+1);case 91:return createToken(re,TokenKind.BRACKET_L,oe,oe+1);case 93:return createToken(re,TokenKind.BRACKET_R,oe,oe+1);case 123:return createToken(re,TokenKind.BRACE_L,oe,oe+1);case 124:return createToken(re,TokenKind.PIPE,oe,oe+1);case 125:return createToken(re,TokenKind.BRACE_R,oe,oe+1);case 34:return ne.charCodeAt(oe+1)===34&&ne.charCodeAt(oe+2)===34?readBlockString(re,oe):readString(re,oe)}if(isDigit(ae)||ae===45)return readNumber(re,oe,ae);if(isNameStart(ae))return readName(re,oe);throw syntaxError$1(re.source,oe,ae===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:isUnicodeScalarValue(ae)||isSupplementaryCodePoint(ne,oe)?`Unexpected character: ${printCodePointAt(re,oe)}.`:`Invalid character: ${printCodePointAt(re,oe)}.`)}return createToken(re,TokenKind.EOF,ie,ie)}function readComment(re,ee){const ne=re.source.body,ie=ne.length;let oe=ee+1;for(;oe<ie;){const ae=ne.charCodeAt(oe);if(ae===10||ae===13)break;if(isUnicodeScalarValue(ae))++oe;else if(isSupplementaryCodePoint(ne,oe))oe+=2;else break}return createToken(re,TokenKind.COMMENT,ee,oe,ne.slice(ee+1,oe))}function readNumber(re,ee,ne){const ie=re.source.body;let oe=ee,ae=ne,ce=!1;if(ae===45&&(ae=ie.charCodeAt(++oe)),ae===48){if(ae=ie.charCodeAt(++oe),isDigit(ae))throw syntaxError$1(re.source,oe,`Invalid number, unexpected digit after 0: ${printCodePointAt(re,oe)}.`)}else oe=readDigits(re,oe,ae),ae=ie.charCodeAt(oe);if(ae===46&&(ce=!0,ae=ie.charCodeAt(++oe),oe=readDigits(re,oe,ae),ae=ie.charCodeAt(oe)),(ae===69||ae===101)&&(ce=!0,ae=ie.charCodeAt(++oe),(ae===43||ae===45)&&(ae=ie.charCodeAt(++oe)),oe=readDigits(re,oe,ae),ae=ie.charCodeAt(oe)),ae===46||isNameStart(ae))throw syntaxError$1(re.source,oe,`Invalid number, expected digit but got: ${printCodePointAt(re,oe)}.`);return createToken(re,ce?TokenKind.FLOAT:TokenKind.INT,ee,oe,ie.slice(ee,oe))}function readDigits(re,ee,ne){if(!isDigit(ne))throw syntaxError$1(re.source,ee,`Invalid number, expected digit but got: ${printCodePointAt(re,ee)}.`);const ie=re.source.body;let oe=ee+1;for(;isDigit(ie.charCodeAt(oe));)++oe;return oe}function readString(re,ee){const ne=re.source.body,ie=ne.length;let oe=ee+1,ae=oe,ce="";for(;oe<ie;){const le=ne.charCodeAt(oe);if(le===34)return ce+=ne.slice(ae,oe),createToken(re,TokenKind.STRING,ee,oe+1,ce);if(le===92){ce+=ne.slice(ae,oe);const ue=ne.charCodeAt(oe+1)===117?ne.charCodeAt(oe+2)===123?readEscapedUnicodeVariableWidth(re,oe):readEscapedUnicodeFixedWidth(re,oe):readEscapedCharacter(re,oe);ce+=ue.value,oe+=ue.size,ae=oe;continue}if(le===10||le===13)break;if(isUnicodeScalarValue(le))++oe;else if(isSupplementaryCodePoint(ne,oe))oe+=2;else throw syntaxError$1(re.source,oe,`Invalid character within String: ${printCodePointAt(re,oe)}.`)}throw syntaxError$1(re.source,oe,"Unterminated string.")}function readEscapedUnicodeVariableWidth(re,ee){const ne=re.source.body;let ie=0,oe=3;for(;oe<12;){const ae=ne.charCodeAt(ee+oe++);if(ae===125){if(oe<5||!isUnicodeScalarValue(ie))break;return{value:String.fromCodePoint(ie),size:oe}}if(ie=ie<<4|readHexDigit(ae),ie<0)break}throw syntaxError$1(re.source,ee,`Invalid Unicode escape sequence: "${ne.slice(ee,ee+oe)}".`)}function readEscapedUnicodeFixedWidth(re,ee){const ne=re.source.body,ie=read16BitHexCode(ne,ee+2);if(isUnicodeScalarValue(ie))return{value:String.fromCodePoint(ie),size:6};if(isLeadingSurrogate(ie)&&ne.charCodeAt(ee+6)===92&&ne.charCodeAt(ee+7)===117){const oe=read16BitHexCode(ne,ee+8);if(isTrailingSurrogate(oe))return{value:String.fromCodePoint(ie,oe),size:12}}throw syntaxError$1(re.source,ee,`Invalid Unicode escape sequence: "${ne.slice(ee,ee+6)}".`)}function read16BitHexCode(re,ee){return readHexDigit(re.charCodeAt(ee))<<12|readHexDigit(re.charCodeAt(ee+1))<<8|readHexDigit(re.charCodeAt(ee+2))<<4|readHexDigit(re.charCodeAt(ee+3))}function readHexDigit(re){return re>=48&&re<=57?re-48:re>=65&&re<=70?re-55:re>=97&&re<=102?re-87:-1}function readEscapedCharacter(re,ee){const ne=re.source.body;switch(ne.charCodeAt(ee+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw syntaxError$1(re.source,ee,`Invalid character escape sequence: "${ne.slice(ee,ee+2)}".`)}function readBlockString(re,ee){const ne=re.source.body,ie=ne.length;let oe=re.lineStart,ae=ee+3,ce=ae,le="";const ue=[];for(;ae<ie;){const he=ne.charCodeAt(ae);if(he===34&&ne.charCodeAt(ae+1)===34&&ne.charCodeAt(ae+2)===34){le+=ne.slice(ce,ae),ue.push(le);const fe=createToken(re,TokenKind.BLOCK_STRING,ee,ae+3,dedentBlockStringLines(ue).join(`
`));return re.line+=ue.length-1,re.lineStart=oe,fe}if(he===92&&ne.charCodeAt(ae+1)===34&&ne.charCodeAt(ae+2)===34&&ne.charCodeAt(ae+3)===34){le+=ne.slice(ce,ae),ce=ae+1,ae+=4;continue}if(he===10||he===13){le+=ne.slice(ce,ae),ue.push(le),he===13&&ne.charCodeAt(ae+1)===10?ae+=2:++ae,le="",ce=ae,oe=ae;continue}if(isUnicodeScalarValue(he))++ae;else if(isSupplementaryCodePoint(ne,ae))ae+=2;else throw syntaxError$1(re.source,ae,`Invalid character within String: ${printCodePointAt(re,ae)}.`)}throw syntaxError$1(re.source,ae,"Unterminated string.")}function readName(re,ee){const ne=re.source.body,ie=ne.length;let oe=ee+1;for(;oe<ie;){const ae=ne.charCodeAt(oe);if(isNameContinue(ae))++oe;else break}return createToken(re,TokenKind.NAME,ee,oe,ne.slice(ee,oe))}function devAssert(re,ee){if(!!!re)throw new Error(ee)}const MAX_ARRAY_LENGTH=10,MAX_RECURSIVE_DEPTH=2;function inspect(re){return formatValue(re,[])}function formatValue(re,ee){switch(typeof re){case"string":return JSON.stringify(re);case"function":return re.name?`[function ${re.name}]`:"[function]";case"object":return formatObjectValue(re,ee);default:return String(re)}}function formatObjectValue(re,ee){if(re===null)return"null";if(ee.includes(re))return"[Circular]";const ne=[...ee,re];if(isJSONable(re)){const ie=re.toJSON();if(ie!==re)return typeof ie=="string"?ie:formatValue(ie,ne)}else if(Array.isArray(re))return formatArray(re,ne);return formatObject(re,ne)}function isJSONable(re){return typeof re.toJSON=="function"}function formatObject(re,ee){const ne=Object.entries(re);return ne.length===0?"{}":ee.length>MAX_RECURSIVE_DEPTH?"["+getObjectTag(re)+"]":"{ "+ne.map(([oe,ae])=>oe+": "+formatValue(ae,ee)).join(", ")+" }"}function formatArray(re,ee){if(re.length===0)return"[]";if(ee.length>MAX_RECURSIVE_DEPTH)return"[Array]";const ne=Math.min(MAX_ARRAY_LENGTH,re.length),ie=re.length-ne,oe=[];for(let ae=0;ae<ne;++ae)oe.push(formatValue(re[ae],ee));return ie===1?oe.push("... 1 more item"):ie>1&&oe.push(`... ${ie} more items`),"["+oe.join(", ")+"]"}function getObjectTag(re){const ee=Object.prototype.toString.call(re).replace(/^\[object /,"").replace(/]$/,"");if(ee==="Object"&&typeof re.constructor=="function"){const ne=re.constructor.name;if(typeof ne=="string"&&ne!=="")return ne}return ee}const instanceOf=function(ee,ne){return ee instanceof ne};let Source$1=class{constructor(ee,ne="GraphQL request",ie={line:1,column:1}){typeof ee=="string"||devAssert(!1,`Body must be a string. Received: ${inspect(ee)}.`),this.body=ee,this.name=ne,this.locationOffset=ie,this.locationOffset.line>0||devAssert(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||devAssert(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}};function isSource(re){return instanceOf(re,Source$1)}function parse$3(re,ee){return new Parser$1(re,ee).parseDocument()}function parseValue$1(re,ee){const ne=new Parser$1(re,ee);ne.expectToken(TokenKind.SOF);const ie=ne.parseValueLiteral(!1);return ne.expectToken(TokenKind.EOF),ie}function parseConstValue(re,ee){const ne=new Parser$1(re,ee);ne.expectToken(TokenKind.SOF);const ie=ne.parseConstValueLiteral();return ne.expectToken(TokenKind.EOF),ie}function parseType(re,ee){const ne=new Parser$1(re,ee);ne.expectToken(TokenKind.SOF);const ie=ne.parseTypeReference();return ne.expectToken(TokenKind.EOF),ie}let Parser$1=class{constructor(ee,ne={}){const ie=isSource(ee)?ee:new Source$1(ee);this._lexer=new Lexer(ie),this._options=ne,this._tokenCounter=0}parseName(){const ee=this.expectToken(TokenKind.NAME);return this.node(ee,{kind:Kind.NAME,value:ee.value})}parseDocument(){return this.node(this._lexer.token,{kind:Kind.DOCUMENT,definitions:this.many(TokenKind.SOF,this.parseDefinition,TokenKind.EOF)})}parseDefinition(){if(this.peek(TokenKind.BRACE_L))return this.parseOperationDefinition();const ee=this.peekDescription(),ne=ee?this._lexer.lookahead():this._lexer.token;if(ne.kind===TokenKind.NAME){switch(ne.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(ee)throw syntaxError$1(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(ne.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(ne)}parseOperationDefinition(){const ee=this._lexer.token;if(this.peek(TokenKind.BRACE_L))return this.node(ee,{kind:Kind.OPERATION_DEFINITION,operation:OperationTypeNode.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const ne=this.parseOperationType();let ie;return this.peek(TokenKind.NAME)&&(ie=this.parseName()),this.node(ee,{kind:Kind.OPERATION_DEFINITION,operation:ne,name:ie,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const ee=this.expectToken(TokenKind.NAME);switch(ee.value){case"query":return OperationTypeNode.QUERY;case"mutation":return OperationTypeNode.MUTATION;case"subscription":return OperationTypeNode.SUBSCRIPTION}throw this.unexpected(ee)}parseVariableDefinitions(){return this.optionalMany(TokenKind.PAREN_L,this.parseVariableDefinition,TokenKind.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:Kind.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(TokenKind.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(TokenKind.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const ee=this._lexer.token;return this.expectToken(TokenKind.DOLLAR),this.node(ee,{kind:Kind.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:Kind.SELECTION_SET,selections:this.many(TokenKind.BRACE_L,this.parseSelection,TokenKind.BRACE_R)})}parseSelection(){return this.peek(TokenKind.SPREAD)?this.parseFragment():this.parseField()}parseField(){const ee=this._lexer.token,ne=this.parseName();let ie,oe;return this.expectOptionalToken(TokenKind.COLON)?(ie=ne,oe=this.parseName()):oe=ne,this.node(ee,{kind:Kind.FIELD,alias:ie,name:oe,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(TokenKind.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(ee){const ne=ee?this.parseConstArgument:this.parseArgument;return this.optionalMany(TokenKind.PAREN_L,ne,TokenKind.PAREN_R)}parseArgument(ee=!1){const ne=this._lexer.token,ie=this.parseName();return this.expectToken(TokenKind.COLON),this.node(ne,{kind:Kind.ARGUMENT,name:ie,value:this.parseValueLiteral(ee)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const ee=this._lexer.token;this.expectToken(TokenKind.SPREAD);const ne=this.expectOptionalKeyword("on");return!ne&&this.peek(TokenKind.NAME)?this.node(ee,{kind:Kind.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(ee,{kind:Kind.INLINE_FRAGMENT,typeCondition:ne?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const ee=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(ee,{kind:Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(ee,{kind:Kind.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(ee){const ne=this._lexer.token;switch(ne.kind){case TokenKind.BRACKET_L:return this.parseList(ee);case TokenKind.BRACE_L:return this.parseObject(ee);case TokenKind.INT:return this.advanceLexer(),this.node(ne,{kind:Kind.INT,value:ne.value});case TokenKind.FLOAT:return this.advanceLexer(),this.node(ne,{kind:Kind.FLOAT,value:ne.value});case TokenKind.STRING:case TokenKind.BLOCK_STRING:return this.parseStringLiteral();case TokenKind.NAME:switch(this.advanceLexer(),ne.value){case"true":return this.node(ne,{kind:Kind.BOOLEAN,value:!0});case"false":return this.node(ne,{kind:Kind.BOOLEAN,value:!1});case"null":return this.node(ne,{kind:Kind.NULL});default:return this.node(ne,{kind:Kind.ENUM,value:ne.value})}case TokenKind.DOLLAR:if(ee)if(this.expectToken(TokenKind.DOLLAR),this._lexer.token.kind===TokenKind.NAME){const ie=this._lexer.token.value;throw syntaxError$1(this._lexer.source,ne.start,`Unexpected variable "$${ie}" in constant value.`)}else throw this.unexpected(ne);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const ee=this._lexer.token;return this.advanceLexer(),this.node(ee,{kind:Kind.STRING,value:ee.value,block:ee.kind===TokenKind.BLOCK_STRING})}parseList(ee){const ne=()=>this.parseValueLiteral(ee);return this.node(this._lexer.token,{kind:Kind.LIST,values:this.any(TokenKind.BRACKET_L,ne,TokenKind.BRACKET_R)})}parseObject(ee){const ne=()=>this.parseObjectField(ee);return this.node(this._lexer.token,{kind:Kind.OBJECT,fields:this.any(TokenKind.BRACE_L,ne,TokenKind.BRACE_R)})}parseObjectField(ee){const ne=this._lexer.token,ie=this.parseName();return this.expectToken(TokenKind.COLON),this.node(ne,{kind:Kind.OBJECT_FIELD,name:ie,value:this.parseValueLiteral(ee)})}parseDirectives(ee){const ne=[];for(;this.peek(TokenKind.AT);)ne.push(this.parseDirective(ee));return ne}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(ee){const ne=this._lexer.token;return this.expectToken(TokenKind.AT),this.node(ne,{kind:Kind.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(ee)})}parseTypeReference(){const ee=this._lexer.token;let ne;if(this.expectOptionalToken(TokenKind.BRACKET_L)){const ie=this.parseTypeReference();this.expectToken(TokenKind.BRACKET_R),ne=this.node(ee,{kind:Kind.LIST_TYPE,type:ie})}else ne=this.parseNamedType();return this.expectOptionalToken(TokenKind.BANG)?this.node(ee,{kind:Kind.NON_NULL_TYPE,type:ne}):ne}parseNamedType(){return this.node(this._lexer.token,{kind:Kind.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(TokenKind.STRING)||this.peek(TokenKind.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("schema");const ie=this.parseConstDirectives(),oe=this.many(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);return this.node(ee,{kind:Kind.SCHEMA_DEFINITION,description:ne,directives:ie,operationTypes:oe})}parseOperationTypeDefinition(){const ee=this._lexer.token,ne=this.parseOperationType();this.expectToken(TokenKind.COLON);const ie=this.parseNamedType();return this.node(ee,{kind:Kind.OPERATION_TYPE_DEFINITION,operation:ne,type:ie})}parseScalarTypeDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("scalar");const ie=this.parseName(),oe=this.parseConstDirectives();return this.node(ee,{kind:Kind.SCALAR_TYPE_DEFINITION,description:ne,name:ie,directives:oe})}parseObjectTypeDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("type");const ie=this.parseName(),oe=this.parseImplementsInterfaces(),ae=this.parseConstDirectives(),ce=this.parseFieldsDefinition();return this.node(ee,{kind:Kind.OBJECT_TYPE_DEFINITION,description:ne,name:ie,interfaces:oe,directives:ae,fields:ce})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(TokenKind.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(TokenKind.BRACE_L,this.parseFieldDefinition,TokenKind.BRACE_R)}parseFieldDefinition(){const ee=this._lexer.token,ne=this.parseDescription(),ie=this.parseName(),oe=this.parseArgumentDefs();this.expectToken(TokenKind.COLON);const ae=this.parseTypeReference(),ce=this.parseConstDirectives();return this.node(ee,{kind:Kind.FIELD_DEFINITION,description:ne,name:ie,arguments:oe,type:ae,directives:ce})}parseArgumentDefs(){return this.optionalMany(TokenKind.PAREN_L,this.parseInputValueDef,TokenKind.PAREN_R)}parseInputValueDef(){const ee=this._lexer.token,ne=this.parseDescription(),ie=this.parseName();this.expectToken(TokenKind.COLON);const oe=this.parseTypeReference();let ae;this.expectOptionalToken(TokenKind.EQUALS)&&(ae=this.parseConstValueLiteral());const ce=this.parseConstDirectives();return this.node(ee,{kind:Kind.INPUT_VALUE_DEFINITION,description:ne,name:ie,type:oe,defaultValue:ae,directives:ce})}parseInterfaceTypeDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("interface");const ie=this.parseName(),oe=this.parseImplementsInterfaces(),ae=this.parseConstDirectives(),ce=this.parseFieldsDefinition();return this.node(ee,{kind:Kind.INTERFACE_TYPE_DEFINITION,description:ne,name:ie,interfaces:oe,directives:ae,fields:ce})}parseUnionTypeDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("union");const ie=this.parseName(),oe=this.parseConstDirectives(),ae=this.parseUnionMemberTypes();return this.node(ee,{kind:Kind.UNION_TYPE_DEFINITION,description:ne,name:ie,directives:oe,types:ae})}parseUnionMemberTypes(){return this.expectOptionalToken(TokenKind.EQUALS)?this.delimitedMany(TokenKind.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("enum");const ie=this.parseName(),oe=this.parseConstDirectives(),ae=this.parseEnumValuesDefinition();return this.node(ee,{kind:Kind.ENUM_TYPE_DEFINITION,description:ne,name:ie,directives:oe,values:ae})}parseEnumValuesDefinition(){return this.optionalMany(TokenKind.BRACE_L,this.parseEnumValueDefinition,TokenKind.BRACE_R)}parseEnumValueDefinition(){const ee=this._lexer.token,ne=this.parseDescription(),ie=this.parseEnumValueName(),oe=this.parseConstDirectives();return this.node(ee,{kind:Kind.ENUM_VALUE_DEFINITION,description:ne,name:ie,directives:oe})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw syntaxError$1(this._lexer.source,this._lexer.token.start,`${getTokenDesc(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("input");const ie=this.parseName(),oe=this.parseConstDirectives(),ae=this.parseInputFieldsDefinition();return this.node(ee,{kind:Kind.INPUT_OBJECT_TYPE_DEFINITION,description:ne,name:ie,directives:oe,fields:ae})}parseInputFieldsDefinition(){return this.optionalMany(TokenKind.BRACE_L,this.parseInputValueDef,TokenKind.BRACE_R)}parseTypeSystemExtension(){const ee=this._lexer.lookahead();if(ee.kind===TokenKind.NAME)switch(ee.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(ee)}parseSchemaExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const ne=this.parseConstDirectives(),ie=this.optionalMany(TokenKind.BRACE_L,this.parseOperationTypeDefinition,TokenKind.BRACE_R);if(ne.length===0&&ie.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.SCHEMA_EXTENSION,directives:ne,operationTypes:ie})}parseScalarTypeExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const ne=this.parseName(),ie=this.parseConstDirectives();if(ie.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.SCALAR_TYPE_EXTENSION,name:ne,directives:ie})}parseObjectTypeExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const ne=this.parseName(),ie=this.parseImplementsInterfaces(),oe=this.parseConstDirectives(),ae=this.parseFieldsDefinition();if(ie.length===0&&oe.length===0&&ae.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.OBJECT_TYPE_EXTENSION,name:ne,interfaces:ie,directives:oe,fields:ae})}parseInterfaceTypeExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const ne=this.parseName(),ie=this.parseImplementsInterfaces(),oe=this.parseConstDirectives(),ae=this.parseFieldsDefinition();if(ie.length===0&&oe.length===0&&ae.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.INTERFACE_TYPE_EXTENSION,name:ne,interfaces:ie,directives:oe,fields:ae})}parseUnionTypeExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const ne=this.parseName(),ie=this.parseConstDirectives(),oe=this.parseUnionMemberTypes();if(ie.length===0&&oe.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.UNION_TYPE_EXTENSION,name:ne,directives:ie,types:oe})}parseEnumTypeExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const ne=this.parseName(),ie=this.parseConstDirectives(),oe=this.parseEnumValuesDefinition();if(ie.length===0&&oe.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.ENUM_TYPE_EXTENSION,name:ne,directives:ie,values:oe})}parseInputObjectTypeExtension(){const ee=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const ne=this.parseName(),ie=this.parseConstDirectives(),oe=this.parseInputFieldsDefinition();if(ie.length===0&&oe.length===0)throw this.unexpected();return this.node(ee,{kind:Kind.INPUT_OBJECT_TYPE_EXTENSION,name:ne,directives:ie,fields:oe})}parseDirectiveDefinition(){const ee=this._lexer.token,ne=this.parseDescription();this.expectKeyword("directive"),this.expectToken(TokenKind.AT);const ie=this.parseName(),oe=this.parseArgumentDefs(),ae=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const ce=this.parseDirectiveLocations();return this.node(ee,{kind:Kind.DIRECTIVE_DEFINITION,description:ne,name:ie,arguments:oe,repeatable:ae,locations:ce})}parseDirectiveLocations(){return this.delimitedMany(TokenKind.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const ee=this._lexer.token,ne=this.parseName();if(Object.prototype.hasOwnProperty.call(DirectiveLocation,ne.value))return ne;throw this.unexpected(ee)}node(ee,ne){return this._options.noLocation!==!0&&(ne.loc=new Location(ee,this._lexer.lastToken,this._lexer.source)),ne}peek(ee){return this._lexer.token.kind===ee}expectToken(ee){const ne=this._lexer.token;if(ne.kind===ee)return this.advanceLexer(),ne;throw syntaxError$1(this._lexer.source,ne.start,`Expected ${getTokenKindDesc(ee)}, found ${getTokenDesc(ne)}.`)}expectOptionalToken(ee){return this._lexer.token.kind===ee?(this.advanceLexer(),!0):!1}expectKeyword(ee){const ne=this._lexer.token;if(ne.kind===TokenKind.NAME&&ne.value===ee)this.advanceLexer();else throw syntaxError$1(this._lexer.source,ne.start,`Expected "${ee}", found ${getTokenDesc(ne)}.`)}expectOptionalKeyword(ee){const ne=this._lexer.token;return ne.kind===TokenKind.NAME&&ne.value===ee?(this.advanceLexer(),!0):!1}unexpected(ee){const ne=ee??this._lexer.token;return syntaxError$1(this._lexer.source,ne.start,`Unexpected ${getTokenDesc(ne)}.`)}any(ee,ne,ie){this.expectToken(ee);const oe=[];for(;!this.expectOptionalToken(ie);)oe.push(ne.call(this));return oe}optionalMany(ee,ne,ie){if(this.expectOptionalToken(ee)){const oe=[];do oe.push(ne.call(this));while(!this.expectOptionalToken(ie));return oe}return[]}many(ee,ne,ie){this.expectToken(ee);const oe=[];do oe.push(ne.call(this));while(!this.expectOptionalToken(ie));return oe}delimitedMany(ee,ne){this.expectOptionalToken(ee);const ie=[];do ie.push(ne.call(this));while(this.expectOptionalToken(ee));return ie}advanceLexer(){const{maxTokens:ee}=this._options,ne=this._lexer.advance();if(ee!==void 0&&ne.kind!==TokenKind.EOF&&(++this._tokenCounter,this._tokenCounter>ee))throw syntaxError$1(this._lexer.source,ne.start,`Document contains more that ${ee} tokens. Parsing aborted.`)}};function getTokenDesc(re){const ee=re.value;return getTokenKindDesc(re.kind)+(ee!=null?` "${ee}"`:"")}function getTokenKindDesc(re){return isPunctuatorTokenKind(re)?`"${re}"`:re}const parser=Object.freeze(Object.defineProperty({__proto__:null,Parser:Parser$1,parse:parse$3,parseConstValue,parseType,parseValue:parseValue$1},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(parser);function printString(re){return`"${re.replace(escapedRegExp,escapedReplacer)}"`}const escapedRegExp=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function escapedReplacer(re){return escapeSequences[re.charCodeAt(0)]}const escapeSequences=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],BREAK=Object.freeze({});function visit(re,ee,ne=QueryDocumentKeys){const ie=new Map;for(const Se of Object.values(Kind))ie.set(Se,getEnterLeaveForKind(ee,Se));let oe,ae=Array.isArray(re),ce=[re],le=-1,ue=[],he=re,fe,me;const ge=[],ve=[];do{le++;const Se=le===ce.length,$e=Se&&ue.length!==0;if(Se){if(fe=ve.length===0?void 0:ge[ge.length-1],he=me,me=ve.pop(),$e)if(ae){he=he.slice();let Ne=0;for(const[Ie,ke]of ue){const De=Ie-Ne;ke===null?(he.splice(De,1),Ne++):he[De]=ke}}else{he=Object.defineProperties({},Object.getOwnPropertyDescriptors(he));for(const[Ne,Ie]of ue)he[Ne]=Ie}le=oe.index,ce=oe.keys,ue=oe.edits,ae=oe.inArray,oe=oe.prev}else if(me){if(fe=ae?le:ce[le],he=me[fe],he==null)continue;ge.push(fe)}let Te;if(!Array.isArray(he)){var ye,be;isNode$2(he)||devAssert(!1,`Invalid AST Node: ${inspect(he)}.`);const Ne=Se?(ye=ie.get(he.kind))===null||ye===void 0?void 0:ye.leave:(be=ie.get(he.kind))===null||be===void 0?void 0:be.enter;if(Te=Ne==null?void 0:Ne.call(ee,he,fe,me,ge,ve),Te===BREAK)break;if(Te===!1){if(!Se){ge.pop();continue}}else if(Te!==void 0&&(ue.push([fe,Te]),!Se))if(isNode$2(Te))he=Te;else{ge.pop();continue}}if(Te===void 0&&$e&&ue.push([fe,he]),Se)ge.pop();else{var Ce;oe={inArray:ae,index:le,keys:ce,edits:ue,prev:oe},ae=Array.isArray(he),ce=ae?he:(Ce=ne[he.kind])!==null&&Ce!==void 0?Ce:[],le=-1,ue=[],me&&ve.push(me),me=he}}while(oe!==void 0);return ue.length!==0?ue[ue.length-1][1]:re}function getEnterLeaveForKind(re,ee){const ne=re[ee];return typeof ne=="object"?ne:typeof ne=="function"?{enter:ne,leave:void 0}:{enter:re.enter,leave:re.leave}}function print$1(re){return visit(re,printDocASTReducer)}const MAX_LINE_LENGTH=80,printDocASTReducer={Name:{leave:re=>re.value},Variable:{leave:re=>"$"+re.name},Document:{leave:re=>join(re.definitions,`

`)},OperationDefinition:{leave(re){const ee=wrap("(",join(re.variableDefinitions,", "),")"),ne=join([re.operation,join([re.name,ee]),join(re.directives," ")]," ");return(ne==="query"?"":ne+" ")+re.selectionSet}},VariableDefinition:{leave:({variable:re,type:ee,defaultValue:ne,directives:ie})=>re+": "+ee+wrap(" = ",ne)+wrap(" ",join(ie," "))},SelectionSet:{leave:({selections:re})=>block(re)},Field:{leave({alias:re,name:ee,arguments:ne,directives:ie,selectionSet:oe}){const ae=wrap("",re,": ")+ee;let ce=ae+wrap("(",join(ne,", "),")");return ce.length>MAX_LINE_LENGTH&&(ce=ae+wrap(`(
`,indent(join(ne,`
`)),`
)`)),join([ce,join(ie," "),oe]," ")}},Argument:{leave:({name:re,value:ee})=>re+": "+ee},FragmentSpread:{leave:({name:re,directives:ee})=>"..."+re+wrap(" ",join(ee," "))},InlineFragment:{leave:({typeCondition:re,directives:ee,selectionSet:ne})=>join(["...",wrap("on ",re),join(ee," "),ne]," ")},FragmentDefinition:{leave:({name:re,typeCondition:ee,variableDefinitions:ne,directives:ie,selectionSet:oe})=>`fragment ${re}${wrap("(",join(ne,", "),")")} on ${ee} ${wrap("",join(ie," ")," ")}`+oe},IntValue:{leave:({value:re})=>re},FloatValue:{leave:({value:re})=>re},StringValue:{leave:({value:re,block:ee})=>ee?printBlockString(re):printString(re)},BooleanValue:{leave:({value:re})=>re?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:re})=>re},ListValue:{leave:({values:re})=>"["+join(re,", ")+"]"},ObjectValue:{leave:({fields:re})=>"{"+join(re,", ")+"}"},ObjectField:{leave:({name:re,value:ee})=>re+": "+ee},Directive:{leave:({name:re,arguments:ee})=>"@"+re+wrap("(",join(ee,", "),")")},NamedType:{leave:({name:re})=>re},ListType:{leave:({type:re})=>"["+re+"]"},NonNullType:{leave:({type:re})=>re+"!"},SchemaDefinition:{leave:({description:re,directives:ee,operationTypes:ne})=>wrap("",re,`
`)+join(["schema",join(ee," "),block(ne)]," ")},OperationTypeDefinition:{leave:({operation:re,type:ee})=>re+": "+ee},ScalarTypeDefinition:{leave:({description:re,name:ee,directives:ne})=>wrap("",re,`
`)+join(["scalar",ee,join(ne," ")]," ")},ObjectTypeDefinition:{leave:({description:re,name:ee,interfaces:ne,directives:ie,fields:oe})=>wrap("",re,`
`)+join(["type",ee,wrap("implements ",join(ne," & ")),join(ie," "),block(oe)]," ")},FieldDefinition:{leave:({description:re,name:ee,arguments:ne,type:ie,directives:oe})=>wrap("",re,`
`)+ee+(hasMultilineItems(ne)?wrap(`(
`,indent(join(ne,`
`)),`
)`):wrap("(",join(ne,", "),")"))+": "+ie+wrap(" ",join(oe," "))},InputValueDefinition:{leave:({description:re,name:ee,type:ne,defaultValue:ie,directives:oe})=>wrap("",re,`
`)+join([ee+": "+ne,wrap("= ",ie),join(oe," ")]," ")},InterfaceTypeDefinition:{leave:({description:re,name:ee,interfaces:ne,directives:ie,fields:oe})=>wrap("",re,`
`)+join(["interface",ee,wrap("implements ",join(ne," & ")),join(ie," "),block(oe)]," ")},UnionTypeDefinition:{leave:({description:re,name:ee,directives:ne,types:ie})=>wrap("",re,`
`)+join(["union",ee,join(ne," "),wrap("= ",join(ie," | "))]," ")},EnumTypeDefinition:{leave:({description:re,name:ee,directives:ne,values:ie})=>wrap("",re,`
`)+join(["enum",ee,join(ne," "),block(ie)]," ")},EnumValueDefinition:{leave:({description:re,name:ee,directives:ne})=>wrap("",re,`
`)+join([ee,join(ne," ")]," ")},InputObjectTypeDefinition:{leave:({description:re,name:ee,directives:ne,fields:ie})=>wrap("",re,`
`)+join(["input",ee,join(ne," "),block(ie)]," ")},DirectiveDefinition:{leave:({description:re,name:ee,arguments:ne,repeatable:ie,locations:oe})=>wrap("",re,`
`)+"directive @"+ee+(hasMultilineItems(ne)?wrap(`(
`,indent(join(ne,`
`)),`
)`):wrap("(",join(ne,", "),")"))+(ie?" repeatable":"")+" on "+join(oe," | ")},SchemaExtension:{leave:({directives:re,operationTypes:ee})=>join(["extend schema",join(re," "),block(ee)]," ")},ScalarTypeExtension:{leave:({name:re,directives:ee})=>join(["extend scalar",re,join(ee," ")]," ")},ObjectTypeExtension:{leave:({name:re,interfaces:ee,directives:ne,fields:ie})=>join(["extend type",re,wrap("implements ",join(ee," & ")),join(ne," "),block(ie)]," ")},InterfaceTypeExtension:{leave:({name:re,interfaces:ee,directives:ne,fields:ie})=>join(["extend interface",re,wrap("implements ",join(ee," & ")),join(ne," "),block(ie)]," ")},UnionTypeExtension:{leave:({name:re,directives:ee,types:ne})=>join(["extend union",re,join(ee," "),wrap("= ",join(ne," | "))]," ")},EnumTypeExtension:{leave:({name:re,directives:ee,values:ne})=>join(["extend enum",re,join(ee," "),block(ne)]," ")},InputObjectTypeExtension:{leave:({name:re,directives:ee,fields:ne})=>join(["extend input",re,join(ee," "),block(ne)]," ")}};function join(re,ee=""){var ne;return(ne=re==null?void 0:re.filter(ie=>ie).join(ee))!==null&&ne!==void 0?ne:""}function block(re){return wrap(`{
`,indent(join(re,`
`)),`
}`)}function wrap(re,ee,ne=""){return ee!=null&&ee!==""?re+ee+ne:""}function indent(re){return wrap("  ",re.replace(/\n/g,`
  `))}function hasMultilineItems(re){var ee;return(ee=re==null?void 0:re.some(ne=>ne.includes(`
`)))!==null&&ee!==void 0?ee:!1}const printer=Object.freeze(Object.defineProperty({__proto__:null,print:print$1},Symbol.toStringTag,{value:"Module"})),require$$2$1=getAugmentedNamespace(printer);var createRequestBody$1={},_public={},ReactNativeFile$1=function(ee){var ne=ee.uri,ie=ee.name,oe=ee.type;this.uri=ne,this.name=ie,this.type=oe},ReactNativeFile=ReactNativeFile$1,isExtractableFile=function(ee){return typeof File<"u"&&ee instanceof File||typeof Blob<"u"&&ee instanceof Blob||ee instanceof ReactNativeFile},defaultIsExtractableFile=isExtractableFile,extractFiles=function re(ee,ne,ie){ne===void 0&&(ne=""),ie===void 0&&(ie=defaultIsExtractableFile);var oe,ae=new Map;function ce(fe,me){var ge=ae.get(me);ge?ge.push.apply(ge,fe):ae.set(me,fe)}if(ie(ee))oe=null,ce([ne],ee);else{var le=ne?ne+".":"";if(typeof FileList<"u"&&ee instanceof FileList)oe=Array.prototype.map.call(ee,function(fe,me){return ce([""+le+me],fe),null});else if(Array.isArray(ee))oe=ee.map(function(fe,me){var ge=re(fe,""+le+me,ie);return ge.files.forEach(ce),ge.clone});else if(ee&&ee.constructor===Object){oe={};for(var ue in ee){var he=re(ee[ue],""+le+ue,ie);he.files.forEach(ce),oe[ue]=he.clone}}else oe=ee}return{clone:oe,files:ae}};_public.ReactNativeFile=ReactNativeFile$1;_public.extractFiles=extractFiles;_public.isExtractableFile=isExtractableFile;var browser$1=typeof self=="object"?self.FormData:window.FormData,defaultJsonSerializer={};Object.defineProperty(defaultJsonSerializer,"__esModule",{value:!0});defaultJsonSerializer.defaultJsonSerializer=void 0;defaultJsonSerializer.defaultJsonSerializer={parse:JSON.parse,stringify:JSON.stringify};var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(re){return re&&re.__esModule?re:{default:re}};Object.defineProperty(createRequestBody$1,"__esModule",{value:!0});var extract_files_1=_public,form_data_1=__importDefault(browser$1),defaultJsonSerializer_1=defaultJsonSerializer,isExtractableFileEnhanced=function(re){return extract_files_1.isExtractableFile(re)||re!==null&&typeof re=="object"&&typeof re.pipe=="function"};function createRequestBody(re,ee,ne,ie){ie===void 0&&(ie=defaultJsonSerializer_1.defaultJsonSerializer);var oe=extract_files_1.extractFiles({query:re,variables:ee,operationName:ne},"",isExtractableFileEnhanced),ae=oe.clone,ce=oe.files;if(ce.size===0){if(!Array.isArray(re))return ie.stringify(ae);if(typeof ee<"u"&&!Array.isArray(ee))throw new Error("Cannot create request body with given variable type, array expected");var le=re.reduce(function(ge,ve,ye){return ge.push({query:ve,variables:ee?ee[ye]:void 0}),ge},[]);return ie.stringify(le)}var ue=typeof FormData>"u"?form_data_1.default:FormData,he=new ue;he.append("operations",ie.stringify(ae));var fe={},me=0;return ce.forEach(function(ge){fe[++me]=ge}),he.append("map",ie.stringify(fe)),me=0,ce.forEach(function(ge,ve){he.append(""+ ++me,ve)}),he}createRequestBody$1.default=createRequestBody;var parseArgs={};Object.defineProperty(parseArgs,"__esModule",{value:!0});parseArgs.parseBatchRequestsExtendedArgs=parseArgs.parseRawRequestExtendedArgs=parseArgs.parseRequestExtendedArgs=parseArgs.parseBatchRequestArgs=parseArgs.parseRawRequestArgs=parseArgs.parseRequestArgs=void 0;function parseRequestArgs(re,ee,ne){return re.document?re:{document:re,variables:ee,requestHeaders:ne,signal:void 0}}parseArgs.parseRequestArgs=parseRequestArgs;function parseRawRequestArgs(re,ee,ne){return re.query?re:{query:re,variables:ee,requestHeaders:ne,signal:void 0}}parseArgs.parseRawRequestArgs=parseRawRequestArgs;function parseBatchRequestArgs(re,ee){return re.documents?re:{documents:re,requestHeaders:ee,signal:void 0}}parseArgs.parseBatchRequestArgs=parseBatchRequestArgs;function parseRequestExtendedArgs(re,ee,ne,ie){return re.document?re:{url:re,document:ee,variables:ne,requestHeaders:ie,signal:void 0}}parseArgs.parseRequestExtendedArgs=parseRequestExtendedArgs;function parseRawRequestExtendedArgs(re,ee,ne,ie){return re.query?re:{url:re,query:ee,variables:ne,requestHeaders:ie,signal:void 0}}parseArgs.parseRawRequestExtendedArgs=parseRawRequestExtendedArgs;function parseBatchRequestsExtendedArgs(re,ee,ne){return re.documents?re:{url:re,documents:ee,requestHeaders:ne,signal:void 0}}parseArgs.parseBatchRequestsExtendedArgs=parseBatchRequestsExtendedArgs;var types={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var re=function(ee,ne){return re=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ie,oe){ie.__proto__=oe}||function(ie,oe){for(var ae in oe)Object.prototype.hasOwnProperty.call(oe,ae)&&(ie[ae]=oe[ae])},re(ee,ne)};return function(ee,ne){if(typeof ne!="function"&&ne!==null)throw new TypeError("Class extends value "+String(ne)+" is not a constructor or null");re(ee,ne);function ie(){this.constructor=ee}ee.prototype=ne===null?Object.create(ne):(ie.prototype=ne.prototype,new ie)}}();Object.defineProperty(types,"__esModule",{value:!0});types.ClientError=void 0;var ClientError=function(re){__extends(ee,re);function ee(ne,ie){var oe=this,ae=ee.extractMessage(ne)+": "+JSON.stringify({response:ne,request:ie});return oe=re.call(this,ae)||this,Object.setPrototypeOf(oe,ee.prototype),oe.response=ne,oe.request=ie,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(oe,ee),oe}return ee.extractMessage=function(ne){try{return ne.errors[0].message}catch{return"GraphQL Error (Code: "+ne.status+")"}},ee}(Error);types.ClientError=ClientError;var graphqlWs={},hasRequiredGraphqlWs;function requireGraphqlWs(){if(hasRequiredGraphqlWs)return graphqlWs;hasRequiredGraphqlWs=1;var re=commonjsGlobal&&commonjsGlobal.__assign||function(){return re=Object.assign||function(Ie){for(var ke,De=1,Oe=arguments.length;De<Oe;De++){ke=arguments[De];for(var Be in ke)Object.prototype.hasOwnProperty.call(ke,Be)&&(Ie[Be]=ke[Be])}return Ie},re.apply(this,arguments)},ee=commonjsGlobal&&commonjsGlobal.__awaiter||function(Ie,ke,De,Oe){function Be(Me){return Me instanceof De?Me:new De(function(Le){Le(Me)})}return new(De||(De=Promise))(function(Me,Le){function je(He){try{Ve(Oe.next(He))}catch(We){Le(We)}}function ze(He){try{Ve(Oe.throw(He))}catch(We){Le(We)}}function Ve(He){He.done?Me(He.value):Be(He.value).then(je,ze)}Ve((Oe=Oe.apply(Ie,ke||[])).next())})},ne=commonjsGlobal&&commonjsGlobal.__generator||function(Ie,ke){var De={label:0,sent:function(){if(Me[0]&1)throw Me[1];return Me[1]},trys:[],ops:[]},Oe,Be,Me,Le;return Le={next:je(0),throw:je(1),return:je(2)},typeof Symbol=="function"&&(Le[Symbol.iterator]=function(){return this}),Le;function je(Ve){return function(He){return ze([Ve,He])}}function ze(Ve){if(Oe)throw new TypeError("Generator is already executing.");for(;De;)try{if(Oe=1,Be&&(Me=Ve[0]&2?Be.return:Ve[0]?Be.throw||((Me=Be.return)&&Me.call(Be),0):Be.next)&&!(Me=Me.call(Be,Ve[1])).done)return Me;switch(Be=0,Me&&(Ve=[Ve[0]&2,Me.value]),Ve[0]){case 0:case 1:Me=Ve;break;case 4:return De.label++,{value:Ve[1],done:!1};case 5:De.label++,Be=Ve[1],Ve=[0];continue;case 7:Ve=De.ops.pop(),De.trys.pop();continue;default:if(Me=De.trys,!(Me=Me.length>0&&Me[Me.length-1])&&(Ve[0]===6||Ve[0]===2)){De=0;continue}if(Ve[0]===3&&(!Me||Ve[1]>Me[0]&&Ve[1]<Me[3])){De.label=Ve[1];break}if(Ve[0]===6&&De.label<Me[1]){De.label=Me[1],Me=Ve;break}if(Me&&De.label<Me[2]){De.label=Me[2],De.ops.push(Ve);break}Me[2]&&De.ops.pop(),De.trys.pop();continue}Ve=ke.call(Ie,De)}catch(He){Ve=[6,He],Be=0}finally{Oe=Me=0}if(Ve[0]&5)throw Ve[1];return{value:Ve[0]?Ve[1]:void 0,done:!0}}};Object.defineProperty(graphqlWs,"__esModule",{value:!0}),graphqlWs.GraphQLWebSocketClient=void 0;var ie=types,oe=requireDist(),ae="connection_init",ce="connection_ack",le="ping",ue="pong",he="subscribe",fe="next",me="error",ge="complete",ve=function(){function Ie(ke,De,Oe){this._type=ke,this._payload=De,this._id=Oe}return Object.defineProperty(Ie.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"payload",{get:function(){return this._payload},enumerable:!1,configurable:!0}),Object.defineProperty(Ie.prototype,"text",{get:function(){var ke={type:this.type};return this.id!=null&&this.id!=null&&(ke.id=this.id),this.payload!=null&&this.payload!=null&&(ke.payload=this.payload),JSON.stringify(ke)},enumerable:!1,configurable:!0}),Ie.parse=function(ke,De){var Oe=JSON.parse(ke),Be=Oe.type,Me=Oe.payload,Le=Oe.id;return new Ie(Be,De(Me),Le)},Ie}(),ye=function(){function Ie(ke,De){var Oe=this,Be=De.onInit,Me=De.onAcknowledged,Le=De.onPing,je=De.onPong;this.socketState={acknowledged:!1,lastRequestId:0,subscriptions:{}},this.socket=ke,ke.onopen=function(ze){return ee(Oe,void 0,void 0,function(){var Ve,He,We,Ye;return ne(this,function(Ue){switch(Ue.label){case 0:return this.socketState.acknowledged=!1,this.socketState.subscriptions={},He=(Ve=ke).send,We=Ce,Be?[4,Be()]:[3,2];case 1:return Ye=Ue.sent(),[3,3];case 2:Ye=null,Ue.label=3;case 3:return He.apply(Ve,[We.apply(void 0,[Ye]).text]),[2]}})})},ke.onclose=function(ze){Oe.socketState.acknowledged=!1,Oe.socketState.subscriptions={}},ke.onerror=function(ze){console.error(ze)},ke.onmessage=function(ze){try{var Ve=be(ze.data);switch(Ve.type){case ce:{Oe.socketState.acknowledged?console.warn("Duplicate CONNECTION_ACK message ignored"):(Oe.socketState.acknowledged=!0,Me&&Me(Ve.payload));return}case le:{Le?Le(Ve.payload).then(function(Ke){return ke.send($e(Ke).text)}):ke.send($e(null).text);return}case ue:{je&&je(Ve.payload);return}}if(!Oe.socketState.acknowledged||Ve.id===void 0||Ve.id===null||!Oe.socketState.subscriptions[Ve.id])return;var He=Oe.socketState.subscriptions[Ve.id],We=He.query,Ye=He.variables,Ue=He.subscriber;switch(Ve.type){case fe:{!Ve.payload.errors&&Ve.payload.data&&Ue.next&&Ue.next(Ve.payload.data),Ve.payload.errors&&Ue.error&&Ue.error(new ie.ClientError(re(re({},Ve.payload),{status:200}),{query:We,variables:Ye}));return}case me:{Ue.error&&Ue.error(new ie.ClientError({errors:Ve.payload,status:200},{query:We,variables:Ye}));return}case ge:{Ue.complete&&Ue.complete(),delete Oe.socketState.subscriptions[Ve.id];return}}}catch(Ke){console.error(Ke),ke.close(1006)}ke.close(4400,"Unknown graphql-ws message.")}}return Ie.prototype.makeSubscribe=function(ke,De,Oe,Be){var Me=this,Le=(this.socketState.lastRequestId++).toString();return this.socketState.subscriptions[Le]={query:ke,variables:Oe,subscriber:Be},this.socket.send(Te(Le,{query:ke,operationName:De,variables:Oe}).text),function(){Me.socket.send(Ne(Le).text),delete Me.socketState.subscriptions[Le]}},Ie.prototype.rawRequest=function(ke,De){var Oe=this;return new Promise(function(Be,Me){var Le;Oe.rawSubscribe(ke,{next:function(je,ze){return Le={data:je,extensions:ze}},error:Me,complete:function(){return Be(Le)}},De)})},Ie.prototype.request=function(ke,De){var Oe=this;return new Promise(function(Be,Me){var Le;Oe.subscribe(ke,{next:function(je){return Le=je},error:Me,complete:function(){return Be(Le)}},De)})},Ie.prototype.subscribe=function(ke,De,Oe){var Be=oe.resolveRequestDocument(ke),Me=Be.query,Le=Be.operationName;return this.makeSubscribe(Me,Le,Oe,De)},Ie.prototype.rawSubscribe=function(ke,De,Oe){return this.makeSubscribe(ke,void 0,Oe,De)},Ie.prototype.ping=function(ke){this.socket.send(Se(ke).text)},Ie.prototype.close=function(){this.socket.close(1e3)},Ie.PROTOCOL="graphql-transport-ws",Ie}();graphqlWs.GraphQLWebSocketClient=ye;function be(Ie,ke){ke===void 0&&(ke=function(Oe){return Oe});var De=ve.parse(Ie,ke);return De}function Ce(Ie){return new ve(ae,Ie)}function Se(Ie){return new ve(le,Ie,void 0)}function $e(Ie){return new ve(ue,Ie,void 0)}function Te(Ie,ke){return new ve(he,ke,Ie)}function Ne(Ie){return new ve(ge,void 0,Ie)}return graphqlWs}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(re){var ee=commonjsGlobal&&commonjsGlobal.__assign||function(){return ee=Object.assign||function(Ue){for(var Ke,Xe=1,Vt=arguments.length;Xe<Vt;Xe++){Ke=arguments[Xe];for(var Wt in Ke)Object.prototype.hasOwnProperty.call(Ke,Wt)&&(Ue[Wt]=Ke[Wt])}return Ue},ee.apply(this,arguments)},ne=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Ue,Ke,Xe,Vt){Vt===void 0&&(Vt=Xe),Object.defineProperty(Ue,Vt,{enumerable:!0,get:function(){return Ke[Xe]}})}:function(Ue,Ke,Xe,Vt){Vt===void 0&&(Vt=Xe),Ue[Vt]=Ke[Xe]}),ie=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(Ue,Ke){Object.defineProperty(Ue,"default",{enumerable:!0,value:Ke})}:function(Ue,Ke){Ue.default=Ke}),oe=commonjsGlobal&&commonjsGlobal.__importStar||function(Ue){if(Ue&&Ue.__esModule)return Ue;var Ke={};if(Ue!=null)for(var Xe in Ue)Xe!=="default"&&Object.prototype.hasOwnProperty.call(Ue,Xe)&&ne(Ke,Ue,Xe);return ie(Ke,Ue),Ke},ae=commonjsGlobal&&commonjsGlobal.__awaiter||function(Ue,Ke,Xe,Vt){function Wt(Kt){return Kt instanceof Xe?Kt:new Xe(function(tn){tn(Kt)})}return new(Xe||(Xe=Promise))(function(Kt,tn){function Xt(rn){try{nn(Vt.next(rn))}catch(vn){tn(vn)}}function dn(rn){try{nn(Vt.throw(rn))}catch(vn){tn(vn)}}function nn(rn){rn.done?Kt(rn.value):Wt(rn.value).then(Xt,dn)}nn((Vt=Vt.apply(Ue,Ke||[])).next())})},ce=commonjsGlobal&&commonjsGlobal.__generator||function(Ue,Ke){var Xe={label:0,sent:function(){if(Kt[0]&1)throw Kt[1];return Kt[1]},trys:[],ops:[]},Vt,Wt,Kt,tn;return tn={next:Xt(0),throw:Xt(1),return:Xt(2)},typeof Symbol=="function"&&(tn[Symbol.iterator]=function(){return this}),tn;function Xt(nn){return function(rn){return dn([nn,rn])}}function dn(nn){if(Vt)throw new TypeError("Generator is already executing.");for(;Xe;)try{if(Vt=1,Wt&&(Kt=nn[0]&2?Wt.return:nn[0]?Wt.throw||((Kt=Wt.return)&&Kt.call(Wt),0):Wt.next)&&!(Kt=Kt.call(Wt,nn[1])).done)return Kt;switch(Wt=0,Kt&&(nn=[nn[0]&2,Kt.value]),nn[0]){case 0:case 1:Kt=nn;break;case 4:return Xe.label++,{value:nn[1],done:!1};case 5:Xe.label++,Wt=nn[1],nn=[0];continue;case 7:nn=Xe.ops.pop(),Xe.trys.pop();continue;default:if(Kt=Xe.trys,!(Kt=Kt.length>0&&Kt[Kt.length-1])&&(nn[0]===6||nn[0]===2)){Xe=0;continue}if(nn[0]===3&&(!Kt||nn[1]>Kt[0]&&nn[1]<Kt[3])){Xe.label=nn[1];break}if(nn[0]===6&&Xe.label<Kt[1]){Xe.label=Kt[1],Kt=nn;break}if(Kt&&Xe.label<Kt[2]){Xe.label=Kt[2],Xe.ops.push(nn);break}Kt[2]&&Xe.ops.pop(),Xe.trys.pop();continue}nn=Ke.call(Ue,Xe)}catch(rn){nn=[6,rn],Wt=0}finally{Vt=Kt=0}if(nn[0]&5)throw nn[1];return{value:nn[0]?nn[1]:void 0,done:!0}}},le=commonjsGlobal&&commonjsGlobal.__rest||function(Ue,Ke){var Xe={};for(var Vt in Ue)Object.prototype.hasOwnProperty.call(Ue,Vt)&&Ke.indexOf(Vt)<0&&(Xe[Vt]=Ue[Vt]);if(Ue!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Wt=0,Vt=Object.getOwnPropertySymbols(Ue);Wt<Vt.length;Wt++)Ke.indexOf(Vt[Wt])<0&&Object.prototype.propertyIsEnumerable.call(Ue,Vt[Wt])&&(Xe[Vt[Wt]]=Ue[Vt[Wt]]);return Xe},ue=commonjsGlobal&&commonjsGlobal.__importDefault||function(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}};Object.defineProperty(re,"__esModule",{value:!0}),re.GraphQLWebSocketClient=re.gql=re.resolveRequestDocument=re.batchRequests=re.request=re.rawRequest=re.GraphQLClient=re.ClientError=void 0;var he=oe(browserPonyfillExports),fe=he,me=require$$1,ge=require$$2$1,ve=ue(createRequestBody$1),ye=defaultJsonSerializer,be=parseArgs,Ce=types;Object.defineProperty(re,"ClientError",{enumerable:!0,get:function(){return Ce.ClientError}});var Se=function(Ue){var Ke={};return Ue&&(typeof Headers<"u"&&Ue instanceof Headers||Ue instanceof fe.Headers?Ke=We(Ue):Array.isArray(Ue)?Ue.forEach(function(Xe){var Vt=Xe[0],Wt=Xe[1];Ke[Vt]=Wt}):Ke=Ue),Ke},$e=function(Ue){return Ue.replace(/([\s,]|#[^\n\r]+)+/g," ").trim()},Te=function(Ue){var Ke=Ue.query,Xe=Ue.variables,Vt=Ue.operationName,Wt=Ue.jsonSerializer;if(!Array.isArray(Ke)){var Kt=["query="+encodeURIComponent($e(Ke))];return Xe&&Kt.push("variables="+encodeURIComponent(Wt.stringify(Xe))),Vt&&Kt.push("operationName="+encodeURIComponent(Vt)),Kt.join("&")}if(typeof Xe<"u"&&!Array.isArray(Xe))throw new Error("Cannot create query with given variable type, array expected");var tn=Ke.reduce(function(Xt,dn,nn){return Xt.push({query:$e(dn),variables:Xe?Wt.stringify(Xe[nn]):void 0}),Xt},[]);return"query="+encodeURIComponent(Wt.stringify(tn))},Ne=function(Ue){var Ke=Ue.url,Xe=Ue.query,Vt=Ue.variables,Wt=Ue.operationName,Kt=Ue.headers,tn=Ue.fetch,Xt=Ue.fetchOptions;return ae(void 0,void 0,void 0,function(){var dn;return ce(this,function(nn){switch(nn.label){case 0:return dn=ve.default(Xe,Vt,Wt,Xt.jsonSerializer),[4,tn(Ke,ee({method:"POST",headers:ee(ee({},typeof dn=="string"?{"Content-Type":"application/json"}:{}),Kt),body:dn},Xt))];case 1:return[2,nn.sent()]}})})},Ie=function(Ue){var Ke=Ue.url,Xe=Ue.query,Vt=Ue.variables,Wt=Ue.operationName,Kt=Ue.headers,tn=Ue.fetch,Xt=Ue.fetchOptions;return ae(void 0,void 0,void 0,function(){var dn;return ce(this,function(nn){switch(nn.label){case 0:return dn=Te({query:Xe,variables:Vt,operationName:Wt,jsonSerializer:Xt.jsonSerializer}),[4,tn(Ke+"?"+dn,ee({method:"GET",headers:Kt},Xt))];case 1:return[2,nn.sent()]}})})},ke=function(){function Ue(Ke,Xe){this.url=Ke,this.options=Xe||{}}return Ue.prototype.rawRequest=function(Ke,Xe,Vt){return ae(this,void 0,void 0,function(){var Wt,Kt,tn,Xt,dn,nn,rn,vn,yn,Sn;return ce(this,function(kn){return Wt=be.parseRawRequestArgs(Ke,Xe,Vt),Kt=this.options,tn=Kt.headers,Xt=Kt.fetch,dn=Xt===void 0?he.default:Xt,nn=Kt.method,rn=nn===void 0?"POST":nn,vn=le(Kt,["headers","fetch","method"]),yn=this.url,Wt.signal!==void 0&&(vn.signal=Wt.signal),Sn=ze(Wt.query).operationName,[2,De({url:yn,query:Wt.query,variables:Wt.variables,headers:ee(ee({},Se(Ve(tn))),Se(Wt.requestHeaders)),operationName:Sn,fetch:dn,method:rn,fetchOptions:vn})]})})},Ue.prototype.request=function(Ke,Xe,Vt){return ae(this,void 0,void 0,function(){var Wt,Kt,tn,Xt,dn,nn,rn,vn,yn,Sn,kn,Bn,Dn;return ce(this,function(Je){switch(Je.label){case 0:return Wt=be.parseRequestArgs(Ke,Xe,Vt),Kt=this.options,tn=Kt.headers,Xt=Kt.fetch,dn=Xt===void 0?he.default:Xt,nn=Kt.method,rn=nn===void 0?"POST":nn,vn=le(Kt,["headers","fetch","method"]),yn=this.url,Wt.signal!==void 0&&(vn.signal=Wt.signal),Sn=ze(Wt.document),kn=Sn.query,Bn=Sn.operationName,[4,De({url:yn,query:kn,variables:Wt.variables,headers:ee(ee({},Se(Ve(tn))),Se(Wt.requestHeaders)),operationName:Bn,fetch:dn,method:rn,fetchOptions:vn})];case 1:return Dn=Je.sent().data,[2,Dn]}})})},Ue.prototype.batchRequests=function(Ke,Xe){return ae(this,void 0,void 0,function(){var Vt,Wt,Kt,tn,Xt,dn,nn,rn,vn,yn,Sn,kn;return ce(this,function(Bn){switch(Bn.label){case 0:return Vt=be.parseBatchRequestArgs(Ke,Xe),Wt=this.options,Kt=Wt.headers,tn=Wt.fetch,Xt=tn===void 0?he.default:tn,dn=Wt.method,nn=dn===void 0?"POST":dn,rn=le(Wt,["headers","fetch","method"]),vn=this.url,Vt.signal!==void 0&&(rn.signal=Vt.signal),yn=Vt.documents.map(function(Dn){var Je=Dn.document;return ze(Je).query}),Sn=Vt.documents.map(function(Dn){var Je=Dn.variables;return Je}),[4,De({url:vn,query:yn,variables:Sn,headers:ee(ee({},Se(Ve(Kt))),Se(Vt.requestHeaders)),operationName:void 0,fetch:Xt,method:nn,fetchOptions:rn})];case 1:return kn=Bn.sent().data,[2,kn]}})})},Ue.prototype.setHeaders=function(Ke){return this.options.headers=Ke,this},Ue.prototype.setHeader=function(Ke,Xe){var Vt,Wt=this.options.headers;return Wt?Wt[Ke]=Xe:this.options.headers=(Vt={},Vt[Ke]=Xe,Vt),this},Ue.prototype.setEndpoint=function(Ke){return this.url=Ke,this},Ue}();re.GraphQLClient=ke;function De(Ue){var Ke=Ue.url,Xe=Ue.query,Vt=Ue.variables,Wt=Ue.headers,Kt=Ue.operationName,tn=Ue.fetch,Xt=Ue.method,dn=Xt===void 0?"POST":Xt,nn=Ue.fetchOptions;return ae(this,void 0,void 0,function(){var rn,vn,yn,Sn,kn,Bn,Dn,Je,Yt,an,An;return ce(this,function(fn){switch(fn.label){case 0:return rn=dn.toUpperCase()==="POST"?Ne:Ie,vn=Array.isArray(Xe),[4,rn({url:Ke,query:Xe,variables:Vt,operationName:Kt,headers:Wt,fetch:tn,fetchOptions:nn})];case 1:return yn=fn.sent(),[4,Le(yn,nn.jsonSerializer)];case 2:if(Sn=fn.sent(),kn=vn&&Array.isArray(Sn)?!Sn.some(function(mn){var Tn=mn.data;return!Tn}):!!Sn.data,Bn=!Sn.errors||nn.errorPolicy==="all"||nn.errorPolicy==="ignore",yn.ok&&Bn&&kn)return Dn=yn.headers,Je=yn.status,Sn.errors,Yt=le(Sn,["errors"]),an=nn.errorPolicy==="ignore"?Yt:Sn,[2,ee(ee({},vn?{data:an}:an),{headers:Dn,status:Je})];throw An=typeof Sn=="string"?{error:Sn}:Sn,new Ce.ClientError(ee(ee({},An),{status:yn.status,headers:yn.headers}),{query:Xe,variables:Vt})}})})}function Oe(Ue,Ke,Xe,Vt){return ae(this,void 0,void 0,function(){var Wt,Kt;return ce(this,function(tn){return Wt=be.parseRawRequestExtendedArgs(Ue,Ke,Xe,Vt),Kt=new ke(Wt.url),[2,Kt.rawRequest(ee({},Wt))]})})}re.rawRequest=Oe;function Be(Ue,Ke,Xe,Vt){return ae(this,void 0,void 0,function(){var Wt,Kt;return ce(this,function(tn){return Wt=be.parseRequestExtendedArgs(Ue,Ke,Xe,Vt),Kt=new ke(Wt.url),[2,Kt.request(ee({},Wt))]})})}re.request=Be;function Me(Ue,Ke,Xe){return ae(this,void 0,void 0,function(){var Vt,Wt;return ce(this,function(Kt){return Vt=be.parseBatchRequestsExtendedArgs(Ue,Ke,Xe),Wt=new ke(Vt.url),[2,Wt.batchRequests(ee({},Vt))]})})}re.batchRequests=Me,re.default=Be;function Le(Ue,Ke){return Ke===void 0&&(Ke=ye.defaultJsonSerializer),ae(this,void 0,void 0,function(){var Xe,Vt,Wt;return ce(this,function(Kt){switch(Kt.label){case 0:return Ue.headers.forEach(function(tn,Xt){Xt.toLowerCase()==="content-type"&&(Xe=tn)}),Xe&&Xe.toLowerCase().startsWith("application/json")?(Wt=(Vt=Ke).parse,[4,Ue.text()]):[3,2];case 1:return[2,Wt.apply(Vt,[Kt.sent()])];case 2:return[2,Ue.text()]}})})}function je(Ue){var Ke,Xe=void 0,Vt=Ue.definitions.filter(function(Wt){return Wt.kind==="OperationDefinition"});return Vt.length===1&&(Xe=(Ke=Vt[0].name)===null||Ke===void 0?void 0:Ke.value),Xe}function ze(Ue){if(typeof Ue=="string"){var Ke=void 0;try{var Xe=me.parse(Ue);Ke=je(Xe)}catch{}return{query:Ue,operationName:Ke}}var Vt=je(Ue);return{query:ge.print(Ue),operationName:Vt}}re.resolveRequestDocument=ze;function Ve(Ue){return typeof Ue=="function"?Ue():Ue}function He(Ue){for(var Ke=[],Xe=1;Xe<arguments.length;Xe++)Ke[Xe-1]=arguments[Xe];return Ue.reduce(function(Vt,Wt,Kt){return""+Vt+Wt+(Kt in Ke?Ke[Kt]:"")},"")}re.gql=He;function We(Ue){var Ke={};return Ue.forEach(function(Xe,Vt){Ke[Vt]=Xe}),Ke}var Ye=requireGraphqlWs();Object.defineProperty(re,"GraphQLWebSocketClient",{enumerable:!0,get:function(){return Ye.GraphQLWebSocketClient}})}(dist)),dist}var distExports=requireDist(),baseGetTag$4=_baseGetTag,isObjectLike$3=isObjectLike_1,symbolTag$1="[object Symbol]";function isSymbol$5(re){return typeof re=="symbol"||isObjectLike$3(re)&&baseGetTag$4(re)==symbolTag$1}var isSymbol_1=isSymbol$5,isArray$b=isArray_1,isSymbol$4=isSymbol_1,reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey$4(re,ee){if(isArray$b(re))return!1;var ne=typeof re;return ne=="number"||ne=="symbol"||ne=="boolean"||re==null||isSymbol$4(re)?!0:reIsPlainProp.test(re)||!reIsDeepProp.test(re)||ee!=null&&re in Object(ee)}var _isKey=isKey$4;function isObject$7(re){var ee=typeof re;return re!=null&&(ee=="object"||ee=="function")}var isObject_1=isObject$7,baseGetTag$3=_baseGetTag,isObject$6=isObject_1,asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$5(re){if(!isObject$6(re))return!1;var ee=baseGetTag$3(re);return ee==funcTag$1||ee==genTag||ee==asyncTag||ee==proxyTag}var isFunction_1=isFunction$5,root$7=_root,coreJsData$1=root$7["__core-js_shared__"],_coreJsData=coreJsData$1,coreJsData=_coreJsData,maskSrcKey=function(){var re=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return re?"Symbol(src)_1."+re:""}();function isMasked$1(re){return!!maskSrcKey&&maskSrcKey in re}var _isMasked=isMasked$1,funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource$2(re){if(re!=null){try{return funcToString$1.call(re)}catch{}try{return re+""}catch{}}return""}var _toSource=toSource$2,isFunction$4=isFunction_1,isMasked=_isMasked,isObject$5=isObject_1,toSource$1=_toSource,reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$8=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$8.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative$1(re){if(!isObject$5(re)||isMasked(re))return!1;var ee=isFunction$4(re)?reIsNative:reIsHostCtor;return ee.test(toSource$1(re))}var _baseIsNative=baseIsNative$1;function getValue$1(re,ee){return re==null?void 0:re[ee]}var _getValue=getValue$1,baseIsNative=_baseIsNative,getValue=_getValue;function getNative$6(re,ee){var ne=getValue(re,ee);return baseIsNative(ne)?ne:void 0}var _getNative=getNative$6,getNative$5=_getNative,nativeCreate$4=getNative$5(Object,"create"),_nativeCreate=nativeCreate$4,nativeCreate$3=_nativeCreate;function hashClear$1(){this.__data__=nativeCreate$3?nativeCreate$3(null):{},this.size=0}var _hashClear=hashClear$1;function hashDelete$1(re){var ee=this.has(re)&&delete this.__data__[re];return this.size-=ee?1:0,ee}var _hashDelete=hashDelete$1,nativeCreate$2=_nativeCreate,HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty;function hashGet$1(re){var ee=this.__data__;if(nativeCreate$2){var ne=ee[re];return ne===HASH_UNDEFINED$2?void 0:ne}return hasOwnProperty$6.call(ee,re)?ee[re]:void 0}var _hashGet=hashGet$1,nativeCreate$1=_nativeCreate,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function hashHas$1(re){var ee=this.__data__;return nativeCreate$1?ee[re]!==void 0:hasOwnProperty$5.call(ee,re)}var _hashHas=hashHas$1,nativeCreate=_nativeCreate,HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet$1(re,ee){var ne=this.__data__;return this.size+=this.has(re)?0:1,ne[re]=nativeCreate&&ee===void 0?HASH_UNDEFINED$1:ee,this}var _hashSet=hashSet$1,hashClear=_hashClear,hashDelete=_hashDelete,hashGet=_hashGet,hashHas=_hashHas,hashSet=_hashSet;function Hash$1(re){var ee=-1,ne=re==null?0:re.length;for(this.clear();++ee<ne;){var ie=re[ee];this.set(ie[0],ie[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;var _Hash=Hash$1;function listCacheClear$1(){this.__data__=[],this.size=0}var _listCacheClear=listCacheClear$1;function eq$3(re,ee){return re===ee||re!==re&&ee!==ee}var eq_1=eq$3,eq$2=eq_1;function assocIndexOf$4(re,ee){for(var ne=re.length;ne--;)if(eq$2(re[ne][0],ee))return ne;return-1}var _assocIndexOf=assocIndexOf$4,assocIndexOf$3=_assocIndexOf,arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete$1(re){var ee=this.__data__,ne=assocIndexOf$3(ee,re);if(ne<0)return!1;var ie=ee.length-1;return ne==ie?ee.pop():splice.call(ee,ne,1),--this.size,!0}var _listCacheDelete=listCacheDelete$1,assocIndexOf$2=_assocIndexOf;function listCacheGet$1(re){var ee=this.__data__,ne=assocIndexOf$2(ee,re);return ne<0?void 0:ee[ne][1]}var _listCacheGet=listCacheGet$1,assocIndexOf$1=_assocIndexOf;function listCacheHas$1(re){return assocIndexOf$1(this.__data__,re)>-1}var _listCacheHas=listCacheHas$1,assocIndexOf=_assocIndexOf;function listCacheSet$1(re,ee){var ne=this.__data__,ie=assocIndexOf(ne,re);return ie<0?(++this.size,ne.push([re,ee])):ne[ie][1]=ee,this}var _listCacheSet=listCacheSet$1,listCacheClear=_listCacheClear,listCacheDelete=_listCacheDelete,listCacheGet=_listCacheGet,listCacheHas=_listCacheHas,listCacheSet=_listCacheSet;function ListCache$4(re){var ee=-1,ne=re==null?0:re.length;for(this.clear();++ee<ne;){var ie=re[ee];this.set(ie[0],ie[1])}}ListCache$4.prototype.clear=listCacheClear;ListCache$4.prototype.delete=listCacheDelete;ListCache$4.prototype.get=listCacheGet;ListCache$4.prototype.has=listCacheHas;ListCache$4.prototype.set=listCacheSet;var _ListCache=ListCache$4,getNative$4=_getNative,root$6=_root,Map$4=getNative$4(root$6,"Map"),_Map=Map$4,Hash=_Hash,ListCache$3=_ListCache,Map$3=_Map;function mapCacheClear$1(){this.size=0,this.__data__={hash:new Hash,map:new(Map$3||ListCache$3),string:new Hash}}var _mapCacheClear=mapCacheClear$1;function isKeyable$1(re){var ee=typeof re;return ee=="string"||ee=="number"||ee=="symbol"||ee=="boolean"?re!=="__proto__":re===null}var _isKeyable=isKeyable$1,isKeyable=_isKeyable;function getMapData$4(re,ee){var ne=re.__data__;return isKeyable(ee)?ne[typeof ee=="string"?"string":"hash"]:ne.map}var _getMapData=getMapData$4,getMapData$3=_getMapData;function mapCacheDelete$1(re){var ee=getMapData$3(this,re).delete(re);return this.size-=ee?1:0,ee}var _mapCacheDelete=mapCacheDelete$1,getMapData$2=_getMapData;function mapCacheGet$1(re){return getMapData$2(this,re).get(re)}var _mapCacheGet=mapCacheGet$1,getMapData$1=_getMapData;function mapCacheHas$1(re){return getMapData$1(this,re).has(re)}var _mapCacheHas=mapCacheHas$1,getMapData=_getMapData;function mapCacheSet$1(re,ee){var ne=getMapData(this,re),ie=ne.size;return ne.set(re,ee),this.size+=ne.size==ie?0:1,this}var _mapCacheSet=mapCacheSet$1,mapCacheClear=_mapCacheClear,mapCacheDelete=_mapCacheDelete,mapCacheGet=_mapCacheGet,mapCacheHas=_mapCacheHas,mapCacheSet=_mapCacheSet;function MapCache$3(re){var ee=-1,ne=re==null?0:re.length;for(this.clear();++ee<ne;){var ie=re[ee];this.set(ie[0],ie[1])}}MapCache$3.prototype.clear=mapCacheClear;MapCache$3.prototype.delete=mapCacheDelete;MapCache$3.prototype.get=mapCacheGet;MapCache$3.prototype.has=mapCacheHas;MapCache$3.prototype.set=mapCacheSet;var _MapCache=MapCache$3,MapCache$2=_MapCache,FUNC_ERROR_TEXT="Expected a function";function memoize$2(re,ee){if(typeof re!="function"||ee!=null&&typeof ee!="function")throw new TypeError(FUNC_ERROR_TEXT);var ne=function(){var ie=arguments,oe=ee?ee.apply(this,ie):ie[0],ae=ne.cache;if(ae.has(oe))return ae.get(oe);var ce=re.apply(this,ie);return ne.cache=ae.set(oe,ce)||ae,ce};return ne.cache=new(memoize$2.Cache||MapCache$2),ne}memoize$2.Cache=MapCache$2;var memoize_1=memoize$2,memoize$1=memoize_1,MAX_MEMOIZE_SIZE=500;function memoizeCapped$1(re){var ee=memoize$1(re,function(ie){return ne.size===MAX_MEMOIZE_SIZE&&ne.clear(),ie}),ne=ee.cache;return ee}var _memoizeCapped=memoizeCapped$1,memoizeCapped=_memoizeCapped,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath$2=memoizeCapped(function(re){var ee=[];return re.charCodeAt(0)===46&&ee.push(""),re.replace(rePropName,function(ne,ie,oe,ae){ee.push(oe?ae.replace(reEscapeChar,"$1"):ie||ne)}),ee}),_stringToPath=stringToPath$2;function arrayMap$2(re,ee){for(var ne=-1,ie=re==null?0:re.length,oe=Array(ie);++ne<ie;)oe[ne]=ee(re[ne],ne,re);return oe}var _arrayMap=arrayMap$2,Symbol$2=_Symbol,arrayMap$1=_arrayMap,isArray$a=isArray_1,isSymbol$3=isSymbol_1,INFINITY$3=1/0,symbolProto$1=Symbol$2?Symbol$2.prototype:void 0,symbolToString=symbolProto$1?symbolProto$1.toString:void 0;function baseToString$1(re){if(typeof re=="string")return re;if(isArray$a(re))return arrayMap$1(re,baseToString$1)+"";if(isSymbol$3(re))return symbolToString?symbolToString.call(re):"";var ee=re+"";return ee=="0"&&1/re==-INFINITY$3?"-0":ee}var _baseToString=baseToString$1,baseToString=_baseToString;function toString$1(re){return re==null?"":baseToString(re)}var toString_1=toString$1,isArray$9=isArray_1,isKey$3=_isKey,stringToPath$1=_stringToPath,toString=toString_1;function castPath$2(re,ee){return isArray$9(re)?re:isKey$3(re,ee)?[re]:stringToPath$1(toString(re))}var _castPath=castPath$2,isSymbol$2=isSymbol_1,INFINITY$2=1/0;function toKey$4(re){if(typeof re=="string"||isSymbol$2(re))return re;var ee=re+"";return ee=="0"&&1/re==-INFINITY$2?"-0":ee}var _toKey=toKey$4,castPath$1=_castPath,toKey$3=_toKey;function baseGet$4(re,ee){ee=castPath$1(ee,re);for(var ne=0,ie=ee.length;re!=null&&ne<ie;)re=re[toKey$3(ee[ne++])];return ne&&ne==ie?re:void 0}var _baseGet=baseGet$4,baseGet$3=_baseGet;function get$4(re,ee,ne){var ie=re==null?void 0:baseGet$3(re,ee);return ie===void 0?ne:ie}var get_1=get$4;const get$5=getDefaultExportFromCjs(get_1);function _objectWithoutProperties(re,ee){if(re==null)return{};var ne=_objectWithoutPropertiesLoose(re,ee),ie,oe;if(Object.getOwnPropertySymbols){var ae=Object.getOwnPropertySymbols(re);for(oe=0;oe<ae.length;oe++)ie=ae[oe],!(ee.indexOf(ie)>=0)&&Object.prototype.propertyIsEnumerable.call(re,ie)&&(ne[ie]=re[ie])}return ne}function _objectWithoutPropertiesLoose(re,ee){if(re==null)return{};var ne={},ie=Object.keys(re),oe,ae;for(ae=0;ae<ie.length;ae++)oe=ie[ae],!(ee.indexOf(oe)>=0)&&(ne[oe]=re[oe]);return ne}function _extends$1(){return _extends$1=Object.assign||function(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee];for(var ie in ne)Object.prototype.hasOwnProperty.call(ne,ie)&&(re[ie]=ne[ie])}return re},_extends$1.apply(this,arguments)}function ownKeys$2(re,ee){var ne=Object.keys(re);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(re);ee&&(ie=ie.filter(function(oe){return Object.getOwnPropertyDescriptor(re,oe).enumerable})),ne.push.apply(ne,ie)}return ne}function _objectSpread(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee]!=null?arguments[ee]:{};ee%2?ownKeys$2(Object(ne),!0).forEach(function(ie){_defineProperty$1(re,ie,ne[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(re,Object.getOwnPropertyDescriptors(ne)):ownKeys$2(Object(ne)).forEach(function(ie){Object.defineProperty(re,ie,Object.getOwnPropertyDescriptor(ne,ie))})}return re}function _defineProperty$1(re,ee,ne){return ee in re?Object.defineProperty(re,ee,{value:ne,enumerable:!0,configurable:!0,writable:!0}):re[ee]=ne,re}const defaultProps$1={breakpointCols:void 0,className:void 0,columnClassName:void 0,children:void 0,columnAttrs:void 0,column:void 0},DEFAULT_COLUMNS=2;class Masonry extends React.Component{constructor(ee){super(ee),this.reCalculateColumnCount=this.reCalculateColumnCount.bind(this),this.reCalculateColumnCountDebounce=this.reCalculateColumnCountDebounce.bind(this);let ne;this.props.breakpointCols&&this.props.breakpointCols.default?ne=this.props.breakpointCols.default:ne=parseInt(this.props.breakpointCols)||DEFAULT_COLUMNS,this.state={columnCount:ne}}componentDidMount(){this.reCalculateColumnCount(),window&&window.addEventListener("resize",this.reCalculateColumnCountDebounce)}componentDidUpdate(){this.reCalculateColumnCount()}componentWillUnmount(){window&&window.removeEventListener("resize",this.reCalculateColumnCountDebounce)}reCalculateColumnCountDebounce(){if(!window||!window.requestAnimationFrame){this.reCalculateColumnCount();return}window.cancelAnimationFrame&&window.cancelAnimationFrame(this._lastRecalculateAnimationFrame),this._lastRecalculateAnimationFrame=window.requestAnimationFrame(()=>{this.reCalculateColumnCount()})}reCalculateColumnCount(){const ee=window&&window.innerWidth||1/0;let ne=this.props.breakpointCols;typeof ne!="object"&&(ne={default:parseInt(ne)||DEFAULT_COLUMNS});let ie=1/0,oe=ne.default||DEFAULT_COLUMNS;for(let ae in ne){const ce=parseInt(ae);ce>0&&ee<=ce&&ce<ie&&(ie=ce,oe=ne[ae])}oe=Math.max(1,parseInt(oe)||1),this.state.columnCount!==oe&&this.setState({columnCount:oe})}itemsInColumns(){const ee=this.state.columnCount,ne=new Array(ee),ie=React.Children.toArray(this.props.children);for(let oe=0;oe<ie.length;oe++){const ae=oe%ee;ne[ae]||(ne[ae]=[]),ne[ae].push(ie[oe])}return ne}renderColumns(){const{column:ee,columnAttrs:ne={},columnClassName:ie}=this.props,oe=this.itemsInColumns(),ae=`${100/oe.length}%`;let ce=ie;ce&&typeof ce!="string"&&(this.logDeprecated('The property "columnClassName" requires a string'),typeof ce>"u"&&(ce="my-masonry-grid_column"));const le=_objectSpread(_objectSpread(_objectSpread({},ee),ne),{},{style:_objectSpread(_objectSpread({},ne.style),{},{width:ae}),className:ce});return oe.map((ue,he)=>React.createElement("div",_extends$1({},le,{key:he}),ue))}logDeprecated(ee){console.error("[Masonry]",ee)}render(){const ee=this.props,{children:ne,breakpointCols:ie,columnClassName:oe,columnAttrs:ae,column:ce,className:le}=ee,ue=_objectWithoutProperties(ee,["children","breakpointCols","columnClassName","columnAttrs","column","className"]);let he=le;return typeof le!="string"&&(this.logDeprecated('The property "className" requires a string'),typeof le>"u"&&(he="my-masonry-grid")),React.createElement("div",_extends$1({},ue,{className:he}),this.renderColumns())}}Masonry.defaultProps=defaultProps$1;const grid$1="_grid_gxg6m_1",column$2="_column_gxg6m_12",styles$P={grid:grid$1,column:column$2},ResponsiveMasonry=({children:re})=>{const ee=()=>globalThis.innerWidth>1170?4:globalThis.innerWidth>744?3:globalThis.innerWidth>320?2:1,[ne,ie]=reactExports.useState(ee());return reactExports.useEffect(()=>{const oe=()=>{ie(ee())};return globalThis.addEventListener("resize",oe),()=>globalThis.removeEventListener("resize",oe)},[]),jsx$1(Masonry,{breakpointCols:ne,className:`${styles$P.grid} no-fool`,columnClassName:styles$P.column,children:re})},compact_container="_compact_container_145qs_216",artist="_artist_145qs_228",hide="_hide_145qs_234",price_box="_price_box_145qs_238",container$v="_container_145qs_246",spread="_spread_145qs_258",spread__inner="_spread__inner_145qs_271",editions="_editions_145qs_285",edition="_edition_145qs_285",inline="_inline_145qs_296",issuer$1="_issuer_145qs_302",top$1="_top_145qs_312",objkt_label="_objkt_label_145qs_369",objkt_details_container="_objkt_details_container_145qs_379",objkt_label_container="_objkt_label_container_145qs_383",collab_verification_title="_collab_verification_title_145qs_387",collab_verification_symbol="_collab_verification_symbol_145qs_393",main_swap="_main_swap_145qs_397",infos_left="_infos_left_145qs_406",infos_right="_infos_right_145qs_407",styles$O={compact_container,artist,hide,price_box,container:container$v,spread,spread__inner,editions,edition,inline,issuer:issuer$1,top:top$1,objkt_label,objkt_details_container,objkt_label_container,collab_verification_title,collab_verification_symbol,main_swap,infos_left,infos_right},container$u="_container_2afg7_216",input="_input_2afg7_222",link="_link_2afg7_228",textarea="_textarea_2afg7_239",table="_table_2afg7_251",reviewTable="_reviewTable_2afg7_252",row="_row_2afg7_253",borderBottom="_borderBottom_2afg7_272",addressCell="_addressCell_2afg7_276",cellWithPadding="_cellWithPadding_2afg7_282",sharesCell="_sharesCell_2afg7_287",actionCell="_actionCell_2afg7_294",absolute="_absolute_2afg7_311",alignRight="_alignRight_2afg7_318",projectList="_projectList_2afg7_323",mt1$1="_mt1_2afg7_330",mb1$1="_mb1_2afg7_334",pt1="_pt1_2afg7_338",pb1="_pb1_2afg7_342",mt2$1="_mt2_2afg7_346",mb2$1="_mb2_2afg7_350",pt2="_pt2_2afg7_354",pb2="_pb2_2afg7_358",mt3$1="_mt3_2afg7_362",mb3$1="_mb3_2afg7_366",pt3="_pt3_2afg7_370",pb3="_pb3_2afg7_374",mt4="_mt4_2afg7_378",mb4="_mb4_2afg7_382",pt4="_pt4_2afg7_386",pb4="_pb4_2afg7_390",checkbox="_checkbox_2afg7_394",list="_list_2afg7_399",check="_check_2afg7_394",flex$2="_flex_2afg7_412",flexBetween="_flexBetween_2afg7_416",alignStart="_alignStart_2afg7_421",tipSelect="_tipSelect_2afg7_425",btn="_btn_2afg7_438",disabled="_disabled_2afg7_449",selected$2="_selected_2afg7_455",muted$1="_muted_2afg7_460",border$1="_border_2afg7_272",pb="_pb_2afg7_342",mb="_mb_2afg7_334",secondary="_secondary_2afg7_481",textInput="_textInput_2afg7_489",relative="_relative_2afg7_516",collabInfo="_collabInfo_2afg7_524",descriptive="_descriptive_2afg7_537",collabTable="_collabTable_2afg7_543",infoLabel="_infoLabel_2afg7_556",fullWidth="_fullWidth_2afg7_562",qr$1="_qr_2afg7_566",upload_container="_upload_container_2afg7_575",allowed$1="_allowed_2afg7_590",collabStyles={container:container$u,input,link,textarea,table,reviewTable,row,borderBottom,addressCell,cellWithPadding,sharesCell,actionCell,absolute,alignRight,projectList,mt1:mt1$1,mb1:mb1$1,pt1,pb1,mt2:mt2$1,mb2:mb2$1,pt2,pb2,mt3:mt3$1,mb3:mb3$1,pt3,pb3,mt4,mb4,pt4,pb4,checkbox,list,check,flex:flex$2,flexBetween,alignStart,tipSelect,btn,disabled,selected:selected$2,muted:muted$1,border:border$1,pb,mb,secondary,textInput,relative,collabInfo,descriptive,collabTable,infoLabel,fullWidth,qr:qr$1,upload_container,allowed:allowed$1},useCollabStore=create$2()(subscribeWithSelector(persist((re,ee)=>({originatedContract:void 0,findOriginatedContractFromOpHash:async ne=>{const ie=useModalStore.getState().step,oe=useModalStore.getState().close,ae=useModalStore.getState().show;ie("Originating Contract","Checking network for collab contract"),axios.get(`https://api.tzkt.io/v1/operations/originations/${ne}`).then(ce=>{const{data:le}=ce;if(console.log("response from originations call",le[0]),le[0]){console.log("There is correct data",le[0]);const{originatedContract:ue}=le[0];re({originatedContract:ue,originationOpHash:void 0}),console.log("Saved state originatedContract",ue),ie("Originating Contract","Collaborative contract created successfully"),setTimeout(()=>{oe()},2500)}else console.log("missing data"),ae("Originating Contract (Error)","Sorry, there was possibly an error creating the collaborative contract - please check tzkt.io for your wallet address");setTimeout(()=>{oe()},2e3)})},sign:async ne=>{const ie=useUserStore.getState().handleOp,oe=useModalStore.getState().step;oe("Signing OBJKT","Waiting for wallet",!0);const ce=(await Tezos.wallet.at(SIGNING_CONTRACT)).methods.sign(ne);return await ie(ce,"Signing OBJKT",{amount:0,storageLimit:310})},originateProxy:async ne=>{const ie=useModalStore.getState().step,oe=useUserStore.getState().handleOp;console.log("originateProxy",ne),re({originationOpHash:void 0,originatedProxy:void 0}),ie("Originate","creating collaborative contract");const ae=MichelsonMap.fromLiteral(ne),ce=packData(ae,createProxySchema),{packed:le}=await Packer$1.packData(ce),he=(await Tezos.wallet.at(PROXY_FACTORY_CONTRACT)).methods.create_proxy(le,"hic_proxy"),fe=await oe(he,"Originate",{amount:0});re({originationOpHash:fe})}}),{name:"collab",storage:createJSONStorage(()=>localStorage)}))),SigningUI=({id:re,hasSigned:ee})=>{const ne=useCollabStore(oe=>oe.sign),ie=()=>{ne(re).then(oe=>console.log(oe))};return ee?jsx$1("p",{children:"You have signed this work"}):jsx$1("div",{className:collabStyles.border,children:jsxs("div",{className:collabStyles.flexBetween,children:[jsx$1("p",{children:"You are a core participant in this work but you haven’t signed it yet"}),jsx$1(Button,{shadow_box:!0,onClick:ie,children:"sign work now"})]})})},SigningSummary=({coreParticipants:re,signatures:ee})=>jsxs("div",{children:[jsx$1("h2",{className:collabStyles.mb1,children:jsx$1("strong",{children:"Signing status"})}),jsx$1("ul",{className:collabStyles.list,children:re.map(ne=>{const ie=ee.some(({shareholder_address:oe})=>ne.shareholder_address===oe);return jsxs("li",{children:[jsxs("a",{href:`/tz/${ne.shareholder_address}`,children:[get$5(ne,"shareholder_profile.name")||walletPreview(ne.shareholder_address),":"," "]}),ie?"✓":"❌"]},ne.shareholder_address)})})]}),swapLabel$1="_swapLabel_1umiv_216",teiaLabel="_teiaLabel_1umiv_232",styles$N={swapLabel:swapLabel$1,teiaLabel},ListingLabel=({children:re,className:ee,label:ne,alt:ie,tooltip:oe})=>jsx$1("div",{className:`${styles$N.swapLabel} ${ee||""}`,title:oe||ie,"aria-label":ie,children:ne}),TeiaLabel=()=>jsx$1(ListingLabel,{label:"TEIA",className:styles$N.teiaLabel,alt:"buy this listing and support teia"}),HENLabel=()=>jsx$1(ListingLabel,{label:"H=N",alt:"this listing is through the original HEN contract"}),OBJKTLabel=()=>jsx$1(ListingLabel,{label:"Objkt.com",alt:"This swap is through OBJKT.com"}),RestrictedLabel=()=>jsx$1(ListingLabel,{label:"Restricted",alt:"This swap is made by a restricted wallet."}),VersumLabel=()=>jsx$1(ListingLabel,{label:"Versum.xyz",alt:"This swap is through versum.xyz"}),MarketplaceLabel=({listing:re})=>re.type.startsWith("TEIA")?jsx$1(TeiaLabel,{}):re.type.startsWith("HEN")?jsx$1(HENLabel,{}):re.type.startsWith("OBJKT")?jsx$1(OBJKTLabel,{}):re.type.startsWith("VERSUM")?jsx$1(VersumLabel,{}):(console.error("Could not resolve the proper label for this listing",re),null),MarketplaceLabel$1=reactExports.memo(MarketplaceLabel),CheapestButton=({listing:re})=>{const[ee,ne,ie]=useUserStore(oe=>[oe.address,oe.sync,oe.collect]);return re?jsxs("div",{className:styles$O.main_swap,children:[jsx$1(MarketplaceLabel$1,{listing:re}),jsxs(Button,{onClick:()=>{ee==null?ne():ie(re)},full:!0,shadow_box:!0,children:["Collect for ",Number(re.price)/1e6," tez"]})]}):jsx$1(Button,{shadow_box:!0,full:!0,children:"Not for sale"})},CollabParticipant=({participant:re})=>{const ee=get$5(re,"shareholder_profile.name")?get$5(re,"shareholder_profile.name"):re.shareholder_address;return ee&&jsx$1(Link,{className:collabStyles.link,to:`${PATH.ISSUER}/${re.shareholder_address}`,children:ee})},ParticipantList=({title:re,participants:ee})=>jsx$1("div",{children:jsxs("div",{className:collabStyles.flex,children:[re&&jsx$1("p",{className:collabStyles.infoLabel,children:jsxs("span",{children:[re,":"]})}),jsx$1("div",{children:ee.map((ne,ie)=>[ie>0&&ie<ee.length-1&&", ",ie>0&&ie===ee.length-1&&", ",jsx$1(CollabParticipant,{participant:ne},ne.shareholder_address)])})]})}),ParticipantList$1=reactExports.memo(ParticipantList),CollabIssuerInfo=({creator:re})=>{const{name:ee,user_address:ne}=re,[ie,oe]=reactExports.useState(!1),ae=get$5(re,"split_contract.shareholders",[]).filter(le=>le.holder_type===CollaboratorType.CORE_PARTICIPANT),ce=ee?`/collab/${ee}`:`${PATH.COLLAB}/${ne}`;return jsxs("div",{onMouseOver:()=>oe(!0),onFocus:()=>oe(!0),onMouseOut:()=>oe(!1),onBlur:()=>oe(!1),children:[jsx$1(Button,{className:collabStyles.issuerBtn,to:ce,children:ee===""?walletPreview(ne):ee}),ie&&jsx$1("div",{className:collabStyles.collabInfo,children:jsx$1(ParticipantList$1,{title:!1,participants:ae})})]})},Editions=({prefix:re,nft:ee,className:ne})=>{const{walletBlockMap:ie,isLoading:oe}=useSettings(),ce=reactExports.useMemo(()=>{var le;if(!oe)return lodashExports.sum((le=ee.listings)==null?void 0:le.filter(ue=>ie.get(ue.seller_address)!==1).map(({amount_left:ue})=>ue))},[oe,ee.listings,ie])||"X";return jsx$1("div",{className:ne,children:jsx$1("p",{children:re?jsxs("span",{children:["Editions:",jsxs("span",{children:[ce,"/",ee.editions]})]}):jsxs("span",{children:[ce,"/",ee.editions]})})})},Editions$1=reactExports.memo(Editions),ItemInfo=({nft:re})=>{var Ce,Se,$e,Te;const ee=useUserStore(Ne=>Ne.address),{walletBlockMap:ne}=useSettings(),[ie,oe]=reactExports.useState(!1),ae=ne.get(re.artist_address)===1,ce=re.listings.find(Ne=>ne.get(Ne.seller_address)!==1),le=get$5(re,"teia_meta.is_signed"),ue=get$5(re,"artist_profile.is_split"),he=ue&&le?"✓ ":"⚠️",fe=ue&&le?"VERIFIED":"UNVERIFIED",me=((Se=(Ce=re==null?void 0:re.artist_profile)==null?void 0:Ce.split_contract)==null?void 0:Se.shareholders)||[],ge=ue?me.some(({shareholder_address:Ne,holder_type:Ie})=>ee===Ne&&Ie===CollaboratorType.CORE_PARTICIPANT):!1,ve=re.signatures.find(Ne=>Ne.shareholder_address===ee),ye=ue?me.filter(Ne=>Ne.holder_type===CollaboratorType.CORE_PARTICIPANT):null,be=classNames$1(collabStyles.flexBetween,collabStyles.alignStart);return jsxs(Fragment,{children:[ue&&ge&&!ve&&jsx$1(SigningUI,{id:re.token_id,hasSigned:!1}),jsx$1("div",{className:styles$O.container,children:jsxs("div",{className:styles$O.edition,children:[jsx$1("div",{className:collabStyles.relative,children:jsx$1("div",{className:styles$O.inline,children:ue?jsx$1(CollabIssuerInfo,{creator:re.artist_profile}):jsx$1(Button,{to:($e=re.artist_profile)!=null&&$e.name?encodeURI(`/${re.artist_profile.name}`):`${PATH.ISSUER}/${re.artist_address}`,children:(Te=re.artist_profile)!=null&&Te.name?re.artist_profile.name:walletPreview(re.artist_address)})})}),jsx$1(Editions$1,{prefix:"Editions:",nft:re})]})}),!ae&&jsxs("div",{className:`${styles$O.spread} ${styles$O.objkt_details_container}`,children:[jsxs("div",{className:styles$O.objkt_label_container,children:[jsxs("p",{className:styles$O.objkt_label,children:["OBJKT#",re.token_id]}),ue&&jsxs("div",{className:collabStyles.relative,children:[jsxs("div",{className:styles$O.collab_verification_title,children:[jsx$1("span",{className:styles$O.collab_verification_symbol,children:he}),jsx$1(Button,{onClick:()=>oe(!ie),children:fe})]}),ie&&jsx$1("div",{className:collabStyles.collabInfo,children:jsxs("div",{className:be,children:[jsx$1(SigningSummary,{coreParticipants:ye,signatures:re.signatures}),jsx$1(Button,{onClick:()=>oe(!1),children:jsx$1(Secondary$1,{children:"close"})})]})})]})]}),jsx$1(CheapestButton,{listing:ce})]})]})},Price=({price:re})=>jsxs("div",{className:styles$O.price_box,children:[re,jsx$1(TezosIcon,{size:16})]}),ItemInfoCompact=({nft:re})=>{var ae,ce;const[ee,ne]=useLocalSettings(le=>[le.zen,le.viewMode]),ie=useParams(),oe=ee?null:lodashExports.isNumber(re.price)?(Number(re.price)/1e6).toString():"X";return jsxs("div",{className:`${styles$O.compact_container} ${styles$O.masonry}`,children:[(ne==="single"||ie.id&&ie["*"]==="")&&jsxs(Button,{alt:`Go to OBJKT ${re.token_id}`,to:`${PATH.OBJKT}/${re.token_id}`,children:["#",re.token_id]}),jsx$1(Button,{className:styles$O.artist,activeClass:styles$O.hide,alt:`Go to artist page of token #${re.token_id}`,to:(ae=re.artist_profile)!=null&&ae.name?encodeURI(`/${re.artist_profile.name}`):`/tz/${re.artist_address}`,children:(ce=re.artist_profile)!=null&&ce.name?re.artist_profile.name:walletPreview(re.artist_address)}),jsx$1(Editions$1,{className:styles$O.editions,nft:re}),jsx$1(Price,{price:oe})]})},viewer="_viewer_15is3_1",container$t="_container_15is3_13",arButton="_arButton_15is3_34",styles$M={viewer,container:container$t,arButton};var build={exports:{}};(()=>{var re={296:(oe,ae,ce)=>{var le=/^\s+|\s+$/g,ue=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,fe=/^0o[0-7]+$/i,me=parseInt,ge=typeof ce.g=="object"&&ce.g&&ce.g.Object===Object&&ce.g,ve=typeof self=="object"&&self&&self.Object===Object&&self,ye=ge||ve||Function("return this")(),be=Object.prototype.toString,Ce=Math.max,Se=Math.min,$e=function(){return ye.Date.now()};function Te(Ie){var ke=typeof Ie;return!!Ie&&(ke=="object"||ke=="function")}function Ne(Ie){if(typeof Ie=="number")return Ie;if(function(Oe){return typeof Oe=="symbol"||function(Be){return!!Be&&typeof Be=="object"}(Oe)&&be.call(Oe)=="[object Symbol]"}(Ie))return NaN;if(Te(Ie)){var ke=typeof Ie.valueOf=="function"?Ie.valueOf():Ie;Ie=Te(ke)?ke+"":ke}if(typeof Ie!="string")return Ie===0?Ie:+Ie;Ie=Ie.replace(le,"");var De=he.test(Ie);return De||fe.test(Ie)?me(Ie.slice(2),De?2:8):ue.test(Ie)?NaN:+Ie}oe.exports=function(Ie,ke,De){var Oe,Be,Me,Le,je,ze,Ve=0,He=!1,We=!1,Ye=!0;if(typeof Ie!="function")throw new TypeError("Expected a function");function Ue(tn){var Xt=Oe,dn=Be;return Oe=Be=void 0,Ve=tn,Le=Ie.apply(dn,Xt)}function Ke(tn){return Ve=tn,je=setTimeout(Vt,ke),He?Ue(tn):Le}function Xe(tn){var Xt=tn-ze;return ze===void 0||Xt>=ke||Xt<0||We&&tn-Ve>=Me}function Vt(){var tn=$e();if(Xe(tn))return Wt(tn);je=setTimeout(Vt,function(Xt){var dn=ke-(Xt-ze);return We?Se(dn,Me-(Xt-Ve)):dn}(tn))}function Wt(tn){return je=void 0,Ye&&Oe?Ue(tn):(Oe=Be=void 0,Le)}function Kt(){var tn=$e(),Xt=Xe(tn);if(Oe=arguments,Be=this,ze=tn,Xt){if(je===void 0)return Ke(ze);if(We)return je=setTimeout(Vt,ke),Ue(ze)}return je===void 0&&(je=setTimeout(Vt,ke)),Le}return ke=Ne(ke)||0,Te(De)&&(He=!!De.leading,Me=(We="maxWait"in De)?Ce(Ne(De.maxWait)||0,ke):Me,Ye="trailing"in De?!!De.trailing:Ye),Kt.cancel=function(){je!==void 0&&clearTimeout(je),Ve=0,Oe=ze=Be=je=void 0},Kt.flush=function(){return je===void 0?Le:Wt($e())},Kt}},96:(oe,ae,ce)=>{var le="Expected a function",ue=/^\s+|\s+$/g,he=/^[-+]0x[0-9a-f]+$/i,fe=/^0b[01]+$/i,me=/^0o[0-7]+$/i,ge=parseInt,ve=typeof ce.g=="object"&&ce.g&&ce.g.Object===Object&&ce.g,ye=typeof self=="object"&&self&&self.Object===Object&&self,be=ve||ye||Function("return this")(),Ce=Object.prototype.toString,Se=Math.max,$e=Math.min,Te=function(){return be.Date.now()};function Ne(ke){var De=typeof ke;return!!ke&&(De=="object"||De=="function")}function Ie(ke){if(typeof ke=="number")return ke;if(function(Be){return typeof Be=="symbol"||function(Me){return!!Me&&typeof Me=="object"}(Be)&&Ce.call(Be)=="[object Symbol]"}(ke))return NaN;if(Ne(ke)){var De=typeof ke.valueOf=="function"?ke.valueOf():ke;ke=Ne(De)?De+"":De}if(typeof ke!="string")return ke===0?ke:+ke;ke=ke.replace(ue,"");var Oe=fe.test(ke);return Oe||me.test(ke)?ge(ke.slice(2),Oe?2:8):he.test(ke)?NaN:+ke}oe.exports=function(ke,De,Oe){var Be=!0,Me=!0;if(typeof ke!="function")throw new TypeError(le);return Ne(Oe)&&(Be="leading"in Oe?!!Oe.leading:Be,Me="trailing"in Oe?!!Oe.trailing:Me),function(Le,je,ze){var Ve,He,We,Ye,Ue,Ke,Xe=0,Vt=!1,Wt=!1,Kt=!0;if(typeof Le!="function")throw new TypeError(le);function tn(yn){var Sn=Ve,kn=He;return Ve=He=void 0,Xe=yn,Ye=Le.apply(kn,Sn)}function Xt(yn){return Xe=yn,Ue=setTimeout(nn,je),Vt?tn(yn):Ye}function dn(yn){var Sn=yn-Ke;return Ke===void 0||Sn>=je||Sn<0||Wt&&yn-Xe>=We}function nn(){var yn=Te();if(dn(yn))return rn(yn);Ue=setTimeout(nn,function(Sn){var kn=je-(Sn-Ke);return Wt?$e(kn,We-(Sn-Xe)):kn}(yn))}function rn(yn){return Ue=void 0,Kt&&Ve?tn(yn):(Ve=He=void 0,Ye)}function vn(){var yn=Te(),Sn=dn(yn);if(Ve=arguments,He=this,Ke=yn,Sn){if(Ue===void 0)return Xt(Ke);if(Wt)return Ue=setTimeout(nn,je),tn(Ke)}return Ue===void 0&&(Ue=setTimeout(nn,je)),Ye}return je=Ie(je)||0,Ne(ze)&&(Vt=!!ze.leading,We=(Wt="maxWait"in ze)?Se(Ie(ze.maxWait)||0,je):We,Kt="trailing"in ze?!!ze.trailing:Kt),vn.cancel=function(){Ue!==void 0&&clearTimeout(Ue),Xe=0,Ve=Ke=He=Ue=void 0},vn.flush=function(){return Ue===void 0?Ye:rn(Te())},vn}(ke,De,{leading:Be,maxWait:De,trailing:Me})}},703:(oe,ae,ce)=>{var le=ce(414);function ue(){}function he(){}he.resetWarningCache=ue,oe.exports=function(){function fe(ve,ye,be,Ce,Se,$e){if($e!==le){var Te=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Te.name="Invariant Violation",Te}}function me(){return fe}fe.isRequired=fe;var ge={array:fe,bool:fe,func:fe,number:fe,object:fe,string:fe,symbol:fe,any:fe,arrayOf:me,element:fe,elementType:fe,instanceOf:me,node:fe,objectOf:me,oneOf:me,oneOfType:me,shape:me,exact:me,checkPropTypes:he,resetWarningCache:ue};return ge.PropTypes=ge,ge}},697:(oe,ae,ce)=>{oe.exports=ce(703)()},414:oe=>{oe.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},ee={};function ne(oe){var ae=ee[oe];if(ae!==void 0)return ae.exports;var ce=ee[oe]={exports:{}};return re[oe](ce,ce.exports,ne),ce.exports}ne.n=oe=>{var ae=oe&&oe.__esModule?()=>oe.default:()=>oe;return ne.d(ae,{a:ae}),ae},ne.d=(oe,ae)=>{for(var ce in ae)ne.o(ae,ce)&&!ne.o(oe,ce)&&Object.defineProperty(oe,ce,{enumerable:!0,get:ae[ce]})},ne.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),ne.o=(oe,ae)=>Object.prototype.hasOwnProperty.call(oe,ae),ne.r=oe=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(oe,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(oe,"__esModule",{value:!0})};var ie={};(()=>{ne.r(ie),ne.d(ie,{LazyLoadComponent:()=>Yt,LazyLoadImage:()=>Kn,trackWindowScroll:()=>Vt});const oe=reactExports;var ae=ne.n(oe),ce=ne(697);const le=reactDomExports;var ue=ne.n(le);function he(){return typeof window<"u"&&"IntersectionObserver"in window&&"isIntersecting"in window.IntersectionObserverEntry.prototype}function fe(pn){return(fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn})(pn)}function me(pn,sn){var Nn=Object.keys(pn);if(Object.getOwnPropertySymbols){var wn=Object.getOwnPropertySymbols(pn);sn&&(wn=wn.filter(function(is){return Object.getOwnPropertyDescriptor(pn,is).enumerable})),Nn.push.apply(Nn,wn)}return Nn}function ge(pn,sn,Nn){return sn in pn?Object.defineProperty(pn,sn,{value:Nn,enumerable:!0,configurable:!0,writable:!0}):pn[sn]=Nn,pn}function ve(pn,sn){for(var Nn=0;Nn<sn.length;Nn++){var wn=sn[Nn];wn.enumerable=wn.enumerable||!1,wn.configurable=!0,"value"in wn&&(wn.writable=!0),Object.defineProperty(pn,wn.key,wn)}}function ye(pn,sn){return(ye=Object.setPrototypeOf||function(Nn,wn){return Nn.__proto__=wn,Nn})(pn,sn)}function be(pn,sn){if(sn&&(fe(sn)==="object"||typeof sn=="function"))return sn;if(sn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Nn){if(Nn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Nn}(pn)}function Ce(pn){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)})(pn)}var Se=function(pn){pn.forEach(function(sn){sn.isIntersecting&&sn.target.onVisible()})},$e={},Te=function(pn){(function(bn,$n){if(typeof $n!="function"&&$n!==null)throw new TypeError("Super expression must either be null or a function");bn.prototype=Object.create($n&&$n.prototype,{constructor:{value:bn,writable:!0,configurable:!0}}),$n&&ye(bn,$n)})(ss,pn);var sn,Nn,wn,is,Cs=(wn=ss,is=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var bn,$n=Ce(wn);if(is){var Ln=Ce(this).constructor;bn=Reflect.construct($n,arguments,Ln)}else bn=$n.apply(this,arguments);return be(this,bn)});function ss(bn){var $n;if(function(zn,Xn){if(!(zn instanceof Xn))throw new TypeError("Cannot call a class as a function")}(this,ss),($n=Cs.call(this,bn)).supportsObserver=!bn.scrollPosition&&bn.useIntersectionObserver&&he(),$n.supportsObserver){var Ln=bn.threshold;$n.observer=function(zn){return $e[zn]=$e[zn]||new IntersectionObserver(Se,{rootMargin:zn+"px"}),$e[zn]}(Ln)}return $n}return sn=ss,(Nn=[{key:"componentDidMount",value:function(){this.placeholder&&this.observer&&(this.placeholder.onVisible=this.props.onVisible,this.observer.observe(this.placeholder)),this.supportsObserver||this.updateVisibility()}},{key:"componentWillUnmount",value:function(){this.observer&&this.placeholder&&this.observer.unobserve(this.placeholder)}},{key:"componentDidUpdate",value:function(){this.supportsObserver||this.updateVisibility()}},{key:"getPlaceholderBoundingBox",value:function(){var bn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollPosition,$n=this.placeholder.getBoundingClientRect(),Ln=ue().findDOMNode(this.placeholder).style,zn={left:parseInt(Ln.getPropertyValue("margin-left"),10)||0,top:parseInt(Ln.getPropertyValue("margin-top"),10)||0};return{bottom:bn.y+$n.bottom+zn.top,left:bn.x+$n.left+zn.left,right:bn.x+$n.right+zn.left,top:bn.y+$n.top+zn.top}}},{key:"isPlaceholderInViewport",value:function(){if(typeof window>"u"||!this.placeholder)return!1;var bn=this.props,$n=bn.scrollPosition,Ln=bn.threshold,zn=this.getPlaceholderBoundingBox($n),Xn=$n.y+window.innerHeight,cs=$n.x,fs=$n.x+window.innerWidth,ms=$n.y;return ms-Ln<=zn.bottom&&Xn+Ln>=zn.top&&cs-Ln<=zn.right&&fs+Ln>=zn.left}},{key:"updateVisibility",value:function(){this.isPlaceholderInViewport()&&this.props.onVisible()}},{key:"render",value:function(){var bn=this,$n=this.props,Ln=$n.className,zn=$n.height,Xn=$n.placeholder,cs=$n.style,fs=$n.width;if(Xn&&typeof Xn.type!="function")return ae().cloneElement(Xn,{ref:function(ds){return bn.placeholder=ds}});var ms=function(ds){for(var _s=1;_s<arguments.length;_s++){var ys=arguments[_s]!=null?arguments[_s]:{};_s%2?me(Object(ys),!0).forEach(function(ws){ge(ds,ws,ys[ws])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ds,Object.getOwnPropertyDescriptors(ys)):me(Object(ys)).forEach(function(ws){Object.defineProperty(ds,ws,Object.getOwnPropertyDescriptor(ys,ws))})}return ds}({display:"inline-block"},cs);return fs!==void 0&&(ms.width=fs),zn!==void 0&&(ms.height=zn),ae().createElement("span",{className:Ln,ref:function(ds){return bn.placeholder=ds},style:ms},Xn)}}])&&ve(sn.prototype,Nn),ss}(ae().Component);Te.propTypes={onVisible:ce.PropTypes.func.isRequired,className:ce.PropTypes.string,height:ce.PropTypes.oneOfType([ce.PropTypes.number,ce.PropTypes.string]),placeholder:ce.PropTypes.element,threshold:ce.PropTypes.number,useIntersectionObserver:ce.PropTypes.bool,scrollPosition:ce.PropTypes.shape({x:ce.PropTypes.number.isRequired,y:ce.PropTypes.number.isRequired}),width:ce.PropTypes.oneOfType([ce.PropTypes.number,ce.PropTypes.string])},Te.defaultProps={className:"",placeholder:null,threshold:100,useIntersectionObserver:!0};const Ne=Te;var Ie=ne(296),ke=ne.n(Ie),De=ne(96),Oe=ne.n(De),Be=function(pn){var sn=getComputedStyle(pn,null);return sn.getPropertyValue("overflow")+sn.getPropertyValue("overflow-y")+sn.getPropertyValue("overflow-x")};const Me=function(pn){if(!(pn instanceof HTMLElement))return window;for(var sn=pn;sn&&sn instanceof HTMLElement;){if(/(scroll|auto)/.test(Be(sn)))return sn;sn=sn.parentNode}return window};function Le(pn){return(Le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn})(pn)}var je=["delayMethod","delayTime"];function ze(){return(ze=Object.assign||function(pn){for(var sn=1;sn<arguments.length;sn++){var Nn=arguments[sn];for(var wn in Nn)Object.prototype.hasOwnProperty.call(Nn,wn)&&(pn[wn]=Nn[wn])}return pn}).apply(this,arguments)}function Ve(pn,sn){for(var Nn=0;Nn<sn.length;Nn++){var wn=sn[Nn];wn.enumerable=wn.enumerable||!1,wn.configurable=!0,"value"in wn&&(wn.writable=!0),Object.defineProperty(pn,wn.key,wn)}}function He(pn,sn){return(He=Object.setPrototypeOf||function(Nn,wn){return Nn.__proto__=wn,Nn})(pn,sn)}function We(pn,sn){if(sn&&(Le(sn)==="object"||typeof sn=="function"))return sn;if(sn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ye(pn)}function Ye(pn){if(pn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pn}function Ue(pn){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)})(pn)}var Ke=function(){return typeof window>"u"?0:window.scrollX||window.pageXOffset},Xe=function(){return typeof window>"u"?0:window.scrollY||window.pageYOffset};const Vt=function(pn){var sn=function(Nn){(function(Ln,zn){if(typeof zn!="function"&&zn!==null)throw new TypeError("Super expression must either be null or a function");Ln.prototype=Object.create(zn&&zn.prototype,{constructor:{value:Ln,writable:!0,configurable:!0}}),zn&&He(Ln,zn)})($n,Nn);var wn,is,Cs,ss,bn=(Cs=$n,ss=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var Ln,zn=Ue(Cs);if(ss){var Xn=Ue(this).constructor;Ln=Reflect.construct(zn,arguments,Xn)}else Ln=zn.apply(this,arguments);return We(this,Ln)});function $n(Ln){var zn;if(function(cs,fs){if(!(cs instanceof fs))throw new TypeError("Cannot call a class as a function")}(this,$n),(zn=bn.call(this,Ln)).useIntersectionObserver=Ln.useIntersectionObserver&&he(),zn.useIntersectionObserver)return We(zn);var Xn=zn.onChangeScroll.bind(Ye(zn));return Ln.delayMethod==="debounce"?zn.delayedScroll=ke()(Xn,Ln.delayTime):Ln.delayMethod==="throttle"&&(zn.delayedScroll=Oe()(Xn,Ln.delayTime)),zn.state={scrollPosition:{x:Ke(),y:Xe()}},zn.baseComponentRef=ae().createRef(),zn}return wn=$n,(is=[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){typeof window>"u"||this.useIntersectionObserver||Me(ue().findDOMNode(this.baseComponentRef.current))!==this.scrollElement&&(this.removeListeners(),this.addListeners())}},{key:"addListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement=Me(ue().findDOMNode(this.baseComponentRef.current)),this.scrollElement.addEventListener("scroll",this.delayedScroll,{passive:!0}),window.addEventListener("resize",this.delayedScroll,{passive:!0}),this.scrollElement!==window&&window.addEventListener("scroll",this.delayedScroll,{passive:!0}))}},{key:"removeListeners",value:function(){typeof window>"u"||this.useIntersectionObserver||(this.scrollElement.removeEventListener("scroll",this.delayedScroll),window.removeEventListener("resize",this.delayedScroll),this.scrollElement!==window&&window.removeEventListener("scroll",this.delayedScroll))}},{key:"onChangeScroll",value:function(){this.useIntersectionObserver||this.setState({scrollPosition:{x:Ke(),y:Xe()}})}},{key:"render",value:function(){var Ln=this.props,zn=(Ln.delayMethod,Ln.delayTime,function(cs,fs){if(cs==null)return{};var ms,ds,_s=function(ws,lr){if(ws==null)return{};var Ms,vr,Tr={},Kr=Object.keys(ws);for(vr=0;vr<Kr.length;vr++)Ms=Kr[vr],lr.indexOf(Ms)>=0||(Tr[Ms]=ws[Ms]);return Tr}(cs,fs);if(Object.getOwnPropertySymbols){var ys=Object.getOwnPropertySymbols(cs);for(ds=0;ds<ys.length;ds++)ms=ys[ds],fs.indexOf(ms)>=0||Object.prototype.propertyIsEnumerable.call(cs,ms)&&(_s[ms]=cs[ms])}return _s}(Ln,je)),Xn=this.useIntersectionObserver?null:this.state.scrollPosition;return ae().createElement(pn,ze({forwardRef:this.baseComponentRef,scrollPosition:Xn},zn))}}])&&Ve(wn.prototype,is),$n}(ae().Component);return sn.propTypes={delayMethod:ce.PropTypes.oneOf(["debounce","throttle"]),delayTime:ce.PropTypes.number,useIntersectionObserver:ce.PropTypes.bool},sn.defaultProps={delayMethod:"throttle",delayTime:300,useIntersectionObserver:!0},sn};function Wt(pn){return(Wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn})(pn)}function Kt(pn,sn){for(var Nn=0;Nn<sn.length;Nn++){var wn=sn[Nn];wn.enumerable=wn.enumerable||!1,wn.configurable=!0,"value"in wn&&(wn.writable=!0),Object.defineProperty(pn,wn.key,wn)}}function tn(pn,sn){return(tn=Object.setPrototypeOf||function(Nn,wn){return Nn.__proto__=wn,Nn})(pn,sn)}function Xt(pn,sn){if(sn&&(Wt(sn)==="object"||typeof sn=="function"))return sn;if(sn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Nn){if(Nn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Nn}(pn)}function dn(pn){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)})(pn)}var nn=function(pn){(function(bn,$n){if(typeof $n!="function"&&$n!==null)throw new TypeError("Super expression must either be null or a function");bn.prototype=Object.create($n&&$n.prototype,{constructor:{value:bn,writable:!0,configurable:!0}}),$n&&tn(bn,$n)})(ss,pn);var sn,Nn,wn,is,Cs=(wn=ss,is=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var bn,$n=dn(wn);if(is){var Ln=dn(this).constructor;bn=Reflect.construct($n,arguments,Ln)}else bn=$n.apply(this,arguments);return Xt(this,bn)});function ss(bn){return function($n,Ln){if(!($n instanceof Ln))throw new TypeError("Cannot call a class as a function")}(this,ss),Cs.call(this,bn)}return sn=ss,(Nn=[{key:"render",value:function(){return ae().createElement(Ne,this.props)}}])&&Kt(sn.prototype,Nn),ss}(ae().Component);const rn=Vt(nn);function vn(pn){return(vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn})(pn)}function yn(pn,sn){for(var Nn=0;Nn<sn.length;Nn++){var wn=sn[Nn];wn.enumerable=wn.enumerable||!1,wn.configurable=!0,"value"in wn&&(wn.writable=!0),Object.defineProperty(pn,wn.key,wn)}}function Sn(pn,sn){return(Sn=Object.setPrototypeOf||function(Nn,wn){return Nn.__proto__=wn,Nn})(pn,sn)}function kn(pn,sn){if(sn&&(vn(sn)==="object"||typeof sn=="function"))return sn;if(sn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bn(pn)}function Bn(pn){if(pn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pn}function Dn(pn){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)})(pn)}var Je=function(pn){(function(bn,$n){if(typeof $n!="function"&&$n!==null)throw new TypeError("Super expression must either be null or a function");bn.prototype=Object.create($n&&$n.prototype,{constructor:{value:bn,writable:!0,configurable:!0}}),$n&&Sn(bn,$n)})(ss,pn);var sn,Nn,wn,is,Cs=(wn=ss,is=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var bn,$n=Dn(wn);if(is){var Ln=Dn(this).constructor;bn=Reflect.construct($n,arguments,Ln)}else bn=$n.apply(this,arguments);return kn(this,bn)});function ss(bn){var $n;(function(fs,ms){if(!(fs instanceof ms))throw new TypeError("Cannot call a class as a function")})(this,ss),$n=Cs.call(this,bn);var Ln=bn.afterLoad,zn=bn.beforeLoad,Xn=bn.scrollPosition,cs=bn.visibleByDefault;return $n.state={visible:cs},cs&&(zn(),Ln()),$n.onVisible=$n.onVisible.bind(Bn($n)),$n.isScrollTracked=!!(Xn&&Number.isFinite(Xn.x)&&Xn.x>=0&&Number.isFinite(Xn.y)&&Xn.y>=0),$n}return sn=ss,(Nn=[{key:"componentDidUpdate",value:function(bn,$n){$n.visible!==this.state.visible&&this.props.afterLoad()}},{key:"onVisible",value:function(){this.props.beforeLoad(),this.setState({visible:!0})}},{key:"render",value:function(){if(this.state.visible)return this.props.children;var bn=this.props,$n=bn.className,Ln=bn.delayMethod,zn=bn.delayTime,Xn=bn.height,cs=bn.placeholder,fs=bn.scrollPosition,ms=bn.style,ds=bn.threshold,_s=bn.useIntersectionObserver,ys=bn.width;return this.isScrollTracked||_s&&he()?ae().createElement(Ne,{className:$n,height:Xn,onVisible:this.onVisible,placeholder:cs,scrollPosition:fs,style:ms,threshold:ds,useIntersectionObserver:_s,width:ys}):ae().createElement(rn,{className:$n,delayMethod:Ln,delayTime:zn,height:Xn,onVisible:this.onVisible,placeholder:cs,style:ms,threshold:ds,width:ys})}}])&&yn(sn.prototype,Nn),ss}(ae().Component);Je.propTypes={afterLoad:ce.PropTypes.func,beforeLoad:ce.PropTypes.func,useIntersectionObserver:ce.PropTypes.bool,visibleByDefault:ce.PropTypes.bool},Je.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},useIntersectionObserver:!0,visibleByDefault:!1};const Yt=Je;function an(pn){return(an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(sn){return typeof sn}:function(sn){return sn&&typeof Symbol=="function"&&sn.constructor===Symbol&&sn!==Symbol.prototype?"symbol":typeof sn})(pn)}var An=["afterLoad","beforeLoad","delayMethod","delayTime","effect","placeholder","placeholderSrc","scrollPosition","threshold","useIntersectionObserver","visibleByDefault","wrapperClassName","wrapperProps"];function fn(pn,sn){var Nn=Object.keys(pn);if(Object.getOwnPropertySymbols){var wn=Object.getOwnPropertySymbols(pn);sn&&(wn=wn.filter(function(is){return Object.getOwnPropertyDescriptor(pn,is).enumerable})),Nn.push.apply(Nn,wn)}return Nn}function mn(pn){for(var sn=1;sn<arguments.length;sn++){var Nn=arguments[sn]!=null?arguments[sn]:{};sn%2?fn(Object(Nn),!0).forEach(function(wn){Tn(pn,wn,Nn[wn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(pn,Object.getOwnPropertyDescriptors(Nn)):fn(Object(Nn)).forEach(function(wn){Object.defineProperty(pn,wn,Object.getOwnPropertyDescriptor(Nn,wn))})}return pn}function Tn(pn,sn,Nn){return sn in pn?Object.defineProperty(pn,sn,{value:Nn,enumerable:!0,configurable:!0,writable:!0}):pn[sn]=Nn,pn}function Vn(){return(Vn=Object.assign||function(pn){for(var sn=1;sn<arguments.length;sn++){var Nn=arguments[sn];for(var wn in Nn)Object.prototype.hasOwnProperty.call(Nn,wn)&&(pn[wn]=Nn[wn])}return pn}).apply(this,arguments)}function Gn(pn,sn){for(var Nn=0;Nn<sn.length;Nn++){var wn=sn[Nn];wn.enumerable=wn.enumerable||!1,wn.configurable=!0,"value"in wn&&(wn.writable=!0),Object.defineProperty(pn,wn.key,wn)}}function Pn(pn,sn){return(Pn=Object.setPrototypeOf||function(Nn,wn){return Nn.__proto__=wn,Nn})(pn,sn)}function Un(pn,sn){if(sn&&(an(sn)==="object"||typeof sn=="function"))return sn;if(sn!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(Nn){if(Nn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Nn}(pn)}function ls(pn){return(ls=Object.setPrototypeOf?Object.getPrototypeOf:function(sn){return sn.__proto__||Object.getPrototypeOf(sn)})(pn)}var Rn=function(pn){(function(bn,$n){if(typeof $n!="function"&&$n!==null)throw new TypeError("Super expression must either be null or a function");bn.prototype=Object.create($n&&$n.prototype,{constructor:{value:bn,writable:!0,configurable:!0}}),$n&&Pn(bn,$n)})(ss,pn);var sn,Nn,wn,is,Cs=(wn=ss,is=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var bn,$n=ls(wn);if(is){var Ln=ls(this).constructor;bn=Reflect.construct($n,arguments,Ln)}else bn=$n.apply(this,arguments);return Un(this,bn)});function ss(bn){var $n;return function(Ln,zn){if(!(Ln instanceof zn))throw new TypeError("Cannot call a class as a function")}(this,ss),($n=Cs.call(this,bn)).state={loaded:!1},$n}return sn=ss,(Nn=[{key:"onImageLoad",value:function(){var bn=this;return this.state.loaded?null:function(){bn.props.afterLoad(),bn.setState({loaded:!0})}}},{key:"getImg",value:function(){var bn=this.props,$n=(bn.afterLoad,bn.beforeLoad,bn.delayMethod,bn.delayTime,bn.effect,bn.placeholder,bn.placeholderSrc,bn.scrollPosition,bn.threshold,bn.useIntersectionObserver,bn.visibleByDefault,bn.wrapperClassName,bn.wrapperProps,function(Ln,zn){if(Ln==null)return{};var Xn,cs,fs=function(ds,_s){if(ds==null)return{};var ys,ws,lr={},Ms=Object.keys(ds);for(ws=0;ws<Ms.length;ws++)ys=Ms[ws],_s.indexOf(ys)>=0||(lr[ys]=ds[ys]);return lr}(Ln,zn);if(Object.getOwnPropertySymbols){var ms=Object.getOwnPropertySymbols(Ln);for(cs=0;cs<ms.length;cs++)Xn=ms[cs],zn.indexOf(Xn)>=0||Object.prototype.propertyIsEnumerable.call(Ln,Xn)&&(fs[Xn]=Ln[Xn])}return fs}(bn,An));return ae().createElement("img",Vn({onLoad:this.onImageLoad()},$n))}},{key:"getLazyLoadImage",value:function(){var bn=this.props,$n=bn.beforeLoad,Ln=bn.className,zn=bn.delayMethod,Xn=bn.delayTime,cs=bn.height,fs=bn.placeholder,ms=bn.scrollPosition,ds=bn.style,_s=bn.threshold,ys=bn.useIntersectionObserver,ws=bn.visibleByDefault,lr=bn.width;return ae().createElement(Yt,{beforeLoad:$n,className:Ln,delayMethod:zn,delayTime:Xn,height:cs,placeholder:fs,scrollPosition:ms,style:ds,threshold:_s,useIntersectionObserver:ys,visibleByDefault:ws,width:lr},this.getImg())}},{key:"getWrappedLazyLoadImage",value:function(bn){var $n=this.props,Ln=$n.effect,zn=$n.height,Xn=$n.placeholderSrc,cs=$n.width,fs=$n.wrapperClassName,ms=$n.wrapperProps,ds=this.state.loaded,_s=ds?" lazy-load-image-loaded":"",ys=ds||!Xn?{}:{backgroundImage:"url(".concat(Xn,")"),backgroundSize:"100% 100%"};return ae().createElement("span",Vn({className:fs+" lazy-load-image-background "+Ln+_s,style:mn(mn({},ys),{},{color:"transparent",display:"inline-block",height:zn,width:cs})},ms),bn)}},{key:"render",value:function(){var bn=this.props,$n=bn.effect,Ln=bn.placeholderSrc,zn=bn.visibleByDefault,Xn=bn.wrapperClassName,cs=bn.wrapperProps,fs=this.getLazyLoadImage();return($n||Ln)&&!zn||Xn||cs?this.getWrappedLazyLoadImage(fs):fs}}])&&Gn(sn.prototype,Nn),ss}(ae().Component);Rn.propTypes={afterLoad:ce.PropTypes.func,beforeLoad:ce.PropTypes.func,delayMethod:ce.PropTypes.string,delayTime:ce.PropTypes.number,effect:ce.PropTypes.string,placeholderSrc:ce.PropTypes.string,threshold:ce.PropTypes.number,useIntersectionObserver:ce.PropTypes.bool,visibleByDefault:ce.PropTypes.bool,wrapperClassName:ce.PropTypes.string,wrapperProps:ce.PropTypes.object},Rn.defaultProps={afterLoad:function(){return{}},beforeLoad:function(){return{}},delayMethod:"throttle",delayTime:300,effect:"",placeholderSrc:null,threshold:100,useIntersectionObserver:!0,visibleByDefault:!1,wrapperClassName:""};const Kn=Rn})(),build.exports=ie})();var buildExports=build.exports;const style$4="_style_1kgb4_216",container$s="_container_1kgb4_226",image="_image_1kgb4_226",smol$1="_smol_1kgb4_234",styles$L={style:style$4,container:container$s,image,smol:smol$1},ImageComponent=({artifactUri:re,displayUri:ee,previewUri:ne,displayView:ie,nft:oe})=>{var me;const[ae,ce]=reactExports.useState(!1),le=useLocalSettings(ge=>ge.imgproxy);let ue;ne?ue=ne:ie?ue=re:le&&((me=oe==null?void 0:oe.teia_meta)!=null&&me.preview_uri)?ue=`https://imgproxy.teia.rocks${oe.teia_meta.preview_uri}`:ue=ee;const he=ge=>{console.error(ge)},fe=({target:ge})=>{const ve=ge.naturalWidth,ye=ge.naturalHeight;ve+ye<256&&ce(!0)};return ie?jsx$1(Fragment,{children:jsx$1(buildExports.LazyLoadImage,{className:`${styles$L.style} ${ae?styles$L.smol:""}`,src:ue,width:600,alt:`object ${oe.token_id} image`,onLoad:fe,onError:he})}):jsx$1("div",{className:styles$L.container,children:jsx$1(buildExports.LazyLoadImage,{className:`${styles$L.image} ${ae?styles$L.smol:""}`,src:ue,width:600,onLoad:fe,alt:`object ${oe.token_id} image`,onError:he})})};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const i$4=(re,ee)=>ee.kind==="method"&&ee.descriptor&&!("value"in ee.descriptor)?{...ee,finisher(ne){ne.createProperty(ee.key,re)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:ee.key,initializer(){typeof ee.initializer=="function"&&(this[ee.key]=ee.initializer.call(this))},finisher(ne){ne.createProperty(ee.key,re)}};function e$4(re){return(ee,ne)=>ne!==void 0?((ie,oe,ae)=>{oe.constructor.createProperty(ae,ie)})(re,ee,ne):i$4(re,ee)}/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var n$6;((n$6=window.HTMLSlotElement)===null||n$6===void 0?void 0:n$6.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const t$3=window,e$3=t$3.ShadowRoot&&(t$3.ShadyCSS===void 0||t$3.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,s$4=Symbol(),n$5=new WeakMap;let o$4=class{constructor(ee,ne,ie){if(this._$cssResult$=!0,ie!==s$4)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=ee,this.t=ne}get styleSheet(){let ee=this.o;const ne=this.t;if(e$3&&ee===void 0){const ie=ne!==void 0&&ne.length===1;ie&&(ee=n$5.get(ne)),ee===void 0&&((this.o=ee=new CSSStyleSheet).replaceSync(this.cssText),ie&&n$5.set(ne,ee))}return ee}toString(){return this.cssText}};const r$4=re=>new o$4(typeof re=="string"?re:re+"",void 0,s$4),S$1=(re,ee)=>{e$3?re.adoptedStyleSheets=ee.map(ne=>ne instanceof CSSStyleSheet?ne:ne.styleSheet):ee.forEach(ne=>{const ie=document.createElement("style"),oe=t$3.litNonce;oe!==void 0&&ie.setAttribute("nonce",oe),ie.textContent=ne.cssText,re.appendChild(ie)})},c$4=e$3?re=>re:re=>re instanceof CSSStyleSheet?(ee=>{let ne="";for(const ie of ee.cssRules)ne+=ie.cssText;return r$4(ne)})(re):re;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var s$3;const e$2=window,r$3=e$2.trustedTypes,h$2=r$3?r$3.emptyScript:"",o$3=e$2.reactiveElementPolyfillSupport,n$4={toAttribute(re,ee){switch(ee){case Boolean:re=re?h$2:null;break;case Object:case Array:re=re==null?re:JSON.stringify(re)}return re},fromAttribute(re,ee){let ne=re;switch(ee){case Boolean:ne=re!==null;break;case Number:ne=re===null?null:Number(re);break;case Object:case Array:try{ne=JSON.parse(re)}catch{ne=null}}return ne}},a$2=(re,ee)=>ee!==re&&(ee==ee||re==re),l$3={attribute:!0,type:String,converter:n$4,reflect:!1,hasChanged:a$2};let d$2=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(ee){var ne;this.finalize(),((ne=this.h)!==null&&ne!==void 0?ne:this.h=[]).push(ee)}static get observedAttributes(){this.finalize();const ee=[];return this.elementProperties.forEach((ne,ie)=>{const oe=this._$Ep(ie,ne);oe!==void 0&&(this._$Ev.set(oe,ie),ee.push(oe))}),ee}static createProperty(ee,ne=l$3){if(ne.state&&(ne.attribute=!1),this.finalize(),this.elementProperties.set(ee,ne),!ne.noAccessor&&!this.prototype.hasOwnProperty(ee)){const ie=typeof ee=="symbol"?Symbol():"__"+ee,oe=this.getPropertyDescriptor(ee,ie,ne);oe!==void 0&&Object.defineProperty(this.prototype,ee,oe)}}static getPropertyDescriptor(ee,ne,ie){return{get(){return this[ne]},set(oe){const ae=this[ee];this[ne]=oe,this.requestUpdate(ee,ae,ie)},configurable:!0,enumerable:!0}}static getPropertyOptions(ee){return this.elementProperties.get(ee)||l$3}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const ee=Object.getPrototypeOf(this);if(ee.finalize(),ee.h!==void 0&&(this.h=[...ee.h]),this.elementProperties=new Map(ee.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const ne=this.properties,ie=[...Object.getOwnPropertyNames(ne),...Object.getOwnPropertySymbols(ne)];for(const oe of ie)this.createProperty(oe,ne[oe])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(ee){const ne=[];if(Array.isArray(ee)){const ie=new Set(ee.flat(1/0).reverse());for(const oe of ie)ne.unshift(c$4(oe))}else ee!==void 0&&ne.push(c$4(ee));return ne}static _$Ep(ee,ne){const ie=ne.attribute;return ie===!1?void 0:typeof ie=="string"?ie:typeof ee=="string"?ee.toLowerCase():void 0}u(){var ee;this._$E_=new Promise(ne=>this.enableUpdating=ne),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(ee=this.constructor.h)===null||ee===void 0||ee.forEach(ne=>ne(this))}addController(ee){var ne,ie;((ne=this._$ES)!==null&&ne!==void 0?ne:this._$ES=[]).push(ee),this.renderRoot!==void 0&&this.isConnected&&((ie=ee.hostConnected)===null||ie===void 0||ie.call(ee))}removeController(ee){var ne;(ne=this._$ES)===null||ne===void 0||ne.splice(this._$ES.indexOf(ee)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((ee,ne)=>{this.hasOwnProperty(ne)&&(this._$Ei.set(ne,this[ne]),delete this[ne])})}createRenderRoot(){var ee;const ne=(ee=this.shadowRoot)!==null&&ee!==void 0?ee:this.attachShadow(this.constructor.shadowRootOptions);return S$1(ne,this.constructor.elementStyles),ne}connectedCallback(){var ee;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(ee=this._$ES)===null||ee===void 0||ee.forEach(ne=>{var ie;return(ie=ne.hostConnected)===null||ie===void 0?void 0:ie.call(ne)})}enableUpdating(ee){}disconnectedCallback(){var ee;(ee=this._$ES)===null||ee===void 0||ee.forEach(ne=>{var ie;return(ie=ne.hostDisconnected)===null||ie===void 0?void 0:ie.call(ne)})}attributeChangedCallback(ee,ne,ie){this._$AK(ee,ie)}_$EO(ee,ne,ie=l$3){var oe;const ae=this.constructor._$Ep(ee,ie);if(ae!==void 0&&ie.reflect===!0){const ce=(((oe=ie.converter)===null||oe===void 0?void 0:oe.toAttribute)!==void 0?ie.converter:n$4).toAttribute(ne,ie.type);this._$El=ee,ce==null?this.removeAttribute(ae):this.setAttribute(ae,ce),this._$El=null}}_$AK(ee,ne){var ie;const oe=this.constructor,ae=oe._$Ev.get(ee);if(ae!==void 0&&this._$El!==ae){const ce=oe.getPropertyOptions(ae),le=typeof ce.converter=="function"?{fromAttribute:ce.converter}:((ie=ce.converter)===null||ie===void 0?void 0:ie.fromAttribute)!==void 0?ce.converter:n$4;this._$El=ae,this[ae]=le.fromAttribute(ne,ce.type),this._$El=null}}requestUpdate(ee,ne,ie){let oe=!0;ee!==void 0&&(((ie=ie||this.constructor.getPropertyOptions(ee)).hasChanged||a$2)(this[ee],ne)?(this._$AL.has(ee)||this._$AL.set(ee,ne),ie.reflect===!0&&this._$El!==ee&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(ee,ie))):oe=!1),!this.isUpdatePending&&oe&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(ne){Promise.reject(ne)}const ee=this.scheduleUpdate();return ee!=null&&await ee,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var ee;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((oe,ae)=>this[ae]=oe),this._$Ei=void 0);let ne=!1;const ie=this._$AL;try{ne=this.shouldUpdate(ie),ne?(this.willUpdate(ie),(ee=this._$ES)===null||ee===void 0||ee.forEach(oe=>{var ae;return(ae=oe.hostUpdate)===null||ae===void 0?void 0:ae.call(oe)}),this.update(ie)):this._$Ek()}catch(oe){throw ne=!1,this._$Ek(),oe}ne&&this._$AE(ie)}willUpdate(ee){}_$AE(ee){var ne;(ne=this._$ES)===null||ne===void 0||ne.forEach(ie=>{var oe;return(oe=ie.hostUpdated)===null||oe===void 0?void 0:oe.call(ie)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(ee)),this.updated(ee)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(ee){return!0}update(ee){this._$EC!==void 0&&(this._$EC.forEach((ne,ie)=>this._$EO(ie,this[ie],ne)),this._$EC=void 0),this._$Ek()}updated(ee){}firstUpdated(ee){}};d$2.finalized=!0,d$2.elementProperties=new Map,d$2.elementStyles=[],d$2.shadowRootOptions={mode:"open"},o$3==null||o$3({ReactiveElement:d$2}),((s$3=e$2.reactiveElementVersions)!==null&&s$3!==void 0?s$3:e$2.reactiveElementVersions=[]).push("1.6.1");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var t$2;const i$3=window,s$2=i$3.trustedTypes,e$1=s$2?s$2.createPolicy("lit-html",{createHTML:re=>re}):void 0,o$2=`lit$${(Math.random()+"").slice(9)}$`,n$3="?"+o$2,l$2=`<${n$3}>`,h$1=document,r$2=(re="")=>h$1.createComment(re),d$1=re=>re===null||typeof re!="object"&&typeof re!="function",u=Array.isArray,c$3=re=>u(re)||typeof(re==null?void 0:re[Symbol.iterator])=="function",v$1=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,a$1=/-->/g,f$1=/>/g,_=RegExp(`>|[ 	
\f\r](?:([^\\s"'>=/]+)([ 	
\f\r]*=[ 	
\f\r]*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),m$3=/'/g,p$3=/"/g,$=/^(?:script|style|textarea|title)$/i,g$2=re=>(ee,...ne)=>({_$litType$:re,strings:ee,values:ne}),y$1=g$2(1),x$4=Symbol.for("lit-noChange"),b$2=Symbol.for("lit-nothing"),T=new WeakMap,A$2=h$1.createTreeWalker(h$1,129,null,!1),E=(re,ee)=>{const ne=re.length-1,ie=[];let oe,ae=ee===2?"<svg>":"",ce=v$1;for(let ue=0;ue<ne;ue++){const he=re[ue];let fe,me,ge=-1,ve=0;for(;ve<he.length&&(ce.lastIndex=ve,me=ce.exec(he),me!==null);)ve=ce.lastIndex,ce===v$1?me[1]==="!--"?ce=a$1:me[1]!==void 0?ce=f$1:me[2]!==void 0?($.test(me[2])&&(oe=RegExp("</"+me[2],"g")),ce=_):me[3]!==void 0&&(ce=_):ce===_?me[0]===">"?(ce=oe??v$1,ge=-1):me[1]===void 0?ge=-2:(ge=ce.lastIndex-me[2].length,fe=me[1],ce=me[3]===void 0?_:me[3]==='"'?p$3:m$3):ce===p$3||ce===m$3?ce=_:ce===a$1||ce===f$1?ce=v$1:(ce=_,oe=void 0);const ye=ce===_&&re[ue+1].startsWith("/>")?" ":"";ae+=ce===v$1?he+l$2:ge>=0?(ie.push(fe),he.slice(0,ge)+"$lit$"+he.slice(ge)+o$2+ye):he+o$2+(ge===-2?(ie.push(void 0),ue):ye)}const le=ae+(re[ne]||"<?>")+(ee===2?"</svg>":"");if(!Array.isArray(re)||!re.hasOwnProperty("raw"))throw Error("invalid template strings array");return[e$1!==void 0?e$1.createHTML(le):le,ie]};let C$1=class wu{constructor({strings:ee,_$litType$:ne},ie){let oe;this.parts=[];let ae=0,ce=0;const le=ee.length-1,ue=this.parts,[he,fe]=E(ee,ne);if(this.el=wu.createElement(he,ie),A$2.currentNode=this.el.content,ne===2){const me=this.el.content,ge=me.firstChild;ge.remove(),me.append(...ge.childNodes)}for(;(oe=A$2.nextNode())!==null&&ue.length<le;){if(oe.nodeType===1){if(oe.hasAttributes()){const me=[];for(const ge of oe.getAttributeNames())if(ge.endsWith("$lit$")||ge.startsWith(o$2)){const ve=fe[ce++];if(me.push(ge),ve!==void 0){const ye=oe.getAttribute(ve.toLowerCase()+"$lit$").split(o$2),be=/([.?@])?(.*)/.exec(ve);ue.push({type:1,index:ae,name:be[2],strings:ye,ctor:be[1]==="."?M$1:be[1]==="?"?k$1:be[1]==="@"?H:S})}else ue.push({type:6,index:ae})}for(const ge of me)oe.removeAttribute(ge)}if($.test(oe.tagName)){const me=oe.textContent.split(o$2),ge=me.length-1;if(ge>0){oe.textContent=s$2?s$2.emptyScript:"";for(let ve=0;ve<ge;ve++)oe.append(me[ve],r$2()),A$2.nextNode(),ue.push({type:2,index:++ae});oe.append(me[ge],r$2())}}}else if(oe.nodeType===8)if(oe.data===n$3)ue.push({type:2,index:ae});else{let me=-1;for(;(me=oe.data.indexOf(o$2,me+1))!==-1;)ue.push({type:7,index:ae}),me+=o$2.length-1}ae++}}static createElement(ee,ne){const ie=h$1.createElement("template");return ie.innerHTML=ee,ie}};function P(re,ee,ne=re,ie){var oe,ae,ce,le;if(ee===x$4)return ee;let ue=ie!==void 0?(oe=ne._$Co)===null||oe===void 0?void 0:oe[ie]:ne._$Cl;const he=d$1(ee)?void 0:ee._$litDirective$;return(ue==null?void 0:ue.constructor)!==he&&((ae=ue==null?void 0:ue._$AO)===null||ae===void 0||ae.call(ue,!1),he===void 0?ue=void 0:(ue=new he(re),ue._$AT(re,ne,ie)),ie!==void 0?((ce=(le=ne)._$Co)!==null&&ce!==void 0?ce:le._$Co=[])[ie]=ue:ne._$Cl=ue),ue!==void 0&&(ee=P(re,ue._$AS(re,ee.values),ue,ie)),ee}class V{constructor(ee,ne){this.u=[],this._$AN=void 0,this._$AD=ee,this._$AM=ne}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(ee){var ne;const{el:{content:ie},parts:oe}=this._$AD,ae=((ne=ee==null?void 0:ee.creationScope)!==null&&ne!==void 0?ne:h$1).importNode(ie,!0);A$2.currentNode=ae;let ce=A$2.nextNode(),le=0,ue=0,he=oe[0];for(;he!==void 0;){if(le===he.index){let fe;he.type===2?fe=new N(ce,ce.nextSibling,this,ee):he.type===1?fe=new he.ctor(ce,he.name,he.strings,this,ee):he.type===6&&(fe=new I$1(ce,this,ee)),this.u.push(fe),he=oe[++ue]}le!==(he==null?void 0:he.index)&&(ce=A$2.nextNode(),le++)}return ae}p(ee){let ne=0;for(const ie of this.u)ie!==void 0&&(ie.strings!==void 0?(ie._$AI(ee,ie,ne),ne+=ie.strings.length-2):ie._$AI(ee[ne])),ne++}}class N{constructor(ee,ne,ie,oe){var ae;this.type=2,this._$AH=b$2,this._$AN=void 0,this._$AA=ee,this._$AB=ne,this._$AM=ie,this.options=oe,this._$Cm=(ae=oe==null?void 0:oe.isConnected)===null||ae===void 0||ae}get _$AU(){var ee,ne;return(ne=(ee=this._$AM)===null||ee===void 0?void 0:ee._$AU)!==null&&ne!==void 0?ne:this._$Cm}get parentNode(){let ee=this._$AA.parentNode;const ne=this._$AM;return ne!==void 0&&ee.nodeType===11&&(ee=ne.parentNode),ee}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(ee,ne=this){ee=P(this,ee,ne),d$1(ee)?ee===b$2||ee==null||ee===""?(this._$AH!==b$2&&this._$AR(),this._$AH=b$2):ee!==this._$AH&&ee!==x$4&&this.g(ee):ee._$litType$!==void 0?this.$(ee):ee.nodeType!==void 0?this.T(ee):c$3(ee)?this.k(ee):this.g(ee)}O(ee,ne=this._$AB){return this._$AA.parentNode.insertBefore(ee,ne)}T(ee){this._$AH!==ee&&(this._$AR(),this._$AH=this.O(ee))}g(ee){this._$AH!==b$2&&d$1(this._$AH)?this._$AA.nextSibling.data=ee:this.T(h$1.createTextNode(ee)),this._$AH=ee}$(ee){var ne;const{values:ie,_$litType$:oe}=ee,ae=typeof oe=="number"?this._$AC(ee):(oe.el===void 0&&(oe.el=C$1.createElement(oe.h,this.options)),oe);if(((ne=this._$AH)===null||ne===void 0?void 0:ne._$AD)===ae)this._$AH.p(ie);else{const ce=new V(ae,this),le=ce.v(this.options);ce.p(ie),this.T(le),this._$AH=ce}}_$AC(ee){let ne=T.get(ee.strings);return ne===void 0&&T.set(ee.strings,ne=new C$1(ee)),ne}k(ee){u(this._$AH)||(this._$AH=[],this._$AR());const ne=this._$AH;let ie,oe=0;for(const ae of ee)oe===ne.length?ne.push(ie=new N(this.O(r$2()),this.O(r$2()),this,this.options)):ie=ne[oe],ie._$AI(ae),oe++;oe<ne.length&&(this._$AR(ie&&ie._$AB.nextSibling,oe),ne.length=oe)}_$AR(ee=this._$AA.nextSibling,ne){var ie;for((ie=this._$AP)===null||ie===void 0||ie.call(this,!1,!0,ne);ee&&ee!==this._$AB;){const oe=ee.nextSibling;ee.remove(),ee=oe}}setConnected(ee){var ne;this._$AM===void 0&&(this._$Cm=ee,(ne=this._$AP)===null||ne===void 0||ne.call(this,ee))}}class S{constructor(ee,ne,ie,oe,ae){this.type=1,this._$AH=b$2,this._$AN=void 0,this.element=ee,this.name=ne,this._$AM=oe,this.options=ae,ie.length>2||ie[0]!==""||ie[1]!==""?(this._$AH=Array(ie.length-1).fill(new String),this.strings=ie):this._$AH=b$2}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(ee,ne=this,ie,oe){const ae=this.strings;let ce=!1;if(ae===void 0)ee=P(this,ee,ne,0),ce=!d$1(ee)||ee!==this._$AH&&ee!==x$4,ce&&(this._$AH=ee);else{const le=ee;let ue,he;for(ee=ae[0],ue=0;ue<ae.length-1;ue++)he=P(this,le[ie+ue],ne,ue),he===x$4&&(he=this._$AH[ue]),ce||(ce=!d$1(he)||he!==this._$AH[ue]),he===b$2?ee=b$2:ee!==b$2&&(ee+=(he??"")+ae[ue+1]),this._$AH[ue]=he}ce&&!oe&&this.j(ee)}j(ee){ee===b$2?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,ee??"")}}let M$1=class extends S{constructor(){super(...arguments),this.type=3}j(ee){this.element[this.name]=ee===b$2?void 0:ee}};const R=s$2?s$2.emptyScript:"";let k$1=class extends S{constructor(){super(...arguments),this.type=4}j(ee){ee&&ee!==b$2?this.element.setAttribute(this.name,R):this.element.removeAttribute(this.name)}};class H extends S{constructor(ee,ne,ie,oe,ae){super(ee,ne,ie,oe,ae),this.type=5}_$AI(ee,ne=this){var ie;if((ee=(ie=P(this,ee,ne,0))!==null&&ie!==void 0?ie:b$2)===x$4)return;const oe=this._$AH,ae=ee===b$2&&oe!==b$2||ee.capture!==oe.capture||ee.once!==oe.once||ee.passive!==oe.passive,ce=ee!==b$2&&(oe===b$2||ae);ae&&this.element.removeEventListener(this.name,this,oe),ce&&this.element.addEventListener(this.name,this,ee),this._$AH=ee}handleEvent(ee){var ne,ie;typeof this._$AH=="function"?this._$AH.call((ie=(ne=this.options)===null||ne===void 0?void 0:ne.host)!==null&&ie!==void 0?ie:this.element,ee):this._$AH.handleEvent(ee)}}let I$1=class{constructor(ee,ne,ie){this.element=ee,this.type=6,this._$AN=void 0,this._$AM=ne,this.options=ie}get _$AU(){return this._$AM._$AU}_$AI(ee){P(this,ee)}};const z$1=i$3.litHtmlPolyfillSupport;z$1==null||z$1(C$1,N),((t$2=i$3.litHtmlVersions)!==null&&t$2!==void 0?t$2:i$3.litHtmlVersions=[]).push("2.6.1");const Z=(re,ee,ne)=>{var ie,oe;const ae=(ie=ne==null?void 0:ne.renderBefore)!==null&&ie!==void 0?ie:ee;let ce=ae._$litPart$;if(ce===void 0){const le=(oe=ne==null?void 0:ne.renderBefore)!==null&&oe!==void 0?oe:null;ae._$litPart$=ce=new N(ee.insertBefore(r$2(),le),le,void 0,ne??{})}return ce._$AI(re),ce};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var l$1,o$1;let s$1=class extends d$2{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var ee,ne;const ie=super.createRenderRoot();return(ee=(ne=this.renderOptions).renderBefore)!==null&&ee!==void 0||(ne.renderBefore=ie.firstChild),ie}update(ee){const ne=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(ee),this._$Do=Z(ne,this.renderRoot,this.renderOptions)}connectedCallback(){var ee;super.connectedCallback(),(ee=this._$Do)===null||ee===void 0||ee.setConnected(!0)}disconnectedCallback(){var ee;super.disconnectedCallback(),(ee=this._$Do)===null||ee===void 0||ee.setConnected(!1)}render(){return x$4}};s$1.finalized=!0,s$1._$litElement$=!0,(l$1=globalThis.litElementHydrateSupport)===null||l$1===void 0||l$1.call(globalThis,{LitElement:s$1});const n$2=globalThis.litElementPolyfillSupport;n$2==null||n$2({LitElement:s$1});((o$1=globalThis.litElementVersions)!==null&&o$1!==void 0?o$1:globalThis.litElementVersions=[]).push("3.2.2");/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HAS_WEBXR_DEVICE_API=navigator.xr!=null&&self.XRSession!=null&&navigator.xr.isSessionSupported!=null,HAS_WEBXR_HIT_TEST_API=HAS_WEBXR_DEVICE_API&&self.XRSession.prototype.requestHitTestSource!=null,HAS_RESIZE_OBSERVER=self.ResizeObserver!=null,HAS_INTERSECTION_OBSERVER=self.IntersectionObserver!=null,IS_WEBXR_AR_CANDIDATE=HAS_WEBXR_HIT_TEST_API;(()=>{const re=navigator.userAgent||navigator.vendor||self.opera;let ee=!1;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(re)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(re.substr(0,4)))&&(ee=!0),ee})();const IS_ANDROID=/android/i.test(navigator.userAgent),IS_IOS=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!self.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,IS_FIREFOX=/firefox/i.test(navigator.userAgent),IS_OCULUS=/OculusBrowser/.test(navigator.userAgent),IS_SCENEVIEWER_CANDIDATE=IS_ANDROID&&!IS_FIREFOX&&!IS_OCULUS,IS_WKWEBVIEW=!!(window.webkit&&window.webkit.messageHandlers),IS_AR_QUICKLOOK_CANDIDATE=(()=>{if(IS_IOS){if(IS_WKWEBVIEW)return!!/CriOS\/|EdgiOS\/|FxiOS\/|GSA\/|DuckDuckGo\//.test(navigator.userAgent);{const re=document.createElement("a");return!!(re.relList&&re.relList.supports&&re.relList.supports("ar"))}}else return!1})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const deserializeUrl=re=>re&&re!=="null"?toFullUrl(re):null,assertIsArCandidate=()=>{if(IS_WEBXR_AR_CANDIDATE)return;const re=[];throw HAS_WEBXR_DEVICE_API||re.push("WebXR Device API"),HAS_WEBXR_HIT_TEST_API||re.push("WebXR Hit Test API"),new Error(`The following APIs are required for AR, but are missing in this browser: ${re.join(", ")}`)},toFullUrl=re=>new URL(re,window.location.toString()).toString(),throttle=(re,ee)=>{let ne=null;const ie=(...oe)=>{ne==null&&(re(...oe),ne=self.setTimeout(()=>ne=null,ee))};return ie.flush=()=>{ne!=null&&(self.clearTimeout(ne),ne=null)},ie},debounce$1=(re,ee)=>{let ne=null;return(...ie)=>{ne!=null&&self.clearTimeout(ne),ne=self.setTimeout(()=>{ne=null,re(...ie)},ee)}},clamp$2=(re,ee,ne)=>Math.max(ee,Math.min(ne,re)),CAPPED_DEVICE_PIXEL_RATIO=1,resolveDpr=(()=>{const re=(()=>{var ee;if(!((ee=document.documentElement.getAttribute("itemtype"))===null||ee===void 0)&&ee.includes("schema.org/SearchResultsPage"))return!0;const ne=document.head!=null?Array.from(document.head.querySelectorAll("meta")):[];for(const ie of ne)if(ie.name==="viewport")return!0;return!1})();return re||console.warn('No <meta name="viewport"> detected; <model-viewer> will cap pixel density at 1.'),()=>re?window.devicePixelRatio:CAPPED_DEVICE_PIXEL_RATIO})(),isDebugMode=(()=>{const re="model-viewer-debug-mode",ee=new RegExp(`[?&]${re}(&|$)`);return()=>self.ModelViewerElement&&self.ModelViewerElement.debugMode||self.location&&self.location.search&&self.location.search.match(ee)})(),timePasses=(re=0)=>new Promise(ee=>setTimeout(ee,re)),waitForEvent=(re,ee,ne=null)=>new Promise(ie=>{function oe(ae){(!ne||ne(ae))&&(ie(ae),re.removeEventListener(ee,oe))}re.addEventListener(ee,oe)});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$7=globalThis&&globalThis.__decorate||function(re,ee,ne,ie){var oe=arguments.length,ae=oe<3?ee:ie===null?ie=Object.getOwnPropertyDescriptor(ee,ne):ie,ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ae=Reflect.decorate(re,ee,ne,ie);else for(var le=re.length-1;le>=0;le--)(ce=re[le])&&(ae=(oe<3?ce(ae):oe>3?ce(ee,ne,ae):ce(ee,ne))||ae);return oe>3&&ae&&Object.defineProperty(ee,ne,ae),ae};const BASE_OPACITY=.5,DEFAULT_SHADOW_INTENSITY=0,DEFAULT_SHADOW_SOFTNESS=1,DEFAULT_EXPOSURE=1,$currentEnvironmentMap=Symbol("currentEnvironmentMap"),$currentBackground=Symbol("currentBackground"),$updateEnvironment=Symbol("updateEnvironment"),$cancelEnvironmentUpdate=Symbol("cancelEnvironmentUpdate"),EnvironmentMixin=re=>{var ee,ne,ie;class oe extends re{constructor(){super(...arguments),this.environmentImage=null,this.skyboxImage=null,this.shadowIntensity=DEFAULT_SHADOW_INTENSITY,this.shadowSoftness=DEFAULT_SHADOW_SOFTNESS,this.exposure=DEFAULT_EXPOSURE,this[ee]=null,this[ne]=null,this[ie]=null}updated(ce){super.updated(ce),ce.has("shadowIntensity")&&(this[$scene].setShadowIntensity(this.shadowIntensity*BASE_OPACITY),this[$needsRender]()),ce.has("shadowSoftness")&&(this[$scene].setShadowSoftness(this.shadowSoftness),this[$needsRender]()),ce.has("exposure")&&(this[$scene].exposure=this.exposure,this[$needsRender]()),(ce.has("environmentImage")||ce.has("skyboxImage"))&&this[$shouldAttemptPreload]()&&this[$updateEnvironment]()}hasBakedShadow(){return this[$scene].bakedShadows.size>0}async[(ee=$currentEnvironmentMap,ne=$currentBackground,ie=$cancelEnvironmentUpdate,$updateEnvironment)](){const{skyboxImage:ce,environmentImage:le}=this;this[$cancelEnvironmentUpdate]!=null&&(this[$cancelEnvironmentUpdate](),this[$cancelEnvironmentUpdate]=null);const{textureUtils:ue}=this[$renderer];if(ue==null)return;const he=this[$progressTracker].beginActivity();try{const{environmentMap:fe,skybox:me}=await ue.generateEnvironmentMapAndSkybox(deserializeUrl(ce),le,ge=>he(clamp$2(ge,0,1)));this[$currentEnvironmentMap]!==fe&&(this[$currentEnvironmentMap]=fe,this.dispatchEvent(new CustomEvent("environment-change"))),me!=null?this[$currentBackground]=me.name===fe.name?fe:me:this[$currentBackground]=null,this[$scene].setEnvironmentAndSkybox(this[$currentEnvironmentMap],this[$currentBackground]),this[$scene].dispatchEvent({type:"envmap-update"})}catch(fe){if(fe instanceof Error)throw this[$scene].setEnvironmentAndSkybox(null,null),fe}finally{he(1)}}}return __decorate$7([e$4({type:String,attribute:"environment-image"})],oe.prototype,"environmentImage",void 0),__decorate$7([e$4({type:String,attribute:"skybox-image"})],oe.prototype,"skyboxImage",void 0),__decorate$7([e$4({type:Number,attribute:"shadow-intensity"})],oe.prototype,"shadowIntensity",void 0),__decorate$7([e$4({type:Number,attribute:"shadow-softness"})],oe.prototype,"shadowSoftness",void 0),__decorate$7([e$4({type:Number})],oe.prototype,"exposure",void 0),oe};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CloseIcon=y$1`
<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000">
    <!-- NOTE(cdata): This SVG filter is a stop-gap until we can implement
         support for dynamic re-coloring of UI components -->
    <defs>
      <filter id="drop-shadow" x="-100%" y="-100%" width="300%" height="300%">
        <feGaussianBlur in="SourceAlpha" stdDeviation="1"/>
        <feOffset dx="0" dy="0" result="offsetblur"/>
        <feFlood flood-color="#000000"/>
        <feComposite in2="offsetblur" operator="in"/>
        <feMerge>
          <feMergeNode/>
          <feMergeNode in="SourceGraphic"/>
        </feMerge>
      </filter>
    </defs>
    <path filter="url(#drop-shadow)" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ControlsPrompt=y$1`
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="25" height="36">
    <defs>
        <path id="A" d="M.001.232h24.997V36H.001z" />
    </defs>
    <g transform="translate(-11 -4)" fill="none" fill-rule="evenodd">
        <path fill-opacity="0" fill="#fff" d="M0 0h44v44H0z" />
        <g transform="translate(11 3)">
            <path d="M8.733 11.165c.04-1.108.766-2.027 1.743-2.307a2.54 2.54 0 0 1 .628-.089c.16 0 .314.017.463.044 1.088.2 1.9 1.092 1.9 2.16v8.88h1.26c2.943-1.39 5-4.45 5-8.025a9.01 9.01 0 0 0-1.9-5.56l-.43-.5c-.765-.838-1.683-1.522-2.712-2-1.057-.49-2.226-.77-3.46-.77s-2.4.278-3.46.77c-1.03.478-1.947 1.162-2.71 2l-.43.5a9.01 9.01 0 0 0-1.9 5.56 9.04 9.04 0 0 0 .094 1.305c.03.21.088.41.13.617l.136.624c.083.286.196.56.305.832l.124.333a8.78 8.78 0 0 0 .509.953l.065.122a8.69 8.69 0 0 0 3.521 3.191l1.11.537v-9.178z" fill-opacity=".5" fill="#e4e4e4" />
            <path d="M22.94 26.218l-2.76 7.74c-.172.485-.676.8-1.253.8H12.24c-1.606 0-3.092-.68-3.98-1.82-1.592-2.048-3.647-3.822-6.11-5.27-.095-.055-.15-.137-.152-.23-.004-.1.046-.196.193-.297.56-.393 1.234-.6 1.926-.6a3.43 3.43 0 0 1 .691.069l4.922.994V10.972c0-.663.615-1.203 1.37-1.203s1.373.54 1.373 1.203v9.882h2.953c.273 0 .533.073.757.21l6.257 3.874c.027.017.045.042.07.06.41.296.586.77.426 1.22M4.1 16.614c-.024-.04-.042-.083-.065-.122a8.69 8.69 0 0 1-.509-.953c-.048-.107-.08-.223-.124-.333l-.305-.832c-.058-.202-.09-.416-.136-.624l-.13-.617a9.03 9.03 0 0 1-.094-1.305c0-2.107.714-4.04 1.9-5.56l.43-.5c.764-.84 1.682-1.523 2.71-2 1.058-.49 2.226-.77 3.46-.77s2.402.28 3.46.77c1.03.477 1.947 1.16 2.712 2l.428.5a9 9 0 0 1 1.901 5.559c0 3.577-2.056 6.636-5 8.026h-1.26v-8.882c0-1.067-.822-1.96-1.9-2.16-.15-.028-.304-.044-.463-.044-.22 0-.427.037-.628.09-.977.28-1.703 1.198-1.743 2.306v9.178l-1.11-.537C6.18 19.098 4.96 18 4.1 16.614M22.97 24.09l-6.256-3.874c-.102-.063-.218-.098-.33-.144 2.683-1.8 4.354-4.855 4.354-8.243 0-.486-.037-.964-.104-1.43a9.97 9.97 0 0 0-1.57-4.128l-.295-.408-.066-.092a10.05 10.05 0 0 0-.949-1.078c-.342-.334-.708-.643-1.094-.922-1.155-.834-2.492-1.412-3.94-1.65l-.732-.088-.748-.03a9.29 9.29 0 0 0-1.482.119c-1.447.238-2.786.816-3.94 1.65a9.33 9.33 0 0 0-.813.686 9.59 9.59 0 0 0-.845.877l-.385.437-.36.5-.288.468-.418.778-.04.09c-.593 1.28-.93 2.71-.93 4.222 0 3.832 2.182 7.342 5.56 8.938l1.437.68v4.946L5 25.64a4.44 4.44 0 0 0-.888-.086c-.017 0-.034.003-.05.003-.252.004-.503.033-.75.08a5.08 5.08 0 0 0-.237.056c-.193.046-.382.107-.568.18-.075.03-.15.057-.225.1-.25.114-.494.244-.723.405a1.31 1.31 0 0 0-.566 1.122 1.28 1.28 0 0 0 .645 1.051C4 29.925 5.96 31.614 7.473 33.563a5.06 5.06 0 0 0 .434.491c1.086 1.082 2.656 1.713 4.326 1.715h6.697c.748-.001 1.43-.333 1.858-.872.142-.18.256-.38.336-.602l2.757-7.74c.094-.26.13-.53.112-.794s-.088-.52-.203-.76a2.19 2.19 0 0 0-.821-.91" fill-opacity=".6" fill="#000" />
            <path d="M22.444 24.94l-6.257-3.874a1.45 1.45 0 0 0-.757-.211h-2.953v-9.88c0-.663-.616-1.203-1.373-1.203s-1.37.54-1.37 1.203v16.643l-4.922-.994a3.44 3.44 0 0 0-.692-.069 3.35 3.35 0 0 0-1.925.598c-.147.102-.198.198-.194.298.004.094.058.176.153.23 2.462 1.448 4.517 3.22 6.11 5.27.887 1.14 2.373 1.82 3.98 1.82h6.686c.577 0 1.08-.326 1.253-.8l2.76-7.74c.16-.448-.017-.923-.426-1.22-.025-.02-.043-.043-.07-.06z" fill="#fff" />
            <g transform="translate(0 .769)">
                <mask id="B" fill="#fff">
                    <use xlink:href="#A" />
                </mask>
                <path d="M23.993 24.992a1.96 1.96 0 0 1-.111.794l-2.758 7.74c-.08.22-.194.423-.336.602-.427.54-1.11.87-1.857.872h-6.698c-1.67-.002-3.24-.633-4.326-1.715-.154-.154-.3-.318-.434-.49C5.96 30.846 4 29.157 1.646 27.773c-.385-.225-.626-.618-.645-1.05a1.31 1.31 0 0 1 .566-1.122 4.56 4.56 0 0 1 .723-.405l.225-.1a4.3 4.3 0 0 1 .568-.18l.237-.056c.248-.046.5-.075.75-.08.018 0 .034-.003.05-.003.303-.001.597.027.89.086l3.722.752V20.68l-1.436-.68c-3.377-1.596-5.56-5.106-5.56-8.938 0-1.51.336-2.94.93-4.222.015-.03.025-.06.04-.09.127-.267.268-.525.418-.778.093-.16.186-.316.288-.468.063-.095.133-.186.2-.277L3.773 5c.118-.155.26-.29.385-.437.266-.3.544-.604.845-.877a9.33 9.33 0 0 1 .813-.686C6.97 2.167 8.31 1.59 9.757 1.35a9.27 9.27 0 0 1 1.481-.119 8.82 8.82 0 0 1 .748.031c.247.02.49.05.733.088 1.448.238 2.786.816 3.94 1.65.387.28.752.588 1.094.922a9.94 9.94 0 0 1 .949 1.078l.066.092c.102.133.203.268.295.408a9.97 9.97 0 0 1 1.571 4.128c.066.467.103.945.103 1.43 0 3.388-1.67 6.453-4.353 8.243.11.046.227.08.33.144l6.256 3.874c.37.23.645.55.82.9.115.24.185.498.203.76m.697-1.195c-.265-.55-.677-1.007-1.194-1.326l-5.323-3.297c2.255-2.037 3.564-4.97 3.564-8.114 0-2.19-.637-4.304-1.84-6.114-.126-.188-.26-.37-.4-.552-.645-.848-1.402-1.6-2.252-2.204C15.472.91 13.393.232 11.238.232A10.21 10.21 0 0 0 5.23 2.19c-.848.614-1.606 1.356-2.253 2.205-.136.18-.272.363-.398.55C1.374 6.756.737 8.87.737 11.06c0 4.218 2.407 8.08 6.133 9.842l.863.41v3.092l-2.525-.51c-.356-.07-.717-.106-1.076-.106a5.45 5.45 0 0 0-3.14.996c-.653.46-1.022 1.202-.99 1.983a2.28 2.28 0 0 0 1.138 1.872c2.24 1.318 4.106 2.923 5.543 4.772 1.26 1.62 3.333 2.59 5.55 2.592h6.698c1.42-.001 2.68-.86 3.134-2.138l2.76-7.74c.272-.757.224-1.584-.134-2.325" fill-opacity=".05" fill="#000" mask="url(#B)" />
            </g>
        </g>
    </g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ARGlyph=y$1`
<svg version="1.1" id="view_x5F_in_x5F_AR_x5F_icon"
	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="24px" height="24px"
	 viewBox="0 0 24 24" enable-background="new 0 0 24 24" xml:space="preserve">
<rect id="Bounding_Box" x="0" y="0" fill="none" width="24" height="24"/>
<g id="Art_layer">
	<path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.35,1,1,2.35,1,4v2h2V4z"/>
	<path d="M20,3c0.55,0,1,0.45,1,1v2h2V4c0-1.65-1.35-3-3-3h-2v2H20z"/>
	<path d="M4,21c-0.55,0-1-0.45-1-1v-2H1v2c0,1.65,1.35,3,3,3h2v-2H4z"/>
	<path d="M20,21c0.55,0,1-0.45,1-1v-2h2v2c0,1.65-1.35,3-3,3h-2v-2H20z"/>
	<g>
		<path d="M18.25,7.6l-5.5-3.18c-0.46-0.27-1.04-0.27-1.5,0L5.75,7.6C5.29,7.87,5,8.36,5,8.9v6.35c0,0.54,0.29,1.03,0.75,1.3
			l5.5,3.18c0.46,0.27,1.04,0.27,1.5,0l5.5-3.18c0.46-0.27,0.75-0.76,0.75-1.3V8.9C19,8.36,18.71,7.87,18.25,7.6z M7,14.96v-4.62
			l4,2.32v4.61L7,14.96z M12,10.93L8,8.61l4-2.31l4,2.31L12,10.93z M13,17.27v-4.61l4-2.32v4.62L13,17.27z"/>
	</g>
</g>
</svg>`;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const templateResult=y$1`
<style>
:host {
  display: block;
  position: relative;
  contain: strict;
  width: 300px;
  height: 150px;
}

/* NOTE: This rule set is our integration surface area with the
 * :focus-visible polyfill.
 *
 * @see https://github.com/WICG/focus-visible/pull/196 */
:host([data-js-focus-visible]:focus:not(.focus-visible)),
:host([data-js-focus-visible]) :focus:not(.focus-visible) {
  outline: none;
}

.container {
  position: relative;
  overflow: hidden;
}

.userInput {
  width: 100%;
  height: 100%;
  display: none;
  position: relative;
}

canvas {
  position: absolute;
  display: none;
  pointer-events: none;
  /* NOTE(cdata): Chrome 76 and below apparently have a bug
   * that causes our canvas not to display pixels unless it is
   * on its own render layer
   * @see https://github.com/google/model-viewer/pull/755#issuecomment-536597893
   */
  transform: translateZ(0);
}

.show {
  display: block;
}

/* Adapted from HTML5 Boilerplate
 *
 * @see https://github.com/h5bp/html5-boilerplate/blob/ceb4620c78fc82e13534fc44202a3f168754873f/dist/css/main.css#L122-L133 */
.screen-reader-only {
  border: 0;
  left: 0;
  top: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  white-space: nowrap;
  width: 1px;
  pointer-events: none;
}

.slot {
  position: absolute;
  pointer-events: none;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

.slot > * {
  pointer-events: initial;
}

.annotation-wrapper ::slotted(*) {
  opacity: var(--max-hotspot-opacity, 1);
  transition: opacity 0.3s;
}

.pointer-tumbling .annotation-wrapper ::slotted(*) {
  pointer-events: none;
}

.annotation-wrapper ::slotted(*) {
  pointer-events: initial;
}

.annotation-wrapper.hide ::slotted(*) {
  opacity: var(--min-hotspot-opacity, 0.25);
}

.slot.poster {
  display: none;
  background-color: inherit;
}

.slot.poster.show {
  display: inherit;
}

.slot.poster > * {
  pointer-events: initial;
}

.slot.poster:not(.show) > * {
  pointer-events: none;
}

#default-poster {
  width: 100%;
  height: 100%;
  /* The default poster is a <button> so we need to set display
   * to prevent it from being affected by text-align: */
  display: block;
  position: absolute;
  border: none;
  padding: 0;
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  background-color: #fff0;
}

#default-progress-bar {
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  pointer-events: none;
  overflow: hidden;
}

#default-progress-bar > .bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--progress-bar-height, 5px);
  background-color: var(--progress-bar-color, rgba(0, 0, 0, 0.4));
  transition: transform 0.09s;
  transform-origin: top left;
  transform: scaleX(0);
  overflow: hidden;
}

#default-progress-bar > .bar.hide {
  transition: opacity 0.3s 1s;
  opacity: 0;
}

.centered {
  align-items: center;
  justify-content: center;
}

.cover {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
}

.slot.interaction-prompt {
  display: var(--interaction-prompt-display, flex);
  overflow: hidden;
  opacity: 0;
  will-change: opacity;
  transition: opacity 0.3s;
}

.slot.interaction-prompt.visible {
  opacity: 1;
}

.animated-container {
  will-change: transform, opacity;
  opacity: 0;
  transition: opacity 0.3s;
}

.slot.interaction-prompt > * {
  pointer-events: none;
}

.slot.ar-button {
  -moz-user-select: none;
  -webkit-tap-highlight-color: transparent;
  user-select: none;

  display: var(--ar-button-display, block);
}

.slot.ar-button:not(.enabled) {
  display: none;
}

.fab {
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  width: 40px;
  height: 40px;
  cursor: pointer;
  background-color: #fff;
  box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.15);
  border-radius: 100px;
}

.fab > * {
  opacity: 0.87;
}

#default-ar-button {
  position: absolute;
  bottom: 16px;
  right: 16px;
  transform: scale(var(--ar-button-scale, 1));
  transform-origin: bottom right;
}

.slot.pan-target {
  display: block;
  position: absolute;
  width: 0;
  height: 0;
  left: 50%;
  top: 50%;
  transform: translate3d(-50%, -50%, 0);
  background-color: transparent;
  opacity: 0;
  transition: opacity 0.3s;
}

#default-pan-target {
  width: 6px;
  height: 6px;
  border-radius: 6px;
  border: 1px solid white;
  box-shadow: 0px 0px 2px 1px rgba(0, 0, 0, 0.8);
}

.slot.default {
  pointer-events: none;
}

.slot.progress-bar {
  pointer-events: none;
}

.slot.exit-webxr-ar-button {
  pointer-events: none;
}

.slot.exit-webxr-ar-button:not(.enabled) {
  display: none;
}

#default-exit-webxr-ar-button {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  top: env(safe-area-inset-top, 16px);
  right: 16px;
  width: 40px;
  height: 40px;
  box-sizing: border-box;
}

#default-exit-webxr-ar-button > svg {
  fill: #fff;
}
</style>
<div class="container">
  <div class="userInput" tabindex="0" role="img"
      aria-label="3D model">
      <div class="slot canvas">
        <slot name="canvas">
          <canvas></canvas>
        </slot>
      </div>

  </div>

  <!-- NOTE(cdata): We need to wrap slots because browsers without ShadowDOM
        will have their <slot> elements removed by ShadyCSS -->
  <div class="slot poster">
    <slot name="poster">
      <button type="button" id="default-poster" aria-hidden="true" aria-label="Loading 3D model"></button>
    </slot>
  </div>

  <div class="slot ar-button">
    <slot name="ar-button">
      <a id="default-ar-button" part="default-ar-button" class="fab"
          tabindex="2"
          aria-label="View in your space">
        ${ARGlyph}
      </a>
    </slot>
  </div>

  <div class="slot pan-target">
    <slot name="pan-target">
      <div id="default-pan-target">
      </div>
    </slot>
  </div>

  <div class="slot interaction-prompt cover centered">
    <div id="prompt" class="animated-container">
      <slot name="interaction-prompt" aria-hidden="true">
        ${ControlsPrompt}
      </slot>
    </div>
  </div>

  <div id="finger0" class="animated-container cover">
    <slot name="finger0" aria-hidden="true">
    </slot>
  </div>
  <div id="finger1" class="animated-container cover">
    <slot name="finger1" aria-hidden="true">
    </slot>
  </div>

  <div class="slot default">
    <slot></slot>

    <div class="slot progress-bar">
      <slot name="progress-bar">
        <div id="default-progress-bar" aria-hidden="true">
          <div class="bar" part="default-progress-bar"></div>
        </div>
      </slot>
    </div>

    <div class="slot exit-webxr-ar-button">
      <slot name="exit-webxr-ar-button">
        <a id="default-exit-webxr-ar-button" part="default-exit-webxr-ar-button"
            tabindex="3"
            aria-label="Exit AR"
            aria-hidden="true">
          ${CloseIcon}
        </a>
      </slot>
    </div>
  </div>
</div>
<div class="screen-reader-only" role="region" aria-label="Live announcements">
  <span id="status" role="status"></span>
</div>`,makeTemplate=re=>{Z(templateResult,re)},_taskCache$1=new WeakMap;class DRACOLoader extends Loader{constructor(ee){super(ee),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(ee){return this.decoderPath=ee,this}setDecoderConfig(ee){return this.decoderConfig=ee,this}setWorkerLimit(ee){return this.workerLimit=ee,this}load(ee,ne,ie,oe){const ae=new FileLoader(this.manager);ae.setPath(this.path),ae.setResponseType("arraybuffer"),ae.setRequestHeader(this.requestHeader),ae.setWithCredentials(this.withCredentials),ae.load(ee,ce=>{this.decodeDracoFile(ce,ne).catch(oe)},ie,oe)}decodeDracoFile(ee,ne,ie,oe){const ae={attributeIDs:ie||this.defaultAttributeIDs,attributeTypes:oe||this.defaultAttributeTypes,useUniqueIDs:!!ie};return this.decodeGeometry(ee,ae).then(ne)}decodeGeometry(ee,ne){const ie=JSON.stringify(ne);if(_taskCache$1.has(ee)){const ue=_taskCache$1.get(ee);if(ue.key===ie)return ue.promise;if(ee.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let oe;const ae=this.workerNextTaskID++,ce=ee.byteLength,le=this._getWorker(ae,ce).then(ue=>(oe=ue,new Promise((he,fe)=>{oe._callbacks[ae]={resolve:he,reject:fe},oe.postMessage({type:"decode",id:ae,taskConfig:ne,buffer:ee},[ee])}))).then(ue=>this._createGeometry(ue.geometry));return le.catch(()=>!0).then(()=>{oe&&ae&&this._releaseTask(oe,ae)}),_taskCache$1.set(ee,{key:ie,promise:le}),le}_createGeometry(ee){const ne=new BufferGeometry;ee.index&&ne.setIndex(new BufferAttribute(ee.index.array,1));for(let ie=0;ie<ee.attributes.length;ie++){const oe=ee.attributes[ie],ae=oe.name,ce=oe.array,le=oe.itemSize;ne.setAttribute(ae,new BufferAttribute(ce,le))}return ne}_loadLibrary(ee,ne){const ie=new FileLoader(this.manager);return ie.setPath(this.decoderPath),ie.setResponseType(ne),ie.setWithCredentials(this.withCredentials),new Promise((oe,ae)=>{ie.load(ee,oe,void 0,ae)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const ee=typeof WebAssembly!="object"||this.decoderConfig.type==="js",ne=[];return ee?ne.push(this._loadLibrary("draco_decoder.js","text")):(ne.push(this._loadLibrary("draco_wasm_wrapper.js","text")),ne.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(ne).then(ie=>{const oe=ie[0];ee||(this.decoderConfig.wasmBinary=ie[1]);const ae=DRACOWorker.toString(),ce=["/* draco decoder */",oe,"","/* worker */",ae.substring(ae.indexOf("{")+1,ae.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([ce]))}),this.decoderPending}_getWorker(ee,ne){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const oe=new Worker(this.workerSourceURL);oe._callbacks={},oe._taskCosts={},oe._taskLoad=0,oe.postMessage({type:"init",decoderConfig:this.decoderConfig}),oe.onmessage=function(ae){const ce=ae.data;switch(ce.type){case"decode":oe._callbacks[ce.id].resolve(ce);break;case"error":oe._callbacks[ce.id].reject(ce);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+ce.type+'"')}},this.workerPool.push(oe)}else this.workerPool.sort(function(oe,ae){return oe._taskLoad>ae._taskLoad?-1:1});const ie=this.workerPool[this.workerPool.length-1];return ie._taskCosts[ee]=ne,ie._taskLoad+=ne,ie})}_releaseTask(ee,ne){ee._taskLoad-=ee._taskCosts[ne],delete ee._callbacks[ne],delete ee._taskCosts[ne]}debug(){console.log("Task load: ",this.workerPool.map(ee=>ee._taskLoad))}dispose(){for(let ee=0;ee<this.workerPool.length;++ee)this.workerPool[ee].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function DRACOWorker(){let re,ee;onmessage=function(ce){const le=ce.data;switch(le.type){case"init":re=le.decoderConfig,ee=new Promise(function(fe){re.onModuleLoaded=function(me){fe({draco:me})},DracoDecoderModule(re)});break;case"decode":const ue=le.buffer,he=le.taskConfig;ee.then(fe=>{const me=fe.draco,ge=new me.Decoder,ve=new me.DecoderBuffer;ve.Init(new Int8Array(ue),ue.byteLength);try{const ye=ne(me,ge,ve,he),be=ye.attributes.map(Ce=>Ce.array.buffer);ye.index&&be.push(ye.index.array.buffer),self.postMessage({type:"decode",id:le.id,geometry:ye},be)}catch(ye){console.error(ye),self.postMessage({type:"error",id:le.id,error:ye.message})}finally{me.destroy(ve),me.destroy(ge)}});break}};function ne(ce,le,ue,he){const fe=he.attributeIDs,me=he.attributeTypes;let ge,ve;const ye=le.GetEncodedGeometryType(ue);if(ye===ce.TRIANGULAR_MESH)ge=new ce.Mesh,ve=le.DecodeBufferToMesh(ue,ge);else if(ye===ce.POINT_CLOUD)ge=new ce.PointCloud,ve=le.DecodeBufferToPointCloud(ue,ge);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!ve.ok()||ge.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+ve.error_msg());const be={index:null,attributes:[]};for(const Ce in fe){const Se=self[me[Ce]];let $e,Te;if(he.useUniqueIDs)Te=fe[Ce],$e=le.GetAttributeByUniqueId(ge,Te);else{if(Te=le.GetAttributeId(ge,ce[fe[Ce]]),Te===-1)continue;$e=le.GetAttribute(ge,Te)}be.attributes.push(oe(ce,le,ge,Ce,Se,$e))}return ye===ce.TRIANGULAR_MESH&&(be.index=ie(ce,le,ge)),ce.destroy(ge),be}function ie(ce,le,ue){const fe=ue.num_faces()*3,me=fe*4,ge=ce._malloc(me);le.GetTrianglesUInt32Array(ue,me,ge);const ve=new Uint32Array(ce.HEAPF32.buffer,ge,fe).slice();return ce._free(ge),{array:ve,itemSize:1}}function oe(ce,le,ue,he,fe,me){const ge=me.num_components(),ye=ue.num_points()*ge,be=ye*fe.BYTES_PER_ELEMENT,Ce=ae(ce,fe),Se=ce._malloc(be);le.GetAttributeDataArrayForAllPoints(ue,me,Ce,be,Se);const $e=new fe(ce.HEAPF32.buffer,Se,ye).slice();return ce._free(Se),{name:he,array:$e,itemSize:ge}}function ae(ce,le){switch(le){case Float32Array:return ce.DT_FLOAT32;case Int8Array:return ce.DT_INT8;case Int16Array:return ce.DT_INT16;case Int32Array:return ce.DT_INT32;case Uint8Array:return ce.DT_UINT8;case Uint16Array:return ce.DT_UINT16;case Uint32Array:return ce.DT_UINT32}}}function toTrianglesDrawMode(re,ee){if(ee===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),re;if(ee===TriangleFanDrawMode||ee===TriangleStripDrawMode){let ne=re.getIndex();if(ne===null){const ce=[],le=re.getAttribute("position");if(le!==void 0){for(let ue=0;ue<le.count;ue++)ce.push(ue);re.setIndex(ce),ne=re.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),re}const ie=ne.count-2,oe=[];if(ee===TriangleFanDrawMode)for(let ce=1;ce<=ie;ce++)oe.push(ne.getX(0)),oe.push(ne.getX(ce)),oe.push(ne.getX(ce+1));else for(let ce=0;ce<ie;ce++)ce%2===0?(oe.push(ne.getX(ce)),oe.push(ne.getX(ce+1)),oe.push(ne.getX(ce+2))):(oe.push(ne.getX(ce+2)),oe.push(ne.getX(ce+1)),oe.push(ne.getX(ce)));oe.length/3!==ie&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const ae=re.clone();return ae.setIndex(oe),ae.clearGroups(),ae}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",ee),re}class GLTFLoader extends Loader{constructor(ee){super(ee),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(ne){return new GLTFMaterialsClearcoatExtension$1(ne)}),this.register(function(ne){return new GLTFTextureBasisUExtension(ne)}),this.register(function(ne){return new GLTFTextureWebPExtension(ne)}),this.register(function(ne){return new GLTFMaterialsSheenExtension(ne)}),this.register(function(ne){return new GLTFMaterialsTransmissionExtension$1(ne)}),this.register(function(ne){return new GLTFMaterialsVolumeExtension$1(ne)}),this.register(function(ne){return new GLTFMaterialsIorExtension$1(ne)}),this.register(function(ne){return new GLTFMaterialsEmissiveStrengthExtension(ne)}),this.register(function(ne){return new GLTFMaterialsSpecularExtension$1(ne)}),this.register(function(ne){return new GLTFMaterialsIridescenceExtension$1(ne)}),this.register(function(ne){return new GLTFLightsExtension(ne)}),this.register(function(ne){return new GLTFMeshoptCompression(ne)}),this.register(function(ne){return new GLTFMeshGpuInstancing(ne)})}load(ee,ne,ie,oe){const ae=this;let ce;this.resourcePath!==""?ce=this.resourcePath:this.path!==""?ce=this.path:ce=LoaderUtils.extractUrlBase(ee),this.manager.itemStart(ee);const le=function(he){oe?oe(he):console.error(he),ae.manager.itemError(ee),ae.manager.itemEnd(ee)},ue=new FileLoader(this.manager);ue.setPath(this.path),ue.setResponseType("arraybuffer"),ue.setRequestHeader(this.requestHeader),ue.setWithCredentials(this.withCredentials),ue.load(ee,function(he){try{ae.parse(he,ce,function(fe){ne(fe),ae.manager.itemEnd(ee)},le)}catch(fe){le(fe)}},ie,le)}setDRACOLoader(ee){return this.dracoLoader=ee,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(ee){return this.ktx2Loader=ee,this}setMeshoptDecoder(ee){return this.meshoptDecoder=ee,this}register(ee){return this.pluginCallbacks.indexOf(ee)===-1&&this.pluginCallbacks.push(ee),this}unregister(ee){return this.pluginCallbacks.indexOf(ee)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(ee),1),this}parse(ee,ne,ie,oe){let ae;const ce={},le={},ue=new TextDecoder;if(typeof ee=="string")ae=JSON.parse(ee);else if(ee instanceof ArrayBuffer)if(ue.decode(new Uint8Array(ee,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{ce[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(ee)}catch(me){oe&&oe(me);return}ae=JSON.parse(ce[EXTENSIONS.KHR_BINARY_GLTF].content)}else ae=JSON.parse(ue.decode(ee));else ae=ee;if(ae.asset===void 0||ae.asset.version[0]<2){oe&&oe(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const he=new GLTFParser(ae,{path:ne||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});he.fileLoader.setRequestHeader(this.requestHeader);for(let fe=0;fe<this.pluginCallbacks.length;fe++){const me=this.pluginCallbacks[fe](he);le[me.name]=me,ce[me.name]=!0}if(ae.extensionsUsed)for(let fe=0;fe<ae.extensionsUsed.length;++fe){const me=ae.extensionsUsed[fe],ge=ae.extensionsRequired||[];switch(me){case EXTENSIONS.KHR_MATERIALS_UNLIT:ce[me]=new GLTFMaterialsUnlitExtension$1;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:ce[me]=new GLTFDracoMeshCompressionExtension(ae,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:ce[me]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:ce[me]=new GLTFMeshQuantizationExtension;break;default:ge.indexOf(me)>=0&&le[me]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+me+'".')}}he.setExtensions(ce),he.setPlugins(le),he.parse(ie,oe)}parseAsync(ee,ne){const ie=this;return new Promise(function(oe,ae){ie.parse(ee,ne,oe,ae)})}}function GLTFRegistry(){let re={};return{get:function(ee){return re[ee]},add:function(ee,ne){re[ee]=ne},remove:function(ee){delete re[ee]},removeAll:function(){re={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const ee=this.parser,ne=this.parser.json.nodes||[];for(let ie=0,oe=ne.length;ie<oe;ie++){const ae=ne[ie];ae.extensions&&ae.extensions[this.name]&&ae.extensions[this.name].light!==void 0&&ee._addNodeRef(this.cache,ae.extensions[this.name].light)}}_loadLight(ee){const ne=this.parser,ie="light:"+ee;let oe=ne.cache.get(ie);if(oe)return oe;const ae=ne.json,ue=((ae.extensions&&ae.extensions[this.name]||{}).lights||[])[ee];let he;const fe=new Color(16777215);ue.color!==void 0&&fe.fromArray(ue.color);const me=ue.range!==void 0?ue.range:0;switch(ue.type){case"directional":he=new DirectionalLight(fe),he.target.position.set(0,0,-1),he.add(he.target);break;case"point":he=new PointLight(fe),he.distance=me;break;case"spot":he=new SpotLight(fe),he.distance=me,ue.spot=ue.spot||{},ue.spot.innerConeAngle=ue.spot.innerConeAngle!==void 0?ue.spot.innerConeAngle:0,ue.spot.outerConeAngle=ue.spot.outerConeAngle!==void 0?ue.spot.outerConeAngle:Math.PI/4,he.angle=ue.spot.outerConeAngle,he.penumbra=1-ue.spot.innerConeAngle/ue.spot.outerConeAngle,he.target.position.set(0,0,-1),he.add(he.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+ue.type)}return he.position.set(0,0,0),he.decay=2,assignExtrasToUserData(he,ue),ue.intensity!==void 0&&(he.intensity=ue.intensity),he.name=ne.createUniqueName(ue.name||"light_"+ee),oe=Promise.resolve(he),ne.cache.add(ie,oe),oe}getDependency(ee,ne){if(ee==="light")return this._loadLight(ne)}createNodeAttachment(ee){const ne=this,ie=this.parser,ae=ie.json.nodes[ee],le=(ae.extensions&&ae.extensions[this.name]||{}).light;return le===void 0?null:this._loadLight(le).then(function(ue){return ie._getNodeRef(ne.cache,le,ue)})}}let GLTFMaterialsUnlitExtension$1=class{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(ee,ne,ie){const oe=[];ee.color=new Color(1,1,1),ee.opacity=1;const ae=ne.pbrMetallicRoughness;if(ae){if(Array.isArray(ae.baseColorFactor)){const ce=ae.baseColorFactor;ee.color.fromArray(ce),ee.opacity=ce[3]}ae.baseColorTexture!==void 0&&oe.push(ie.assignTexture(ee,"map",ae.baseColorTexture,sRGBEncoding))}return Promise.all(oe)}};class GLTFMaterialsEmissiveStrengthExtension{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(ee,ne){const oe=this.parser.json.materials[ee];if(!oe.extensions||!oe.extensions[this.name])return Promise.resolve();const ae=oe.extensions[this.name].emissiveStrength;return ae!==void 0&&(ne.emissiveIntensity=ae),Promise.resolve()}}let GLTFMaterialsClearcoatExtension$1=class{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(ee){const ie=this.parser.json.materials[ee];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ie=this.parser,oe=ie.json.materials[ee];if(!oe.extensions||!oe.extensions[this.name])return Promise.resolve();const ae=[],ce=oe.extensions[this.name];if(ce.clearcoatFactor!==void 0&&(ne.clearcoat=ce.clearcoatFactor),ce.clearcoatTexture!==void 0&&ae.push(ie.assignTexture(ne,"clearcoatMap",ce.clearcoatTexture)),ce.clearcoatRoughnessFactor!==void 0&&(ne.clearcoatRoughness=ce.clearcoatRoughnessFactor),ce.clearcoatRoughnessTexture!==void 0&&ae.push(ie.assignTexture(ne,"clearcoatRoughnessMap",ce.clearcoatRoughnessTexture)),ce.clearcoatNormalTexture!==void 0&&(ae.push(ie.assignTexture(ne,"clearcoatNormalMap",ce.clearcoatNormalTexture)),ce.clearcoatNormalTexture.scale!==void 0)){const le=ce.clearcoatNormalTexture.scale;ne.clearcoatNormalScale=new Vector2(le,le)}return Promise.all(ae)}},GLTFMaterialsIridescenceExtension$1=class{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(ee){const ie=this.parser.json.materials[ee];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ie=this.parser,oe=ie.json.materials[ee];if(!oe.extensions||!oe.extensions[this.name])return Promise.resolve();const ae=[],ce=oe.extensions[this.name];return ce.iridescenceFactor!==void 0&&(ne.iridescence=ce.iridescenceFactor),ce.iridescenceTexture!==void 0&&ae.push(ie.assignTexture(ne,"iridescenceMap",ce.iridescenceTexture)),ce.iridescenceIor!==void 0&&(ne.iridescenceIOR=ce.iridescenceIor),ne.iridescenceThicknessRange===void 0&&(ne.iridescenceThicknessRange=[100,400]),ce.iridescenceThicknessMinimum!==void 0&&(ne.iridescenceThicknessRange[0]=ce.iridescenceThicknessMinimum),ce.iridescenceThicknessMaximum!==void 0&&(ne.iridescenceThicknessRange[1]=ce.iridescenceThicknessMaximum),ce.iridescenceThicknessTexture!==void 0&&ae.push(ie.assignTexture(ne,"iridescenceThicknessMap",ce.iridescenceThicknessTexture)),Promise.all(ae)}};class GLTFMaterialsSheenExtension{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(ee){const ie=this.parser.json.materials[ee];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ie=this.parser,oe=ie.json.materials[ee];if(!oe.extensions||!oe.extensions[this.name])return Promise.resolve();const ae=[];ne.sheenColor=new Color(0,0,0),ne.sheenRoughness=0,ne.sheen=1;const ce=oe.extensions[this.name];return ce.sheenColorFactor!==void 0&&ne.sheenColor.fromArray(ce.sheenColorFactor),ce.sheenRoughnessFactor!==void 0&&(ne.sheenRoughness=ce.sheenRoughnessFactor),ce.sheenColorTexture!==void 0&&ae.push(ie.assignTexture(ne,"sheenColorMap",ce.sheenColorTexture,sRGBEncoding)),ce.sheenRoughnessTexture!==void 0&&ae.push(ie.assignTexture(ne,"sheenRoughnessMap",ce.sheenRoughnessTexture)),Promise.all(ae)}}let GLTFMaterialsTransmissionExtension$1=class{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(ee){const ie=this.parser.json.materials[ee];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ie=this.parser,oe=ie.json.materials[ee];if(!oe.extensions||!oe.extensions[this.name])return Promise.resolve();const ae=[],ce=oe.extensions[this.name];return ce.transmissionFactor!==void 0&&(ne.transmission=ce.transmissionFactor),ce.transmissionTexture!==void 0&&ae.push(ie.assignTexture(ne,"transmissionMap",ce.transmissionTexture)),Promise.all(ae)}},GLTFMaterialsVolumeExtension$1=class{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(ee){const ie=this.parser.json.materials[ee];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ie=this.parser,oe=ie.json.materials[ee];if(!oe.extensions||!oe.extensions[this.name])return Promise.resolve();const ae=[],ce=oe.extensions[this.name];ne.thickness=ce.thicknessFactor!==void 0?ce.thicknessFactor:0,ce.thicknessTexture!==void 0&&ae.push(ie.assignTexture(ne,"thicknessMap",ce.thicknessTexture)),ne.attenuationDistance=ce.attenuationDistance||1/0;const le=ce.attenuationColor||[1,1,1];return ne.attenuationColor=new Color(le[0],le[1],le[2]),Promise.all(ae)}},GLTFMaterialsIorExtension$1=class{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(ee){const ie=this.parser.json.materials[ee];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const oe=this.parser.json.materials[ee];if(!oe.extensions||!oe.extensions[this.name])return Promise.resolve();const ae=oe.extensions[this.name];return ne.ior=ae.ior!==void 0?ae.ior:1.5,Promise.resolve()}},GLTFMaterialsSpecularExtension$1=class{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(ee){const ie=this.parser.json.materials[ee];return!ie.extensions||!ie.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(ee,ne){const ie=this.parser,oe=ie.json.materials[ee];if(!oe.extensions||!oe.extensions[this.name])return Promise.resolve();const ae=[],ce=oe.extensions[this.name];ne.specularIntensity=ce.specularFactor!==void 0?ce.specularFactor:1,ce.specularTexture!==void 0&&ae.push(ie.assignTexture(ne,"specularIntensityMap",ce.specularTexture));const le=ce.specularColorFactor||[1,1,1];return ne.specularColor=new Color(le[0],le[1],le[2]),ce.specularColorTexture!==void 0&&ae.push(ie.assignTexture(ne,"specularColorMap",ce.specularColorTexture,sRGBEncoding)),Promise.all(ae)}};class GLTFTextureBasisUExtension{constructor(ee){this.parser=ee,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(ee){const ne=this.parser,ie=ne.json,oe=ie.textures[ee];if(!oe.extensions||!oe.extensions[this.name])return null;const ae=oe.extensions[this.name],ce=ne.options.ktx2Loader;if(!ce){if(ie.extensionsRequired&&ie.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return ne.loadTextureImage(ee,ae.source,ce)}}class GLTFTextureWebPExtension{constructor(ee){this.parser=ee,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(ee){const ne=this.name,ie=this.parser,oe=ie.json,ae=oe.textures[ee];if(!ae.extensions||!ae.extensions[ne])return null;const ce=ae.extensions[ne],le=oe.images[ce.source];let ue=ie.textureLoader;if(le.uri){const he=ie.options.manager.getHandler(le.uri);he!==null&&(ue=he)}return this.detectSupport().then(function(he){if(he)return ie.loadTextureImage(ee,ce.source,ue);if(oe.extensionsRequired&&oe.extensionsRequired.indexOf(ne)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return ie.loadTexture(ee)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(ee){const ne=new Image;ne.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",ne.onload=ne.onerror=function(){ee(ne.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(ee){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=ee}loadBufferView(ee){const ne=this.parser.json,ie=ne.bufferViews[ee];if(ie.extensions&&ie.extensions[this.name]){const oe=ie.extensions[this.name],ae=this.parser.getDependency("buffer",oe.buffer),ce=this.parser.options.meshoptDecoder;if(!ce||!ce.supported){if(ne.extensionsRequired&&ne.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return ae.then(function(le){const ue=oe.byteOffset||0,he=oe.byteLength||0,fe=oe.count,me=oe.byteStride,ge=new Uint8Array(le,ue,he);return ce.decodeGltfBufferAsync?ce.decodeGltfBufferAsync(fe,me,ge,oe.mode,oe.filter).then(function(ve){return ve.buffer}):ce.ready.then(function(){const ve=new ArrayBuffer(fe*me);return ce.decodeGltfBuffer(new Uint8Array(ve),fe,me,ge,oe.mode,oe.filter),ve})})}else return null}}class GLTFMeshGpuInstancing{constructor(ee){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=ee}createNodeMesh(ee){const ne=this.parser.json,ie=ne.nodes[ee];if(!ie.extensions||!ie.extensions[this.name]||ie.mesh===void 0)return null;const oe=ne.meshes[ie.mesh];for(const he of oe.primitives)if(he.mode!==WEBGL_CONSTANTS$1.TRIANGLES&&he.mode!==WEBGL_CONSTANTS$1.TRIANGLE_STRIP&&he.mode!==WEBGL_CONSTANTS$1.TRIANGLE_FAN&&he.mode!==void 0)return null;const ce=ie.extensions[this.name].attributes,le=[],ue={};for(const he in ce)le.push(this.parser.getDependency("accessor",ce[he]).then(fe=>(ue[he]=fe,ue[he])));return le.length<1?null:(le.push(this.parser.createNodeMesh(ee)),Promise.all(le).then(he=>{const fe=he.pop(),me=fe.isGroup?fe.children:[fe],ge=he[0].count,ve=[];for(const ye of me){const be=new Matrix4,Ce=new Vector3,Se=new Quaternion,$e=new Vector3(1,1,1),Te=new InstancedMesh(ye.geometry,ye.material,ge);for(let Ne=0;Ne<ge;Ne++)ue.TRANSLATION&&Ce.fromBufferAttribute(ue.TRANSLATION,Ne),ue.ROTATION&&Se.fromBufferAttribute(ue.ROTATION,Ne),ue.SCALE&&$e.fromBufferAttribute(ue.SCALE,Ne),Te.setMatrixAt(Ne,be.compose(Ce,Se,$e));for(const Ne in ue)Ne!=="TRANSLATION"&&Ne!=="ROTATION"&&Ne!=="SCALE"&&ye.geometry.setAttribute(Ne,ue[Ne]);Object3D.prototype.copy.call(Te,ye),Te.frustumCulled=!1,this.parser.assignFinalMaterial(Te),ve.push(Te)}return fe.isGroup?(fe.clear(),fe.add(...ve),fe):ve[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(ee){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const ne=new DataView(ee,0,BINARY_EXTENSION_HEADER_LENGTH),ie=new TextDecoder;if(this.header={magic:ie.decode(new Uint8Array(ee.slice(0,4))),version:ne.getUint32(4,!0),length:ne.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const oe=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,ae=new DataView(ee,BINARY_EXTENSION_HEADER_LENGTH);let ce=0;for(;ce<oe;){const le=ae.getUint32(ce,!0);ce+=4;const ue=ae.getUint32(ce,!0);if(ce+=4,ue===BINARY_EXTENSION_CHUNK_TYPES.JSON){const he=new Uint8Array(ee,BINARY_EXTENSION_HEADER_LENGTH+ce,le);this.content=ie.decode(he)}else if(ue===BINARY_EXTENSION_CHUNK_TYPES.BIN){const he=BINARY_EXTENSION_HEADER_LENGTH+ce;this.body=ee.slice(he,he+le)}ce+=le}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(ee,ne){if(!ne)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=ee,this.dracoLoader=ne,this.dracoLoader.preload()}decodePrimitive(ee,ne){const ie=this.json,oe=this.dracoLoader,ae=ee.extensions[this.name].bufferView,ce=ee.extensions[this.name].attributes,le={},ue={},he={};for(const fe in ce){const me=ATTRIBUTES[fe]||fe.toLowerCase();le[me]=ce[fe]}for(const fe in ee.attributes){const me=ATTRIBUTES[fe]||fe.toLowerCase();if(ce[fe]!==void 0){const ge=ie.accessors[ee.attributes[fe]],ve=WEBGL_COMPONENT_TYPES[ge.componentType];he[me]=ve.name,ue[me]=ge.normalized===!0}}return ne.getDependency("bufferView",ae).then(function(fe){return new Promise(function(me){oe.decodeDracoFile(fe,function(ge){for(const ve in ge.attributes){const ye=ge.attributes[ve],be=ue[ve];be!==void 0&&(ye.normalized=be)}me(ge)},le,he)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(ee,ne){return ne.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),ne.offset===void 0&&ne.rotation===void 0&&ne.scale===void 0||(ee=ee.clone(),ne.offset!==void 0&&ee.offset.fromArray(ne.offset),ne.rotation!==void 0&&(ee.rotation=ne.rotation),ne.scale!==void 0&&ee.repeat.fromArray(ne.scale),ee.needsUpdate=!0),ee}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(ee,ne,ie,oe){super(ee,ne,ie,oe)}copySampleValue_(ee){const ne=this.resultBuffer,ie=this.sampleValues,oe=this.valueSize,ae=ee*oe*3+oe;for(let ce=0;ce!==oe;ce++)ne[ce]=ie[ae+ce];return ne}interpolate_(ee,ne,ie,oe){const ae=this.resultBuffer,ce=this.sampleValues,le=this.valueSize,ue=le*2,he=le*3,fe=oe-ne,me=(ie-ne)/fe,ge=me*me,ve=ge*me,ye=ee*he,be=ye-he,Ce=-2*ve+3*ge,Se=ve-ge,$e=1-Ce,Te=Se-ge+me;for(let Ne=0;Ne!==le;Ne++){const Ie=ce[be+Ne+le],ke=ce[be+Ne+ue]*fe,De=ce[ye+Ne+le],Oe=ce[ye+Ne]*fe;ae[Ne]=$e*Ie+Te*ke+Ce*De+Se*Oe}return ae}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(ee,ne,ie,oe){const ae=super.interpolate_(ee,ne,ie,oe);return _q.fromArray(ae).normalize().toArray(ae),ae}}const WEBGL_CONSTANTS$1={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES$1={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(re){return re.DefaultMaterial===void 0&&(re.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),re.DefaultMaterial}function addUnknownExtensionsToUserData(re,ee,ne){for(const ie in ne.extensions)re[ie]===void 0&&(ee.userData.gltfExtensions=ee.userData.gltfExtensions||{},ee.userData.gltfExtensions[ie]=ne.extensions[ie])}function assignExtrasToUserData(re,ee){ee.extras!==void 0&&(typeof ee.extras=="object"?Object.assign(re.userData,ee.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+ee.extras))}function addMorphTargets(re,ee,ne){let ie=!1,oe=!1,ae=!1;for(let he=0,fe=ee.length;he<fe;he++){const me=ee[he];if(me.POSITION!==void 0&&(ie=!0),me.NORMAL!==void 0&&(oe=!0),me.COLOR_0!==void 0&&(ae=!0),ie&&oe&&ae)break}if(!ie&&!oe&&!ae)return Promise.resolve(re);const ce=[],le=[],ue=[];for(let he=0,fe=ee.length;he<fe;he++){const me=ee[he];if(ie){const ge=me.POSITION!==void 0?ne.getDependency("accessor",me.POSITION):re.attributes.position;ce.push(ge)}if(oe){const ge=me.NORMAL!==void 0?ne.getDependency("accessor",me.NORMAL):re.attributes.normal;le.push(ge)}if(ae){const ge=me.COLOR_0!==void 0?ne.getDependency("accessor",me.COLOR_0):re.attributes.color;ue.push(ge)}}return Promise.all([Promise.all(ce),Promise.all(le),Promise.all(ue)]).then(function(he){const fe=he[0],me=he[1],ge=he[2];return ie&&(re.morphAttributes.position=fe),oe&&(re.morphAttributes.normal=me),ae&&(re.morphAttributes.color=ge),re.morphTargetsRelative=!0,re})}function updateMorphTargets(re,ee){if(re.updateMorphTargets(),ee.weights!==void 0)for(let ne=0,ie=ee.weights.length;ne<ie;ne++)re.morphTargetInfluences[ne]=ee.weights[ne];if(ee.extras&&Array.isArray(ee.extras.targetNames)){const ne=ee.extras.targetNames;if(re.morphTargetInfluences.length===ne.length){re.morphTargetDictionary={};for(let ie=0,oe=ne.length;ie<oe;ie++)re.morphTargetDictionary[ne[ie]]=ie}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(re){const ee=re.extensions&&re.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];let ne;return ee?ne="draco:"+ee.bufferView+":"+ee.indices+":"+createAttributesKey(ee.attributes):ne=re.indices+":"+createAttributesKey(re.attributes)+":"+re.mode,ne}function createAttributesKey(re){let ee="";const ne=Object.keys(re).sort();for(let ie=0,oe=ne.length;ie<oe;ie++)ee+=ne[ie]+":"+re[ne[ie]]+";";return ee}function getNormalizedComponentScale(re){switch(re){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(re){return re.search(/\.jpe?g($|\?)/i)>0||re.search(/^data\:image\/jpeg/)===0?"image/jpeg":re.search(/\.webp($|\?)/i)>0||re.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(ee={},ne={}){this.json=ee,this.extensions={},this.plugins={},this.options=ne,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let ie=!1,oe=!1,ae=-1;typeof navigator<"u"&&(ie=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,oe=navigator.userAgent.indexOf("Firefox")>-1,ae=oe?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||ie||oe&&ae<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(ee){this.extensions=ee}setPlugins(ee){this.plugins=ee}parse(ee,ne){const ie=this,oe=this.json,ae=this.extensions;this.cache.removeAll(),this._invokeAll(function(ce){return ce._markDefs&&ce._markDefs()}),Promise.all(this._invokeAll(function(ce){return ce.beforeRoot&&ce.beforeRoot()})).then(function(){return Promise.all([ie.getDependencies("scene"),ie.getDependencies("animation"),ie.getDependencies("camera")])}).then(function(ce){const le={scene:ce[0][oe.scene||0],scenes:ce[0],animations:ce[1],cameras:ce[2],asset:oe.asset,parser:ie,userData:{}};addUnknownExtensionsToUserData(ae,le,oe),assignExtrasToUserData(le,oe),Promise.all(ie._invokeAll(function(ue){return ue.afterRoot&&ue.afterRoot(le)})).then(function(){ee(le)})}).catch(ne)}_markDefs(){const ee=this.json.nodes||[],ne=this.json.skins||[],ie=this.json.meshes||[];for(let oe=0,ae=ne.length;oe<ae;oe++){const ce=ne[oe].joints;for(let le=0,ue=ce.length;le<ue;le++)ee[ce[le]].isBone=!0}for(let oe=0,ae=ee.length;oe<ae;oe++){const ce=ee[oe];ce.mesh!==void 0&&(this._addNodeRef(this.meshCache,ce.mesh),ce.skin!==void 0&&(ie[ce.mesh].isSkinnedMesh=!0)),ce.camera!==void 0&&this._addNodeRef(this.cameraCache,ce.camera)}}_addNodeRef(ee,ne){ne!==void 0&&(ee.refs[ne]===void 0&&(ee.refs[ne]=ee.uses[ne]=0),ee.refs[ne]++)}_getNodeRef(ee,ne,ie){if(ee.refs[ne]<=1)return ie;const oe=ie.clone(),ae=(ce,le)=>{const ue=this.associations.get(ce);ue!=null&&this.associations.set(le,ue);for(const[he,fe]of ce.children.entries())ae(fe,le.children[he])};return ae(ie,oe),oe.name+="_instance_"+ee.uses[ne]++,oe}_invokeOne(ee){const ne=Object.values(this.plugins);ne.push(this);for(let ie=0;ie<ne.length;ie++){const oe=ee(ne[ie]);if(oe)return oe}return null}_invokeAll(ee){const ne=Object.values(this.plugins);ne.unshift(this);const ie=[];for(let oe=0;oe<ne.length;oe++){const ae=ee(ne[oe]);ae&&ie.push(ae)}return ie}getDependency(ee,ne){const ie=ee+":"+ne;let oe=this.cache.get(ie);if(!oe){switch(ee){case"scene":oe=this.loadScene(ne);break;case"node":oe=this._invokeOne(function(ae){return ae.loadNode&&ae.loadNode(ne)});break;case"mesh":oe=this._invokeOne(function(ae){return ae.loadMesh&&ae.loadMesh(ne)});break;case"accessor":oe=this.loadAccessor(ne);break;case"bufferView":oe=this._invokeOne(function(ae){return ae.loadBufferView&&ae.loadBufferView(ne)});break;case"buffer":oe=this.loadBuffer(ne);break;case"material":oe=this._invokeOne(function(ae){return ae.loadMaterial&&ae.loadMaterial(ne)});break;case"texture":oe=this._invokeOne(function(ae){return ae.loadTexture&&ae.loadTexture(ne)});break;case"skin":oe=this.loadSkin(ne);break;case"animation":oe=this._invokeOne(function(ae){return ae.loadAnimation&&ae.loadAnimation(ne)});break;case"camera":oe=this.loadCamera(ne);break;default:if(oe=this._invokeOne(function(ae){return ae!=this&&ae.getDependency&&ae.getDependency(ee,ne)}),!oe)throw new Error("Unknown type: "+ee);break}this.cache.add(ie,oe)}return oe}getDependencies(ee){let ne=this.cache.get(ee);if(!ne){const ie=this,oe=this.json[ee+(ee==="mesh"?"es":"s")]||[];ne=Promise.all(oe.map(function(ae,ce){return ie.getDependency(ee,ce)})),this.cache.add(ee,ne)}return ne}loadBuffer(ee){const ne=this.json.buffers[ee],ie=this.fileLoader;if(ne.type&&ne.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+ne.type+" buffer type is not supported.");if(ne.uri===void 0&&ee===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const oe=this.options;return new Promise(function(ae,ce){ie.load(LoaderUtils.resolveURL(ne.uri,oe.path),ae,void 0,function(){ce(new Error('THREE.GLTFLoader: Failed to load buffer "'+ne.uri+'".'))})})}loadBufferView(ee){const ne=this.json.bufferViews[ee];return this.getDependency("buffer",ne.buffer).then(function(ie){const oe=ne.byteLength||0,ae=ne.byteOffset||0;return ie.slice(ae,ae+oe)})}loadAccessor(ee){const ne=this,ie=this.json,oe=this.json.accessors[ee];if(oe.bufferView===void 0&&oe.sparse===void 0){const ce=WEBGL_TYPE_SIZES[oe.type],le=WEBGL_COMPONENT_TYPES[oe.componentType],ue=oe.normalized===!0,he=new le(oe.count*ce);return Promise.resolve(new BufferAttribute(he,ce,ue))}const ae=[];return oe.bufferView!==void 0?ae.push(this.getDependency("bufferView",oe.bufferView)):ae.push(null),oe.sparse!==void 0&&(ae.push(this.getDependency("bufferView",oe.sparse.indices.bufferView)),ae.push(this.getDependency("bufferView",oe.sparse.values.bufferView))),Promise.all(ae).then(function(ce){const le=ce[0],ue=WEBGL_TYPE_SIZES[oe.type],he=WEBGL_COMPONENT_TYPES[oe.componentType],fe=he.BYTES_PER_ELEMENT,me=fe*ue,ge=oe.byteOffset||0,ve=oe.bufferView!==void 0?ie.bufferViews[oe.bufferView].byteStride:void 0,ye=oe.normalized===!0;let be,Ce;if(ve&&ve!==me){const Se=Math.floor(ge/ve),$e="InterleavedBuffer:"+oe.bufferView+":"+oe.componentType+":"+Se+":"+oe.count;let Te=ne.cache.get($e);Te||(be=new he(le,Se*ve,oe.count*ve/fe),Te=new InterleavedBuffer(be,ve/fe),ne.cache.add($e,Te)),Ce=new InterleavedBufferAttribute(Te,ue,ge%ve/fe,ye)}else le===null?be=new he(oe.count*ue):be=new he(le,ge,oe.count*ue),Ce=new BufferAttribute(be,ue,ye);if(oe.sparse!==void 0){const Se=WEBGL_TYPE_SIZES.SCALAR,$e=WEBGL_COMPONENT_TYPES[oe.sparse.indices.componentType],Te=oe.sparse.indices.byteOffset||0,Ne=oe.sparse.values.byteOffset||0,Ie=new $e(ce[1],Te,oe.sparse.count*Se),ke=new he(ce[2],Ne,oe.sparse.count*ue);le!==null&&(Ce=new BufferAttribute(Ce.array.slice(),Ce.itemSize,Ce.normalized));for(let De=0,Oe=Ie.length;De<Oe;De++){const Be=Ie[De];if(Ce.setX(Be,ke[De*ue]),ue>=2&&Ce.setY(Be,ke[De*ue+1]),ue>=3&&Ce.setZ(Be,ke[De*ue+2]),ue>=4&&Ce.setW(Be,ke[De*ue+3]),ue>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return Ce})}loadTexture(ee){const ne=this.json,ie=this.options,ae=ne.textures[ee].source,ce=ne.images[ae];let le=this.textureLoader;if(ce.uri){const ue=ie.manager.getHandler(ce.uri);ue!==null&&(le=ue)}return this.loadTextureImage(ee,ae,le)}loadTextureImage(ee,ne,ie){const oe=this,ae=this.json,ce=ae.textures[ee],le=ae.images[ne],ue=(le.uri||le.bufferView)+":"+ce.sampler;if(this.textureCache[ue])return this.textureCache[ue];const he=this.loadImageSource(ne,ie).then(function(fe){fe.flipY=!1,fe.name=ce.name||le.name||"";const ge=(ae.samplers||{})[ce.sampler]||{};return fe.magFilter=WEBGL_FILTERS[ge.magFilter]||LinearFilter,fe.minFilter=WEBGL_FILTERS[ge.minFilter]||LinearMipmapLinearFilter,fe.wrapS=WEBGL_WRAPPINGS[ge.wrapS]||RepeatWrapping,fe.wrapT=WEBGL_WRAPPINGS[ge.wrapT]||RepeatWrapping,oe.associations.set(fe,{textures:ee}),fe}).catch(function(){return null});return this.textureCache[ue]=he,he}loadImageSource(ee,ne){const ie=this,oe=this.json,ae=this.options;if(this.sourceCache[ee]!==void 0)return this.sourceCache[ee].then(me=>me.clone());const ce=oe.images[ee],le=self.URL||self.webkitURL;let ue=ce.uri||"",he=!1;if(ce.bufferView!==void 0)ue=ie.getDependency("bufferView",ce.bufferView).then(function(me){he=!0;const ge=new Blob([me],{type:ce.mimeType});return ue=le.createObjectURL(ge),ue});else if(ce.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+ee+" is missing URI and bufferView");const fe=Promise.resolve(ue).then(function(me){return new Promise(function(ge,ve){let ye=ge;ne.isImageBitmapLoader===!0&&(ye=function(be){const Ce=new Texture$1(be);Ce.needsUpdate=!0,ge(Ce)}),ne.load(LoaderUtils.resolveURL(me,ae.path),ye,void 0,ve)})}).then(function(me){return he===!0&&le.revokeObjectURL(ue),me.userData.mimeType=ce.mimeType||getImageURIMimeType(ce.uri),me}).catch(function(me){throw console.error("THREE.GLTFLoader: Couldn't load texture",ue),me});return this.sourceCache[ee]=fe,fe}assignTexture(ee,ne,ie,oe){const ae=this;return this.getDependency("texture",ie.index).then(function(ce){if(!ce)return null;if(ie.texCoord!==void 0&&ie.texCoord!=0&&!(ne==="aoMap"&&ie.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+ie.texCoord+" for texture "+ne+" not yet supported."),ae.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const le=ie.extensions!==void 0?ie.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(le){const ue=ae.associations.get(ce);ce=ae.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(ce,le),ae.associations.set(ce,ue)}}return oe!==void 0&&(ce.encoding=oe),ee[ne]=ce,ce})}assignFinalMaterial(ee){const ne=ee.geometry;let ie=ee.material;const oe=ne.attributes.tangent===void 0,ae=ne.attributes.color!==void 0,ce=ne.attributes.normal===void 0;if(ee.isPoints){const le="PointsMaterial:"+ie.uuid;let ue=this.cache.get(le);ue||(ue=new PointsMaterial,Material$1.prototype.copy.call(ue,ie),ue.color.copy(ie.color),ue.map=ie.map,ue.sizeAttenuation=!1,this.cache.add(le,ue)),ie=ue}else if(ee.isLine){const le="LineBasicMaterial:"+ie.uuid;let ue=this.cache.get(le);ue||(ue=new LineBasicMaterial,Material$1.prototype.copy.call(ue,ie),ue.color.copy(ie.color),this.cache.add(le,ue)),ie=ue}if(oe||ae||ce){let le="ClonedMaterial:"+ie.uuid+":";oe&&(le+="derivative-tangents:"),ae&&(le+="vertex-colors:"),ce&&(le+="flat-shading:");let ue=this.cache.get(le);ue||(ue=ie.clone(),ae&&(ue.vertexColors=!0),ce&&(ue.flatShading=!0),oe&&(ue.normalScale&&(ue.normalScale.y*=-1),ue.clearcoatNormalScale&&(ue.clearcoatNormalScale.y*=-1)),this.cache.add(le,ue),this.associations.set(ue,this.associations.get(ie))),ie=ue}ie.aoMap&&ne.attributes.uv2===void 0&&ne.attributes.uv!==void 0&&ne.setAttribute("uv2",ne.attributes.uv),ee.material=ie}getMaterialType(){return MeshStandardMaterial}loadMaterial(ee){const ne=this,ie=this.json,oe=this.extensions,ae=ie.materials[ee];let ce;const le={},ue=ae.extensions||{},he=[];if(ue[EXTENSIONS.KHR_MATERIALS_UNLIT]){const me=oe[EXTENSIONS.KHR_MATERIALS_UNLIT];ce=me.getMaterialType(),he.push(me.extendParams(le,ae,ne))}else{const me=ae.pbrMetallicRoughness||{};if(le.color=new Color(1,1,1),le.opacity=1,Array.isArray(me.baseColorFactor)){const ge=me.baseColorFactor;le.color.fromArray(ge),le.opacity=ge[3]}me.baseColorTexture!==void 0&&he.push(ne.assignTexture(le,"map",me.baseColorTexture,sRGBEncoding)),le.metalness=me.metallicFactor!==void 0?me.metallicFactor:1,le.roughness=me.roughnessFactor!==void 0?me.roughnessFactor:1,me.metallicRoughnessTexture!==void 0&&(he.push(ne.assignTexture(le,"metalnessMap",me.metallicRoughnessTexture)),he.push(ne.assignTexture(le,"roughnessMap",me.metallicRoughnessTexture))),ce=this._invokeOne(function(ge){return ge.getMaterialType&&ge.getMaterialType(ee)}),he.push(Promise.all(this._invokeAll(function(ge){return ge.extendMaterialParams&&ge.extendMaterialParams(ee,le)})))}ae.doubleSided===!0&&(le.side=DoubleSide);const fe=ae.alphaMode||ALPHA_MODES.OPAQUE;if(fe===ALPHA_MODES.BLEND?(le.transparent=!0,le.depthWrite=!1):(le.transparent=!1,fe===ALPHA_MODES.MASK&&(le.alphaTest=ae.alphaCutoff!==void 0?ae.alphaCutoff:.5)),ae.normalTexture!==void 0&&ce!==MeshBasicMaterial&&(he.push(ne.assignTexture(le,"normalMap",ae.normalTexture)),le.normalScale=new Vector2(1,1),ae.normalTexture.scale!==void 0)){const me=ae.normalTexture.scale;le.normalScale.set(me,me)}return ae.occlusionTexture!==void 0&&ce!==MeshBasicMaterial&&(he.push(ne.assignTexture(le,"aoMap",ae.occlusionTexture)),ae.occlusionTexture.strength!==void 0&&(le.aoMapIntensity=ae.occlusionTexture.strength)),ae.emissiveFactor!==void 0&&ce!==MeshBasicMaterial&&(le.emissive=new Color().fromArray(ae.emissiveFactor)),ae.emissiveTexture!==void 0&&ce!==MeshBasicMaterial&&he.push(ne.assignTexture(le,"emissiveMap",ae.emissiveTexture,sRGBEncoding)),Promise.all(he).then(function(){const me=new ce(le);return ae.name&&(me.name=ae.name),assignExtrasToUserData(me,ae),ne.associations.set(me,{materials:ee}),ae.extensions&&addUnknownExtensionsToUserData(oe,me,ae),me})}createUniqueName(ee){const ne=PropertyBinding.sanitizeNodeName(ee||"");let ie=ne;for(let oe=1;this.nodeNamesUsed[ie];++oe)ie=ne+"_"+oe;return this.nodeNamesUsed[ie]=!0,ie}loadGeometries(ee){const ne=this,ie=this.extensions,oe=this.primitiveCache;function ae(le){return ie[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(le,ne).then(function(ue){return addPrimitiveAttributes(ue,le,ne)})}const ce=[];for(let le=0,ue=ee.length;le<ue;le++){const he=ee[le],fe=createPrimitiveKey(he),me=oe[fe];if(me)ce.push(me.promise);else{let ge;he.extensions&&he.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?ge=ae(he):ge=addPrimitiveAttributes(new BufferGeometry,he,ne),oe[fe]={primitive:he,promise:ge},ce.push(ge)}}return Promise.all(ce)}loadMesh(ee){const ne=this,ie=this.json,oe=this.extensions,ae=ie.meshes[ee],ce=ae.primitives,le=[];for(let ue=0,he=ce.length;ue<he;ue++){const fe=ce[ue].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",ce[ue].material);le.push(fe)}return le.push(ne.loadGeometries(ce)),Promise.all(le).then(function(ue){const he=ue.slice(0,ue.length-1),fe=ue[ue.length-1],me=[];for(let ve=0,ye=fe.length;ve<ye;ve++){const be=fe[ve],Ce=ce[ve];let Se;const $e=he[ve];if(Ce.mode===WEBGL_CONSTANTS$1.TRIANGLES||Ce.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP||Ce.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN||Ce.mode===void 0)Se=ae.isSkinnedMesh===!0?new SkinnedMesh(be,$e):new Mesh(be,$e),Se.isSkinnedMesh===!0&&!Se.geometry.attributes.skinWeight.normalized&&Se.normalizeSkinWeights(),Ce.mode===WEBGL_CONSTANTS$1.TRIANGLE_STRIP?Se.geometry=toTrianglesDrawMode(Se.geometry,TriangleStripDrawMode):Ce.mode===WEBGL_CONSTANTS$1.TRIANGLE_FAN&&(Se.geometry=toTrianglesDrawMode(Se.geometry,TriangleFanDrawMode));else if(Ce.mode===WEBGL_CONSTANTS$1.LINES)Se=new LineSegments(be,$e);else if(Ce.mode===WEBGL_CONSTANTS$1.LINE_STRIP)Se=new Line$1(be,$e);else if(Ce.mode===WEBGL_CONSTANTS$1.LINE_LOOP)Se=new LineLoop(be,$e);else if(Ce.mode===WEBGL_CONSTANTS$1.POINTS)Se=new Points(be,$e);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Ce.mode);Object.keys(Se.geometry.morphAttributes).length>0&&updateMorphTargets(Se,ae),Se.name=ne.createUniqueName(ae.name||"mesh_"+ee),assignExtrasToUserData(Se,ae),Ce.extensions&&addUnknownExtensionsToUserData(oe,Se,Ce),ne.assignFinalMaterial(Se),me.push(Se)}for(let ve=0,ye=me.length;ve<ye;ve++)ne.associations.set(me[ve],{meshes:ee,primitives:ve});if(me.length===1)return me[0];const ge=new Group$1;ne.associations.set(ge,{meshes:ee});for(let ve=0,ye=me.length;ve<ye;ve++)ge.add(me[ve]);return ge})}loadCamera(ee){let ne;const ie=this.json.cameras[ee],oe=ie[ie.type];if(!oe){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return ie.type==="perspective"?ne=new PerspectiveCamera(MathUtils.radToDeg(oe.yfov),oe.aspectRatio||1,oe.znear||1,oe.zfar||2e6):ie.type==="orthographic"&&(ne=new OrthographicCamera(-oe.xmag,oe.xmag,oe.ymag,-oe.ymag,oe.znear,oe.zfar)),ie.name&&(ne.name=this.createUniqueName(ie.name)),assignExtrasToUserData(ne,ie),Promise.resolve(ne)}loadSkin(ee){const ne=this.json.skins[ee],ie=[];for(let oe=0,ae=ne.joints.length;oe<ae;oe++)ie.push(this.getDependency("node",ne.joints[oe]));return ne.inverseBindMatrices!==void 0?ie.push(this.getDependency("accessor",ne.inverseBindMatrices)):ie.push(null),Promise.all(ie).then(function(oe){const ae=oe.pop(),ce=oe,le=[],ue=[];for(let he=0,fe=ce.length;he<fe;he++){const me=ce[he];if(me){le.push(me);const ge=new Matrix4;ae!==null&&ge.fromArray(ae.array,he*16),ue.push(ge)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',ne.joints[he])}return new Skeleton(le,ue)})}loadAnimation(ee){const ie=this.json.animations[ee],oe=[],ae=[],ce=[],le=[],ue=[];for(let he=0,fe=ie.channels.length;he<fe;he++){const me=ie.channels[he],ge=ie.samplers[me.sampler],ve=me.target,ye=ve.node,be=ie.parameters!==void 0?ie.parameters[ge.input]:ge.input,Ce=ie.parameters!==void 0?ie.parameters[ge.output]:ge.output;oe.push(this.getDependency("node",ye)),ae.push(this.getDependency("accessor",be)),ce.push(this.getDependency("accessor",Ce)),le.push(ge),ue.push(ve)}return Promise.all([Promise.all(oe),Promise.all(ae),Promise.all(ce),Promise.all(le),Promise.all(ue)]).then(function(he){const fe=he[0],me=he[1],ge=he[2],ve=he[3],ye=he[4],be=[];for(let Se=0,$e=fe.length;Se<$e;Se++){const Te=fe[Se],Ne=me[Se],Ie=ge[Se],ke=ve[Se],De=ye[Se];if(Te===void 0)continue;Te.updateMatrix();let Oe;switch(PATH_PROPERTIES$1[De.path]){case PATH_PROPERTIES$1.weights:Oe=NumberKeyframeTrack;break;case PATH_PROPERTIES$1.rotation:Oe=QuaternionKeyframeTrack;break;case PATH_PROPERTIES$1.position:case PATH_PROPERTIES$1.scale:default:Oe=VectorKeyframeTrack;break}const Be=Te.name?Te.name:Te.uuid,Me=ke.interpolation!==void 0?INTERPOLATION[ke.interpolation]:InterpolateLinear,Le=[];PATH_PROPERTIES$1[De.path]===PATH_PROPERTIES$1.weights?Te.traverse(function(ze){ze.morphTargetInfluences&&Le.push(ze.name?ze.name:ze.uuid)}):Le.push(Be);let je=Ie.array;if(Ie.normalized){const ze=getNormalizedComponentScale(je.constructor),Ve=new Float32Array(je.length);for(let He=0,We=je.length;He<We;He++)Ve[He]=je[He]*ze;je=Ve}for(let ze=0,Ve=Le.length;ze<Ve;ze++){const He=new Oe(Le[ze]+"."+PATH_PROPERTIES$1[De.path],Ne.array,je,Me);ke.interpolation==="CUBICSPLINE"&&(He.createInterpolant=function(Ye){const Ue=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new Ue(this.times,this.values,this.getValueSize()/3,Ye)},He.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),be.push(He)}}const Ce=ie.name?ie.name:"animation_"+ee;return new AnimationClip(Ce,void 0,be)})}createNodeMesh(ee){const ne=this.json,ie=this,oe=ne.nodes[ee];return oe.mesh===void 0?null:ie.getDependency("mesh",oe.mesh).then(function(ae){const ce=ie._getNodeRef(ie.meshCache,oe.mesh,ae);return oe.weights!==void 0&&ce.traverse(function(le){if(le.isMesh)for(let ue=0,he=oe.weights.length;ue<he;ue++)le.morphTargetInfluences[ue]=oe.weights[ue]}),ce})}loadNode(ee){const ne=this.json,ie=this.extensions,oe=this,ae=ne.nodes[ee],ce=ae.name?oe.createUniqueName(ae.name):"";return function(){const le=[],ue=oe._invokeOne(function(ge){return ge.createNodeMesh&&ge.createNodeMesh(ee)});ue&&le.push(ue),ae.camera!==void 0&&le.push(oe.getDependency("camera",ae.camera).then(function(ge){return oe._getNodeRef(oe.cameraCache,ae.camera,ge)})),oe._invokeAll(function(ge){return ge.createNodeAttachment&&ge.createNodeAttachment(ee)}).forEach(function(ge){le.push(ge)});const he=[],fe=ae.children||[];for(let ge=0,ve=fe.length;ge<ve;ge++)he.push(oe.getDependency("node",fe[ge]));const me=ae.skin===void 0?Promise.resolve(null):oe.getDependency("skin",ae.skin);return Promise.all([Promise.all(le),Promise.all(he),me])}().then(function(le){const ue=le[0],he=le[1],fe=le[2];let me;if(ae.isBone===!0?me=new Bone:ue.length>1?me=new Group$1:ue.length===1?me=ue[0]:me=new Object3D,me!==ue[0])for(let ge=0,ve=ue.length;ge<ve;ge++)me.add(ue[ge]);if(ae.name&&(me.userData.name=ae.name,me.name=ce),assignExtrasToUserData(me,ae),ae.extensions&&addUnknownExtensionsToUserData(ie,me,ae),ae.matrix!==void 0){const ge=new Matrix4;ge.fromArray(ae.matrix),me.applyMatrix4(ge)}else ae.translation!==void 0&&me.position.fromArray(ae.translation),ae.rotation!==void 0&&me.quaternion.fromArray(ae.rotation),ae.scale!==void 0&&me.scale.fromArray(ae.scale);oe.associations.has(me)||oe.associations.set(me,{}),oe.associations.get(me).nodes=ee,fe!==null&&me.traverse(function(ge){ge.isSkinnedMesh&&ge.bind(fe,_identityMatrix)});for(let ge=0,ve=he.length;ge<ve;ge++)me.add(he[ge]);return me})}loadScene(ee){const ne=this.extensions,ie=this.json.scenes[ee],oe=this,ae=new Group$1;ie.name&&(ae.name=oe.createUniqueName(ie.name)),assignExtrasToUserData(ae,ie),ie.extensions&&addUnknownExtensionsToUserData(ne,ae,ie);const ce=ie.nodes||[],le=[];for(let ue=0,he=ce.length;ue<he;ue++)le.push(oe.getDependency("node",ce[ue]));return Promise.all(le).then(function(ue){for(let fe=0,me=ue.length;fe<me;fe++)ae.add(ue[fe]);const he=fe=>{const me=new Map;for(const[ge,ve]of oe.associations)(ge instanceof Material$1||ge instanceof Texture$1)&&me.set(ge,ve);return fe.traverse(ge=>{const ve=oe.associations.get(ge);ve!=null&&me.set(ge,ve)}),me};return oe.associations=he(ae),ae})}}function computeBounds(re,ee,ne){const ie=ee.attributes,oe=new Box3;if(ie.POSITION!==void 0){const le=ne.json.accessors[ie.POSITION],ue=le.min,he=le.max;if(ue!==void 0&&he!==void 0){if(oe.set(new Vector3(ue[0],ue[1],ue[2]),new Vector3(he[0],he[1],he[2])),le.normalized){const fe=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[le.componentType]);oe.min.multiplyScalar(fe),oe.max.multiplyScalar(fe)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const ae=ee.targets;if(ae!==void 0){const le=new Vector3,ue=new Vector3;for(let he=0,fe=ae.length;he<fe;he++){const me=ae[he];if(me.POSITION!==void 0){const ge=ne.json.accessors[me.POSITION],ve=ge.min,ye=ge.max;if(ve!==void 0&&ye!==void 0){if(ue.setX(Math.max(Math.abs(ve[0]),Math.abs(ye[0]))),ue.setY(Math.max(Math.abs(ve[1]),Math.abs(ye[1]))),ue.setZ(Math.max(Math.abs(ve[2]),Math.abs(ye[2]))),ge.normalized){const be=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[ge.componentType]);ue.multiplyScalar(be)}le.max(ue)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}oe.expandByVector(le)}re.boundingBox=oe;const ce=new Sphere;oe.getCenter(ce.center),ce.radius=oe.min.distanceTo(oe.max)/2,re.boundingSphere=ce}function addPrimitiveAttributes(re,ee,ne){const ie=ee.attributes,oe=[];function ae(ce,le){return ne.getDependency("accessor",ce).then(function(ue){re.setAttribute(le,ue)})}for(const ce in ie){const le=ATTRIBUTES[ce]||ce.toLowerCase();le in re.attributes||oe.push(ae(ie[ce],le))}if(ee.indices!==void 0&&!re.index){const ce=ne.getDependency("accessor",ee.indices).then(function(le){re.setIndex(le)});oe.push(ce)}return assignExtrasToUserData(re,ee),computeBounds(re,ee,ne),Promise.all(oe).then(function(){return ee.targets!==void 0?addMorphTargets(re,ee.targets,ne):re})}class WorkerPool{constructor(ee=4){this.pool=ee,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(ee){if(!this.workers[ee]){const ne=this.workerCreator();ne.addEventListener("message",this._onMessage.bind(this,ee)),this.workers[ee]=ne}}_getIdleWorker(){for(let ee=0;ee<this.pool;ee++)if(!(this.workerStatus&1<<ee))return ee;return-1}_onMessage(ee,ne){const ie=this.workersResolve[ee];if(ie&&ie(ne),this.queue.length){const{resolve:oe,msg:ae,transfer:ce}=this.queue.shift();this.workersResolve[ee]=oe,this.workers[ee].postMessage(ae,ce)}else this.workerStatus^=1<<ee}setWorkerCreator(ee){this.workerCreator=ee}setWorkerLimit(ee){this.pool=ee}postMessage(ee,ne){return new Promise(ie=>{const oe=this._getIdleWorker();oe!==-1?(this._initWorker(oe),this.workerStatus|=1<<oe,this.workersResolve[oe]=ie,this.workers[oe].postMessage(ee,ne)):this.queue.push({resolve:ie,msg:ee,transfer:ne})})}dispose(){this.workers.forEach(ee=>ee.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const t$1=0,n$1=2,p$2=1,x$3=2,nt=0,ct=9,gt=15,yt=16,dt=22,Ot=37,Ft=43,$t=76,se=83,pe=97,xe=100,de=103,Ae=109;class Si{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class Ii{constructor(ee,ne,ie,oe){this._dataView=new DataView(ee.buffer,ee.byteOffset+ne,ie),this._littleEndian=oe,this._offset=0}_nextUint8(){const ee=this._dataView.getUint8(this._offset);return this._offset+=1,ee}_nextUint16(){const ee=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,ee}_nextUint32(){const ee=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,ee}_nextUint64(){const ee=this._dataView.getUint32(this._offset,this._littleEndian)+4294967296*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,ee}_nextInt32(){const ee=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,ee}_skip(ee){return this._offset+=ee,this}_scan(ee,ne=0){const ie=this._offset;let oe=0;for(;this._dataView.getUint8(this._offset)!==ne&&oe<ee;)oe++,this._offset++;return oe<ee&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+ie,oe)}}const Ti=[171,75,84,88,32,50,48,187,13,10,26,10];function Ei(re){return typeof TextDecoder<"u"?new TextDecoder().decode(re):Buffer$2.from(re).toString("utf8")}function Pi(re){const ee=new Uint8Array(re.buffer,re.byteOffset,Ti.length);if(ee[0]!==Ti[0]||ee[1]!==Ti[1]||ee[2]!==Ti[2]||ee[3]!==Ti[3]||ee[4]!==Ti[4]||ee[5]!==Ti[5]||ee[6]!==Ti[6]||ee[7]!==Ti[7]||ee[8]!==Ti[8]||ee[9]!==Ti[9]||ee[10]!==Ti[10]||ee[11]!==Ti[11])throw new Error("Missing KTX 2.0 identifier.");const ne=new Si,ie=17*Uint32Array.BYTES_PER_ELEMENT,oe=new Ii(re,Ti.length,ie,!0);ne.vkFormat=oe._nextUint32(),ne.typeSize=oe._nextUint32(),ne.pixelWidth=oe._nextUint32(),ne.pixelHeight=oe._nextUint32(),ne.pixelDepth=oe._nextUint32(),ne.layerCount=oe._nextUint32(),ne.faceCount=oe._nextUint32();const ae=oe._nextUint32();ne.supercompressionScheme=oe._nextUint32();const ce=oe._nextUint32(),le=oe._nextUint32(),ue=oe._nextUint32(),he=oe._nextUint32(),fe=oe._nextUint64(),me=oe._nextUint64(),ge=new Ii(re,Ti.length+ie,3*ae*8,!0);for(let Ye=0;Ye<ae;Ye++)ne.levels.push({levelData:new Uint8Array(re.buffer,re.byteOffset+ge._nextUint64(),ge._nextUint64()),uncompressedByteLength:ge._nextUint64()});const ve=new Ii(re,ce,le,!0),ye={vendorId:ve._skip(4)._nextUint16(),descriptorType:ve._nextUint16(),versionNumber:ve._nextUint16(),descriptorBlockSize:ve._nextUint16(),colorModel:ve._nextUint8(),colorPrimaries:ve._nextUint8(),transferFunction:ve._nextUint8(),flags:ve._nextUint8(),texelBlockDimension:[ve._nextUint8(),ve._nextUint8(),ve._nextUint8(),ve._nextUint8()],bytesPlane:[ve._nextUint8(),ve._nextUint8(),ve._nextUint8(),ve._nextUint8(),ve._nextUint8(),ve._nextUint8(),ve._nextUint8(),ve._nextUint8()],samples:[]},be=(ye.descriptorBlockSize/4-6)/4;for(let Ye=0;Ye<be;Ye++){const Ue={bitOffset:ve._nextUint16(),bitLength:ve._nextUint8(),channelType:ve._nextUint8(),samplePosition:[ve._nextUint8(),ve._nextUint8(),ve._nextUint8(),ve._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&Ue.channelType?(Ue.sampleLower=ve._nextInt32(),Ue.sampleUpper=ve._nextInt32()):(Ue.sampleLower=ve._nextUint32(),Ue.sampleUpper=ve._nextUint32()),ye.samples[Ye]=Ue}ne.dataFormatDescriptor.length=0,ne.dataFormatDescriptor.push(ye);const Ce=new Ii(re,ue,he,!0);for(;Ce._offset<he;){const Ye=Ce._nextUint32(),Ue=Ce._scan(Ye),Ke=Ei(Ue),Xe=Ce._scan(Ye-Ue.byteLength);ne.keyValue[Ke]=Ke.match(/^ktx/i)?Ei(Xe):Xe,Ce._offset%4&&Ce._skip(4-Ce._offset%4)}if(me<=0)return ne;const Se=new Ii(re,fe,me,!0),$e=Se._nextUint16(),Te=Se._nextUint16(),Ne=Se._nextUint32(),Ie=Se._nextUint32(),ke=Se._nextUint32(),De=Se._nextUint32(),Oe=[];for(let Ye=0;Ye<ae;Ye++)Oe.push({imageFlags:Se._nextUint32(),rgbSliceByteOffset:Se._nextUint32(),rgbSliceByteLength:Se._nextUint32(),alphaSliceByteOffset:Se._nextUint32(),alphaSliceByteLength:Se._nextUint32()});const Be=fe+Se._offset,Me=Be+Ne,Le=Me+Ie,je=Le+ke,ze=new Uint8Array(re.buffer,re.byteOffset+Be,Ne),Ve=new Uint8Array(re.buffer,re.byteOffset+Me,Ie),He=new Uint8Array(re.buffer,re.byteOffset+Le,ke),We=new Uint8Array(re.buffer,re.byteOffset+je,De);return ne.globalData={endpointCount:$e,selectorCount:Te,imageDescs:Oe,endpointsData:ze,selectorsData:Ve,tablesData:He,extendedData:We},ne}let A$1,I,B;const g$1={env:{emscripten_notify_memory_growth:function(re){B=new Uint8Array(I.exports.memory.buffer)}}};class Q{init(){return A$1||(A$1=typeof fetch<"u"?fetch("data:application/wasm;base64,"+C).then(ee=>ee.arrayBuffer()).then(ee=>WebAssembly.instantiate(ee,g$1)).then(this._init):WebAssembly.instantiate(Buffer$2.from(C,"base64"),g$1).then(this._init),A$1)}_init(ee){I=ee.instance,g$1.env.emscripten_notify_memory_growth(0)}decode(ee,ne=0){if(!I)throw new Error("ZSTDDecoder: Await .init() before decoding.");const ie=ee.byteLength,oe=I.exports.malloc(ie);B.set(ee,oe),ne=ne||Number(I.exports.ZSTD_findDecompressedSize(oe,ie));const ae=I.exports.malloc(ne),ce=I.exports.ZSTD_decompress(ae,ne,oe,ie),le=B.slice(ae,ae+ce);return I.exports.free(oe),I.exports.free(ae),le}}const C="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",_taskCache=new WeakMap;let _activeLoaders=0,_zstd;class KTX2Loader extends Loader{constructor(ee){super(ee),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new WorkerPool,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER<"u"&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(ee){return this.transcoderPath=ee,this}setWorkerLimit(ee){return this.workerPool.setWorkerLimit(ee),this}detectSupport(ee){return this.workerConfig={astcSupported:ee.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:ee.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:ee.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:ee.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:ee.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:ee.extensions.has("WEBGL_compressed_texture_pvrtc")||ee.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},ee.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const ee=new FileLoader(this.manager);ee.setPath(this.transcoderPath),ee.setWithCredentials(this.withCredentials);const ne=ee.loadAsync("basis_transcoder.js"),ie=new FileLoader(this.manager);ie.setPath(this.transcoderPath),ie.setResponseType("arraybuffer"),ie.setWithCredentials(this.withCredentials);const oe=ie.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([ne,oe]).then(([ae,ce])=>{const le=KTX2Loader.BasisWorker.toString(),ue=["/* constants */","let _EngineFormat = "+JSON.stringify(KTX2Loader.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(KTX2Loader.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(KTX2Loader.BasisFormat),"/* basis_transcoder.js */",ae,"/* worker */",le.substring(le.indexOf("{")+1,le.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([ue])),this.transcoderBinary=ce,this.workerPool.setWorkerCreator(()=>{const he=new Worker(this.workerSourceURL),fe=this.transcoderBinary.slice(0);return he.postMessage({type:"init",config:this.workerConfig,transcoderBinary:fe},[fe]),he})}),_activeLoaders>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),_activeLoaders++}return this.transcoderPending}load(ee,ne,ie,oe){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const ae=new FileLoader(this.manager);ae.setResponseType("arraybuffer"),ae.setWithCredentials(this.withCredentials),ae.load(ee,ce=>{if(_taskCache.has(ce))return _taskCache.get(ce).promise.then(ne).catch(oe);this._createTexture(ce).then(le=>ne?ne(le):null).catch(oe)},ie,oe)}_createTextureFrom(ee,ne){const{mipmaps:ie,width:oe,height:ae,format:ce,type:le,error:ue,dfdTransferFn:he,dfdFlags:fe}=ee;if(le==="error")return Promise.reject(ue);const me=ne.layerCount>1?new CompressedArrayTexture(ie,oe,ae,ne.layerCount,ce,UnsignedByteType):new CompressedTexture(ie,oe,ae,ce,UnsignedByteType);return me.minFilter=ie.length===1?LinearFilter:LinearMipmapLinearFilter,me.magFilter=LinearFilter,me.generateMipmaps=!1,me.needsUpdate=!0,me.encoding=he===x$3?sRGBEncoding:LinearEncoding,me.premultiplyAlpha=!!(fe&p$2),me}async _createTexture(ee,ne={}){const ie=Pi(new Uint8Array(ee));if(ie.vkFormat!==nt)return createDataTexture(ie);const oe=ne,ae=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:ee,taskConfig:oe},[ee])).then(ce=>this._createTextureFrom(ce.data,ie));return _taskCache.set(ee,{promise:ae}),ae}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),_activeLoaders--,this}}KTX2Loader.BasisFormat={ETC1S:0,UASTC_4x4:1};KTX2Loader.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16};KTX2Loader.EngineFormat={RGBAFormat,RGBA_ASTC_4x4_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format};KTX2Loader.BasisWorker=function(){let re,ee,ne;const ie=_EngineFormat,oe=_TranscoderFormat,ae=_BasisFormat;self.addEventListener("message",function(ye){const be=ye.data;switch(be.type){case"init":re=be.config,ce(be.transcoderBinary);break;case"transcode":ee.then(()=>{try{const{width:Ce,height:Se,hasAlpha:$e,mipmaps:Te,format:Ne,dfdTransferFn:Ie,dfdFlags:ke}=le(be.buffer),De=[];for(let Oe=0;Oe<Te.length;++Oe)De.push(Te[Oe].data.buffer);self.postMessage({type:"transcode",id:be.id,width:Ce,height:Se,hasAlpha:$e,mipmaps:Te,format:Ne,dfdTransferFn:Ie,dfdFlags:ke},De)}catch(Ce){console.error(Ce),self.postMessage({type:"error",id:be.id,error:Ce.message})}});break}});function ce(ye){ee=new Promise(be=>{ne={wasmBinary:ye,onRuntimeInitialized:be},BASIS(ne)}).then(()=>{ne.initializeBasis(),ne.KTX2File===void 0&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function le(ye){const be=new ne.KTX2File(new Uint8Array(ye));function Ce(){be.close(),be.delete()}if(!be.isValid())throw Ce(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const Se=be.isUASTC()?ae.UASTC_4x4:ae.ETC1S,$e=be.getWidth(),Te=be.getHeight(),Ne=be.getLayers()||1,Ie=be.getLevels(),ke=be.getHasAlpha(),De=be.getDFDTransferFunc(),Oe=be.getDFDFlags(),{transcoderFormat:Be,engineFormat:Me}=me(Se,$e,Te,ke);if(!$e||!Te||!Ie)throw Ce(),new Error("THREE.KTX2Loader:	Invalid texture");if(!be.startTranscoding())throw Ce(),new Error("THREE.KTX2Loader: .startTranscoding failed");const Le=[];for(let je=0;je<Ie;je++){const ze=[];let Ve,He;for(let We=0;We<Ne;We++){const Ye=be.getImageLevelInfo(je,We,0);Ve=Ye.origWidth,He=Ye.origHeight;const Ue=new Uint8Array(be.getImageTranscodedSizeInBytes(je,We,0,Be));if(!be.transcodeImage(Ue,je,We,0,Be,0,-1,-1))throw Ce(),new Error("THREE.KTX2Loader: .transcodeImage failed.");ze.push(Ue)}Le.push({data:ve(ze),width:Ve,height:He})}return Ce(),{width:$e,height:Te,hasAlpha:ke,mipmaps:Le,format:Me,dfdTransferFn:De,dfdFlags:Oe}}const ue=[{if:"astcSupported",basisFormat:[ae.UASTC_4x4],transcoderFormat:[oe.ASTC_4x4,oe.ASTC_4x4],engineFormat:[ie.RGBA_ASTC_4x4_Format,ie.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[ae.ETC1S,ae.UASTC_4x4],transcoderFormat:[oe.BC7_M5,oe.BC7_M5],engineFormat:[ie.RGBA_BPTC_Format,ie.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[ae.ETC1S,ae.UASTC_4x4],transcoderFormat:[oe.BC1,oe.BC3],engineFormat:[ie.RGB_S3TC_DXT1_Format,ie.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[ae.ETC1S,ae.UASTC_4x4],transcoderFormat:[oe.ETC1,oe.ETC2],engineFormat:[ie.RGB_ETC2_Format,ie.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[ae.ETC1S,ae.UASTC_4x4],transcoderFormat:[oe.ETC1],engineFormat:[ie.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[ae.ETC1S,ae.UASTC_4x4],transcoderFormat:[oe.PVRTC1_4_RGB,oe.PVRTC1_4_RGBA],engineFormat:[ie.RGB_PVRTC_4BPPV1_Format,ie.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],he=ue.sort(function(ye,be){return ye.priorityETC1S-be.priorityETC1S}),fe=ue.sort(function(ye,be){return ye.priorityUASTC-be.priorityUASTC});function me(ye,be,Ce,Se){let $e,Te;const Ne=ye===ae.ETC1S?he:fe;for(let Ie=0;Ie<Ne.length;Ie++){const ke=Ne[Ie];if(re[ke.if]&&ke.basisFormat.includes(ye)&&!(Se&&ke.transcoderFormat.length<2)&&!(ke.needsPowerOfTwo&&!(ge(be)&&ge(Ce))))return $e=ke.transcoderFormat[Se?1:0],Te=ke.engineFormat[Se?1:0],{transcoderFormat:$e,engineFormat:Te}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),$e=oe.RGBA32,Te=ie.RGBAFormat,{transcoderFormat:$e,engineFormat:Te}}function ge(ye){return ye<=2?!0:(ye&ye-1)===0&&ye!==0}function ve(ye){let be=0;for(const $e of ye)be+=$e.byteLength;const Ce=new Uint8Array(be);let Se=0;for(const $e of ye)Ce.set($e,Se),Se+=$e.byteLength;return Ce}};const FORMAT_MAP={[Ae]:RGBAFormat,[pe]:RGBAFormat,[Ot]:RGBAFormat,[Ft]:RGBAFormat,[de]:RGFormat,[se]:RGFormat,[yt]:RGFormat,[dt]:RGFormat,[xe]:RedFormat,[$t]:RedFormat,[gt]:RedFormat,[ct]:RedFormat},TYPE_MAP={[Ae]:FloatType,[pe]:HalfFloatType,[Ot]:UnsignedByteType,[Ft]:UnsignedByteType,[de]:FloatType,[se]:HalfFloatType,[yt]:UnsignedByteType,[dt]:UnsignedByteType,[xe]:FloatType,[$t]:HalfFloatType,[gt]:UnsignedByteType,[ct]:UnsignedByteType},ENCODING_MAP={[Ft]:sRGBEncoding,[dt]:sRGBEncoding,[gt]:sRGBEncoding};async function createDataTexture(re){const{vkFormat:ee,pixelWidth:ne,pixelHeight:ie,pixelDepth:oe}=re;if(FORMAT_MAP[ee]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const ae=re.levels[0];let ce,le;if(re.supercompressionScheme===t$1)ce=ae.levelData;else if(re.supercompressionScheme===n$1)_zstd||(_zstd=new Promise(async he=>{const fe=new Q;await fe.init(),he(fe)})),ce=(await _zstd).decode(ae.levelData,ae.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");TYPE_MAP[ee]===FloatType?le=new Float32Array(ce.buffer,ce.byteOffset,ce.byteLength/Float32Array.BYTES_PER_ELEMENT):TYPE_MAP[ee]===HalfFloatType?le=new Uint16Array(ce.buffer,ce.byteOffset,ce.byteLength/Uint16Array.BYTES_PER_ELEMENT):le=ce;const ue=oe===0?new DataTexture(le,ne,ie):new Data3DTexture(le,ne,ie,oe);return ue.type=TYPE_MAP[ee],ue.format=FORMAT_MAP[ee],ue.encoding=ENCODING_MAP[ee]||LinearEncoding,ue.needsUpdate=!0,Promise.resolve(ue)}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$a,_b$9;const $retainerCount=Symbol("retainerCount"),$recentlyUsed=Symbol("recentlyUsed"),$evict=Symbol("evict"),$evictionThreshold=Symbol("evictionThreshold"),$cache=Symbol("cache");class CacheEvictionPolicy{constructor(ee,ne=5){this[_a$a]=new Map,this[_b$9]=[],this[$cache]=ee,this[$evictionThreshold]=ne}set evictionThreshold(ee){this[$evictionThreshold]=ee,this[$evict]()}get evictionThreshold(){return this[$evictionThreshold]}get cache(){return this[$cache]}retainerCount(ee){return this[$retainerCount].get(ee)||0}reset(){this[$retainerCount].clear(),this[$recentlyUsed]=[]}retain(ee){this[$retainerCount].has(ee)||this[$retainerCount].set(ee,0),this[$retainerCount].set(ee,this[$retainerCount].get(ee)+1);const ne=this[$recentlyUsed].indexOf(ee);ne!==-1&&this[$recentlyUsed].splice(ne,1),this[$recentlyUsed].unshift(ee),this[$evict]()}release(ee){this[$retainerCount].has(ee)&&this[$retainerCount].set(ee,Math.max(this[$retainerCount].get(ee)-1,0)),this[$evict]()}[(_a$a=$retainerCount,_b$9=$recentlyUsed,$evict)](){if(!(this[$recentlyUsed].length<this[$evictionThreshold]))for(let ee=this[$recentlyUsed].length-1;ee>=this[$evictionThreshold];--ee){const ne=this[$recentlyUsed][ee];this[$retainerCount].get(ne)===0&&(this[$cache].delete(ne),this[$recentlyUsed].splice(ee,1))}}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ensureUniqueNames=re=>{const ee=[],ne=new Set;for(const ie of re){let oe=ie,ae=0;for(;ne.has(oe);)oe=ie+"."+ ++ae;ne.add(oe),ee.push(oe)}return ee},mappingsArrayToTable=re=>{const ee=new Map;for(const ne of re.mappings)for(const ie of ne.variants)ee.set(ie,{material:null,gltfMaterialIndex:ne.material});return ee};class GLTFMaterialsVariantsExtension{constructor(ee){this.parser=ee,this.name="KHR_materials_variants"}afterRoot(ee){const ne=this.parser,ie=ne.json;if(ie.extensions===void 0||ie.extensions[this.name]===void 0)return null;const ae=ie.extensions[this.name].variants||[],ce=ensureUniqueNames(ae.map(le=>le.name));for(const le of ee.scenes)le.traverse(ue=>{const he=ue;if(!he.isMesh)return;const fe=ne.associations.get(he);if(fe==null||fe.meshes==null||fe.primitives==null)return;const ye=ie.meshes[fe.meshes].primitives[fe.primitives].extensions;!ye||!ye[this.name]||(he.userData.variantMaterials=mappingsArrayToTable(ye[this.name]))});return ee.userData.variants=ce,Promise.resolve()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$9,_b$8;Texture$1.DEFAULT_ANISOTROPY=4;const loadWithLoader=(re,ee,ne=()=>{})=>{const ie=oe=>{const ae=oe.loaded/oe.total;ne(Math.max(0,Math.min(1,isFinite(ae)?ae:1)))};return new Promise((oe,ae)=>{ee.load(re,oe,ie,ae)})},fetchScript=re=>new Promise((ee,ne)=>{const ie=document.createElement("script");document.body.appendChild(ie),ie.onload=ee,ie.onerror=ne,ie.async=!0,ie.src=re}),cache$1=new Map,preloaded=new Map;let dracoDecoderLocation;const dracoLoader=new DRACOLoader;let ktx2TranscoderLocation;const ktx2Loader=new KTX2Loader;let meshoptDecoderLocation,meshoptDecoder;const $loader=Symbol("loader"),$evictionPolicy=Symbol("evictionPolicy"),$GLTFInstance=Symbol("GLTFInstance");class CachingGLTFLoader extends EventDispatcher{constructor(ee){super(),this[_b$8]=new GLTFLoader().register(ne=>new GLTFMaterialsVariantsExtension(ne)),this[$GLTFInstance]=ee,this[$loader].setDRACOLoader(dracoLoader),this[$loader].setKTX2Loader(ktx2Loader)}static setDRACODecoderLocation(ee){dracoDecoderLocation=ee,dracoLoader.setDecoderPath(ee)}static getDRACODecoderLocation(){return dracoDecoderLocation}static setKTX2TranscoderLocation(ee){ktx2TranscoderLocation=ee,ktx2Loader.setTranscoderPath(ee)}static getKTX2TranscoderLocation(){return ktx2TranscoderLocation}static setMeshoptDecoderLocation(ee){meshoptDecoderLocation!==ee&&(meshoptDecoderLocation=ee,meshoptDecoder=fetchScript(ee).then(()=>MeshoptDecoder.ready).then(()=>MeshoptDecoder))}static getMeshoptDecoderLocation(){return meshoptDecoderLocation}static initializeKTX2Loader(ee){ktx2Loader.detectSupport(ee)}static get cache(){return cache$1}static clearCache(){cache$1.forEach((ee,ne)=>{this.delete(ne)}),this[$evictionPolicy].reset()}static has(ee){return cache$1.has(ee)}static async delete(ee){if(!this.has(ee))return;const ne=cache$1.get(ee);preloaded.delete(ee),cache$1.delete(ee),(await ne).dispose()}static hasFinishedLoading(ee){return!!preloaded.get(ee)}get[(_a$9=$evictionPolicy,_b$8=$loader,$evictionPolicy)](){return this.constructor[$evictionPolicy]}async preload(ee,ne,ie=()=>{}){if(this[$loader].setWithCredentials(CachingGLTFLoader.withCredentials),this.dispatchEvent({type:"preload",element:ne,src:ee}),!cache$1.has(ee)){meshoptDecoder!=null&&this[$loader].setMeshoptDecoder(await meshoptDecoder);const oe=loadWithLoader(ee,this[$loader],le=>{ie(le*.8)}),ae=this[$GLTFInstance],ce=oe.then(le=>ae.prepare(le)).then(le=>(ie(.9),new ae(le))).catch(le=>(console.error(le),new ae));cache$1.set(ee,ce)}await cache$1.get(ee),preloaded.set(ee,!0),ie&&ie(1)}async load(ee,ne,ie=()=>{}){await this.preload(ee,ne,ie);const ae=await(await cache$1.get(ee)).clone();return this[$evictionPolicy].retain(ee),ae.dispose=()=>{this[$evictionPolicy].release(ee)},ae}}CachingGLTFLoader[_a$9]=new CacheEvictionPolicy(CachingGLTFLoader);class CSS2DObject extends Object3D{constructor(ee=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=ee,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(ne){ne.element instanceof Element&&ne.element.parentNode!==null&&ne.element.parentNode.removeChild(ne.element)})})}copy(ee,ne){return super.copy(ee,ne),this.element=ee.element.cloneNode(!0),this}}const _vector=new Vector3,_viewMatrix=new Matrix4,_viewProjectionMatrix=new Matrix4,_a$8=new Vector3,_b$7=new Vector3;class CSS2DRenderer{constructor(ee={}){const ne=this;let ie,oe,ae,ce;const le={objects:new WeakMap},ue=ee.element!==void 0?ee.element:document.createElement("div");ue.style.overflow="hidden",this.domElement=ue,this.getSize=function(){return{width:ie,height:oe}},this.render=function(ve,ye){ve.matrixWorldAutoUpdate===!0&&ve.updateMatrixWorld(),ye.parent===null&&ye.matrixWorldAutoUpdate===!0&&ye.updateMatrixWorld(),_viewMatrix.copy(ye.matrixWorldInverse),_viewProjectionMatrix.multiplyMatrices(ye.projectionMatrix,_viewMatrix),he(ve,ve,ye),ge(ve)},this.setSize=function(ve,ye){ie=ve,oe=ye,ae=ie/2,ce=oe/2,ue.style.width=ve+"px",ue.style.height=ye+"px"};function he(ve,ye,be){if(ve.isCSS2DObject){_vector.setFromMatrixPosition(ve.matrixWorld),_vector.applyMatrix4(_viewProjectionMatrix);const Ce=ve.visible===!0&&_vector.z>=-1&&_vector.z<=1&&ve.layers.test(be.layers)===!0;if(ve.element.style.display=Ce===!0?"":"none",Ce===!0){ve.onBeforeRender(ne,ye,be);const $e=ve.element;$e.style.transform="translate(-50%,-50%) translate("+(_vector.x*ae+ae)+"px,"+(-_vector.y*ce+ce)+"px)",$e.parentNode!==ue&&ue.appendChild($e),ve.onAfterRender(ne,ye,be)}const Se={distanceToCameraSquared:fe(be,ve)};le.objects.set(ve,Se)}for(let Ce=0,Se=ve.children.length;Ce<Se;Ce++)he(ve.children[Ce],ye,be)}function fe(ve,ye){return _a$8.setFromMatrixPosition(ve.matrixWorld),_b$7.setFromMatrixPosition(ye.matrixWorld),_a$8.distanceToSquared(_b$7)}function me(ve){const ye=[];return ve.traverse(function(be){be.isCSS2DObject&&ye.push(be)}),ye}function ge(ve){const ye=me(ve).sort(function(Ce,Se){if(Ce.renderOrder!==Se.renderOrder)return Se.renderOrder-Ce.renderOrder;const $e=le.objects.get(Ce).distanceToCameraSquared,Te=le.objects.get(Se).distanceToCameraSquared;return $e-Te}),be=ye.length;for(let Ce=0,Se=ye.length;Ce<Se;Ce++)ye[Ce].element.style.zIndex=be-Ce}}}function reduceVertices(re,ee,ne){let ie=ne;const oe=new Vector3;return re.updateWorldMatrix(!0,!0),re.traverseVisible(ae=>{const{geometry:ce}=ae;if(ce!==void 0){const{position:le}=ce.attributes;if(le!==void 0)for(let ue=0,he=le.count;ue<he;ue++)ae.isMesh?ae.getVertexPosition(ue,oe):oe.fromBufferAttribute(le,ue),ae.isSkinnedMesh||oe.applyMatrix4(ae.matrixWorld),ie=ee(ie,oe)}}),ie}class GLTFExporter{constructor(){this.pluginCallbacks=[],this.register(function(ee){return new GLTFLightExtension(ee)}),this.register(function(ee){return new GLTFMaterialsUnlitExtension(ee)}),this.register(function(ee){return new GLTFMaterialsTransmissionExtension(ee)}),this.register(function(ee){return new GLTFMaterialsVolumeExtension(ee)}),this.register(function(ee){return new GLTFMaterialsIorExtension(ee)}),this.register(function(ee){return new GLTFMaterialsSpecularExtension(ee)}),this.register(function(ee){return new GLTFMaterialsClearcoatExtension(ee)}),this.register(function(ee){return new GLTFMaterialsIridescenceExtension(ee)})}register(ee){return this.pluginCallbacks.indexOf(ee)===-1&&this.pluginCallbacks.push(ee),this}unregister(ee){return this.pluginCallbacks.indexOf(ee)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(ee),1),this}parse(ee,ne,ie,oe){const ae=new GLTFWriter,ce=[];for(let le=0,ue=this.pluginCallbacks.length;le<ue;le++)ce.push(this.pluginCallbacks[le](ae));ae.setPlugins(ce),ae.write(ee,ne,oe).catch(ie)}parseAsync(ee,ne){const ie=this;return new Promise(function(oe,ae){ie.parse(ee,oe,ae,ne)})}}const WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,FLOAT:5126,UNSIGNED_INT:5125,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},THREE_TO_WEBGL={};THREE_TO_WEBGL[NearestFilter]=WEBGL_CONSTANTS.NEAREST;THREE_TO_WEBGL[NearestMipmapNearestFilter]=WEBGL_CONSTANTS.NEAREST_MIPMAP_NEAREST;THREE_TO_WEBGL[NearestMipmapLinearFilter]=WEBGL_CONSTANTS.NEAREST_MIPMAP_LINEAR;THREE_TO_WEBGL[LinearFilter]=WEBGL_CONSTANTS.LINEAR;THREE_TO_WEBGL[LinearMipmapNearestFilter]=WEBGL_CONSTANTS.LINEAR_MIPMAP_NEAREST;THREE_TO_WEBGL[LinearMipmapLinearFilter]=WEBGL_CONSTANTS.LINEAR_MIPMAP_LINEAR;THREE_TO_WEBGL[ClampToEdgeWrapping]=WEBGL_CONSTANTS.CLAMP_TO_EDGE;THREE_TO_WEBGL[RepeatWrapping]=WEBGL_CONSTANTS.REPEAT;THREE_TO_WEBGL[MirroredRepeatWrapping]=WEBGL_CONSTANTS.MIRRORED_REPEAT;const PATH_PROPERTIES={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},DEFAULT_SPECULAR_COLOR=new Color,GLB_HEADER_BYTES=12,GLB_HEADER_MAGIC=1179937895,GLB_VERSION=2,GLB_CHUNK_PREFIX_BYTES=8,GLB_CHUNK_TYPE_JSON=1313821514,GLB_CHUNK_TYPE_BIN=5130562;function equalArray(re,ee){return re.length===ee.length&&re.every(function(ne,ie){return ne===ee[ie]})}function stringToArrayBuffer(re){return new TextEncoder().encode(re).buffer}function isIdentityMatrix(re){return equalArray(re.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function getMinMax(re,ee,ne){const ie={min:new Array(re.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(re.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let oe=ee;oe<ee+ne;oe++)for(let ae=0;ae<re.itemSize;ae++){let ce;re.itemSize>4?ce=re.array[oe*re.itemSize+ae]:(ae===0?ce=re.getX(oe):ae===1?ce=re.getY(oe):ae===2?ce=re.getZ(oe):ae===3&&(ce=re.getW(oe)),re.normalized===!0&&(ce=MathUtils.normalize(ce,re.array))),ie.min[ae]=Math.min(ie.min[ae],ce),ie.max[ae]=Math.max(ie.max[ae],ce)}return ie}function getPaddedBufferSize(re){return Math.ceil(re/4)*4}function getPaddedArrayBuffer(re,ee=0){const ne=getPaddedBufferSize(re.byteLength);if(ne!==re.byteLength){const ie=new Uint8Array(ne);if(ie.set(new Uint8Array(re)),ee!==0)for(let oe=re.byteLength;oe<ne;oe++)ie[oe]=ee;return ie.buffer}return re}function getCanvas(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function getToBlobPromise(re,ee){if(re.toBlob!==void 0)return new Promise(ie=>re.toBlob(ie,ee));let ne;return ee==="image/jpeg"?ne=.92:ee==="image/webp"&&(ne=.8),re.convertToBlob({type:ee,quality:ne})}class GLTFWriter{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter"}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(ee){this.plugins=ee}async write(ee,ne,ie={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},ie),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(ee),await Promise.all(this.pending);const oe=this,ae=oe.buffers,ce=oe.json;ie=oe.options;const le=oe.extensionsUsed,ue=new Blob(ae,{type:"application/octet-stream"}),he=Object.keys(le);if(he.length>0&&(ce.extensionsUsed=he),ce.buffers&&ce.buffers.length>0&&(ce.buffers[0].byteLength=ue.size),ie.binary===!0){const fe=new FileReader;fe.readAsArrayBuffer(ue),fe.onloadend=function(){const me=getPaddedArrayBuffer(fe.result),ge=new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));ge.setUint32(0,me.byteLength,!0),ge.setUint32(4,GLB_CHUNK_TYPE_BIN,!0);const ve=getPaddedArrayBuffer(stringToArrayBuffer(JSON.stringify(ce)),32),ye=new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));ye.setUint32(0,ve.byteLength,!0),ye.setUint32(4,GLB_CHUNK_TYPE_JSON,!0);const be=new ArrayBuffer(GLB_HEADER_BYTES),Ce=new DataView(be);Ce.setUint32(0,GLB_HEADER_MAGIC,!0),Ce.setUint32(4,GLB_VERSION,!0);const Se=GLB_HEADER_BYTES+ye.byteLength+ve.byteLength+ge.byteLength+me.byteLength;Ce.setUint32(8,Se,!0);const $e=new Blob([be,ye,ve,ge,me],{type:"application/octet-stream"}),Te=new FileReader;Te.readAsArrayBuffer($e),Te.onloadend=function(){ne(Te.result)}}}else if(ce.buffers&&ce.buffers.length>0){const fe=new FileReader;fe.readAsDataURL(ue),fe.onloadend=function(){const me=fe.result;ce.buffers[0].uri=me,ne(ce)}}else ne(ce)}serializeUserData(ee,ne){if(Object.keys(ee.userData).length===0)return;const ie=this.options,oe=this.extensionsUsed;try{const ae=JSON.parse(JSON.stringify(ee.userData));if(ie.includeCustomExtensions&&ae.gltfExtensions){ne.extensions===void 0&&(ne.extensions={});for(const ce in ae.gltfExtensions)ne.extensions[ce]=ae.gltfExtensions[ce],oe[ce]=!0;delete ae.gltfExtensions}Object.keys(ae).length>0&&(ne.extras=ae)}catch(ae){console.warn("THREE.GLTFExporter: userData of '"+ee.name+"' won't be serialized because of JSON.stringify error - "+ae.message)}}getUID(ee,ne=!1){if(this.uids.has(ee)===!1){const oe=new Map;oe.set(!0,this.uid++),oe.set(!1,this.uid++),this.uids.set(ee,oe)}return this.uids.get(ee).get(ne)}isNormalizedNormalAttribute(ee){if(this.cache.attributesNormalized.has(ee))return!1;const ie=new Vector3;for(let oe=0,ae=ee.count;oe<ae;oe++)if(Math.abs(ie.fromBufferAttribute(ee,oe).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(ee){const ne=this.cache;if(ne.attributesNormalized.has(ee))return ne.attributesNormalized.get(ee);const ie=ee.clone(),oe=new Vector3;for(let ae=0,ce=ie.count;ae<ce;ae++)oe.fromBufferAttribute(ie,ae),oe.x===0&&oe.y===0&&oe.z===0?oe.setX(1):oe.normalize(),ie.setXYZ(ae,oe.x,oe.y,oe.z);return ne.attributesNormalized.set(ee,ie),ie}applyTextureTransform(ee,ne){let ie=!1;const oe={};(ne.offset.x!==0||ne.offset.y!==0)&&(oe.offset=ne.offset.toArray(),ie=!0),ne.rotation!==0&&(oe.rotation=ne.rotation,ie=!0),(ne.repeat.x!==1||ne.repeat.y!==1)&&(oe.scale=ne.repeat.toArray(),ie=!0),ie&&(ee.extensions=ee.extensions||{},ee.extensions.KHR_texture_transform=oe,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(ee,ne){if(ee===ne)return ee;function ie(ve){return ve.encoding===sRGBEncoding?function(be){return be<.04045?be*.0773993808:Math.pow(be*.9478672986+.0521327014,2.4)}:function(be){return be}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures.");const oe=ee?ee.image:null,ae=ne?ne.image:null,ce=Math.max(oe?oe.width:0,ae?ae.width:0),le=Math.max(oe?oe.height:0,ae?ae.height:0),ue=getCanvas();ue.width=ce,ue.height=le;const he=ue.getContext("2d");he.fillStyle="#00ffff",he.fillRect(0,0,ce,le);const fe=he.getImageData(0,0,ce,le);if(oe){he.drawImage(oe,0,0,ce,le);const ve=ie(ee),ye=he.getImageData(0,0,ce,le).data;for(let be=2;be<ye.length;be+=4)fe.data[be]=ve(ye[be]/256)*256}if(ae){he.drawImage(ae,0,0,ce,le);const ve=ie(ne),ye=he.getImageData(0,0,ce,le).data;for(let be=1;be<ye.length;be+=4)fe.data[be]=ve(ye[be]/256)*256}he.putImageData(fe,0,0);const ge=(ee||ne).clone();return ge.source=new Source$2(ue),ge.encoding=LinearEncoding,ge}processBuffer(ee){const ne=this.json,ie=this.buffers;return ne.buffers||(ne.buffers=[{byteLength:0}]),ie.push(ee),0}processBufferView(ee,ne,ie,oe,ae){const ce=this.json;ce.bufferViews||(ce.bufferViews=[]);let le;ne===WEBGL_CONSTANTS.UNSIGNED_BYTE?le=1:ne===WEBGL_CONSTANTS.UNSIGNED_SHORT?le=2:le=4;const ue=getPaddedBufferSize(oe*ee.itemSize*le),he=new DataView(new ArrayBuffer(ue));let fe=0;for(let ve=ie;ve<ie+oe;ve++)for(let ye=0;ye<ee.itemSize;ye++){let be;ee.itemSize>4?be=ee.array[ve*ee.itemSize+ye]:(ye===0?be=ee.getX(ve):ye===1?be=ee.getY(ve):ye===2?be=ee.getZ(ve):ye===3&&(be=ee.getW(ve)),ee.normalized===!0&&(be=MathUtils.normalize(be,ee.array))),ne===WEBGL_CONSTANTS.FLOAT?he.setFloat32(fe,be,!0):ne===WEBGL_CONSTANTS.UNSIGNED_INT?he.setUint32(fe,be,!0):ne===WEBGL_CONSTANTS.UNSIGNED_SHORT?he.setUint16(fe,be,!0):ne===WEBGL_CONSTANTS.UNSIGNED_BYTE&&he.setUint8(fe,be),fe+=le}const me={buffer:this.processBuffer(he.buffer),byteOffset:this.byteOffset,byteLength:ue};return ae!==void 0&&(me.target=ae),ae===WEBGL_CONSTANTS.ARRAY_BUFFER&&(me.byteStride=ee.itemSize*le),this.byteOffset+=ue,ce.bufferViews.push(me),{id:ce.bufferViews.length-1,byteLength:0}}processBufferViewImage(ee){const ne=this,ie=ne.json;return ie.bufferViews||(ie.bufferViews=[]),new Promise(function(oe){const ae=new FileReader;ae.readAsArrayBuffer(ee),ae.onloadend=function(){const ce=getPaddedArrayBuffer(ae.result),le={buffer:ne.processBuffer(ce),byteOffset:ne.byteOffset,byteLength:ce.byteLength};ne.byteOffset+=ce.byteLength,oe(ie.bufferViews.push(le)-1)}})}processAccessor(ee,ne,ie,oe){const ae=this.json,ce={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",16:"MAT4"};let le;if(ee.array.constructor===Float32Array)le=WEBGL_CONSTANTS.FLOAT;else if(ee.array.constructor===Uint32Array)le=WEBGL_CONSTANTS.UNSIGNED_INT;else if(ee.array.constructor===Uint16Array)le=WEBGL_CONSTANTS.UNSIGNED_SHORT;else if(ee.array.constructor===Uint8Array)le=WEBGL_CONSTANTS.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type.");if(ie===void 0&&(ie=0),oe===void 0&&(oe=ee.count),oe===0)return null;const ue=getMinMax(ee,ie,oe);let he;ne!==void 0&&(he=ee===ne.index?WEBGL_CONSTANTS.ELEMENT_ARRAY_BUFFER:WEBGL_CONSTANTS.ARRAY_BUFFER);const fe=this.processBufferView(ee,le,ie,oe,he),me={bufferView:fe.id,byteOffset:fe.byteOffset,componentType:le,count:oe,max:ue.max,min:ue.min,type:ce[ee.itemSize]};return ee.normalized===!0&&(me.normalized=!0),ae.accessors||(ae.accessors=[]),ae.accessors.push(me)-1}processImage(ee,ne,ie,oe="image/png"){if(ee!==null){const ae=this,ce=ae.cache,le=ae.json,ue=ae.options,he=ae.pending;ce.images.has(ee)||ce.images.set(ee,{});const fe=ce.images.get(ee),me=oe+":flipY/"+ie.toString();if(fe[me]!==void 0)return fe[me];le.images||(le.images=[]);const ge={mimeType:oe},ve=getCanvas();ve.width=Math.min(ee.width,ue.maxTextureSize),ve.height=Math.min(ee.height,ue.maxTextureSize);const ye=ve.getContext("2d");if(ie===!0&&(ye.translate(0,ve.height),ye.scale(1,-1)),ee.data!==void 0){ne!==RGBAFormat&&console.error("GLTFExporter: Only RGBAFormat is supported."),(ee.width>ue.maxTextureSize||ee.height>ue.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",ee);const Ce=new Uint8ClampedArray(ee.height*ee.width*4);for(let Se=0;Se<Ce.length;Se+=4)Ce[Se+0]=ee.data[Se+0],Ce[Se+1]=ee.data[Se+1],Ce[Se+2]=ee.data[Se+2],Ce[Se+3]=ee.data[Se+3];ye.putImageData(new ImageData(Ce,ee.width,ee.height),0,0)}else ye.drawImage(ee,0,0,ve.width,ve.height);ue.binary===!0?he.push(getToBlobPromise(ve,oe).then(Ce=>ae.processBufferViewImage(Ce)).then(Ce=>{ge.bufferView=Ce})):ve.toDataURL!==void 0?ge.uri=ve.toDataURL(oe):he.push(getToBlobPromise(ve,oe).then(Ce=>new FileReader().readAsDataURL(Ce)).then(Ce=>{ge.uri=Ce}));const be=le.images.push(ge)-1;return fe[me]=be,be}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(ee){const ne=this.json;ne.samplers||(ne.samplers=[]);const ie={magFilter:THREE_TO_WEBGL[ee.magFilter],minFilter:THREE_TO_WEBGL[ee.minFilter],wrapS:THREE_TO_WEBGL[ee.wrapS],wrapT:THREE_TO_WEBGL[ee.wrapT]};return ne.samplers.push(ie)-1}processTexture(ee){const ne=this.cache,ie=this.json;if(ne.textures.has(ee))return ne.textures.get(ee);ie.textures||(ie.textures=[]);let oe=ee.userData.mimeType;oe==="image/webp"&&(oe="image/png");const ae={sampler:this.processSampler(ee),source:this.processImage(ee.image,ee.format,ee.flipY,oe)};ee.name&&(ae.name=ee.name),this._invokeAll(function(le){le.writeTexture&&le.writeTexture(ee,ae)});const ce=ie.textures.push(ae)-1;return ne.textures.set(ee,ce),ce}processMaterial(ee){const ne=this.cache,ie=this.json;if(ne.materials.has(ee))return ne.materials.get(ee);if(ee.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;ie.materials||(ie.materials=[]);const oe={pbrMetallicRoughness:{}};ee.isMeshStandardMaterial!==!0&&ee.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const ae=ee.color.toArray().concat([ee.opacity]);if(equalArray(ae,[1,1,1,1])||(oe.pbrMetallicRoughness.baseColorFactor=ae),ee.isMeshStandardMaterial?(oe.pbrMetallicRoughness.metallicFactor=ee.metalness,oe.pbrMetallicRoughness.roughnessFactor=ee.roughness):(oe.pbrMetallicRoughness.metallicFactor=.5,oe.pbrMetallicRoughness.roughnessFactor=.5),ee.metalnessMap||ee.roughnessMap){const le=this.buildMetalRoughTexture(ee.metalnessMap,ee.roughnessMap),ue={index:this.processTexture(le)};this.applyTextureTransform(ue,le),oe.pbrMetallicRoughness.metallicRoughnessTexture=ue}if(ee.map){const le={index:this.processTexture(ee.map)};this.applyTextureTransform(le,ee.map),oe.pbrMetallicRoughness.baseColorTexture=le}if(ee.emissive){const le=ee.emissive.clone().multiplyScalar(ee.emissiveIntensity),ue=Math.max(le.r,le.g,le.b);if(ue>1&&(le.multiplyScalar(1/ue),console.warn("THREE.GLTFExporter: Some emissive components exceed 1; emissive has been limited")),ue>0&&(oe.emissiveFactor=le.toArray()),ee.emissiveMap){const he={index:this.processTexture(ee.emissiveMap)};this.applyTextureTransform(he,ee.emissiveMap),oe.emissiveTexture=he}}if(ee.normalMap){const le={index:this.processTexture(ee.normalMap)};ee.normalScale&&ee.normalScale.x!==1&&(le.scale=ee.normalScale.x),this.applyTextureTransform(le,ee.normalMap),oe.normalTexture=le}if(ee.aoMap){const le={index:this.processTexture(ee.aoMap),texCoord:1};ee.aoMapIntensity!==1&&(le.strength=ee.aoMapIntensity),this.applyTextureTransform(le,ee.aoMap),oe.occlusionTexture=le}ee.transparent?oe.alphaMode="BLEND":ee.alphaTest>0&&(oe.alphaMode="MASK",oe.alphaCutoff=ee.alphaTest),ee.side===DoubleSide&&(oe.doubleSided=!0),ee.name!==""&&(oe.name=ee.name),this.serializeUserData(ee,oe),this._invokeAll(function(le){le.writeMaterial&&le.writeMaterial(ee,oe)});const ce=ie.materials.push(oe)-1;return ne.materials.set(ee,ce),ce}processMesh(ee){const ne=this.cache,ie=this.json,oe=[ee.geometry.uuid];if(Array.isArray(ee.material))for(let Te=0,Ne=ee.material.length;Te<Ne;Te++)oe.push(ee.material[Te].uuid);else oe.push(ee.material.uuid);const ae=oe.join(":");if(ne.meshes.has(ae))return ne.meshes.get(ae);const ce=ee.geometry;let le;ee.isLineSegments?le=WEBGL_CONSTANTS.LINES:ee.isLineLoop?le=WEBGL_CONSTANTS.LINE_LOOP:ee.isLine?le=WEBGL_CONSTANTS.LINE_STRIP:ee.isPoints?le=WEBGL_CONSTANTS.POINTS:le=ee.material.wireframe?WEBGL_CONSTANTS.LINES:WEBGL_CONSTANTS.TRIANGLES;const ue={},he={},fe=[],me=[],ge={uv:"TEXCOORD_0",uv2:"TEXCOORD_1",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},ve=ce.getAttribute("normal");ve!==void 0&&!this.isNormalizedNormalAttribute(ve)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),ce.setAttribute("normal",this.createNormalizedNormalAttribute(ve)));let ye=null;for(let Te in ce.attributes){if(Te.slice(0,5)==="morph")continue;const Ne=ce.attributes[Te];if(Te=ge[Te]||Te.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(Te)||(Te="_"+Te),ne.attributes.has(this.getUID(Ne))){he[Te]=ne.attributes.get(this.getUID(Ne));continue}ye=null;const ke=Ne.array;Te==="JOINTS_0"&&!(ke instanceof Uint16Array)&&!(ke instanceof Uint8Array)&&(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),ye=new BufferAttribute(new Uint16Array(ke),Ne.itemSize,Ne.normalized));const De=this.processAccessor(ye||Ne,ce);De!==null&&(he[Te]=De,ne.attributes.set(this.getUID(Ne),De))}if(ve!==void 0&&ce.setAttribute("normal",ve),Object.keys(he).length===0)return null;if(ee.morphTargetInfluences!==void 0&&ee.morphTargetInfluences.length>0){const Te=[],Ne=[],Ie={};if(ee.morphTargetDictionary!==void 0)for(const ke in ee.morphTargetDictionary)Ie[ee.morphTargetDictionary[ke]]=ke;for(let ke=0;ke<ee.morphTargetInfluences.length;++ke){const De={};let Oe=!1;for(const Be in ce.morphAttributes){if(Be!=="position"&&Be!=="normal"){Oe||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),Oe=!0);continue}const Me=ce.morphAttributes[Be][ke],Le=Be.toUpperCase(),je=ce.attributes[Be];if(ne.attributes.has(this.getUID(Me,!0))){De[Le]=ne.attributes.get(this.getUID(Me,!0));continue}const ze=Me.clone();if(!ce.morphTargetsRelative)for(let Ve=0,He=Me.count;Ve<He;Ve++)for(let We=0;We<Me.itemSize;We++)We===0&&ze.setX(Ve,Me.getX(Ve)-je.getX(Ve)),We===1&&ze.setY(Ve,Me.getY(Ve)-je.getY(Ve)),We===2&&ze.setZ(Ve,Me.getZ(Ve)-je.getZ(Ve)),We===3&&ze.setW(Ve,Me.getW(Ve)-je.getW(Ve));De[Le]=this.processAccessor(ze,ce),ne.attributes.set(this.getUID(je,!0),De[Le])}me.push(De),Te.push(ee.morphTargetInfluences[ke]),ee.morphTargetDictionary!==void 0&&Ne.push(Ie[ke])}ue.weights=Te,Ne.length>0&&(ue.extras={},ue.extras.targetNames=Ne)}const be=Array.isArray(ee.material);if(be&&ce.groups.length===0)return null;const Ce=be?ee.material:[ee.material],Se=be?ce.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let Te=0,Ne=Se.length;Te<Ne;Te++){const Ie={mode:le,attributes:he};if(this.serializeUserData(ce,Ie),me.length>0&&(Ie.targets=me),ce.index!==null){let De=this.getUID(ce.index);(Se[Te].start!==void 0||Se[Te].count!==void 0)&&(De+=":"+Se[Te].start+":"+Se[Te].count),ne.attributes.has(De)?Ie.indices=ne.attributes.get(De):(Ie.indices=this.processAccessor(ce.index,ce,Se[Te].start,Se[Te].count),ne.attributes.set(De,Ie.indices)),Ie.indices===null&&delete Ie.indices}const ke=this.processMaterial(Ce[Se[Te].materialIndex]);ke!==null&&(Ie.material=ke),fe.push(Ie)}ue.primitives=fe,ie.meshes||(ie.meshes=[]),this._invokeAll(function(Te){Te.writeMesh&&Te.writeMesh(ee,ue)});const $e=ie.meshes.push(ue)-1;return ne.meshes.set(ae,$e),$e}processCamera(ee){const ne=this.json;ne.cameras||(ne.cameras=[]);const ie=ee.isOrthographicCamera,oe={type:ie?"orthographic":"perspective"};return ie?oe.orthographic={xmag:ee.right*2,ymag:ee.top*2,zfar:ee.far<=0?.001:ee.far,znear:ee.near<0?0:ee.near}:oe.perspective={aspectRatio:ee.aspect,yfov:MathUtils.degToRad(ee.fov),zfar:ee.far<=0?.001:ee.far,znear:ee.near<0?0:ee.near},ee.name!==""&&(oe.name=ee.type),ne.cameras.push(oe)-1}processAnimation(ee,ne){const ie=this.json,oe=this.nodeMap;ie.animations||(ie.animations=[]),ee=GLTFExporter.Utils.mergeMorphTargetTracks(ee.clone(),ne);const ae=ee.tracks,ce=[],le=[];for(let ue=0;ue<ae.length;++ue){const he=ae[ue],fe=PropertyBinding.parseTrackName(he.name);let me=PropertyBinding.findNode(ne,fe.nodeName);const ge=PATH_PROPERTIES[fe.propertyName];if(fe.objectName==="bones"&&(me.isSkinnedMesh===!0?me=me.skeleton.getBoneByName(fe.objectIndex):me=void 0),!me||!ge)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',he.name),null;const ve=1;let ye=he.values.length/he.times.length;ge===PATH_PROPERTIES.morphTargetInfluences&&(ye/=me.morphTargetInfluences.length);let be;he.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(be="CUBICSPLINE",ye/=3):he.getInterpolation()===InterpolateDiscrete?be="STEP":be="LINEAR",le.push({input:this.processAccessor(new BufferAttribute(he.times,ve)),output:this.processAccessor(new BufferAttribute(he.values,ye)),interpolation:be}),ce.push({sampler:le.length-1,target:{node:oe.get(me),path:ge}})}return ie.animations.push({name:ee.name||"clip_"+ie.animations.length,samplers:le,channels:ce}),ie.animations.length-1}processSkin(ee){const ne=this.json,ie=this.nodeMap,oe=ne.nodes[ie.get(ee)],ae=ee.skeleton;if(ae===void 0)return null;const ce=ee.skeleton.bones[0];if(ce===void 0)return null;const le=[],ue=new Float32Array(ae.bones.length*16),he=new Matrix4;for(let me=0;me<ae.bones.length;++me)le.push(ie.get(ae.bones[me])),he.copy(ae.boneInverses[me]),he.multiply(ee.bindMatrix).toArray(ue,me*16);return ne.skins===void 0&&(ne.skins=[]),ne.skins.push({inverseBindMatrices:this.processAccessor(new BufferAttribute(ue,16)),joints:le,skeleton:ie.get(ce)}),oe.skin=ne.skins.length-1}processNode(ee){const ne=this.json,ie=this.options,oe=this.nodeMap;ne.nodes||(ne.nodes=[]);const ae={};if(ie.trs){const le=ee.quaternion.toArray(),ue=ee.position.toArray(),he=ee.scale.toArray();equalArray(le,[0,0,0,1])||(ae.rotation=le),equalArray(ue,[0,0,0])||(ae.translation=ue),equalArray(he,[1,1,1])||(ae.scale=he)}else ee.matrixAutoUpdate&&ee.updateMatrix(),isIdentityMatrix(ee.matrix)===!1&&(ae.matrix=ee.matrix.elements);if(ee.name!==""&&(ae.name=String(ee.name)),this.serializeUserData(ee,ae),ee.isMesh||ee.isLine||ee.isPoints){const le=this.processMesh(ee);le!==null&&(ae.mesh=le)}else ee.isCamera&&(ae.camera=this.processCamera(ee));if(ee.isSkinnedMesh&&this.skins.push(ee),ee.children.length>0){const le=[];for(let ue=0,he=ee.children.length;ue<he;ue++){const fe=ee.children[ue];if(fe.visible||ie.onlyVisible===!1){const me=this.processNode(fe);me!==null&&le.push(me)}}le.length>0&&(ae.children=le)}this._invokeAll(function(le){le.writeNode&&le.writeNode(ee,ae)});const ce=ne.nodes.push(ae)-1;return oe.set(ee,ce),ce}processScene(ee){const ne=this.json,ie=this.options;ne.scenes||(ne.scenes=[],ne.scene=0);const oe={};ee.name!==""&&(oe.name=ee.name),ne.scenes.push(oe);const ae=[];for(let ce=0,le=ee.children.length;ce<le;ce++){const ue=ee.children[ce];if(ue.visible||ie.onlyVisible===!1){const he=this.processNode(ue);he!==null&&ae.push(he)}}ae.length>0&&(oe.nodes=ae),this.serializeUserData(ee,oe)}processObjects(ee){const ne=new Scene;ne.name="AuxScene";for(let ie=0;ie<ee.length;ie++)ne.children.push(ee[ie]);this.processScene(ne)}processInput(ee){const ne=this.options;ee=ee instanceof Array?ee:[ee],this._invokeAll(function(oe){oe.beforeParse&&oe.beforeParse(ee)});const ie=[];for(let oe=0;oe<ee.length;oe++)ee[oe]instanceof Scene?this.processScene(ee[oe]):ie.push(ee[oe]);ie.length>0&&this.processObjects(ie);for(let oe=0;oe<this.skins.length;++oe)this.processSkin(this.skins[oe]);for(let oe=0;oe<ne.animations.length;++oe)this.processAnimation(ne.animations[oe],ee[0]);this._invokeAll(function(oe){oe.afterParse&&oe.afterParse(ee)})}_invokeAll(ee){for(let ne=0,ie=this.plugins.length;ne<ie;ne++)ee(this.plugins[ne])}}class GLTFLightExtension{constructor(ee){this.writer=ee,this.name="KHR_lights_punctual"}writeNode(ee,ne){if(!ee.isLight)return;if(!ee.isDirectionalLight&&!ee.isPointLight&&!ee.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",ee);return}const ie=this.writer,oe=ie.json,ae=ie.extensionsUsed,ce={};ee.name&&(ce.name=ee.name),ce.color=ee.color.toArray(),ce.intensity=ee.intensity,ee.isDirectionalLight?ce.type="directional":ee.isPointLight?(ce.type="point",ee.distance>0&&(ce.range=ee.distance)):ee.isSpotLight&&(ce.type="spot",ee.distance>0&&(ce.range=ee.distance),ce.spot={},ce.spot.innerConeAngle=(ee.penumbra-1)*ee.angle*-1,ce.spot.outerConeAngle=ee.angle),ee.decay!==void 0&&ee.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),ee.target&&(ee.target.parent!==ee||ee.target.position.x!==0||ee.target.position.y!==0||ee.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),ae[this.name]||(oe.extensions=oe.extensions||{},oe.extensions[this.name]={lights:[]},ae[this.name]=!0);const le=oe.extensions[this.name].lights;le.push(ce),ne.extensions=ne.extensions||{},ne.extensions[this.name]={light:le.length-1}}}class GLTFMaterialsUnlitExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_unlit"}writeMaterial(ee,ne){if(!ee.isMeshBasicMaterial)return;const oe=this.writer.extensionsUsed;ne.extensions=ne.extensions||{},ne.extensions[this.name]={},oe[this.name]=!0,ne.pbrMetallicRoughness.metallicFactor=0,ne.pbrMetallicRoughness.roughnessFactor=.9}}class GLTFMaterialsClearcoatExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_clearcoat"}writeMaterial(ee,ne){if(!ee.isMeshPhysicalMaterial||ee.clearcoat===0)return;const ie=this.writer,oe=ie.extensionsUsed,ae={};if(ae.clearcoatFactor=ee.clearcoat,ee.clearcoatMap){const ce={index:ie.processTexture(ee.clearcoatMap)};ie.applyTextureTransform(ce,ee.clearcoatMap),ae.clearcoatTexture=ce}if(ae.clearcoatRoughnessFactor=ee.clearcoatRoughness,ee.clearcoatRoughnessMap){const ce={index:ie.processTexture(ee.clearcoatRoughnessMap)};ie.applyTextureTransform(ce,ee.clearcoatRoughnessMap),ae.clearcoatRoughnessTexture=ce}if(ee.clearcoatNormalMap){const ce={index:ie.processTexture(ee.clearcoatNormalMap)};ie.applyTextureTransform(ce,ee.clearcoatNormalMap),ae.clearcoatNormalTexture=ce}ne.extensions=ne.extensions||{},ne.extensions[this.name]=ae,oe[this.name]=!0}}class GLTFMaterialsIridescenceExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_iridescence"}writeMaterial(ee,ne){if(!ee.isMeshPhysicalMaterial||ee.iridescence===0)return;const ie=this.writer,oe=ie.extensionsUsed,ae={};if(ae.iridescenceFactor=ee.iridescence,ee.iridescenceMap){const ce={index:ie.processTexture(ee.iridescenceMap)};ie.applyTextureTransform(ce,ee.iridescenceMap),ae.iridescenceTexture=ce}if(ae.iridescenceIor=ee.iridescenceIOR,ae.iridescenceThicknessMinimum=ee.iridescenceThicknessRange[0],ae.iridescenceThicknessMaximum=ee.iridescenceThicknessRange[1],ee.iridescenceThicknessMap){const ce={index:ie.processTexture(ee.iridescenceThicknessMap)};ie.applyTextureTransform(ce,ee.iridescenceThicknessMap),ae.iridescenceThicknessTexture=ce}ne.extensions=ne.extensions||{},ne.extensions[this.name]=ae,oe[this.name]=!0}}class GLTFMaterialsTransmissionExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_transmission"}writeMaterial(ee,ne){if(!ee.isMeshPhysicalMaterial||ee.transmission===0)return;const ie=this.writer,oe=ie.extensionsUsed,ae={};if(ae.transmissionFactor=ee.transmission,ee.transmissionMap){const ce={index:ie.processTexture(ee.transmissionMap)};ie.applyTextureTransform(ce,ee.transmissionMap),ae.transmissionTexture=ce}ne.extensions=ne.extensions||{},ne.extensions[this.name]=ae,oe[this.name]=!0}}class GLTFMaterialsVolumeExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_volume"}writeMaterial(ee,ne){if(!ee.isMeshPhysicalMaterial||ee.transmission===0)return;const ie=this.writer,oe=ie.extensionsUsed,ae={};if(ae.thicknessFactor=ee.thickness,ee.thicknessMap){const ce={index:ie.processTexture(ee.thicknessMap)};ie.applyTextureTransform(ce,ee.thicknessMap),ae.thicknessTexture=ce}ae.attenuationDistance=ee.attenuationDistance,ae.attenuationColor=ee.attenuationColor.toArray(),ne.extensions=ne.extensions||{},ne.extensions[this.name]=ae,oe[this.name]=!0}}class GLTFMaterialsIorExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_ior"}writeMaterial(ee,ne){if(!ee.isMeshPhysicalMaterial||ee.ior===1.5)return;const oe=this.writer.extensionsUsed,ae={};ae.ior=ee.ior,ne.extensions=ne.extensions||{},ne.extensions[this.name]=ae,oe[this.name]=!0}}class GLTFMaterialsSpecularExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_specular"}writeMaterial(ee,ne){if(!ee.isMeshPhysicalMaterial||ee.specularIntensity===1&&ee.specularColor.equals(DEFAULT_SPECULAR_COLOR)&&!ee.specularIntensityMap&&!ee.specularColorTexture)return;const ie=this.writer,oe=ie.extensionsUsed,ae={};if(ee.specularIntensityMap){const ce={index:ie.processTexture(ee.specularIntensityMap)};ie.applyTextureTransform(ce,ee.specularIntensityMap),ae.specularTexture=ce}if(ee.specularColorMap){const ce={index:ie.processTexture(ee.specularColorMap)};ie.applyTextureTransform(ce,ee.specularColorMap),ae.specularColorTexture=ce}ae.specularFactor=ee.specularIntensity,ae.specularColorFactor=ee.specularColor.toArray(),ne.extensions=ne.extensions||{},ne.extensions[this.name]=ae,oe[this.name]=!0}}GLTFExporter.Utils={insertKeyframe:function(re,ee){const ie=re.getValueSize(),oe=new re.TimeBufferType(re.times.length+1),ae=new re.ValueBufferType(re.values.length+ie),ce=re.createInterpolant(new re.ValueBufferType(ie));let le;if(re.times.length===0){oe[0]=ee;for(let ue=0;ue<ie;ue++)ae[ue]=0;le=0}else if(ee<re.times[0]){if(Math.abs(re.times[0]-ee)<.001)return 0;oe[0]=ee,oe.set(re.times,1),ae.set(ce.evaluate(ee),0),ae.set(re.values,ie),le=0}else if(ee>re.times[re.times.length-1]){if(Math.abs(re.times[re.times.length-1]-ee)<.001)return re.times.length-1;oe[oe.length-1]=ee,oe.set(re.times,0),ae.set(re.values,0),ae.set(ce.evaluate(ee),re.values.length),le=oe.length-1}else for(let ue=0;ue<re.times.length;ue++){if(Math.abs(re.times[ue]-ee)<.001)return ue;if(re.times[ue]<ee&&re.times[ue+1]>ee){oe.set(re.times.slice(0,ue+1),0),oe[ue+1]=ee,oe.set(re.times.slice(ue+1),ue+2),ae.set(re.values.slice(0,(ue+1)*ie),0),ae.set(ce.evaluate(ee),(ue+1)*ie),ae.set(re.values.slice((ue+1)*ie),(ue+2)*ie),le=ue+1;break}}return re.times=oe,re.values=ae,le},mergeMorphTargetTracks:function(re,ee){const ne=[],ie={},oe=re.tracks;for(let ae=0;ae<oe.length;++ae){let ce=oe[ae];const le=PropertyBinding.parseTrackName(ce.name),ue=PropertyBinding.findNode(ee,le.nodeName);if(le.propertyName!=="morphTargetInfluences"||le.propertyIndex===void 0){ne.push(ce);continue}if(ce.createInterpolant!==ce.InterpolantFactoryMethodDiscrete&&ce.createInterpolant!==ce.InterpolantFactoryMethodLinear){if(ce.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),ce=ce.clone(),ce.setInterpolation(InterpolateLinear)}const he=ue.morphTargetInfluences.length,fe=ue.morphTargetDictionary[le.propertyIndex];if(fe===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+le.propertyIndex);let me;if(ie[ue.uuid]===void 0){me=ce.clone();const ve=new me.ValueBufferType(he*me.times.length);for(let ye=0;ye<me.times.length;ye++)ve[ye*he+fe]=me.values[ye];me.name=(le.nodeName||"")+".morphTargetInfluences",me.values=ve,ie[ue.uuid]=me,ne.push(me);continue}const ge=ce.createInterpolant(new ce.ValueBufferType(1));me=ie[ue.uuid];for(let ve=0;ve<me.times.length;ve++)me.values[ve*he+fe]=ge.evaluate(me.times[ve]);for(let ve=0;ve<ce.times.length;ve++){const ye=this.insertKeyframe(me,ce.times[ve]);me.values[ye*he+fe]=ce.values[ve]}}return re.tracks=ne,re}};/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const compatibleObject=re=>re.material!==void 0&&re.userData&&re.userData.variantMaterials&&!!Array.from(re.userData.variantMaterials.values()).filter(ee=>compatibleMaterial(ee.material)),compatibleMaterial=re=>re&&re.isMaterial&&!Array.isArray(re);class GLTFExporterMaterialsVariantsExtension{constructor(ee){this.writer=ee,this.name="KHR_materials_variants",this.variantNames=[]}beforeParse(ee){const ne=new Set;for(const ie of ee)ie.traverse(oe=>{if(!compatibleObject(oe))return;const ae=oe.userData.variantMaterials,ce=oe.userData.variantData;for(const[le,ue]of ce){const he=ae.get(ue.index);he&&compatibleMaterial(he.material)&&ne.add(le)}});ne.forEach(ie=>this.variantNames.push(ie))}writeMesh(ee,ne){if(!compatibleObject(ee))return;const ie=ee.userData,oe=ie.variantMaterials,ae=ie.variantData,ce=new Map,le=new Map,ue=Array.from(ae.values()).sort((me,ge)=>me.index-ge.index);for(const[me,ge]of ue.entries())le.set(ge.index,me);for(const me of ae.values()){const ge=oe.get(me.index);if(!ge||!compatibleMaterial(ge.material))continue;const ve=this.writer.processMaterial(ge.material);ce.has(ve)||ce.set(ve,{material:ve,variants:[]}),ce.get(ve).variants.push(le.get(me.index))}const he=Array.from(ce.values()).map(me=>me.variants.sort((ge,ve)=>ge-ve)&&me).sort((me,ge)=>me.material-ge.material);if(he.length===0)return;const fe=compatibleMaterial(ie.originalMaterial)?this.writer.processMaterial(ie.originalMaterial):-1;for(const me of ne.primitives)fe>=0&&(me.material=fe),me.extensions=me.extensions||{},me.extensions[this.name]={mappings:he}}afterParse(){if(this.variantNames.length===0)return;const ee=this.writer.json;ee.extensions=ee.extensions||{};const ne=this.variantNames.map(ie=>({name:ie}));ee.extensions[this.name]={variants:ne},this.writer.extensionsUsed[this.name]=!0}}class SessionLightProbe{constructor(ee,ne,ie,oe,ae){this.xrLight=ee,this.renderer=ne,this.lightProbe=ie,this.xrWebGLBinding=null,this.estimationStartCallback=ae,this.frameCallback=this.onXRFrame.bind(this);const ce=ne.xr.getSession();if(oe&&"XRWebGLBinding"in window){const le=new WebGLCubeRenderTarget(16);ee.environment=le.texture;const ue=ne.getContext();switch(ce.preferredReflectionFormat){case"srgba8":ue.getExtension("EXT_sRGB");break;case"rgba16f":ue.getExtension("OES_texture_half_float");break}this.xrWebGLBinding=new XRWebGLBinding(ce,ue),this.lightProbe.addEventListener("reflectionchange",()=>{this.updateReflection()})}ce.requestAnimationFrame(this.frameCallback)}updateReflection(){const ee=this.renderer.properties.get(this.xrLight.environment);if(ee){const ne=this.xrWebGLBinding.getReflectionCubeMap(this.lightProbe);ne&&(ee.__webglTexture=ne,this.xrLight.environment.needsPMREMUpdate=!0)}}onXRFrame(ee,ne){if(!this.xrLight)return;ne.session.requestAnimationFrame(this.frameCallback);const oe=ne.getLightEstimate(this.lightProbe);if(oe){this.xrLight.lightProbe.sh.fromArray(oe.sphericalHarmonicsCoefficients),this.xrLight.lightProbe.intensity=1;const ae=Math.max(1,Math.max(oe.primaryLightIntensity.x,Math.max(oe.primaryLightIntensity.y,oe.primaryLightIntensity.z)));this.xrLight.directionalLight.color.setRGB(oe.primaryLightIntensity.x/ae,oe.primaryLightIntensity.y/ae,oe.primaryLightIntensity.z/ae),this.xrLight.directionalLight.intensity=ae,this.xrLight.directionalLight.position.copy(oe.primaryLightDirection),this.estimationStartCallback&&(this.estimationStartCallback(),this.estimationStartCallback=null)}}dispose(){this.xrLight=null,this.renderer=null,this.lightProbe=null,this.xrWebGLBinding=null}}class XREstimatedLight extends Group$1{constructor(ee,ne=!0){super(),this.lightProbe=new LightProbe,this.lightProbe.intensity=0,this.add(this.lightProbe),this.directionalLight=new DirectionalLight,this.directionalLight.intensity=0,this.add(this.directionalLight),this.environment=null;let ie=null,oe=!1;ee.xr.addEventListener("sessionstart",()=>{const ae=ee.xr.getSession();"requestLightProbe"in ae&&ae.requestLightProbe({reflectionFormat:ae.preferredReflectionFormat}).then(ce=>{ie=new SessionLightProbe(this,ee,ce,ne,()=>{oe=!0,this.dispatchEvent({type:"estimationstart"})})})}),ee.xr.addEventListener("sessionend",()=>{ie&&(ie.dispose(),ie=null),oe&&this.dispatchEvent({type:"estimationend"})}),this.dispose=()=>{ie&&(ie.dispose(),ie=null),this.remove(this.lightProbe),this.lightProbe=null,this.remove(this.directionalLight),this.directionalLight=null,this.environment=null}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SETTLING_TIME=1e4,MIN_DECAY_MILLISECONDS=.001,DECAY_MILLISECONDS=50;class Damper{constructor(ee=DECAY_MILLISECONDS){this.velocity=0,this.naturalFrequency=0,this.setDecayTime(ee)}setDecayTime(ee){this.naturalFrequency=1/Math.max(MIN_DECAY_MILLISECONDS,ee)}update(ee,ne,ie,oe){const ae=2e-4*this.naturalFrequency;if(ee==null||oe===0||ee===ne&&this.velocity===0)return ne;if(ie<0)return ee;const ce=ee-ne,le=this.velocity+this.naturalFrequency*ce,ue=ce+ie*le,he=Math.exp(-this.naturalFrequency*ie),fe=(le-this.naturalFrequency*ue)*he,me=-this.naturalFrequency*(fe+le*he);return Math.abs(fe)<ae*Math.abs(oe)&&me*ce>=0?(this.velocity=0,ne):(this.velocity=fe,ne+ue*he)}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RADIUS=.2,LINE_WIDTH=.03,MAX_OPACITY=.75,SEGMENTS=12,DELTA_PHI=Math.PI/(2*SEGMENTS),vector2$1=new Vector2,addCorner=(re,ee,ne)=>{let ie=ee>0?ne>0?0:-Math.PI/2:ne>0?Math.PI/2:Math.PI;for(let oe=0;oe<=SEGMENTS;++oe)re.push(ee+(RADIUS-LINE_WIDTH)*Math.cos(ie),ne+(RADIUS-LINE_WIDTH)*Math.sin(ie),0,ee+RADIUS*Math.cos(ie),ne+RADIUS*Math.sin(ie),0),ie+=DELTA_PHI};class PlacementBox extends Mesh{constructor(ee,ne){const ie=new BufferGeometry,oe=[],ae=[],{size:ce,boundingBox:le}=ee,ue=ce.x/2,he=(ne==="back"?ce.y:ce.z)/2;addCorner(ae,ue,he),addCorner(ae,-ue,he),addCorner(ae,-ue,-he),addCorner(ae,ue,-he);const fe=ae.length/3;for(let ve=0;ve<fe-2;ve+=2)oe.push(ve,ve+1,ve+3,ve,ve+3,ve+2);const me=fe-2;oe.push(me,me+1,1,me,1,0),ie.setAttribute("position",new Float32BufferAttribute(ae,3)),ie.setIndex(oe),super(ie),this.side=ne;const ge=this.material;switch(ge.side=DoubleSide,ge.transparent=!0,ge.opacity=0,this.goalOpacity=0,this.opacityDamper=new Damper,this.hitPlane=new Mesh(new PlaneGeometry(2*(ue+RADIUS),2*(he+RADIUS))),this.hitPlane.visible=!1,this.hitPlane.material.side=DoubleSide,this.add(this.hitPlane),le.getCenter(this.position),ne){case"bottom":this.rotateX(-Math.PI/2),this.shadowHeight=le.min.y,this.position.y=this.shadowHeight;break;case"back":this.shadowHeight=le.min.z,this.position.z=this.shadowHeight}ee.target.add(this),this.offsetHeight=0}getHit(ee,ne,ie){vector2$1.set(ne,-ie),this.hitPlane.visible=!0;const oe=ee.positionAndNormalFromPoint(vector2$1,this.hitPlane);return this.hitPlane.visible=!1,oe==null?null:oe.position}getExpandedHit(ee,ne,ie){this.hitPlane.scale.set(1e3,1e3,1e3),this.hitPlane.updateMatrixWorld();const oe=this.getHit(ee,ne,ie);return this.hitPlane.scale.set(1,1,1),oe}set offsetHeight(ee){ee-=.001,this.side==="back"?this.position.z=this.shadowHeight+ee:this.position.y=this.shadowHeight+ee}get offsetHeight(){return this.side==="back"?this.position.z-this.shadowHeight:this.position.y-this.shadowHeight}set show(ee){this.goalOpacity=ee?MAX_OPACITY:0}updateOpacity(ee){const ne=this.material;ne.opacity=this.opacityDamper.update(ne.opacity,this.goalOpacity,ee,1),this.visible=ne.opacity>0}dispose(){var ee;const{geometry:ne,material:ie}=this.hitPlane;ne.dispose(),ie.dispose(),this.geometry.dispose(),this.material.dispose(),(ee=this.parent)===null||ee===void 0||ee.remove(this)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const numberNode=(re,ee)=>({type:"number",number:re,unit:ee}),parseExpressions=(()=>{const re={};return ne=>{const ie=ne;if(ie in re)return re[ie];const oe=[];let ae=0;for(;ne;){if(++ae>1e3){ne="";break}const ce=parseExpression(ne),le=ce.nodes[0];if(le==null||le.terms.length===0)break;oe.push(le),ne=ce.remainingInput}return re[ie]=oe}})(),parseExpression=(()=>{const re=/^(\-\-|[a-z\u0240-\uffff])/i,ee=/^([\*\+\/]|[\-]\s)/i,ne=/^[\),]/,ie="(",oe="#";return ae=>{const ce=[];for(;ae.length&&(ae=ae.trim(),!ne.test(ae));)if(ae[0]===ie){const{nodes:le,remainingInput:ue}=parseFunctionArguments(ae);ae=ue,ce.push({type:"function",name:{type:"ident",value:"calc"},arguments:le})}else if(re.test(ae)){const le=parseIdent(ae),ue=le.nodes[0];if(ae=le.remainingInput,ae[0]===ie){const{nodes:he,remainingInput:fe}=parseFunctionArguments(ae);ce.push({type:"function",name:ue,arguments:he}),ae=fe}else ce.push(ue)}else if(ee.test(ae))ce.push({type:"operator",value:ae[0]}),ae=ae.slice(1);else{const{nodes:le,remainingInput:ue}=ae[0]===oe?parseHex(ae):parseNumber(ae);if(le.length===0)break;ce.push(le[0]),ae=ue}return{nodes:[{type:"expression",terms:ce}],remainingInput:ae}}})(),parseIdent=(()=>{const re=/[^a-z0-9_\-\u0240-\uffff]/i;return ee=>{const ne=ee.match(re),ie=ne==null?ee:ee.substr(0,ne.index),oe=ne==null?"":ee.substr(ne.index);return{nodes:[{type:"ident",value:ie}],remainingInput:oe}}})(),parseNumber=(()=>{const re=/[\+\-]?(\d+[\.]\d+|\d+|[\.]\d+)([eE][\+\-]?\d+)?/,ee=/^[a-z%]+/i,ne=/^(m|mm|cm|rad|deg|[%])$/;return ie=>{const oe=ie.match(re),ae=oe==null?"0":oe[0];ie=ae==null?ie:ie.slice(ae.length);const ce=ie.match(ee);let le=ce!=null&&ce[0]!==""?ce[0]:null;const ue=ce==null?ie:ie.slice(le.length);return le!=null&&!ne.test(le)&&(le=null),{nodes:[{type:"number",number:parseFloat(ae)||0,unit:le}],remainingInput:ue}}})(),parseHex=(()=>{const re=/^[a-f0-9]*/i;return ee=>{ee=ee.slice(1).trim();const ne=ee.match(re);return{nodes:ne==null?[]:[{type:"hex",value:ne[0]}],remainingInput:ne==null?ee:ee.slice(ne[0].length)}}})(),parseFunctionArguments=re=>{const ee=[];for(re=re.slice(1).trim();re.length;){const ne=parseExpression(re);if(ee.push(ne.nodes[0]),re=ne.remainingInput.trim(),re[0]===",")re=re.slice(1).trim();else if(re[0]===")"){re=re.slice(1);break}}return{nodes:ee,remainingInput:re}},$visitedTypes=Symbol("visitedTypes");class ASTWalker{constructor(ee){this[$visitedTypes]=ee}walk(ee,ne){const ie=ee.slice();for(;ie.length;){const oe=ie.shift();switch(this[$visitedTypes].indexOf(oe.type)>-1&&ne(oe),oe.type){case"expression":ie.unshift(...oe.terms);break;case"function":ie.unshift(oe.name,...oe.arguments);break}}}}const ZERO=Object.freeze({type:"number",number:0,unit:null});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const degreesToRadians=(re,ee=0)=>{let{number:ne,unit:ie}=re;if(!isFinite(ne))ne=ee,ie="rad";else if(re.unit==="rad"||re.unit==null)return re;return{type:"number",number:(ie==="deg"&&ne!=null?ne:0)*Math.PI/180,unit:"rad"}},lengthToBaseMeters=(re,ee=0)=>{let{number:ne,unit:ie}=re;if(!isFinite(ne))ne=ee,ie="m";else if(re.unit==="m")return re;let oe;switch(ie){default:oe=1;break;case"cm":oe=1/100;break;case"mm":oe=1/1e3;break}return{type:"number",number:oe*ne,unit:"m"}},normalizeUnit=(()=>{const re=ne=>ne,ee={rad:re,deg:degreesToRadians,m:re,mm:lengthToBaseMeters,cm:lengthToBaseMeters};return(ne,ie=ZERO)=>{isFinite(ne.number)||(ne.number=ie.number,ne.unit=ie.unit);const{unit:oe}=ne;if(oe==null)return ne;const ae=ee[oe];return ae==null?ie:ae(ne)}})();/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$7,_b$6,_c$4;const $evaluate=Symbol("evaluate"),$lastValue=Symbol("lastValue");class Evaluator{constructor(){this[_a$7]=null}static evaluatableFor(ee,ne=ZERO){if(ee instanceof Evaluator)return ee;if(ee.type==="number")return ee.unit==="%"?new PercentageEvaluator(ee,ne):ee;switch(ee.name.value){case"calc":return new CalcEvaluator(ee,ne);case"env":return new EnvEvaluator(ee)}return ZERO}static evaluate(ee){return ee instanceof Evaluator?ee.evaluate():ee}static isConstant(ee){return ee instanceof Evaluator?ee.isConstant:!0}static applyIntrinsics(ee,ne){const{basis:ie,keywords:oe}=ne,{auto:ae}=oe;return ie.map((ce,le)=>{const ue=ae[le]==null?ce:ae[le];let he=ee[le]?ee[le]:ue;if(he.type==="ident"){const fe=he.value;fe in oe&&(he=oe[fe][le])}return(he==null||he.type==="ident")&&(he=ue),he.unit==="%"?numberNode(he.number/100*ce.number,ce.unit):(he=normalizeUnit(he,ce),he.unit!==ce.unit?ce:he)})}get isConstant(){return!1}evaluate(){return(!this.isConstant||this[$lastValue]==null)&&(this[$lastValue]=this[$evaluate]()),this[$lastValue]}}_a$7=$lastValue;const $percentage=Symbol("percentage"),$basis=Symbol("basis");class PercentageEvaluator extends Evaluator{constructor(ee,ne){super(),this[$percentage]=ee,this[$basis]=ne}get isConstant(){return!0}[$evaluate](){return numberNode(this[$percentage].number/100*this[$basis].number,this[$basis].unit)}}const $identNode=Symbol("identNode");class EnvEvaluator extends Evaluator{constructor(ee){super(),this[_b$6]=null;const ne=ee.arguments.length?ee.arguments[0].terms[0]:null;ne!=null&&ne.type==="ident"&&(this[$identNode]=ne)}get isConstant(){return!1}[(_b$6=$identNode,$evaluate)](){if(this[$identNode]!=null)switch(this[$identNode].value){case"window-scroll-y":const ee=window.pageYOffset,ne=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight);return{type:"number",number:ee/(ne-window.innerHeight)||0,unit:null}}return ZERO}}const IS_MULTIPLICATION_RE=/[\*\/]/,$evaluator=Symbol("evaluator");class CalcEvaluator extends Evaluator{constructor(ee,ne=ZERO){if(super(),this[_c$4]=null,ee.arguments.length!==1)return;const ie=ee.arguments[0].terms.slice(),oe=[];for(;ie.length;){const ae=ie.shift();if(oe.length>0){const ce=oe[oe.length-1];if(ce.type==="operator"&&IS_MULTIPLICATION_RE.test(ce.value)){const le=oe.pop(),ue=oe.pop();if(ue==null)return;oe.push(new OperatorEvaluator(le,Evaluator.evaluatableFor(ue,ne),Evaluator.evaluatableFor(ae,ne)));continue}}oe.push(ae.type==="operator"?ae:Evaluator.evaluatableFor(ae,ne))}for(;oe.length>2;){const[ae,ce,le]=oe.splice(0,3);if(ce.type!=="operator")return;oe.unshift(new OperatorEvaluator(ce,Evaluator.evaluatableFor(ae,ne),Evaluator.evaluatableFor(le,ne)))}oe.length===1&&(this[$evaluator]=oe[0])}get isConstant(){return this[$evaluator]==null||Evaluator.isConstant(this[$evaluator])}[(_c$4=$evaluator,$evaluate)](){return this[$evaluator]!=null?Evaluator.evaluate(this[$evaluator]):ZERO}}const $operator=Symbol("operator"),$left=Symbol("left"),$right=Symbol("right");class OperatorEvaluator extends Evaluator{constructor(ee,ne,ie){super(),this[$operator]=ee,this[$left]=ne,this[$right]=ie}get isConstant(){return Evaluator.isConstant(this[$left])&&Evaluator.isConstant(this[$right])}[$evaluate](){const ee=normalizeUnit(Evaluator.evaluate(this[$left])),ne=normalizeUnit(Evaluator.evaluate(this[$right])),{number:ie,unit:oe}=ee,{number:ae,unit:ce}=ne;if(ce!=null&&oe!=null&&ce!=oe)return ZERO;const le=oe||ce;let ue;switch(this[$operator].value){case"+":ue=ie+ae;break;case"-":ue=ie-ae;break;case"/":ue=ie/ae;break;case"*":ue=ie*ae;break;default:return ZERO}return{type:"number",number:ue,unit:le}}}const $evaluatables=Symbol("evaluatables"),$intrinsics=Symbol("intrinsics");class StyleEvaluator extends Evaluator{constructor(ee,ne){super(),this[$intrinsics]=ne;const ie=ee[0],oe=ie!=null?ie.terms:[];this[$evaluatables]=ne.basis.map((ae,ce)=>{const le=oe[ce];return le==null?{type:"ident",value:"auto"}:le.type==="ident"?le:Evaluator.evaluatableFor(le,ae)})}get isConstant(){for(const ee of this[$evaluatables])if(!Evaluator.isConstant(ee))return!1;return!0}[$evaluate](){const ee=this[$evaluatables].map(ne=>Evaluator.evaluate(ne));return Evaluator.applyIntrinsics(ee,this[$intrinsics]).map(ne=>ne.number)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$6,_b$5,_c$3,_d$2;const $instances=Symbol("instances"),$activateListener=Symbol("activateListener"),$deactivateListener=Symbol("deactivateListener"),$notifyInstances=Symbol("notifyInstances"),$notify=Symbol("notify"),$scrollCallback=Symbol("callback");class ScrollObserver{constructor(ee){this[$scrollCallback]=ee}static[$notifyInstances](){for(const ee of ScrollObserver[$instances])ee[$notify]()}static[(_a$6=$instances,$activateListener)](){window.addEventListener("scroll",this[$notifyInstances],{passive:!0})}static[$deactivateListener](){window.removeEventListener("scroll",this[$notifyInstances])}observe(){ScrollObserver[$instances].size===0&&ScrollObserver[$activateListener](),ScrollObserver[$instances].add(this)}disconnect(){ScrollObserver[$instances].delete(this),ScrollObserver[$instances].size===0&&ScrollObserver[$deactivateListener]()}[$notify](){this[$scrollCallback]()}}ScrollObserver[_a$6]=new Set;const $computeStyleCallback=Symbol("computeStyleCallback"),$astWalker=Symbol("astWalker"),$dependencies=Symbol("dependencies"),$onScroll=Symbol("onScroll");class StyleEffector{constructor(ee){this[_b$5]={},this[_c$3]=new ASTWalker(["function"]),this[_d$2]=()=>{this[$computeStyleCallback]({relatedState:"window-scroll"})},this[$computeStyleCallback]=ee}observeEffectsFor(ee){const ne={},ie=this[$dependencies];this[$astWalker].walk(ee,oe=>{const{name:ae}=oe,le=oe.arguments[0].terms[0];if(!(ae.value!=="env"||le==null||le.type!=="ident"))switch(le.value){case"window-scroll-y":if(ne["window-scroll"]==null){const ue="window-scroll"in ie?ie["window-scroll"]:new ScrollObserver(this[$onScroll]);ue.observe(),delete ie["window-scroll"],ne["window-scroll"]=ue}break}});for(const oe in ie)ie[oe].disconnect();this[$dependencies]=ne}dispose(){for(const ee in this[$dependencies])this[$dependencies][ee].disconnect()}}_b$5=$dependencies,_c$3=$astWalker,_d$2=$onScroll;/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const style$3=re=>{const ee=re.observeEffects||!1,ne=re.intrinsics instanceof Function?re.intrinsics:()=>re.intrinsics;return(ie,oe)=>{const ae=ie.updated,ce=ie.connectedCallback,le=ie.disconnectedCallback,ue=Symbol(`${oe}StyleEffector`),he=Symbol(`${oe}StyleEvaluator`),fe=Symbol(`${oe}UpdateEvaluator`),me=Symbol(`${oe}EvaluateAndSync`);Object.defineProperties(ie,{[ue]:{value:null,writable:!0},[he]:{value:null,writable:!0},[fe]:{value:function(){const ge=parseExpressions(this[oe]);this[he]=new StyleEvaluator(ge,ne(this)),this[ue]==null&&ee&&(this[ue]=new StyleEffector(()=>this[me]())),this[ue]!=null&&this[ue].observeEffectsFor(ge)}},[me]:{value:function(){if(this[he]==null)return;const ge=this[he].evaluate();this[re.updateHandler](ge)}},updated:{value:function(ge){ge.has(oe)&&(this[fe](),this[me]()),ae.call(this,ge)}},connectedCallback:{value:function(){ce.call(this),this.requestUpdate(oe,this[oe])}},disconnectedCallback:{value:function(){le.call(this),this[ue]!=null&&(this[ue].dispose(),this[ue]=null)}}})}};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const easeInOutQuad=re=>re<.5?2*re*re:-1+(4-2*re)*re,interpolate=(re,ee,ne=easeInOutQuad)=>ie=>re+(ee-re)*ne(ie),sequence=(re,ee)=>{const ne=oe=>ae=>oe+=ae,ie=ee.map(ne(0));return oe=>{oe=clamp$2(oe,0,1),oe*=ie[ie.length-1];const ae=ie.findIndex(ue=>ue>=oe),ce=ae<1?0:ie[ae-1],le=ie[ae];return re[ae]((oe-ce)/(le-ce))}},timeline=re=>{const ee=[],ne=[];let ie=re.initialValue;for(let oe=0;oe<re.keyframes.length;++oe){const ae=re.keyframes[oe],{value:ce,frames:le}=ae,ue=ae.ease||easeInOutQuad,he=interpolate(ie,ce,ue);ee.push(he),ne.push(le),ie=ce}return sequence(ee,ne)};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$6=globalThis&&globalThis.__decorate||function(re,ee,ne,ie){var oe=arguments.length,ae=oe<3?ee:ie===null?ie=Object.getOwnPropertyDescriptor(ee,ne):ie,ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ae=Reflect.decorate(re,ee,ne,ie);else for(var le=re.length-1;le>=0;le--)(ce=re[le])&&(ae=(oe<3?ce(ae):oe>3?ce(ee,ne,ae):ce(ee,ne))||ae);return oe>3&&ae&&Object.defineProperty(ee,ne,ae),ae};const PROMPT_ANIMATION_TIME=5e3,wiggle=timeline({initialValue:0,keyframes:[{frames:5,value:-1},{frames:1,value:-1},{frames:8,value:1},{frames:1,value:1},{frames:5,value:0},{frames:18,value:0}]}),fade=timeline({initialValue:0,keyframes:[{frames:1,value:1},{frames:5,value:1},{frames:1,value:0},{frames:6,value:0}]}),DEFAULT_FOV_DEG=30,DEFAULT_MIN_FOV_DEG=12,DEFAULT_CAMERA_ORBIT="0deg 75deg 105%",DEFAULT_CAMERA_TARGET="auto auto auto",DEFAULT_FIELD_OF_VIEW="auto",MINIMUM_RADIUS_RATIO=2.2,AZIMUTHAL_QUADRANT_LABELS=["front","right","back","left"],POLAR_TRIENT_LABELS=["upper-","","lower-"],DEFAULT_INTERACTION_PROMPT_THRESHOLD=3e3,INTERACTION_PROMPT=". Use mouse, touch or arrow keys to move.",InteractionPromptStrategy={AUTO:"auto",NONE:"none"},InteractionPromptStyle={BASIC:"basic",WIGGLE:"wiggle"},TouchAction={PAN_Y:"pan-y",PAN_X:"pan-x",NONE:"none"},fieldOfViewIntrinsics=()=>({basis:[degreesToRadians(numberNode(DEFAULT_FOV_DEG,"deg"))],keywords:{auto:[null]}}),minFieldOfViewIntrinsics=()=>({basis:[degreesToRadians(numberNode(DEFAULT_MIN_FOV_DEG,"deg"))],keywords:{auto:[null]}}),cameraOrbitIntrinsics=(()=>{const re=parseExpressions(DEFAULT_CAMERA_ORBIT)[0].terms,ee=normalizeUnit(re[0]),ne=normalizeUnit(re[1]);return ie=>{const oe=ie[$scene].idealCameraDistance();return{basis:[ee,ne,numberNode(oe,"m")],keywords:{auto:[null,null,numberNode(105,"%")]}}}})(),minCameraOrbitIntrinsics=re=>{const ee=MINIMUM_RADIUS_RATIO*re[$scene].boundingSphere.radius;return{basis:[numberNode(-1/0,"rad"),numberNode(Math.PI/8,"rad"),numberNode(ee,"m")],keywords:{auto:[null,null,null]}}},maxCameraOrbitIntrinsics=re=>{const ee=cameraOrbitIntrinsics(re),ie=new StyleEvaluator([],ee).evaluate()[2];return{basis:[numberNode(1/0,"rad"),numberNode(Math.PI-Math.PI/8,"rad"),numberNode(ie,"m")],keywords:{auto:[null,null,null]}}},cameraTargetIntrinsics=re=>{const ee=re[$scene].boundingBox.getCenter(new Vector3);return{basis:[numberNode(ee.x,"m"),numberNode(ee.y,"m"),numberNode(ee.z,"m")],keywords:{auto:[null,null,null]}}},HALF_PI=Math.PI/2,THIRD_PI=Math.PI/3,QUARTER_PI=HALF_PI/2,TAU=2*Math.PI,$controls=Symbol("controls"),$panElement=Symbol("panElement"),$promptElement=Symbol("promptElement"),$promptAnimatedContainer=Symbol("promptAnimatedContainer"),$fingerAnimatedContainers=Symbol("fingerAnimatedContainers"),$deferInteractionPrompt=Symbol("deferInteractionPrompt"),$updateAria=Symbol("updateAria"),$updateCameraForRadius=Symbol("updateCameraForRadius"),$cancelPrompts=Symbol("cancelPrompts"),$onChange=Symbol("onChange"),$onPointerChange=Symbol("onPointerChange"),$waitingToPromptUser=Symbol("waitingToPromptUser"),$userHasInteracted=Symbol("userHasInteracted"),$promptElementVisibleTime=Symbol("promptElementVisibleTime"),$lastPromptOffset=Symbol("lastPromptOffset"),$cancellationSource=Symbol("cancellationSource"),$lastSpherical=Symbol("lastSpherical"),$jumpCamera=Symbol("jumpCamera"),$initialized=Symbol("initialized"),$maintainThetaPhi=Symbol("maintainThetaPhi"),$syncCameraOrbit=Symbol("syncCameraOrbit"),$syncFieldOfView=Symbol("syncFieldOfView"),$syncCameraTarget=Symbol("syncCameraTarget"),$syncMinCameraOrbit=Symbol("syncMinCameraOrbit"),$syncMaxCameraOrbit=Symbol("syncMaxCameraOrbit"),$syncMinFieldOfView=Symbol("syncMinFieldOfView"),$syncMaxFieldOfView=Symbol("syncMaxFieldOfView"),ControlsMixin=re=>{var ee,ne,ie,oe,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ce,Se;class $e extends re{constructor(){super(...arguments),this.cameraControls=!1,this.cameraOrbit=DEFAULT_CAMERA_ORBIT,this.cameraTarget=DEFAULT_CAMERA_TARGET,this.fieldOfView=DEFAULT_FIELD_OF_VIEW,this.minCameraOrbit="auto",this.maxCameraOrbit="auto",this.minFieldOfView="auto",this.maxFieldOfView="auto",this.interactionPromptThreshold=DEFAULT_INTERACTION_PROMPT_THRESHOLD,this.interactionPrompt=InteractionPromptStrategy.AUTO,this.interactionPromptStyle=InteractionPromptStyle.WIGGLE,this.orbitSensitivity=1,this.touchAction=TouchAction.NONE,this.disableZoom=!1,this.disablePan=!1,this.disableTap=!1,this.interpolationDecay=DECAY_MILLISECONDS,this[ee]=this.shadowRoot.querySelector(".interaction-prompt"),this[ne]=this.shadowRoot.querySelector("#prompt"),this[ie]=[this.shadowRoot.querySelector("#finger0"),this.shadowRoot.querySelector("#finger1")],this[oe]=this.shadowRoot.querySelector(".pan-target"),this[ae]=0,this[ce]=1/0,this[le]=!1,this[ue]=!1,this[he]=ChangeSource.AUTOMATIC,this[fe]=new SmoothControls(this[$scene].camera,this[$userInputElement],this[$scene]),this[me]=new Spherical,this[ge]=!1,this[ve]=!1,this[ye]=!1,this[be]=()=>{const Ne=this[$controls].changeSource;this[$cancellationSource]=Ne,Ne===ChangeSource.USER_INTERACTION&&(this[$userHasInteracted]=!0,this[$deferInteractionPrompt]())},this[Ce]=()=>{this[$updateAria](),this[$needsRender]();const Ne=this[$controls].changeSource;this.dispatchEvent(new CustomEvent("camera-change",{detail:{source:Ne}}))},this[Se]=Ne=>{Ne.type==="pointer-change-start"?this[$container].classList.add("pointer-tumbling"):this[$container].classList.remove("pointer-tumbling")}}get inputSensitivity(){return this[$controls].inputSensitivity}set inputSensitivity(Ne){this[$controls].inputSensitivity=Ne}getCameraOrbit(){const{theta:Ne,phi:Ie,radius:ke}=this[$lastSpherical];return{theta:Ne,phi:Ie,radius:ke,toString(){return`${this.theta}rad ${this.phi}rad ${this.radius}m`}}}getCameraTarget(){return toVector3D(this[$renderer].isPresenting?this[$renderer].arRenderer.target:this[$scene].getTarget())}getFieldOfView(){return this[$controls].getFieldOfView()}getMinimumFieldOfView(){return this[$controls].options.minimumFieldOfView}getMaximumFieldOfView(){return this[$controls].options.maximumFieldOfView}getIdealAspect(){return this[$scene].idealAspect}jumpCameraToGoal(){this[$jumpCamera]=!0,this.requestUpdate($jumpCamera,!1)}resetInteractionPrompt(){this[$lastPromptOffset]=0,this[$promptElementVisibleTime]=1/0,this[$userHasInteracted]=!1,this[$waitingToPromptUser]=this.interactionPrompt===InteractionPromptStrategy.AUTO&&this.cameraControls}zoom(Ne){const Ie=new WheelEvent("wheel",{deltaY:-30*Ne});this[$userInputElement].dispatchEvent(Ie)}connectedCallback(){super.connectedCallback(),this[$controls].addEventListener("user-interaction",this[$cancelPrompts]),this[$controls].addEventListener("pointer-change-start",this[$onPointerChange]),this[$controls].addEventListener("pointer-change-end",this[$onPointerChange])}disconnectedCallback(){super.disconnectedCallback(),this[$controls].removeEventListener("user-interaction",this[$cancelPrompts]),this[$controls].removeEventListener("pointer-change-start",this[$onPointerChange]),this[$controls].removeEventListener("pointer-change-end",this[$onPointerChange])}updated(Ne){super.updated(Ne);const Ie=this[$controls],ke=this[$scene];if(Ne.has("cameraControls")&&(this.cameraControls?(Ie.enableInteraction(),this.interactionPrompt===InteractionPromptStrategy.AUTO&&(this[$waitingToPromptUser]=!0)):(Ie.disableInteraction(),this[$deferInteractionPrompt]()),this[$userInputElement].setAttribute("aria-label",this[$ariaLabel])),Ne.has("disableZoom")&&(Ie.disableZoom=this.disableZoom),Ne.has("disablePan")&&(Ie.enablePan=!this.disablePan),Ne.has("disableTap")&&(Ie.enableTap=!this.disableTap),(Ne.has("interactionPrompt")||Ne.has("cameraControls")||Ne.has("src"))&&(this.interactionPrompt===InteractionPromptStrategy.AUTO&&this.cameraControls&&!this[$userHasInteracted]?this[$waitingToPromptUser]=!0:this[$deferInteractionPrompt]()),Ne.has("interactionPromptStyle")&&(this[$promptAnimatedContainer].style.opacity=this.interactionPromptStyle==InteractionPromptStyle.BASIC?"1":"0"),Ne.has("touchAction")){const De=this.touchAction;Ie.applyOptions({touchAction:De}),Ie.updateTouchActionStyle()}Ne.has("orbitSensitivity")&&(Ie.orbitSensitivity=this.orbitSensitivity),Ne.has("interpolationDecay")&&(Ie.setDamperDecayTime(this.interpolationDecay),ke.setTargetDamperDecayTime(this.interpolationDecay)),this[$jumpCamera]===!0&&Promise.resolve().then(()=>{Ie.jumpToGoal(),ke.jumpToGoal(),this[$onChange](),this[$jumpCamera]=!1})}async updateFraming(){const Ne=this[$scene],Ie=Ne.adjustedFoV(Ne.framedFoVDeg);await Ne.updateFraming();const ke=Ne.adjustedFoV(Ne.framedFoVDeg),De=this[$controls].getFieldOfView()/Ie;this[$controls].setFieldOfView(ke*De),this[$maintainThetaPhi]=!0,this.requestUpdate("maxFieldOfView"),this.requestUpdate("fieldOfView"),this.requestUpdate("minCameraOrbit"),this.requestUpdate("maxCameraOrbit"),this.requestUpdate("cameraOrbit"),await this.updateComplete}interact(Ne,Ie,ke){const De=this[$userInputElement],Oe=this[$fingerAnimatedContainers];if(Oe[0].style.opacity==="1"){console.warn("interact() failed because an existing interaction is running.");return}const Be=new Array;Be.push({x:timeline(Ie.x),y:timeline(Ie.y)});const Me=[{x:Be[0].x(0),y:Be[0].y(0)}];ke!=null&&(Be.push({x:timeline(ke.x),y:timeline(ke.y)}),Me.push({x:Be[1].x(0),y:Be[1].y(0)}));let Le=performance.now();const{width:je,height:ze}=this[$scene],Ve=Ye=>{for(const[Ue,Ke]of Me.entries()){const{style:Xe}=Oe[Ue];Xe.transform=`translateX(${je*Ke.x}px) translateY(${ze*Ke.y}px)`,Ye==="pointerdown"?Xe.opacity="1":Ye==="pointerup"&&(Xe.opacity="0");const Vt={pointerId:Ue-5678,pointerType:"touch",target:De,clientX:je*Ke.x,clientY:ze*Ke.y,altKey:!0};De.dispatchEvent(new PointerEvent(Ye,Vt))}},He=()=>{const Ye=this[$cancellationSource];if(Ye!==ChangeSource.AUTOMATIC||!De.isConnected){for(const Ke of this[$fingerAnimatedContainers])Ke.style.opacity="0";Ve("pointercancel"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:Ye}})),document.removeEventListener("visibilitychange",We);return}const Ue=Math.min(1,(performance.now()-Le)/Ne);for(const[Ke,Xe]of Me.entries())Xe.x=Be[Ke].x(Ue),Xe.y=Be[Ke].y(Ue);Ve("pointermove"),Ue<1?requestAnimationFrame(He):(Ve("pointerup"),this.dispatchEvent(new CustomEvent("interact-stopped",{detail:{source:ChangeSource.AUTOMATIC}})),document.removeEventListener("visibilitychange",We))},We=()=>{let Ye=0;document.visibilityState==="hidden"?Ye=performance.now()-Le:Le=performance.now()-Ye};document.addEventListener("visibilitychange",We),Ve("pointerdown"),this[$cancellationSource]=ChangeSource.AUTOMATIC,requestAnimationFrame(He)}[(ee=$promptElement,ne=$promptAnimatedContainer,ie=$fingerAnimatedContainers,oe=$panElement,ae=$lastPromptOffset,ce=$promptElementVisibleTime,le=$userHasInteracted,ue=$waitingToPromptUser,he=$cancellationSource,fe=$controls,me=$lastSpherical,ge=$jumpCamera,ve=$initialized,ye=$maintainThetaPhi,$syncFieldOfView)](Ne){const Ie=this[$controls],ke=this[$scene];ke.framedFoVDeg=Ne[0]*180/Math.PI,Ie.changeSource=ChangeSource.NONE,Ie.setFieldOfView(ke.adjustedFoV(ke.framedFoVDeg)),this[$cancelPrompts]()}[$syncCameraOrbit](Ne){const Ie=this[$controls];if(this[$maintainThetaPhi]){const{theta:ke,phi:De}=this.getCameraOrbit();Ne[0]=ke,Ne[1]=De,this[$maintainThetaPhi]=!1}Ie.changeSource=ChangeSource.NONE,Ie.setOrbit(Ne[0],Ne[1],Ne[2]),this[$cancelPrompts]()}[$syncMinCameraOrbit](Ne){this[$controls].applyOptions({minimumAzimuthalAngle:Ne[0],minimumPolarAngle:Ne[1],minimumRadius:Ne[2]}),this.jumpCameraToGoal()}[$syncMaxCameraOrbit](Ne){this[$controls].applyOptions({maximumAzimuthalAngle:Ne[0],maximumPolarAngle:Ne[1],maximumRadius:Ne[2]}),this[$updateCameraForRadius](Ne[2]),this.jumpCameraToGoal()}[$syncMinFieldOfView](Ne){this[$controls].applyOptions({minimumFieldOfView:Ne[0]*180/Math.PI}),this.jumpCameraToGoal()}[$syncMaxFieldOfView](Ne){const Ie=this[$scene].adjustedFoV(Ne[0]*180/Math.PI);this[$controls].applyOptions({maximumFieldOfView:Ie}),this.jumpCameraToGoal()}[$syncCameraTarget](Ne){const[Ie,ke,De]=Ne;this[$renderer].arRenderer.isPresenting||this[$scene].setTarget(Ie,ke,De),this[$controls].changeSource=ChangeSource.NONE,this[$renderer].arRenderer.updateTarget(),this[$cancelPrompts]()}[$tick](Ne,Ie){if(super[$tick](Ne,Ie),this[$renderer].isPresenting||!this[$getModelIsVisible]())return;const ke=this[$controls],De=this[$scene],Oe=performance.now();if(this[$waitingToPromptUser]&&this.loaded&&Oe>this[$loadedTime]+this.interactionPromptThreshold&&(this[$waitingToPromptUser]=!1,this[$promptElementVisibleTime]=Oe,this[$promptElement].classList.add("visible")),isFinite(this[$promptElementVisibleTime])&&this.interactionPromptStyle===InteractionPromptStyle.WIGGLE){const Le=(Oe-this[$promptElementVisibleTime])/PROMPT_ANIMATION_TIME%1,je=wiggle(Le),ze=fade(Le);if(this[$promptAnimatedContainer].style.opacity=`${ze}`,je!==this[$lastPromptOffset]){const Ve=je*De.width*.05,He=(je-this[$lastPromptOffset])*Math.PI/16;this[$promptAnimatedContainer].style.transform=`translateX(${Ve}px)`,ke.changeSource=ChangeSource.AUTOMATIC,ke.adjustOrbit(He,0,0),this[$lastPromptOffset]=je}}const Be=ke.update(Ne,Ie),Me=De.updateTarget(Ie);(Be||Me)&&this[$onChange]()}[$deferInteractionPrompt](){this[$waitingToPromptUser]=!1,this[$promptElement].classList.remove("visible"),this[$promptElementVisibleTime]=1/0}[$updateCameraForRadius](Ne){const Ie=Math.max(this[$scene].boundingSphere.radius,Ne),ke=0,De=2*Ie;this[$controls].updateNearFar(ke,De)}[$updateAria](){const{theta:Ne,phi:Ie}=this[$controls].getCameraSpherical(this[$lastSpherical]),ke=(4+Math.floor((Ne%TAU+QUARTER_PI)/HALF_PI))%4,De=Math.floor(Ie/THIRD_PI),Oe=AZIMUTHAL_QUADRANT_LABELS[ke],Be=POLAR_TRIENT_LABELS[De];this[$updateStatus](`View from stage ${Be}${Oe}`)}get[$ariaLabel](){return super[$ariaLabel]+(this.cameraControls?INTERACTION_PROMPT:"")}async[$onResize](Ne){const Ie=this[$controls],ke=this[$scene],De=ke.adjustedFoV(ke.framedFoVDeg);super[$onResize](Ne);const Oe=ke.adjustedFoV(ke.framedFoVDeg)/De,Be=Ie.getFieldOfView()*(isFinite(Oe)?Oe:1);Ie.updateAspect(this[$scene].aspect),this.requestUpdate("maxFieldOfView",this.maxFieldOfView),await this.updateComplete,this[$controls].setFieldOfView(Be),this.jumpCameraToGoal()}[$onModelLoad](){super[$onModelLoad](),this[$initialized]?this[$maintainThetaPhi]=!0:this[$initialized]=!0,this.requestUpdate("maxFieldOfView",this.maxFieldOfView),this.requestUpdate("fieldOfView",this.fieldOfView),this.requestUpdate("minCameraOrbit",this.minCameraOrbit),this.requestUpdate("maxCameraOrbit",this.maxCameraOrbit),this.requestUpdate("cameraOrbit",this.cameraOrbit),this.requestUpdate("cameraTarget",this.cameraTarget),this.jumpCameraToGoal()}}return be=$cancelPrompts,Ce=$onChange,Se=$onPointerChange,__decorate$6([e$4({type:Boolean,attribute:"camera-controls"})],$e.prototype,"cameraControls",void 0),__decorate$6([style$3({intrinsics:cameraOrbitIntrinsics,observeEffects:!0,updateHandler:$syncCameraOrbit}),e$4({type:String,attribute:"camera-orbit",hasChanged:()=>!0})],$e.prototype,"cameraOrbit",void 0),__decorate$6([style$3({intrinsics:cameraTargetIntrinsics,observeEffects:!0,updateHandler:$syncCameraTarget}),e$4({type:String,attribute:"camera-target",hasChanged:()=>!0})],$e.prototype,"cameraTarget",void 0),__decorate$6([style$3({intrinsics:fieldOfViewIntrinsics,observeEffects:!0,updateHandler:$syncFieldOfView}),e$4({type:String,attribute:"field-of-view",hasChanged:()=>!0})],$e.prototype,"fieldOfView",void 0),__decorate$6([style$3({intrinsics:minCameraOrbitIntrinsics,updateHandler:$syncMinCameraOrbit}),e$4({type:String,attribute:"min-camera-orbit",hasChanged:()=>!0})],$e.prototype,"minCameraOrbit",void 0),__decorate$6([style$3({intrinsics:maxCameraOrbitIntrinsics,updateHandler:$syncMaxCameraOrbit}),e$4({type:String,attribute:"max-camera-orbit",hasChanged:()=>!0})],$e.prototype,"maxCameraOrbit",void 0),__decorate$6([style$3({intrinsics:minFieldOfViewIntrinsics,updateHandler:$syncMinFieldOfView}),e$4({type:String,attribute:"min-field-of-view",hasChanged:()=>!0})],$e.prototype,"minFieldOfView",void 0),__decorate$6([style$3({intrinsics:fieldOfViewIntrinsics,updateHandler:$syncMaxFieldOfView}),e$4({type:String,attribute:"max-field-of-view",hasChanged:()=>!0})],$e.prototype,"maxFieldOfView",void 0),__decorate$6([e$4({type:Number,attribute:"interaction-prompt-threshold"})],$e.prototype,"interactionPromptThreshold",void 0),__decorate$6([e$4({type:String,attribute:"interaction-prompt"})],$e.prototype,"interactionPrompt",void 0),__decorate$6([e$4({type:String,attribute:"interaction-prompt-style"})],$e.prototype,"interactionPromptStyle",void 0),__decorate$6([e$4({type:Number,attribute:"orbit-sensitivity"})],$e.prototype,"orbitSensitivity",void 0),__decorate$6([e$4({type:String,attribute:"touch-action"})],$e.prototype,"touchAction",void 0),__decorate$6([e$4({type:Boolean,attribute:"disable-zoom"})],$e.prototype,"disableZoom",void 0),__decorate$6([e$4({type:Boolean,attribute:"disable-pan"})],$e.prototype,"disablePan",void 0),__decorate$6([e$4({type:Boolean,attribute:"disable-tap"})],$e.prototype,"disableTap",void 0),__decorate$6([e$4({type:Number,attribute:"interpolation-decay"})],$e.prototype,"interpolationDecay",void 0),$e};/* @license
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PAN_SENSITIVITY=.018,TAP_DISTANCE=2,TAP_MS=300,vector2=new Vector2,vector3$2=new Vector3,DEFAULT_OPTIONS$k=Object.freeze({minimumRadius:0,maximumRadius:1/0,minimumPolarAngle:Math.PI/8,maximumPolarAngle:Math.PI-Math.PI/8,minimumAzimuthalAngle:-1/0,maximumAzimuthalAngle:1/0,minimumFieldOfView:10,maximumFieldOfView:45,touchAction:"none"}),KEYBOARD_ORBIT_INCREMENT=Math.PI/8,ZOOM_SENSITIVITY=.04,PAN_KEY_INCREMENT=10,ChangeSource={USER_INTERACTION:"user-interaction",NONE:"none",AUTOMATIC:"automatic"};class SmoothControls extends EventDispatcher{constructor(ee,ne,ie){super(),this.camera=ee,this.element=ne,this.scene=ie,this.orbitSensitivity=1,this.inputSensitivity=1,this.changeSource=ChangeSource.NONE,this._interactionEnabled=!1,this._disableZoom=!1,this.isUserPointing=!1,this.enablePan=!0,this.enableTap=!0,this.panProjection=new Matrix3,this.panPerPixel=0,this.spherical=new Spherical,this.goalSpherical=new Spherical,this.thetaDamper=new Damper,this.phiDamper=new Damper,this.radiusDamper=new Damper,this.logFov=Math.log(DEFAULT_OPTIONS$k.maximumFieldOfView),this.goalLogFov=this.logFov,this.fovDamper=new Damper,this.touchMode=null,this.pointers=[],this.startTime=0,this.startPointerPosition={clientX:0,clientY:0},this.lastSeparation=0,this.touchDecided=!1,this.onContext=oe=>{if(this.enablePan)oe.preventDefault();else for(const ae of this.pointers)this.onPointerUp(new PointerEvent("pointercancel",Object.assign(Object.assign({},this.startPointerPosition),{pointerId:ae.id})))},this.touchModeZoom=(oe,ae)=>{if(!this._disableZoom){const ce=this.twoTouchDistance(this.pointers[0],this.pointers[1]),le=ZOOM_SENSITIVITY*(this.lastSeparation-ce)*50/this.scene.height;this.lastSeparation=ce,this.userAdjustOrbit(0,0,le)}this.panPerPixel>0&&this.movePan(oe,ae)},this.disableScroll=oe=>{oe.preventDefault()},this.touchModeRotate=(oe,ae)=>{const{touchAction:ce}=this._options;if(!this.touchDecided&&ce!=="none"){this.touchDecided=!0;const le=Math.abs(oe),ue=Math.abs(ae);if(this.changeSource===ChangeSource.USER_INTERACTION&&(ce==="pan-y"&&ue>le||ce==="pan-x"&&le>ue)){this.touchMode=null;return}else this.element.addEventListener("touchmove",this.disableScroll,{passive:!1})}this.handleSinglePointerMove(oe,ae)},this.onPointerDown=oe=>{if(this.pointers.length>2)return;const{element:ae}=this;this.pointers.length===0&&(ae.addEventListener("pointermove",this.onPointerMove),ae.addEventListener("pointerup",this.onPointerUp),this.touchMode=null,this.touchDecided=!1,this.startPointerPosition.clientX=oe.clientX,this.startPointerPosition.clientY=oe.clientY,this.startTime=performance.now());try{ae.setPointerCapture(oe.pointerId)}catch{}this.pointers.push({clientX:oe.clientX,clientY:oe.clientY,id:oe.pointerId}),this.isUserPointing=!1,oe.pointerType==="touch"?(this.changeSource=oe.altKey?ChangeSource.AUTOMATIC:ChangeSource.USER_INTERACTION,this.onTouchChange(oe)):(this.changeSource=ChangeSource.USER_INTERACTION,this.onMouseDown(oe)),this.changeSource===ChangeSource.USER_INTERACTION&&this.dispatchEvent({type:"user-interaction"})},this.onPointerMove=oe=>{const ae=this.pointers.find(he=>he.id===oe.pointerId);if(ae==null)return;const ce=this.pointers.length,le=(oe.clientX-ae.clientX)/ce,ue=(oe.clientY-ae.clientY)/ce;le===0&&ue===0||(ae.clientX=oe.clientX,ae.clientY=oe.clientY,oe.pointerType==="touch"?(this.changeSource=oe.altKey?ChangeSource.AUTOMATIC:ChangeSource.USER_INTERACTION,this.touchMode!==null&&this.touchMode(le,ue)):(this.changeSource=ChangeSource.USER_INTERACTION,this.panPerPixel>0?this.movePan(le,ue):this.handleSinglePointerMove(le,ue)))},this.onPointerUp=oe=>{const{element:ae}=this,ce=this.pointers.findIndex(le=>le.id===oe.pointerId);ce!==-1&&this.pointers.splice(ce,1),this.panPerPixel>0&&!oe.altKey&&this.resetRadius(),this.pointers.length===0?(ae.removeEventListener("pointermove",this.onPointerMove),ae.removeEventListener("pointerup",this.onPointerUp),ae.removeEventListener("touchmove",this.disableScroll),this.enablePan&&this.enableTap&&this.recenter(oe)):this.touchMode!==null&&this.onTouchChange(oe),this.scene.element[$panElement].style.opacity=0,ae.style.cursor="grab",this.panPerPixel=0,this.isUserPointing&&this.dispatchEvent({type:"pointer-change-end"})},this.onWheel=oe=>{this.changeSource=ChangeSource.USER_INTERACTION;const ae=oe.deltaY*(oe.deltaMode==1?18:1)*ZOOM_SENSITIVITY/30;this.userAdjustOrbit(0,0,ae),oe.preventDefault(),this.dispatchEvent({type:"user-interaction"})},this.onKeyDown=oe=>{const{changeSource:ae}=this;this.changeSource=ChangeSource.USER_INTERACTION,(oe.shiftKey&&this.enablePan?this.panKeyCodeHandler(oe):this.orbitZoomKeyCodeHandler(oe))?(oe.preventDefault(),this.dispatchEvent({type:"user-interaction"})):this.changeSource=ae},this._options=Object.assign({},DEFAULT_OPTIONS$k),this.setOrbit(0,Math.PI/2,1),this.setFieldOfView(100),this.jumpToGoal()}get interactionEnabled(){return this._interactionEnabled}enableInteraction(){if(this._interactionEnabled===!1){const{element:ee}=this;ee.addEventListener("pointerdown",this.onPointerDown),ee.addEventListener("pointercancel",this.onPointerUp),this._disableZoom||ee.addEventListener("wheel",this.onWheel),ee.addEventListener("keydown",this.onKeyDown),ee.addEventListener("touchmove",()=>{},{passive:!1}),ee.addEventListener("contextmenu",this.onContext),this.element.style.cursor="grab",this._interactionEnabled=!0,this.updateTouchActionStyle()}}disableInteraction(){if(this._interactionEnabled===!0){const{element:ee}=this;ee.removeEventListener("pointerdown",this.onPointerDown),ee.removeEventListener("pointermove",this.onPointerMove),ee.removeEventListener("pointerup",this.onPointerUp),ee.removeEventListener("pointercancel",this.onPointerUp),ee.removeEventListener("wheel",this.onWheel),ee.removeEventListener("keydown",this.onKeyDown),ee.removeEventListener("contextmenu",this.onContext),ee.style.cursor="",this.touchMode=null,this._interactionEnabled=!1,this.updateTouchActionStyle()}}get options(){return this._options}set disableZoom(ee){this._disableZoom!=ee&&(this._disableZoom=ee,ee===!0?this.element.removeEventListener("wheel",this.onWheel):this.element.addEventListener("wheel",this.onWheel),this.updateTouchActionStyle())}getCameraSpherical(ee=new Spherical){return ee.copy(this.spherical)}getFieldOfView(){return this.camera.fov}applyOptions(ee){Object.assign(this._options,ee),this.setOrbit(),this.setFieldOfView(Math.exp(this.goalLogFov))}updateNearFar(ee,ne){this.camera.far=ne===0?2:ne,this.camera.near=Math.max(ee,this.camera.far/1e3),this.camera.updateProjectionMatrix()}updateAspect(ee){this.camera.aspect=ee,this.camera.updateProjectionMatrix()}setOrbit(ee=this.goalSpherical.theta,ne=this.goalSpherical.phi,ie=this.goalSpherical.radius){const{minimumAzimuthalAngle:oe,maximumAzimuthalAngle:ae,minimumPolarAngle:ce,maximumPolarAngle:le,minimumRadius:ue,maximumRadius:he}=this._options,{theta:fe,phi:me,radius:ge}=this.goalSpherical,ve=clamp$2(ee,oe,ae);!isFinite(oe)&&!isFinite(ae)&&(this.spherical.theta=this.wrapAngle(this.spherical.theta-ve)+ve);const ye=clamp$2(ne,ce,le),be=clamp$2(ie,ue,he);return ve===fe&&ye===me&&be===ge||!isFinite(ve)||!isFinite(ye)||!isFinite(be)?!1:(this.goalSpherical.theta=ve,this.goalSpherical.phi=ye,this.goalSpherical.radius=be,this.goalSpherical.makeSafe(),!0)}setRadius(ee){this.goalSpherical.radius=ee,this.setOrbit()}setFieldOfView(ee){const{minimumFieldOfView:ne,maximumFieldOfView:ie}=this._options;ee=clamp$2(ee,ne,ie),this.goalLogFov=Math.log(ee)}setDamperDecayTime(ee){this.thetaDamper.setDecayTime(ee),this.phiDamper.setDecayTime(ee),this.radiusDamper.setDecayTime(ee),this.fovDamper.setDecayTime(ee)}adjustOrbit(ee,ne,ie){const{theta:oe,phi:ae,radius:ce}=this.goalSpherical,{minimumRadius:le,maximumRadius:ue,minimumFieldOfView:he,maximumFieldOfView:fe}=this._options,me=this.spherical.theta-oe,ge=Math.PI-.001,ve=oe-clamp$2(ee,-ge-me,ge-me),ye=ae-ne,be=ie===0?0:((ie>0?ue:le)-ce)/(Math.log(ie>0?fe:he)-this.goalLogFov),Ce=ce+ie*(isFinite(be)?be:(ue-le)*2);if(this.setOrbit(ve,ye,Ce),ie!==0){const Se=this.goalLogFov+ie;this.setFieldOfView(Math.exp(Se))}}jumpToGoal(){this.update(0,SETTLING_TIME)}update(ee,ne){if(this.isStationary())return!1;const{maximumPolarAngle:ie,maximumRadius:oe}=this._options,ae=this.spherical.theta-this.goalSpherical.theta;return Math.abs(ae)>Math.PI&&!isFinite(this._options.minimumAzimuthalAngle)&&!isFinite(this._options.maximumAzimuthalAngle)&&(this.spherical.theta-=Math.sign(ae)*2*Math.PI),this.spherical.theta=this.thetaDamper.update(this.spherical.theta,this.goalSpherical.theta,ne,Math.PI),this.spherical.phi=this.phiDamper.update(this.spherical.phi,this.goalSpherical.phi,ne,ie),this.spherical.radius=this.radiusDamper.update(this.spherical.radius,this.goalSpherical.radius,ne,oe),this.logFov=this.fovDamper.update(this.logFov,this.goalLogFov,ne,1),this.moveCamera(),!0}updateTouchActionStyle(){const{style:ee}=this.element;if(this._interactionEnabled){const{touchAction:ne}=this._options;this._disableZoom&&ne!=="none"?ee.touchAction="manipulation":ee.touchAction=ne}else ee.touchAction=""}isStationary(){return this.goalSpherical.theta===this.spherical.theta&&this.goalSpherical.phi===this.spherical.phi&&this.goalSpherical.radius===this.spherical.radius&&this.goalLogFov===this.logFov}moveCamera(){this.spherical.makeSafe(),this.camera.position.setFromSpherical(this.spherical),this.camera.setRotationFromEuler(new Euler(this.spherical.phi-Math.PI/2,this.spherical.theta,0,"YXZ")),this.camera.fov!==Math.exp(this.logFov)&&(this.camera.fov=Math.exp(this.logFov),this.camera.updateProjectionMatrix())}userAdjustOrbit(ee,ne,ie){this.adjustOrbit(ee*this.orbitSensitivity*this.inputSensitivity,ne*this.orbitSensitivity*this.inputSensitivity,ie*this.inputSensitivity)}wrapAngle(ee){const ne=(ee+Math.PI)/(2*Math.PI);return(ne-Math.floor(ne))*2*Math.PI-Math.PI}pixelLengthToSphericalAngle(ee){return 2*Math.PI*ee/this.scene.height}twoTouchDistance(ee,ne){const{clientX:ie,clientY:oe}=ee,{clientX:ae,clientY:ce}=ne,le=ae-ie,ue=ce-oe;return Math.sqrt(le*le+ue*ue)}handleSinglePointerMove(ee,ne){const ie=this.pixelLengthToSphericalAngle(ee),oe=this.pixelLengthToSphericalAngle(ne);this.isUserPointing===!1&&(this.isUserPointing=!0,this.dispatchEvent({type:"pointer-change-start"})),this.userAdjustOrbit(ie,oe,0)}initializePan(){const{theta:ee,phi:ne}=this.spherical,ie=ee-this.scene.yaw;this.panPerPixel=PAN_SENSITIVITY/this.scene.height,this.panProjection.set(-Math.cos(ie),-Math.cos(ne)*Math.sin(ie),0,0,Math.sin(ne),0,Math.sin(ie),-Math.cos(ne)*Math.cos(ie),0)}movePan(ee,ne){const{scene:ie}=this,oe=vector3$2.set(ee,ne,0).multiplyScalar(this.inputSensitivity),ae=this.spherical.radius*Math.exp(this.logFov)*this.panPerPixel;oe.multiplyScalar(ae);const ce=ie.getTarget();ce.add(oe.applyMatrix3(this.panProjection)),ie.boundingSphere.clampPoint(ce,ce),ie.setTarget(ce.x,ce.y,ce.z)}recenter(ee){if(performance.now()>this.startTime+TAP_MS||Math.abs(ee.clientX-this.startPointerPosition.clientX)>TAP_DISTANCE||Math.abs(ee.clientY-this.startPointerPosition.clientY)>TAP_DISTANCE)return;const{scene:ne}=this,ie=ne.positionAndNormalFromPoint(ne.getNDC(ee.clientX,ee.clientY));if(ie==null){const{cameraTarget:oe}=ne.element;ne.element.cameraTarget="",ne.element.cameraTarget=oe,this.userAdjustOrbit(0,0,1)}else ne.target.worldToLocal(ie.position),ne.setTarget(ie.position.x,ie.position.y,ie.position.z)}resetRadius(){const{scene:ee}=this,ne=ee.positionAndNormalFromPoint(vector2.set(0,0));if(ne==null)return;ee.target.worldToLocal(ne.position);const ie=ee.getTarget(),{theta:oe,phi:ae}=this.spherical,ce=oe-ee.yaw,le=vector3$2.set(Math.sin(ae)*Math.sin(ce),Math.cos(ae),Math.sin(ae)*Math.cos(ce)),ue=le.dot(ne.position.sub(ie));ie.add(le.multiplyScalar(ue)),ee.setTarget(ie.x,ie.y,ie.z),this.setOrbit(void 0,void 0,this.goalSpherical.radius-ue)}onTouchChange(ee){if(this.pointers.length===1)this.touchMode=this.touchModeRotate;else{if(this._disableZoom){this.touchMode=null,this.element.removeEventListener("touchmove",this.disableScroll);return}this.touchMode=this.touchDecided&&this.touchMode===null?null:this.touchModeZoom,this.touchDecided=!0,this.element.addEventListener("touchmove",this.disableScroll,{passive:!1}),this.lastSeparation=this.twoTouchDistance(this.pointers[0],this.pointers[1]),this.enablePan&&this.touchMode!=null&&(this.initializePan(),ee.altKey||(this.scene.element[$panElement].style.opacity=1))}}onMouseDown(ee){this.panPerPixel=0,this.enablePan&&(ee.button===2||ee.ctrlKey||ee.metaKey||ee.shiftKey)&&(this.initializePan(),this.scene.element[$panElement].style.opacity=1),this.element.style.cursor="grabbing"}orbitZoomKeyCodeHandler(ee){let ne=!0;switch(ee.key){case"PageUp":this.userAdjustOrbit(0,0,ZOOM_SENSITIVITY);break;case"PageDown":this.userAdjustOrbit(0,0,-1*ZOOM_SENSITIVITY);break;case"ArrowUp":this.userAdjustOrbit(0,-KEYBOARD_ORBIT_INCREMENT,0);break;case"ArrowDown":this.userAdjustOrbit(0,KEYBOARD_ORBIT_INCREMENT,0);break;case"ArrowLeft":this.userAdjustOrbit(-KEYBOARD_ORBIT_INCREMENT,0,0);break;case"ArrowRight":this.userAdjustOrbit(KEYBOARD_ORBIT_INCREMENT,0,0);break;default:ne=!1;break}return ne}panKeyCodeHandler(ee){this.initializePan();let ne=!0;switch(ee.key){case"ArrowUp":this.movePan(0,-1*PAN_KEY_INCREMENT);break;case"ArrowDown":this.movePan(0,PAN_KEY_INCREMENT);break;case"ArrowLeft":this.movePan(-1*PAN_KEY_INCREMENT,0);break;case"ArrowRight":this.movePan(PAN_KEY_INCREMENT,0);break;default:ne=!1;break}return ne}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INIT_FRAMES=30,AR_SHADOW_INTENSITY=.8,ROTATION_RATE=1.5,HIT_ANGLE_DEG=20,SCALE_SNAP_HIGH=1.3,SCALE_SNAP_LOW=1/SCALE_SNAP_HIGH,MIN_VIEWPORT_SCALE=.25,MAX_DISTANCE=10,ARStatus={NOT_PRESENTING:"not-presenting",SESSION_STARTED:"session-started",OBJECT_PLACED:"object-placed",FAILED:"failed"},ARTracking={TRACKING:"tracking",NOT_TRACKING:"not-tracking"},vector3$1=new Vector3,matrix4=new Matrix4,hitPosition=new Vector3,camera=new PerspectiveCamera(45,1,.1,100);class ARRenderer extends EventDispatcher{constructor(ee){super(),this.renderer=ee,this.currentSession=null,this.placeOnWall=!1,this.placementBox=null,this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.initialHitSource=null,this.transientHitTestSource=null,this.inputSource=null,this._presentedScene=null,this.resolveCleanup=null,this.exitWebXRButtonContainer=null,this.overlay=null,this.xrLight=null,this.tracking=!0,this.frames=0,this.initialized=!1,this.oldTarget=new Vector3,this.placementComplete=!1,this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.lastDragPosition=new Vector3,this.firstRatio=0,this.lastAngle=0,this.goalPosition=new Vector3,this.goalYaw=0,this.goalScale=1,this.xDamper=new Damper,this.yDamper=new Damper,this.zDamper=new Damper,this.yawDamper=new Damper,this.scaleDamper=new Damper,this.onExitWebXRButtonContainerClick=()=>this.stopPresenting(),this.onUpdateScene=()=>{this.placementBox!=null&&this.isPresenting&&(this.placementBox.dispose(),this.placementBox=new PlacementBox(this.presentedScene,this.placeOnWall?"back":"bottom"))},this.onSelectStart=ne=>{const ie=this.transientHitTestSource;if(ie==null)return;const oe=this.frame.getHitTestResultsForTransientInput(ie),ae=this.presentedScene,ce=this.placementBox;if(oe.length===1){this.inputSource=ne.inputSource;const{axes:le}=this.inputSource.gamepad,ue=ce.getHit(this.presentedScene,le[0],le[1]);ce.show=!0,ue!=null?(this.isTranslating=!0,this.lastDragPosition.copy(ue)):this.placeOnWall===!1&&(this.isRotating=!0,this.lastAngle=le[0]*ROTATION_RATE)}else if(oe.length===2){ce.show=!0,this.isTwoFingering=!0;const{separation:le}=this.fingerPolar(oe);this.firstRatio=le/ae.scale.x}},this.onSelectEnd=()=>{this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!1,this.inputSource=null,this.goalPosition.y+=this.placementBox.offsetHeight*this.presentedScene.scale.x,this.placementBox.show=!1},this.threeRenderer=ee.threeRenderer,this.threeRenderer.xr.enabled=!0}async resolveARSession(){assertIsArCandidate();const ee=await navigator.xr.requestSession("immersive-ar",{requiredFeatures:["hit-test"],optionalFeatures:["dom-overlay","light-estimation"],domOverlay:this.overlay?{root:this.overlay}:void 0});return this.threeRenderer.xr.setReferenceSpaceType("local"),await this.threeRenderer.xr.setSession(ee),this.threeRenderer.xr.cameraAutoUpdate=!1,ee}get presentedScene(){return this._presentedScene}async supportsPresentation(){try{return assertIsArCandidate(),await navigator.xr.isSessionSupported("immersive-ar")}catch(ee){return console.warn("Request to present in WebXR denied:"),console.warn(ee),console.warn("Falling back to next ar-mode"),!1}}async present(ee,ne=!1){this.isPresenting&&console.warn("Cannot present while a model is already presenting");let ie=new Promise((he,fe)=>{requestAnimationFrame(()=>he())});ee.setHotspotsVisibility(!1),ee.queueRender(),await ie,this._presentedScene=ee,this.overlay=ee.element.shadowRoot.querySelector("div.default"),ne===!0&&(this.xrLight=new XREstimatedLight(this.threeRenderer),this.xrLight.addEventListener("estimationstart",()=>{if(!this.isPresenting||this.xrLight==null)return;const he=this.presentedScene;he.add(this.xrLight),he.environment=this.xrLight.environment}));const oe=await this.resolveARSession();oe.addEventListener("end",()=>{this.postSessionCleanup()},{once:!0});const ae=ee.element.shadowRoot.querySelector(".slot.exit-webxr-ar-button");ae.classList.add("enabled"),ae.addEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=ae;const ce=await oe.requestReferenceSpace("viewer");this.tracking=!0,this.frames=0,this.initialized=!1,this.turntableRotation=ee.yaw,this.goalYaw=ee.yaw,this.goalScale=1,ee.background=null,this.oldShadowIntensity=ee.shadowIntensity,ee.setShadowIntensity(.01),this.oldTarget.copy(ee.getTarget()),ee.element.addEventListener("load",this.onUpdateScene);const le=HIT_ANGLE_DEG*Math.PI/180,ue=this.placeOnWall===!0?void 0:new XRRay(new DOMPoint(0,0,0),{x:0,y:-Math.sin(le),z:-Math.cos(le)});oe.requestHitTestSource({space:ce,offsetRay:ue}).then(he=>{this.initialHitSource=he}),this.currentSession=oe,this.placementBox=new PlacementBox(ee,this.placeOnWall?"back":"bottom"),this.placementComplete=!1,this.lastTick=performance.now(),this.dispatchEvent({type:"status",status:ARStatus.SESSION_STARTED})}async stopPresenting(){if(!this.isPresenting)return;const ee=new Promise(ne=>{this.resolveCleanup=ne});try{await this.currentSession.end(),await ee}catch(ne){console.warn("Error while trying to end WebXR AR session"),console.warn(ne),this.postSessionCleanup()}}get isPresenting(){return this.presentedScene!=null}get target(){return this.oldTarget}updateTarget(){const ee=this.presentedScene;if(ee!=null){const ne=ee.getTarget();this.oldTarget.copy(ne),this.placeOnWall?ne.z=ee.boundingBox.min.z:ne.y=ee.boundingBox.min.y,ee.setTarget(ne.x,ne.y,ne.z)}}postSessionCleanup(){const ee=this.currentSession;ee!=null&&(ee.removeEventListener("selectstart",this.onSelectStart),ee.removeEventListener("selectend",this.onSelectEnd),this.currentSession=null);const ne=this.presentedScene;if(this._presentedScene=null,ne!=null){const{element:ce}=ne;this.xrLight!=null&&(ne.remove(this.xrLight),this.xrLight.dispose(),this.xrLight=null),ne.position.set(0,0,0),ne.scale.set(1,1,1),ne.setShadowOffset(0);const le=this.turntableRotation;le!=null&&(ne.yaw=le);const ue=this.oldShadowIntensity;ue!=null&&ne.setShadowIntensity(ue),ne.setEnvironmentAndSkybox(ce[$currentEnvironmentMap],ce[$currentBackground]);const he=this.oldTarget;ne.setTarget(he.x,he.y,he.z),ne.xrCamera=null,ne.element.removeEventListener("load",this.onUpdateScene),ne.orientHotspots(0),ce.requestUpdate("cameraTarget"),ce.requestUpdate("maxCameraOrbit"),ce[$onResize](ce.getBoundingClientRect()),requestAnimationFrame(()=>{ne.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:ChangeSource.NONE}}))})}this.renderer.height=0;const ie=this.exitWebXRButtonContainer;ie!=null&&(ie.classList.remove("enabled"),ie.removeEventListener("click",this.onExitWebXRButtonContainerClick),this.exitWebXRButtonContainer=null);const oe=this.transientHitTestSource;oe!=null&&(oe.cancel(),this.transientHitTestSource=null);const ae=this.initialHitSource;ae!=null&&(ae.cancel(),this.initialHitSource=null),this.placementBox!=null&&(this.placementBox.dispose(),this.placementBox=null),this.lastTick=null,this.turntableRotation=null,this.oldShadowIntensity=null,this.frame=null,this.inputSource=null,this.overlay=null,this.resolveCleanup!=null&&this.resolveCleanup(),this.dispatchEvent({type:"status",status:ARStatus.NOT_PRESENTING})}updateView(ee){const ne=this.presentedScene,ie=this.threeRenderer.xr;ie.updateCamera(camera),ne.xrCamera=ie.getCamera();const{elements:oe}=ne.getCamera().matrixWorld;if(ne.orientHotspots(Math.atan2(oe[1],oe[5])),this.initialized||(this.placeInitially(),this.initialized=!0),ee.requestViewportScale&&ee.recommendedViewportScale){const ce=ee.recommendedViewportScale;ee.requestViewportScale(Math.max(ce,MIN_VIEWPORT_SCALE))}const ae=ie.getBaseLayer();if(ae!=null){const ce=ae instanceof XRWebGLLayer?ae.getViewport(ee):ie.getBinding().getViewSubImage(ae,ee).viewport;this.threeRenderer.setViewport(ce.x,ce.y,ce.width,ce.height)}}placeInitially(){const ee=this.presentedScene,{position:ne,element:ie}=ee,oe=ee.getCamera(),{width:ae,height:ce}=this.overlay.getBoundingClientRect();ee.setSize(ae,ce),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert();const{theta:le,radius:ue}=ie.getCameraOrbit(),he=oe.getWorldDirection(vector3$1);ee.yaw=Math.atan2(-he.x,-he.z)-le,this.goalYaw=ee.yaw,ne.copy(oe.position).add(he.multiplyScalar(ue)),this.updateTarget();const fe=ee.getTarget();ne.add(fe).sub(this.oldTarget),this.goalPosition.copy(ne),ee.setHotspotsVisibility(!0);const{session:me}=this.frame;me.addEventListener("selectstart",this.onSelectStart),me.addEventListener("selectend",this.onSelectEnd),me.requestHitTestSourceForTransientInput({profile:"generic-touchscreen"}).then(ge=>{this.transientHitTestSource=ge})}getTouchLocation(){const{axes:ee}=this.inputSource.gamepad;let ne=this.placementBox.getExpandedHit(this.presentedScene,ee[0],ee[1]);return ne!=null&&(vector3$1.copy(ne).sub(this.presentedScene.getCamera().position),vector3$1.length()>MAX_DISTANCE)?null:ne}getHitPoint(ee){const ne=this.threeRenderer.xr.getReferenceSpace(),ie=ee.getPose(ne);if(ie==null)return null;const oe=matrix4.fromArray(ie.transform.matrix);return this.placeOnWall===!0&&(this.goalYaw=Math.atan2(oe.elements[4],oe.elements[6])),oe.elements[5]>.75!==this.placeOnWall?hitPosition.setFromMatrixPosition(oe):null}moveToFloor(ee){const ne=this.initialHitSource;if(ne==null)return;const ie=ee.getHitTestResults(ne);if(ie.length==0)return;const oe=ie[0],ae=this.getHitPoint(oe);ae!=null&&(this.placementBox.show=!0,this.isTranslating||(this.placeOnWall?this.goalPosition.copy(ae):this.goalPosition.y=ae.y),ne.cancel(),this.initialHitSource=null,this.dispatchEvent({type:"status",status:ARStatus.OBJECT_PLACED}))}fingerPolar(ee){const ne=ee[0].inputSource.gamepad.axes,ie=ee[1].inputSource.gamepad.axes,oe=ie[0]-ne[0],ae=ie[1]-ne[1],ce=Math.atan2(ae,oe);let le=this.lastAngle-ce;return le>Math.PI?le-=2*Math.PI:le<-Math.PI&&(le+=2*Math.PI),this.lastAngle=ce,{separation:Math.sqrt(oe*oe+ae*ae),deltaYaw:le}}processInput(ee){const ne=this.transientHitTestSource;if(ne==null||!this.isTranslating&&!this.isTwoFingering&&!this.isRotating)return;const ie=ee.getHitTestResultsForTransientInput(ne),oe=this.presentedScene,ae=oe.scale.x;if(this.isTwoFingering){if(ie.length<2)this.isTwoFingering=!1;else{const{separation:ce,deltaYaw:le}=this.fingerPolar(ie);if(this.placeOnWall===!1&&(this.goalYaw+=le),oe.canScale){const ue=ce/this.firstRatio;this.goalScale=ue<SCALE_SNAP_HIGH&&ue>SCALE_SNAP_LOW?1:ue}}return}else if(ie.length===2){this.isTranslating=!1,this.isRotating=!1,this.isTwoFingering=!0;const{separation:ce}=this.fingerPolar(ie);this.firstRatio=ce/ae;return}if(this.isRotating){const ce=this.inputSource.gamepad.axes[0]*ROTATION_RATE;this.goalYaw+=ce-this.lastAngle,this.lastAngle=ce}else this.isTranslating&&ie.forEach(ce=>{if(ce.inputSource!==this.inputSource)return;let le=null;if(ce.results.length>0&&(le=this.getHitPoint(ce.results[0])),le==null&&(le=this.getTouchLocation()),le!=null){if(this.goalPosition.sub(this.lastDragPosition),this.placeOnWall===!1){const ue=le.y-this.lastDragPosition.y;if(ue<0){this.placementBox.offsetHeight=ue/ae,this.presentedScene.setShadowOffset(ue);const he=vector3$1.copy(oe.getCamera().position),fe=-ue/(he.y-le.y);he.multiplyScalar(fe),le.multiplyScalar(1-fe).add(he)}}this.goalPosition.add(le),this.lastDragPosition.copy(le)}})}moveScene(ee){const ne=this.presentedScene,{position:ie,yaw:oe}=ne,ae=ne.boundingSphere.radius,ce=this.goalPosition,le=ne.scale.x,ue=this.placementBox;let he=ChangeSource.NONE;if(!ce.equals(ie)||this.goalScale!==le){he=ChangeSource.USER_INTERACTION;let{x:fe,y:me,z:ge}=ie;fe=this.xDamper.update(fe,ce.x,ee,ae),me=this.yDamper.update(me,ce.y,ee,ae),ge=this.zDamper.update(ge,ce.z,ee,ae),ie.set(fe,me,ge);const ve=this.scaleDamper.update(le,this.goalScale,ee,1);if(ne.scale.set(ve,ve,ve),!this.isTranslating){const ye=ce.y-me;this.placementComplete&&this.placeOnWall===!1?(ue.offsetHeight=ye/ve,ne.setShadowOffset(ye)):ye===0&&(this.placementComplete=!0,ue.show=!1,ne.setShadowIntensity(AR_SHADOW_INTENSITY))}}ue.updateOpacity(ee),ne.updateTarget(ee),ne.yaw=this.yawDamper.update(oe,this.goalYaw,ee,Math.PI),ne.element.dispatchEvent(new CustomEvent("camera-change",{detail:{source:he}}))}onWebXRFrame(ee,ne){this.frame=ne,++this.frames;const ie=this.threeRenderer.xr.getReferenceSpace(),oe=ne.getViewerPose(ie);oe==null&&this.tracking===!0&&this.frames>INIT_FRAMES&&(this.tracking=!1,this.dispatchEvent({type:"tracking",status:ARTracking.NOT_TRACKING}));const ae=this.presentedScene;if(oe==null||ae==null||!ae.element.loaded){this.threeRenderer.clear();return}this.tracking===!1&&(this.tracking=!0,this.dispatchEvent({type:"tracking",status:ARTracking.TRACKING}));let ce=!0;for(const le of oe.views){if(this.updateView(le),ce){this.moveToFloor(ne),this.processInput(ne);const ue=ee-this.lastTick;this.moveScene(ue),this.renderer.preRender(ae,ee,ue),this.lastTick=ee,ae.renderShadow(this.threeRenderer)}this.threeRenderer.render(ae,ae.getCamera()),ce=!1}}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Debugger{constructor(ee){ee.threeRenderer.debug={checkShaderErrors:!0},Promise.resolve().then(()=>{self.dispatchEvent(new CustomEvent("model-viewer-renderer-debug",{detail:{renderer:ee,THREE:{ShaderMaterial,Texture:Texture$1,Mesh,Scene,PlaneGeometry,OrthographicCamera,WebGLRenderTarget}}}))})}addScene(ee){self.dispatchEvent(new CustomEvent("model-viewer-scene-added-debug",{detail:{scene:ee}}))}removeScene(ee){self.dispatchEvent(new CustomEvent("model-viewer-scene-removed-debug",{detail:{scene:ee}}))}}function clone$2(re){const ee=new Map,ne=new Map,ie=re.clone();return parallelTraverse(re,ie,function(oe,ae){ee.set(ae,oe),ne.set(oe,ae)}),ie.traverse(function(oe){if(!oe.isSkinnedMesh)return;const ae=oe,ce=ee.get(oe),le=ce.skeleton.bones;ae.skeleton=ce.skeleton.clone(),ae.bindMatrix.copy(ce.bindMatrix),ae.skeleton.bones=le.map(function(ue){return ne.get(ue)}),ae.bind(ae.skeleton,ae.bindMatrix)}),ie}function parallelTraverse(re,ee,ne){ne(re,ee);for(let ie=0;ie<re.children.length;ie++)parallelTraverse(re.children[ie],ee.children[ie],ne)}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $prepared=Symbol("prepared"),$prepare=Symbol("prepare"),$preparedGLTF=Symbol("preparedGLTF"),$clone=Symbol("clone");class GLTFInstance{constructor(ee){this[$preparedGLTF]=ee}static prepare(ee){if(ee.scene==null)throw new Error("Model does not have a scene");if(ee[$prepared])return ee;const ne=this[$prepare](ee);return ne[$prepared]=!0,ne}static[$prepare](ee){const{scene:ne}=ee,ie=[ne];return Object.assign(Object.assign({},ee),{scene:ne,scenes:ie})}get parser(){return this[$preparedGLTF].parser}get animations(){return this[$preparedGLTF].animations}get scene(){return this[$preparedGLTF].scene}get scenes(){return this[$preparedGLTF].scenes}get cameras(){return this[$preparedGLTF].cameras}get asset(){return this[$preparedGLTF].asset}get userData(){return this[$preparedGLTF].userData}clone(){const ee=this.constructor,ne=this[$clone]();return new ee(ne)}dispose(){this.scenes.forEach(ee=>{ee.traverse(ne=>{if(!ne.isMesh)return;const ie=ne;(Array.isArray(ie.material)?ie.material:[ie.material]).forEach(ae=>{for(const ce in ae){const le=ae[ce];if(le instanceof Texture$1){const ue=le.source.data;ue.close!=null&&ue.close(),le.dispose()}}ae.dispose()}),ie.geometry.dispose()})})}[$clone](){const ee=this[$preparedGLTF],ne=clone$2(this.scene);cloneVariantMaterials(ne,this.scene);const ie=[ne],oe=ee.userData?Object.assign({},ee.userData):{};return Object.assign(Object.assign({},ee),{scene:ne,scenes:ie,userData:oe})}}const cloneVariantMaterials=(re,ee)=>{traversePair(re,ee,(ne,ie)=>{ie.userData.variantMaterials!==void 0&&(ne.userData.variantMaterials=new Map(ie.userData.variantMaterials)),ie.userData.variantData!==void 0&&(ne.userData.variantData=ie.userData.variantData),ie.userData.originalMaterial!==void 0&&(ne.userData.originalMaterial=ie.userData.originalMaterial)})},traversePair=(re,ee,ne)=>{ne(re,ee);for(let ie=0;ie<re.children.length;ie++)traversePair(re.children[ie],ee.children[ie],ne)},$threeGLTF=Symbol("threeGLTF"),$gltf=Symbol("gltf"),$gltfElementMap=Symbol("gltfElementMap"),$threeObjectMap=Symbol("threeObjectMap"),$parallelTraverseThreeScene=Symbol("parallelTraverseThreeScene"),$correlateOriginalThreeGLTF=Symbol("correlateOriginalThreeGLTF"),$correlateCloneThreeGLTF=Symbol("correlateCloneThreeGLTF");class CorrelatedSceneGraph{constructor(ee,ne,ie,oe){this[$threeGLTF]=ee,this[$gltf]=ne,this[$gltfElementMap]=oe,this[$threeObjectMap]=ie}static from(ee,ne){return ne!=null?this[$correlateCloneThreeGLTF](ee,ne):this[$correlateOriginalThreeGLTF](ee)}static[$correlateOriginalThreeGLTF](ee){const ne=ee.parser.json,ie=ee.parser.associations,oe=new Map,ae={name:"Default"},ce={type:"materials",index:-1};for(const le of ie.keys())le instanceof Material$1&&ie.get(le)==null&&(ce.index<0&&(ne.materials==null&&(ne.materials=[]),ce.index=ne.materials.length,ne.materials.push(ae)),le.name=ae.name,ie.set(le,{materials:ce.index}));for(const[le,ue]of ie){if(ue){const he=le;he.userData=he.userData||{},he.userData.associations=ue}for(const he in ue)if(he!=null&&he!=="primitives"){const fe=he,ge=(ne[fe]||[])[ue[fe]];if(ge==null)continue;let ve=oe.get(ge);ve==null&&(ve=new Set,oe.set(ge,ve)),ve.add(le)}}return new CorrelatedSceneGraph(ee,ne,ie,oe)}static[$correlateCloneThreeGLTF](ee,ne){const ie=ne.threeGLTF,oe=ne.gltf,ae=JSON.parse(JSON.stringify(oe)),ce=new Map,le=new Map;for(let ue=0;ue<ie.scenes.length;ue++)this[$parallelTraverseThreeScene](ie.scenes[ue],ee.scenes[ue],(he,fe)=>{const me=ne.threeObjectMap.get(he);if(me!=null){for(const ge in me)if(ge!=null&&ge!=="primitives"){const ve=ge,ye=me[ve],be=ae[ve][ye],Ce=ce.get(fe)||{};Ce[ve]=ye,ce.set(fe,Ce);const Se=le.get(be)||new Set;Se.add(fe),le.set(be,Se)}}});return new CorrelatedSceneGraph(ee,ae,ce,le)}static[$parallelTraverseThreeScene](ee,ne,ie){const oe=ce=>ce.isMesh,ae=(ce,le)=>{if(ie(ce,le),ce.isObject3D){if(oe(ce))if(Array.isArray(ce.material))for(let ue=0;ue<ce.material.length;++ue)ae(ce.material[ue],le.material[ue]);else ae(ce.material,le.material);for(let ue=0;ue<ce.children.length;++ue)ae(ce.children[ue],le.children[ue])}};ae(ee,ne)}get threeGLTF(){return this[$threeGLTF]}get gltf(){return this[$gltf]}get gltfElementMap(){return this[$gltfElementMap]}get threeObjectMap(){return this[$threeObjectMap]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $correlatedSceneGraph$1=Symbol("correlatedSceneGraph");class ModelViewerGLTFInstance extends GLTFInstance{static[$prepare](ee){const ne=super[$prepare](ee);ne[$correlatedSceneGraph$1]==null&&(ne[$correlatedSceneGraph$1]=CorrelatedSceneGraph.from(ne));const{scene:ie}=ne,oe=new Sphere(void 0,1/0);return ie.traverse(ae=>{ae.renderOrder=1e3,ae.frustumCulled=!1,ae.name||(ae.name=ae.uuid);const ce=ae;if(ce.isMesh){const{geometry:le}=ce;ce.castShadow=!0,ce.isSkinnedMesh&&(le.boundingSphere=oe,le.boundingBox=null);const ue=ce.material;if(ue.isMeshBasicMaterial===!0&&(ue.toneMapped=!1),ue.shadowSide=FrontSide,ue.aoMap){const{gltf:he,threeObjectMap:fe}=ne[$correlatedSceneGraph$1],me=fe.get(ue);if(he.materials!=null&&me!=null&&me.materials!=null){const ge=he.materials[me.materials];ge.occlusionTexture&&ge.occlusionTexture.texCoord===0&&le.attributes.uv!=null&&le.setAttribute("uv2",le.attributes.uv)}}}}),ne}get correlatedSceneGraph(){return this[$preparedGLTF][$correlatedSceneGraph$1]}[$clone](){const ee=super[$clone](),ne=new Map;return ee.scene.traverse(ie=>{if(ie.isMesh){const oe=ie,ae=oe.material;if(ae!=null){if(ne.has(ae.uuid)){oe.material=ne.get(ae.uuid);return}oe.material=ae.clone(),ne.set(ae.uuid,oe.material)}}}),ee[$correlatedSceneGraph$1]=CorrelatedSceneGraph.from(ee,this.correlatedSceneGraph),ee}}const scriptRel="modulepreload",assetsURL=function(re){return"/teia-ui/previews/pr-437/"+re},seen={},__vitePreload=function(ee,ne,ie){if(!ne||ne.length===0)return ee();const oe=document.getElementsByTagName("link");return Promise.all(ne.map(ae=>{if(ae=assetsURL(ae),ae in seen)return;seen[ae]=!0;const ce=ae.endsWith(".css"),le=ce?'[rel="stylesheet"]':"";if(!!ie)for(let fe=oe.length-1;fe>=0;fe--){const me=oe[fe];if(me.href===ae&&(!ce||me.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${ae}"]${le}`))return;const he=document.createElement("link");if(he.rel=ce?"stylesheet":scriptRel,ce||(he.as="script",he.crossOrigin=""),he.href=ae,document.head.appendChild(he),ce)return new Promise((fe,me)=>{he.addEventListener("load",fe),he.addEventListener("error",()=>me(new Error(`Unable to preload CSS for ${ae}`)))})})).then(()=>ee()).catch(ae=>{const ce=new Event("vite:preloadError",{cancelable:!0});if(ce.payload=ae,window.dispatchEvent(ce),!ce.defaultPrevented)throw ae})};class RGBELoader extends DataTextureLoader{constructor(ee){super(ee),this.type=HalfFloatType}parse(ee){const le=function(Te,Ne){switch(Te){case 1:console.error("THREE.RGBELoader Read Error: "+(Ne||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(Ne||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(Ne||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(Ne||""))}return-1},me=`
`,ge=function(Te,Ne,Ie){Ne=Ne||1024;let De=Te.pos,Oe=-1,Be=0,Me="",Le=String.fromCharCode.apply(null,new Uint16Array(Te.subarray(De,De+128)));for(;0>(Oe=Le.indexOf(me))&&Be<Ne&&De<Te.byteLength;)Me+=Le,Be+=Le.length,De+=128,Le+=String.fromCharCode.apply(null,new Uint16Array(Te.subarray(De,De+128)));return-1<Oe?(Ie!==!1&&(Te.pos+=Be+Oe+1),Me+Le.slice(0,Oe)):!1},ve=function(Te){const Ne=/^#\?(\S+)/,Ie=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,ke=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,De=/^\s*FORMAT=(\S+)\s*$/,Oe=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,Be={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Me,Le;if(Te.pos>=Te.byteLength||!(Me=ge(Te)))return le(1,"no header found");if(!(Le=Me.match(Ne)))return le(3,"bad initial token");for(Be.valid|=1,Be.programtype=Le[1],Be.string+=Me+`
`;Me=ge(Te),Me!==!1;){if(Be.string+=Me+`
`,Me.charAt(0)==="#"){Be.comments+=Me+`
`;continue}if((Le=Me.match(Ie))&&(Be.gamma=parseFloat(Le[1])),(Le=Me.match(ke))&&(Be.exposure=parseFloat(Le[1])),(Le=Me.match(De))&&(Be.valid|=2,Be.format=Le[1]),(Le=Me.match(Oe))&&(Be.valid|=4,Be.height=parseInt(Le[1],10),Be.width=parseInt(Le[2],10)),Be.valid&2&&Be.valid&4)break}return Be.valid&2?Be.valid&4?Be:le(3,"missing image size specifier"):le(3,"missing format specifier")},ye=function(Te,Ne,Ie){const ke=Ne;if(ke<8||ke>32767||Te[0]!==2||Te[1]!==2||Te[2]&128)return new Uint8Array(Te);if(ke!==(Te[2]<<8|Te[3]))return le(3,"wrong scanline width");const De=new Uint8Array(4*Ne*Ie);if(!De.length)return le(4,"unable to allocate buffer space");let Oe=0,Be=0;const Me=4*ke,Le=new Uint8Array(4),je=new Uint8Array(Me);let ze=Ie;for(;ze>0&&Be<Te.byteLength;){if(Be+4>Te.byteLength)return le(1);if(Le[0]=Te[Be++],Le[1]=Te[Be++],Le[2]=Te[Be++],Le[3]=Te[Be++],Le[0]!=2||Le[1]!=2||(Le[2]<<8|Le[3])!=ke)return le(3,"bad rgbe scanline format");let Ve=0,He;for(;Ve<Me&&Be<Te.byteLength;){He=Te[Be++];const Ye=He>128;if(Ye&&(He-=128),He===0||Ve+He>Me)return le(3,"bad scanline data");if(Ye){const Ue=Te[Be++];for(let Ke=0;Ke<He;Ke++)je[Ve++]=Ue}else je.set(Te.subarray(Be,Be+He),Ve),Ve+=He,Be+=He}const We=ke;for(let Ye=0;Ye<We;Ye++){let Ue=0;De[Oe]=je[Ye+Ue],Ue+=ke,De[Oe+1]=je[Ye+Ue],Ue+=ke,De[Oe+2]=je[Ye+Ue],Ue+=ke,De[Oe+3]=je[Ye+Ue],Oe+=4}ze--}return De},be=function(Te,Ne,Ie,ke){const De=Te[Ne+3],Oe=Math.pow(2,De-128)/255;Ie[ke+0]=Te[Ne+0]*Oe,Ie[ke+1]=Te[Ne+1]*Oe,Ie[ke+2]=Te[Ne+2]*Oe,Ie[ke+3]=1},Ce=function(Te,Ne,Ie,ke){const De=Te[Ne+3],Oe=Math.pow(2,De-128)/255;Ie[ke+0]=DataUtils.toHalfFloat(Math.min(Te[Ne+0]*Oe,65504)),Ie[ke+1]=DataUtils.toHalfFloat(Math.min(Te[Ne+1]*Oe,65504)),Ie[ke+2]=DataUtils.toHalfFloat(Math.min(Te[Ne+2]*Oe,65504)),Ie[ke+3]=DataUtils.toHalfFloat(1)},Se=new Uint8Array(ee);Se.pos=0;const $e=ve(Se);if($e!==-1){const Te=$e.width,Ne=$e.height,Ie=ye(Se.subarray(Se.pos),Te,Ne);if(Ie!==-1){let ke,De,Oe;switch(this.type){case FloatType:Oe=Ie.length/4;const Be=new Float32Array(Oe*4);for(let Le=0;Le<Oe;Le++)be(Ie,Le*4,Be,Le*4);ke=Be,De=FloatType;break;case HalfFloatType:Oe=Ie.length/4;const Me=new Uint16Array(Oe*4);for(let Le=0;Le<Oe;Le++)Ce(Ie,Le*4,Me,Le*4);ke=Me,De=HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:Te,height:Ne,data:ke,header:$e.string,gamma:$e.gamma,exposure:$e.exposure,type:De}}}return null}setDataType(ee){return this.type=ee,this}load(ee,ne,ie,oe){function ae(ce,le){switch(ce.type){case FloatType:case HalfFloatType:ce.encoding=LinearEncoding,ce.minFilter=LinearFilter,ce.magFilter=LinearFilter,ce.generateMipmaps=!1,ce.flipY=!0;break}ne&&ne(ce,le)}return super.load(ee,ae,ie,oe)}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EnvironmentScene extends Scene{constructor(){super(),this.position.y=-3.5;const ee=new BoxGeometry;ee.deleteAttribute("uv");const ne=new MeshStandardMaterial({metalness:0,side:BackSide}),ie=new MeshStandardMaterial({metalness:0}),oe=new PointLight(16777215,500,28,2);oe.position.set(.418,16.199,.3),this.add(oe);const ae=new Mesh(ee,ne);ae.position.set(-.757,13.219,.717),ae.scale.set(31.713,28.305,28.591),this.add(ae);const ce=new Mesh(ee,ie);ce.position.set(-10.906,2.009,1.846),ce.rotation.set(0,-.195,0),ce.scale.set(2.328,7.905,4.651),this.add(ce);const le=new Mesh(ee,ie);le.position.set(-5.607,-.754,-.758),le.rotation.set(0,.994,0),le.scale.set(1.97,1.534,3.955),this.add(le);const ue=new Mesh(ee,ie);ue.position.set(6.167,.857,7.803),ue.rotation.set(0,.561,0),ue.scale.set(3.927,6.285,3.687),this.add(ue);const he=new Mesh(ee,ie);he.position.set(-2.017,.018,6.124),he.rotation.set(0,.333,0),he.scale.set(2.002,4.566,2.064),this.add(he);const fe=new Mesh(ee,ie);fe.position.set(2.291,-.756,-2.621),fe.rotation.set(0,-.286,0),fe.scale.set(1.546,1.552,1.496),this.add(fe);const me=new Mesh(ee,ie);me.position.set(-2.193,-.369,-5.547),me.rotation.set(0,.516,0),me.scale.set(3.875,3.487,2.986),this.add(me);const ge=new Mesh(ee,this.createAreaLightMaterial(50));ge.position.set(-16.116,14.37,8.208),ge.scale.set(.1,2.428,2.739),this.add(ge);const ve=new Mesh(ee,this.createAreaLightMaterial(50));ve.position.set(-16.109,18.021,-8.207),ve.scale.set(.1,2.425,2.751),this.add(ve);const ye=new Mesh(ee,this.createAreaLightMaterial(17));ye.position.set(14.904,12.198,-1.832),ye.scale.set(.15,4.265,6.331),this.add(ye);const be=new Mesh(ee,this.createAreaLightMaterial(43));be.position.set(-.462,8.89,14.52),be.scale.set(4.38,5.441,.088),this.add(be);const Ce=new Mesh(ee,this.createAreaLightMaterial(20));Ce.position.set(3.235,11.486,-12.541),Ce.scale.set(2.5,2,.1),this.add(Ce);const Se=new Mesh(ee,this.createAreaLightMaterial(100));Se.position.set(0,20,0),Se.scale.set(1,.1,1),this.add(Se)}createAreaLightMaterial(ee){const ne=new MeshBasicMaterial;return ne.color.setScalar(ee),ne}}/* @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EnvironmentSceneAlt extends Scene{constructor(){super(),this.position.y=-3.5;const ee=new BoxGeometry;ee.deleteAttribute("uv");const ne=new MeshStandardMaterial({metalness:0,side:BackSide}),ie=new MeshStandardMaterial({metalness:0}),oe=new PointLight(16777215,400,28,2);oe.position.set(.5,14,.5),this.add(oe);const ae=new Mesh(ee,ne);ae.position.set(0,13.2,0),ae.scale.set(31.5,28.5,31.5),this.add(ae);const ce=new Mesh(ee,ie);ce.position.set(-10.906,-1,1.846),ce.rotation.set(0,-.195,0),ce.scale.set(2.328,7.905,4.651),this.add(ce);const le=new Mesh(ee,ie);le.position.set(-5.607,-.754,-.758),le.rotation.set(0,.994,0),le.scale.set(1.97,1.534,3.955),this.add(le);const ue=new Mesh(ee,ie);ue.position.set(6.167,-.16,7.803),ue.rotation.set(0,.561,0),ue.scale.set(3.927,6.285,3.687),this.add(ue);const he=new Mesh(ee,ie);he.position.set(-2.017,.018,6.124),he.rotation.set(0,.333,0),he.scale.set(2.002,4.566,2.064),this.add(he);const fe=new Mesh(ee,ie);fe.position.set(2.291,-.756,-2.621),fe.rotation.set(0,-.286,0),fe.scale.set(1.546,1.552,1.496),this.add(fe);const me=new Mesh(ee,ie);me.position.set(-2.193,-.369,-5.547),me.rotation.set(0,.516,0),me.scale.set(3.875,3.487,2.986),this.add(me);const ge=new Mesh(ee,this.createAreaLightMaterial(80));ge.position.set(-14,10,8),ge.scale.set(.1,2.5,2.5),this.add(ge);const ve=new Mesh(ee,this.createAreaLightMaterial(80));ve.position.set(-14,14,-4),ve.scale.set(.1,2.5,2.5),this.add(ve);const ye=new Mesh(ee,this.createAreaLightMaterial(23));ye.position.set(14,12,0),ye.scale.set(.1,5,5),this.add(ye);const be=new Mesh(ee,this.createAreaLightMaterial(16));be.position.set(0,9,14),be.scale.set(5,5,.1),this.add(be);const Ce=new Mesh(ee,this.createAreaLightMaterial(80));Ce.position.set(7,8,-14),Ce.scale.set(2.5,2.5,.1),this.add(Ce);const Se=new Mesh(ee,this.createAreaLightMaterial(80));Se.position.set(-7,16,-14),Se.scale.set(2.5,2.5,.1),this.add(Se);const $e=new Mesh(ee,this.createAreaLightMaterial(1));$e.position.set(0,20,0),$e.scale.set(.1,.1,.1),this.add($e)}createAreaLightMaterial(ee){const ne=new MeshBasicMaterial;return ne.color.setScalar(ee),ne}}const GENERATED_SIGMA=.04,MAX_SAMPLES=20,HDR_FILE_RE=/\.hdr(\.js)?$/;class TextureUtils extends EventDispatcher{constructor(ee){super(),this.threeRenderer=ee,this.lottieLoaderUrl="",this.withCredentials=!1,this._ldrLoader=null,this._hdrLoader=null,this._lottieLoader=null,this.generatedEnvironmentMap=null,this.generatedEnvironmentMapAlt=null,this.skyboxCache=new Map,this.blurMaterial=null,this.blurScene=null}get ldrLoader(){return this._ldrLoader==null&&(this._ldrLoader=new TextureLoader),this._ldrLoader.setWithCredentials(this.withCredentials),this._ldrLoader}get hdrLoader(){return this._hdrLoader==null&&(this._hdrLoader=new RGBELoader,this._hdrLoader.setDataType(HalfFloatType)),this._hdrLoader.setWithCredentials(this.withCredentials),this._hdrLoader}async getLottieLoader(){if(this._lottieLoader==null){const{LottieLoader:ee}=await __vitePreload(()=>import(this.lottieLoaderUrl),[]);this._lottieLoader=new ee}return this._lottieLoader.setWithCredentials(this.withCredentials),this._lottieLoader}async loadImage(ee){const ne=await new Promise((ie,oe)=>this.ldrLoader.load(ee,ie,()=>{},oe));return ne.name=ee,ne.flipY=!1,ne}async loadLottie(ee,ne){const ie=await this.getLottieLoader();ie.setQuality(ne);const oe=await new Promise((ae,ce)=>ie.load(ee,ae,()=>{},ce));return oe.name=ee,oe}async loadEquirect(ee,ne=()=>{}){try{const ie=HDR_FILE_RE.test(ee),oe=ie?this.hdrLoader:this.ldrLoader,ae=await new Promise((ce,le)=>oe.load(ee,ce,ue=>{ne(ue.loaded/ue.total*.9)},le));return ne(1),ae.name=ee,ae.mapping=EquirectangularReflectionMapping,ie||(ae.encoding=sRGBEncoding),ae}finally{ne&&ne(1)}}async generateEnvironmentMapAndSkybox(ee=null,ne=null,ie=()=>{}){const oe=ne!=="legacy";(ne==="legacy"||ne==="neutral")&&(ne=null),ne=deserializeUrl(ne);let ae=Promise.resolve(null),ce;ee&&(ae=this.loadEquirectFromUrl(ee,ie)),ne?ce=this.loadEquirectFromUrl(ne,ie):ee?ce=this.loadEquirectFromUrl(ee,ie):ce=oe?this.loadGeneratedEnvironmentMapAlt():this.loadGeneratedEnvironmentMap();const[le,ue]=await Promise.all([ce,ae]);if(le==null)throw new Error("Failed to load environment map.");return{environmentMap:le,skybox:ue}}async loadEquirectFromUrl(ee,ne){if(!this.skyboxCache.has(ee)){const ie=this.loadEquirect(ee,ne);this.skyboxCache.set(ee,ie)}return this.skyboxCache.get(ee)}async GenerateEnvironmentMap(ee,ne){await timePasses();const ie=this.threeRenderer,oe=new WebGLCubeRenderTarget(256,{generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,encoding:LinearEncoding,depthBuffer:!0}),ae=new CubeCamera(.1,100,oe),ce=ae.renderTarget.texture;ce.name=ne;const le=ie.outputEncoding,ue=ie.toneMapping;return ie.toneMapping=NoToneMapping,ie.outputEncoding=LinearEncoding,ae.update(ie,ee),this.blurCubemap(oe,GENERATED_SIGMA),ie.toneMapping=ue,ie.outputEncoding=le,ce}async loadGeneratedEnvironmentMap(){return this.generatedEnvironmentMap==null&&(this.generatedEnvironmentMap=this.GenerateEnvironmentMap(new EnvironmentScene,"legacy")),this.generatedEnvironmentMap}async loadGeneratedEnvironmentMapAlt(){return this.generatedEnvironmentMapAlt==null&&(this.generatedEnvironmentMapAlt=this.GenerateEnvironmentMap(new EnvironmentSceneAlt,"neutral")),this.generatedEnvironmentMapAlt}blurCubemap(ee,ne){if(this.blurMaterial==null){this.blurMaterial=this.getBlurShader(MAX_SAMPLES);const oe=new BoxGeometry,ae=new Mesh(oe,this.blurMaterial);this.blurScene=new Scene,this.blurScene.add(ae)}const ie=ee.clone();this.halfblur(ee,ie,ne,"latitudinal"),this.halfblur(ie,ee,ne,"longitudinal")}halfblur(ee,ne,ie,oe){const ce=ee.width,le=isFinite(ie)?Math.PI/(2*ce):2*Math.PI/(2*MAX_SAMPLES-1),ue=ie/le,he=isFinite(ie)?1+Math.floor(3*ue):MAX_SAMPLES;he>MAX_SAMPLES&&console.warn(`sigmaRadians, ${ie}, is too large and will clip, as it requested ${he} samples when the maximum is set to ${MAX_SAMPLES}`);const fe=[];let me=0;for(let ye=0;ye<MAX_SAMPLES;++ye){const be=ye/ue,Ce=Math.exp(-be*be/2);fe.push(Ce),ye==0?me+=Ce:ye<he&&(me+=2*Ce)}for(let ye=0;ye<fe.length;ye++)fe[ye]=fe[ye]/me;const ge=this.blurMaterial.uniforms;ge.envMap.value=ee.texture,ge.samples.value=he,ge.weights.value=fe,ge.latitudinal.value=oe==="latitudinal",ge.dTheta.value=le,new CubeCamera(.1,100,ne).update(this.threeRenderer,this.blurScene)}getBlurShader(ee){const ne=new Float32Array(ee),ie=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:ee},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:ne},latitudinal:{value:!1},dTheta:{value:0},poleAxis:{value:ie}},vertexShader:`
      
      varying vec3 vOutputDirection;
  
      void main() {
  
        vOutputDirection = vec3( position );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
  
      }
    `,fragmentShader:`
        varying vec3 vOutputDirection;
  
        uniform samplerCube envMap;
        uniform int samples;
        uniform float weights[ n ];
        uniform bool latitudinal;
        uniform float dTheta;
        uniform vec3 poleAxis;
  
        vec3 getSample( float theta, vec3 axis ) {
  
          float cosTheta = cos( theta );
          // Rodrigues' axis-angle rotation
          vec3 sampleDirection = vOutputDirection * cosTheta
            + cross( axis, vOutputDirection ) * sin( theta )
            + axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );
  
          return vec3( textureCube( envMap, sampleDirection ) );
  
        }
  
        void main() {
  
          vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );
  
          if ( all( equal( axis, vec3( 0.0 ) ) ) ) {
  
            axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );
  
          }
  
          axis = normalize( axis );
  
          gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
          gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );
  
          for ( int i = 1; i < n; i++ ) {
  
            if ( i >= samples ) {
  
              break;
  
            }
  
            float theta = dTheta * float( i );
            gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
            gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );
  
          }
        }
      `,blending:NoBlending,depthTest:!1,depthWrite:!1,side:BackSide})}async dispose(){for(const[,ee]of this.skyboxCache)(await ee).dispose();this.generatedEnvironmentMap!=null&&((await this.generatedEnvironmentMap).dispose(),this.generatedEnvironmentMap=null),this.generatedEnvironmentMapAlt!=null&&((await this.generatedEnvironmentMapAlt).dispose(),this.generatedEnvironmentMapAlt=null),this.blurMaterial!=null&&this.blurMaterial.dispose()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DURATION_DECAY=.2,LOW_FRAME_DURATION_MS=40,HIGH_FRAME_DURATION_MS=60,MAX_AVG_CHANGE_MS=5,SCALE_STEPS=[1,.79,.62,.5,.4,.31,.25],DEFAULT_LAST_STEP=3,DEFAULT_POWER_PREFERENCE="high-performance";class Renderer extends EventDispatcher{constructor(ee){super(),this.loader=new CachingGLTFLoader(ModelViewerGLTFInstance),this.width=0,this.height=0,this.dpr=1,this.debugger=null,this.scenes=new Set,this.multipleScenesVisible=!1,this.lastTick=performance.now(),this.renderedLastFrame=!1,this.scaleStep=0,this.lastStep=DEFAULT_LAST_STEP,this.avgFrameDuration=(HIGH_FRAME_DURATION_MS+LOW_FRAME_DURATION_MS)/2,this.onWebGLContextLost=ne=>{this.dispatchEvent({type:"contextlost",sourceEvent:ne})},this.onWebGLContextRestored=()=>{var ne;(ne=this.textureUtils)===null||ne===void 0||ne.dispose(),this.textureUtils=new TextureUtils(this.threeRenderer);for(const ie of this.scenes)ie.element[$updateEnvironment]()},this.dpr=resolveDpr(),this.canvas3D=document.createElement("canvas"),this.canvas3D.id="webgl-canvas",this.canvas3D.classList.add("show");try{this.threeRenderer=new WebGLRenderer({canvas:this.canvas3D,alpha:!0,antialias:!0,powerPreference:ee.powerPreference,preserveDrawingBuffer:!0}),this.threeRenderer.autoClear=!0,this.threeRenderer.outputEncoding=sRGBEncoding,this.threeRenderer.physicallyCorrectLights=!0,this.threeRenderer.setPixelRatio(1),this.debugger=ee.debug?new Debugger(this):null,this.threeRenderer.debug={checkShaderErrors:!!this.debugger},this.threeRenderer.toneMapping=ACESFilmicToneMapping}catch(ne){console.warn(ne)}this.arRenderer=new ARRenderer(this),this.textureUtils=this.canRender?new TextureUtils(this.threeRenderer):null,CachingGLTFLoader.initializeKTX2Loader(this.threeRenderer),this.canvas3D.addEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.addEventListener("webglcontextrestored",this.onWebGLContextRestored),this.updateRendererSize()}static get singleton(){return this._singleton}static resetSingleton(){const ee=this._singleton.dispose();for(const ne of ee)ne.disconnectedCallback();this._singleton=new Renderer({powerPreference:(self.ModelViewerElement||{}).powerPreference||DEFAULT_POWER_PREFERENCE,debug:isDebugMode()});for(const ne of ee)ne.connectedCallback()}get canRender(){return this.threeRenderer!=null}get scaleFactor(){return SCALE_STEPS[this.scaleStep]}set minScale(ee){let ne=1;for(;ne<SCALE_STEPS.length&&!(SCALE_STEPS[ne]<ee);)++ne;this.lastStep=ne-1}registerScene(ee){this.scenes.add(ee),ee.forceRescale();const ne=new Vector2;this.threeRenderer.getSize(ne),ee.canvas.width=ne.x,ee.canvas.height=ne.y,this.canRender&&this.scenes.size>0&&this.threeRenderer.setAnimationLoop((ie,oe)=>this.render(ie,oe)),this.debugger!=null&&this.debugger.addScene(ee)}unregisterScene(ee){this.scenes.delete(ee),this.canvas3D.parentElement===ee.canvas.parentElement&&ee.canvas.parentElement.removeChild(this.canvas3D),this.canRender&&this.scenes.size===0&&this.threeRenderer.setAnimationLoop(null),this.debugger!=null&&this.debugger.removeScene(ee)}displayCanvas(ee){return this.multipleScenesVisible?ee.element[$canvas]:this.canvas3D}countVisibleScenes(){const{canvas3D:ee}=this;let ne=0,ie=null;for(const ae of this.scenes){const{element:ce}=ae;ce.modelIsVisible&&ae.externalRenderer==null&&++ne,ee.parentElement===ae.canvas.parentElement&&(ie=ae)}const oe=ne>1;if(ie!=null){const ae=oe&&!this.multipleScenesVisible,ce=!ie.element.modelIsVisible;if(ae||ce){const{width:le,height:ue}=this.sceneSize(ie);this.copyPixels(ie,le,ue),ee.parentElement.removeChild(ee)}}this.multipleScenesVisible=oe}updateRendererSize(){const ee=resolveDpr();if(ee!==this.dpr)for(const oe of this.scenes){const{element:ae}=oe;ae[$updateSize](ae.getBoundingClientRect())}let ne=0,ie=0;for(const oe of this.scenes)ne=Math.max(ne,oe.width),ie=Math.max(ie,oe.height);if(!(ne===this.width&&ie===this.height&&ee===this.dpr)){this.width=ne,this.height=ie,this.dpr=ee,ne=Math.ceil(ne*ee),ie=Math.ceil(ie*ee),this.canRender&&this.threeRenderer.setSize(ne,ie,!1);for(const oe of this.scenes){const{canvas:ae}=oe;ae.width=ne,ae.height=ie,oe.forceRescale()}}}updateRendererScale(ee){const ne=this.scaleStep;this.avgFrameDuration+=clamp$2(DURATION_DECAY*(ee-this.avgFrameDuration),-MAX_AVG_CHANGE_MS,MAX_AVG_CHANGE_MS),this.avgFrameDuration>HIGH_FRAME_DURATION_MS?++this.scaleStep:this.avgFrameDuration<LOW_FRAME_DURATION_MS&&this.scaleStep>0&&--this.scaleStep,this.scaleStep=Math.min(this.scaleStep,this.lastStep),ne!==this.scaleStep&&(this.avgFrameDuration=(HIGH_FRAME_DURATION_MS+LOW_FRAME_DURATION_MS)/2)}shouldRender(ee){if(ee.shouldRender())ee.scaleStep!=this.scaleStep&&(ee.scaleStep=this.scaleStep,this.rescaleCanvas(ee));else if(ee.scaleStep!=0)ee.scaleStep=0,this.rescaleCanvas(ee);else return!1;return!0}rescaleCanvas(ee){const ne=SCALE_STEPS[ee.scaleStep],ie=Math.ceil(this.width/ne),oe=Math.ceil(this.height/ne),{style:ae}=ee.canvas;ae.width=`${ie}px`,ae.height=`${oe}px`,this.canvas3D.style.width=`${ie}px`,this.canvas3D.style.height=`${oe}px`;const ce=this.dpr*ne,le=ne<1?"GPU throttling":this.dpr!==window.devicePixelRatio?"No meta viewport tag":"";ee.element.dispatchEvent(new CustomEvent("render-scale",{detail:{reportedDpr:window.devicePixelRatio,renderedDpr:ce,minimumDpr:this.dpr*SCALE_STEPS[this.lastStep],pixelWidth:Math.ceil(ee.width*ce),pixelHeight:Math.ceil(ee.height*ce),reason:le}}))}sceneSize(ee){const{dpr:ne}=this,ie=SCALE_STEPS[ee.scaleStep],oe=Math.min(Math.ceil(ee.width*ie*ne),this.canvas3D.width),ae=Math.min(Math.ceil(ee.height*ie*ne),this.canvas3D.height);return{width:oe,height:ae}}copyPixels(ee,ne,ie){const oe=ee.context;if(oe==null){console.log("could not acquire 2d context");return}oe.clearRect(0,0,ne,ie),oe.drawImage(this.canvas3D,0,0,ne,ie,0,0,ne,ie),ee.canvas.classList.add("show")}orderedScenes(){const ee=[];for(const ne of[!1,!0])for(const ie of this.scenes)ie.element.modelIsVisible===ne&&ee.push(ie);return ee}get isPresenting(){return this.arRenderer.isPresenting}preRender(ee,ne,ie){const{element:oe,exposure:ae}=ee;oe[$tick](ne,ie);const ce=typeof ae=="number"&&!Number.isNaN(ae);this.threeRenderer.toneMappingExposure=ce?ae:1}render(ee,ne){if(ne!=null){this.arRenderer.onWebXRFrame(ee,ne);return}const ie=ee-this.lastTick;if(this.lastTick=ee,!this.canRender||this.isPresenting)return;this.countVisibleScenes(),this.updateRendererSize(),this.renderedLastFrame&&(this.updateRendererScale(ie),this.renderedLastFrame=!1);const{canvas3D:oe}=this;for(const ae of this.orderedScenes()){const{element:ce}=ae;if(!ce.loaded||!ce.modelIsVisible&&ae.renderCount>0||(this.preRender(ae,ee,ie),!this.shouldRender(ae)))continue;if(ae.externalRenderer!=null){const he=ae.getCamera();he.updateMatrix();const{matrix:fe,projectionMatrix:me}=he,ge=fe.elements.slice(),ve=ae.getTarget();ge[12]+=ve.x,ge[13]+=ve.y,ge[14]+=ve.z,ae.externalRenderer.render({viewMatrix:ge,projectionMatrix:me.elements});continue}if(!ce.modelIsVisible&&!this.multipleScenesVisible)for(const he of this.scenes)he.element.modelIsVisible&&he.queueRender();const{width:le,height:ue}=this.sceneSize(ae);ae.renderShadow(this.threeRenderer),this.threeRenderer.setRenderTarget(null),this.threeRenderer.setViewport(0,Math.ceil(this.height*this.dpr)-ue,le,ue),this.threeRenderer.render(ae,ae.camera),this.multipleScenesVisible||!ae.element.modelIsVisible&&ae.renderCount===0?this.copyPixels(ae,le,ue):oe.parentElement!==ae.canvas.parentElement&&(ae.canvas.parentElement.appendChild(oe),ae.canvas.classList.remove("show")),ae.hasRendered(),++ae.renderCount,this.renderedLastFrame=!0}}dispose(){this.textureUtils!=null&&this.textureUtils.dispose(),this.threeRenderer!=null&&this.threeRenderer.dispose(),this.textureUtils=null,this.threeRenderer=null;const ee=[];for(const ne of this.scenes)ee.push(ne.element);return this.canvas3D.removeEventListener("webglcontextlost",this.onWebGLContextLost),this.canvas3D.removeEventListener("webglcontextrestored",this.onWebGLContextRestored),ee}}Renderer._singleton=new Renderer({powerPreference:(self.ModelViewerElement||{}).powerPreference||DEFAULT_POWER_PREFERENCE,debug:isDebugMode()});/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $correlatedObjects=Symbol("correlatedObjects"),$sourceObject=Symbol("sourceObject"),$onUpdate$1=Symbol("onUpdate");class ThreeDOMElement{constructor(ee,ne,ie=null){this[$onUpdate$1]=ee,this[$sourceObject]=ne,this[$correlatedObjects]=ie}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const quadMaterial=new MeshBasicMaterial,quad=new PlaneGeometry(2,2);let adhocNum=0;const $threeTexture=Symbol("threeTexture");let Image$1=class extends ThreeDOMElement{get[$threeTexture](){var ee;return console.assert(this[$correlatedObjects]!=null&&this[$correlatedObjects].size>0,"Image correlated object is undefined"),(ee=this[$correlatedObjects])===null||ee===void 0?void 0:ee.values().next().value}constructor(ee,ne,ie){ie=ie??{name:ne&&ne.image&&ne.image.src?ne.image.src.split("/").pop():"adhoc_image",uri:ne&&ne.image&&ne.image.src?ne.image.src:"adhoc_image"+adhocNum++},super(ee,ie,new Set(ne?[ne]:[]))}get name(){return this[$sourceObject].name||""}get uri(){return this[$sourceObject].uri}get bufferView(){return this[$sourceObject].bufferView}get element(){const ee=this[$threeTexture];if(ee&&(ee.isCanvasTexture||ee.isVideoTexture))return ee.image}get animation(){const ee=this[$threeTexture];if(ee&&ee.isCanvasTexture&&ee.animation)return ee.animation}get type(){return this.uri!=null?"external":"embedded"}set name(ee){this[$sourceObject].name=ee}update(){const ee=this[$threeTexture];ee&&ee.isCanvasTexture&&!ee.animation&&(this[$threeTexture].needsUpdate=!0,this[$onUpdate$1]())}async createThumbnail(ee,ne){const ie=new Scene;quadMaterial.map=this[$threeTexture];const oe=new Mesh(quad,quadMaterial);ie.add(oe);const ae=new OrthographicCamera(-1,1,1,-1,0,1),{threeRenderer:ce}=Renderer.singleton,le=new WebGLRenderTarget(ee,ne);ce.setRenderTarget(le),ce.render(ie,ae),ce.setRenderTarget(null);const ue=new Uint8Array(ee*ne*4);ce.readRenderTargetPixels(le,0,0,ee,ne,ue),blobCanvas.width=ee,blobCanvas.height=ne;const he=blobCanvas.getContext("2d"),fe=he.createImageData(ee,ne);return fe.data.set(ue),he.putImageData(fe,0,0),new Promise(async(me,ge)=>{blobCanvas.toBlob(ve=>{if(!ve)return ge("Failed to capture thumbnail.");me(URL.createObjectURL(ve))},"image/png")})}};var Filter$1;(function(re){re[re.Nearest=9728]="Nearest",re[re.Linear=9729]="Linear",re[re.NearestMipmapNearest=9984]="NearestMipmapNearest",re[re.LinearMipmapNearest=9985]="LinearMipmapNearest",re[re.NearestMipmapLinear=9986]="NearestMipmapLinear",re[re.LinearMipmapLinear=9987]="LinearMipmapLinear"})(Filter$1||(Filter$1={}));var Wrap;(function(re){re[re.ClampToEdge=33071]="ClampToEdge",re[re.MirroredRepeat=33648]="MirroredRepeat",re[re.Repeat=10497]="Repeat"})(Wrap||(Wrap={}));/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const isMinFilter=(()=>{const re=[Filter$1.Nearest,Filter$1.Linear,Filter$1.NearestMipmapNearest,Filter$1.LinearMipmapLinear,Filter$1.NearestMipmapLinear,Filter$1.LinearMipmapLinear];return ee=>re.indexOf(ee)>-1})(),isMagFilter=(()=>{const re=[Filter$1.Nearest,Filter$1.Linear];return ee=>re.indexOf(ee)>-1})(),isWrapMode=(()=>{const re=[Wrap.ClampToEdge,Wrap.MirroredRepeat,Wrap.Repeat];return ee=>re.indexOf(ee)>-1})(),isValidSamplerValue=(re,ee)=>{switch(re){case"minFilter":return isMinFilter(ee);case"magFilter":return isMagFilter(ee);case"wrapS":case"wrapT":return isWrapMode(ee);default:throw new Error(`Cannot configure property "${re}" on Sampler`)}},$threeTextures=Symbol("threeTextures"),$setProperty=Symbol("setProperty"),$sourceSampler=Symbol("sourceSampler");let Sampler$1=class extends ThreeDOMElement{get[$threeTextures](){return console.assert(this[$correlatedObjects]!=null&&this[$correlatedObjects].size>0,"Sampler correlated object is undefined"),this[$correlatedObjects]}get[$sourceSampler](){return console.assert(this[$sourceObject]!=null,"Sampler source is undefined"),this[$sourceObject]}constructor(ee,ne,ie){ie=ie??{},ie.minFilter==null&&(ie.minFilter=ne?ne.minFilter:Filter$1.LinearMipmapLinear),ie.magFilter==null&&(ie.magFilter=ne?ne.magFilter:Filter$1.Linear),ie.wrapS==null&&(ie.wrapS=ne?ne.wrapS:Wrap.Repeat),ie.wrapT==null&&(ie.wrapT=ne?ne.wrapT:Wrap.Repeat),super(ee,ie,new Set(ne?[ne]:[]))}get name(){return this[$sourceObject].name||""}get minFilter(){return this[$sourceSampler].minFilter}get magFilter(){return this[$sourceSampler].magFilter}get wrapS(){return this[$sourceSampler].wrapS}get wrapT(){return this[$sourceSampler].wrapT}setMinFilter(ee){this[$setProperty]("minFilter",ee)}setMagFilter(ee){this[$setProperty]("magFilter",ee)}setWrapS(ee){this[$setProperty]("wrapS",ee)}setWrapT(ee){this[$setProperty]("wrapT",ee)}[$setProperty](ee,ne){const ie=this[$sourceSampler];if(ie!=null){if(isValidSamplerValue(ee,ne)){ie[ee]=ne;for(const oe of this[$threeTextures])oe[ee]=ne,oe.needsUpdate=!0}this[$onUpdate$1]()}}};/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $image=Symbol("image"),$sampler=Symbol("sampler");class Texture extends ThreeDOMElement{constructor(ee,ne,ie=null,oe=null,ae=null){super(ee,ie||{},new Set(ne?[ne]:[])),this[$sampler]=new Sampler$1(ee,ne,oe),this[$image]=new Image$1(ee,ne,ae)}get name(){return this[$sourceObject].name||""}set name(ee){this[$sourceObject].name=ee}get sampler(){return this[$sampler]}get source(){return this[$image]}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$5,_b$4,_c$2;const $texture=Symbol("texture"),$transform=Symbol("transform"),$materials$1=Symbol("materials"),$usage=Symbol("usage"),$onUpdate=Symbol("onUpdate"),$activeVideo=Symbol("activeVideo");var TextureUsage$1;(function(re){re[re.Base=0]="Base",re[re.MetallicRoughness=1]="MetallicRoughness",re[re.Normal=2]="Normal",re[re.Occlusion=3]="Occlusion",re[re.Emissive=4]="Emissive"})(TextureUsage$1||(TextureUsage$1={}));class TextureInfo{constructor(ee,ne,ie,oe,ae,ce){if(this[_a$5]=null,this[_b$4]={rotation:0,scale:new Vector2(1,1),offset:new Vector2(0,0)},this[_c$2]=!1,ce&&ie){const le=ae.textures?ae.textures[ce.index]:null,ue=le&&ae.samplers?ae.samplers[le.sampler]:null,he=le&&ae.images?ae.images[le.source]:null;this[$transform].rotation=ie.rotation,this[$transform].scale.copy(ie.repeat),this[$transform].offset.copy(ie.offset),this[$texture]=new Texture(ee,ie,le,ue,he)}this[$onUpdate]=ee,this[$materials$1]=oe,this[$usage]=ne}get texture(){return this[$texture]}setTexture(ee){var ne,ie;const oe=ee!=null?ee.source[$threeTexture]:null,ae=(ne=this[$texture])===null||ne===void 0?void 0:ne.source[$threeTexture];if(ae!=null&&ae.isVideoTexture?this[$activeVideo]=!1:!((ie=this[$texture])===null||ie===void 0)&&ie.source.animation&&this[$texture].source.animation.removeEventListener("enterFrame",this[$onUpdate]),this[$texture]=ee,oe!=null&&oe.isVideoTexture){const le=oe.image;if(this[$activeVideo]=!0,le.requestVideoFrameCallback!=null){const ue=()=>{this[$activeVideo]&&(this[$onUpdate](),le.requestVideoFrameCallback(ue))};le.requestVideoFrameCallback(ue)}else{const ue=()=>{this[$activeVideo]&&(this[$onUpdate](),requestAnimationFrame(ue))};requestAnimationFrame(ue)}}else(ee==null?void 0:ee.source.animation)!=null&&ee.source.animation.addEventListener("enterFrame",this[$onUpdate]);let ce=sRGBEncoding;if(this[$materials$1])for(const le of this[$materials$1]){switch(this[$usage]){case TextureUsage$1.Base:le.map=oe;break;case TextureUsage$1.MetallicRoughness:ce=LinearEncoding,le.metalnessMap=oe,le.roughnessMap=oe;break;case TextureUsage$1.Normal:ce=LinearEncoding,le.normalMap=oe;break;case TextureUsage$1.Occlusion:ce=LinearEncoding,le.aoMap=oe;break;case TextureUsage$1.Emissive:le.emissiveMap=oe;break}le.needsUpdate=!0}oe&&(oe.encoding=ce,oe.rotation=this[$transform].rotation,oe.repeat=this[$transform].scale,oe.offset=this[$transform].offset),this[$onUpdate]()}}_a$5=$texture,_b$4=$transform,_c$2=$activeVideo;/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $threeMaterials=Symbol("threeMaterials"),$baseColorTexture=Symbol("baseColorTexture"),$metallicRoughnessTexture=Symbol("metallicRoughnessTexture");class PBRMetallicRoughness extends ThreeDOMElement{constructor(ee,ne,ie,oe){super(ee,ie,oe),ie.baseColorFactor==null&&(ie.baseColorFactor=[1,1,1,1]),ie.roughnessFactor==null&&(ie.roughnessFactor=1),ie.metallicFactor==null&&(ie.metallicFactor=1);const{baseColorTexture:ae,metallicRoughnessTexture:ce}=ie,{map:le,metalnessMap:ue}=oe.values().next().value;this[$baseColorTexture]=new TextureInfo(ee,TextureUsage$1.Base,le,oe,ne,ae||null),this[$metallicRoughnessTexture]=new TextureInfo(ee,TextureUsage$1.MetallicRoughness,ue,oe,ne,ce||null)}get[$threeMaterials](){return this[$correlatedObjects]}get baseColorFactor(){return this[$sourceObject].baseColorFactor}get metallicFactor(){return this[$sourceObject].metallicFactor}get roughnessFactor(){return this[$sourceObject].roughnessFactor}get baseColorTexture(){return this[$baseColorTexture]}get metallicRoughnessTexture(){return this[$metallicRoughnessTexture]}setBaseColorFactor(ee){const ne=new Color;ee instanceof Array?ne.fromArray(ee):ne.set(ee).convertSRGBToLinear();for(const oe of this[$threeMaterials])oe.color.set(ne),ee instanceof Array?oe.opacity=ee[3]:(ee=[0,0,0,oe.opacity],ne.toArray(ee));const ie=this[$sourceObject];ie.baseColorFactor=ee,this[$onUpdate$1]()}setMetallicFactor(ee){for(const ie of this[$threeMaterials])ie.metalness=ee;const ne=this[$sourceObject];ne.metallicFactor=ee,this[$onUpdate$1]()}setRoughnessFactor(ee){for(const ie of this[$threeMaterials])ie.roughness=ee;const ne=this[$sourceObject];ne.roughnessFactor=ee,this[$onUpdate$1]()}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$4;const $pbrMetallicRoughness=Symbol("pbrMetallicRoughness"),$normalTexture=Symbol("normalTexture"),$occlusionTexture=Symbol("occlusionTexture"),$emissiveTexture=Symbol("emissiveTexture"),$backingThreeMaterial=Symbol("backingThreeMaterial"),$applyAlphaCutoff=Symbol("applyAlphaCutoff"),$lazyLoadGLTFInfo=Symbol("lazyLoadGLTFInfo"),$initialize=Symbol("initialize"),$getLoadedMaterial=Symbol("getLoadedMaterial"),$ensureMaterialIsLoaded=Symbol("ensureMaterialIsLoaded"),$gltfIndex=Symbol("gltfIndex"),$setActive=Symbol("setActive"),$variantIndices=Symbol("variantIndices"),$isActive=Symbol("isActive"),$variantSet=Symbol("variantSet"),$modelVariants=Symbol("modelVariants");class Material extends ThreeDOMElement{constructor(ee,ne,ie,oe,ae,ce,le,ue=void 0){super(ee,ie,le),this[_a$4]=new Set,this[$gltfIndex]=oe,this[$isActive]=ae,this[$modelVariants]=ce,ue==null?this[$initialize](ne):this[$lazyLoadGLTFInfo]=ue}get[(_a$4=$variantSet,$backingThreeMaterial)](){return this[$correlatedObjects].values().next().value}[$initialize](ee){const ne=this[$onUpdate$1],ie=this[$sourceObject],oe=this[$correlatedObjects];ie.extensions&&ie.extensions.KHR_materials_pbrSpecularGlossiness&&console.warn(`Material ${ie.name} uses a deprecated extension
          "KHR_materials_pbrSpecularGlossiness", please use
          "pbrMetallicRoughness" instead. Specular Glossiness materials are
          no longer supported; to convert to metal-rough, see 
          https://www.donmccurdy.com/2022/11/28/converting-gltf-pbr-materials-from-specgloss-to-metalrough/.`),ie.pbrMetallicRoughness==null&&(ie.pbrMetallicRoughness={}),this[$pbrMetallicRoughness]=new PBRMetallicRoughness(ne,ee,ie.pbrMetallicRoughness,oe),ie.emissiveFactor==null&&(ie.emissiveFactor=[0,0,0]),ie.doubleSided==null&&(ie.doubleSided=!1),ie.alphaMode==null&&(ie.alphaMode="OPAQUE"),ie.alphaCutoff==null&&(ie.alphaCutoff=.5);const{normalTexture:ae,occlusionTexture:ce,emissiveTexture:le}=ie,{normalMap:ue,aoMap:he,emissiveMap:fe}=oe.values().next().value;this[$normalTexture]=new TextureInfo(ne,TextureUsage$1.Normal,ue,oe,ee,ae||null),this[$occlusionTexture]=new TextureInfo(ne,TextureUsage$1.Occlusion,he,oe,ee,ce||null),this[$emissiveTexture]=new TextureInfo(ne,TextureUsage$1.Emissive,fe,oe,ee,le||null)}async[$getLoadedMaterial](){if(this[$lazyLoadGLTFInfo]!=null){const{set:ee,material:ne}=await this[$lazyLoadGLTFInfo].doLazyLoad();return this[$correlatedObjects]=ee,this[$initialize](this[$lazyLoadGLTFInfo].gltf),this[$lazyLoadGLTFInfo]=void 0,this.ensureLoaded=async()=>{},ne}return this[$correlatedObjects].values().next().value}[$ensureMaterialIsLoaded](){if(this[$lazyLoadGLTFInfo]!=null)throw new Error(`Material "${this.name}" has not been loaded, call 'await
    myMaterial.ensureLoaded()' before using an unloaded material.`)}async ensureLoaded(){await this[$getLoadedMaterial]()}get isLoaded(){return this[$lazyLoadGLTFInfo]==null}get isActive(){return this[$isActive]}[$setActive](ee){this[$isActive]=ee}get name(){return this[$sourceObject].name}set name(ee){const ne=this[$sourceObject];if(ne!=null&&(ne.name=ee),this[$correlatedObjects]!=null)for(const ie of this[$correlatedObjects])ie.name=ee}get pbrMetallicRoughness(){return this[$ensureMaterialIsLoaded](),this[$pbrMetallicRoughness]}get normalTexture(){return this[$ensureMaterialIsLoaded](),this[$normalTexture]}get occlusionTexture(){return this[$ensureMaterialIsLoaded](),this[$occlusionTexture]}get emissiveTexture(){return this[$ensureMaterialIsLoaded](),this[$emissiveTexture]}get emissiveFactor(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].emissiveFactor}get index(){return this[$gltfIndex]}[$variantIndices](){return this[$variantSet]}hasVariant(ee){const ne=this[$modelVariants].get(ee);return ne!=null&&this[$variantSet].has(ne.index)}setEmissiveFactor(ee){this[$ensureMaterialIsLoaded]();const ne=new Color;ee instanceof Array?ne.fromArray(ee):ne.set(ee).convertSRGBToLinear();for(const ie of this[$correlatedObjects])ie.emissive.set(ne);this[$sourceObject].emissiveFactor=ne.toArray(),this[$onUpdate$1]()}[$applyAlphaCutoff](){this[$ensureMaterialIsLoaded]();const ee=this[$sourceObject];for(const ne of this[$correlatedObjects])this[$sourceObject].alphaMode==="MASK"?ne.alphaTest=ee.alphaCutoff:ne.alphaTest=void 0,ne.needsUpdate=!0}setAlphaCutoff(ee){this[$ensureMaterialIsLoaded](),this[$sourceObject].alphaCutoff=ee,this[$applyAlphaCutoff](),this[$onUpdate$1]()}getAlphaCutoff(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].alphaCutoff}setDoubleSided(ee){this[$ensureMaterialIsLoaded]();for(const ne of this[$correlatedObjects])ne.side=ee?DoubleSide:FrontSide,ne.needsUpdate=!0;this[$sourceObject].doubleSided=ee,this[$onUpdate$1]()}getDoubleSided(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].doubleSided}setAlphaMode(ee){this[$ensureMaterialIsLoaded]();const ne=(ie,oe)=>{ie.transparent=oe,ie.depthWrite=!oe};this[$sourceObject].alphaMode=ee;for(const ie of this[$correlatedObjects])ne(ie,ee==="BLEND"),this[$applyAlphaCutoff](),ie.needsUpdate=!0;this[$onUpdate$1]()}getAlphaMode(){return this[$ensureMaterialIsLoaded](),this[$sourceObject].alphaMode}}let Node$2=class{constructor(ee){this.name="",this.children=new Array,this.name=ee}};class PrimitiveNode extends Node$2{constructor(ee,ne,ie,oe){super(ee.name),this.materials=new Map,this.variantToMaterialMap=new Map,this.initialMaterialIdx=0,this.activeMaterialIdx=0,this.mesh=ee;const{gltf:ae,threeGLTF:ce,threeObjectMap:le}=oe;this.modelVariants=ie,this.mesh.userData.variantData=ie;const ue=le.get(ee.material);ue.materials!=null?this.initialMaterialIdx=this.activeMaterialIdx=ue.materials:console.error(`Primitive (${ee.name}) missing initial material reference.`);const he=ee.userData.associations||{};if(he.meshes==null){console.error("Mesh is missing primitive index association");return}const ge=((ae.meshes||[])[he.meshes].primitives||[])[he.primitives];if(ge==null){console.error("Mesh primitive definition is missing.");return}if(ge.material!=null)this.materials.set(ge.material,ne[ge.material]);else{const ve=ne.findIndex(ye=>ye.name==="Default");ve>=0?this.materials.set(ve,ne[ve]):console.warn("gltfPrimitive has no material!")}if(ge.extensions&&ge.extensions.KHR_materials_variants){const ve=ge.extensions.KHR_materials_variants,be=ce.parser.json.extensions.KHR_materials_variants.variants;for(const Ce of ve.mappings){const Se=ne[Ce.material];this.materials.set(Ce.material,Se);for(const $e of Ce.variants){const{name:Te}=be[$e];this.variantToMaterialMap.set($e,Se),Se[$variantIndices]().add($e),ie.has(Te)||ie.set(Te,{name:Te,index:$e})}}}}async setActiveMaterial(ee){const ne=this.materials.get(ee);return ne!=null&&(this.mesh.material=await ne[$getLoadedMaterial](),this.activeMaterialIdx=ee),this.mesh.material}getActiveMaterial(){return this.materials.get(this.activeMaterialIdx)}getMaterial(ee){return this.materials.get(ee)}async enableVariant(ee){if(ee==null)return this.setActiveMaterial(this.initialMaterialIdx);if(this.variantToMaterialMap!=null&&this.modelVariants.has(ee)){const ne=this.modelVariants.get(ee);return this.enableVariantHelper(ne.index)}return null}async enableVariantHelper(ee){if(this.variantToMaterialMap!=null&&ee!=null){const ne=this.variantToMaterialMap.get(ee);if(ne!=null)return this.setActiveMaterial(ne.index)}return null}async instantiateVariants(){if(this.variantToMaterialMap!=null)for(const ee of this.variantToMaterialMap.keys()){const ne=this.mesh.userData.variantMaterials.get(ee);if(ne.material!=null)continue;const ie=await this.enableVariantHelper(ee);ie!=null&&(ne.material=ie)}}get variantInfo(){return this.variantToMaterialMap}addVariant(ee,ne){if(!this.ensureVariantIsUnused(ne))return!1;this.modelVariants.has(ne)||this.modelVariants.set(ne,{name:ne,index:this.modelVariants.size});const oe=this.modelVariants.get(ne).index;return ee[$variantIndices]().add(oe),this.variantToMaterialMap.set(oe,ee),this.materials.set(ee.index,ee),this.updateVariantUserData(oe,ee),!0}deleteVariant(ee){if(this.variantInfo.has(ee)){this.variantInfo.delete(ee);const ne=this.mesh.userData.variantMaterials;ne!=null&&ne.delete(ee)}}updateVariantUserData(ee,ne){ne[$variantIndices]().add(ee),this.mesh.userData.variantData=this.modelVariants,this.mesh.userData.variantMaterials=this.mesh.userData.variantMaterials||new Map,this.mesh.userData.variantMaterials.set(ee,{material:ne[$correlatedObjects].values().next().value,gltfMaterialIndex:ne.index})}ensureVariantIsUnused(ee){const ne=this.modelVariants.get(ee);return ne!=null&&this.variantInfo.has(ne.index)?(console.warn(`Primitive cannot add variant '${ee}' for this material, it already exists.`),!1):!0}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _a$3,_b$3,_c$1,_d$1,_e$1,_f$1;const $materials=Symbol("materials"),$hierarchy=Symbol("hierarchy"),$roots=Symbol("roots"),$primitivesList=Symbol("primitives"),$correlatedSceneGraph=Symbol("correlatedSceneGraph"),$prepareVariantsForExport=Symbol("prepareVariantsForExport"),$switchVariant=Symbol("switchVariant"),$materialFromPoint=Symbol("materialFromPoint"),$nodeFromPoint=Symbol("nodeFromPoint"),$nodeFromIndex=Symbol("nodeFromIndex"),$variantData=Symbol("variantData"),$availableVariants=Symbol("availableVariants"),$modelOnUpdate=Symbol("modelOnUpdate"),$cloneMaterial=Symbol("cloneMaterial");class LazyLoader{constructor(ee,ne,ie,oe){this.gltf=ee,this.gltfElementMap=ne,this.mapKey=ie,this.doLazyLoad=oe}}class Model{constructor(ee,ne=()=>{}){this[_a$3]=new Array,this[_b$3]=new Array,this[_c$1]=new Array,this[_d$1]=new Array,this[_e$1]=()=>{},this[_f$1]=new Map,this[$modelOnUpdate]=ne,this[$correlatedSceneGraph]=ee;const{gltf:ie,threeGLTF:oe,gltfElementMap:ae}=ee;for(const[ue,he]of ie.materials.entries()){const fe=ae.get(he);if(fe!=null)this[$materials].push(new Material(ne,ie,he,ue,!0,this[$variantData],fe));else{const ge=(ie.materials||[])[ue],ve=ue,ye=async()=>{const be=await oe.parser.getDependency("material",ve),Ce=new Set;return ae.set(ge,Ce),Ce.add(be),{set:Ce,material:be}};this[$materials].push(new Material(ne,ie,ge,ue,!1,this[$variantData],fe,new LazyLoader(ie,ae,ge,ye)))}}const ce=new Map,le=new Array;for(const ue of oe.scene.children)le.push(ue);for(;le.length>0;){const ue=le.pop();let he=null;ue instanceof Mesh?(he=new PrimitiveNode(ue,this.materials,this[$variantData],ee),this[$primitivesList].push(he)):he=new Node$2(ue.name);const fe=ce.get(ue);fe!=null?fe.children.push(he):this[$roots].push(he),this[$hierarchy].push(he);for(const me of ue.children)le.push(me),ce.set(ue,he)}}get materials(){return this[$materials]}[(_a$3=$materials,_b$3=$hierarchy,_c$1=$roots,_d$1=$primitivesList,_e$1=$modelOnUpdate,_f$1=$variantData,$availableVariants)](){const ee=Array.from(this[$variantData].values());return ee.sort((ne,ie)=>ne.index-ie.index),ee.map(ne=>ne.name)}getMaterialByName(ee){const ne=this[$materials].filter(ie=>ie.name===ee);return ne.length>0?ne[0]:null}[$nodeFromIndex](ee,ne){const ie=this[$hierarchy].find(oe=>{if(oe instanceof PrimitiveNode){const{meshes:ae,primitives:ce}=oe.mesh.userData.associations;if(ae==ee&&ce==ne)return!0}return!1});return ie??null}[$nodeFromPoint](ee){return this[$hierarchy].find(ne=>ne instanceof PrimitiveNode&&ne.mesh===ee.object)}[$materialFromPoint](ee){return this[$nodeFromPoint](ee).getActiveMaterial()}async[$switchVariant](ee){for(const ne of this[$primitivesList])await ne.enableVariant(ee);for(const ne of this.materials)ne[$setActive](!1);for(const ne of this[$primitivesList])this.materials[ne.getActiveMaterial().index][$setActive](!0)}async[$prepareVariantsForExport](){const ee=new Array;for(const ne of this[$primitivesList])ee.push(ne.instantiateVariants());await Promise.all(ee)}[$cloneMaterial](ee,ne){const ie=this.materials[ee];ie.isLoaded||console.error(`Cloning an unloaded material,
           call 'material.ensureLoaded() before cloning the material.`);const oe=ie[$correlatedObjects],ae=JSON.parse(JSON.stringify(ie[$sourceObject]));ae.name=ne,this[$correlatedSceneGraph].gltf.materials.push(ae);const le=new Set;for(const[he,fe]of oe.entries()){const me=fe.clone();me.name=ne+(oe.size>1?"_inst"+he:""),le.add(me)}const ue=new Material(this[$modelOnUpdate],this[$correlatedSceneGraph].gltf,ae,this[$materials].length,!1,this[$variantData],le);return this[$materials].push(ue),ue}createMaterialInstanceForVariant(ee,ne,ie,oe=!0){let ae=null;for(const ce of this[$primitivesList]){const le=this[$variantData].get(ie);le!=null&&ce.variantInfo.has(le.index)||ce.getMaterial(ee)!=null&&(this.hasVariant(ie)||this.createVariant(ie),ae==null&&(ae=this[$cloneMaterial](ee,ne)),ce.addVariant(ae,ie))}if(oe&&ae!=null){ae[$setActive](!0),this.materials[ee][$setActive](!1);for(const ce of this[$primitivesList])ce.enableVariant(ie)}return ae}createVariant(ee){this[$variantData].has(ee)?console.warn(`Variant '${ee}'' already exists`):this[$variantData].set(ee,{name:ee,index:this[$variantData].size})}hasVariant(ee){return this[$variantData].has(ee)}setMaterialToVariant(ee,ne){if(this[$availableVariants]().find(ie=>ie===ne)==null){console.warn(`Can't add material to '${ne}', the variant does not exist.'`);return}if(ee<0||ee>=this.materials.length){console.error("setMaterialToVariant(): materialIndex is out of bounds.");return}for(const ie of this[$primitivesList]){const oe=ie.getMaterial(ee);oe!=null&&ie.addVariant(oe,ne)}}updateVariantName(ee,ne){const ie=this[$variantData].get(ee);ie!=null&&(ie.name=ne,this[$variantData].set(ne,ie),this[$variantData].delete(ee))}deleteVariant(ee){const ne=this[$variantData].get(ee);if(ne!=null){for(const ie of this.materials)ie.hasVariant(ee)&&ie[$variantSet].delete(ne.index);for(const ie of this[$primitivesList])ie.deleteVariant(ne.index);this[$variantData].delete(ee)}}}/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$5=globalThis&&globalThis.__decorate||function(re,ee,ne,ie){var oe=arguments.length,ae=oe<3?ee:ie===null?ie=Object.getOwnPropertyDescriptor(ee,ne):ie,ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ae=Reflect.decorate(re,ee,ne,ie);else for(var le=re.length-1;le>=0;le--)(ce=re[le])&&(ae=(oe<3?ce(ae):oe>3?ce(ee,ne,ae):ce(ee,ne))||ae);return oe>3&&ae&&Object.defineProperty(ee,ne,ae),ae};const $currentGLTF=Symbol("currentGLTF"),$originalGltfJson=Symbol("originalGltfJson"),$model=Symbol("model"),$getOnUpdateMethod=Symbol("getOnUpdateMethod"),$buildTexture=Symbol("buildTexture"),SceneGraphMixin=re=>{var ee,ne,ie;class oe extends re{constructor(){super(...arguments),this[ee]=void 0,this[ne]=null,this[ie]=null,this.variantName=null,this.orientation="0 0 0",this.scale="1 1 1"}get model(){return this[$model]}get availableVariants(){return this.model?this.model[$availableVariants]():[]}get originalGltfJson(){return this[$originalGltfJson]}[(ee=$model,ne=$currentGLTF,ie=$originalGltfJson,$getOnUpdateMethod)](){return()=>{this[$needsRender]()}}[$buildTexture](ce){return ce.encoding=sRGBEncoding,ce.wrapS=RepeatWrapping,ce.wrapT=RepeatWrapping,new Texture(this[$getOnUpdateMethod](),ce)}async createTexture(ce,le="image/png"){const{textureUtils:ue}=this[$renderer],he=await ue.loadImage(ce);return he.userData.mimeType=le,this[$buildTexture](he)}async createLottieTexture(ce,le=1){const{textureUtils:ue}=this[$renderer],he=await ue.loadLottie(ce,le);return this[$buildTexture](he)}createVideoTexture(ce){const le=document.createElement("video");le.src=ce,le.muted=!0,le.play(),le.loop=!0;const ue=new VideoTexture(le);return this[$buildTexture](ue)}createCanvasTexture(){const ce=document.createElement("canvas"),le=new CanvasTexture(ce);return this[$buildTexture](le)}async updated(ce){if(super.updated(ce),ce.has("variantName")){const le=this[$progressTracker].beginActivity();le(.1);const ue=this[$model],{variantName:he}=this;ue!=null&&(await ue[$switchVariant](he),this[$needsRender](),this.dispatchEvent(new CustomEvent("variant-applied"))),le(1)}if(ce.has("orientation")||ce.has("scale")){if(!this.loaded)return;const le=this[$scene];le.applyTransform(),le.updateBoundingBox(),le.updateShadow(),this[$renderer].arRenderer.onUpdateScene(),this[$needsRender]()}}[$onModelLoad](){super[$onModelLoad]();const{currentGLTF:ce}=this[$scene];if(ce!=null){const{correlatedSceneGraph:le}=ce;le!=null&&ce!==this[$currentGLTF]&&(this[$model]=new Model(le,this[$getOnUpdateMethod]()),this[$originalGltfJson]=JSON.parse(JSON.stringify(le.gltf))),"variants"in ce.userData&&this.requestUpdate("variantName")}this[$currentGLTF]=ce}async exportScene(ce){const le=this[$scene];return new Promise(async(ue,he)=>{const fe={binary:!0,onlyVisible:!0,maxTextureSize:1/0,includeCustomExtensions:!1,forceIndices:!1};Object.assign(fe,ce),fe.animations=le.animations,fe.truncateDrawRange=!0;const me=le.shadow;let ge=!1;me!=null&&(ge=me.visible,me.visible=!1),await this[$model][$prepareVariantsForExport](),new GLTFExporter().register(ye=>new GLTFExporterMaterialsVariantsExtension(ye)).parse(le.model,ye=>ue(new Blob([fe.binary?ye:JSON.stringify(ye)],{type:fe.binary?"application/octet-stream":"application/json"})),()=>he("glTF export failed"),fe),me!=null&&(me.visible=ge)})}materialFromPoint(ce,le){const ue=this[$model];if(ue==null)return null;const he=this[$scene],fe=he.getNDC(ce,le),me=he.hitFromPoint(fe);return me==null||me.face==null?null:ue[$materialFromPoint](me)}}return __decorate$5([e$4({type:String,attribute:"variant-name"})],oe.prototype,"variantName",void 0),__decorate$5([e$4({type:String,attribute:"orientation"})],oe.prototype,"orientation",void 0),__decorate$5([e$4({type:String,attribute:"scale"})],oe.prototype,"scale",void 0),oe};/* @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a=new Vector3,b$1=new Vector3,c$2=new Vector3,mat=new Matrix3,triangle=new Triangle,quat=new Quaternion;class Hotspot extends CSS2DObject{constructor(ee){super(document.createElement("div")),this.normal=new Vector3(0,1,0),this.initialized=!1,this.referenceCount=1,this.pivot=document.createElement("div"),this.slot=document.createElement("slot"),this.element.classList.add("annotation-wrapper"),this.slot.name=ee.name,this.element.appendChild(this.pivot),this.pivot.appendChild(this.slot),this.updatePosition(ee.position),this.updateNormal(ee.normal),this.surface=ee.surface}get facingCamera(){return!this.element.classList.contains("hide")}show(){(!this.facingCamera||!this.initialized)&&this.updateVisibility(!0)}hide(){(this.facingCamera||!this.initialized)&&this.updateVisibility(!1)}increment(){this.referenceCount++}decrement(){return this.referenceCount>0&&--this.referenceCount,this.referenceCount===0}updatePosition(ee){if(ee==null)return;const ne=parseExpressions(ee)[0].terms;for(let ie=0;ie<3;++ie)this.position.setComponent(ie,normalizeUnit(ne[ie]).number);this.updateMatrixWorld()}updateNormal(ee){if(ee==null)return;const ne=parseExpressions(ee)[0].terms;for(let ie=0;ie<3;++ie)this.normal.setComponent(ie,ne[ie].number)}updateSurface(ee){if(!ee&&this.initialized)return;const{mesh:ne,tri:ie,bary:oe}=this;if(ne==null||ie==null||oe==null)return;ne.getVertexPosition(ie.x,a),ne.getVertexPosition(ie.y,b$1),ne.getVertexPosition(ie.z,c$2),a.toArray(mat.elements,0),b$1.toArray(mat.elements,3),c$2.toArray(mat.elements,6),this.position.copy(oe).applyMatrix3(mat);const ae=this.parent;ae.worldToLocal(ne.localToWorld(this.position)),triangle.set(a,b$1,c$2),triangle.getNormal(this.normal).transformDirection(ne.matrixWorld);const ce=ae.parent;quat.setFromAxisAngle(a.set(0,1,0),-ce.yaw),this.normal.applyQuaternion(quat)}orient(ee){this.pivot.style.transform=`rotate(${ee}rad)`}updateVisibility(ee){ee?this.element.classList.remove("hide"):this.element.classList.add("hide"),this.slot.assignedNodes().forEach(ne=>{if(ne.nodeType!==Node.ELEMENT_NODE)return;const ie=ne,oe=ie.dataset.visibilityAttribute;if(oe!=null){const ae=`data-${oe}`;ee?ie.setAttribute(ae,""):ie.removeAttribute(ae)}ie.dispatchEvent(new CustomEvent("hotspot-visibility",{detail:{visible:ee}}))}),this.initialized=!0}}const HorizontalBlurShader={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},VerticalBlurShader={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};function lerp(re,ee,ne){return(1-ne)*re+ne*ee}/* @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LOG_MAX_RESOLUTION=9,LOG_MIN_RESOLUTION=6,ANIMATION_SCALING=2,DEFAULT_HARD_INTENSITY=.3;class Shadow extends Object3D{constructor(ee,ne,ie){super(),this.camera=new OrthographicCamera,this.renderTarget=null,this.renderTargetBlur=null,this.depthMaterial=new MeshDepthMaterial,this.horizontalBlurMaterial=new ShaderMaterial(HorizontalBlurShader),this.verticalBlurMaterial=new ShaderMaterial(VerticalBlurShader),this.intensity=0,this.softness=1,this.boundingBox=new Box3,this.size=new Vector3,this.maxDimension=0,this.isAnimated=!1,this.needsUpdate=!1;const{camera:oe}=this;oe.rotation.x=Math.PI/2,oe.left=-.5,oe.right=.5,oe.bottom=-.5,oe.top=.5,this.add(oe);const ae=new PlaneGeometry,ce=new MeshBasicMaterial({opacity:1,transparent:!0,side:BackSide});this.floor=new Mesh(ae,ce),this.floor.userData.shadow=!0,oe.add(this.floor),this.blurPlane=new Mesh(ae),this.blurPlane.visible=!1,oe.add(this.blurPlane),ee.target.add(this),this.depthMaterial.onBeforeCompile=function(le){le.fragmentShader=le.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this.horizontalBlurMaterial.depthTest=!1,this.verticalBlurMaterial.depthTest=!1,this.setScene(ee,ne,ie)}setScene(ee,ne,ie){const{boundingBox:oe,size:ae,rotation:ce,position:le}=this;if(this.isAnimated=ee.animationNames.length>0,this.boundingBox.copy(ee.boundingBox),this.size.copy(ee.size),this.maxDimension=Math.max(ae.x,ae.y,ae.z)*(this.isAnimated?ANIMATION_SCALING:1),this.boundingBox.getCenter(le),ie==="back"){const{min:ue,max:he}=oe;[ue.y,ue.z]=[ue.z,ue.y],[he.y,he.z]=[he.z,he.y],[ae.y,ae.z]=[ae.z,ae.y],ce.x=Math.PI/2,ce.y=Math.PI}else ce.x=0,ce.y=0;if(this.isAnimated){const ue=oe.min.y,he=oe.max.y;ae.y=this.maxDimension,oe.expandByVector(ae.subScalar(this.maxDimension).multiplyScalar(-.5)),oe.min.y=ue,oe.max.y=he,ae.set(this.maxDimension,he-ue,this.maxDimension)}ie==="bottom"?le.y=oe.min.y:le.z=oe.min.y,this.setSoftness(ne)}setSoftness(ee){this.softness=ee;const{size:ne,camera:ie}=this,oe=this.isAnimated?ANIMATION_SCALING:1,ae=oe*Math.pow(2,LOG_MAX_RESOLUTION-ee*(LOG_MAX_RESOLUTION-LOG_MIN_RESOLUTION));this.setMapSize(ae);const ce=ne.y/2,le=ne.y*oe;ie.near=0,ie.far=lerp(le,ce,ee),this.depthMaterial.opacity=1/ee,ie.updateProjectionMatrix(),this.setIntensity(this.intensity),this.setOffset(0)}setMapSize(ee){const{size:ne}=this;this.isAnimated&&(ee*=ANIMATION_SCALING);const ie=Math.floor(ne.x>ne.z?ee:ee*ne.x/ne.z),oe=Math.floor(ne.x>ne.z?ee*ne.z/ne.x:ee),ae=10,ce=ae+ie,le=ae+oe;if(this.renderTarget!=null&&(this.renderTarget.width!==ce||this.renderTarget.height!==le)&&(this.renderTarget.dispose(),this.renderTarget=null,this.renderTargetBlur.dispose(),this.renderTargetBlur=null),this.renderTarget==null){const ue={format:RGBAFormat};this.renderTarget=new WebGLRenderTarget(ce,le,ue),this.renderTargetBlur=new WebGLRenderTarget(ce,le,ue),this.floor.material.map=this.renderTarget.texture}this.camera.scale.set(ne.x*(1+ae/ie),ne.z*(1+ae/oe),1),this.needsUpdate=!0}setIntensity(ee){this.intensity=ee,ee>0?(this.visible=!0,this.floor.visible=!0,this.floor.material.opacity=ee*lerp(DEFAULT_HARD_INTENSITY,1,this.softness*this.softness)):(this.visible=!1,this.floor.visible=!1)}getIntensity(){return this.intensity}setOffset(ee){this.floor.position.z=-ee+.001*this.maxDimension}render(ee,ne){ne.overrideMaterial=this.depthMaterial;const ie=ee.getClearAlpha();ee.setClearAlpha(0),this.floor.visible=!1;const oe=ee.xr.enabled;ee.xr.enabled=!1;const ae=ee.getRenderTarget();ee.setRenderTarget(this.renderTarget),ee.render(ne,this.camera),ne.overrideMaterial=null,this.floor.visible=!0,this.blurShadow(ee),ee.xr.enabled=oe,ee.setRenderTarget(ae),ee.setClearAlpha(ie)}blurShadow(ee){const{camera:ne,horizontalBlurMaterial:ie,verticalBlurMaterial:oe,renderTarget:ae,renderTargetBlur:ce,blurPlane:le}=this;le.visible=!0,le.material=ie,ie.uniforms.h.value=1/this.renderTarget.width,ie.uniforms.tDiffuse.value=this.renderTarget.texture,ee.setRenderTarget(ce),ee.render(le,ne),le.material=oe,oe.uniforms.v.value=1/this.renderTarget.height,oe.uniforms.tDiffuse.value=this.renderTargetBlur.texture,ee.setRenderTarget(ae),ee.render(le,ne),le.visible=!1}dispose(){this.renderTarget!=null&&this.renderTarget.dispose(),this.renderTargetBlur!=null&&this.renderTargetBlur.dispose(),this.depthMaterial.dispose(),this.horizontalBlurMaterial.dispose(),this.verticalBlurMaterial.dispose(),this.floor.material.dispose(),this.floor.geometry.dispose(),this.blurPlane.geometry.dispose(),this.removeFromParent()}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MIN_SHADOW_RATIO=100,view=new Vector3,target=new Vector3,normalWorld=new Vector3,raycaster=new Raycaster,vector3=new Vector3,ndc=new Vector2;class ModelScene extends Scene{constructor({canvas:ee,element:ne,width:ie,height:oe}){super(),this.annotationRenderer=new CSS2DRenderer,this.schemaElement=document.createElement("script"),this.width=1,this.height=1,this.aspect=1,this.scaleStep=0,this.renderCount=0,this.externalRenderer=null,this.camera=new PerspectiveCamera(45,1,.1,100),this.xrCamera=null,this.url=null,this.target=new Object3D,this.animationNames=[],this.boundingBox=new Box3,this.boundingSphere=new Sphere,this.size=new Vector3,this.idealAspect=0,this.framedFoVDeg=0,this.shadow=null,this.shadowIntensity=0,this.shadowSoftness=1,this.bakedShadows=new Set,this.exposure=1,this.canScale=!0,this.isDirty=!1,this.goalTarget=new Vector3,this.targetDamperX=new Damper,this.targetDamperY=new Damper,this.targetDamperZ=new Damper,this._currentGLTF=null,this._model=null,this.cancelPendingSourceChange=null,this.animationsByName=new Map,this.currentAnimationAction=null,this.name="ModelScene",this.element=ne,this.canvas=ee,this.camera=new PerspectiveCamera(45,1,.1,100),this.camera.name="MainCamera",this.add(this.target),this.setSize(ie,oe),this.target.name="Target",this.mixer=new AnimationMixer(this.target);const{domElement:ae}=this.annotationRenderer,{style:ce}=ae;ce.display="none",ce.pointerEvents="none",ce.position="absolute",ce.top="0",this.element.shadowRoot.querySelector(".default").appendChild(ae),this.schemaElement.setAttribute("type","application/ld+json")}get context(){return this.canvas.getContext("2d")}getCamera(){return this.xrCamera!=null?this.xrCamera:this.camera}queueRender(){this.isDirty=!0}shouldRender(){return this.isDirty}hasRendered(){this.isDirty=!1}forceRescale(){this.scaleStep=-1,this.queueRender()}async setObject(ee){this.reset(),this._model=ee,this.target.add(ee),await this.setupScene()}async setSource(ee,ne=()=>{}){if(!ee||ee===this.url){ne(1);return}if(this.reset(),this.url=ee,this.externalRenderer!=null){const le=await this.externalRenderer.load(ne);this.boundingSphere.radius=le.framedRadius,this.idealAspect=le.fieldOfViewAspect;return}this.cancelPendingSourceChange!=null&&(this.cancelPendingSourceChange(),this.cancelPendingSourceChange=null);let ie;try{ie=await new Promise(async(le,ue)=>{this.cancelPendingSourceChange=()=>ue();try{const he=await this.element[$renderer].loader.load(ee,this.element,ne);le(he)}catch(he){ue(he)}})}catch(le){if(le==null)return;throw le}this.cancelPendingSourceChange=null,this.reset(),this.url=ee,this._currentGLTF=ie,ie!=null&&(this._model=ie.scene,this.target.add(ie.scene));const{animations:oe}=ie,ae=new Map,ce=[];for(const le of oe)ae.set(le.name,le),ce.push(le.name);this.animations=oe,this.animationsByName=ae,this.animationNames=ce,await this.setupScene()}async setupScene(){this.applyTransform(),this.updateBoundingBox(),await this.updateFraming(),this.updateShadow(),this.setShadowIntensity(this.shadowIntensity)}reset(){this.url=null,this.renderCount=0,this.queueRender(),this.shadow!=null&&this.shadow.setIntensity(0),this.bakedShadows.clear();const{_model:ee}=this;ee!=null&&(ee.removeFromParent(),this._model=null);const ne=this._currentGLTF;ne!=null&&(ne.dispose(),this._currentGLTF=null),this.currentAnimationAction!=null&&(this.currentAnimationAction.stop(),this.currentAnimationAction=null),this.mixer.stopAllAction(),this.mixer.uncacheRoot(this)}dispose(){this.reset(),this.shadow!=null&&(this.shadow.dispose(),this.shadow=null),this.element[$currentGLTF]=null,this.element[$originalGltfJson]=null,this.element[$model]=null}get currentGLTF(){return this._currentGLTF}setSize(ee,ne){if(!(this.width===ee&&this.height===ne)){if(this.width=Math.max(ee,1),this.height=Math.max(ne,1),this.annotationRenderer.setSize(ee,ne),this.aspect=this.width/this.height,this.externalRenderer!=null){const ie=resolveDpr();this.externalRenderer.resize(ee*ie,ne*ie)}this.queueRender()}}markBakedShadow(ee){ee.userData.shadow=!0,this.bakedShadows.add(ee)}unmarkBakedShadow(ee){ee.userData.shadow=!1,ee.visible=!0,this.bakedShadows.delete(ee),this.boundingBox.expandByObject(ee)}findBakedShadows(ee){const ne=new Box3;ee.traverse(ie=>{const oe=ie;if(!oe.isMesh||!oe.material.transparent)return;ne.setFromObject(oe);const ce=ne.getSize(vector3),le=Math.min(ce.x,ce.y,ce.z);Math.max(ce.x,ce.y,ce.z)<MIN_SHADOW_RATIO*le||this.markBakedShadow(oe)})}checkBakedShadows(){const{min:ee,max:ne}=this.boundingBox,ie=new Box3;this.boundingBox.getSize(this.size);for(const oe of this.bakedShadows)ie.setFromObject(oe),!(ie.min.y<ee.y+this.size.y/MIN_SHADOW_RATIO&&ie.min.x<=ee.x&&ie.max.x>=ne.x&&ie.min.z<=ee.z&&ie.max.z>=ne.z)&&(ie.min.z<ee.z+this.size.z/MIN_SHADOW_RATIO&&ie.min.x<=ee.x&&ie.max.x>=ne.x&&ie.min.y<=ee.y&&ie.max.y>=ne.y||this.unmarkBakedShadow(oe))}applyTransform(){const{model:ee}=this;if(ee==null)return;const ne=parseExpressions(this.element.orientation)[0].terms,ie=normalizeUnit(ne[0]).number,oe=normalizeUnit(ne[1]).number,ae=normalizeUnit(ne[2]).number;ee.quaternion.setFromEuler(new Euler(oe,ae,ie,"YXZ"));const ce=parseExpressions(this.element.scale)[0].terms;ee.scale.set(ce[0].number,ce[1].number,ce[2].number)}updateBoundingBox(){const{model:ee}=this;if(ee==null)return;this.target.remove(ee),this.findBakedShadows(ee);const ne=(ie,oe)=>ie.expandByPoint(oe);this.setBakedShadowVisibility(!1),this.boundingBox=reduceVertices(ee,ne,new Box3),this.boundingBox.isEmpty()&&(this.setBakedShadowVisibility(!0),this.bakedShadows.forEach(ie=>this.unmarkBakedShadow(ie)),this.boundingBox=reduceVertices(ee,ne,new Box3)),this.checkBakedShadows(),this.setBakedShadowVisibility(),this.boundingBox.getSize(this.size),this.target.add(ee)}async updateFraming(){const{model:ee}=this;if(ee==null)return;this.target.remove(ee),this.setBakedShadowVisibility(!1);const{center:ne}=this.boundingSphere;this.element.requestUpdate("cameraTarget"),await this.element.updateComplete,ne.copy(this.getTarget());const ie=(ae,ce)=>Math.max(ae,ne.distanceToSquared(ce));this.boundingSphere.radius=Math.sqrt(reduceVertices(ee,ie,0));const oe=(ae,ce)=>{ce.sub(ne);const le=Math.sqrt(ce.x*ce.x+ce.z*ce.z);return Math.max(ae,le/(this.idealCameraDistance()-Math.abs(ce.y)))};this.idealAspect=reduceVertices(ee,oe,0)/Math.tan(this.framedFoVDeg/2*Math.PI/180),this.setBakedShadowVisibility(),this.target.add(ee)}setBakedShadowVisibility(ee=this.shadowIntensity<=0){for(const ne of this.bakedShadows)ne.visible=ee}idealCameraDistance(){const ee=this.framedFoVDeg/2*Math.PI/180;return this.boundingSphere.radius/Math.sin(ee)}adjustedFoV(ee){const ne=Math.tan(ee/2*Math.PI/180)*Math.max(1,this.idealAspect/this.aspect);return 2*Math.atan(ne)*180/Math.PI}getNDC(ee,ne){if(this.xrCamera!=null)ndc.set(ee/window.screen.width,ne/window.screen.height);else{const ie=this.element.getBoundingClientRect();ndc.set((ee-ie.x)/this.width,(ne-ie.y)/this.height)}return ndc.multiplyScalar(2).subScalar(1),ndc.y*=-1,ndc}getSize(){return{width:this.width,height:this.height}}setEnvironmentAndSkybox(ee,ne){this.element[$renderer].arRenderer.presentedScene!==this&&(this.environment=ee,this.background=ne,this.queueRender())}setTarget(ee,ne,ie){this.goalTarget.set(-ee,-ne,-ie)}setTargetDamperDecayTime(ee){this.targetDamperX.setDecayTime(ee),this.targetDamperY.setDecayTime(ee),this.targetDamperZ.setDecayTime(ee)}getTarget(){return this.goalTarget.clone().multiplyScalar(-1)}jumpToGoal(){this.updateTarget(SETTLING_TIME)}updateTarget(ee){const ne=this.goalTarget,ie=this.target.position;if(ne.equals(ie))return!1;{const oe=this.boundingSphere.radius/10;let{x:ae,y:ce,z:le}=ie;return ae=this.targetDamperX.update(ae,ne.x,ee,oe),ce=this.targetDamperY.update(ce,ne.y,ee,oe),le=this.targetDamperZ.update(le,ne.z,ee,oe),this.target.position.set(ae,ce,le),this.target.updateMatrixWorld(),this.queueRender(),!0}}pointTowards(ee,ne){const{x:ie,z:oe}=this.position;this.yaw=Math.atan2(ee-ie,ne-oe)}get model(){return this._model}set yaw(ee){this.rotation.y=ee,this.queueRender()}get yaw(){return this.rotation.y}set animationTime(ee){this.mixer.setTime(ee),this.queueShadowRender()}get animationTime(){if(this.currentAnimationAction!=null){const ee=Math.max(this.currentAnimationAction._loopCount,0);return this.currentAnimationAction.loop===LoopPingPong&&(ee&1)===1?this.duration-this.currentAnimationAction.time:this.currentAnimationAction.time}return 0}set animationTimeScale(ee){this.mixer.timeScale=ee}get animationTimeScale(){return this.mixer.timeScale}get duration(){return this.currentAnimationAction!=null&&this.currentAnimationAction.getClip()?this.currentAnimationAction.getClip().duration:0}get hasActiveAnimation(){return this.currentAnimationAction!=null}playAnimation(ee=null,ne=0,ie=LoopRepeat,oe=1/0){if(this._currentGLTF==null)return;const{animations:ae}=this;if(ae==null||ae.length===0){console.warn("Cannot play animation (model does not have any animations)");return}let ce=null;if(ee!=null&&(ce=this.animationsByName.get(ee),ce==null)){const le=parseInt(ee);!isNaN(le)&&le>=0&&le<ae.length&&(ce=ae[le])}ce==null&&(ce=ae[0]);try{const{currentAnimationAction:le}=this,ue=this.mixer.clipAction(ce,this);this.currentAnimationAction=ue,this.element.paused?this.mixer.stopAllAction():(ue.paused=!1,le!=null&&ue!==le?ue.crossFadeFrom(le,ne,!1):this.animationTimeScale>0&&this.animationTime==this.duration&&(this.animationTime=0)),ue.setLoop(ie,oe),ue.enabled=!0,ue.clampWhenFinished=!0,ue.play()}catch(le){console.error(le)}}stopAnimation(){this.currentAnimationAction=null,this.mixer.stopAllAction()}updateAnimation(ee){this.mixer.update(ee),this.queueShadowRender()}subscribeMixerEvent(ee,ne){this.mixer.addEventListener(ee,ne)}updateShadow(){const ee=this.shadow;if(ee!=null){const ne=this.element.arPlacement==="wall"?"back":"bottom";ee.setScene(this,this.shadowSoftness,ne),ee.needsUpdate=!0}}renderShadow(ee){const ne=this.shadow;ne!=null&&ne.needsUpdate==!0&&(ne.render(ee,this),ne.needsUpdate=!1)}queueShadowRender(){this.shadow!=null&&(this.shadow.needsUpdate=!0)}setShadowIntensity(ee){if(this.shadowIntensity=ee,this._currentGLTF!=null&&(this.setBakedShadowVisibility(),!(ee<=0&&this.shadow==null))){if(this.shadow==null){const ne=this.element.arPlacement==="wall"?"back":"bottom";this.shadow=new Shadow(this,this.shadowSoftness,ne)}this.shadow.setIntensity(ee)}}setShadowSoftness(ee){this.shadowSoftness=ee;const ne=this.shadow;ne!=null&&ne.setSoftness(ee)}setShadowOffset(ee){const ne=this.shadow;ne!=null&&ne.setOffset(ee)}get raycaster(){return raycaster}hitFromPoint(ee,ne=this){return this.raycaster.setFromCamera(ee,this.getCamera()),this.raycaster.intersectObject(ne,!0).find(oe=>oe.object.visible&&!oe.object.userData.shadow)}positionAndNormalFromPoint(ee,ne=this){const ie=this.hitFromPoint(ee,ne);return ie==null||ie.face==null?null:ie.uv==null?{position:ie.point,normal:ie.face.normal,uv:null}:(ie.face.normal.applyNormalMatrix(new Matrix3().getNormalMatrix(ie.object.matrixWorld)),{position:ie.point,normal:ie.face.normal,uv:ie.uv})}surfaceFromPoint(ee,ne=this){const ie=this.element.model;if(ie==null)return null;const oe=this.hitFromPoint(ee,ne);if(oe==null||oe.face==null)return null;const ae=ie[$nodeFromPoint](oe),{meshes:ce,primitives:le}=ae.mesh.userData.associations,ue=new Vector3,he=new Vector3,fe=new Vector3,{a:me,b:ge,c:ve}=oe.face,ye=oe.object;ye.getVertexPosition(me,ue),ye.getVertexPosition(ge,he),ye.getVertexPosition(ve,fe);const be=new Triangle(ue,he,fe),Ce=new Vector3;return be.getBarycoord(ye.worldToLocal(oe.point),Ce),`${ce} ${le} ${me} ${ge} ${ve} ${Ce.x.toFixed(3)} ${Ce.y.toFixed(3)} ${Ce.z.toFixed(3)}`}addHotspot(ee){this.target.add(ee),this.annotationRenderer.domElement.appendChild(ee.element)}removeHotspot(ee){this.target.remove(ee)}forHotspots(ee){const{children:ne}=this.target;for(let ie=0,oe=ne.length;ie<oe;ie++){const ae=ne[ie];ae instanceof Hotspot&&ee(ae)}}initializeSurface(ee){if(ee.surface!=null&&ee.mesh==null){const ne=parseExpressions(ee.surface)[0].terms;if(ne.length!=8){console.warn(ee.surface+" does not have exactly 8 numbers.");return}const ie=this.element.model[$nodeFromIndex](ne[0].number,ne[1].number),oe=new Vector3(ne[2].number,ne[3].number,ne[4].number);if(ie==null){console.warn(ee.surface+" does not match a node/primitive in this glTF! Skipping this hotspot.");return}const ae=ie.mesh.geometry.attributes.position.count;if(oe.x>=ae||oe.y>=ae||oe.z>=ae){console.warn(ee.surface+" vertex indices out of range in this glTF! Skipping this hotspot.");return}const ce=new Vector3(ne[5].number,ne[6].number,ne[7].number);ee.mesh=ie.mesh,ee.tri=oe,ee.bary=ce}}updateSurfaceHotspots(){const ee=!this.element.paused;this.forHotspots(ne=>{this.initializeSurface(ne),ne.updateSurface(ee)})}updateHotspotsVisibility(ee){this.forHotspots(ne=>{view.copy(ee),target.setFromMatrixPosition(ne.matrixWorld),view.sub(target),normalWorld.copy(ne.normal).transformDirection(this.target.matrixWorld),view.dot(normalWorld)<0?ne.hide():ne.show()})}orientHotspots(ee){this.forHotspots(ne=>{ne.orient(ee)})}setHotspotsVisibility(ee){this.forHotspots(ne=>{ne.visible=ee})}updateSchema(ee){var ne;const{schemaElement:ie,element:oe}=this,{alt:ae,poster:ce,iosSrc:le}=oe;if(ee!=null){const ue=[{"@type":"MediaObject",contentUrl:ee,encodingFormat:((ne=ee.split(".").pop())===null||ne===void 0?void 0:ne.toLowerCase())==="gltf"?"model/gltf+json":"model/gltf-binary"}];le&&ue.push({"@type":"MediaObject",contentUrl:le,encodingFormat:"model/vnd.usdz+zip"});const he={"@context":"http://schema.org/","@type":"3DModel",image:ce??void 0,name:ae??void 0,encoding:ue};ie.textContent=JSON.stringify(he),document.head.appendChild(ie)}else ie.parentElement!=null&&ie.parentElement.removeChild(ie)}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dataUrlToBlob=async re=>new Promise((ee,ne)=>{const oe=re.match(/data:(.*);/);if(!oe)return ne(new Error(`${re} is not a valid data Url`));const ae=oe[1],ce=re.replace(/data:image\/\w+;base64,/,""),le=atob(ce),ue=[];for(let he=0;he<le.length;he+=512){const fe=le.slice(he,he+512),me=new Array(fe.length);for(let ve=0;ve<fe.length;ve++)me[ve]=fe.charCodeAt(ve);const ge=new Uint8Array(me);ue.push(ge)}ee(new Blob(ue,{type:ae}))});/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProgressTracker extends EventTarget{constructor(){super(...arguments),this.ongoingActivities=new Set,this.totalProgress=0}get ongoingActivityCount(){return this.ongoingActivities.size}beginActivity(){const ee={progress:0,completed:!1};return this.ongoingActivities.add(ee),this.ongoingActivityCount===1&&this.announceTotalProgress(ee,0),ne=>{let ie;return ie=Math.max(clamp$2(ne,0,1),ee.progress),ie!==ee.progress&&this.announceTotalProgress(ee,ie),ee.progress}}announceTotalProgress(ee,ne){let ie=0,oe=0;ne==1&&(ee.completed=!0);for(const le of this.ongoingActivities){const{progress:ue}=le;ie+=1-ue,le.completed===!0&&oe++}const ae=ee.progress;ee.progress=ne,this.totalProgress+=(ne-ae)*(1-this.totalProgress)/ie;const ce=oe===this.ongoingActivityCount?1:this.totalProgress;this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:ce}})),oe===this.ongoingActivityCount&&(this.totalProgress=0,this.ongoingActivities.clear())}}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$4=globalThis&&globalThis.__decorate||function(re,ee,ne,ie){var oe=arguments.length,ae=oe<3?ee:ie===null?ie=Object.getOwnPropertyDescriptor(ee,ne):ie,ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ae=Reflect.decorate(re,ee,ne,ie);else for(var le=re.length-1;le>=0;le--)(ce=re[le])&&(ae=(oe<3?ce(ae):oe>3?ce(ee,ne,ae):ce(ee,ne))||ae);return oe>3&&ae&&Object.defineProperty(ee,ne,ae),ae},_a$2,_b$2,_c,_d,_e,_f,_g,_h,_j,_k,_l,_m,_o;const CLEAR_MODEL_TIMEOUT_MS=10,FALLBACK_SIZE_UPDATE_THRESHOLD_MS=50,ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD=0,UNSIZED_MEDIA_WIDTH=300,UNSIZED_MEDIA_HEIGHT=150,blobCanvas=document.createElement("canvas"),$fallbackResizeHandler=Symbol("fallbackResizeHandler"),$defaultAriaLabel=Symbol("defaultAriaLabel"),$resizeObserver=Symbol("resizeObserver"),$clearModelTimeout=Symbol("clearModelTimeout"),$onContextLost=Symbol("onContextLost"),$loaded=Symbol("loaded"),$status=Symbol("status"),$onFocus=Symbol("onFocus"),$onBlur=Symbol("onBlur"),$updateSize=Symbol("updateSize"),$intersectionObserver=Symbol("intersectionObserver"),$isElementInViewport=Symbol("isElementInViewport"),$announceModelVisibility=Symbol("announceModelVisibility"),$ariaLabel=Symbol("ariaLabel"),$altDefaulted=Symbol("altDefaulted"),$statusElement=Symbol("statusElement"),$updateStatus=Symbol("updateStatus"),$loadedTime=Symbol("loadedTime"),$updateSource=Symbol("updateSource"),$markLoaded=Symbol("markLoaded"),$container=Symbol("container"),$userInputElement=Symbol("input"),$canvas=Symbol("canvas"),$scene=Symbol("scene"),$needsRender=Symbol("needsRender"),$tick=Symbol("tick"),$onModelLoad=Symbol("onModelLoad"),$onResize=Symbol("onResize"),$renderer=Symbol("renderer"),$progressTracker=Symbol("progressTracker"),$getLoaded=Symbol("getLoaded"),$getModelIsVisible=Symbol("getModelIsVisible"),$shouldAttemptPreload=Symbol("shouldAttemptPreload"),toVector3D=re=>({x:re.x,y:re.y,z:re.z,toString(){return`${this.x}m ${this.y}m ${this.z}m`}}),toVector2D=re=>({u:re.x,v:re.y,toString(){return`${this.u} ${this.v}`}});class ModelViewerElementBase extends d$2{constructor(){super(),this.alt=null,this.src=null,this.withCredentials=!1,this.generateSchema=!1,this[_a$2]=!1,this[_b$2]=!1,this[_c]=0,this[_d]="",this[_e]=null,this[_f]=debounce$1(()=>{const oe=this.getBoundingClientRect();this[$updateSize](oe)},FALLBACK_SIZE_UPDATE_THRESHOLD_MS),this[_g]=debounce$1(oe=>{const ae=this.modelIsVisible;ae!==oe&&this.dispatchEvent(new CustomEvent("model-visibility",{detail:{visible:ae}}))},ANNOUNCE_MODEL_VISIBILITY_DEBOUNCE_THRESHOLD),this[_h]=null,this[_j]=null,this[_k]=new ProgressTracker,this[_l]=()=>{this[$statusElement].textContent=this[$status]},this[_m]=()=>{this[$statusElement].textContent=""},this[_o]=oe=>{this.dispatchEvent(new CustomEvent("error",{detail:{type:"webglcontextlost",sourceError:oe.sourceEvent}}))},this.attachShadow({mode:"open"});const ee=this.shadowRoot;makeTemplate(ee),this[$container]=ee.querySelector(".container"),this[$userInputElement]=ee.querySelector(".userInput"),this[$canvas]=ee.querySelector("canvas"),this[$statusElement]=ee.querySelector("#status"),this[$defaultAriaLabel]=this[$userInputElement].getAttribute("aria-label");let ne,ie;if(this.isConnected){const oe=this.getBoundingClientRect();ne=oe.width,ie=oe.height}else ne=UNSIZED_MEDIA_WIDTH,ie=UNSIZED_MEDIA_HEIGHT;this[$scene]=new ModelScene({canvas:this[$canvas],element:this,width:ne,height:ie}),Promise.resolve().then(()=>{this[$updateSize](this.getBoundingClientRect())}),HAS_RESIZE_OBSERVER&&(this[$resizeObserver]=new ResizeObserver(oe=>{if(!this[$renderer].isPresenting)for(let ae of oe)ae.target===this&&this[$updateSize](ae.contentRect)})),HAS_INTERSECTION_OBSERVER?this[$intersectionObserver]=new IntersectionObserver(oe=>{for(let ae of oe)if(ae.target===this){const ce=this.modelIsVisible;this[$isElementInViewport]=ae.isIntersecting,this[$announceModelVisibility](ce),this[$isElementInViewport]&&!this.loaded&&this[$updateSource]()}},{root:null,rootMargin:"0px",threshold:1e-5}):this[$isElementInViewport]=!0}static get is(){return"model-viewer"}static set modelCacheSize(ee){CachingGLTFLoader[$evictionPolicy].evictionThreshold=ee}static get modelCacheSize(){return CachingGLTFLoader[$evictionPolicy].evictionThreshold}static set minimumRenderScale(ee){ee>1&&console.warn("<model-viewer> minimumRenderScale has been clamped to a maximum value of 1."),ee<=0&&console.warn("<model-viewer> minimumRenderScale has been clamped to a minimum value of 0.25."),Renderer.singleton.minScale=ee}static get minimumRenderScale(){return Renderer.singleton.minScale}get loaded(){return this[$getLoaded]()}get[(_a$2=$isElementInViewport,_b$2=$loaded,_c=$loadedTime,_d=$status,_e=$clearModelTimeout,_f=$fallbackResizeHandler,_g=$announceModelVisibility,_h=$resizeObserver,_j=$intersectionObserver,_k=$progressTracker,$renderer)](){return Renderer.singleton}get modelIsVisible(){return this[$getModelIsVisible]()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),HAS_RESIZE_OBSERVER?this[$resizeObserver].observe(this):self.addEventListener("resize",this[$fallbackResizeHandler]),HAS_INTERSECTION_OBSERVER&&this[$intersectionObserver].observe(this),this.addEventListener("focus",this[$onFocus]),this.addEventListener("blur",this[$onBlur]);const ee=this[$renderer];ee.addEventListener("contextlost",this[$onContextLost]),ee.registerScene(this[$scene]),this[$clearModelTimeout]!=null&&(self.clearTimeout(this[$clearModelTimeout]),this[$clearModelTimeout]=null,this.requestUpdate("src",null))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),HAS_RESIZE_OBSERVER?this[$resizeObserver].unobserve(this):self.removeEventListener("resize",this[$fallbackResizeHandler]),HAS_INTERSECTION_OBSERVER&&this[$intersectionObserver].unobserve(this),this.removeEventListener("focus",this[$onFocus]),this.removeEventListener("blur",this[$onBlur]);const ee=this[$renderer];ee.removeEventListener("contextlost",this[$onContextLost]),ee.unregisterScene(this[$scene]),this[$clearModelTimeout]=self.setTimeout(()=>{this[$scene].dispose(),this[$clearModelTimeout]=null},CLEAR_MODEL_TIMEOUT_MS)}updated(ee){super.updated(ee),ee.has("src")&&(this.src==null?(this[$loaded]=!1,this[$loadedTime]=0,this[$scene].reset()):this.src!==this[$scene].url&&(this[$loaded]=!1,this[$loadedTime]=0,this[$updateSource]())),ee.has("alt")&&this[$userInputElement].setAttribute("aria-label",this[$ariaLabel]),ee.has("withCredentials")&&(CachingGLTFLoader.withCredentials=this.withCredentials,this[$renderer].textureUtils.withCredentials=this.withCredentials),ee.has("generateSchema")&&(this.generateSchema?this[$scene].updateSchema(this.src):this[$scene].updateSchema(null))}toDataURL(ee,ne){return this[$renderer].displayCanvas(this[$scene]).toDataURL(ee,ne)}async toBlob(ee){const ne=ee?ee.mimeType:void 0,ie=ee?ee.qualityArgument:void 0,oe=ee?ee.idealAspect:void 0,{width:ae,height:ce,idealAspect:le,aspect:ue}=this[$scene],{dpr:he,scaleFactor:fe}=this[$renderer];let me=ae*fe*he,ge=ce*fe*he,ve=0,ye=0;if(oe===!0)if(le>ue){const be=ge;ge=Math.round(me/le),ye=(be-ge)/2}else{const be=me;me=Math.round(ge*le),ve=(be-me)/2}blobCanvas.width=me,blobCanvas.height=ge;try{return new Promise(async(be,Ce)=>{if(blobCanvas.getContext("2d").drawImage(this[$renderer].displayCanvas(this[$scene]),ve,ye,me,ge,0,0,me,ge),blobCanvas.msToBlob&&(!ne||ne==="image/png"))return be(blobCanvas.msToBlob());if(!blobCanvas.toBlob)return be(await dataUrlToBlob(blobCanvas.toDataURL(ne,ie)));blobCanvas.toBlob(Se=>{if(!Se)return Ce(new Error("Unable to retrieve canvas blob"));be(Se)},ne,ie)})}finally{this[$updateSize]({width:ae,height:ce})}}registerRenderer(ee){this[$scene].externalRenderer=ee}unregisterRenderer(){this[$scene].externalRenderer=null}get[$ariaLabel](){return this[$altDefaulted]}get[$altDefaulted](){return this.alt==null||this.alt==="null"?this[$defaultAriaLabel]:this.alt}[$getLoaded](){return this[$loaded]}[$getModelIsVisible](){return this.loaded&&this[$isElementInViewport]}[$shouldAttemptPreload](){return!!this.src&&this[$isElementInViewport]}[$updateSize]({width:ee,height:ne}){ee===0||ne===0||(this[$container].style.width=`${ee}px`,this[$container].style.height=`${ne}px`,this[$onResize]({width:ee,height:ne}))}[$tick](ee,ne){}[$markLoaded](){this[$loaded]||(this[$loaded]=!0,this[$loadedTime]=performance.now())}[$needsRender](){this[$scene].queueRender()}[$onModelLoad](){}[$updateStatus](ee){this[$status]=ee;const ne=this.getRootNode();ne!=null&&ne.activeElement===this&&this[$statusElement].textContent!=ee&&(this[$statusElement].textContent=ee)}[(_l=$onFocus,_m=$onBlur,$onResize)](ee){this[$scene].setSize(ee.width,ee.height)}async[(_o=$onContextLost,$updateSource)](){const ee=this[$scene];if(this.loaded||!this[$shouldAttemptPreload]()||this.src===ee.url)return;this.generateSchema&&ee.updateSchema(this.src),this[$updateStatus]("Loading"),ee.stopAnimation();const ne=this[$progressTracker].beginActivity(),ie=this.src;try{const oe=ee.setSource(ie,ce=>ne(clamp$2(ce,0,1)*.95)),ae=this[$updateEnvironment]();await Promise.all([oe,ae]),this[$markLoaded](),this[$onModelLoad](),await new Promise(ce=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{this.dispatchEvent(new CustomEvent("load",{detail:{url:ie}})),ce()})})})}catch(oe){this.dispatchEvent(new CustomEvent("error",{detail:{type:"loadfailure",sourceError:oe}}))}finally{ne(1)}}}__decorate$4([e$4({type:String})],ModelViewerElementBase.prototype,"alt",void 0);__decorate$4([e$4({type:String})],ModelViewerElementBase.prototype,"src",void 0);__decorate$4([e$4({type:Boolean,attribute:"with-credentials"})],ModelViewerElementBase.prototype,"withCredentials",void 0);__decorate$4([e$4({type:Boolean,attribute:"generate-schema"})],ModelViewerElementBase.prototype,"generateSchema",void 0);/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$3=globalThis&&globalThis.__decorate||function(re,ee,ne,ie){var oe=arguments.length,ae=oe<3?ee:ie===null?ie=Object.getOwnPropertyDescriptor(ee,ne):ie,ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ae=Reflect.decorate(re,ee,ne,ie);else for(var le=re.length-1;le>=0;le--)(ce=re[le])&&(ae=(oe<3?ce(ae):oe>3?ce(ee,ne,ae):ce(ee,ne))||ae);return oe>3&&ae&&Object.defineProperty(ee,ne,ae),ae};const MILLISECONDS_PER_SECOND=1e3,$changeAnimation=Symbol("changeAnimation"),$paused=Symbol("paused"),DEFAULT_PLAY_OPTIONS={repetitions:1/0,pingpong:!1},AnimationMixin=re=>{var ee;class ne extends re{constructor(...oe){super(oe),this.autoplay=!1,this.animationName=void 0,this.animationCrossfadeDuration=300,this[ee]=!0,this[$scene].subscribeMixerEvent("loop",ae=>{const ce=ae.action._loopCount;this.dispatchEvent(new CustomEvent("loop",{detail:{count:ce}}))}),this[$scene].subscribeMixerEvent("finished",()=>{this[$paused]=!0,this.dispatchEvent(new CustomEvent("finished"))})}get availableAnimations(){return this.loaded?this[$scene].animationNames:[]}get duration(){return this[$scene].duration}get paused(){return this[$paused]}get currentTime(){return this[$scene].animationTime}set currentTime(oe){this[$scene].animationTime=oe,this[$needsRender]()}get timeScale(){return this[$scene].animationTimeScale}set timeScale(oe){this[$scene].animationTimeScale=oe}pause(){this[$paused]||(this[$paused]=!0,this.dispatchEvent(new CustomEvent("pause")))}play(oe){this.availableAnimations.length>0&&(this[$paused]=!1,this[$changeAnimation](oe),this.dispatchEvent(new CustomEvent("play")))}[(ee=$paused,$onModelLoad)](){super[$onModelLoad](),this[$paused]=!0,this.autoplay&&this.play()}[$tick](oe,ae){super[$tick](oe,ae),!(this[$paused]||!this[$getModelIsVisible]()&&!this[$renderer].isPresenting)&&(this[$scene].updateAnimation(ae/MILLISECONDS_PER_SECOND),this[$needsRender]())}updated(oe){super.updated(oe),oe.has("autoplay")&&this.autoplay&&this.play(),oe.has("animationName")&&this[$changeAnimation]()}[$changeAnimation](oe=DEFAULT_PLAY_OPTIONS){var ae;const ce=(ae=oe.repetitions)!==null&&ae!==void 0?ae:1/0,le=oe.pingpong?LoopPingPong:ce===1?LoopOnce:LoopRepeat;this[$scene].playAnimation(this.animationName,this.animationCrossfadeDuration/MILLISECONDS_PER_SECOND,le,ce),this[$paused]&&(this[$scene].updateAnimation(0),this[$needsRender]())}}return __decorate$3([e$4({type:Boolean})],ne.prototype,"autoplay",void 0),__decorate$3([e$4({type:String,attribute:"animation-name"})],ne.prototype,"animationName",void 0),__decorate$3([e$4({type:Number,attribute:"animation-crossfade-duration"})],ne.prototype,"animationCrossfadeDuration",void 0),ne};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $hotspotMap=Symbol("hotspotMap"),$mutationCallback=Symbol("mutationCallback"),$observer=Symbol("observer"),$addHotspot=Symbol("addHotspot"),$removeHotspot=Symbol("removeHotspot"),worldToModel=new Matrix4,AnnotationMixin=re=>{var ee,ne,ie;class oe extends re{constructor(){super(...arguments),this[ee]=new Map,this[ne]=ce=>{ce.forEach(le=>{(!(le instanceof MutationRecord)||le.type==="childList")&&(le.addedNodes.forEach(ue=>{this[$addHotspot](ue)}),le.removedNodes.forEach(ue=>{this[$removeHotspot](ue)}),this[$needsRender]())})},this[ie]=new MutationObserver(this[$mutationCallback])}connectedCallback(){super.connectedCallback();for(let le=0;le<this.children.length;++le)this[$addHotspot](this.children[le]);const{ShadyDOM:ce}=self;ce==null?this[$observer].observe(this,{childList:!0}):this[$observer]=ce.observeChildren(this,this[$mutationCallback])}disconnectedCallback(){super.disconnectedCallback();const{ShadyDOM:ce}=self;ce==null?this[$observer].disconnect():ce.unobserveChildren(this[$observer])}[(ee=$hotspotMap,ne=$mutationCallback,ie=$observer,$tick)](ce,le){super[$tick](ce,le);const ue=this[$scene],{annotationRenderer:he}=ue,fe=ue.getCamera();ue.shouldRender()&&(ue.updateSurfaceHotspots(),ue.updateHotspotsVisibility(fe.position),he.domElement.style.display="",he.render(ue,fe))}updateHotspot(ce){const le=this[$hotspotMap].get(ce.name);le!=null&&(le.updatePosition(ce.position),le.updateNormal(ce.normal),le.surface=ce.surface,this[$needsRender]())}queryHotspot(ce){const le=this[$hotspotMap].get(ce);if(le==null)return null;const ue=toVector3D(le.position),he=toVector3D(le.normal),fe=le.facingCamera,me=this[$scene],ge=me.getCamera(),ve=new Vector3;ve.setFromMatrixPosition(le.matrixWorld),ve.project(ge);const ye=me.width/2,be=me.height/2;ve.x=ve.x*ye+ye,ve.y=-(ve.y*be)+be;const Ce=toVector3D(new Vector3(ve.x,ve.y,ve.z));return!Number.isFinite(Ce.x)||!Number.isFinite(Ce.y)?null:{position:ue,normal:he,canvasPosition:Ce,facingCamera:fe}}positionAndNormalFromPoint(ce,le){const ue=this[$scene],he=ue.getNDC(ce,le),fe=ue.positionAndNormalFromPoint(he);if(fe==null)return null;worldToModel.copy(ue.target.matrixWorld).invert();const me=toVector3D(fe.position.applyMatrix4(worldToModel)),ge=toVector3D(fe.normal.transformDirection(worldToModel));let ve=null;return fe.uv!=null&&(ve=toVector2D(fe.uv)),{position:me,normal:ge,uv:ve}}surfaceFromPoint(ce,le){const ue=this[$scene],he=ue.getNDC(ce,le);return ue.surfaceFromPoint(he)}[$addHotspot](ce){if(!(ce instanceof HTMLElement&&ce.slot.indexOf("hotspot")===0))return;let le=this[$hotspotMap].get(ce.slot);le!=null?le.increment():(le=new Hotspot({name:ce.slot,position:ce.dataset.position,normal:ce.dataset.normal,surface:ce.dataset.surface}),this[$hotspotMap].set(ce.slot,le),this[$scene].addHotspot(le)),this[$scene].queueRender()}[$removeHotspot](ce){if(!(ce instanceof HTMLElement))return;const le=this[$hotspotMap].get(ce.slot);le&&(le.decrement()&&(this[$scene].removeHotspot(le),this[$hotspotMap].delete(ce.slot)),this[$scene].queueRender())}}return oe};/*!
fflate - fast JavaScript compression/decompression
<https://101arrowz.github.io/fflate>
Licensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE
version 0.6.9
*/var durl=function(re){return URL.createObjectURL(new Blob([re],{type:"text/javascript"}))};try{URL.revokeObjectURL(durl(""))}catch{durl=function(ee){return"data:application/javascript;charset=UTF-8,"+encodeURI(ee)}}var u8$1=Uint8Array,u16$1=Uint16Array,u32$1=Uint32Array,fleb$1=new u8$1([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb$1=new u8$1([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim$1=new u8$1([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb$1=function(re,ee){for(var ne=new u16$1(31),ie=0;ie<31;++ie)ne[ie]=ee+=1<<re[ie-1];for(var oe=new u32$1(ne[30]),ie=1;ie<30;++ie)for(var ae=ne[ie];ae<ne[ie+1];++ae)oe[ae]=ae-ne[ie]<<5|ie;return[ne,oe]},_a$1=freb$1(fleb$1,2),fl$1=_a$1[0],revfl$1=_a$1[1];fl$1[28]=258,revfl$1[258]=28;var _b$1=freb$1(fdeb$1,0),revfd=_b$1[1],rev$1=new u16$1(32768);for(var i$2=0;i$2<32768;++i$2){var x$2=(i$2&43690)>>>1|(i$2&21845)<<1;x$2=(x$2&52428)>>>2|(x$2&13107)<<2,x$2=(x$2&61680)>>>4|(x$2&3855)<<4,rev$1[i$2]=((x$2&65280)>>>8|(x$2&255)<<8)>>>1}var hMap$1=function(re,ee,ne){for(var ie=re.length,oe=0,ae=new u16$1(ee);oe<ie;++oe)++ae[re[oe]-1];var ce=new u16$1(ee);for(oe=0;oe<ee;++oe)ce[oe]=ce[oe-1]+ae[oe-1]<<1;var le;if(ne){le=new u16$1(1<<ee);var ue=15-ee;for(oe=0;oe<ie;++oe)if(re[oe])for(var he=oe<<4|re[oe],fe=ee-re[oe],me=ce[re[oe]-1]++<<fe,ge=me|(1<<fe)-1;me<=ge;++me)le[rev$1[me]>>>ue]=he}else for(le=new u16$1(ie),oe=0;oe<ie;++oe)re[oe]&&(le[oe]=rev$1[ce[re[oe]-1]++]>>>15-re[oe]);return le},flt$1=new u8$1(288);for(var i$2=0;i$2<144;++i$2)flt$1[i$2]=8;for(var i$2=144;i$2<256;++i$2)flt$1[i$2]=9;for(var i$2=256;i$2<280;++i$2)flt$1[i$2]=7;for(var i$2=280;i$2<288;++i$2)flt$1[i$2]=8;var fdt$1=new u8$1(32);for(var i$2=0;i$2<32;++i$2)fdt$1[i$2]=5;var flm=hMap$1(flt$1,9,0),fdm=hMap$1(fdt$1,5,0),shft$1=function(re){return(re/8|0)+(re&7&&1)},slc$1=function(re,ee,ne){(ee==null||ee<0)&&(ee=0),(ne==null||ne>re.length)&&(ne=re.length);var ie=new(re instanceof u16$1?u16$1:re instanceof u32$1?u32$1:u8$1)(ne-ee);return ie.set(re.subarray(ee,ne)),ie},wbits=function(re,ee,ne){ne<<=ee&7;var ie=ee/8|0;re[ie]|=ne,re[ie+1]|=ne>>>8},wbits16=function(re,ee,ne){ne<<=ee&7;var ie=ee/8|0;re[ie]|=ne,re[ie+1]|=ne>>>8,re[ie+2]|=ne>>>16},hTree=function(re,ee){for(var ne=[],ie=0;ie<re.length;++ie)re[ie]&&ne.push({s:ie,f:re[ie]});var oe=ne.length,ae=ne.slice();if(!oe)return[et$1,0];if(oe==1){var ce=new u8$1(ne[0].s+1);return ce[ne[0].s]=1,[ce,1]}ne.sort(function(Ie,ke){return Ie.f-ke.f}),ne.push({s:-1,f:25001});var le=ne[0],ue=ne[1],he=0,fe=1,me=2;for(ne[0]={s:-1,f:le.f+ue.f,l:le,r:ue};fe!=oe-1;)le=ne[ne[he].f<ne[me].f?he++:me++],ue=ne[he!=fe&&ne[he].f<ne[me].f?he++:me++],ne[fe++]={s:-1,f:le.f+ue.f,l:le,r:ue};for(var ge=ae[0].s,ie=1;ie<oe;++ie)ae[ie].s>ge&&(ge=ae[ie].s);var ve=new u16$1(ge+1),ye=ln(ne[fe-1],ve,0);if(ye>ee){var ie=0,be=0,Ce=ye-ee,Se=1<<Ce;for(ae.sort(function(ke,De){return ve[De.s]-ve[ke.s]||ke.f-De.f});ie<oe;++ie){var $e=ae[ie].s;if(ve[$e]>ee)be+=Se-(1<<ye-ve[$e]),ve[$e]=ee;else break}for(be>>>=Ce;be>0;){var Te=ae[ie].s;ve[Te]<ee?be-=1<<ee-ve[Te]++-1:++ie}for(;ie>=0&&be;--ie){var Ne=ae[ie].s;ve[Ne]==ee&&(--ve[Ne],++be)}ye=ee}return[new u8$1(ve),ye]},ln=function(re,ee,ne){return re.s==-1?Math.max(ln(re.l,ee,ne+1),ln(re.r,ee,ne+1)):ee[re.s]=ne},lc=function(re){for(var ee=re.length;ee&&!re[--ee];);for(var ne=new u16$1(++ee),ie=0,oe=re[0],ae=1,ce=function(ue){ne[ie++]=ue},le=1;le<=ee;++le)if(re[le]==oe&&le!=ee)++ae;else{if(!oe&&ae>2){for(;ae>138;ae-=138)ce(32754);ae>2&&(ce(ae>10?ae-11<<5|28690:ae-3<<5|12305),ae=0)}else if(ae>3){for(ce(oe),--ae;ae>6;ae-=6)ce(8304);ae>2&&(ce(ae-3<<5|8208),ae=0)}for(;ae--;)ce(oe);ae=1,oe=re[le]}return[ne.subarray(0,ie),ee]},clen=function(re,ee){for(var ne=0,ie=0;ie<ee.length;++ie)ne+=re[ie]*ee[ie];return ne},wfblk=function(re,ee,ne){var ie=ne.length,oe=shft$1(ee+2);re[oe]=ie&255,re[oe+1]=ie>>>8,re[oe+2]=re[oe]^255,re[oe+3]=re[oe+1]^255;for(var ae=0;ae<ie;++ae)re[oe+ae+4]=ne[ae];return(oe+4+ie)*8},wblk=function(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe){wbits(ee,fe++,ne),++oe[256];for(var me=hTree(oe,15),ge=me[0],ve=me[1],ye=hTree(ae,15),be=ye[0],Ce=ye[1],Se=lc(ge),$e=Se[0],Te=Se[1],Ne=lc(be),Ie=Ne[0],ke=Ne[1],De=new u16$1(19),Oe=0;Oe<$e.length;++Oe)De[$e[Oe]&31]++;for(var Oe=0;Oe<Ie.length;++Oe)De[Ie[Oe]&31]++;for(var Be=hTree(De,7),Me=Be[0],Le=Be[1],je=19;je>4&&!Me[clim$1[je-1]];--je);var ze=he+5<<3,Ve=clen(oe,flt$1)+clen(ae,fdt$1)+ce,He=clen(oe,ge)+clen(ae,be)+ce+14+3*je+clen(De,Me)+(2*De[16]+3*De[17]+7*De[18]);if(ze<=Ve&&ze<=He)return wfblk(ee,fe,re.subarray(ue,ue+he));var We,Ye,Ue,Ke;if(wbits(ee,fe,1+(He<Ve)),fe+=2,He<Ve){We=hMap$1(ge,ve,0),Ye=ge,Ue=hMap$1(be,Ce,0),Ke=be;var Xe=hMap$1(Me,Le,0);wbits(ee,fe,Te-257),wbits(ee,fe+5,ke-1),wbits(ee,fe+10,je-4),fe+=14;for(var Oe=0;Oe<je;++Oe)wbits(ee,fe+3*Oe,Me[clim$1[Oe]]);fe+=3*je;for(var Vt=[$e,Ie],Wt=0;Wt<2;++Wt)for(var Kt=Vt[Wt],Oe=0;Oe<Kt.length;++Oe){var tn=Kt[Oe]&31;wbits(ee,fe,Xe[tn]),fe+=Me[tn],tn>15&&(wbits(ee,fe,Kt[Oe]>>>5&127),fe+=Kt[Oe]>>>12)}}else We=flm,Ye=flt$1,Ue=fdm,Ke=fdt$1;for(var Oe=0;Oe<le;++Oe)if(ie[Oe]>255){var tn=ie[Oe]>>>18&31;wbits16(ee,fe,We[tn+257]),fe+=Ye[tn+257],tn>7&&(wbits(ee,fe,ie[Oe]>>>23&31),fe+=fleb$1[tn]);var Xt=ie[Oe]&31;wbits16(ee,fe,Ue[Xt]),fe+=Ke[Xt],Xt>3&&(wbits16(ee,fe,ie[Oe]>>>5&8191),fe+=fdeb$1[Xt])}else wbits16(ee,fe,We[ie[Oe]]),fe+=Ye[ie[Oe]];return wbits16(ee,fe,We[256]),fe+Ye[256]},deo=new u32$1([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8$1(0),dflt=function(re,ee,ne,ie,oe,ae){var ce=re.length,le=new u8$1(ie+ce+5*(1+Math.ceil(ce/7e3))+oe),ue=le.subarray(ie,le.length-oe),he=0;if(!ee||ce<8)for(var fe=0;fe<=ce;fe+=65535){var me=fe+65535;me<ce?he=wfblk(ue,he,re.subarray(fe,me)):(ue[fe]=ae,he=wfblk(ue,he,re.subarray(fe,ce)))}else{for(var ge=deo[ee-1],ve=ge>>>13,ye=ge&8191,be=(1<<ne)-1,Ce=new u16$1(32768),Se=new u16$1(be+1),$e=Math.ceil(ne/3),Te=2*$e,Ne=function(Dn){return(re[Dn]^re[Dn+1]<<$e^re[Dn+2]<<Te)&be},Ie=new u32$1(25e3),ke=new u16$1(288),De=new u16$1(32),Oe=0,Be=0,fe=0,Me=0,Le=0,je=0;fe<ce;++fe){var ze=Ne(fe),Ve=fe&32767,He=Se[ze];if(Ce[Ve]=He,Se[ze]=Ve,Le<=fe){var We=ce-fe;if((Oe>7e3||Me>24576)&&We>423){he=wblk(re,ue,0,Ie,ke,De,Be,Me,je,fe-je,he),Me=Oe=Be=0,je=fe;for(var Ye=0;Ye<286;++Ye)ke[Ye]=0;for(var Ye=0;Ye<30;++Ye)De[Ye]=0}var Ue=2,Ke=0,Xe=ye,Vt=Ve-He&32767;if(We>2&&ze==Ne(fe-Vt))for(var Wt=Math.min(ve,We)-1,Kt=Math.min(32767,fe),tn=Math.min(258,We);Vt<=Kt&&--Xe&&Ve!=He;){if(re[fe+Ue]==re[fe+Ue-Vt]){for(var Xt=0;Xt<tn&&re[fe+Xt]==re[fe+Xt-Vt];++Xt);if(Xt>Ue){if(Ue=Xt,Ke=Vt,Xt>Wt)break;for(var dn=Math.min(Vt,Xt-2),nn=0,Ye=0;Ye<dn;++Ye){var rn=fe-Vt+Ye+32768&32767,vn=Ce[rn],yn=rn-vn+32768&32767;yn>nn&&(nn=yn,He=rn)}}}Ve=He,He=Ce[Ve],Vt+=Ve-He+32768&32767}if(Ke){Ie[Me++]=268435456|revfl$1[Ue]<<18|revfd[Ke];var Sn=revfl$1[Ue]&31,kn=revfd[Ke]&31;Be+=fleb$1[Sn]+fdeb$1[kn],++ke[257+Sn],++De[kn],Le=fe+Ue,++Oe}else Ie[Me++]=re[fe],++ke[re[fe]]}}he=wblk(re,ue,ae,Ie,ke,De,Be,Me,je,fe-je,he),!ae&&he&7&&(he=wfblk(ue,he+1,et$1))}return slc$1(le,0,ie+shft$1(he)+oe)},crct=function(){for(var re=new u32$1(256),ee=0;ee<256;++ee){for(var ne=ee,ie=9;--ie;)ne=(ne&1&&3988292384)^ne>>>1;re[ee]=ne}return re}(),crc=function(){var re=-1;return{p:function(ee){for(var ne=re,ie=0;ie<ee.length;++ie)ne=crct[ne&255^ee[ie]]^ne>>>8;re=ne},d:function(){return~re}}},dopt=function(re,ee,ne,ie,oe){return dflt(re,ee.level==null?6:ee.level,ee.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(re.length)))*1.5):12+ee.mem,ne,ie,!oe)},mrg=function(re,ee){var ne={};for(var ie in re)ne[ie]=re[ie];for(var ie in ee)ne[ie]=ee[ie];return ne},wbytes=function(re,ee,ne){for(;ne;++ee)re[ee]=ne,ne>>>=8};function deflateSync(re,ee){return dopt(re,ee||{},0,0)}var fltn=function(re,ee,ne,ie){for(var oe in re){var ae=re[oe],ce=ee+oe;ae instanceof u8$1?ne[ce]=[ae,ie]:Array.isArray(ae)?ne[ce]=[ae[0],mrg(ie,ae[1])]:fltn(ae,ce+"/",ne,ie)}},te=typeof TextEncoder<"u"&&new TextEncoder,td$1=typeof TextDecoder<"u"&&new TextDecoder,tds$1=0;try{td$1.decode(et$1,{stream:!0}),tds$1=1}catch{}function strToU8(re,ee){if(ee){for(var ne=new u8$1(re.length),ie=0;ie<re.length;++ie)ne[ie]=re.charCodeAt(ie);return ne}if(te)return te.encode(re);for(var oe=re.length,ae=new u8$1(re.length+(re.length>>1)),ce=0,le=function(fe){ae[ce++]=fe},ie=0;ie<oe;++ie){if(ce+5>ae.length){var ue=new u8$1(ce+8+(oe-ie<<1));ue.set(ae),ae=ue}var he=re.charCodeAt(ie);he<128||ee?le(he):he<2048?(le(192|he>>6),le(128|he&63)):he>55295&&he<57344?(he=65536+(he&1047552)|re.charCodeAt(++ie)&1023,le(240|he>>18),le(128|he>>12&63),le(128|he>>6&63),le(128|he&63)):(le(224|he>>12),le(128|he>>6&63),le(128|he&63))}return slc$1(ae,0,ce)}var exfl=function(re){var ee=0;if(re)for(var ne in re){var ie=re[ne].length;if(ie>65535)throw"extra field too long";ee+=ie+4}return ee},wzh=function(re,ee,ne,ie,oe,ae,ce,le){var ue=ie.length,he=ne.extra,fe=le&&le.length,me=exfl(he);wbytes(re,ee,ce!=null?33639248:67324752),ee+=4,ce!=null&&(re[ee++]=20,re[ee++]=ne.os),re[ee]=20,ee+=2,re[ee++]=ne.flag<<1|(ae==null&&8),re[ee++]=oe&&8,re[ee++]=ne.compression&255,re[ee++]=ne.compression>>8;var ge=new Date(ne.mtime==null?Date.now():ne.mtime),ve=ge.getFullYear()-1980;if(ve<0||ve>119)throw"date not in range 1980-2099";if(wbytes(re,ee,ve<<25|ge.getMonth()+1<<21|ge.getDate()<<16|ge.getHours()<<11|ge.getMinutes()<<5|ge.getSeconds()>>>1),ee+=4,ae!=null&&(wbytes(re,ee,ne.crc),wbytes(re,ee+4,ae),wbytes(re,ee+8,ne.size)),wbytes(re,ee+12,ue),wbytes(re,ee+14,me),ee+=16,ce!=null&&(wbytes(re,ee,fe),wbytes(re,ee+6,ne.attrs),wbytes(re,ee+10,ce),ee+=14),re.set(ie,ee),ee+=ue,me)for(var ye in he){var be=he[ye],Ce=be.length;wbytes(re,ee,+ye),wbytes(re,ee+2,Ce),re.set(be,ee+4),ee+=4+Ce}return fe&&(re.set(le,ee),ee+=fe),ee},wzf=function(re,ee,ne,ie,oe){wbytes(re,ee,101010256),wbytes(re,ee+8,ne),wbytes(re,ee+10,ne),wbytes(re,ee+12,ie),wbytes(re,ee+16,oe)};function zipSync(re,ee){ee||(ee={});var ne={},ie=[];fltn(re,"",ne,ee);var oe=0,ae=0;for(var ce in ne){var le=ne[ce],ue=le[0],he=le[1],fe=he.level==0?0:8,me=strToU8(ce),ge=me.length,ve=he.comment,ye=ve&&strToU8(ve),be=ye&&ye.length,Ce=exfl(he.extra);if(ge>65535)throw"filename too long";var Se=fe?deflateSync(ue,he):ue,$e=Se.length,Te=crc();Te.p(ue),ie.push(mrg(he,{size:ue.length,crc:Te.d(),c:Se,f:me,m:ye,u:ge!=ce.length||ye&&ve.length!=be,o:oe,compression:fe})),oe+=30+ge+Ce+$e,ae+=76+2*(ge+Ce)+(be||0)+$e}for(var Ne=new u8$1(ae+22),Ie=oe,ke=ae-oe,De=0;De<ie.length;++De){var me=ie[De];wzh(Ne,me.o,me,me.f,me.u,me.c.length);var Oe=30+me.f.length+exfl(me.extra);Ne.set(me.c,me.o+Oe),wzh(Ne,oe,me,me.f,me.u,me.c.length,me.o,me.m),oe+=16+Oe+(me.m?me.m.length:0)}return wzf(Ne,oe,ie.length,ke,Ie),Ne}class USDZExporter{async parse(ee,ne={}){ne=Object.assign({ar:{anchoring:{type:"plane"},planeAnchoring:{alignment:"horizontal"}}},ne);const ie={},oe="model.usda";ie[oe]=null;let ae=buildHeader();ae+=buildSceneStart(ne);const ce={},le={};ee.traverseVisible(he=>{if(he.isMesh){const fe=he.geometry,me=he.material;if(me.isMeshStandardMaterial){const ge="geometries/Geometry_"+fe.id+".usd";if(!(ge in ie)){const ve=buildMeshObject(fe);ie[ge]=buildUSDFileAsString(ve)}me.uuid in ce||(ce[me.uuid]=me),ae+=buildXform(he,fe,me)}else console.warn("THREE.USDZExporter: Unsupported material type (USDZ only supports MeshStandardMaterial)",he)}else he.isCamera&&(ae+=buildCamera(he))}),ae+=buildSceneEnd(),ae+=buildMaterials(ce,le),ie[oe]=strToU8(ae),ae=null;for(const he in le){const fe=le[he],me=he.split("_")[1],ge=fe.format===1023,ve=imageToCanvas(fe.image,me),ye=await new Promise(be=>ve.toBlob(be,ge?"image/png":"image/jpeg",1));ie[`textures/Texture_${he}.${ge?"png":"jpg"}`]=new Uint8Array(await ye.arrayBuffer())}let ue=0;for(const he in ie){const fe=ie[he],me=34+he.length;ue+=me;const ge=ue&63;if(ge!==4){const ve=64-ge,ye=new Uint8Array(ve);ie[he]=[fe,{extra:{12345:ye}}]}ue=fe.length}return zipSync(ie,{level:0})}}function imageToCanvas(re,ee){if(typeof HTMLImageElement<"u"&&re instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&re instanceof HTMLCanvasElement||typeof OffscreenCanvas<"u"&&re instanceof OffscreenCanvas||typeof ImageBitmap<"u"&&re instanceof ImageBitmap){const ne=1024/Math.max(re.width,re.height),ie=document.createElement("canvas");ie.width=re.width*Math.min(1,ne),ie.height=re.height*Math.min(1,ne);const oe=ie.getContext("2d");if(oe.drawImage(re,0,0,ie.width,ie.height),ee!==void 0){const ae=parseInt(ee,16),ce=(ae>>16&255)/255,le=(ae>>8&255)/255,ue=(ae&255)/255,he=oe.getImageData(0,0,ie.width,ie.height),fe=he.data;for(let me=0;me<fe.length;me+=4)fe[me+0]=fe[me+0]*ce,fe[me+1]=fe[me+1]*le,fe[me+2]=fe[me+2]*ue;oe.putImageData(he,0,0)}return ie}else throw new Error("THREE.USDZExporter: No valid image data found. Unable to process texture.")}const PRECISION=7;function buildHeader(){return`#usda 1.0
(
    customLayerData = {
        string creator = "Three.js USDZExporter"
    }
    metersPerUnit = 1
    upAxis = "Y"
)

`}function buildSceneStart(re){return`def Xform "Root"
{
    def Scope "Scenes" (
        kind = "sceneLibrary"
    )
    {
        def Xform "Scene" (
            customData = {
                bool preliminary_collidesWithEnvironment = 0
                string sceneName = "Scene"
            }
            sceneName = "Scene"
        )
        {
        token preliminary:anchoring:type = "${re.ar.anchoring.type}"
        token preliminary:planeAnchoring:alignment = "${re.ar.planeAnchoring.alignment}"

`}function buildSceneEnd(){return`
        }
    }
}

`}function buildUSDFileAsString(re){let ee=buildHeader();return ee+=re,strToU8(ee)}function buildXform(re,ee,ne){const ie="Object_"+re.id,oe=buildMatrix(re.matrixWorld);return re.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",re),`def Xform "${ie}" (
    prepend references = @./geometries/Geometry_${ee.id}.usd@</Geometry>
)
{
    matrix4d xformOp:transform = ${oe}
    uniform token[] xformOpOrder = ["xformOp:transform"]

    rel material:binding = </Materials/Material_${ne.id}>
}

`}function buildMatrix(re){const ee=re.elements;return`( ${buildMatrixRow(ee,0)}, ${buildMatrixRow(ee,4)}, ${buildMatrixRow(ee,8)}, ${buildMatrixRow(ee,12)} )`}function buildMatrixRow(re,ee){return`(${re[ee+0]}, ${re[ee+1]}, ${re[ee+2]}, ${re[ee+3]})`}function buildMeshObject(re){return`
def "Geometry"
{
  ${buildMesh(re)}
}
`}function buildMesh(re){const ee="Geometry",ne=re.attributes,ie=ne.position.count;return`
    def Mesh "${ee}"
    {
        int[] faceVertexCounts = [${buildMeshVertexCount(re)}]
        int[] faceVertexIndices = [${buildMeshVertexIndices(re)}]
        normal3f[] normals = [${buildVector3Array(ne.normal,ie)}] (
            interpolation = "vertex"
        )
        point3f[] points = [${buildVector3Array(ne.position,ie)}]
        float2[] primvars:st = [${buildVector2Array(ne.uv,ie)}] (
            interpolation = "vertex"
        )
        uniform token subdivisionScheme = "none"
    }
`}function buildMeshVertexCount(re){const ee=re.index!==null?re.index.count:re.attributes.position.count;return Array(ee/3).fill(3).join(", ")}function buildMeshVertexIndices(re){const ee=re.index,ne=[];if(ee!==null)for(let ie=0;ie<ee.count;ie++)ne.push(ee.getX(ie));else{const ie=re.attributes.position.count;for(let oe=0;oe<ie;oe++)ne.push(oe)}return ne.join(", ")}function buildVector3Array(re,ee){if(re===void 0)return console.warn("USDZExporter: Normals missing."),Array(ee).fill("(0, 0, 0)").join(", ");const ne=[];for(let ie=0;ie<re.count;ie++){const oe=re.getX(ie),ae=re.getY(ie),ce=re.getZ(ie);ne.push(`(${oe.toPrecision(PRECISION)}, ${ae.toPrecision(PRECISION)}, ${ce.toPrecision(PRECISION)})`)}return ne.join(", ")}function buildVector2Array(re,ee){if(re===void 0)return console.warn("USDZExporter: UVs missing."),Array(ee).fill("(0, 0)").join(", ");const ne=[];for(let ie=0;ie<re.count;ie++){const oe=re.getX(ie),ae=re.getY(ie);ne.push(`(${oe.toPrecision(PRECISION)}, ${1-ae.toPrecision(PRECISION)})`)}return ne.join(", ")}function buildMaterials(re,ee){const ne=[];for(const ie in re){const oe=re[ie];ne.push(buildMaterial(oe,ee))}return`def "Materials"
{
${ne.join("")}
}

`}function buildMaterial(re,ee){const ne="            ",ie=[],oe=[];function ae(ce,le,ue){const he=ce.id+(ue?"_"+ue.getHexString():""),fe=ce.format===1023;return ee[he]=ce,`
        def Shader "Transform2d_${le}" (
            sdrMetadata = {
                string role = "math"
            }
        )
        {
            uniform token info:id = "UsdTransform2d"
            float2 inputs:in.connect = </Materials/Material_${re.id}/uvReader_st.outputs:result>
            float2 inputs:scale = ${buildVector2(ce.repeat)}
            float2 inputs:translation = ${buildVector2(ce.offset)}
            float2 outputs:result
        }

        def Shader "Texture_${ce.id}_${le}"
        {
            uniform token info:id = "UsdUVTexture"
            asset inputs:file = @textures/Texture_${he}.${fe?"png":"jpg"}@
            float2 inputs:st.connect = </Materials/Material_${re.id}/Transform2d_${le}.outputs:result>
            token inputs:wrapS = "repeat"
            token inputs:wrapT = "repeat"
            float outputs:r
            float outputs:g
            float outputs:b
            float3 outputs:rgb
            ${re.transparent||re.alphaTest>0?"float outputs:a":""}
        }`}return re.side===DoubleSide&&console.warn("THREE.USDZExporter: USDZ does not support double sided materials",re),re.map!==null?(ie.push(`${ne}color3f inputs:diffuseColor.connect = </Materials/Material_${re.id}/Texture_${re.map.id}_diffuse.outputs:rgb>`),re.transparent?ie.push(`${ne}float inputs:opacity.connect = </Materials/Material_${re.id}/Texture_${re.map.id}_diffuse.outputs:a>`):re.alphaTest>0&&(ie.push(`${ne}float inputs:opacity.connect = </Materials/Material_${re.id}/Texture_${re.map.id}_diffuse.outputs:a>`),ie.push(`${ne}float inputs:opacityThreshold = ${re.alphaTest}`)),oe.push(ae(re.map,"diffuse",re.color))):ie.push(`${ne}color3f inputs:diffuseColor = ${buildColor(re.color)}`),re.emissiveMap!==null?(ie.push(`${ne}color3f inputs:emissiveColor.connect = </Materials/Material_${re.id}/Texture_${re.emissiveMap.id}_emissive.outputs:rgb>`),oe.push(ae(re.emissiveMap,"emissive"))):re.emissive.getHex()>0&&ie.push(`${ne}color3f inputs:emissiveColor = ${buildColor(re.emissive)}`),re.normalMap!==null&&(ie.push(`${ne}normal3f inputs:normal.connect = </Materials/Material_${re.id}/Texture_${re.normalMap.id}_normal.outputs:rgb>`),oe.push(ae(re.normalMap,"normal"))),re.aoMap!==null&&(ie.push(`${ne}float inputs:occlusion.connect = </Materials/Material_${re.id}/Texture_${re.aoMap.id}_occlusion.outputs:r>`),oe.push(ae(re.aoMap,"occlusion"))),re.roughnessMap!==null&&re.roughness===1?(ie.push(`${ne}float inputs:roughness.connect = </Materials/Material_${re.id}/Texture_${re.roughnessMap.id}_roughness.outputs:g>`),oe.push(ae(re.roughnessMap,"roughness"))):ie.push(`${ne}float inputs:roughness = ${re.roughness}`),re.metalnessMap!==null&&re.metalness===1?(ie.push(`${ne}float inputs:metallic.connect = </Materials/Material_${re.id}/Texture_${re.metalnessMap.id}_metallic.outputs:b>`),oe.push(ae(re.metalnessMap,"metallic"))):ie.push(`${ne}float inputs:metallic = ${re.metalness}`),re.alphaMap!==null?(ie.push(`${ne}float inputs:opacity.connect = </Materials/Material_${re.id}/Texture_${re.alphaMap.id}_opacity.outputs:r>`),ie.push(`${ne}float inputs:opacityThreshold = 0.0001`),oe.push(ae(re.alphaMap,"opacity"))):ie.push(`${ne}float inputs:opacity = ${re.opacity}`),re.isMeshPhysicalMaterial&&(ie.push(`${ne}float inputs:clearcoat = ${re.clearcoat}`),ie.push(`${ne}float inputs:clearcoatRoughness = ${re.clearcoatRoughness}`),ie.push(`${ne}float inputs:ior = ${re.ior}`)),`
    def Material "Material_${re.id}"
    {
        def Shader "PreviewSurface"
        {
            uniform token info:id = "UsdPreviewSurface"
${ie.join(`
`)}
            int inputs:useSpecularWorkflow = 0
            token outputs:surface
        }

        token outputs:surface.connect = </Materials/Material_${re.id}/PreviewSurface.outputs:surface>
        token inputs:frame:stPrimvarName = "st"

        def Shader "uvReader_st"
        {
            uniform token info:id = "UsdPrimvarReader_float2"
            token inputs:varname.connect = </Materials/Material_${re.id}.inputs:frame:stPrimvarName>
            float2 inputs:fallback = (0.0, 0.0)
            float2 outputs:result
        }

${oe.join(`
`)}

    }
`}function buildColor(re){return`(${re.r}, ${re.g}, ${re.b})`}function buildVector2(re){return`(${re.x}, ${re.y})`}function buildCamera(re){const ee=re.name?re.name:"Camera_"+re.id,ne=buildMatrix(re.matrixWorld);return re.matrixWorld.determinant()<0&&console.warn("THREE.USDZExporter: USDZ does not support negative scales",re),re.isOrthographicCamera?`def Camera "${ee}"
		{
			matrix4d xformOp:transform = ${ne}
			uniform token[] xformOpOrder = ["xformOp:transform"]
	
			float2 clippingRange = (${re.near.toPrecision(PRECISION)}, ${re.far.toPrecision(PRECISION)})
			float horizontalAperture = ${((Math.abs(re.left)+Math.abs(re.right))*10).toPrecision(PRECISION)}
			float verticalAperture = ${((Math.abs(re.top)+Math.abs(re.bottom))*10).toPrecision(PRECISION)}
			token projection = "orthographic"
		}
	
	`:`def Camera "${ee}"
		{
			matrix4d xformOp:transform = ${ne}
			uniform token[] xformOpOrder = ["xformOp:transform"]
	
			float2 clippingRange = (${re.near.toPrecision(PRECISION)}, ${re.far.toPrecision(PRECISION)})
			float focalLength = ${re.getFocalLength().toPrecision(PRECISION)}
			float focusDistance = ${re.focus.toPrecision(PRECISION)}
			float horizontalAperture = ${re.getFilmWidth().toPrecision(PRECISION)}
			token projection = "perspective"
			float verticalAperture = ${re.getFilmHeight().toPrecision(PRECISION)}
		}
	
	`}/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const enumerationDeserializer=re=>ee=>{try{const ne=parseExpressions(ee),ie=(ne.length?ne[0].terms:[]).filter(ae=>ae&&ae.type==="ident").map(ae=>ae.value).filter(ae=>re.indexOf(ae)>-1),oe=new Set;for(const ae of ie)oe.add(ae);return oe}catch{}return new Set};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$2=globalThis&&globalThis.__decorate||function(re,ee,ne,ie){var oe=arguments.length,ae=oe<3?ee:ie===null?ie=Object.getOwnPropertyDescriptor(ee,ne):ie,ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ae=Reflect.decorate(re,ee,ne,ie);else for(var le=re.length-1;le>=0;le--)(ce=re[le])&&(ae=(oe<3?ce(ae):oe>3?ce(ee,ne,ae):ce(ee,ne))||ae);return oe>3&&ae&&Object.defineProperty(ee,ne,ae),ae};let isWebXRBlocked=!1,isSceneViewerBlocked=!1;const noArViewerSigil="#model-viewer-no-ar-fallback",deserializeARModes=enumerationDeserializer(["quick-look","scene-viewer","webxr","none"]),DEFAULT_AR_MODES="webxr scene-viewer quick-look",ARMode={QUICK_LOOK:"quick-look",SCENE_VIEWER:"scene-viewer",WEBXR:"webxr",NONE:"none"},$arButtonContainer=Symbol("arButtonContainer"),$enterARWithWebXR=Symbol("enterARWithWebXR"),$openSceneViewer=Symbol("openSceneViewer"),$openIOSARQuickLook=Symbol("openIOSARQuickLook"),$canActivateAR=Symbol("canActivateAR"),$arMode=Symbol("arMode"),$arModes=Symbol("arModes"),$arAnchor=Symbol("arAnchor"),$preload=Symbol("preload"),$onARButtonContainerClick=Symbol("onARButtonContainerClick"),$onARStatus=Symbol("onARStatus"),$onARTracking=Symbol("onARTracking"),$onARTap=Symbol("onARTap"),$selectARMode=Symbol("selectARMode"),$triggerLoad=Symbol("triggerLoad"),ARMixin=re=>{var ee,ne,ie,oe,ae,ce,le,ue,he,fe;class me extends re{constructor(){super(...arguments),this.ar=!1,this.arScale="auto",this.arPlacement="floor",this.arModes=DEFAULT_AR_MODES,this.iosSrc=null,this.xrEnvironment=!1,this[ee]=!1,this[ne]=this.shadowRoot.querySelector(".ar-button"),this[ie]=document.createElement("a"),this[oe]=new Set,this[ae]=ARMode.NONE,this[ce]=!1,this[le]=ve=>{ve.preventDefault(),this.activateAR()},this[ue]=({status:ve})=>{(ve===ARStatus.NOT_PRESENTING||this[$renderer].arRenderer.presentedScene===this[$scene])&&(this.setAttribute("ar-status",ve),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:ve}})),ve===ARStatus.NOT_PRESENTING?this.removeAttribute("ar-tracking"):ve===ARStatus.SESSION_STARTED&&this.setAttribute("ar-tracking",ARTracking.TRACKING))},this[he]=({status:ve})=>{this.setAttribute("ar-tracking",ve),this.dispatchEvent(new CustomEvent("ar-tracking",{detail:{status:ve}}))},this[fe]=ve=>{ve.data=="_apple_ar_quicklook_button_tapped"&&this.dispatchEvent(new CustomEvent("quick-look-button-tapped"))}}get canActivateAR(){return this[$arMode]!==ARMode.NONE}connectedCallback(){super.connectedCallback(),this[$renderer].arRenderer.addEventListener("status",this[$onARStatus]),this.setAttribute("ar-status",ARStatus.NOT_PRESENTING),this[$renderer].arRenderer.addEventListener("tracking",this[$onARTracking]),this[$arAnchor].addEventListener("message",this[$onARTap])}disconnectedCallback(){super.disconnectedCallback(),this[$renderer].arRenderer.removeEventListener("status",this[$onARStatus]),this[$renderer].arRenderer.removeEventListener("tracking",this[$onARTracking]),this[$arAnchor].removeEventListener("message",this[$onARTap])}update(ve){super.update(ve),ve.has("arScale")&&(this[$scene].canScale=this.arScale!=="fixed"),ve.has("arPlacement")&&(this[$scene].updateShadow(),this[$needsRender]()),ve.has("arModes")&&(this[$arModes]=deserializeARModes(this.arModes)),(ve.has("ar")||ve.has("arModes")||ve.has("src")||ve.has("iosSrc"))&&this[$selectARMode]()}async activateAR(){switch(this[$arMode]){case ARMode.QUICK_LOOK:this[$openIOSARQuickLook]();break;case ARMode.WEBXR:await this[$enterARWithWebXR]();break;case ARMode.SCENE_VIEWER:this[$openSceneViewer]();break;default:console.warn("No AR Mode can be activated. This is probably due to missing configuration or device capabilities");break}}async[(ee=$canActivateAR,ne=$arButtonContainer,ie=$arAnchor,oe=$arModes,ae=$arMode,ce=$preload,le=$onARButtonContainerClick,ue=$onARStatus,he=$onARTracking,fe=$onARTap,$selectARMode)](){let ve=ARMode.NONE;if(this.ar){if(this.src!=null)for(const ye of this[$arModes]){if(ye==="webxr"&&IS_WEBXR_AR_CANDIDATE&&!isWebXRBlocked&&await this[$renderer].arRenderer.supportsPresentation()){ve=ARMode.WEBXR;break}if(ye==="scene-viewer"&&IS_SCENEVIEWER_CANDIDATE&&!isSceneViewerBlocked){ve=ARMode.SCENE_VIEWER;break}if(ye==="quick-look"&&IS_AR_QUICKLOOK_CANDIDATE){ve=ARMode.QUICK_LOOK;break}}ve===ARMode.NONE&&this.iosSrc!=null&&IS_AR_QUICKLOOK_CANDIDATE&&(ve=ARMode.QUICK_LOOK)}if(ve!==ARMode.NONE)this[$arButtonContainer].classList.add("enabled"),this[$arButtonContainer].addEventListener("click",this[$onARButtonContainerClick]);else if(this[$arButtonContainer].classList.contains("enabled")){this[$arButtonContainer].removeEventListener("click",this[$onARButtonContainerClick]),this[$arButtonContainer].classList.remove("enabled");const ye=ARStatus.FAILED;this.setAttribute("ar-status",ye),this.dispatchEvent(new CustomEvent("ar-status",{detail:{status:ye}}))}this[$arMode]=ve}async[$enterARWithWebXR](){console.log("Attempting to present in AR with WebXR..."),await this[$triggerLoad]();try{this[$arButtonContainer].removeEventListener("click",this[$onARButtonContainerClick]);const{arRenderer:ve}=this[$renderer];ve.placeOnWall=this.arPlacement==="wall",await ve.present(this[$scene],this.xrEnvironment)}catch(ve){console.warn("Error while trying to present in AR with WebXR"),console.error(ve),await this[$renderer].arRenderer.stopPresenting(),isWebXRBlocked=!0,console.warn("Falling back to next ar-mode"),await this[$selectARMode](),this.activateAR()}finally{this[$selectARMode]()}}async[$triggerLoad](){this.loaded||(this[$preload]=!0,this[$updateSource](),await waitForEvent(this,"load"),this[$preload]=!1)}[$shouldAttemptPreload](){return super[$shouldAttemptPreload]()||this[$preload]}[$openSceneViewer](){const ve=self.location.toString(),ye=new URL(ve),be=new URL(this.src,ve);be.hash&&(be.hash="");const Ce=new URLSearchParams(be.search);if(ye.hash=noArViewerSigil,Ce.set("mode","ar_preferred"),Ce.has("disable_occlusion")||Ce.set("disable_occlusion","true"),this.arScale==="fixed"&&Ce.set("resizable","false"),this.arPlacement==="wall"&&Ce.set("enable_vertical_placement","true"),Ce.has("sound")){const Te=new URL(Ce.get("sound"),ve);Ce.set("sound",Te.toString())}if(Ce.has("link")){const Te=new URL(Ce.get("link"),ve);Ce.set("link",Te.toString())}const Se=`intent://arvr.google.com/scene-viewer/1.0?${Ce.toString()+"&file="+encodeURIComponent(be.toString())}#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;S.browser_fallback_url=${encodeURIComponent(ye.toString())};end;`,$e=()=>{self.location.hash===noArViewerSigil&&(isSceneViewerBlocked=!0,self.history.back(),console.warn("Error while trying to present in AR with Scene Viewer"),console.warn("Falling back to next ar-mode"),this[$selectARMode]())};self.addEventListener("hashchange",$e,{once:!0}),this[$arAnchor].setAttribute("href",Se),console.log("Attempting to present in AR with Scene Viewer..."),this[$arAnchor].click()}async[$openIOSARQuickLook](){const ve=!this.iosSrc;this[$arButtonContainer].classList.remove("enabled");const ye=ve?await this.prepareUSDZ():this.iosSrc,be=new URL(ye,self.location.toString());if(ve){const $e=self.location.toString(),Te=new URL($e),Ne=new URL(this.src,Te);Ne.hash&&(be.hash=Ne.hash)}this.arScale==="fixed"&&(be.hash&&(be.hash+="&"),be.hash+="allowsContentScaling=0");const Ce=this[$arAnchor];Ce.setAttribute("rel","ar");const Se=document.createElement("img");Ce.appendChild(Se),Ce.setAttribute("href",be.toString()),ve&&Ce.setAttribute("download","model.usdz"),Ce.style.display="none",Ce.isConnected||this.shadowRoot.appendChild(Ce),console.log("Attempting to present in AR with Quick Look..."),Ce.click(),Ce.removeChild(Se),ve&&URL.revokeObjectURL(ye),this[$arButtonContainer].classList.add("enabled")}async prepareUSDZ(){const ve=this[$progressTracker].beginActivity();await this[$triggerLoad]();const{model:ye,shadow:be}=this[$scene];if(ye==null)return"";let Ce=!1;be!=null&&(Ce=be.visible,be.visible=!1),ve(.2);const $e=await new USDZExporter().parse(ye),Te=new Blob([$e],{type:"model/vnd.usdz+zip"}),Ne=URL.createObjectURL(Te);return ve(1),be!=null&&(be.visible=Ce),Ne}}return __decorate$2([e$4({type:Boolean,attribute:"ar"})],me.prototype,"ar",void 0),__decorate$2([e$4({type:String,attribute:"ar-scale"})],me.prototype,"arScale",void 0),__decorate$2([e$4({type:String,attribute:"ar-placement"})],me.prototype,"arPlacement",void 0),__decorate$2([e$4({type:String,attribute:"ar-modes"})],me.prototype,"arModes",void 0),__decorate$2([e$4({type:String,attribute:"ios-src"})],me.prototype,"iosSrc",void 0),__decorate$2([e$4({type:Boolean,attribute:"xr-environment"})],me.prototype,"xrEnvironment",void 0),me};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate$1=globalThis&&globalThis.__decorate||function(re,ee,ne,ie){var oe=arguments.length,ae=oe<3?ee:ie===null?ie=Object.getOwnPropertyDescriptor(ee,ne):ie,ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ae=Reflect.decorate(re,ee,ne,ie);else for(var le=re.length-1;le>=0;le--)(ce=re[le])&&(ae=(oe<3?ce(ae):oe>3?ce(ee,ne,ae):ce(ee,ne))||ae);return oe>3&&ae&&Object.defineProperty(ee,ne,ae),ae};const PROGRESS_BAR_UPDATE_THRESHOLD=100,DEFAULT_DRACO_DECODER_LOCATION="https://www.gstatic.com/draco/versioned/decoders/1.5.6/",DEFAULT_KTX2_TRANSCODER_LOCATION="https://www.gstatic.com/basis-universal/versioned/2021-04-15-ba1c3e4/",DEFAULT_LOTTIE_LOADER_LOCATION="https://cdn.jsdelivr.net/npm/three@0.149.0/examples/jsm/loaders/LottieLoader.js",RevealStrategy={AUTO:"auto",MANUAL:"manual"},LoadingStrategy={AUTO:"auto",LAZY:"lazy",EAGER:"eager"},$defaultProgressBarElement=Symbol("defaultProgressBarElement"),$posterContainerElement=Symbol("posterContainerElement"),$defaultPosterElement=Symbol("defaultPosterElement"),$shouldDismissPoster=Symbol("shouldDismissPoster"),$hidePoster=Symbol("hidePoster"),$modelIsRevealed=Symbol("modelIsRevealed"),$updateProgressBar=Symbol("updateProgressBar"),$ariaLabelCallToAction=Symbol("ariaLabelCallToAction"),$onProgress=Symbol("onProgress"),LoadingMixin=re=>{var ee,ne,ie,oe,ae,ce,le,ue;class he extends re{constructor(...me){super(...me),this.poster=null,this.reveal=RevealStrategy.AUTO,this.loading=LoadingStrategy.AUTO,this[ee]=!1,this[ne]=!1,this[ie]=this.shadowRoot.querySelector(".slot.poster"),this[oe]=this.shadowRoot.querySelector("#default-poster"),this[ae]=this.shadowRoot.querySelector("#default-progress-bar > .bar"),this[ce]=this[$defaultPosterElement].getAttribute("aria-label"),this[le]=throttle(Ce=>{const Se=this[$defaultProgressBarElement].parentNode;requestAnimationFrame(()=>{this[$defaultProgressBarElement].style.transform=`scaleX(${Ce})`,Ce===0&&(Se.removeChild(this[$defaultProgressBarElement]),Se.appendChild(this[$defaultProgressBarElement])),Ce===1?this[$defaultProgressBarElement].classList.add("hide"):this[$defaultProgressBarElement].classList.remove("hide")})},PROGRESS_BAR_UPDATE_THRESHOLD),this[ue]=Ce=>{const Se=Ce.detail.totalProgress;Se===1&&(this[$updateProgressBar].flush(),this.loaded&&(this[$shouldDismissPoster]||this.reveal===RevealStrategy.AUTO)&&this[$hidePoster]()),this[$updateProgressBar](Se),this.dispatchEvent(new CustomEvent("progress",{detail:{totalProgress:Se}}))};const ge=self.ModelViewerElement||{},ve=ge.dracoDecoderLocation||DEFAULT_DRACO_DECODER_LOCATION;CachingGLTFLoader.setDRACODecoderLocation(ve);const ye=ge.ktx2TranscoderLocation||DEFAULT_KTX2_TRANSCODER_LOCATION;CachingGLTFLoader.setKTX2TranscoderLocation(ye),ge.meshoptDecoderLocation&&CachingGLTFLoader.setMeshoptDecoderLocation(ge.meshoptDecoderLocation);const be=ge.lottieLoaderLocation||DEFAULT_LOTTIE_LOADER_LOCATION;Renderer.singleton.textureUtils.lottieLoaderUrl=be}static set dracoDecoderLocation(me){CachingGLTFLoader.setDRACODecoderLocation(me)}static get dracoDecoderLocation(){return CachingGLTFLoader.getDRACODecoderLocation()}static set ktx2TranscoderLocation(me){CachingGLTFLoader.setKTX2TranscoderLocation(me)}static get ktx2TranscoderLocation(){return CachingGLTFLoader.getKTX2TranscoderLocation()}static set meshoptDecoderLocation(me){CachingGLTFLoader.setMeshoptDecoderLocation(me)}static get meshoptDecoderLocation(){return CachingGLTFLoader.getMeshoptDecoderLocation()}static set lottieLoaderLocation(me){Renderer.singleton.textureUtils.lottieLoaderUrl=me}static get lottieLoaderLocation(){return Renderer.singleton.textureUtils.lottieLoaderUrl}static mapURLs(me){Renderer.singleton.loader[$loader].manager.setURLModifier(me)}dismissPoster(){this.loaded?this[$hidePoster]():(this[$shouldDismissPoster]=!0,this[$updateSource]())}showPoster(){const me=this[$posterContainerElement];if(me.classList.contains("show"))return;me.classList.add("show"),this[$userInputElement].classList.remove("show");const ge=this[$defaultPosterElement];ge.removeAttribute("tabindex"),ge.removeAttribute("aria-hidden");const ve=this.modelIsVisible;this[$modelIsRevealed]=!1,this[$announceModelVisibility](ve)}getDimensions(){return toVector3D(this[$scene].size)}getBoundingBoxCenter(){return toVector3D(this[$scene].boundingBox.getCenter(new Vector3))}connectedCallback(){super.connectedCallback(),this.loaded||this.showPoster(),this[$progressTracker].addEventListener("progress",this[$onProgress])}disconnectedCallback(){super.disconnectedCallback(),this[$progressTracker].removeEventListener("progress",this[$onProgress])}async updated(me){super.updated(me),me.has("poster")&&this.poster!=null&&(this[$defaultPosterElement].style.backgroundImage=`url(${this.poster})`),me.has("alt")&&this[$defaultPosterElement].setAttribute("aria-label",this[$altDefaulted]),(me.has("reveal")||me.has("loading"))&&this[$updateSource]()}[(ee=$modelIsRevealed,ne=$shouldDismissPoster,ie=$posterContainerElement,oe=$defaultPosterElement,ae=$defaultProgressBarElement,ce=$ariaLabelCallToAction,le=$updateProgressBar,ue=$onProgress,$shouldAttemptPreload)](){return!!this.src&&(this[$shouldDismissPoster]||this.loading===LoadingStrategy.EAGER||this.reveal===RevealStrategy.AUTO&&this[$isElementInViewport])}[$hidePoster](){this[$shouldDismissPoster]=!1;const me=this[$posterContainerElement];if(!me.classList.contains("show"))return;me.classList.remove("show"),this[$userInputElement].classList.add("show");const ge=this.modelIsVisible;this[$modelIsRevealed]=!0,this[$announceModelVisibility](ge);const ve=this.getRootNode();ve&&ve.activeElement===this&&this[$userInputElement].focus();const ye=this[$defaultPosterElement];ye.setAttribute("aria-hidden","true"),ye.tabIndex=-1,this.dispatchEvent(new CustomEvent("poster-dismissed"))}[$getModelIsVisible](){return super[$getModelIsVisible]()&&this[$modelIsRevealed]}}return __decorate$1([e$4({type:String})],he.prototype,"poster",void 0),__decorate$1([e$4({type:String})],he.prototype,"reveal",void 0),__decorate$1([e$4({type:String})],he.prototype,"loading",void 0),he};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var __decorate=globalThis&&globalThis.__decorate||function(re,ee,ne,ie){var oe=arguments.length,ae=oe<3?ee:ie===null?ie=Object.getOwnPropertyDescriptor(ee,ne):ie,ce;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ae=Reflect.decorate(re,ee,ne,ie);else for(var le=re.length-1;le>=0;le--)(ce=re[le])&&(ae=(oe<3?ce(ae):oe>3?ce(ee,ne,ae):ce(ee,ne))||ae);return oe>3&&ae&&Object.defineProperty(ee,ne,ae),ae};const DEFAULT_ROTATION_SPEED=Math.PI/32,AUTO_ROTATE_DELAY_DEFAULT=3e3,rotationRateIntrinsics={basis:[degreesToRadians(numberNode(DEFAULT_ROTATION_SPEED,"rad"))],keywords:{auto:[null]}},$autoRotateStartTime=Symbol("autoRotateStartTime"),$radiansPerSecond=Symbol("radiansPerSecond"),$syncRotationRate=Symbol("syncRotationRate"),$onCameraChange=Symbol("onCameraChange"),StagingMixin=re=>{var ee,ne,ie;class oe extends re{constructor(){super(...arguments),this.autoRotate=!1,this.autoRotateDelay=AUTO_ROTATE_DELAY_DEFAULT,this.rotationPerSecond="auto",this[ee]=performance.now(),this[ne]=0,this[ie]=ce=>{this.autoRotate&&ce.detail.source==="user-interaction"&&(this[$autoRotateStartTime]=performance.now())}}connectedCallback(){super.connectedCallback(),this.addEventListener("camera-change",this[$onCameraChange]),this[$autoRotateStartTime]=performance.now()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("camera-change",this[$onCameraChange]),this[$autoRotateStartTime]=performance.now()}updated(ce){super.updated(ce),ce.has("autoRotate")&&(this[$autoRotateStartTime]=performance.now())}[(ee=$autoRotateStartTime,ne=$radiansPerSecond,$syncRotationRate)](ce){this[$radiansPerSecond]=ce[0]}[$tick](ce,le){if(super[$tick](ce,le),!this.autoRotate||!this[$getModelIsVisible]()||this[$renderer].isPresenting)return;const ue=Math.min(le,ce-this[$autoRotateStartTime]-this.autoRotateDelay);ue>0&&(this[$scene].yaw=this.turntableRotation+this[$radiansPerSecond]*ue*.001)}get turntableRotation(){return this[$scene].yaw}resetTurntableRotation(ce=0){this[$scene].yaw=ce}}return ie=$onCameraChange,__decorate([e$4({type:Boolean,attribute:"auto-rotate"})],oe.prototype,"autoRotate",void 0),__decorate([e$4({type:Number,attribute:"auto-rotate-delay"})],oe.prototype,"autoRotateDelay",void 0),__decorate([style$3({intrinsics:rotationRateIntrinsics,updateHandler:$syncRotationRate}),e$4({type:String,attribute:"rotation-per-second"})],oe.prototype,"rotationPerSecond",void 0),oe},FocusVisiblePolyfillMixin=re=>{var ee;const ne=ae=>{if(ae.shadowRoot==null||ae.hasAttribute("data-js-focus-visible"))return()=>{};if(self.applyFocusVisiblePolyfill)self.applyFocusVisiblePolyfill(ae.shadowRoot);else{const ce=()=>{self.applyFocusVisiblePolyfill(ae.shadowRoot)};return self.addEventListener("focus-visible-polyfill-ready",ce,{once:!0}),()=>{self.removeEventListener("focus-visible-polyfill-ready",ce)}}return()=>{}},ie=Symbol("endPolyfillCoordination");class oe extends re{constructor(){super(...arguments),this[ee]=null}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this[ie]==null&&(this[ie]=ne(this))}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback(),this[ie]!=null&&(this[ie](),this[ie]=null)}}return ee=ie,oe};/* @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ModelViewerElement=AnnotationMixin(SceneGraphMixin(StagingMixin(EnvironmentMixin(ControlsMixin(ARMixin(LoadingMixin(AnimationMixin(FocusVisiblePolyfillMixin(ModelViewerElementBase)))))))));customElements.define("model-viewer",ModelViewerElement);const GLBComponent=({artifactUri:re,displayUri:ee,previewUri:ne,displayView:ie,nft:oe})=>{let ae={src:ne||re};return ie&&(ae={...ae,autoplay:!0,"auto-rotate":!0,"data-js-focus-visible":!0,"interaction-prompt":"none",ar:!0,"ar-modes":"webxr scene-viewer quick-look","camera-controls":!0}),ie?jsx$1("model-viewer",{...ae,title:`GLB object ${oe.token_id}`,children:jsx$1("button",{slot:"ar-button",className:styles$M.arButton,children:"AR"})}):jsx$1(ImageComponent,{previewUri:ne,displayUri:ee,displayView:!1,nft:oe})},iOS=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document,container$r="_container_1lpzo_216",displayviewVideo="_displayviewVideo_1lpzo_221",video="_video_1lpzo_227",icon$1="_icon_1lpzo_232",styles$K={container:container$r,displayviewVideo,video,icon:icon$1},VideoComponent=({artifactUri:re,displayUri:ee,previewUri:ne,inView:ie,displayView:oe,nft:ae,forceVideo:ce})=>{const le=reactExports.useRef();return reactExports.useEffect(()=>{if(!oe)return;const ue=fe=>iOS||fe.readyState>2,he=fe=>fe.currentTime>0&&!fe.paused&&!fe.ended&&fe.readyState>2;if(ie){if(ue(le.current))try{le.current.play()}catch(fe){console.error(fe)}}else if(ue(le.current)&&he(le.current))try{le.current.pause()}catch(fe){console.error(fe)}},[ie,oe]),oe||ce?jsx$1("video",{ref:le,className:styles$K.displayviewVideo,autoPlay:!0,playsInline:!0,muted:!oe,loop:!0,controls:oe,src:ne||re,poster:ee,title:`video object ${ae.token_id}`}):jsxs(Fragment,{children:[jsx$1("div",{className:styles$K.icon,children:jsx$1(VideoIcon,{size:32})}),jsx$1(ImageComponent,{artifactUri:re,displayUri:ee,previewUri:ne,inView:ie,displayView:oe,nft:ae})]})},feed_container$2="_feed_container_1vzb9_216",container$q="_container_1vzb9_217",button$4="_button_1vzb9_232",styles$J={feed_container:feed_container$2,container:container$q,button:button$4},AudioComponent=({artifactUri:re,displayUri:ee,previewUri:ne,displayView:ie,nft:oe})=>{const ae=reactExports.useRef(),[ce,le]=reactExports.useState(!1),ue=()=>{le(!ce)};return reactExports.useEffect(()=>{ae.current&&(ce?ae.current.play():ae.current.pause())},[ce]),ie?jsxs("div",{className:styles$J.container,children:[jsx$1("img",{src:ee,alt:`cover for audio object ${oe.token_id}`}),jsx$1("audio",{playsInline:!0,autoPlay:ie,src:ne||re,controls:!0})]}):jsxs("div",{className:styles$J.feed_container,children:[jsx$1(Button,{to:`${PATH.OBJKT}/${oe.token_id}`,children:jsx$1("img",{alt:`cover for audio object ${oe.token_id}`,src:ee})}),jsx$1(Button,{className:styles$J.button,onClick:ue,children:ce?jsx$1(SvgPause,{fill:"var(--gray-10)",width:64,height:64}):jsx$1(SvgPlay,{fill:"var(--gray-10)",width:64,height:64})}),jsx$1("audio",{ref:ae,src:ne||re})]})},vector="_vector_19knq_1",display="_display_19knq_24",container$p="_container_19knq_32",interactive$1="_interactive_19knq_47",styles$I={vector,display,container:container$p,interactive:interactive$1},index$2="",VectorComponent=({artifactUri:re,previewUri:ee,displayView:ne,nft:ie})=>{const oe=useUserStore(he=>he.address),ae=classNames$1({[styles$I.container]:!0,[styles$I.interactive]:ne,[styles$I.display]:ne});let ce=!1,le=!1;oe&&(ce=oe),ie.token_id&&(le=ie.token_id);const ue=ee||`${re}?creator=${ie.artist_address}&viewer=${ce}&objkt=${le}`;return ne?jsx$1("div",{className:ae,children:jsx$1("iframe",{title:`SVG object ${ie.token_id}`,src:ue,sandbox:"allow-scripts",scrolling:"no"})}):jsx$1("div",{className:`${ae} vector-container`,children:jsx$1("iframe",{className:`${styles$I.vector} vector`,title:`SVG object ${ie.token_id}`,src:ue,sandbox:"allow-scripts",scrolling:"no"})})};var u8=Uint8Array,u16=Uint16Array,u32=Uint32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(re,ee){for(var ne=new u16(31),ie=0;ie<31;++ie)ne[ie]=ee+=1<<re[ie-1];for(var oe=new u32(ne[30]),ie=1;ie<30;++ie)for(var ae=ne[ie];ae<ne[ie+1];++ae)oe[ae]=ae-ne[ie]<<5|ie;return[ne,oe]},_a=freb(fleb,2),fl=_a[0],revfl=_a[1];fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b[0],rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>>8|(x$1&255)<<8)>>>1}var hMap=function(re,ee,ne){for(var ie=re.length,oe=0,ae=new u16(ee);oe<ie;++oe)re[oe]&&++ae[re[oe]-1];var ce=new u16(ee);for(oe=0;oe<ee;++oe)ce[oe]=ce[oe-1]+ae[oe-1]<<1;var le;if(ne){le=new u16(1<<ee);var ue=15-ee;for(oe=0;oe<ie;++oe)if(re[oe])for(var he=oe<<4|re[oe],fe=ee-re[oe],me=ce[re[oe]-1]++<<fe,ge=me|(1<<fe)-1;me<=ge;++me)le[rev[me]>>>ue]=he}else for(le=new u16(ie),oe=0;oe<ie;++oe)re[oe]&&(le[oe]=rev[ce[re[oe]-1]++]>>>15-re[oe]);return le},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max$5=function(re){for(var ee=re[0],ne=1;ne<re.length;++ne)re[ne]>ee&&(ee=re[ne]);return ee},bits$1=function(re,ee,ne){var ie=ee/8|0;return(re[ie]|re[ie+1]<<8)>>(ee&7)&ne},bits16=function(re,ee){var ne=ee/8|0;return(re[ne]|re[ne+1]<<8|re[ne+2]<<16)>>(ee&7)},shft=function(re){return(re+7)/8|0},slc=function(re,ee,ne){(ee==null||ee<0)&&(ee=0),(ne==null||ne>re.length)&&(ne=re.length);var ie=new(re.BYTES_PER_ELEMENT==2?u16:re.BYTES_PER_ELEMENT==4?u32:u8)(ne-ee);return ie.set(re.subarray(ee,ne)),ie},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(re,ee,ne){var ie=new Error(ee||ec[re]);if(ie.code=re,Error.captureStackTrace&&Error.captureStackTrace(ie,err),!ne)throw ie;return ie},inflt=function(re,ee,ne){var ie=re.length;if(!ie||ne&&ne.f&&!ne.l)return ee||new u8(0);var oe=!ee||ne,ae=!ne||ne.i;ne||(ne={}),ee||(ee=new u8(ie*3));var ce=function(dn){var nn=ee.length;if(dn>nn){var rn=new u8(Math.max(nn*2,dn));rn.set(ee),ee=rn}},le=ne.f||0,ue=ne.p||0,he=ne.b||0,fe=ne.l,me=ne.d,ge=ne.m,ve=ne.n,ye=ie*8;do{if(!fe){le=bits$1(re,ue,1);var be=bits$1(re,ue+1,3);if(ue+=3,be)if(be==1)fe=flrm,me=fdrm,ge=9,ve=5;else if(be==2){var Te=bits$1(re,ue,31)+257,Ne=bits$1(re,ue+10,15)+4,Ie=Te+bits$1(re,ue+5,31)+1;ue+=14;for(var ke=new u8(Ie),De=new u8(19),Oe=0;Oe<Ne;++Oe)De[clim[Oe]]=bits$1(re,ue+Oe*3,7);ue+=Ne*3;for(var Be=max$5(De),Me=(1<<Be)-1,Le=hMap(De,Be,1),Oe=0;Oe<Ie;){var je=Le[bits$1(re,ue,Me)];ue+=je&15;var Ce=je>>>4;if(Ce<16)ke[Oe++]=Ce;else{var ze=0,Ve=0;for(Ce==16?(Ve=3+bits$1(re,ue,3),ue+=2,ze=ke[Oe-1]):Ce==17?(Ve=3+bits$1(re,ue,7),ue+=3):Ce==18&&(Ve=11+bits$1(re,ue,127),ue+=7);Ve--;)ke[Oe++]=ze}}var He=ke.subarray(0,Te),We=ke.subarray(Te);ge=max$5(He),ve=max$5(We),fe=hMap(He,ge,1),me=hMap(We,ve,1)}else err(1);else{var Ce=shft(ue)+4,Se=re[Ce-4]|re[Ce-3]<<8,$e=Ce+Se;if($e>ie){ae&&err(0);break}oe&&ce(he+Se),ee.set(re.subarray(Ce,$e),he),ne.b=he+=Se,ne.p=ue=$e*8,ne.f=le;continue}if(ue>ye){ae&&err(0);break}}oe&&ce(he+131072);for(var Ye=(1<<ge)-1,Ue=(1<<ve)-1,Ke=ue;;Ke=ue){var ze=fe[bits16(re,ue)&Ye],Xe=ze>>>4;if(ue+=ze&15,ue>ye){ae&&err(0);break}if(ze||err(2),Xe<256)ee[he++]=Xe;else if(Xe==256){Ke=ue,fe=null;break}else{var Vt=Xe-254;if(Xe>264){var Oe=Xe-257,Wt=fleb[Oe];Vt=bits$1(re,ue,(1<<Wt)-1)+fl[Oe],ue+=Wt}var Kt=me[bits16(re,ue)&Ue],tn=Kt>>>4;Kt||err(3),ue+=Kt&15;var We=fd[tn];if(tn>3){var Wt=fdeb[tn];We+=bits16(re,ue)&(1<<Wt)-1,ue+=Wt}if(ue>ye){ae&&err(0);break}oe&&ce(he+131072);for(var Xt=he+Vt;he<Xt;he+=4)ee[he]=ee[he-We],ee[he+1]=ee[he+1-We],ee[he+2]=ee[he+2-We],ee[he+3]=ee[he+3-We];he=Xt}}ne.l=fe,ne.p=Ke,ne.b=he,ne.f=le,fe&&(le=1,ne.m=ge,ne.d=me,ne.n=ve)}while(!le);return he==ee.length?ee:slc(ee,0,he)},et=new u8(0),b2=function(re,ee){return re[ee]|re[ee+1]<<8},b4=function(re,ee){return(re[ee]|re[ee+1]<<8|re[ee+2]<<16|re[ee+3]<<24)>>>0},b8=function(re,ee){return b4(re,ee)+b4(re,ee+4)*4294967296};function inflateSync(re,ee){return inflt(re,ee)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch{}var dutf8=function(re){for(var ee="",ne=0;;){var ie=re[ne++],oe=(ie>127)+(ie>223)+(ie>239);if(ne+oe>re.length)return[ee,slc(re,ne-1)];oe?oe==3?(ie=((ie&15)<<18|(re[ne++]&63)<<12|(re[ne++]&63)<<6|re[ne++]&63)-65536,ee+=String.fromCharCode(55296|ie>>10,56320|ie&1023)):oe&1?ee+=String.fromCharCode((ie&31)<<6|re[ne++]&63):ee+=String.fromCharCode((ie&15)<<12|(re[ne++]&63)<<6|re[ne++]&63):ee+=String.fromCharCode(ie)}};function strFromU8(re,ee){if(ee){for(var ne="",ie=0;ie<re.length;ie+=16384)ne+=String.fromCharCode.apply(null,re.subarray(ie,ie+16384));return ne}else{if(td)return td.decode(re);var oe=dutf8(re),ae=oe[0],ce=oe[1];return ce.length&&err(8),ae}}var slzh=function(re,ee){return ee+30+b2(re,ee+26)+b2(re,ee+28)},zh=function(re,ee,ne){var ie=b2(re,ee+28),oe=strFromU8(re.subarray(ee+46,ee+46+ie),!(b2(re,ee+8)&2048)),ae=ee+46+ie,ce=b4(re,ee+20),le=ne&&ce==4294967295?z64e(re,ae):[ce,b4(re,ee+24),b4(re,ee+42)],ue=le[0],he=le[1],fe=le[2];return[b2(re,ee+10),ue,he,oe,ae+b2(re,ee+30)+b2(re,ee+32),fe]},z64e=function(re,ee){for(;b2(re,ee)!=1;ee+=4+b2(re,ee+2));return[b8(re,ee+12),b8(re,ee+4),b8(re,ee+20)]};function unzipSync(re,ee){for(var ne={},ie=re.length-22;b4(re,ie)!=101010256;--ie)(!ie||re.length-ie>65558)&&err(13);var oe=b2(re,ie+8);if(!oe)return{};var ae=b4(re,ie+16),ce=ae==4294967295||oe==65535;if(ce){var le=b4(re,ie-12);ce=b4(re,le)==101075792,ce&&(oe=b4(re,le+32),ae=b4(re,le+48))}for(var ue=ee&&ee.filter,he=0;he<oe;++he){var fe=zh(re,ae,ce),me=fe[0],ge=fe[1],ve=fe[2],ye=fe[3],be=fe[4],Ce=fe[5],Se=slzh(re,Ce);ae=be,(!ue||ue({name:ye,size:ge,originalSize:ve,compression:me}))&&(me?me==8?ne[ye]=inflateSync(re.subarray(Se,Se+ge),new u8(ve)):err(14,"unknown compression type "+me):ne[ye]=slc(re,Se,Se+ge))}return ne}var mimeTypes={};const require$$0={"application/1d-interleaved-parityfec":{source:"iana"},"application/3gpdash-qoe-report+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/3gpp-ims+xml":{source:"iana",compressible:!0},"application/3gpphal+json":{source:"iana",compressible:!0},"application/3gpphalforms+json":{source:"iana",compressible:!0},"application/a2l":{source:"iana"},"application/ace+cbor":{source:"iana"},"application/activemessage":{source:"iana"},"application/activity+json":{source:"iana",compressible:!0},"application/alto-costmap+json":{source:"iana",compressible:!0},"application/alto-costmapfilter+json":{source:"iana",compressible:!0},"application/alto-directory+json":{source:"iana",compressible:!0},"application/alto-endpointcost+json":{source:"iana",compressible:!0},"application/alto-endpointcostparams+json":{source:"iana",compressible:!0},"application/alto-endpointprop+json":{source:"iana",compressible:!0},"application/alto-endpointpropparams+json":{source:"iana",compressible:!0},"application/alto-error+json":{source:"iana",compressible:!0},"application/alto-networkmap+json":{source:"iana",compressible:!0},"application/alto-networkmapfilter+json":{source:"iana",compressible:!0},"application/alto-updatestreamcontrol+json":{source:"iana",compressible:!0},"application/alto-updatestreamparams+json":{source:"iana",compressible:!0},"application/aml":{source:"iana"},"application/andrew-inset":{source:"iana",extensions:["ez"]},"application/applefile":{source:"iana"},"application/applixware":{source:"apache",extensions:["aw"]},"application/at+jwt":{source:"iana"},"application/atf":{source:"iana"},"application/atfx":{source:"iana"},"application/atom+xml":{source:"iana",compressible:!0,extensions:["atom"]},"application/atomcat+xml":{source:"iana",compressible:!0,extensions:["atomcat"]},"application/atomdeleted+xml":{source:"iana",compressible:!0,extensions:["atomdeleted"]},"application/atomicmail":{source:"iana"},"application/atomsvc+xml":{source:"iana",compressible:!0,extensions:["atomsvc"]},"application/atsc-dwd+xml":{source:"iana",compressible:!0,extensions:["dwd"]},"application/atsc-dynamic-event-message":{source:"iana"},"application/atsc-held+xml":{source:"iana",compressible:!0,extensions:["held"]},"application/atsc-rdt+json":{source:"iana",compressible:!0},"application/atsc-rsat+xml":{source:"iana",compressible:!0,extensions:["rsat"]},"application/atxml":{source:"iana"},"application/auth-policy+xml":{source:"iana",compressible:!0},"application/bacnet-xdd+zip":{source:"iana",compressible:!1},"application/batch-smtp":{source:"iana"},"application/bdoc":{compressible:!1,extensions:["bdoc"]},"application/beep+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/calendar+json":{source:"iana",compressible:!0},"application/calendar+xml":{source:"iana",compressible:!0,extensions:["xcs"]},"application/call-completion":{source:"iana"},"application/cals-1840":{source:"iana"},"application/captive+json":{source:"iana",compressible:!0},"application/cbor":{source:"iana"},"application/cbor-seq":{source:"iana"},"application/cccex":{source:"iana"},"application/ccmp+xml":{source:"iana",compressible:!0},"application/ccxml+xml":{source:"iana",compressible:!0,extensions:["ccxml"]},"application/cdfx+xml":{source:"iana",compressible:!0,extensions:["cdfx"]},"application/cdmi-capability":{source:"iana",extensions:["cdmia"]},"application/cdmi-container":{source:"iana",extensions:["cdmic"]},"application/cdmi-domain":{source:"iana",extensions:["cdmid"]},"application/cdmi-object":{source:"iana",extensions:["cdmio"]},"application/cdmi-queue":{source:"iana",extensions:["cdmiq"]},"application/cdni":{source:"iana"},"application/cea":{source:"iana"},"application/cea-2018+xml":{source:"iana",compressible:!0},"application/cellml+xml":{source:"iana",compressible:!0},"application/cfw":{source:"iana"},"application/city+json":{source:"iana",compressible:!0},"application/clr":{source:"iana"},"application/clue+xml":{source:"iana",compressible:!0},"application/clue_info+xml":{source:"iana",compressible:!0},"application/cms":{source:"iana"},"application/cnrp+xml":{source:"iana",compressible:!0},"application/coap-group+json":{source:"iana",compressible:!0},"application/coap-payload":{source:"iana"},"application/commonground":{source:"iana"},"application/conference-info+xml":{source:"iana",compressible:!0},"application/cose":{source:"iana"},"application/cose-key":{source:"iana"},"application/cose-key-set":{source:"iana"},"application/cpl+xml":{source:"iana",compressible:!0,extensions:["cpl"]},"application/csrattrs":{source:"iana"},"application/csta+xml":{source:"iana",compressible:!0},"application/cstadata+xml":{source:"iana",compressible:!0},"application/csvm+json":{source:"iana",compressible:!0},"application/cu-seeme":{source:"apache",extensions:["cu"]},"application/cwt":{source:"iana"},"application/cybercash":{source:"iana"},"application/dart":{compressible:!0},"application/dash+xml":{source:"iana",compressible:!0,extensions:["mpd"]},"application/dash-patch+xml":{source:"iana",compressible:!0,extensions:["mpp"]},"application/dashdelta":{source:"iana"},"application/davmount+xml":{source:"iana",compressible:!0,extensions:["davmount"]},"application/dca-rft":{source:"iana"},"application/dcd":{source:"iana"},"application/dec-dx":{source:"iana"},"application/dialog-info+xml":{source:"iana",compressible:!0},"application/dicom":{source:"iana"},"application/dicom+json":{source:"iana",compressible:!0},"application/dicom+xml":{source:"iana",compressible:!0},"application/dii":{source:"iana"},"application/dit":{source:"iana"},"application/dns":{source:"iana"},"application/dns+json":{source:"iana",compressible:!0},"application/dns-message":{source:"iana"},"application/docbook+xml":{source:"apache",compressible:!0,extensions:["dbk"]},"application/dots+cbor":{source:"iana"},"application/dskpp+xml":{source:"iana",compressible:!0},"application/dssc+der":{source:"iana",extensions:["dssc"]},"application/dssc+xml":{source:"iana",compressible:!0,extensions:["xdssc"]},"application/dvcs":{source:"iana"},"application/ecmascript":{source:"iana",compressible:!0,extensions:["es","ecma"]},"application/edi-consent":{source:"iana"},"application/edi-x12":{source:"iana",compressible:!1},"application/edifact":{source:"iana",compressible:!1},"application/efi":{source:"iana"},"application/elm+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/elm+xml":{source:"iana",compressible:!0},"application/emergencycalldata.cap+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/emergencycalldata.comment+xml":{source:"iana",compressible:!0},"application/emergencycalldata.control+xml":{source:"iana",compressible:!0},"application/emergencycalldata.deviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.ecall.msd":{source:"iana"},"application/emergencycalldata.providerinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.serviceinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.subscriberinfo+xml":{source:"iana",compressible:!0},"application/emergencycalldata.veds+xml":{source:"iana",compressible:!0},"application/emma+xml":{source:"iana",compressible:!0,extensions:["emma"]},"application/emotionml+xml":{source:"iana",compressible:!0,extensions:["emotionml"]},"application/encaprtp":{source:"iana"},"application/epp+xml":{source:"iana",compressible:!0},"application/epub+zip":{source:"iana",compressible:!1,extensions:["epub"]},"application/eshop":{source:"iana"},"application/exi":{source:"iana",extensions:["exi"]},"application/expect-ct-report+json":{source:"iana",compressible:!0},"application/express":{source:"iana",extensions:["exp"]},"application/fastinfoset":{source:"iana"},"application/fastsoap":{source:"iana"},"application/fdt+xml":{source:"iana",compressible:!0,extensions:["fdt"]},"application/fhir+json":{source:"iana",charset:"UTF-8",compressible:!0},"application/fhir+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/fido.trusted-apps+json":{compressible:!0},"application/fits":{source:"iana"},"application/flexfec":{source:"iana"},"application/font-sfnt":{source:"iana"},"application/font-tdpfr":{source:"iana",extensions:["pfr"]},"application/font-woff":{source:"iana",compressible:!1},"application/framework-attributes+xml":{source:"iana",compressible:!0},"application/geo+json":{source:"iana",compressible:!0,extensions:["geojson"]},"application/geo+json-seq":{source:"iana"},"application/geopackage+sqlite3":{source:"iana"},"application/geoxacml+xml":{source:"iana",compressible:!0},"application/gltf-buffer":{source:"iana"},"application/gml+xml":{source:"iana",compressible:!0,extensions:["gml"]},"application/gpx+xml":{source:"apache",compressible:!0,extensions:["gpx"]},"application/gxf":{source:"apache",extensions:["gxf"]},"application/gzip":{source:"iana",compressible:!1,extensions:["gz"]},"application/h224":{source:"iana"},"application/held+xml":{source:"iana",compressible:!0},"application/hjson":{extensions:["hjson"]},"application/http":{source:"iana"},"application/hyperstudio":{source:"iana",extensions:["stk"]},"application/ibe-key-request+xml":{source:"iana",compressible:!0},"application/ibe-pkg-reply+xml":{source:"iana",compressible:!0},"application/ibe-pp-data":{source:"iana"},"application/iges":{source:"iana"},"application/im-iscomposing+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/index":{source:"iana"},"application/index.cmd":{source:"iana"},"application/index.obj":{source:"iana"},"application/index.response":{source:"iana"},"application/index.vnd":{source:"iana"},"application/inkml+xml":{source:"iana",compressible:!0,extensions:["ink","inkml"]},"application/iotp":{source:"iana"},"application/ipfix":{source:"iana",extensions:["ipfix"]},"application/ipp":{source:"iana"},"application/isup":{source:"iana"},"application/its+xml":{source:"iana",compressible:!0,extensions:["its"]},"application/java-archive":{source:"apache",compressible:!1,extensions:["jar","war","ear"]},"application/java-serialized-object":{source:"apache",compressible:!1,extensions:["ser"]},"application/java-vm":{source:"apache",compressible:!1,extensions:["class"]},"application/javascript":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["js","mjs"]},"application/jf2feed+json":{source:"iana",compressible:!0},"application/jose":{source:"iana"},"application/jose+json":{source:"iana",compressible:!0},"application/jrd+json":{source:"iana",compressible:!0},"application/jscalendar+json":{source:"iana",compressible:!0},"application/json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["json","map"]},"application/json-patch+json":{source:"iana",compressible:!0},"application/json-seq":{source:"iana"},"application/json5":{extensions:["json5"]},"application/jsonml+json":{source:"apache",compressible:!0,extensions:["jsonml"]},"application/jwk+json":{source:"iana",compressible:!0},"application/jwk-set+json":{source:"iana",compressible:!0},"application/jwt":{source:"iana"},"application/kpml-request+xml":{source:"iana",compressible:!0},"application/kpml-response+xml":{source:"iana",compressible:!0},"application/ld+json":{source:"iana",compressible:!0,extensions:["jsonld"]},"application/lgr+xml":{source:"iana",compressible:!0,extensions:["lgr"]},"application/link-format":{source:"iana"},"application/load-control+xml":{source:"iana",compressible:!0},"application/lost+xml":{source:"iana",compressible:!0,extensions:["lostxml"]},"application/lostsync+xml":{source:"iana",compressible:!0},"application/lpf+zip":{source:"iana",compressible:!1},"application/lxf":{source:"iana"},"application/mac-binhex40":{source:"iana",extensions:["hqx"]},"application/mac-compactpro":{source:"apache",extensions:["cpt"]},"application/macwriteii":{source:"iana"},"application/mads+xml":{source:"iana",compressible:!0,extensions:["mads"]},"application/manifest+json":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["webmanifest"]},"application/marc":{source:"iana",extensions:["mrc"]},"application/marcxml+xml":{source:"iana",compressible:!0,extensions:["mrcx"]},"application/mathematica":{source:"iana",extensions:["ma","nb","mb"]},"application/mathml+xml":{source:"iana",compressible:!0,extensions:["mathml"]},"application/mathml-content+xml":{source:"iana",compressible:!0},"application/mathml-presentation+xml":{source:"iana",compressible:!0},"application/mbms-associated-procedure-description+xml":{source:"iana",compressible:!0},"application/mbms-deregister+xml":{source:"iana",compressible:!0},"application/mbms-envelope+xml":{source:"iana",compressible:!0},"application/mbms-msk+xml":{source:"iana",compressible:!0},"application/mbms-msk-response+xml":{source:"iana",compressible:!0},"application/mbms-protection-description+xml":{source:"iana",compressible:!0},"application/mbms-reception-report+xml":{source:"iana",compressible:!0},"application/mbms-register+xml":{source:"iana",compressible:!0},"application/mbms-register-response+xml":{source:"iana",compressible:!0},"application/mbms-schedule+xml":{source:"iana",compressible:!0},"application/mbms-user-service-description+xml":{source:"iana",compressible:!0},"application/mbox":{source:"iana",extensions:["mbox"]},"application/media-policy-dataset+xml":{source:"iana",compressible:!0,extensions:["mpf"]},"application/media_control+xml":{source:"iana",compressible:!0},"application/mediaservercontrol+xml":{source:"iana",compressible:!0,extensions:["mscml"]},"application/merge-patch+json":{source:"iana",compressible:!0},"application/metalink+xml":{source:"apache",compressible:!0,extensions:["metalink"]},"application/metalink4+xml":{source:"iana",compressible:!0,extensions:["meta4"]},"application/mets+xml":{source:"iana",compressible:!0,extensions:["mets"]},"application/mf4":{source:"iana"},"application/mikey":{source:"iana"},"application/mipc":{source:"iana"},"application/missing-blocks+cbor-seq":{source:"iana"},"application/mmt-aei+xml":{source:"iana",compressible:!0,extensions:["maei"]},"application/mmt-usd+xml":{source:"iana",compressible:!0,extensions:["musd"]},"application/mods+xml":{source:"iana",compressible:!0,extensions:["mods"]},"application/moss-keys":{source:"iana"},"application/moss-signature":{source:"iana"},"application/mosskey-data":{source:"iana"},"application/mosskey-request":{source:"iana"},"application/mp21":{source:"iana",extensions:["m21","mp21"]},"application/mp4":{source:"iana",extensions:["mp4s","m4p"]},"application/mpeg4-generic":{source:"iana"},"application/mpeg4-iod":{source:"iana"},"application/mpeg4-iod-xmt":{source:"iana"},"application/mrb-consumer+xml":{source:"iana",compressible:!0},"application/mrb-publish+xml":{source:"iana",compressible:!0},"application/msc-ivr+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msc-mixer+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/msword":{source:"iana",compressible:!1,extensions:["doc","dot"]},"application/mud+json":{source:"iana",compressible:!0},"application/multipart-core":{source:"iana"},"application/mxf":{source:"iana",extensions:["mxf"]},"application/n-quads":{source:"iana",extensions:["nq"]},"application/n-triples":{source:"iana",extensions:["nt"]},"application/nasdata":{source:"iana"},"application/news-checkgroups":{source:"iana",charset:"US-ASCII"},"application/news-groupinfo":{source:"iana",charset:"US-ASCII"},"application/news-transmission":{source:"iana"},"application/nlsml+xml":{source:"iana",compressible:!0},"application/node":{source:"iana",extensions:["cjs"]},"application/nss":{source:"iana"},"application/oauth-authz-req+jwt":{source:"iana"},"application/oblivious-dns-message":{source:"iana"},"application/ocsp-request":{source:"iana"},"application/ocsp-response":{source:"iana"},"application/octet-stream":{source:"iana",compressible:!1,extensions:["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"]},"application/oda":{source:"iana",extensions:["oda"]},"application/odm+xml":{source:"iana",compressible:!0},"application/odx":{source:"iana"},"application/oebps-package+xml":{source:"iana",compressible:!0,extensions:["opf"]},"application/ogg":{source:"iana",compressible:!1,extensions:["ogx"]},"application/omdoc+xml":{source:"apache",compressible:!0,extensions:["omdoc"]},"application/onenote":{source:"apache",extensions:["onetoc","onetoc2","onetmp","onepkg"]},"application/opc-nodeset+xml":{source:"iana",compressible:!0},"application/oscore":{source:"iana"},"application/oxps":{source:"iana",extensions:["oxps"]},"application/p21":{source:"iana"},"application/p21+zip":{source:"iana",compressible:!1},"application/p2p-overlay+xml":{source:"iana",compressible:!0,extensions:["relo"]},"application/parityfec":{source:"iana"},"application/passport":{source:"iana"},"application/patch-ops-error+xml":{source:"iana",compressible:!0,extensions:["xer"]},"application/pdf":{source:"iana",compressible:!1,extensions:["pdf"]},"application/pdx":{source:"iana"},"application/pem-certificate-chain":{source:"iana"},"application/pgp-encrypted":{source:"iana",compressible:!1,extensions:["pgp"]},"application/pgp-keys":{source:"iana",extensions:["asc"]},"application/pgp-signature":{source:"iana",extensions:["asc","sig"]},"application/pics-rules":{source:"apache",extensions:["prf"]},"application/pidf+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pidf-diff+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/pkcs10":{source:"iana",extensions:["p10"]},"application/pkcs12":{source:"iana"},"application/pkcs7-mime":{source:"iana",extensions:["p7m","p7c"]},"application/pkcs7-signature":{source:"iana",extensions:["p7s"]},"application/pkcs8":{source:"iana",extensions:["p8"]},"application/pkcs8-encrypted":{source:"iana"},"application/pkix-attr-cert":{source:"iana",extensions:["ac"]},"application/pkix-cert":{source:"iana",extensions:["cer"]},"application/pkix-crl":{source:"iana",extensions:["crl"]},"application/pkix-pkipath":{source:"iana",extensions:["pkipath"]},"application/pkixcmp":{source:"iana",extensions:["pki"]},"application/pls+xml":{source:"iana",compressible:!0,extensions:["pls"]},"application/poc-settings+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/postscript":{source:"iana",compressible:!0,extensions:["ai","eps","ps"]},"application/ppsp-tracker+json":{source:"iana",compressible:!0},"application/problem+json":{source:"iana",compressible:!0},"application/problem+xml":{source:"iana",compressible:!0},"application/provenance+xml":{source:"iana",compressible:!0,extensions:["provx"]},"application/prs.alvestrand.titrax-sheet":{source:"iana"},"application/prs.cww":{source:"iana",extensions:["cww"]},"application/prs.cyn":{source:"iana",charset:"7-BIT"},"application/prs.hpub+zip":{source:"iana",compressible:!1},"application/prs.nprend":{source:"iana"},"application/prs.plucker":{source:"iana"},"application/prs.rdf-xml-crypt":{source:"iana"},"application/prs.xsf+xml":{source:"iana",compressible:!0},"application/pskc+xml":{source:"iana",compressible:!0,extensions:["pskcxml"]},"application/pvd+json":{source:"iana",compressible:!0},"application/qsig":{source:"iana"},"application/raml+yaml":{compressible:!0,extensions:["raml"]},"application/raptorfec":{source:"iana"},"application/rdap+json":{source:"iana",compressible:!0},"application/rdf+xml":{source:"iana",compressible:!0,extensions:["rdf","owl"]},"application/reginfo+xml":{source:"iana",compressible:!0,extensions:["rif"]},"application/relax-ng-compact-syntax":{source:"iana",extensions:["rnc"]},"application/remote-printing":{source:"iana"},"application/reputon+json":{source:"iana",compressible:!0},"application/resource-lists+xml":{source:"iana",compressible:!0,extensions:["rl"]},"application/resource-lists-diff+xml":{source:"iana",compressible:!0,extensions:["rld"]},"application/rfc+xml":{source:"iana",compressible:!0},"application/riscos":{source:"iana"},"application/rlmi+xml":{source:"iana",compressible:!0},"application/rls-services+xml":{source:"iana",compressible:!0,extensions:["rs"]},"application/route-apd+xml":{source:"iana",compressible:!0,extensions:["rapd"]},"application/route-s-tsid+xml":{source:"iana",compressible:!0,extensions:["sls"]},"application/route-usd+xml":{source:"iana",compressible:!0,extensions:["rusd"]},"application/rpki-ghostbusters":{source:"iana",extensions:["gbr"]},"application/rpki-manifest":{source:"iana",extensions:["mft"]},"application/rpki-publication":{source:"iana"},"application/rpki-roa":{source:"iana",extensions:["roa"]},"application/rpki-updown":{source:"iana"},"application/rsd+xml":{source:"apache",compressible:!0,extensions:["rsd"]},"application/rss+xml":{source:"apache",compressible:!0,extensions:["rss"]},"application/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"application/rtploopback":{source:"iana"},"application/rtx":{source:"iana"},"application/samlassertion+xml":{source:"iana",compressible:!0},"application/samlmetadata+xml":{source:"iana",compressible:!0},"application/sarif+json":{source:"iana",compressible:!0},"application/sarif-external-properties+json":{source:"iana",compressible:!0},"application/sbe":{source:"iana"},"application/sbml+xml":{source:"iana",compressible:!0,extensions:["sbml"]},"application/scaip+xml":{source:"iana",compressible:!0},"application/scim+json":{source:"iana",compressible:!0},"application/scvp-cv-request":{source:"iana",extensions:["scq"]},"application/scvp-cv-response":{source:"iana",extensions:["scs"]},"application/scvp-vp-request":{source:"iana",extensions:["spq"]},"application/scvp-vp-response":{source:"iana",extensions:["spp"]},"application/sdp":{source:"iana",extensions:["sdp"]},"application/secevent+jwt":{source:"iana"},"application/senml+cbor":{source:"iana"},"application/senml+json":{source:"iana",compressible:!0},"application/senml+xml":{source:"iana",compressible:!0,extensions:["senmlx"]},"application/senml-etch+cbor":{source:"iana"},"application/senml-etch+json":{source:"iana",compressible:!0},"application/senml-exi":{source:"iana"},"application/sensml+cbor":{source:"iana"},"application/sensml+json":{source:"iana",compressible:!0},"application/sensml+xml":{source:"iana",compressible:!0,extensions:["sensmlx"]},"application/sensml-exi":{source:"iana"},"application/sep+xml":{source:"iana",compressible:!0},"application/sep-exi":{source:"iana"},"application/session-info":{source:"iana"},"application/set-payment":{source:"iana"},"application/set-payment-initiation":{source:"iana",extensions:["setpay"]},"application/set-registration":{source:"iana"},"application/set-registration-initiation":{source:"iana",extensions:["setreg"]},"application/sgml":{source:"iana"},"application/sgml-open-catalog":{source:"iana"},"application/shf+xml":{source:"iana",compressible:!0,extensions:["shf"]},"application/sieve":{source:"iana",extensions:["siv","sieve"]},"application/simple-filter+xml":{source:"iana",compressible:!0},"application/simple-message-summary":{source:"iana"},"application/simplesymbolcontainer":{source:"iana"},"application/sipc":{source:"iana"},"application/slate":{source:"iana"},"application/smil":{source:"iana"},"application/smil+xml":{source:"iana",compressible:!0,extensions:["smi","smil"]},"application/smpte336m":{source:"iana"},"application/soap+fastinfoset":{source:"iana"},"application/soap+xml":{source:"iana",compressible:!0},"application/sparql-query":{source:"iana",extensions:["rq"]},"application/sparql-results+xml":{source:"iana",compressible:!0,extensions:["srx"]},"application/spdx+json":{source:"iana",compressible:!0},"application/spirits-event+xml":{source:"iana",compressible:!0},"application/sql":{source:"iana"},"application/srgs":{source:"iana",extensions:["gram"]},"application/srgs+xml":{source:"iana",compressible:!0,extensions:["grxml"]},"application/sru+xml":{source:"iana",compressible:!0,extensions:["sru"]},"application/ssdl+xml":{source:"apache",compressible:!0,extensions:["ssdl"]},"application/ssml+xml":{source:"iana",compressible:!0,extensions:["ssml"]},"application/stix+json":{source:"iana",compressible:!0},"application/swid+xml":{source:"iana",compressible:!0,extensions:["swidtag"]},"application/tamp-apex-update":{source:"iana"},"application/tamp-apex-update-confirm":{source:"iana"},"application/tamp-community-update":{source:"iana"},"application/tamp-community-update-confirm":{source:"iana"},"application/tamp-error":{source:"iana"},"application/tamp-sequence-adjust":{source:"iana"},"application/tamp-sequence-adjust-confirm":{source:"iana"},"application/tamp-status-query":{source:"iana"},"application/tamp-status-response":{source:"iana"},"application/tamp-update":{source:"iana"},"application/tamp-update-confirm":{source:"iana"},"application/tar":{compressible:!0},"application/taxii+json":{source:"iana",compressible:!0},"application/td+json":{source:"iana",compressible:!0},"application/tei+xml":{source:"iana",compressible:!0,extensions:["tei","teicorpus"]},"application/tetra_isi":{source:"iana"},"application/thraud+xml":{source:"iana",compressible:!0,extensions:["tfi"]},"application/timestamp-query":{source:"iana"},"application/timestamp-reply":{source:"iana"},"application/timestamped-data":{source:"iana",extensions:["tsd"]},"application/tlsrpt+gzip":{source:"iana"},"application/tlsrpt+json":{source:"iana",compressible:!0},"application/tnauthlist":{source:"iana"},"application/token-introspection+jwt":{source:"iana"},"application/toml":{compressible:!0,extensions:["toml"]},"application/trickle-ice-sdpfrag":{source:"iana"},"application/trig":{source:"iana",extensions:["trig"]},"application/ttml+xml":{source:"iana",compressible:!0,extensions:["ttml"]},"application/tve-trigger":{source:"iana"},"application/tzif":{source:"iana"},"application/tzif-leap":{source:"iana"},"application/ubjson":{compressible:!1,extensions:["ubj"]},"application/ulpfec":{source:"iana"},"application/urc-grpsheet+xml":{source:"iana",compressible:!0},"application/urc-ressheet+xml":{source:"iana",compressible:!0,extensions:["rsheet"]},"application/urc-targetdesc+xml":{source:"iana",compressible:!0,extensions:["td"]},"application/urc-uisocketdesc+xml":{source:"iana",compressible:!0},"application/vcard+json":{source:"iana",compressible:!0},"application/vcard+xml":{source:"iana",compressible:!0},"application/vemmi":{source:"iana"},"application/vividence.scriptfile":{source:"apache"},"application/vnd.1000minds.decision-model+xml":{source:"iana",compressible:!0,extensions:["1km"]},"application/vnd.3gpp-prose+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-prose-pc3ch+xml":{source:"iana",compressible:!0},"application/vnd.3gpp-v2x-local-service-information":{source:"iana"},"application/vnd.3gpp.5gnas":{source:"iana"},"application/vnd.3gpp.access-transfer-events+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.bsf+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gmop+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.gtpc":{source:"iana"},"application/vnd.3gpp.interworking-data":{source:"iana"},"application/vnd.3gpp.lpp":{source:"iana"},"application/vnd.3gpp.mc-signalling-ear":{source:"iana"},"application/vnd.3gpp.mcdata-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-payload":{source:"iana"},"application/vnd.3gpp.mcdata-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-signalling":{source:"iana"},"application/vnd.3gpp.mcdata-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcdata-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-floor-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-signed+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-ue-init-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcptt-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-command+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-affiliation-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-location-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-mbms-usage-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-service-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-transmission-request+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-ue-config+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mcvideo-user-profile+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.mid-call+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ngap":{source:"iana"},"application/vnd.3gpp.pfcp":{source:"iana"},"application/vnd.3gpp.pic-bw-large":{source:"iana",extensions:["plb"]},"application/vnd.3gpp.pic-bw-small":{source:"iana",extensions:["psb"]},"application/vnd.3gpp.pic-bw-var":{source:"iana",extensions:["pvb"]},"application/vnd.3gpp.s1ap":{source:"iana"},"application/vnd.3gpp.sms":{source:"iana"},"application/vnd.3gpp.sms+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-ext+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.srvcc-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.state-and-event-info+xml":{source:"iana",compressible:!0},"application/vnd.3gpp.ussd+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.bcmcsinfo+xml":{source:"iana",compressible:!0},"application/vnd.3gpp2.sms":{source:"iana"},"application/vnd.3gpp2.tcap":{source:"iana",extensions:["tcap"]},"application/vnd.3lightssoftware.imagescal":{source:"iana"},"application/vnd.3m.post-it-notes":{source:"iana",extensions:["pwn"]},"application/vnd.accpac.simply.aso":{source:"iana",extensions:["aso"]},"application/vnd.accpac.simply.imp":{source:"iana",extensions:["imp"]},"application/vnd.acucobol":{source:"iana",extensions:["acu"]},"application/vnd.acucorp":{source:"iana",extensions:["atc","acutc"]},"application/vnd.adobe.air-application-installer-package+zip":{source:"apache",compressible:!1,extensions:["air"]},"application/vnd.adobe.flash.movie":{source:"iana"},"application/vnd.adobe.formscentral.fcdt":{source:"iana",extensions:["fcdt"]},"application/vnd.adobe.fxp":{source:"iana",extensions:["fxp","fxpl"]},"application/vnd.adobe.partial-upload":{source:"iana"},"application/vnd.adobe.xdp+xml":{source:"iana",compressible:!0,extensions:["xdp"]},"application/vnd.adobe.xfdf":{source:"iana",extensions:["xfdf"]},"application/vnd.aether.imp":{source:"iana"},"application/vnd.afpc.afplinedata":{source:"iana"},"application/vnd.afpc.afplinedata-pagedef":{source:"iana"},"application/vnd.afpc.cmoca-cmresource":{source:"iana"},"application/vnd.afpc.foca-charset":{source:"iana"},"application/vnd.afpc.foca-codedfont":{source:"iana"},"application/vnd.afpc.foca-codepage":{source:"iana"},"application/vnd.afpc.modca":{source:"iana"},"application/vnd.afpc.modca-cmtable":{source:"iana"},"application/vnd.afpc.modca-formdef":{source:"iana"},"application/vnd.afpc.modca-mediummap":{source:"iana"},"application/vnd.afpc.modca-objectcontainer":{source:"iana"},"application/vnd.afpc.modca-overlay":{source:"iana"},"application/vnd.afpc.modca-pagesegment":{source:"iana"},"application/vnd.age":{source:"iana",extensions:["age"]},"application/vnd.ah-barcode":{source:"iana"},"application/vnd.ahead.space":{source:"iana",extensions:["ahead"]},"application/vnd.airzip.filesecure.azf":{source:"iana",extensions:["azf"]},"application/vnd.airzip.filesecure.azs":{source:"iana",extensions:["azs"]},"application/vnd.amadeus+json":{source:"iana",compressible:!0},"application/vnd.amazon.ebook":{source:"apache",extensions:["azw"]},"application/vnd.amazon.mobi8-ebook":{source:"iana"},"application/vnd.americandynamics.acc":{source:"iana",extensions:["acc"]},"application/vnd.amiga.ami":{source:"iana",extensions:["ami"]},"application/vnd.amundsen.maze+xml":{source:"iana",compressible:!0},"application/vnd.android.ota":{source:"iana"},"application/vnd.android.package-archive":{source:"apache",compressible:!1,extensions:["apk"]},"application/vnd.anki":{source:"iana"},"application/vnd.anser-web-certificate-issue-initiation":{source:"iana",extensions:["cii"]},"application/vnd.anser-web-funds-transfer-initiation":{source:"apache",extensions:["fti"]},"application/vnd.antix.game-component":{source:"iana",extensions:["atx"]},"application/vnd.apache.arrow.file":{source:"iana"},"application/vnd.apache.arrow.stream":{source:"iana"},"application/vnd.apache.thrift.binary":{source:"iana"},"application/vnd.apache.thrift.compact":{source:"iana"},"application/vnd.apache.thrift.json":{source:"iana"},"application/vnd.api+json":{source:"iana",compressible:!0},"application/vnd.aplextor.warrp+json":{source:"iana",compressible:!0},"application/vnd.apothekende.reservation+json":{source:"iana",compressible:!0},"application/vnd.apple.installer+xml":{source:"iana",compressible:!0,extensions:["mpkg"]},"application/vnd.apple.keynote":{source:"iana",extensions:["key"]},"application/vnd.apple.mpegurl":{source:"iana",extensions:["m3u8"]},"application/vnd.apple.numbers":{source:"iana",extensions:["numbers"]},"application/vnd.apple.pages":{source:"iana",extensions:["pages"]},"application/vnd.apple.pkpass":{compressible:!1,extensions:["pkpass"]},"application/vnd.arastra.swi":{source:"iana"},"application/vnd.aristanetworks.swi":{source:"iana",extensions:["swi"]},"application/vnd.artisan+json":{source:"iana",compressible:!0},"application/vnd.artsquare":{source:"iana"},"application/vnd.astraea-software.iota":{source:"iana",extensions:["iota"]},"application/vnd.audiograph":{source:"iana",extensions:["aep"]},"application/vnd.autopackage":{source:"iana"},"application/vnd.avalon+json":{source:"iana",compressible:!0},"application/vnd.avistar+xml":{source:"iana",compressible:!0},"application/vnd.balsamiq.bmml+xml":{source:"iana",compressible:!0,extensions:["bmml"]},"application/vnd.balsamiq.bmpr":{source:"iana"},"application/vnd.banana-accounting":{source:"iana"},"application/vnd.bbf.usp.error":{source:"iana"},"application/vnd.bbf.usp.msg":{source:"iana"},"application/vnd.bbf.usp.msg+json":{source:"iana",compressible:!0},"application/vnd.bekitzur-stech+json":{source:"iana",compressible:!0},"application/vnd.bint.med-content":{source:"iana"},"application/vnd.biopax.rdf+xml":{source:"iana",compressible:!0},"application/vnd.blink-idb-value-wrapper":{source:"iana"},"application/vnd.blueice.multipass":{source:"iana",extensions:["mpm"]},"application/vnd.bluetooth.ep.oob":{source:"iana"},"application/vnd.bluetooth.le.oob":{source:"iana"},"application/vnd.bmi":{source:"iana",extensions:["bmi"]},"application/vnd.bpf":{source:"iana"},"application/vnd.bpf3":{source:"iana"},"application/vnd.businessobjects":{source:"iana",extensions:["rep"]},"application/vnd.byu.uapi+json":{source:"iana",compressible:!0},"application/vnd.cab-jscript":{source:"iana"},"application/vnd.canon-cpdl":{source:"iana"},"application/vnd.canon-lips":{source:"iana"},"application/vnd.capasystems-pg+json":{source:"iana",compressible:!0},"application/vnd.cendio.thinlinc.clientconf":{source:"iana"},"application/vnd.century-systems.tcp_stream":{source:"iana"},"application/vnd.chemdraw+xml":{source:"iana",compressible:!0,extensions:["cdxml"]},"application/vnd.chess-pgn":{source:"iana"},"application/vnd.chipnuts.karaoke-mmd":{source:"iana",extensions:["mmd"]},"application/vnd.ciedi":{source:"iana"},"application/vnd.cinderella":{source:"iana",extensions:["cdy"]},"application/vnd.cirpack.isdn-ext":{source:"iana"},"application/vnd.citationstyles.style+xml":{source:"iana",compressible:!0,extensions:["csl"]},"application/vnd.claymore":{source:"iana",extensions:["cla"]},"application/vnd.cloanto.rp9":{source:"iana",extensions:["rp9"]},"application/vnd.clonk.c4group":{source:"iana",extensions:["c4g","c4d","c4f","c4p","c4u"]},"application/vnd.cluetrust.cartomobile-config":{source:"iana",extensions:["c11amc"]},"application/vnd.cluetrust.cartomobile-config-pkg":{source:"iana",extensions:["c11amz"]},"application/vnd.coffeescript":{source:"iana"},"application/vnd.collabio.xodocuments.document":{source:"iana"},"application/vnd.collabio.xodocuments.document-template":{source:"iana"},"application/vnd.collabio.xodocuments.presentation":{source:"iana"},"application/vnd.collabio.xodocuments.presentation-template":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet":{source:"iana"},"application/vnd.collabio.xodocuments.spreadsheet-template":{source:"iana"},"application/vnd.collection+json":{source:"iana",compressible:!0},"application/vnd.collection.doc+json":{source:"iana",compressible:!0},"application/vnd.collection.next+json":{source:"iana",compressible:!0},"application/vnd.comicbook+zip":{source:"iana",compressible:!1},"application/vnd.comicbook-rar":{source:"iana"},"application/vnd.commerce-battelle":{source:"iana"},"application/vnd.commonspace":{source:"iana",extensions:["csp"]},"application/vnd.contact.cmsg":{source:"iana",extensions:["cdbcmsg"]},"application/vnd.coreos.ignition+json":{source:"iana",compressible:!0},"application/vnd.cosmocaller":{source:"iana",extensions:["cmc"]},"application/vnd.crick.clicker":{source:"iana",extensions:["clkx"]},"application/vnd.crick.clicker.keyboard":{source:"iana",extensions:["clkk"]},"application/vnd.crick.clicker.palette":{source:"iana",extensions:["clkp"]},"application/vnd.crick.clicker.template":{source:"iana",extensions:["clkt"]},"application/vnd.crick.clicker.wordbank":{source:"iana",extensions:["clkw"]},"application/vnd.criticaltools.wbs+xml":{source:"iana",compressible:!0,extensions:["wbs"]},"application/vnd.cryptii.pipe+json":{source:"iana",compressible:!0},"application/vnd.crypto-shade-file":{source:"iana"},"application/vnd.cryptomator.encrypted":{source:"iana"},"application/vnd.cryptomator.vault":{source:"iana"},"application/vnd.ctc-posml":{source:"iana",extensions:["pml"]},"application/vnd.ctct.ws+xml":{source:"iana",compressible:!0},"application/vnd.cups-pdf":{source:"iana"},"application/vnd.cups-postscript":{source:"iana"},"application/vnd.cups-ppd":{source:"iana",extensions:["ppd"]},"application/vnd.cups-raster":{source:"iana"},"application/vnd.cups-raw":{source:"iana"},"application/vnd.curl":{source:"iana"},"application/vnd.curl.car":{source:"apache",extensions:["car"]},"application/vnd.curl.pcurl":{source:"apache",extensions:["pcurl"]},"application/vnd.cyan.dean.root+xml":{source:"iana",compressible:!0},"application/vnd.cybank":{source:"iana"},"application/vnd.cyclonedx+json":{source:"iana",compressible:!0},"application/vnd.cyclonedx+xml":{source:"iana",compressible:!0},"application/vnd.d2l.coursepackage1p0+zip":{source:"iana",compressible:!1},"application/vnd.d3m-dataset":{source:"iana"},"application/vnd.d3m-problem":{source:"iana"},"application/vnd.dart":{source:"iana",compressible:!0,extensions:["dart"]},"application/vnd.data-vision.rdz":{source:"iana",extensions:["rdz"]},"application/vnd.datapackage+json":{source:"iana",compressible:!0},"application/vnd.dataresource+json":{source:"iana",compressible:!0},"application/vnd.dbf":{source:"iana",extensions:["dbf"]},"application/vnd.debian.binary-package":{source:"iana"},"application/vnd.dece.data":{source:"iana",extensions:["uvf","uvvf","uvd","uvvd"]},"application/vnd.dece.ttml+xml":{source:"iana",compressible:!0,extensions:["uvt","uvvt"]},"application/vnd.dece.unspecified":{source:"iana",extensions:["uvx","uvvx"]},"application/vnd.dece.zip":{source:"iana",extensions:["uvz","uvvz"]},"application/vnd.denovo.fcselayout-link":{source:"iana",extensions:["fe_launch"]},"application/vnd.desmume.movie":{source:"iana"},"application/vnd.dir-bi.plate-dl-nosuffix":{source:"iana"},"application/vnd.dm.delegation+xml":{source:"iana",compressible:!0},"application/vnd.dna":{source:"iana",extensions:["dna"]},"application/vnd.document+json":{source:"iana",compressible:!0},"application/vnd.dolby.mlp":{source:"apache",extensions:["mlp"]},"application/vnd.dolby.mobile.1":{source:"iana"},"application/vnd.dolby.mobile.2":{source:"iana"},"application/vnd.doremir.scorecloud-binary-document":{source:"iana"},"application/vnd.dpgraph":{source:"iana",extensions:["dpg"]},"application/vnd.dreamfactory":{source:"iana",extensions:["dfac"]},"application/vnd.drive+json":{source:"iana",compressible:!0},"application/vnd.ds-keypoint":{source:"apache",extensions:["kpxx"]},"application/vnd.dtg.local":{source:"iana"},"application/vnd.dtg.local.flash":{source:"iana"},"application/vnd.dtg.local.html":{source:"iana"},"application/vnd.dvb.ait":{source:"iana",extensions:["ait"]},"application/vnd.dvb.dvbisl+xml":{source:"iana",compressible:!0},"application/vnd.dvb.dvbj":{source:"iana"},"application/vnd.dvb.esgcontainer":{source:"iana"},"application/vnd.dvb.ipdcdftnotifaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess":{source:"iana"},"application/vnd.dvb.ipdcesgaccess2":{source:"iana"},"application/vnd.dvb.ipdcesgpdd":{source:"iana"},"application/vnd.dvb.ipdcroaming":{source:"iana"},"application/vnd.dvb.iptv.alfec-base":{source:"iana"},"application/vnd.dvb.iptv.alfec-enhancement":{source:"iana"},"application/vnd.dvb.notif-aggregate-root+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-container+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-generic+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-msglist+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-request+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-ia-registration-response+xml":{source:"iana",compressible:!0},"application/vnd.dvb.notif-init+xml":{source:"iana",compressible:!0},"application/vnd.dvb.pfr":{source:"iana"},"application/vnd.dvb.service":{source:"iana",extensions:["svc"]},"application/vnd.dxr":{source:"iana"},"application/vnd.dynageo":{source:"iana",extensions:["geo"]},"application/vnd.dzr":{source:"iana"},"application/vnd.easykaraoke.cdgdownload":{source:"iana"},"application/vnd.ecdis-update":{source:"iana"},"application/vnd.ecip.rlp":{source:"iana"},"application/vnd.eclipse.ditto+json":{source:"iana",compressible:!0},"application/vnd.ecowin.chart":{source:"iana",extensions:["mag"]},"application/vnd.ecowin.filerequest":{source:"iana"},"application/vnd.ecowin.fileupdate":{source:"iana"},"application/vnd.ecowin.series":{source:"iana"},"application/vnd.ecowin.seriesrequest":{source:"iana"},"application/vnd.ecowin.seriesupdate":{source:"iana"},"application/vnd.efi.img":{source:"iana"},"application/vnd.efi.iso":{source:"iana"},"application/vnd.emclient.accessrequest+xml":{source:"iana",compressible:!0},"application/vnd.enliven":{source:"iana",extensions:["nml"]},"application/vnd.enphase.envoy":{source:"iana"},"application/vnd.eprints.data+xml":{source:"iana",compressible:!0},"application/vnd.epson.esf":{source:"iana",extensions:["esf"]},"application/vnd.epson.msf":{source:"iana",extensions:["msf"]},"application/vnd.epson.quickanime":{source:"iana",extensions:["qam"]},"application/vnd.epson.salt":{source:"iana",extensions:["slt"]},"application/vnd.epson.ssf":{source:"iana",extensions:["ssf"]},"application/vnd.ericsson.quickcall":{source:"iana"},"application/vnd.espass-espass+zip":{source:"iana",compressible:!1},"application/vnd.eszigno3+xml":{source:"iana",compressible:!0,extensions:["es3","et3"]},"application/vnd.etsi.aoc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.asic-e+zip":{source:"iana",compressible:!1},"application/vnd.etsi.asic-s+zip":{source:"iana",compressible:!1},"application/vnd.etsi.cug+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvcommand+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-bc+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-cod+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsad-npvr+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvservice+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvsync+xml":{source:"iana",compressible:!0},"application/vnd.etsi.iptvueprofile+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mcid+xml":{source:"iana",compressible:!0},"application/vnd.etsi.mheg5":{source:"iana"},"application/vnd.etsi.overload-control-policy-dataset+xml":{source:"iana",compressible:!0},"application/vnd.etsi.pstn+xml":{source:"iana",compressible:!0},"application/vnd.etsi.sci+xml":{source:"iana",compressible:!0},"application/vnd.etsi.simservs+xml":{source:"iana",compressible:!0},"application/vnd.etsi.timestamp-token":{source:"iana"},"application/vnd.etsi.tsl+xml":{source:"iana",compressible:!0},"application/vnd.etsi.tsl.der":{source:"iana"},"application/vnd.eu.kasparian.car+json":{source:"iana",compressible:!0},"application/vnd.eudora.data":{source:"iana"},"application/vnd.evolv.ecig.profile":{source:"iana"},"application/vnd.evolv.ecig.settings":{source:"iana"},"application/vnd.evolv.ecig.theme":{source:"iana"},"application/vnd.exstream-empower+zip":{source:"iana",compressible:!1},"application/vnd.exstream-package":{source:"iana"},"application/vnd.ezpix-album":{source:"iana",extensions:["ez2"]},"application/vnd.ezpix-package":{source:"iana",extensions:["ez3"]},"application/vnd.f-secure.mobile":{source:"iana"},"application/vnd.familysearch.gedcom+zip":{source:"iana",compressible:!1},"application/vnd.fastcopy-disk-image":{source:"iana"},"application/vnd.fdf":{source:"iana",extensions:["fdf"]},"application/vnd.fdsn.mseed":{source:"iana",extensions:["mseed"]},"application/vnd.fdsn.seed":{source:"iana",extensions:["seed","dataless"]},"application/vnd.ffsns":{source:"iana"},"application/vnd.ficlab.flb+zip":{source:"iana",compressible:!1},"application/vnd.filmit.zfc":{source:"iana"},"application/vnd.fints":{source:"iana"},"application/vnd.firemonkeys.cloudcell":{source:"iana"},"application/vnd.flographit":{source:"iana",extensions:["gph"]},"application/vnd.fluxtime.clip":{source:"iana",extensions:["ftc"]},"application/vnd.font-fontforge-sfd":{source:"iana"},"application/vnd.framemaker":{source:"iana",extensions:["fm","frame","maker","book"]},"application/vnd.frogans.fnc":{source:"iana",extensions:["fnc"]},"application/vnd.frogans.ltf":{source:"iana",extensions:["ltf"]},"application/vnd.fsc.weblaunch":{source:"iana",extensions:["fsc"]},"application/vnd.fujifilm.fb.docuworks":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.binder":{source:"iana"},"application/vnd.fujifilm.fb.docuworks.container":{source:"iana"},"application/vnd.fujifilm.fb.jfi+xml":{source:"iana",compressible:!0},"application/vnd.fujitsu.oasys":{source:"iana",extensions:["oas"]},"application/vnd.fujitsu.oasys2":{source:"iana",extensions:["oa2"]},"application/vnd.fujitsu.oasys3":{source:"iana",extensions:["oa3"]},"application/vnd.fujitsu.oasysgp":{source:"iana",extensions:["fg5"]},"application/vnd.fujitsu.oasysprs":{source:"iana",extensions:["bh2"]},"application/vnd.fujixerox.art-ex":{source:"iana"},"application/vnd.fujixerox.art4":{source:"iana"},"application/vnd.fujixerox.ddd":{source:"iana",extensions:["ddd"]},"application/vnd.fujixerox.docuworks":{source:"iana",extensions:["xdw"]},"application/vnd.fujixerox.docuworks.binder":{source:"iana",extensions:["xbd"]},"application/vnd.fujixerox.docuworks.container":{source:"iana"},"application/vnd.fujixerox.hbpl":{source:"iana"},"application/vnd.fut-misnet":{source:"iana"},"application/vnd.futoin+cbor":{source:"iana"},"application/vnd.futoin+json":{source:"iana",compressible:!0},"application/vnd.fuzzysheet":{source:"iana",extensions:["fzs"]},"application/vnd.genomatix.tuxedo":{source:"iana",extensions:["txd"]},"application/vnd.gentics.grd+json":{source:"iana",compressible:!0},"application/vnd.geo+json":{source:"iana",compressible:!0},"application/vnd.geocube+xml":{source:"iana",compressible:!0},"application/vnd.geogebra.file":{source:"iana",extensions:["ggb"]},"application/vnd.geogebra.slides":{source:"iana"},"application/vnd.geogebra.tool":{source:"iana",extensions:["ggt"]},"application/vnd.geometry-explorer":{source:"iana",extensions:["gex","gre"]},"application/vnd.geonext":{source:"iana",extensions:["gxt"]},"application/vnd.geoplan":{source:"iana",extensions:["g2w"]},"application/vnd.geospace":{source:"iana",extensions:["g3w"]},"application/vnd.gerber":{source:"iana"},"application/vnd.globalplatform.card-content-mgt":{source:"iana"},"application/vnd.globalplatform.card-content-mgt-response":{source:"iana"},"application/vnd.gmx":{source:"iana",extensions:["gmx"]},"application/vnd.google-apps.document":{compressible:!1,extensions:["gdoc"]},"application/vnd.google-apps.presentation":{compressible:!1,extensions:["gslides"]},"application/vnd.google-apps.spreadsheet":{compressible:!1,extensions:["gsheet"]},"application/vnd.google-earth.kml+xml":{source:"iana",compressible:!0,extensions:["kml"]},"application/vnd.google-earth.kmz":{source:"iana",compressible:!1,extensions:["kmz"]},"application/vnd.gov.sk.e-form+xml":{source:"iana",compressible:!0},"application/vnd.gov.sk.e-form+zip":{source:"iana",compressible:!1},"application/vnd.gov.sk.xmldatacontainer+xml":{source:"iana",compressible:!0},"application/vnd.grafeq":{source:"iana",extensions:["gqf","gqs"]},"application/vnd.gridmp":{source:"iana"},"application/vnd.groove-account":{source:"iana",extensions:["gac"]},"application/vnd.groove-help":{source:"iana",extensions:["ghf"]},"application/vnd.groove-identity-message":{source:"iana",extensions:["gim"]},"application/vnd.groove-injector":{source:"iana",extensions:["grv"]},"application/vnd.groove-tool-message":{source:"iana",extensions:["gtm"]},"application/vnd.groove-tool-template":{source:"iana",extensions:["tpl"]},"application/vnd.groove-vcard":{source:"iana",extensions:["vcg"]},"application/vnd.hal+json":{source:"iana",compressible:!0},"application/vnd.hal+xml":{source:"iana",compressible:!0,extensions:["hal"]},"application/vnd.handheld-entertainment+xml":{source:"iana",compressible:!0,extensions:["zmm"]},"application/vnd.hbci":{source:"iana",extensions:["hbci"]},"application/vnd.hc+json":{source:"iana",compressible:!0},"application/vnd.hcl-bireports":{source:"iana"},"application/vnd.hdt":{source:"iana"},"application/vnd.heroku+json":{source:"iana",compressible:!0},"application/vnd.hhe.lesson-player":{source:"iana",extensions:["les"]},"application/vnd.hl7cda+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hl7v2+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.hp-hpgl":{source:"iana",extensions:["hpgl"]},"application/vnd.hp-hpid":{source:"iana",extensions:["hpid"]},"application/vnd.hp-hps":{source:"iana",extensions:["hps"]},"application/vnd.hp-jlyt":{source:"iana",extensions:["jlt"]},"application/vnd.hp-pcl":{source:"iana",extensions:["pcl"]},"application/vnd.hp-pclxl":{source:"iana",extensions:["pclxl"]},"application/vnd.httphone":{source:"iana"},"application/vnd.hydrostatix.sof-data":{source:"iana",extensions:["sfd-hdstx"]},"application/vnd.hyper+json":{source:"iana",compressible:!0},"application/vnd.hyper-item+json":{source:"iana",compressible:!0},"application/vnd.hyperdrive+json":{source:"iana",compressible:!0},"application/vnd.hzn-3d-crossword":{source:"iana"},"application/vnd.ibm.afplinedata":{source:"iana"},"application/vnd.ibm.electronic-media":{source:"iana"},"application/vnd.ibm.minipay":{source:"iana",extensions:["mpy"]},"application/vnd.ibm.modcap":{source:"iana",extensions:["afp","listafp","list3820"]},"application/vnd.ibm.rights-management":{source:"iana",extensions:["irm"]},"application/vnd.ibm.secure-container":{source:"iana",extensions:["sc"]},"application/vnd.iccprofile":{source:"iana",extensions:["icc","icm"]},"application/vnd.ieee.1905":{source:"iana"},"application/vnd.igloader":{source:"iana",extensions:["igl"]},"application/vnd.imagemeter.folder+zip":{source:"iana",compressible:!1},"application/vnd.imagemeter.image+zip":{source:"iana",compressible:!1},"application/vnd.immervision-ivp":{source:"iana",extensions:["ivp"]},"application/vnd.immervision-ivu":{source:"iana",extensions:["ivu"]},"application/vnd.ims.imsccv1p1":{source:"iana"},"application/vnd.ims.imsccv1p2":{source:"iana"},"application/vnd.ims.imsccv1p3":{source:"iana"},"application/vnd.ims.lis.v2.result+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolconsumerprofile+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolproxy.id+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings+json":{source:"iana",compressible:!0},"application/vnd.ims.lti.v2.toolsettings.simple+json":{source:"iana",compressible:!0},"application/vnd.informedcontrol.rms+xml":{source:"iana",compressible:!0},"application/vnd.informix-visionary":{source:"iana"},"application/vnd.infotech.project":{source:"iana"},"application/vnd.infotech.project+xml":{source:"iana",compressible:!0},"application/vnd.innopath.wamp.notification":{source:"iana"},"application/vnd.insors.igm":{source:"iana",extensions:["igm"]},"application/vnd.intercon.formnet":{source:"iana",extensions:["xpw","xpx"]},"application/vnd.intergeo":{source:"iana",extensions:["i2g"]},"application/vnd.intertrust.digibox":{source:"iana"},"application/vnd.intertrust.nncp":{source:"iana"},"application/vnd.intu.qbo":{source:"iana",extensions:["qbo"]},"application/vnd.intu.qfx":{source:"iana",extensions:["qfx"]},"application/vnd.iptc.g2.catalogitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.conceptitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.knowledgeitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.newsmessage+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.packageitem+xml":{source:"iana",compressible:!0},"application/vnd.iptc.g2.planningitem+xml":{source:"iana",compressible:!0},"application/vnd.ipunplugged.rcprofile":{source:"iana",extensions:["rcprofile"]},"application/vnd.irepository.package+xml":{source:"iana",compressible:!0,extensions:["irp"]},"application/vnd.is-xpr":{source:"iana",extensions:["xpr"]},"application/vnd.isac.fcs":{source:"iana",extensions:["fcs"]},"application/vnd.iso11783-10+zip":{source:"iana",compressible:!1},"application/vnd.jam":{source:"iana",extensions:["jam"]},"application/vnd.japannet-directory-service":{source:"iana"},"application/vnd.japannet-jpnstore-wakeup":{source:"iana"},"application/vnd.japannet-payment-wakeup":{source:"iana"},"application/vnd.japannet-registration":{source:"iana"},"application/vnd.japannet-registration-wakeup":{source:"iana"},"application/vnd.japannet-setstore-wakeup":{source:"iana"},"application/vnd.japannet-verification":{source:"iana"},"application/vnd.japannet-verification-wakeup":{source:"iana"},"application/vnd.jcp.javame.midlet-rms":{source:"iana",extensions:["rms"]},"application/vnd.jisp":{source:"iana",extensions:["jisp"]},"application/vnd.joost.joda-archive":{source:"iana",extensions:["joda"]},"application/vnd.jsk.isdn-ngn":{source:"iana"},"application/vnd.kahootz":{source:"iana",extensions:["ktz","ktr"]},"application/vnd.kde.karbon":{source:"iana",extensions:["karbon"]},"application/vnd.kde.kchart":{source:"iana",extensions:["chrt"]},"application/vnd.kde.kformula":{source:"iana",extensions:["kfo"]},"application/vnd.kde.kivio":{source:"iana",extensions:["flw"]},"application/vnd.kde.kontour":{source:"iana",extensions:["kon"]},"application/vnd.kde.kpresenter":{source:"iana",extensions:["kpr","kpt"]},"application/vnd.kde.kspread":{source:"iana",extensions:["ksp"]},"application/vnd.kde.kword":{source:"iana",extensions:["kwd","kwt"]},"application/vnd.kenameaapp":{source:"iana",extensions:["htke"]},"application/vnd.kidspiration":{source:"iana",extensions:["kia"]},"application/vnd.kinar":{source:"iana",extensions:["kne","knp"]},"application/vnd.koan":{source:"iana",extensions:["skp","skd","skt","skm"]},"application/vnd.kodak-descriptor":{source:"iana",extensions:["sse"]},"application/vnd.las":{source:"iana"},"application/vnd.las.las+json":{source:"iana",compressible:!0},"application/vnd.las.las+xml":{source:"iana",compressible:!0,extensions:["lasxml"]},"application/vnd.laszip":{source:"iana"},"application/vnd.leap+json":{source:"iana",compressible:!0},"application/vnd.liberty-request+xml":{source:"iana",compressible:!0},"application/vnd.llamagraphics.life-balance.desktop":{source:"iana",extensions:["lbd"]},"application/vnd.llamagraphics.life-balance.exchange+xml":{source:"iana",compressible:!0,extensions:["lbe"]},"application/vnd.logipipe.circuit+zip":{source:"iana",compressible:!1},"application/vnd.loom":{source:"iana"},"application/vnd.lotus-1-2-3":{source:"iana",extensions:["123"]},"application/vnd.lotus-approach":{source:"iana",extensions:["apr"]},"application/vnd.lotus-freelance":{source:"iana",extensions:["pre"]},"application/vnd.lotus-notes":{source:"iana",extensions:["nsf"]},"application/vnd.lotus-organizer":{source:"iana",extensions:["org"]},"application/vnd.lotus-screencam":{source:"iana",extensions:["scm"]},"application/vnd.lotus-wordpro":{source:"iana",extensions:["lwp"]},"application/vnd.macports.portpkg":{source:"iana",extensions:["portpkg"]},"application/vnd.mapbox-vector-tile":{source:"iana",extensions:["mvt"]},"application/vnd.marlin.drm.actiontoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.conftoken+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.license+xml":{source:"iana",compressible:!0},"application/vnd.marlin.drm.mdcf":{source:"iana"},"application/vnd.mason+json":{source:"iana",compressible:!0},"application/vnd.maxar.archive.3tz+zip":{source:"iana",compressible:!1},"application/vnd.maxmind.maxmind-db":{source:"iana"},"application/vnd.mcd":{source:"iana",extensions:["mcd"]},"application/vnd.medcalcdata":{source:"iana",extensions:["mc1"]},"application/vnd.mediastation.cdkey":{source:"iana",extensions:["cdkey"]},"application/vnd.meridian-slingshot":{source:"iana"},"application/vnd.mfer":{source:"iana",extensions:["mwf"]},"application/vnd.mfmp":{source:"iana",extensions:["mfm"]},"application/vnd.micro+json":{source:"iana",compressible:!0},"application/vnd.micrografx.flo":{source:"iana",extensions:["flo"]},"application/vnd.micrografx.igx":{source:"iana",extensions:["igx"]},"application/vnd.microsoft.portable-executable":{source:"iana"},"application/vnd.microsoft.windows.thumbnail-cache":{source:"iana"},"application/vnd.miele+json":{source:"iana",compressible:!0},"application/vnd.mif":{source:"iana",extensions:["mif"]},"application/vnd.minisoft-hp3000-save":{source:"iana"},"application/vnd.mitsubishi.misty-guard.trustweb":{source:"iana"},"application/vnd.mobius.daf":{source:"iana",extensions:["daf"]},"application/vnd.mobius.dis":{source:"iana",extensions:["dis"]},"application/vnd.mobius.mbk":{source:"iana",extensions:["mbk"]},"application/vnd.mobius.mqy":{source:"iana",extensions:["mqy"]},"application/vnd.mobius.msl":{source:"iana",extensions:["msl"]},"application/vnd.mobius.plc":{source:"iana",extensions:["plc"]},"application/vnd.mobius.txf":{source:"iana",extensions:["txf"]},"application/vnd.mophun.application":{source:"iana",extensions:["mpn"]},"application/vnd.mophun.certificate":{source:"iana",extensions:["mpc"]},"application/vnd.motorola.flexsuite":{source:"iana"},"application/vnd.motorola.flexsuite.adsi":{source:"iana"},"application/vnd.motorola.flexsuite.fis":{source:"iana"},"application/vnd.motorola.flexsuite.gotap":{source:"iana"},"application/vnd.motorola.flexsuite.kmr":{source:"iana"},"application/vnd.motorola.flexsuite.ttc":{source:"iana"},"application/vnd.motorola.flexsuite.wem":{source:"iana"},"application/vnd.motorola.iprm":{source:"iana"},"application/vnd.mozilla.xul+xml":{source:"iana",compressible:!0,extensions:["xul"]},"application/vnd.ms-3mfdocument":{source:"iana"},"application/vnd.ms-artgalry":{source:"iana",extensions:["cil"]},"application/vnd.ms-asf":{source:"iana"},"application/vnd.ms-cab-compressed":{source:"iana",extensions:["cab"]},"application/vnd.ms-color.iccprofile":{source:"apache"},"application/vnd.ms-excel":{source:"iana",compressible:!1,extensions:["xls","xlm","xla","xlc","xlt","xlw"]},"application/vnd.ms-excel.addin.macroenabled.12":{source:"iana",extensions:["xlam"]},"application/vnd.ms-excel.sheet.binary.macroenabled.12":{source:"iana",extensions:["xlsb"]},"application/vnd.ms-excel.sheet.macroenabled.12":{source:"iana",extensions:["xlsm"]},"application/vnd.ms-excel.template.macroenabled.12":{source:"iana",extensions:["xltm"]},"application/vnd.ms-fontobject":{source:"iana",compressible:!0,extensions:["eot"]},"application/vnd.ms-htmlhelp":{source:"iana",extensions:["chm"]},"application/vnd.ms-ims":{source:"iana",extensions:["ims"]},"application/vnd.ms-lrm":{source:"iana",extensions:["lrm"]},"application/vnd.ms-office.activex+xml":{source:"iana",compressible:!0},"application/vnd.ms-officetheme":{source:"iana",extensions:["thmx"]},"application/vnd.ms-opentype":{source:"apache",compressible:!0},"application/vnd.ms-outlook":{compressible:!1,extensions:["msg"]},"application/vnd.ms-package.obfuscated-opentype":{source:"apache"},"application/vnd.ms-pki.seccat":{source:"apache",extensions:["cat"]},"application/vnd.ms-pki.stl":{source:"apache",extensions:["stl"]},"application/vnd.ms-playready.initiator+xml":{source:"iana",compressible:!0},"application/vnd.ms-powerpoint":{source:"iana",compressible:!1,extensions:["ppt","pps","pot"]},"application/vnd.ms-powerpoint.addin.macroenabled.12":{source:"iana",extensions:["ppam"]},"application/vnd.ms-powerpoint.presentation.macroenabled.12":{source:"iana",extensions:["pptm"]},"application/vnd.ms-powerpoint.slide.macroenabled.12":{source:"iana",extensions:["sldm"]},"application/vnd.ms-powerpoint.slideshow.macroenabled.12":{source:"iana",extensions:["ppsm"]},"application/vnd.ms-powerpoint.template.macroenabled.12":{source:"iana",extensions:["potm"]},"application/vnd.ms-printdevicecapabilities+xml":{source:"iana",compressible:!0},"application/vnd.ms-printing.printticket+xml":{source:"apache",compressible:!0},"application/vnd.ms-printschematicket+xml":{source:"iana",compressible:!0},"application/vnd.ms-project":{source:"iana",extensions:["mpp","mpt"]},"application/vnd.ms-tnef":{source:"iana"},"application/vnd.ms-windows.devicepairing":{source:"iana"},"application/vnd.ms-windows.nwprinting.oob":{source:"iana"},"application/vnd.ms-windows.printerpairing":{source:"iana"},"application/vnd.ms-windows.wsd.oob":{source:"iana"},"application/vnd.ms-wmdrm.lic-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.lic-resp":{source:"iana"},"application/vnd.ms-wmdrm.meter-chlg-req":{source:"iana"},"application/vnd.ms-wmdrm.meter-resp":{source:"iana"},"application/vnd.ms-word.document.macroenabled.12":{source:"iana",extensions:["docm"]},"application/vnd.ms-word.template.macroenabled.12":{source:"iana",extensions:["dotm"]},"application/vnd.ms-works":{source:"iana",extensions:["wps","wks","wcm","wdb"]},"application/vnd.ms-wpl":{source:"iana",extensions:["wpl"]},"application/vnd.ms-xpsdocument":{source:"iana",compressible:!1,extensions:["xps"]},"application/vnd.msa-disk-image":{source:"iana"},"application/vnd.mseq":{source:"iana",extensions:["mseq"]},"application/vnd.msign":{source:"iana"},"application/vnd.multiad.creator":{source:"iana"},"application/vnd.multiad.creator.cif":{source:"iana"},"application/vnd.music-niff":{source:"iana"},"application/vnd.musician":{source:"iana",extensions:["mus"]},"application/vnd.muvee.style":{source:"iana",extensions:["msty"]},"application/vnd.mynfc":{source:"iana",extensions:["taglet"]},"application/vnd.nacamar.ybrid+json":{source:"iana",compressible:!0},"application/vnd.ncd.control":{source:"iana"},"application/vnd.ncd.reference":{source:"iana"},"application/vnd.nearst.inv+json":{source:"iana",compressible:!0},"application/vnd.nebumind.line":{source:"iana"},"application/vnd.nervana":{source:"iana"},"application/vnd.netfpx":{source:"iana"},"application/vnd.neurolanguage.nlu":{source:"iana",extensions:["nlu"]},"application/vnd.nimn":{source:"iana"},"application/vnd.nintendo.nitro.rom":{source:"iana"},"application/vnd.nintendo.snes.rom":{source:"iana"},"application/vnd.nitf":{source:"iana",extensions:["ntf","nitf"]},"application/vnd.noblenet-directory":{source:"iana",extensions:["nnd"]},"application/vnd.noblenet-sealer":{source:"iana",extensions:["nns"]},"application/vnd.noblenet-web":{source:"iana",extensions:["nnw"]},"application/vnd.nokia.catalogs":{source:"iana"},"application/vnd.nokia.conml+wbxml":{source:"iana"},"application/vnd.nokia.conml+xml":{source:"iana",compressible:!0},"application/vnd.nokia.iptv.config+xml":{source:"iana",compressible:!0},"application/vnd.nokia.isds-radio-presets":{source:"iana"},"application/vnd.nokia.landmark+wbxml":{source:"iana"},"application/vnd.nokia.landmark+xml":{source:"iana",compressible:!0},"application/vnd.nokia.landmarkcollection+xml":{source:"iana",compressible:!0},"application/vnd.nokia.n-gage.ac+xml":{source:"iana",compressible:!0,extensions:["ac"]},"application/vnd.nokia.n-gage.data":{source:"iana",extensions:["ngdat"]},"application/vnd.nokia.n-gage.symbian.install":{source:"iana",extensions:["n-gage"]},"application/vnd.nokia.ncd":{source:"iana"},"application/vnd.nokia.pcd+wbxml":{source:"iana"},"application/vnd.nokia.pcd+xml":{source:"iana",compressible:!0},"application/vnd.nokia.radio-preset":{source:"iana",extensions:["rpst"]},"application/vnd.nokia.radio-presets":{source:"iana",extensions:["rpss"]},"application/vnd.novadigm.edm":{source:"iana",extensions:["edm"]},"application/vnd.novadigm.edx":{source:"iana",extensions:["edx"]},"application/vnd.novadigm.ext":{source:"iana",extensions:["ext"]},"application/vnd.ntt-local.content-share":{source:"iana"},"application/vnd.ntt-local.file-transfer":{source:"iana"},"application/vnd.ntt-local.ogw_remote-access":{source:"iana"},"application/vnd.ntt-local.sip-ta_remote":{source:"iana"},"application/vnd.ntt-local.sip-ta_tcp_stream":{source:"iana"},"application/vnd.oasis.opendocument.chart":{source:"iana",extensions:["odc"]},"application/vnd.oasis.opendocument.chart-template":{source:"iana",extensions:["otc"]},"application/vnd.oasis.opendocument.database":{source:"iana",extensions:["odb"]},"application/vnd.oasis.opendocument.formula":{source:"iana",extensions:["odf"]},"application/vnd.oasis.opendocument.formula-template":{source:"iana",extensions:["odft"]},"application/vnd.oasis.opendocument.graphics":{source:"iana",compressible:!1,extensions:["odg"]},"application/vnd.oasis.opendocument.graphics-template":{source:"iana",extensions:["otg"]},"application/vnd.oasis.opendocument.image":{source:"iana",extensions:["odi"]},"application/vnd.oasis.opendocument.image-template":{source:"iana",extensions:["oti"]},"application/vnd.oasis.opendocument.presentation":{source:"iana",compressible:!1,extensions:["odp"]},"application/vnd.oasis.opendocument.presentation-template":{source:"iana",extensions:["otp"]},"application/vnd.oasis.opendocument.spreadsheet":{source:"iana",compressible:!1,extensions:["ods"]},"application/vnd.oasis.opendocument.spreadsheet-template":{source:"iana",extensions:["ots"]},"application/vnd.oasis.opendocument.text":{source:"iana",compressible:!1,extensions:["odt"]},"application/vnd.oasis.opendocument.text-master":{source:"iana",extensions:["odm"]},"application/vnd.oasis.opendocument.text-template":{source:"iana",extensions:["ott"]},"application/vnd.oasis.opendocument.text-web":{source:"iana",extensions:["oth"]},"application/vnd.obn":{source:"iana"},"application/vnd.ocf+cbor":{source:"iana"},"application/vnd.oci.image.manifest.v1+json":{source:"iana",compressible:!0},"application/vnd.oftn.l10n+json":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessdownload+xml":{source:"iana",compressible:!0},"application/vnd.oipf.contentaccessstreaming+xml":{source:"iana",compressible:!0},"application/vnd.oipf.cspg-hexbinary":{source:"iana"},"application/vnd.oipf.dae.svg+xml":{source:"iana",compressible:!0},"application/vnd.oipf.dae.xhtml+xml":{source:"iana",compressible:!0},"application/vnd.oipf.mippvcontrolmessage+xml":{source:"iana",compressible:!0},"application/vnd.oipf.pae.gem":{source:"iana"},"application/vnd.oipf.spdiscovery+xml":{source:"iana",compressible:!0},"application/vnd.oipf.spdlist+xml":{source:"iana",compressible:!0},"application/vnd.oipf.ueprofile+xml":{source:"iana",compressible:!0},"application/vnd.oipf.userprofile+xml":{source:"iana",compressible:!0},"application/vnd.olpc-sugar":{source:"iana",extensions:["xo"]},"application/vnd.oma-scws-config":{source:"iana"},"application/vnd.oma-scws-http-request":{source:"iana"},"application/vnd.oma-scws-http-response":{source:"iana"},"application/vnd.oma.bcast.associated-procedure-parameter+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.drm-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.imd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.ltkm":{source:"iana"},"application/vnd.oma.bcast.notification+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.provisioningtrigger":{source:"iana"},"application/vnd.oma.bcast.sgboot":{source:"iana"},"application/vnd.oma.bcast.sgdd+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sgdu":{source:"iana"},"application/vnd.oma.bcast.simple-symbol-container":{source:"iana"},"application/vnd.oma.bcast.smartcard-trigger+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.sprov+xml":{source:"iana",compressible:!0},"application/vnd.oma.bcast.stkm":{source:"iana"},"application/vnd.oma.cab-address-book+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-feature-handler+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-pcc+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-subs-invite+xml":{source:"iana",compressible:!0},"application/vnd.oma.cab-user-prefs+xml":{source:"iana",compressible:!0},"application/vnd.oma.dcd":{source:"iana"},"application/vnd.oma.dcdc":{source:"iana"},"application/vnd.oma.dd2+xml":{source:"iana",compressible:!0,extensions:["dd2"]},"application/vnd.oma.drm.risd+xml":{source:"iana",compressible:!0},"application/vnd.oma.group-usage-list+xml":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+cbor":{source:"iana"},"application/vnd.oma.lwm2m+json":{source:"iana",compressible:!0},"application/vnd.oma.lwm2m+tlv":{source:"iana"},"application/vnd.oma.pal+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.detailed-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.final-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.groups+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.invocation-descriptor+xml":{source:"iana",compressible:!0},"application/vnd.oma.poc.optimized-progress-report+xml":{source:"iana",compressible:!0},"application/vnd.oma.push":{source:"iana"},"application/vnd.oma.scidm.messages+xml":{source:"iana",compressible:!0},"application/vnd.oma.xcap-directory+xml":{source:"iana",compressible:!0},"application/vnd.omads-email+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-file+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omads-folder+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.omaloc-supl-init":{source:"iana"},"application/vnd.onepager":{source:"iana"},"application/vnd.onepagertamp":{source:"iana"},"application/vnd.onepagertamx":{source:"iana"},"application/vnd.onepagertat":{source:"iana"},"application/vnd.onepagertatp":{source:"iana"},"application/vnd.onepagertatx":{source:"iana"},"application/vnd.openblox.game+xml":{source:"iana",compressible:!0,extensions:["obgx"]},"application/vnd.openblox.game-binary":{source:"iana"},"application/vnd.openeye.oeb":{source:"iana"},"application/vnd.openofficeorg.extension":{source:"apache",extensions:["oxt"]},"application/vnd.openstreetmap.data+xml":{source:"iana",compressible:!0,extensions:["osm"]},"application/vnd.opentimestamps.ots":{source:"iana"},"application/vnd.openxmlformats-officedocument.custom-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.customxmlproperties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawing+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chart+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramcolors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramdata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramlayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.drawingml.diagramstyle+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.extended-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.commentauthors+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.handoutmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesmaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.notesslide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presentation":{source:"iana",compressible:!1,extensions:["pptx"]},"application/vnd.openxmlformats-officedocument.presentationml.presentation.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.presprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slide":{source:"iana",extensions:["sldx"]},"application/vnd.openxmlformats-officedocument.presentationml.slide+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidelayout+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slidemaster+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideshow":{source:"iana",extensions:["ppsx"]},"application/vnd.openxmlformats-officedocument.presentationml.slideshow.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.slideupdateinfo+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tablestyles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.tags+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.template":{source:"iana",extensions:["potx"]},"application/vnd.openxmlformats-officedocument.presentationml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.presentationml.viewprops+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.calcchain+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.externallink+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcachedefinition+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotcacherecords+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.pivottable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.querytable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionheaders+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionlog+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedstrings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{source:"iana",compressible:!1,extensions:["xlsx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetmetadata+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.tablesinglecells+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.template":{source:"iana",extensions:["xltx"]},"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.usernames+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.volatiledependencies+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.theme+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.themeoverride+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.vmldrawing":{source:"iana"},"application/vnd.openxmlformats-officedocument.wordprocessingml.comments+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document":{source:"iana",compressible:!1,extensions:["docx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.glossary+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.endnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.fonttable+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footer+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.footnotes+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.settings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.styles+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.template":{source:"iana",extensions:["dotx"]},"application/vnd.openxmlformats-officedocument.wordprocessingml.template.main+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-officedocument.wordprocessingml.websettings+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.core-properties+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.digital-signature-xmlsignature+xml":{source:"iana",compressible:!0},"application/vnd.openxmlformats-package.relationships+xml":{source:"iana",compressible:!0},"application/vnd.oracle.resource+json":{source:"iana",compressible:!0},"application/vnd.orange.indata":{source:"iana"},"application/vnd.osa.netdeploy":{source:"iana"},"application/vnd.osgeo.mapguide.package":{source:"iana",extensions:["mgp"]},"application/vnd.osgi.bundle":{source:"iana"},"application/vnd.osgi.dp":{source:"iana",extensions:["dp"]},"application/vnd.osgi.subsystem":{source:"iana",extensions:["esa"]},"application/vnd.otps.ct-kip+xml":{source:"iana",compressible:!0},"application/vnd.oxli.countgraph":{source:"iana"},"application/vnd.pagerduty+json":{source:"iana",compressible:!0},"application/vnd.palm":{source:"iana",extensions:["pdb","pqa","oprc"]},"application/vnd.panoply":{source:"iana"},"application/vnd.paos.xml":{source:"iana"},"application/vnd.patentdive":{source:"iana"},"application/vnd.patientecommsdoc":{source:"iana"},"application/vnd.pawaafile":{source:"iana",extensions:["paw"]},"application/vnd.pcos":{source:"iana"},"application/vnd.pg.format":{source:"iana",extensions:["str"]},"application/vnd.pg.osasli":{source:"iana",extensions:["ei6"]},"application/vnd.piaccess.application-licence":{source:"iana"},"application/vnd.picsel":{source:"iana",extensions:["efif"]},"application/vnd.pmi.widget":{source:"iana",extensions:["wg"]},"application/vnd.poc.group-advertisement+xml":{source:"iana",compressible:!0},"application/vnd.pocketlearn":{source:"iana",extensions:["plf"]},"application/vnd.powerbuilder6":{source:"iana",extensions:["pbd"]},"application/vnd.powerbuilder6-s":{source:"iana"},"application/vnd.powerbuilder7":{source:"iana"},"application/vnd.powerbuilder7-s":{source:"iana"},"application/vnd.powerbuilder75":{source:"iana"},"application/vnd.powerbuilder75-s":{source:"iana"},"application/vnd.preminet":{source:"iana"},"application/vnd.previewsystems.box":{source:"iana",extensions:["box"]},"application/vnd.proteus.magazine":{source:"iana",extensions:["mgz"]},"application/vnd.psfs":{source:"iana"},"application/vnd.publishare-delta-tree":{source:"iana",extensions:["qps"]},"application/vnd.pvi.ptid1":{source:"iana",extensions:["ptid"]},"application/vnd.pwg-multiplexed":{source:"iana"},"application/vnd.pwg-xhtml-print+xml":{source:"iana",compressible:!0},"application/vnd.qualcomm.brew-app-res":{source:"iana"},"application/vnd.quarantainenet":{source:"iana"},"application/vnd.quark.quarkxpress":{source:"iana",extensions:["qxd","qxt","qwd","qwt","qxl","qxb"]},"application/vnd.quobject-quoxdocument":{source:"iana"},"application/vnd.radisys.moml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-conn+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-audit-stream+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-conf+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-base+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-detect+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-fax-sendrecv+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-group+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-speech+xml":{source:"iana",compressible:!0},"application/vnd.radisys.msml-dialog-transform+xml":{source:"iana",compressible:!0},"application/vnd.rainstor.data":{source:"iana"},"application/vnd.rapid":{source:"iana"},"application/vnd.rar":{source:"iana",extensions:["rar"]},"application/vnd.realvnc.bed":{source:"iana",extensions:["bed"]},"application/vnd.recordare.musicxml":{source:"iana",extensions:["mxl"]},"application/vnd.recordare.musicxml+xml":{source:"iana",compressible:!0,extensions:["musicxml"]},"application/vnd.renlearn.rlprint":{source:"iana"},"application/vnd.resilient.logic":{source:"iana"},"application/vnd.restful+json":{source:"iana",compressible:!0},"application/vnd.rig.cryptonote":{source:"iana",extensions:["cryptonote"]},"application/vnd.rim.cod":{source:"apache",extensions:["cod"]},"application/vnd.rn-realmedia":{source:"apache",extensions:["rm"]},"application/vnd.rn-realmedia-vbr":{source:"apache",extensions:["rmvb"]},"application/vnd.route66.link66+xml":{source:"iana",compressible:!0,extensions:["link66"]},"application/vnd.rs-274x":{source:"iana"},"application/vnd.ruckus.download":{source:"iana"},"application/vnd.s3sms":{source:"iana"},"application/vnd.sailingtracker.track":{source:"iana",extensions:["st"]},"application/vnd.sar":{source:"iana"},"application/vnd.sbm.cid":{source:"iana"},"application/vnd.sbm.mid2":{source:"iana"},"application/vnd.scribus":{source:"iana"},"application/vnd.sealed.3df":{source:"iana"},"application/vnd.sealed.csf":{source:"iana"},"application/vnd.sealed.doc":{source:"iana"},"application/vnd.sealed.eml":{source:"iana"},"application/vnd.sealed.mht":{source:"iana"},"application/vnd.sealed.net":{source:"iana"},"application/vnd.sealed.ppt":{source:"iana"},"application/vnd.sealed.tiff":{source:"iana"},"application/vnd.sealed.xls":{source:"iana"},"application/vnd.sealedmedia.softseal.html":{source:"iana"},"application/vnd.sealedmedia.softseal.pdf":{source:"iana"},"application/vnd.seemail":{source:"iana",extensions:["see"]},"application/vnd.seis+json":{source:"iana",compressible:!0},"application/vnd.sema":{source:"iana",extensions:["sema"]},"application/vnd.semd":{source:"iana",extensions:["semd"]},"application/vnd.semf":{source:"iana",extensions:["semf"]},"application/vnd.shade-save-file":{source:"iana"},"application/vnd.shana.informed.formdata":{source:"iana",extensions:["ifm"]},"application/vnd.shana.informed.formtemplate":{source:"iana",extensions:["itp"]},"application/vnd.shana.informed.interchange":{source:"iana",extensions:["iif"]},"application/vnd.shana.informed.package":{source:"iana",extensions:["ipk"]},"application/vnd.shootproof+json":{source:"iana",compressible:!0},"application/vnd.shopkick+json":{source:"iana",compressible:!0},"application/vnd.shp":{source:"iana"},"application/vnd.shx":{source:"iana"},"application/vnd.sigrok.session":{source:"iana"},"application/vnd.simtech-mindmapper":{source:"iana",extensions:["twd","twds"]},"application/vnd.siren+json":{source:"iana",compressible:!0},"application/vnd.smaf":{source:"iana",extensions:["mmf"]},"application/vnd.smart.notebook":{source:"iana"},"application/vnd.smart.teacher":{source:"iana",extensions:["teacher"]},"application/vnd.snesdev-page-table":{source:"iana"},"application/vnd.software602.filler.form+xml":{source:"iana",compressible:!0,extensions:["fo"]},"application/vnd.software602.filler.form-xml-zip":{source:"iana"},"application/vnd.solent.sdkm+xml":{source:"iana",compressible:!0,extensions:["sdkm","sdkd"]},"application/vnd.spotfire.dxp":{source:"iana",extensions:["dxp"]},"application/vnd.spotfire.sfs":{source:"iana",extensions:["sfs"]},"application/vnd.sqlite3":{source:"iana"},"application/vnd.sss-cod":{source:"iana"},"application/vnd.sss-dtf":{source:"iana"},"application/vnd.sss-ntf":{source:"iana"},"application/vnd.stardivision.calc":{source:"apache",extensions:["sdc"]},"application/vnd.stardivision.draw":{source:"apache",extensions:["sda"]},"application/vnd.stardivision.impress":{source:"apache",extensions:["sdd"]},"application/vnd.stardivision.math":{source:"apache",extensions:["smf"]},"application/vnd.stardivision.writer":{source:"apache",extensions:["sdw","vor"]},"application/vnd.stardivision.writer-global":{source:"apache",extensions:["sgl"]},"application/vnd.stepmania.package":{source:"iana",extensions:["smzip"]},"application/vnd.stepmania.stepchart":{source:"iana",extensions:["sm"]},"application/vnd.street-stream":{source:"iana"},"application/vnd.sun.wadl+xml":{source:"iana",compressible:!0,extensions:["wadl"]},"application/vnd.sun.xml.calc":{source:"apache",extensions:["sxc"]},"application/vnd.sun.xml.calc.template":{source:"apache",extensions:["stc"]},"application/vnd.sun.xml.draw":{source:"apache",extensions:["sxd"]},"application/vnd.sun.xml.draw.template":{source:"apache",extensions:["std"]},"application/vnd.sun.xml.impress":{source:"apache",extensions:["sxi"]},"application/vnd.sun.xml.impress.template":{source:"apache",extensions:["sti"]},"application/vnd.sun.xml.math":{source:"apache",extensions:["sxm"]},"application/vnd.sun.xml.writer":{source:"apache",extensions:["sxw"]},"application/vnd.sun.xml.writer.global":{source:"apache",extensions:["sxg"]},"application/vnd.sun.xml.writer.template":{source:"apache",extensions:["stw"]},"application/vnd.sus-calendar":{source:"iana",extensions:["sus","susp"]},"application/vnd.svd":{source:"iana",extensions:["svd"]},"application/vnd.swiftview-ics":{source:"iana"},"application/vnd.sycle+xml":{source:"iana",compressible:!0},"application/vnd.syft+json":{source:"iana",compressible:!0},"application/vnd.symbian.install":{source:"apache",extensions:["sis","sisx"]},"application/vnd.syncml+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xsm"]},"application/vnd.syncml.dm+wbxml":{source:"iana",charset:"UTF-8",extensions:["bdm"]},"application/vnd.syncml.dm+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["xdm"]},"application/vnd.syncml.dm.notification":{source:"iana"},"application/vnd.syncml.dmddf+wbxml":{source:"iana"},"application/vnd.syncml.dmddf+xml":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["ddf"]},"application/vnd.syncml.dmtnds+wbxml":{source:"iana"},"application/vnd.syncml.dmtnds+xml":{source:"iana",charset:"UTF-8",compressible:!0},"application/vnd.syncml.ds.notification":{source:"iana"},"application/vnd.tableschema+json":{source:"iana",compressible:!0},"application/vnd.tao.intent-module-archive":{source:"iana",extensions:["tao"]},"application/vnd.tcpdump.pcap":{source:"iana",extensions:["pcap","cap","dmp"]},"application/vnd.think-cell.ppttc+json":{source:"iana",compressible:!0},"application/vnd.tmd.mediaflex.api+xml":{source:"iana",compressible:!0},"application/vnd.tml":{source:"iana"},"application/vnd.tmobile-livetv":{source:"iana",extensions:["tmo"]},"application/vnd.tri.onesource":{source:"iana"},"application/vnd.trid.tpt":{source:"iana",extensions:["tpt"]},"application/vnd.triscape.mxs":{source:"iana",extensions:["mxs"]},"application/vnd.trueapp":{source:"iana",extensions:["tra"]},"application/vnd.truedoc":{source:"iana"},"application/vnd.ubisoft.webplayer":{source:"iana"},"application/vnd.ufdl":{source:"iana",extensions:["ufd","ufdl"]},"application/vnd.uiq.theme":{source:"iana",extensions:["utz"]},"application/vnd.umajin":{source:"iana",extensions:["umj"]},"application/vnd.unity":{source:"iana",extensions:["unityweb"]},"application/vnd.uoml+xml":{source:"iana",compressible:!0,extensions:["uoml"]},"application/vnd.uplanet.alert":{source:"iana"},"application/vnd.uplanet.alert-wbxml":{source:"iana"},"application/vnd.uplanet.bearer-choice":{source:"iana"},"application/vnd.uplanet.bearer-choice-wbxml":{source:"iana"},"application/vnd.uplanet.cacheop":{source:"iana"},"application/vnd.uplanet.cacheop-wbxml":{source:"iana"},"application/vnd.uplanet.channel":{source:"iana"},"application/vnd.uplanet.channel-wbxml":{source:"iana"},"application/vnd.uplanet.list":{source:"iana"},"application/vnd.uplanet.list-wbxml":{source:"iana"},"application/vnd.uplanet.listcmd":{source:"iana"},"application/vnd.uplanet.listcmd-wbxml":{source:"iana"},"application/vnd.uplanet.signal":{source:"iana"},"application/vnd.uri-map":{source:"iana"},"application/vnd.valve.source.material":{source:"iana"},"application/vnd.vcx":{source:"iana",extensions:["vcx"]},"application/vnd.vd-study":{source:"iana"},"application/vnd.vectorworks":{source:"iana"},"application/vnd.vel+json":{source:"iana",compressible:!0},"application/vnd.verimatrix.vcas":{source:"iana"},"application/vnd.veritone.aion+json":{source:"iana",compressible:!0},"application/vnd.veryant.thin":{source:"iana"},"application/vnd.ves.encrypted":{source:"iana"},"application/vnd.vidsoft.vidconference":{source:"iana"},"application/vnd.visio":{source:"iana",extensions:["vsd","vst","vss","vsw"]},"application/vnd.visionary":{source:"iana",extensions:["vis"]},"application/vnd.vividence.scriptfile":{source:"iana"},"application/vnd.vsf":{source:"iana",extensions:["vsf"]},"application/vnd.wap.sic":{source:"iana"},"application/vnd.wap.slc":{source:"iana"},"application/vnd.wap.wbxml":{source:"iana",charset:"UTF-8",extensions:["wbxml"]},"application/vnd.wap.wmlc":{source:"iana",extensions:["wmlc"]},"application/vnd.wap.wmlscriptc":{source:"iana",extensions:["wmlsc"]},"application/vnd.webturbo":{source:"iana",extensions:["wtb"]},"application/vnd.wfa.dpp":{source:"iana"},"application/vnd.wfa.p2p":{source:"iana"},"application/vnd.wfa.wsc":{source:"iana"},"application/vnd.windows.devicepairing":{source:"iana"},"application/vnd.wmc":{source:"iana"},"application/vnd.wmf.bootstrap":{source:"iana"},"application/vnd.wolfram.mathematica":{source:"iana"},"application/vnd.wolfram.mathematica.package":{source:"iana"},"application/vnd.wolfram.player":{source:"iana",extensions:["nbp"]},"application/vnd.wordperfect":{source:"iana",extensions:["wpd"]},"application/vnd.wqd":{source:"iana",extensions:["wqd"]},"application/vnd.wrq-hp3000-labelled":{source:"iana"},"application/vnd.wt.stf":{source:"iana",extensions:["stf"]},"application/vnd.wv.csp+wbxml":{source:"iana"},"application/vnd.wv.csp+xml":{source:"iana",compressible:!0},"application/vnd.wv.ssp+xml":{source:"iana",compressible:!0},"application/vnd.xacml+json":{source:"iana",compressible:!0},"application/vnd.xara":{source:"iana",extensions:["xar"]},"application/vnd.xfdl":{source:"iana",extensions:["xfdl"]},"application/vnd.xfdl.webform":{source:"iana"},"application/vnd.xmi+xml":{source:"iana",compressible:!0},"application/vnd.xmpie.cpkg":{source:"iana"},"application/vnd.xmpie.dpkg":{source:"iana"},"application/vnd.xmpie.plan":{source:"iana"},"application/vnd.xmpie.ppkg":{source:"iana"},"application/vnd.xmpie.xlim":{source:"iana"},"application/vnd.yamaha.hv-dic":{source:"iana",extensions:["hvd"]},"application/vnd.yamaha.hv-script":{source:"iana",extensions:["hvs"]},"application/vnd.yamaha.hv-voice":{source:"iana",extensions:["hvp"]},"application/vnd.yamaha.openscoreformat":{source:"iana",extensions:["osf"]},"application/vnd.yamaha.openscoreformat.osfpvg+xml":{source:"iana",compressible:!0,extensions:["osfpvg"]},"application/vnd.yamaha.remote-setup":{source:"iana"},"application/vnd.yamaha.smaf-audio":{source:"iana",extensions:["saf"]},"application/vnd.yamaha.smaf-phrase":{source:"iana",extensions:["spf"]},"application/vnd.yamaha.through-ngn":{source:"iana"},"application/vnd.yamaha.tunnel-udpencap":{source:"iana"},"application/vnd.yaoweme":{source:"iana"},"application/vnd.yellowriver-custom-menu":{source:"iana",extensions:["cmp"]},"application/vnd.youtube.yt":{source:"iana"},"application/vnd.zul":{source:"iana",extensions:["zir","zirz"]},"application/vnd.zzazz.deck+xml":{source:"iana",compressible:!0,extensions:["zaz"]},"application/voicexml+xml":{source:"iana",compressible:!0,extensions:["vxml"]},"application/voucher-cms+json":{source:"iana",compressible:!0},"application/vq-rtcpxr":{source:"iana"},"application/wasm":{source:"iana",compressible:!0,extensions:["wasm"]},"application/watcherinfo+xml":{source:"iana",compressible:!0,extensions:["wif"]},"application/webpush-options+json":{source:"iana",compressible:!0},"application/whoispp-query":{source:"iana"},"application/whoispp-response":{source:"iana"},"application/widget":{source:"iana",extensions:["wgt"]},"application/winhlp":{source:"apache",extensions:["hlp"]},"application/wita":{source:"iana"},"application/wordperfect5.1":{source:"iana"},"application/wsdl+xml":{source:"iana",compressible:!0,extensions:["wsdl"]},"application/wspolicy+xml":{source:"iana",compressible:!0,extensions:["wspolicy"]},"application/x-7z-compressed":{source:"apache",compressible:!1,extensions:["7z"]},"application/x-abiword":{source:"apache",extensions:["abw"]},"application/x-ace-compressed":{source:"apache",extensions:["ace"]},"application/x-amf":{source:"apache"},"application/x-apple-diskimage":{source:"apache",extensions:["dmg"]},"application/x-arj":{compressible:!1,extensions:["arj"]},"application/x-authorware-bin":{source:"apache",extensions:["aab","x32","u32","vox"]},"application/x-authorware-map":{source:"apache",extensions:["aam"]},"application/x-authorware-seg":{source:"apache",extensions:["aas"]},"application/x-bcpio":{source:"apache",extensions:["bcpio"]},"application/x-bdoc":{compressible:!1,extensions:["bdoc"]},"application/x-bittorrent":{source:"apache",extensions:["torrent"]},"application/x-blorb":{source:"apache",extensions:["blb","blorb"]},"application/x-bzip":{source:"apache",compressible:!1,extensions:["bz"]},"application/x-bzip2":{source:"apache",compressible:!1,extensions:["bz2","boz"]},"application/x-cbr":{source:"apache",extensions:["cbr","cba","cbt","cbz","cb7"]},"application/x-cdlink":{source:"apache",extensions:["vcd"]},"application/x-cfs-compressed":{source:"apache",extensions:["cfs"]},"application/x-chat":{source:"apache",extensions:["chat"]},"application/x-chess-pgn":{source:"apache",extensions:["pgn"]},"application/x-chrome-extension":{extensions:["crx"]},"application/x-cocoa":{source:"nginx",extensions:["cco"]},"application/x-compress":{source:"apache"},"application/x-conference":{source:"apache",extensions:["nsc"]},"application/x-cpio":{source:"apache",extensions:["cpio"]},"application/x-csh":{source:"apache",extensions:["csh"]},"application/x-deb":{compressible:!1},"application/x-debian-package":{source:"apache",extensions:["deb","udeb"]},"application/x-dgc-compressed":{source:"apache",extensions:["dgc"]},"application/x-director":{source:"apache",extensions:["dir","dcr","dxr","cst","cct","cxt","w3d","fgd","swa"]},"application/x-doom":{source:"apache",extensions:["wad"]},"application/x-dtbncx+xml":{source:"apache",compressible:!0,extensions:["ncx"]},"application/x-dtbook+xml":{source:"apache",compressible:!0,extensions:["dtb"]},"application/x-dtbresource+xml":{source:"apache",compressible:!0,extensions:["res"]},"application/x-dvi":{source:"apache",compressible:!1,extensions:["dvi"]},"application/x-envoy":{source:"apache",extensions:["evy"]},"application/x-eva":{source:"apache",extensions:["eva"]},"application/x-font-bdf":{source:"apache",extensions:["bdf"]},"application/x-font-dos":{source:"apache"},"application/x-font-framemaker":{source:"apache"},"application/x-font-ghostscript":{source:"apache",extensions:["gsf"]},"application/x-font-libgrx":{source:"apache"},"application/x-font-linux-psf":{source:"apache",extensions:["psf"]},"application/x-font-pcf":{source:"apache",extensions:["pcf"]},"application/x-font-snf":{source:"apache",extensions:["snf"]},"application/x-font-speedo":{source:"apache"},"application/x-font-sunos-news":{source:"apache"},"application/x-font-type1":{source:"apache",extensions:["pfa","pfb","pfm","afm"]},"application/x-font-vfont":{source:"apache"},"application/x-freearc":{source:"apache",extensions:["arc"]},"application/x-futuresplash":{source:"apache",extensions:["spl"]},"application/x-gca-compressed":{source:"apache",extensions:["gca"]},"application/x-glulx":{source:"apache",extensions:["ulx"]},"application/x-gnumeric":{source:"apache",extensions:["gnumeric"]},"application/x-gramps-xml":{source:"apache",extensions:["gramps"]},"application/x-gtar":{source:"apache",extensions:["gtar"]},"application/x-gzip":{source:"apache"},"application/x-hdf":{source:"apache",extensions:["hdf"]},"application/x-httpd-php":{compressible:!0,extensions:["php"]},"application/x-install-instructions":{source:"apache",extensions:["install"]},"application/x-iso9660-image":{source:"apache",extensions:["iso"]},"application/x-iwork-keynote-sffkey":{extensions:["key"]},"application/x-iwork-numbers-sffnumbers":{extensions:["numbers"]},"application/x-iwork-pages-sffpages":{extensions:["pages"]},"application/x-java-archive-diff":{source:"nginx",extensions:["jardiff"]},"application/x-java-jnlp-file":{source:"apache",compressible:!1,extensions:["jnlp"]},"application/x-javascript":{compressible:!0},"application/x-keepass2":{extensions:["kdbx"]},"application/x-latex":{source:"apache",compressible:!1,extensions:["latex"]},"application/x-lua-bytecode":{extensions:["luac"]},"application/x-lzh-compressed":{source:"apache",extensions:["lzh","lha"]},"application/x-makeself":{source:"nginx",extensions:["run"]},"application/x-mie":{source:"apache",extensions:["mie"]},"application/x-mobipocket-ebook":{source:"apache",extensions:["prc","mobi"]},"application/x-mpegurl":{compressible:!1},"application/x-ms-application":{source:"apache",extensions:["application"]},"application/x-ms-shortcut":{source:"apache",extensions:["lnk"]},"application/x-ms-wmd":{source:"apache",extensions:["wmd"]},"application/x-ms-wmz":{source:"apache",extensions:["wmz"]},"application/x-ms-xbap":{source:"apache",extensions:["xbap"]},"application/x-msaccess":{source:"apache",extensions:["mdb"]},"application/x-msbinder":{source:"apache",extensions:["obd"]},"application/x-mscardfile":{source:"apache",extensions:["crd"]},"application/x-msclip":{source:"apache",extensions:["clp"]},"application/x-msdos-program":{extensions:["exe"]},"application/x-msdownload":{source:"apache",extensions:["exe","dll","com","bat","msi"]},"application/x-msmediaview":{source:"apache",extensions:["mvb","m13","m14"]},"application/x-msmetafile":{source:"apache",extensions:["wmf","wmz","emf","emz"]},"application/x-msmoney":{source:"apache",extensions:["mny"]},"application/x-mspublisher":{source:"apache",extensions:["pub"]},"application/x-msschedule":{source:"apache",extensions:["scd"]},"application/x-msterminal":{source:"apache",extensions:["trm"]},"application/x-mswrite":{source:"apache",extensions:["wri"]},"application/x-netcdf":{source:"apache",extensions:["nc","cdf"]},"application/x-ns-proxy-autoconfig":{compressible:!0,extensions:["pac"]},"application/x-nzb":{source:"apache",extensions:["nzb"]},"application/x-perl":{source:"nginx",extensions:["pl","pm"]},"application/x-pilot":{source:"nginx",extensions:["prc","pdb"]},"application/x-pkcs12":{source:"apache",compressible:!1,extensions:["p12","pfx"]},"application/x-pkcs7-certificates":{source:"apache",extensions:["p7b","spc"]},"application/x-pkcs7-certreqresp":{source:"apache",extensions:["p7r"]},"application/x-pki-message":{source:"iana"},"application/x-rar-compressed":{source:"apache",compressible:!1,extensions:["rar"]},"application/x-redhat-package-manager":{source:"nginx",extensions:["rpm"]},"application/x-research-info-systems":{source:"apache",extensions:["ris"]},"application/x-sea":{source:"nginx",extensions:["sea"]},"application/x-sh":{source:"apache",compressible:!0,extensions:["sh"]},"application/x-shar":{source:"apache",extensions:["shar"]},"application/x-shockwave-flash":{source:"apache",compressible:!1,extensions:["swf"]},"application/x-silverlight-app":{source:"apache",extensions:["xap"]},"application/x-sql":{source:"apache",extensions:["sql"]},"application/x-stuffit":{source:"apache",compressible:!1,extensions:["sit"]},"application/x-stuffitx":{source:"apache",extensions:["sitx"]},"application/x-subrip":{source:"apache",extensions:["srt"]},"application/x-sv4cpio":{source:"apache",extensions:["sv4cpio"]},"application/x-sv4crc":{source:"apache",extensions:["sv4crc"]},"application/x-t3vm-image":{source:"apache",extensions:["t3"]},"application/x-tads":{source:"apache",extensions:["gam"]},"application/x-tar":{source:"apache",compressible:!0,extensions:["tar"]},"application/x-tcl":{source:"apache",extensions:["tcl","tk"]},"application/x-tex":{source:"apache",extensions:["tex"]},"application/x-tex-tfm":{source:"apache",extensions:["tfm"]},"application/x-texinfo":{source:"apache",extensions:["texinfo","texi"]},"application/x-tgif":{source:"apache",extensions:["obj"]},"application/x-ustar":{source:"apache",extensions:["ustar"]},"application/x-virtualbox-hdd":{compressible:!0,extensions:["hdd"]},"application/x-virtualbox-ova":{compressible:!0,extensions:["ova"]},"application/x-virtualbox-ovf":{compressible:!0,extensions:["ovf"]},"application/x-virtualbox-vbox":{compressible:!0,extensions:["vbox"]},"application/x-virtualbox-vbox-extpack":{compressible:!1,extensions:["vbox-extpack"]},"application/x-virtualbox-vdi":{compressible:!0,extensions:["vdi"]},"application/x-virtualbox-vhd":{compressible:!0,extensions:["vhd"]},"application/x-virtualbox-vmdk":{compressible:!0,extensions:["vmdk"]},"application/x-wais-source":{source:"apache",extensions:["src"]},"application/x-web-app-manifest+json":{compressible:!0,extensions:["webapp"]},"application/x-www-form-urlencoded":{source:"iana",compressible:!0},"application/x-x509-ca-cert":{source:"iana",extensions:["der","crt","pem"]},"application/x-x509-ca-ra-cert":{source:"iana"},"application/x-x509-next-ca-cert":{source:"iana"},"application/x-xfig":{source:"apache",extensions:["fig"]},"application/x-xliff+xml":{source:"apache",compressible:!0,extensions:["xlf"]},"application/x-xpinstall":{source:"apache",compressible:!1,extensions:["xpi"]},"application/x-xz":{source:"apache",extensions:["xz"]},"application/x-zmachine":{source:"apache",extensions:["z1","z2","z3","z4","z5","z6","z7","z8"]},"application/x400-bp":{source:"iana"},"application/xacml+xml":{source:"iana",compressible:!0},"application/xaml+xml":{source:"apache",compressible:!0,extensions:["xaml"]},"application/xcap-att+xml":{source:"iana",compressible:!0,extensions:["xav"]},"application/xcap-caps+xml":{source:"iana",compressible:!0,extensions:["xca"]},"application/xcap-diff+xml":{source:"iana",compressible:!0,extensions:["xdf"]},"application/xcap-el+xml":{source:"iana",compressible:!0,extensions:["xel"]},"application/xcap-error+xml":{source:"iana",compressible:!0},"application/xcap-ns+xml":{source:"iana",compressible:!0,extensions:["xns"]},"application/xcon-conference-info+xml":{source:"iana",compressible:!0},"application/xcon-conference-info-diff+xml":{source:"iana",compressible:!0},"application/xenc+xml":{source:"iana",compressible:!0,extensions:["xenc"]},"application/xhtml+xml":{source:"iana",compressible:!0,extensions:["xhtml","xht"]},"application/xhtml-voice+xml":{source:"apache",compressible:!0},"application/xliff+xml":{source:"iana",compressible:!0,extensions:["xlf"]},"application/xml":{source:"iana",compressible:!0,extensions:["xml","xsl","xsd","rng"]},"application/xml-dtd":{source:"iana",compressible:!0,extensions:["dtd"]},"application/xml-external-parsed-entity":{source:"iana"},"application/xml-patch+xml":{source:"iana",compressible:!0},"application/xmpp+xml":{source:"iana",compressible:!0},"application/xop+xml":{source:"iana",compressible:!0,extensions:["xop"]},"application/xproc+xml":{source:"apache",compressible:!0,extensions:["xpl"]},"application/xslt+xml":{source:"iana",compressible:!0,extensions:["xsl","xslt"]},"application/xspf+xml":{source:"apache",compressible:!0,extensions:["xspf"]},"application/xv+xml":{source:"iana",compressible:!0,extensions:["mxml","xhvml","xvml","xvm"]},"application/yang":{source:"iana",extensions:["yang"]},"application/yang-data+json":{source:"iana",compressible:!0},"application/yang-data+xml":{source:"iana",compressible:!0},"application/yang-patch+json":{source:"iana",compressible:!0},"application/yang-patch+xml":{source:"iana",compressible:!0},"application/yin+xml":{source:"iana",compressible:!0,extensions:["yin"]},"application/zip":{source:"iana",compressible:!1,extensions:["zip"]},"application/zlib":{source:"iana"},"application/zstd":{source:"iana"},"audio/1d-interleaved-parityfec":{source:"iana"},"audio/32kadpcm":{source:"iana"},"audio/3gpp":{source:"iana",compressible:!1,extensions:["3gpp"]},"audio/3gpp2":{source:"iana"},"audio/aac":{source:"iana"},"audio/ac3":{source:"iana"},"audio/adpcm":{source:"apache",extensions:["adp"]},"audio/amr":{source:"iana",extensions:["amr"]},"audio/amr-wb":{source:"iana"},"audio/amr-wb+":{source:"iana"},"audio/aptx":{source:"iana"},"audio/asc":{source:"iana"},"audio/atrac-advanced-lossless":{source:"iana"},"audio/atrac-x":{source:"iana"},"audio/atrac3":{source:"iana"},"audio/basic":{source:"iana",compressible:!1,extensions:["au","snd"]},"audio/bv16":{source:"iana"},"audio/bv32":{source:"iana"},"audio/clearmode":{source:"iana"},"audio/cn":{source:"iana"},"audio/dat12":{source:"iana"},"audio/dls":{source:"iana"},"audio/dsr-es201108":{source:"iana"},"audio/dsr-es202050":{source:"iana"},"audio/dsr-es202211":{source:"iana"},"audio/dsr-es202212":{source:"iana"},"audio/dv":{source:"iana"},"audio/dvi4":{source:"iana"},"audio/eac3":{source:"iana"},"audio/encaprtp":{source:"iana"},"audio/evrc":{source:"iana"},"audio/evrc-qcp":{source:"iana"},"audio/evrc0":{source:"iana"},"audio/evrc1":{source:"iana"},"audio/evrcb":{source:"iana"},"audio/evrcb0":{source:"iana"},"audio/evrcb1":{source:"iana"},"audio/evrcnw":{source:"iana"},"audio/evrcnw0":{source:"iana"},"audio/evrcnw1":{source:"iana"},"audio/evrcwb":{source:"iana"},"audio/evrcwb0":{source:"iana"},"audio/evrcwb1":{source:"iana"},"audio/evs":{source:"iana"},"audio/flexfec":{source:"iana"},"audio/fwdred":{source:"iana"},"audio/g711-0":{source:"iana"},"audio/g719":{source:"iana"},"audio/g722":{source:"iana"},"audio/g7221":{source:"iana"},"audio/g723":{source:"iana"},"audio/g726-16":{source:"iana"},"audio/g726-24":{source:"iana"},"audio/g726-32":{source:"iana"},"audio/g726-40":{source:"iana"},"audio/g728":{source:"iana"},"audio/g729":{source:"iana"},"audio/g7291":{source:"iana"},"audio/g729d":{source:"iana"},"audio/g729e":{source:"iana"},"audio/gsm":{source:"iana"},"audio/gsm-efr":{source:"iana"},"audio/gsm-hr-08":{source:"iana"},"audio/ilbc":{source:"iana"},"audio/ip-mr_v2.5":{source:"iana"},"audio/isac":{source:"apache"},"audio/l16":{source:"iana"},"audio/l20":{source:"iana"},"audio/l24":{source:"iana",compressible:!1},"audio/l8":{source:"iana"},"audio/lpc":{source:"iana"},"audio/melp":{source:"iana"},"audio/melp1200":{source:"iana"},"audio/melp2400":{source:"iana"},"audio/melp600":{source:"iana"},"audio/mhas":{source:"iana"},"audio/midi":{source:"apache",extensions:["mid","midi","kar","rmi"]},"audio/mobile-xmf":{source:"iana",extensions:["mxmf"]},"audio/mp3":{compressible:!1,extensions:["mp3"]},"audio/mp4":{source:"iana",compressible:!1,extensions:["m4a","mp4a"]},"audio/mp4a-latm":{source:"iana"},"audio/mpa":{source:"iana"},"audio/mpa-robust":{source:"iana"},"audio/mpeg":{source:"iana",compressible:!1,extensions:["mpga","mp2","mp2a","mp3","m2a","m3a"]},"audio/mpeg4-generic":{source:"iana"},"audio/musepack":{source:"apache"},"audio/ogg":{source:"iana",compressible:!1,extensions:["oga","ogg","spx","opus"]},"audio/opus":{source:"iana"},"audio/parityfec":{source:"iana"},"audio/pcma":{source:"iana"},"audio/pcma-wb":{source:"iana"},"audio/pcmu":{source:"iana"},"audio/pcmu-wb":{source:"iana"},"audio/prs.sid":{source:"iana"},"audio/qcelp":{source:"iana"},"audio/raptorfec":{source:"iana"},"audio/red":{source:"iana"},"audio/rtp-enc-aescm128":{source:"iana"},"audio/rtp-midi":{source:"iana"},"audio/rtploopback":{source:"iana"},"audio/rtx":{source:"iana"},"audio/s3m":{source:"apache",extensions:["s3m"]},"audio/scip":{source:"iana"},"audio/silk":{source:"apache",extensions:["sil"]},"audio/smv":{source:"iana"},"audio/smv-qcp":{source:"iana"},"audio/smv0":{source:"iana"},"audio/sofa":{source:"iana"},"audio/sp-midi":{source:"iana"},"audio/speex":{source:"iana"},"audio/t140c":{source:"iana"},"audio/t38":{source:"iana"},"audio/telephone-event":{source:"iana"},"audio/tetra_acelp":{source:"iana"},"audio/tetra_acelp_bb":{source:"iana"},"audio/tone":{source:"iana"},"audio/tsvcis":{source:"iana"},"audio/uemclip":{source:"iana"},"audio/ulpfec":{source:"iana"},"audio/usac":{source:"iana"},"audio/vdvi":{source:"iana"},"audio/vmr-wb":{source:"iana"},"audio/vnd.3gpp.iufp":{source:"iana"},"audio/vnd.4sb":{source:"iana"},"audio/vnd.audiokoz":{source:"iana"},"audio/vnd.celp":{source:"iana"},"audio/vnd.cisco.nse":{source:"iana"},"audio/vnd.cmles.radio-events":{source:"iana"},"audio/vnd.cns.anp1":{source:"iana"},"audio/vnd.cns.inf1":{source:"iana"},"audio/vnd.dece.audio":{source:"iana",extensions:["uva","uvva"]},"audio/vnd.digital-winds":{source:"iana",extensions:["eol"]},"audio/vnd.dlna.adts":{source:"iana"},"audio/vnd.dolby.heaac.1":{source:"iana"},"audio/vnd.dolby.heaac.2":{source:"iana"},"audio/vnd.dolby.mlp":{source:"iana"},"audio/vnd.dolby.mps":{source:"iana"},"audio/vnd.dolby.pl2":{source:"iana"},"audio/vnd.dolby.pl2x":{source:"iana"},"audio/vnd.dolby.pl2z":{source:"iana"},"audio/vnd.dolby.pulse.1":{source:"iana"},"audio/vnd.dra":{source:"iana",extensions:["dra"]},"audio/vnd.dts":{source:"iana",extensions:["dts"]},"audio/vnd.dts.hd":{source:"iana",extensions:["dtshd"]},"audio/vnd.dts.uhd":{source:"iana"},"audio/vnd.dvb.file":{source:"iana"},"audio/vnd.everad.plj":{source:"iana"},"audio/vnd.hns.audio":{source:"iana"},"audio/vnd.lucent.voice":{source:"iana",extensions:["lvp"]},"audio/vnd.ms-playready.media.pya":{source:"iana",extensions:["pya"]},"audio/vnd.nokia.mobile-xmf":{source:"iana"},"audio/vnd.nortel.vbk":{source:"iana"},"audio/vnd.nuera.ecelp4800":{source:"iana",extensions:["ecelp4800"]},"audio/vnd.nuera.ecelp7470":{source:"iana",extensions:["ecelp7470"]},"audio/vnd.nuera.ecelp9600":{source:"iana",extensions:["ecelp9600"]},"audio/vnd.octel.sbc":{source:"iana"},"audio/vnd.presonus.multitrack":{source:"iana"},"audio/vnd.qcelp":{source:"iana"},"audio/vnd.rhetorex.32kadpcm":{source:"iana"},"audio/vnd.rip":{source:"iana",extensions:["rip"]},"audio/vnd.rn-realaudio":{compressible:!1},"audio/vnd.sealedmedia.softseal.mpeg":{source:"iana"},"audio/vnd.vmx.cvsd":{source:"iana"},"audio/vnd.wave":{compressible:!1},"audio/vorbis":{source:"iana",compressible:!1},"audio/vorbis-config":{source:"iana"},"audio/wav":{compressible:!1,extensions:["wav"]},"audio/wave":{compressible:!1,extensions:["wav"]},"audio/webm":{source:"apache",compressible:!1,extensions:["weba"]},"audio/x-aac":{source:"apache",compressible:!1,extensions:["aac"]},"audio/x-aiff":{source:"apache",extensions:["aif","aiff","aifc"]},"audio/x-caf":{source:"apache",compressible:!1,extensions:["caf"]},"audio/x-flac":{source:"apache",extensions:["flac"]},"audio/x-m4a":{source:"nginx",extensions:["m4a"]},"audio/x-matroska":{source:"apache",extensions:["mka"]},"audio/x-mpegurl":{source:"apache",extensions:["m3u"]},"audio/x-ms-wax":{source:"apache",extensions:["wax"]},"audio/x-ms-wma":{source:"apache",extensions:["wma"]},"audio/x-pn-realaudio":{source:"apache",extensions:["ram","ra"]},"audio/x-pn-realaudio-plugin":{source:"apache",extensions:["rmp"]},"audio/x-realaudio":{source:"nginx",extensions:["ra"]},"audio/x-tta":{source:"apache"},"audio/x-wav":{source:"apache",extensions:["wav"]},"audio/xm":{source:"apache",extensions:["xm"]},"chemical/x-cdx":{source:"apache",extensions:["cdx"]},"chemical/x-cif":{source:"apache",extensions:["cif"]},"chemical/x-cmdf":{source:"apache",extensions:["cmdf"]},"chemical/x-cml":{source:"apache",extensions:["cml"]},"chemical/x-csml":{source:"apache",extensions:["csml"]},"chemical/x-pdb":{source:"apache"},"chemical/x-xyz":{source:"apache",extensions:["xyz"]},"font/collection":{source:"iana",extensions:["ttc"]},"font/otf":{source:"iana",compressible:!0,extensions:["otf"]},"font/sfnt":{source:"iana"},"font/ttf":{source:"iana",compressible:!0,extensions:["ttf"]},"font/woff":{source:"iana",extensions:["woff"]},"font/woff2":{source:"iana",extensions:["woff2"]},"image/aces":{source:"iana",extensions:["exr"]},"image/apng":{compressible:!1,extensions:["apng"]},"image/avci":{source:"iana",extensions:["avci"]},"image/avcs":{source:"iana",extensions:["avcs"]},"image/avif":{source:"iana",compressible:!1,extensions:["avif"]},"image/bmp":{source:"iana",compressible:!0,extensions:["bmp"]},"image/cgm":{source:"iana",extensions:["cgm"]},"image/dicom-rle":{source:"iana",extensions:["drle"]},"image/emf":{source:"iana",extensions:["emf"]},"image/fits":{source:"iana",extensions:["fits"]},"image/g3fax":{source:"iana",extensions:["g3"]},"image/gif":{source:"iana",compressible:!1,extensions:["gif"]},"image/heic":{source:"iana",extensions:["heic"]},"image/heic-sequence":{source:"iana",extensions:["heics"]},"image/heif":{source:"iana",extensions:["heif"]},"image/heif-sequence":{source:"iana",extensions:["heifs"]},"image/hej2k":{source:"iana",extensions:["hej2"]},"image/hsj2":{source:"iana",extensions:["hsj2"]},"image/ief":{source:"iana",extensions:["ief"]},"image/jls":{source:"iana",extensions:["jls"]},"image/jp2":{source:"iana",compressible:!1,extensions:["jp2","jpg2"]},"image/jpeg":{source:"iana",compressible:!1,extensions:["jpeg","jpg","jpe"]},"image/jph":{source:"iana",extensions:["jph"]},"image/jphc":{source:"iana",extensions:["jhc"]},"image/jpm":{source:"iana",compressible:!1,extensions:["jpm"]},"image/jpx":{source:"iana",compressible:!1,extensions:["jpx","jpf"]},"image/jxr":{source:"iana",extensions:["jxr"]},"image/jxra":{source:"iana",extensions:["jxra"]},"image/jxrs":{source:"iana",extensions:["jxrs"]},"image/jxs":{source:"iana",extensions:["jxs"]},"image/jxsc":{source:"iana",extensions:["jxsc"]},"image/jxsi":{source:"iana",extensions:["jxsi"]},"image/jxss":{source:"iana",extensions:["jxss"]},"image/ktx":{source:"iana",extensions:["ktx"]},"image/ktx2":{source:"iana",extensions:["ktx2"]},"image/naplps":{source:"iana"},"image/pjpeg":{compressible:!1},"image/png":{source:"iana",compressible:!1,extensions:["png"]},"image/prs.btif":{source:"iana",extensions:["btif"]},"image/prs.pti":{source:"iana",extensions:["pti"]},"image/pwg-raster":{source:"iana"},"image/sgi":{source:"apache",extensions:["sgi"]},"image/svg+xml":{source:"iana",compressible:!0,extensions:["svg","svgz"]},"image/t38":{source:"iana",extensions:["t38"]},"image/tiff":{source:"iana",compressible:!1,extensions:["tif","tiff"]},"image/tiff-fx":{source:"iana",extensions:["tfx"]},"image/vnd.adobe.photoshop":{source:"iana",compressible:!0,extensions:["psd"]},"image/vnd.airzip.accelerator.azv":{source:"iana",extensions:["azv"]},"image/vnd.cns.inf2":{source:"iana"},"image/vnd.dece.graphic":{source:"iana",extensions:["uvi","uvvi","uvg","uvvg"]},"image/vnd.djvu":{source:"iana",extensions:["djvu","djv"]},"image/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"image/vnd.dwg":{source:"iana",extensions:["dwg"]},"image/vnd.dxf":{source:"iana",extensions:["dxf"]},"image/vnd.fastbidsheet":{source:"iana",extensions:["fbs"]},"image/vnd.fpx":{source:"iana",extensions:["fpx"]},"image/vnd.fst":{source:"iana",extensions:["fst"]},"image/vnd.fujixerox.edmics-mmr":{source:"iana",extensions:["mmr"]},"image/vnd.fujixerox.edmics-rlc":{source:"iana",extensions:["rlc"]},"image/vnd.globalgraphics.pgb":{source:"iana"},"image/vnd.microsoft.icon":{source:"iana",compressible:!0,extensions:["ico"]},"image/vnd.mix":{source:"iana"},"image/vnd.mozilla.apng":{source:"iana"},"image/vnd.ms-dds":{compressible:!0,extensions:["dds"]},"image/vnd.ms-modi":{source:"iana",extensions:["mdi"]},"image/vnd.ms-photo":{source:"apache",extensions:["wdp"]},"image/vnd.net-fpx":{source:"iana",extensions:["npx"]},"image/vnd.pco.b16":{source:"iana",extensions:["b16"]},"image/vnd.radiance":{source:"iana"},"image/vnd.sealed.png":{source:"iana"},"image/vnd.sealedmedia.softseal.gif":{source:"iana"},"image/vnd.sealedmedia.softseal.jpg":{source:"iana"},"image/vnd.svf":{source:"iana"},"image/vnd.tencent.tap":{source:"iana",extensions:["tap"]},"image/vnd.valve.source.texture":{source:"iana",extensions:["vtf"]},"image/vnd.wap.wbmp":{source:"iana",extensions:["wbmp"]},"image/vnd.xiff":{source:"iana",extensions:["xif"]},"image/vnd.zbrush.pcx":{source:"iana",extensions:["pcx"]},"image/webp":{source:"apache",extensions:["webp"]},"image/wmf":{source:"iana",extensions:["wmf"]},"image/x-3ds":{source:"apache",extensions:["3ds"]},"image/x-cmu-raster":{source:"apache",extensions:["ras"]},"image/x-cmx":{source:"apache",extensions:["cmx"]},"image/x-freehand":{source:"apache",extensions:["fh","fhc","fh4","fh5","fh7"]},"image/x-icon":{source:"apache",compressible:!0,extensions:["ico"]},"image/x-jng":{source:"nginx",extensions:["jng"]},"image/x-mrsid-image":{source:"apache",extensions:["sid"]},"image/x-ms-bmp":{source:"nginx",compressible:!0,extensions:["bmp"]},"image/x-pcx":{source:"apache",extensions:["pcx"]},"image/x-pict":{source:"apache",extensions:["pic","pct"]},"image/x-portable-anymap":{source:"apache",extensions:["pnm"]},"image/x-portable-bitmap":{source:"apache",extensions:["pbm"]},"image/x-portable-graymap":{source:"apache",extensions:["pgm"]},"image/x-portable-pixmap":{source:"apache",extensions:["ppm"]},"image/x-rgb":{source:"apache",extensions:["rgb"]},"image/x-tga":{source:"apache",extensions:["tga"]},"image/x-xbitmap":{source:"apache",extensions:["xbm"]},"image/x-xcf":{compressible:!1},"image/x-xpixmap":{source:"apache",extensions:["xpm"]},"image/x-xwindowdump":{source:"apache",extensions:["xwd"]},"message/cpim":{source:"iana"},"message/delivery-status":{source:"iana"},"message/disposition-notification":{source:"iana",extensions:["disposition-notification"]},"message/external-body":{source:"iana"},"message/feedback-report":{source:"iana"},"message/global":{source:"iana",extensions:["u8msg"]},"message/global-delivery-status":{source:"iana",extensions:["u8dsn"]},"message/global-disposition-notification":{source:"iana",extensions:["u8mdn"]},"message/global-headers":{source:"iana",extensions:["u8hdr"]},"message/http":{source:"iana",compressible:!1},"message/imdn+xml":{source:"iana",compressible:!0},"message/news":{source:"iana"},"message/partial":{source:"iana",compressible:!1},"message/rfc822":{source:"iana",compressible:!0,extensions:["eml","mime"]},"message/s-http":{source:"iana"},"message/sip":{source:"iana"},"message/sipfrag":{source:"iana"},"message/tracking-status":{source:"iana"},"message/vnd.si.simp":{source:"iana"},"message/vnd.wfa.wsc":{source:"iana",extensions:["wsc"]},"model/3mf":{source:"iana",extensions:["3mf"]},"model/e57":{source:"iana"},"model/gltf+json":{source:"iana",compressible:!0,extensions:["gltf"]},"model/gltf-binary":{source:"iana",compressible:!0,extensions:["glb"]},"model/iges":{source:"iana",compressible:!1,extensions:["igs","iges"]},"model/mesh":{source:"iana",compressible:!1,extensions:["msh","mesh","silo"]},"model/mtl":{source:"iana",extensions:["mtl"]},"model/obj":{source:"iana",extensions:["obj"]},"model/step":{source:"iana"},"model/step+xml":{source:"iana",compressible:!0,extensions:["stpx"]},"model/step+zip":{source:"iana",compressible:!1,extensions:["stpz"]},"model/step-xml+zip":{source:"iana",compressible:!1,extensions:["stpxz"]},"model/stl":{source:"iana",extensions:["stl"]},"model/vnd.collada+xml":{source:"iana",compressible:!0,extensions:["dae"]},"model/vnd.dwf":{source:"iana",extensions:["dwf"]},"model/vnd.flatland.3dml":{source:"iana"},"model/vnd.gdl":{source:"iana",extensions:["gdl"]},"model/vnd.gs-gdl":{source:"apache"},"model/vnd.gs.gdl":{source:"iana"},"model/vnd.gtw":{source:"iana",extensions:["gtw"]},"model/vnd.moml+xml":{source:"iana",compressible:!0},"model/vnd.mts":{source:"iana",extensions:["mts"]},"model/vnd.opengex":{source:"iana",extensions:["ogex"]},"model/vnd.parasolid.transmit.binary":{source:"iana",extensions:["x_b"]},"model/vnd.parasolid.transmit.text":{source:"iana",extensions:["x_t"]},"model/vnd.pytha.pyox":{source:"iana"},"model/vnd.rosette.annotated-data-model":{source:"iana"},"model/vnd.sap.vds":{source:"iana",extensions:["vds"]},"model/vnd.usdz+zip":{source:"iana",compressible:!1,extensions:["usdz"]},"model/vnd.valve.source.compiled-map":{source:"iana",extensions:["bsp"]},"model/vnd.vtu":{source:"iana",extensions:["vtu"]},"model/vrml":{source:"iana",compressible:!1,extensions:["wrl","vrml"]},"model/x3d+binary":{source:"apache",compressible:!1,extensions:["x3db","x3dbz"]},"model/x3d+fastinfoset":{source:"iana",extensions:["x3db"]},"model/x3d+vrml":{source:"apache",compressible:!1,extensions:["x3dv","x3dvz"]},"model/x3d+xml":{source:"iana",compressible:!0,extensions:["x3d","x3dz"]},"model/x3d-vrml":{source:"iana",extensions:["x3dv"]},"multipart/alternative":{source:"iana",compressible:!1},"multipart/appledouble":{source:"iana"},"multipart/byteranges":{source:"iana"},"multipart/digest":{source:"iana"},"multipart/encrypted":{source:"iana",compressible:!1},"multipart/form-data":{source:"iana",compressible:!1},"multipart/header-set":{source:"iana"},"multipart/mixed":{source:"iana"},"multipart/multilingual":{source:"iana"},"multipart/parallel":{source:"iana"},"multipart/related":{source:"iana",compressible:!1},"multipart/report":{source:"iana"},"multipart/signed":{source:"iana",compressible:!1},"multipart/vnd.bint.med-plus":{source:"iana"},"multipart/voice-message":{source:"iana"},"multipart/x-mixed-replace":{source:"iana"},"text/1d-interleaved-parityfec":{source:"iana"},"text/cache-manifest":{source:"iana",compressible:!0,extensions:["appcache","manifest"]},"text/calendar":{source:"iana",extensions:["ics","ifb"]},"text/calender":{compressible:!0},"text/cmd":{compressible:!0},"text/coffeescript":{extensions:["coffee","litcoffee"]},"text/cql":{source:"iana"},"text/cql-expression":{source:"iana"},"text/cql-identifier":{source:"iana"},"text/css":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["css"]},"text/csv":{source:"iana",compressible:!0,extensions:["csv"]},"text/csv-schema":{source:"iana"},"text/directory":{source:"iana"},"text/dns":{source:"iana"},"text/ecmascript":{source:"iana"},"text/encaprtp":{source:"iana"},"text/enriched":{source:"iana"},"text/fhirpath":{source:"iana"},"text/flexfec":{source:"iana"},"text/fwdred":{source:"iana"},"text/gff3":{source:"iana"},"text/grammar-ref-list":{source:"iana"},"text/html":{source:"iana",compressible:!0,extensions:["html","htm","shtml"]},"text/jade":{extensions:["jade"]},"text/javascript":{source:"iana",compressible:!0},"text/jcr-cnd":{source:"iana"},"text/jsx":{compressible:!0,extensions:["jsx"]},"text/less":{compressible:!0,extensions:["less"]},"text/markdown":{source:"iana",compressible:!0,extensions:["markdown","md"]},"text/mathml":{source:"nginx",extensions:["mml"]},"text/mdx":{compressible:!0,extensions:["mdx"]},"text/mizar":{source:"iana"},"text/n3":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["n3"]},"text/parameters":{source:"iana",charset:"UTF-8"},"text/parityfec":{source:"iana"},"text/plain":{source:"iana",compressible:!0,extensions:["txt","text","conf","def","list","log","in","ini"]},"text/provenance-notation":{source:"iana",charset:"UTF-8"},"text/prs.fallenstein.rst":{source:"iana"},"text/prs.lines.tag":{source:"iana",extensions:["dsc"]},"text/prs.prop.logic":{source:"iana"},"text/raptorfec":{source:"iana"},"text/red":{source:"iana"},"text/rfc822-headers":{source:"iana"},"text/richtext":{source:"iana",compressible:!0,extensions:["rtx"]},"text/rtf":{source:"iana",compressible:!0,extensions:["rtf"]},"text/rtp-enc-aescm128":{source:"iana"},"text/rtploopback":{source:"iana"},"text/rtx":{source:"iana"},"text/sgml":{source:"iana",extensions:["sgml","sgm"]},"text/shaclc":{source:"iana"},"text/shex":{source:"iana",extensions:["shex"]},"text/slim":{extensions:["slim","slm"]},"text/spdx":{source:"iana",extensions:["spdx"]},"text/strings":{source:"iana"},"text/stylus":{extensions:["stylus","styl"]},"text/t140":{source:"iana"},"text/tab-separated-values":{source:"iana",compressible:!0,extensions:["tsv"]},"text/troff":{source:"iana",extensions:["t","tr","roff","man","me","ms"]},"text/turtle":{source:"iana",charset:"UTF-8",extensions:["ttl"]},"text/ulpfec":{source:"iana"},"text/uri-list":{source:"iana",compressible:!0,extensions:["uri","uris","urls"]},"text/vcard":{source:"iana",compressible:!0,extensions:["vcard"]},"text/vnd.a":{source:"iana"},"text/vnd.abc":{source:"iana"},"text/vnd.ascii-art":{source:"iana"},"text/vnd.curl":{source:"iana",extensions:["curl"]},"text/vnd.curl.dcurl":{source:"apache",extensions:["dcurl"]},"text/vnd.curl.mcurl":{source:"apache",extensions:["mcurl"]},"text/vnd.curl.scurl":{source:"apache",extensions:["scurl"]},"text/vnd.debian.copyright":{source:"iana",charset:"UTF-8"},"text/vnd.dmclientscript":{source:"iana"},"text/vnd.dvb.subtitle":{source:"iana",extensions:["sub"]},"text/vnd.esmertec.theme-descriptor":{source:"iana",charset:"UTF-8"},"text/vnd.familysearch.gedcom":{source:"iana",extensions:["ged"]},"text/vnd.ficlab.flt":{source:"iana"},"text/vnd.fly":{source:"iana",extensions:["fly"]},"text/vnd.fmi.flexstor":{source:"iana",extensions:["flx"]},"text/vnd.gml":{source:"iana"},"text/vnd.graphviz":{source:"iana",extensions:["gv"]},"text/vnd.hans":{source:"iana"},"text/vnd.hgl":{source:"iana"},"text/vnd.in3d.3dml":{source:"iana",extensions:["3dml"]},"text/vnd.in3d.spot":{source:"iana",extensions:["spot"]},"text/vnd.iptc.newsml":{source:"iana"},"text/vnd.iptc.nitf":{source:"iana"},"text/vnd.latex-z":{source:"iana"},"text/vnd.motorola.reflex":{source:"iana"},"text/vnd.ms-mediapackage":{source:"iana"},"text/vnd.net2phone.commcenter.command":{source:"iana"},"text/vnd.radisys.msml-basic-layout":{source:"iana"},"text/vnd.senx.warpscript":{source:"iana"},"text/vnd.si.uricatalogue":{source:"iana"},"text/vnd.sosi":{source:"iana"},"text/vnd.sun.j2me.app-descriptor":{source:"iana",charset:"UTF-8",extensions:["jad"]},"text/vnd.trolltech.linguist":{source:"iana",charset:"UTF-8"},"text/vnd.wap.si":{source:"iana"},"text/vnd.wap.sl":{source:"iana"},"text/vnd.wap.wml":{source:"iana",extensions:["wml"]},"text/vnd.wap.wmlscript":{source:"iana",extensions:["wmls"]},"text/vtt":{source:"iana",charset:"UTF-8",compressible:!0,extensions:["vtt"]},"text/x-asm":{source:"apache",extensions:["s","asm"]},"text/x-c":{source:"apache",extensions:["c","cc","cxx","cpp","h","hh","dic"]},"text/x-component":{source:"nginx",extensions:["htc"]},"text/x-fortran":{source:"apache",extensions:["f","for","f77","f90"]},"text/x-gwt-rpc":{compressible:!0},"text/x-handlebars-template":{extensions:["hbs"]},"text/x-java-source":{source:"apache",extensions:["java"]},"text/x-jquery-tmpl":{compressible:!0},"text/x-lua":{extensions:["lua"]},"text/x-markdown":{compressible:!0,extensions:["mkd"]},"text/x-nfo":{source:"apache",extensions:["nfo"]},"text/x-opml":{source:"apache",extensions:["opml"]},"text/x-org":{compressible:!0,extensions:["org"]},"text/x-pascal":{source:"apache",extensions:["p","pas"]},"text/x-processing":{compressible:!0,extensions:["pde"]},"text/x-sass":{extensions:["sass"]},"text/x-scss":{extensions:["scss"]},"text/x-setext":{source:"apache",extensions:["etx"]},"text/x-sfv":{source:"apache",extensions:["sfv"]},"text/x-suse-ymp":{compressible:!0,extensions:["ymp"]},"text/x-uuencode":{source:"apache",extensions:["uu"]},"text/x-vcalendar":{source:"apache",extensions:["vcs"]},"text/x-vcard":{source:"apache",extensions:["vcf"]},"text/xml":{source:"iana",compressible:!0,extensions:["xml"]},"text/xml-external-parsed-entity":{source:"iana"},"text/yaml":{compressible:!0,extensions:["yaml","yml"]},"video/1d-interleaved-parityfec":{source:"iana"},"video/3gpp":{source:"iana",extensions:["3gp","3gpp"]},"video/3gpp-tt":{source:"iana"},"video/3gpp2":{source:"iana",extensions:["3g2"]},"video/av1":{source:"iana"},"video/bmpeg":{source:"iana"},"video/bt656":{source:"iana"},"video/celb":{source:"iana"},"video/dv":{source:"iana"},"video/encaprtp":{source:"iana"},"video/ffv1":{source:"iana"},"video/flexfec":{source:"iana"},"video/h261":{source:"iana",extensions:["h261"]},"video/h263":{source:"iana",extensions:["h263"]},"video/h263-1998":{source:"iana"},"video/h263-2000":{source:"iana"},"video/h264":{source:"iana",extensions:["h264"]},"video/h264-rcdo":{source:"iana"},"video/h264-svc":{source:"iana"},"video/h265":{source:"iana"},"video/iso.segment":{source:"iana",extensions:["m4s"]},"video/jpeg":{source:"iana",extensions:["jpgv"]},"video/jpeg2000":{source:"iana"},"video/jpm":{source:"apache",extensions:["jpm","jpgm"]},"video/jxsv":{source:"iana"},"video/mj2":{source:"iana",extensions:["mj2","mjp2"]},"video/mp1s":{source:"iana"},"video/mp2p":{source:"iana"},"video/mp2t":{source:"iana",extensions:["ts"]},"video/mp4":{source:"iana",compressible:!1,extensions:["mp4","mp4v","mpg4"]},"video/mp4v-es":{source:"iana"},"video/mpeg":{source:"iana",compressible:!1,extensions:["mpeg","mpg","mpe","m1v","m2v"]},"video/mpeg4-generic":{source:"iana"},"video/mpv":{source:"iana"},"video/nv":{source:"iana"},"video/ogg":{source:"iana",compressible:!1,extensions:["ogv"]},"video/parityfec":{source:"iana"},"video/pointer":{source:"iana"},"video/quicktime":{source:"iana",compressible:!1,extensions:["qt","mov"]},"video/raptorfec":{source:"iana"},"video/raw":{source:"iana"},"video/rtp-enc-aescm128":{source:"iana"},"video/rtploopback":{source:"iana"},"video/rtx":{source:"iana"},"video/scip":{source:"iana"},"video/smpte291":{source:"iana"},"video/smpte292m":{source:"iana"},"video/ulpfec":{source:"iana"},"video/vc1":{source:"iana"},"video/vc2":{source:"iana"},"video/vnd.cctv":{source:"iana"},"video/vnd.dece.hd":{source:"iana",extensions:["uvh","uvvh"]},"video/vnd.dece.mobile":{source:"iana",extensions:["uvm","uvvm"]},"video/vnd.dece.mp4":{source:"iana"},"video/vnd.dece.pd":{source:"iana",extensions:["uvp","uvvp"]},"video/vnd.dece.sd":{source:"iana",extensions:["uvs","uvvs"]},"video/vnd.dece.video":{source:"iana",extensions:["uvv","uvvv"]},"video/vnd.directv.mpeg":{source:"iana"},"video/vnd.directv.mpeg-tts":{source:"iana"},"video/vnd.dlna.mpeg-tts":{source:"iana"},"video/vnd.dvb.file":{source:"iana",extensions:["dvb"]},"video/vnd.fvt":{source:"iana",extensions:["fvt"]},"video/vnd.hns.video":{source:"iana"},"video/vnd.iptvforum.1dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.1dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.2dparityfec-1010":{source:"iana"},"video/vnd.iptvforum.2dparityfec-2005":{source:"iana"},"video/vnd.iptvforum.ttsavc":{source:"iana"},"video/vnd.iptvforum.ttsmpeg2":{source:"iana"},"video/vnd.motorola.video":{source:"iana"},"video/vnd.motorola.videop":{source:"iana"},"video/vnd.mpegurl":{source:"iana",extensions:["mxu","m4u"]},"video/vnd.ms-playready.media.pyv":{source:"iana",extensions:["pyv"]},"video/vnd.nokia.interleaved-multimedia":{source:"iana"},"video/vnd.nokia.mp4vr":{source:"iana"},"video/vnd.nokia.videovoip":{source:"iana"},"video/vnd.objectvideo":{source:"iana"},"video/vnd.radgamettools.bink":{source:"iana"},"video/vnd.radgamettools.smacker":{source:"iana"},"video/vnd.sealed.mpeg1":{source:"iana"},"video/vnd.sealed.mpeg4":{source:"iana"},"video/vnd.sealed.swf":{source:"iana"},"video/vnd.sealedmedia.softseal.mov":{source:"iana"},"video/vnd.uvvu.mp4":{source:"iana",extensions:["uvu","uvvu"]},"video/vnd.vivo":{source:"iana",extensions:["viv"]},"video/vnd.youtube.yt":{source:"iana"},"video/vp8":{source:"iana"},"video/vp9":{source:"iana"},"video/webm":{source:"apache",compressible:!1,extensions:["webm"]},"video/x-f4v":{source:"apache",extensions:["f4v"]},"video/x-fli":{source:"apache",extensions:["fli"]},"video/x-flv":{source:"apache",compressible:!1,extensions:["flv"]},"video/x-m4v":{source:"apache",extensions:["m4v"]},"video/x-matroska":{source:"apache",compressible:!1,extensions:["mkv","mk3d","mks"]},"video/x-mng":{source:"apache",extensions:["mng"]},"video/x-ms-asf":{source:"apache",extensions:["asf","asx"]},"video/x-ms-vob":{source:"apache",extensions:["vob"]},"video/x-ms-wm":{source:"apache",extensions:["wm"]},"video/x-ms-wmv":{source:"apache",compressible:!1,extensions:["wmv"]},"video/x-ms-wmx":{source:"apache",extensions:["wmx"]},"video/x-ms-wvx":{source:"apache",extensions:["wvx"]},"video/x-msvideo":{source:"apache",extensions:["avi"]},"video/x-sgi-movie":{source:"apache",extensions:["movie"]},"video/x-smv":{source:"apache",extensions:["smv"]},"x-conference/x-cooltalk":{source:"apache",extensions:["ice"]},"x-shader/x-fragment":{compressible:!0},"x-shader/x-vertex":{compressible:!0}};/*!
 * mime-db
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015-2022 Douglas Christopher Wilson
 * MIT Licensed
 */var mimeDb=require$$0;function assertPath(re){if(typeof re!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(re))}function normalizeStringPosix(re,ee){for(var ne="",ie=0,oe=-1,ae=0,ce,le=0;le<=re.length;++le){if(le<re.length)ce=re.charCodeAt(le);else{if(ce===47)break;ce=47}if(ce===47){if(!(oe===le-1||ae===1))if(oe!==le-1&&ae===2){if(ne.length<2||ie!==2||ne.charCodeAt(ne.length-1)!==46||ne.charCodeAt(ne.length-2)!==46){if(ne.length>2){var ue=ne.lastIndexOf("/");if(ue!==ne.length-1){ue===-1?(ne="",ie=0):(ne=ne.slice(0,ue),ie=ne.length-1-ne.lastIndexOf("/")),oe=le,ae=0;continue}}else if(ne.length===2||ne.length===1){ne="",ie=0,oe=le,ae=0;continue}}ee&&(ne.length>0?ne+="/..":ne="..",ie=2)}else ne.length>0?ne+="/"+re.slice(oe+1,le):ne=re.slice(oe+1,le),ie=le-oe-1;oe=le,ae=0}else ce===46&&ae!==-1?++ae:ae=-1}return ne}function _format(re,ee){var ne=ee.dir||ee.root,ie=ee.base||(ee.name||"")+(ee.ext||"");return ne?ne===ee.root?ne+ie:ne+re+ie:ie}var posix={resolve:function(){for(var ee="",ne=!1,ie,oe=arguments.length-1;oe>=-1&&!ne;oe--){var ae;oe>=0?ae=arguments[oe]:(ie===void 0&&(ie=browser$1$1.cwd()),ae=ie),assertPath(ae),ae.length!==0&&(ee=ae+"/"+ee,ne=ae.charCodeAt(0)===47)}return ee=normalizeStringPosix(ee,!ne),ne?ee.length>0?"/"+ee:"/":ee.length>0?ee:"."},normalize:function(ee){if(assertPath(ee),ee.length===0)return".";var ne=ee.charCodeAt(0)===47,ie=ee.charCodeAt(ee.length-1)===47;return ee=normalizeStringPosix(ee,!ne),ee.length===0&&!ne&&(ee="."),ee.length>0&&ie&&(ee+="/"),ne?"/"+ee:ee},isAbsolute:function(ee){return assertPath(ee),ee.length>0&&ee.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var ee,ne=0;ne<arguments.length;++ne){var ie=arguments[ne];assertPath(ie),ie.length>0&&(ee===void 0?ee=ie:ee+="/"+ie)}return ee===void 0?".":posix.normalize(ee)},relative:function(ee,ne){if(assertPath(ee),assertPath(ne),ee===ne||(ee=posix.resolve(ee),ne=posix.resolve(ne),ee===ne))return"";for(var ie=1;ie<ee.length&&ee.charCodeAt(ie)===47;++ie);for(var oe=ee.length,ae=oe-ie,ce=1;ce<ne.length&&ne.charCodeAt(ce)===47;++ce);for(var le=ne.length,ue=le-ce,he=ae<ue?ae:ue,fe=-1,me=0;me<=he;++me){if(me===he){if(ue>he){if(ne.charCodeAt(ce+me)===47)return ne.slice(ce+me+1);if(me===0)return ne.slice(ce+me)}else ae>he&&(ee.charCodeAt(ie+me)===47?fe=me:me===0&&(fe=0));break}var ge=ee.charCodeAt(ie+me),ve=ne.charCodeAt(ce+me);if(ge!==ve)break;ge===47&&(fe=me)}var ye="";for(me=ie+fe+1;me<=oe;++me)(me===oe||ee.charCodeAt(me)===47)&&(ye.length===0?ye+="..":ye+="/..");return ye.length>0?ye+ne.slice(ce+fe):(ce+=fe,ne.charCodeAt(ce)===47&&++ce,ne.slice(ce))},_makeLong:function(ee){return ee},dirname:function(ee){if(assertPath(ee),ee.length===0)return".";for(var ne=ee.charCodeAt(0),ie=ne===47,oe=-1,ae=!0,ce=ee.length-1;ce>=1;--ce)if(ne=ee.charCodeAt(ce),ne===47){if(!ae){oe=ce;break}}else ae=!1;return oe===-1?ie?"/":".":ie&&oe===1?"//":ee.slice(0,oe)},basename:function(ee,ne){if(ne!==void 0&&typeof ne!="string")throw new TypeError('"ext" argument must be a string');assertPath(ee);var ie=0,oe=-1,ae=!0,ce;if(ne!==void 0&&ne.length>0&&ne.length<=ee.length){if(ne.length===ee.length&&ne===ee)return"";var le=ne.length-1,ue=-1;for(ce=ee.length-1;ce>=0;--ce){var he=ee.charCodeAt(ce);if(he===47){if(!ae){ie=ce+1;break}}else ue===-1&&(ae=!1,ue=ce+1),le>=0&&(he===ne.charCodeAt(le)?--le===-1&&(oe=ce):(le=-1,oe=ue))}return ie===oe?oe=ue:oe===-1&&(oe=ee.length),ee.slice(ie,oe)}else{for(ce=ee.length-1;ce>=0;--ce)if(ee.charCodeAt(ce)===47){if(!ae){ie=ce+1;break}}else oe===-1&&(ae=!1,oe=ce+1);return oe===-1?"":ee.slice(ie,oe)}},extname:function(ee){assertPath(ee);for(var ne=-1,ie=0,oe=-1,ae=!0,ce=0,le=ee.length-1;le>=0;--le){var ue=ee.charCodeAt(le);if(ue===47){if(!ae){ie=le+1;break}continue}oe===-1&&(ae=!1,oe=le+1),ue===46?ne===-1?ne=le:ce!==1&&(ce=1):ne!==-1&&(ce=-1)}return ne===-1||oe===-1||ce===0||ce===1&&ne===oe-1&&ne===ie+1?"":ee.slice(ne,oe)},format:function(ee){if(ee===null||typeof ee!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof ee);return _format("/",ee)},parse:function(ee){assertPath(ee);var ne={root:"",dir:"",base:"",ext:"",name:""};if(ee.length===0)return ne;var ie=ee.charCodeAt(0),oe=ie===47,ae;oe?(ne.root="/",ae=1):ae=0;for(var ce=-1,le=0,ue=-1,he=!0,fe=ee.length-1,me=0;fe>=ae;--fe){if(ie=ee.charCodeAt(fe),ie===47){if(!he){le=fe+1;break}continue}ue===-1&&(he=!1,ue=fe+1),ie===46?ce===-1?ce=fe:me!==1&&(me=1):ce!==-1&&(me=-1)}return ce===-1||ue===-1||me===0||me===1&&ce===ue-1&&ce===le+1?ue!==-1&&(le===0&&oe?ne.base=ne.name=ee.slice(1,ue):ne.base=ne.name=ee.slice(le,ue)):(le===0&&oe?(ne.name=ee.slice(1,ce),ne.base=ee.slice(1,ue)):(ne.name=ee.slice(le,ce),ne.base=ee.slice(le,ue)),ne.ext=ee.slice(ce,ue)),le>0?ne.dir=ee.slice(0,le-1):oe&&(ne.dir="/"),ne},sep:"/",delimiter:":",win32:null,posix:null};posix.posix=posix;var pathBrowserify=posix;/*!
 * mime-types
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */(function(re){var ee=mimeDb,ne=pathBrowserify.extname,ie=/^\s*([^;\s]*)(?:;|\s|$)/,oe=/^text\//i;re.charset=ae,re.charsets={lookup:ae},re.contentType=ce,re.extension=le,re.extensions=Object.create(null),re.lookup=ue,re.types=Object.create(null),he(re.extensions,re.types);function ae(fe){if(!fe||typeof fe!="string")return!1;var me=ie.exec(fe),ge=me&&ee[me[1].toLowerCase()];return ge&&ge.charset?ge.charset:me&&oe.test(me[1])?"UTF-8":!1}function ce(fe){if(!fe||typeof fe!="string")return!1;var me=fe.indexOf("/")===-1?re.lookup(fe):fe;if(!me)return!1;if(me.indexOf("charset")===-1){var ge=re.charset(me);ge&&(me+="; charset="+ge.toLowerCase())}return me}function le(fe){if(!fe||typeof fe!="string")return!1;var me=ie.exec(fe),ge=me&&re.extensions[me[1].toLowerCase()];return!ge||!ge.length?!1:ge[0]}function ue(fe){if(!fe||typeof fe!="string")return!1;var me=ne("x."+fe).toLowerCase().substr(1);return me&&re.types[me]||!1}function he(fe,me){var ge=["nginx","apache",void 0,"iana"];Object.keys(ee).forEach(function(ye){var be=ee[ye],Ce=be.extensions;if(!(!Ce||!Ce.length)){fe[ye]=Ce;for(var Se=0;Se<Ce.length;Se++){var $e=Ce[Se];if(me[$e]){var Te=ge.indexOf(ee[me[$e]].source),Ne=ge.indexOf(be.source);if(me[$e]!=="application/octet-stream"&&(Te>Ne||Te===Ne&&me[$e].substr(0,12)==="application/"))continue}me[$e]=ye}}})}})(mimeTypes);const mime=getDefaultExportFromCjs(mimeTypes);async function prepareFilesFromZIP(re){console.debug("Preparing files from ZIP");let ee=await unzipBuffer(re);const ne=ee["index.html"];ee["index_raw.html"]=new Blob([ne],{type:ne.type});for(let ie in ee)if(ie.endsWith(".html")||ie.endsWith(".htm")){const oe=await ee[ie].arrayBuffer(),ae=injectCSPMetaTagIntoBuffer(oe);ee[ie]=new Blob([ae],{type:ne.type})}return ee=Object.entries(ee).map(ie=>(console.debug("Entry: ",ie),{path:ie[0],blob:ie[1]})),ee=ee.filter(ie=>ie.path!==""),ee}async function unzipBuffer(re){console.debug("Unzipping buffer");let ee=unzipSync(re);ee=Object.entries(ee).map(oe=>(console.debug("Entry: ",oe),{path:oe[0],buffer:oe[1]}));let ne=null;for(const oe of ee)if(oe.path.replace(/^.*[\\/]/,"")==="index.html"){const ce=oe.path.match(/.*\//)||"/";ce.length>0&&(console.debug("Found root dir: ",ce[0]),ne=ce[0]);break}if(ne===null){const oe="No index.html file found!";throw new Error(oe)}console.debug("Creating file map");const ie={};return ee.forEach((oe,ae)=>{const ce=ne==="/"?oe.path:oe.path.replace(`${ne}`,"");console.debug("Entry relPath: ",ce);let le;oe.buffer.length===0&&(oe.path.endsWith("/")||!oe.path)?le=MIMETYPE.DIRECTORY:le=mime.lookup(oe.path),ie[ce]=new Blob([oe.buffer],{type:le})}),ie}function injectCSPMetaTagIntoBuffer(re){const ee=new TextDecoder().decode(re),ne=injectCSPMetaTagIntoHTML(ee);return new TextEncoder().encode(ne)}function injectCSPMetaTagIntoHTML(re){const ne=new DOMParser().parseFromString(re,"text/html"),ie=ne.head.querySelectorAll('meta[http-equiv="Content-Security-Policy"]');if(ie.length)for(const oe of ie)oe.remove();if(!ne.head){const oe="index.html is missing <head> tag!";throw window.alert(oe),new Error(oe)}return ne.head.insertAdjacentHTML("afterbegin",`
    <meta http-equiv="Content-Security-Policy" content="
    upgrade-insecure-requests;
    default-src
      'none';
    frame-src
      'self';
    child-src
      'self'
      'unsafe-inline'
      blob:;
    script-src
      'self'
      'unsafe-inline'
      'unsafe-eval'
      blob:;
    style-src
      'self'
      'unsafe-inline';
    img-src
      'self'
      'unsafe-inline'
      data:
      blob:
      https://services.tzkt.io
      https://cloudflare-ipfs.com/
      https://ipfs.io/
      https://templewallet.com/logo.png
      https://gateway.pinata.cloud/;
    font-src
      'self'
      data:
      https://cloudflare-ipfs.com/
      https://fonts.googleapis.com/
      https://ipfs.io/
      https://gateway.pinata.cloud/;
    connect-src
      'self'
      https://better-call.dev
      https://*.better-call.dev
      https://*.cryptonomic-infra.tech
      https://cryptonomic-infra.tech
      blob:
      data:
      ws:
      wss:
      bootstrap.libp2p.io
      preload.ipfs.io
      https://mainnet.smartpy.io
      https://mainnet-tezos.giganode.io
      https://api.etherscan.io
      https://api.thegraph.com
      https://*.tzkt.io
      https://api.hicdex.com
      https://hdapi.teztools.io
      https://api.teia.rocks
      https://data.objkt.com
      https://api.tzstats.com
      https://*.wikidata.org
      https://*.coinmarketcap.com
      https://api.openweathermap.org
      https://hicetnunc.xyz
      https://*.hicetnunc.xyz
      https://teia.art
      https://*.teia.art
      https://*.hicetnunc.art
      https://*.teztools.io;
    manifest-src
      'self';
    base-uri
      'self';
    form-action
      'none';
    media-src
      'self'
      'unsafe-inline'
      data:
      blob:
      https://cloudflare-ipfs.com/
      https://ipfs.io/
      https://gateway.pinata.cloud/;
    prefetch-src
      'self'
      https://cloudflare-ipfs.com/
      https://fonts.googleapis.com/
      https://ipfs.io/
      https://gateway.pinata.cloud/;
    worker-src
      'self'
      'unsafe-inline'
      blob:;">
  `),`<!DOCTYPE html><html>${ne.documentElement.innerHTML}</html>`}async function validateFiles(re){if(!re["index.html"])return{valid:!1,error:"Missing index.html file"};let ne=await re["index.html"].text();return new DOMParser().parseFromString(ne,"text/html").head?{valid:!0}:{valid:!1,error:"Missing <head> tag in index.html. Please refer to the Interactive OBJKTs Guide.."}}async function dataRUIToBuffer(re){const ee=await fetch(re).then(oe=>oe.blob()),ne=await new Response(ee).arrayBuffer();return new Uint8Array(ne)}const html="_html_1to66_1",container$o="_container_1to66_24",interactive="_interactive_1to66_38",preview$2="_preview_1to66_43",button$3="_button_1to66_51",gradient$2="_gradient_1to66_61",warning="_warning_1to66_88",error$1="_error_1to66_96",styles$H={html,container:container$o,interactive,preview:preview$2,button:button$3,gradient:gradient$2,warning,error:error$1},uid=Math.round(Math.random()*1e8).toString(),allowed_features="accelerometer; camera; fullscreen; gyroscope; microphone; midi *; xr-spatial-tracking;",sandbox_features="allow-scripts allow-same-origin allow-modals allow-pointer-lock",HTMLComponent=re=>{const{artifactUri:ee,displayUri:ne,previewUri:ie,nft:oe,displayView:ae}=re,ce=useUserStore(Ne=>Ne.address),le=useModalStore(Ne=>Ne.show);let ue=!1,he=!1,fe=!1;oe.artist_address&&(ue=oe.artist_address),ce&&(he=ce),oe.token_id&&(fe=String(oe.token_id));const me=reactExports.useRef(null),ge=reactExports.useRef(null),ve=reactExports.useRef(!1),[ye,be]=reactExports.useState(null),[Ce,Se]=reactExports.useState(null),$e=async()=>{ve.current=!0;const Ne=await dataRUIToBuffer(ie);try{const ke=(await prepareFilesFromZIP(Ne)).reduce((Oe,Be)=>({...Oe,[Be.path]:Be.blob}),{});ge.current=ke;const De=await validateFiles(ge.current);De.error?(console.error(De.error),Se(De.error)):Se(null),be(De.valid),ve.current=!1}catch(Ie){le(`Couldn't unpack ZIP file: ${Ie}`),console.error(Ie);return}};ie&&!ge.current&&!ve.current&&$e(),reactExports.useEffect(()=>{const Ne=async Ie=>{Ie.data===uid&&me.current.contentWindow.postMessage({target:"hicetnunc-html-preview",data:ge.current},"*")};return window.addEventListener("message",Ne),()=>window.removeEventListener("message",Ne)},[ie]);const Te=classNames$1({[styles$H.container]:!0,[styles$H.interactive]:ae});if(ie){if(ue=he,ye)return jsx$1("div",{className:Te,children:jsx$1("iframe",{ref:me,title:`interactive object ${oe.token_id}`,src:`https://iframe.teia.art/html/?uid=${uid}&creator=${ue}&viewer=${he}&objkt=${fe}`,sandbox:sandbox_features,allow:allowed_features})});if(ye===!1)return jsxs("div",{className:styles$H.error,children:["Preview Error: ",Ce]})}return ae?jsx$1("div",{children:jsx$1("iframe",{className:`${styles$H.html} zip-embed`,title:`interactive object ${oe.token_id}`,src:`${ee}/?creator=${ue}&viewer=${he}&objkt=${fe}`,sandbox:sandbox_features,allow:allowed_features})}):jsx$1("div",{className:Te,children:jsxs("div",{className:styles$H.preview,children:[jsx$1("img",{src:ne,alt:`interactive object ${oe.token_id}`}),jsx$1("div",{className:styles$H.button,children:jsx$1(Button,{alt:"View Generative Token",children:jsx$1(GenerativeIcon,{})})})]})})},container$n="_container_twh41_216",square$4="_square_twh41_219",styles$G={container:container$n,square:square$4},UnknownComponent=({mimeType:re})=>jsx$1("div",{className:styles$G.container,children:jsx$1("div",{className:styles$G.square,children:"Metadata on queue"})}),container$m="_container_mdltp_216",pdfNav="_pdfNav_mdltp_225",previous_page="_previous_page_mdltp_238",page="_page_mdltp_246",styles$F={container:container$m,pdfNav,previous_page,page};displayWorkerWarning();pdfExports.GlobalWorkerOptions.workerSrc=new URL("/teia-ui/previews/pr-437/assets/pdf.worker-6b078827.js",self.location);const TextLayer="",AnnotationLayer="",options$1={cMapUrl:"cmaps/",cMapPacked:!0,standardFontDataUrl:"standard_fonts/"},PdfComponent=reactExports.memo(function({artifactUri:re,displayUri:ee,previewUri:ne,displayView:ie,nft:oe}){const[ae,ce]=reactExports.useState(),[le,ue]=reactExports.useState(1),[he,fe]=reactExports.useState(),[me,ge]=reactExports.useState(ie),[ve,ye]=reactExports.useState(!0),[be,Ce]=reactExports.useState(),Se=reactExports.useRef(null),$e=reactExports.useMemo(()=>ne||re,[ne,re]);function Te({numPages:Le}){ce(Le)}function Ne(Le){console.error(`PDF Error: ${Le.message}`)}function Ie(Le){ue(je=>je+Le)}function ke(){Ie(-1)}function De(){Ie(1)}const Oe=()=>{var Le;me&&(ge(!1),Ce((Le=Se.current)==null?void 0:Le.clientHeight)),fe(le)};function Be(Le,je){function ze(Ve){if(Ve===null){ye(!1);return}Le(Ve)}switch(je){case 1:{const Ve=prompt("Enter the password to open this PDF file.");ze(Ve);break}case 2:{const Ve=prompt("Invalid password. Please try again.");ze(Ve);break}}}const Me=jsxs(Fragment,{children:[jsx$1(ImageComponent,{artifactUri:ee,displayUri:ee,previewUri:ne,displayView:!1,nft:oe},`img-${oe.token_id}`),me&&jsx$1("p",{style:{textAlign:"center",margin:"1em"},children:"Loading PDF..."},`loading-${oe.token_id}`)]});return ie?jsxs("div",{ref:Se,className:styles$F.container,children:[ve?jsxs(Document$1,{file:$e,loading:Me,onPassword:Be,onLoadSuccess:Te,onLoadError:Ne,title:`PDF object ${oe.token_id}`,options:options$1,children:[he&&he!==le&&jsx$1(Page$1,{className:styles$F.previous_page,pageNumber:he,height:be},`${he}`),jsx$1(Page$1,{className:styles$F.page,pageNumber:le,onRenderSuccess:Oe,height:be},le)]}):jsx$1(Button,{onClick:()=>{ye(!0)},children:"Reload PDF with password"}),!me&&ve&&jsxs("div",{className:styles$F.pdfNav,children:[jsx$1(Button,{disabled:le<=1,onClick:ke,children:"Prev «"}),jsxs("p",{children:["Page ",le||(ae?1:"--")," of ",ae||"--"]}),jsx$1(Button,{disabled:ae?le>=ae:!1,onClick:De,children:">» Next"})]})]}):Me}),methodMap=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],nativeAPI=(()=>{if(typeof document>"u")return!1;const re=methodMap[0],ee={};for(const ne of methodMap)if((ne==null?void 0:ne[1])in document){for(const[oe,ae]of ne.entries())ee[re[oe]]=ae;return ee}return!1})(),eventNameMap={change:nativeAPI.fullscreenchange,error:nativeAPI.fullscreenerror};let screenfull={request(re=document.documentElement,ee){return new Promise((ne,ie)=>{const oe=()=>{screenfull.off("change",oe),ne()};screenfull.on("change",oe);const ae=re[nativeAPI.requestFullscreen](ee);ae instanceof Promise&&ae.then(oe).catch(ie)})},exit(){return new Promise((re,ee)=>{if(!screenfull.isFullscreen){re();return}const ne=()=>{screenfull.off("change",ne),re()};screenfull.on("change",ne);const ie=document[nativeAPI.exitFullscreen]();ie instanceof Promise&&ie.then(ne).catch(ee)})},toggle(re,ee){return screenfull.isFullscreen?screenfull.exit():screenfull.request(re,ee)},onchange(re){screenfull.on("change",re)},onerror(re){screenfull.on("error",re)},on(re,ee){const ne=eventNameMap[re];ne&&document.addEventListener(ne,ee,!1)},off(re,ee){const ne=eventNameMap[re];ne&&document.removeEventListener(ne,ee,!1)},raw:nativeAPI};Object.defineProperties(screenfull,{isFullscreen:{get:()=>!!document[nativeAPI.fullscreenElement]},element:{enumerable:!0,get:()=>document[nativeAPI.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[nativeAPI.fullscreenEnabled]}});nativeAPI||(screenfull={isEnabled:!1});const screenfull$1=screenfull,observerMap=new Map,RootIds=new WeakMap;let rootId=0,unsupportedValue;function getRootId(re){return re?(RootIds.has(re)||(rootId+=1,RootIds.set(re,rootId.toString())),RootIds.get(re)):"0"}function optionsToId(re){return Object.keys(re).sort().filter(ee=>re[ee]!==void 0).map(ee=>`${ee}_${ee==="root"?getRootId(re.root):re[ee]}`).toString()}function createObserver(re){let ee=optionsToId(re),ne=observerMap.get(ee);if(!ne){const ie=new Map;let oe;const ae=new IntersectionObserver(ce=>{ce.forEach(le=>{var ue;const he=le.isIntersecting&&oe.some(fe=>le.intersectionRatio>=fe);re.trackVisibility&&typeof le.isVisible>"u"&&(le.isVisible=he),(ue=ie.get(le.target))==null||ue.forEach(fe=>{fe(he,le)})})},re);oe=ae.thresholds||(Array.isArray(re.threshold)?re.threshold:[re.threshold||0]),ne={id:ee,observer:ae,elements:ie},observerMap.set(ee,ne)}return ne}function observe(re,ee,ne={},ie=unsupportedValue){if(typeof window.IntersectionObserver>"u"&&ie!==void 0){const ue=re.getBoundingClientRect();return ee(ie,{isIntersecting:ie,target:re,intersectionRatio:typeof ne.threshold=="number"?ne.threshold:0,time:0,boundingClientRect:ue,intersectionRect:ue,rootBounds:ue}),()=>{}}const{id:oe,observer:ae,elements:ce}=createObserver(ne);let le=ce.get(re)||[];return ce.has(re)||ce.set(re,le),le.push(ee),ae.observe(re),function(){le.splice(le.indexOf(ee),1),le.length===0&&(ce.delete(re),ae.unobserve(re)),ce.size===0&&(ae.disconnect(),observerMap.delete(oe))}}function useInView({threshold:re,delay:ee,trackVisibility:ne,rootMargin:ie,root:oe,triggerOnce:ae,skip:ce,initialInView:le,fallbackInView:ue,onChange:he}={}){var fe;const[me,ge]=reactExports.useState(null),ve=reactExports.useRef(),[ye,be]=reactExports.useState({inView:!!le,entry:void 0});ve.current=he,reactExports.useEffect(()=>{if(ce||!me)return;let Te;return Te=observe(me,(Ne,Ie)=>{be({inView:Ne,entry:Ie}),ve.current&&ve.current(Ne,Ie),Ie.isIntersecting&&ae&&Te&&(Te(),Te=void 0)},{root:oe,rootMargin:ie,threshold:re,trackVisibility:ne,delay:ee},ue),()=>{Te&&Te()}},[Array.isArray(re)?re.toString():re,me,oe,ie,ae,ce,ne,ue,ee]);const Ce=(fe=ye.entry)==null?void 0:fe.target,Se=reactExports.useRef();!me&&Ce&&!ae&&!ce&&Se.current!==Ce&&(Se.current=Ce,be({inView:!!le,entry:void 0}));const $e=[ge,ye.inView,ye.entry];return $e.ref=$e[0],$e.inView=$e[1],$e.entry=$e[2],$e}const flex$1="_flex_rhi74_216",anaverse_view="_anaverse_view_rhi74_225",container$l="_container_rhi74_234",feed="_feed_rhi74_244",fullscreen="_fullscreen_rhi74_253",icon="_icon_rhi74_277",icon_fullscreen="_icon_fullscreen_rhi74_307",styles$E={flex:flex$1,anaverse_view,container:container$l,feed,fullscreen,icon,icon_fullscreen},style$2="",getAnaverseUrl=(re,ee)=>ee?`https://anaver.se/?gallery=1&loadsingle=1&singlecontract=${HEN_CONTRACT_FA2}&singletokenid=${re}&wallet=${ee}&partnerPlatform=teia.art`:`https://anaver.se/?gallery=1&loadsingle=1&singlecontract=${HEN_CONTRACT_FA2}&singletokenid=${re}&partnerPlatform=teia.art`,AnaverseViewer=(re,ee)=>{const ne=getAnaverseUrl(re,ee);return jsx$1("iframe",{className:styles$E.anaverse_view,title:`#${re} inside Anaverse`,id:"anavIframe",src:ne})},Container$1=({nft:re,children:ee,displayView:ne})=>{const ie=reactExports.useRef(null),[oe,ae]=reactExports.useState(),[ce,le]=reactExports.useState(),{ref:ue,inView:he}=useInView({threshold:0,initialInView:!1}),fe=[MIMETYPE.MP4,MIMETYPE.OGV,MIMETYPE.QUICKTIME,MIMETYPE.WEBM].includes(re.mime_type),me=()=>{ie.current&&(screenfull$1.isFullscreen?screenfull$1.exit():screenfull$1.request(ie.current,{navigationUI:"hide"}))};reactExports.useEffect(()=>{const Se=$e=>{iOS||(screenfull$1.isFullscreen?ae(!0):ae(!1),window.dispatchEvent(new Event("resize")))};return(fe||!iOS)&&(document.addEventListener("fullscreenchange",Se),document.addEventListener("webkitfullscreenchange",Se,!1)),()=>{(fe||!iOS)&&(document.removeEventListener("fullscreenchange",Se),document.removeEventListener("webkitfullscreenchange",Se,!1))}},[]);const ge=classNames$1({[styles$E.container]:!0,[styles$E.fullscreen]:oe,[styles$E.flex]:ne,[styles$E.feed]:!ne}),ve=useUserStore(Se=>Se.address),ye=AnaverseViewer(re.token_id,ve),be=React.Children.map(ee,Se=>React.isValidElement(Se)?React.cloneElement(Se,{inView:he,displayView:ne}):Se),Ce=()=>{!!window.chrome?le(!ce):window.open(getAnaverseUrl(re.token_id,ve),"_blank")};return jsx$1("div",{ref:ue,children:jsxs("div",{ref:ie,className:ge,children:[ce?ye:be,jsxs("div",{style:{display:"flex"},children:[ne&&!iOS&&!fe&&jsx$1(Button,{alt:"Fullscreen Button",className:styles$E.icon+" svg-icon "+(oe?styles$E.icon_fullscreen:""),onClick:me,children:oe?jsx$1(SvgFullscreenEnter,{width:32}):jsx$1(SvgFullscreenExit,{width:32})}),ne&&!iOS&&jsx$1(Button,{title:"Show in Anaverse",alt:"Anaverse Button",className:styles$E.icon+" svg-icon ",onClick:Ce,children:jsx$1(SvgEnterAnav,{width:32})})]})]})})},container$k="_container_mhzek_1",preview$1="_preview_mhzek_16",button$2="_button_mhzek_31",gradient$1="_gradient_mhzek_41",styles$D={container:container$k,preview:preview$1,button:button$2,gradient:gradient$1},MD=({displayView:re,displayUri:ee,artifactUri:ne,previewUri:ie,preview:oe,objktID:ae})=>{const[ce,le]=React.useState("");return React.useEffect(()=>{if(ne&&axios.get(ne).then(ue=>{le(ue.data)}),oe&&ie)if(ie.startsWith("data:text/markdown;base64,")){const ue=ie.replace("data:text/markdown;base64,","");le(atob(ue))}else console.error("previewUri is not a base64 encoded markdown",ie)},[ne,ie,re,ee,oe]),re?jsx$1("div",{className:styles$D.container,children:jsxs("div",{className:styles$D.preview,children:[jsx$1("img",{src:ee,alt:`cover for markdown object ${ae}`}),jsx$1("div",{className:styles$D.button,children:jsx$1(Button,{alt:"View Markdown Token"})})]})}):jsx$1("div",{children:jsx$1(Container$3,{children:jsx$1(Markdown$1,{children:ce})})})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EPSILON_FLOAT32$1=1e-7,EPSILON_FLOAT16$1=1e-4;class DataStorage{constructor(ee,ne){this.backend=ee,this.dataMover=ne,this.data=new WeakMap,this.dataIdsCount=0}get(ee){return this.data.has(ee)||this.dataMover.moveData(this.backend,ee),this.data.get(ee)}set(ee,ne){this.dataIdsCount++,this.data.set(ee,ne)}has(ee){return this.data.has(ee)}delete(ee){return this.dataIdsCount--,this.data.delete(ee)}numDataIds(){return this.dataIdsCount}}class KernelBackend{decComplexRef(ee){}time(ee){return notYetImplemented("time")}read(ee){return notYetImplemented("read")}readSync(ee){return notYetImplemented("readSync")}numDataIds(){return notYetImplemented("numDataIds")}disposeData(ee){return notYetImplemented("disposeData")}write(ee,ne,ie){return notYetImplemented("write")}move(ee,ne,ie,oe){return notYetImplemented("move")}memory(){return notYetImplemented("memory")}floatPrecision(){return notYetImplemented("floatPrecision")}epsilon(){return this.floatPrecision()===32?EPSILON_FLOAT32$1:EPSILON_FLOAT16$1}batchMatMul(ee,ne,ie,oe){return notYetImplemented("batchMatMul")}fusedBatchMatMul({a:ee,b:ne,transposeA:ie,transposeB:oe,bias:ae,activation:ce,preluActivationWeights:le}){return notYetImplemented("fusedBatchMatMul")}slice(ee,ne,ie){return notYetImplemented("slice")}stridedSlice(ee,ne,ie,oe){return notYetImplemented("stridedSlice")}unstack(ee,ne){return notYetImplemented("unstack")}reverse(ee,ne){return notYetImplemented("reverse")}concat(ee,ne){return notYetImplemented("concat")}neg(ee){return notYetImplemented("neg")}add(ee,ne){return notYetImplemented("add")}addN(ee){return notYetImplemented("addN")}subtract(ee,ne){return notYetImplemented("subtract")}multiply(ee,ne){return notYetImplemented("multiply")}realDivide(ee,ne){return notYetImplemented("realDivide")}floorDiv(ee,ne){return notYetImplemented("floorDiv")}sum(ee,ne){return notYetImplemented("sum")}prod(ee,ne){return notYetImplemented("prod")}unsortedSegmentSum(ee,ne,ie){return notYetImplemented("unsortedSegmentSum")}argMin(ee,ne){return notYetImplemented("argMin")}argMax(ee,ne){return notYetImplemented("argMax")}equal(ee,ne){return notYetImplemented("equal")}notEqual(ee,ne){return notYetImplemented("notEqual")}less(ee,ne){return notYetImplemented("less")}lessEqual(ee,ne){return notYetImplemented("lessEqual")}greater(ee,ne){return notYetImplemented("greater")}greaterEqual(ee,ne){return notYetImplemented("greaterEqual")}logicalNot(ee){return notYetImplemented("logicalNot")}logicalAnd(ee,ne){return notYetImplemented("logicalAnd")}logicalOr(ee,ne){return notYetImplemented("logicalOr")}where(ee){return notYetImplemented("where")}select(ee,ne,ie){return notYetImplemented("select")}topk(ee,ne,ie){return notYetImplemented("topk")}min(ee,ne){return notYetImplemented("min")}minimum(ee,ne){return notYetImplemented("minimum")}mod(ee,ne){return notYetImplemented("mod")}max(ee,ne){return notYetImplemented("max")}maximum(ee,ne){return notYetImplemented("maximum")}all(ee,ne){return notYetImplemented("all")}any(ee,ne){return notYetImplemented("any")}squaredDifference(ee,ne){return notYetImplemented("squaredDifference")}ceil(ee){return notYetImplemented("ceil")}floor(ee){return notYetImplemented("floor")}round(ee){return notYetImplemented("round")}sign(ee){return notYetImplemented("sign")}isNaN(ee){return notYetImplemented("isNaN")}isInf(ee){return notYetImplemented("isInf")}isFinite(ee){return notYetImplemented("isFinite")}pow(ee,ne){return notYetImplemented("pow")}exp(ee){return notYetImplemented("exp")}expm1(ee){return notYetImplemented("expm1")}softmax(ee,ne){return notYetImplemented("softmax")}log(ee){return notYetImplemented("log")}log1p(ee){return notYetImplemented("log1p")}sqrt(ee){return notYetImplemented("sqrt")}rsqrt(ee){return notYetImplemented("rsqrt")}square(ee){return notYetImplemented("square")}reciprocal(ee){return notYetImplemented("reciprocal")}relu(ee){return notYetImplemented("relu")}relu6(ee){return notYetImplemented("relu6")}prelu(ee,ne){return notYetImplemented("prelu")}elu(ee){return notYetImplemented("elu")}eluDer(ee,ne){return notYetImplemented("eluDer")}selu(ee){return notYetImplemented("selu")}int(ee){return notYetImplemented("int")}clip(ee,ne,ie){return notYetImplemented("clip")}abs(ee){return notYetImplemented("abs")}complexAbs(ee){return notYetImplemented("complexAbs")}sigmoid(ee){return notYetImplemented("sigmoid")}softplus(ee){return notYetImplemented("softplus")}sin(ee){return notYetImplemented("sin")}cos(ee){return notYetImplemented("cos")}tan(ee){return notYetImplemented("tan")}asin(ee){return notYetImplemented("asin")}acos(ee){return notYetImplemented("acos")}atan(ee){return notYetImplemented("atan")}atan2(ee,ne){return notYetImplemented("atan2")}sinh(ee){return notYetImplemented("sinh")}cosh(ee){return notYetImplemented("cosh")}tanh(ee){return notYetImplemented("tanh")}asinh(ee){return notYetImplemented("asinh")}acosh(ee){return notYetImplemented("acosh")}atanh(ee){return notYetImplemented("atanh")}erf(ee){return notYetImplemented("erf")}step(ee,ne){return notYetImplemented("step")}fusedConv2d({input:ee,filter:ne,convInfo:ie,bias:oe,activation:ae,preluActivationWeights:ce}){return notYetImplemented("fusedConv2d")}conv2d(ee,ne,ie){return notYetImplemented("conv2d")}conv2dDerInput(ee,ne,ie){return notYetImplemented("conv2dDerInput")}conv2dDerFilter(ee,ne,ie){return notYetImplemented("conv2dDerFilter")}fusedDepthwiseConv2D({input:ee,filter:ne,convInfo:ie,bias:oe,activation:ae,preluActivationWeights:ce}){return notYetImplemented("fusedDepthwiseConv2D")}depthwiseConv2D(ee,ne,ie){return notYetImplemented("depthwiseConv2D")}depthwiseConv2DDerInput(ee,ne,ie){return notYetImplemented("depthwiseConv2DDerInput")}depthwiseConv2DDerFilter(ee,ne,ie){return notYetImplemented("depthwiseConv2DDerFilter")}conv3d(ee,ne,ie){return notYetImplemented("conv3d")}conv3dDerInput(ee,ne,ie){return notYetImplemented("conv3dDerInput")}conv3dDerFilter(ee,ne,ie){return notYetImplemented("conv3dDerFilter")}maxPool(ee,ne){return notYetImplemented("maxPool")}maxPoolBackprop(ee,ne,ie,oe){return notYetImplemented("maxPoolBackprop")}avgPool(ee,ne){return notYetImplemented("avgPool")}avgPoolBackprop(ee,ne,ie){return notYetImplemented("avgPoolBackprop")}avgPool3d(ee,ne){return notYetImplemented("avgPool3d")}avgPool3dBackprop(ee,ne,ie){return notYetImplemented("avgPool3dBackprop")}maxPool3d(ee,ne){return notYetImplemented("maxPool3d")}maxPool3dBackprop(ee,ne,ie,oe){return notYetImplemented("maxPool3dBackprop")}reshape(ee,ne){return notYetImplemented("reshape")}cast(ee,ne){return notYetImplemented("cast")}tile(ee,ne){return notYetImplemented("tile")}pad(ee,ne,ie){return notYetImplemented("pad")}transpose(ee,ne){return notYetImplemented("transpose")}gather(ee,ne,ie,oe=0){return notYetImplemented("gather")}gatherND(ee,ne){return notYetImplemented("gatherND")}scatterND(ee,ne,ie){return notYetImplemented("scatterND")}batchToSpaceND(ee,ne,ie){return notYetImplemented("batchToSpaceND")}spaceToBatchND(ee,ne,ie){return notYetImplemented("spaceToBatchND")}resizeBilinear(ee,ne,ie,oe,ae){return notYetImplemented("resizeBilinear")}resizeBilinearBackprop(ee,ne,ie){return notYetImplemented("resizeBilinearBackprop")}resizeNearestNeighbor(ee,ne,ie,oe,ae){return notYetImplemented("resizeNearestNeighbor")}resizeNearestNeighborBackprop(ee,ne,ie){return notYetImplemented("resizeNearestNeighborBackprop")}batchNorm(ee,ne,ie,oe,ae,ce){return notYetImplemented("batchNorm")}localResponseNormalization4D(ee,ne,ie,oe,ae){return notYetImplemented("localResponseNormalization4D")}LRNGrad(ee,ne,ie,oe,ae,ce,le){return notYetImplemented("LRNGrad")}multinomial(ee,ne,ie,oe){return notYetImplemented("multinomial")}oneHot(ee,ne,ie,oe){return notYetImplemented("oneHot")}cumsum(ee,ne,ie,oe){return notYetImplemented("cumsum")}nonMaxSuppression(ee,ne,ie,oe,ae){return notYetImplemented("nonMaxSuppression")}fft(ee){return notYetImplemented("fft")}ifft(ee){return notYetImplemented("ifft")}complex(ee,ne){return notYetImplemented("complex")}real(ee){return notYetImplemented("real")}imag(ee){return notYetImplemented("imag")}cropAndResize(ee,ne,ie,oe,ae,ce){return notYetImplemented("cropAndResize")}depthToSpace(ee,ne,ie){return notYetImplemented("depthToSpace")}split(ee,ne,ie){return notYetImplemented("split")}sparseToDense(ee,ne,ie,oe){return notYetImplemented("sparseToDense")}diag(ee){return notYetImplemented("diag")}fill(ee,ne,ie){return notYetImplemented("fill")}onesLike(ee){return notYetImplemented("onesLike")}zerosLike(ee){return notYetImplemented("zerosLike")}linspace(ee,ne,ie){return notYetImplemented("linspace")}dispose(){return notYetImplemented("dispose")}}function notYetImplemented(re){throw new Error(`'${re}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function shuffle(re){let ee=re.length,ne=0,ie=0;for(;ee>0;)ie=Math.random()*ee|0,ee--,ne=re[ee],re[ee]=re[ie],re[ie]=ne}function clamp$1(re,ee,ne){return Math.max(re,Math.min(ee,ne))}function nearestLargerEven(re){return re%2===0?re:re+1}function sum$3(re){let ee=0;for(let ne=0;ne<re.length;ne++)ee+=re[ne];return ee}function assert$2(re,ee){if(!re)throw new Error(typeof ee=="string"?ee:ee())}function assertShapesMatch(re,ee,ne=""){assert$2(arraysEqual(re,ee),()=>ne+` Shapes ${re} and ${ee} must match`)}function assertNonNull(re){assert$2(re!=null,()=>"The input to the tensor constructor must be a non-null value.")}function flatten$2(re,ee=[],ne=!1){if(ee==null&&(ee=[]),Array.isArray(re)||isTypedArray$3(re)&&!ne)for(let ie=0;ie<re.length;++ie)flatten$2(re[ie],ee,ne);else ee.push(re);return ee}function sizeFromShape(re){if(re.length===0)return 1;let ee=re[0];for(let ne=1;ne<re.length;ne++)ee*=re[ne];return ee}function arraysEqual(re,ee){if(re===ee)return!0;if(re==null||ee==null||re.length!==ee.length)return!1;for(let ne=0;ne<re.length;ne++)if(re[ne]!==ee[ne])return!1;return!0}function isInt(re){return re%1===0}function sizeToSquarishShape(re){const ee=Math.ceil(Math.sqrt(re));return[ee,Math.ceil(re/ee)]}function rightPad(re,ee){return ee<=re.length?re:re+" ".repeat(ee-re.length)}function repeatedTry(re,ee=ie=>0,ne){return new Promise((ie,oe)=>{let ae=0;const ce=()=>{if(re()){ie();return}ae++;const le=ee(ae);if(ne!=null&&ae>=ne){oe();return}setTimeout(ce,le)};ce()})}function inferFromImplicitShape(re,ee){let ne=1,ie=-1;for(let ae=0;ae<re.length;++ae)if(re[ae]>=0)ne*=re[ae];else if(re[ae]===-1){if(ie!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${ie} and dim ${ae}`);ie=ae}else if(re[ae]<0)throw Error(`Shapes can not be < 0. Found ${re[ae]} at dim ${ae}`);if(ie===-1){if(ee>0&&ee!==ne)throw Error(`Size(${ee}) must match the product of shape ${re}`);return re}if(ne===0)throw Error(`Cannot infer the missing size in [${re}] when there are 0 elements`);if(ee%ne!==0)throw Error(`The implicit shape can't be a fractional number. Got ${ee} / ${ne}`);const oe=re.slice();return oe[ie]=ee/ne,oe}function parseAxisParam(re,ee){const ne=ee.length;return re=re==null?ee.map((ie,oe)=>oe):[].concat(re),assert$2(re.every(ie=>ie>=-ne&&ie<ne),()=>`All values in axis param must be in range [-${ne}, ${ne}) but got axis ${re}`),assert$2(re.every(ie=>isInt(ie)),()=>`All values in axis param must be integers but got axis ${re}`),re.map(ie=>ie<0?ne+ie:ie)}function squeezeShape(re,ee){const ne=[],ie=[],oe=ee!=null&&Array.isArray(ee)&&ee.length===0,ae=ee==null||oe?null:parseAxisParam(ee,re).sort();let ce=0;for(let le=0;le<re.length;++le){if(ae!=null){if(ae[ce]===le&&re[le]!==1)throw new Error(`Can't squeeze axis ${le} since its dim '${re[le]}' is not 1`);(ae[ce]==null||ae[ce]>le)&&re[le]===1&&(ne.push(re[le]),ie.push(le)),ae[ce]<=le&&ce++}re[le]!==1&&(ne.push(re[le]),ie.push(le))}return{newShape:ne,keptDims:ie}}function getTypedArrayFromDType(re,ee){let ne=null;if(re==null||re==="float32")ne=new Float32Array(ee);else if(re==="int32")ne=new Int32Array(ee);else if(re==="bool")ne=new Uint8Array(ee);else throw new Error(`Unknown data type ${re}`);return ne}function getArrayFromDType(re,ee){let ne=null;if(re==null||re==="float32")ne=new Float32Array(ee);else if(re==="int32")ne=new Int32Array(ee);else if(re==="bool")ne=new Uint8Array(ee);else if(re==="string")ne=new Array(ee);else throw new Error(`Unknown data type ${re}`);return ne}function checkConversionForErrors(re,ee){for(let ne=0;ne<re.length;ne++){const ie=re[ne];if(isNaN(ie)||!isFinite(ie))throw Error(`A tensor of type ${ee} being uploaded contains ${ie}.`)}}function isValidDtype(re){return re==="bool"||re==="complex64"||re==="float32"||re==="int32"||re==="string"}function hasEncodingLoss(re,ee){return!(ee==="complex64"||ee==="float32"&&re!=="complex64"||ee==="int32"&&re!=="float32"&&re!=="complex64"||ee==="bool"&&re==="bool")}function isTypedArray$3(re){return re instanceof Float32Array||re instanceof Int32Array||re instanceof Uint8Array}function bytesPerElement(re){if(re==="float32"||re==="int32")return 4;if(re==="complex64")return 8;if(re==="bool")return 1;throw new Error(`Unknown dtype ${re}`)}function bytesFromStringArray(re){if(re==null)return 0;let ee=0;return re.forEach(ne=>ee+=ne.length),ee}function isString$2(re){return typeof re=="string"||re instanceof String}function isBoolean$2(re){return typeof re=="boolean"}function isNumber$3(re){return typeof re=="number"}function inferDtype(re){return Array.isArray(re)?inferDtype(re[0]):re instanceof Float32Array?"float32":re instanceof Int32Array||re instanceof Uint8Array?"int32":isNumber$3(re)?"float32":isString$2(re)?"string":isBoolean$2(re)?"bool":"float32"}function isFunction$3(re){return!!(re&&re.constructor&&re.call&&re.apply)}function nearestDivisor(re,ee){for(let ne=ee;ne<re;++ne)if(re%ne===0)return ne;return re}function computeStrides(re){const ee=re.length;if(ee<2)return[];const ne=new Array(ee-1);ne[ee-2]=re[ee-1];for(let ie=ee-3;ie>=0;--ie)ne[ie]=ne[ie+1]*re[ie+1];return ne}function createNestedArray(re,ee,ne){const ie=new Array;if(ee.length===1){const oe=ee[0];for(let ae=0;ae<oe;ae++)ie[ae]=ne[re+ae]}else{const oe=ee[0],ae=ee.slice(1),ce=ae.reduce((le,ue)=>le*ue);for(let le=0;le<oe;le++)ie[le]=createNestedArray(re+le*ce,ae,ne)}return ie}function toNestedArray(re,ee){if(re.length===0)return ee[0];const ne=re.reduce((ie,oe)=>ie*oe);if(ne===0)return[];if(ne!==ee.length)throw new Error(`[${re}] does not match the input size ${ee.length}.`);return createNestedArray(0,re,ee)}function makeOnesTypedArray(re,ee){const ne=makeZerosTypedArray(re,ee);for(let ie=0;ie<ne.length;ie++)ne[ie]=1;return ne}function makeZerosTypedArray(re,ee){if(ee==null||ee==="float32"||ee==="complex64")return new Float32Array(re);if(ee==="int32")return new Int32Array(re);if(ee==="bool")return new Uint8Array(re);throw new Error(`Unknown data type ${ee}`)}function makeZerosNestedTypedArray(re,ee){const ne=re.reduce((ie,oe)=>ie*oe,1);if(ee==null||ee==="float32")return toNestedArray(re,new Float32Array(ne));if(ee==="int32")return toNestedArray(re,new Int32Array(ne));if(ee==="bool")return toNestedArray(re,new Uint8Array(ne));throw new Error(`Unknown data type ${ee}`)}function assertNonNegativeIntegerDimensions(re){re.forEach(ee=>{assert$2(Number.isInteger(ee)&&ee>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${re}].`)})}function locToIndex(re,ee,ne){if(ee===0)return 0;if(ee===1)return re[0];let ie=re[re.length-1];for(let oe=0;oe<re.length-1;++oe)ie+=ne[oe]*re[oe];return ie}function indexToLoc(re,ee,ne){if(ee===0)return[];if(ee===1)return[re];const ie=new Array(ee);for(let oe=0;oe<ie.length-1;++oe)ie[oe]=Math.floor(re/ne[oe]),re-=ie[oe]*ne[oe];return ie[ie.length-1]=re,ie}function isPromise(re){return re&&re.then&&typeof re.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TENSORFLOWJS_FLAGS_PREFIX="tfjsflags";class Environment{constructor(ee){this.global=ee,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}setPlatform(ee,ne){this.platform!=null&&console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${ne}.`),this.platformName=ee,this.platform=ne}registerFlag(ee,ne,ie){if(this.flagRegistry[ee]={evaluationFn:ne,setHook:ie},this.urlFlags[ee]!=null){const oe=this.urlFlags[ee];console.warn(`Setting feature override from URL ${ee}: ${oe}.`),this.set(ee,oe)}}async getAsync(ee){return ee in this.flags?this.flags[ee]:(this.flags[ee]=await this.evaluateFlag(ee),this.flags[ee])}get(ee){if(ee in this.flags)return this.flags[ee];const ne=this.evaluateFlag(ee);if(isPromise(ne))throw new Error(`Flag ${ee} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[ee]=ne,this.flags[ee]}getNumber(ee){return this.get(ee)}getBool(ee){return this.get(ee)}getFlags(){return this.flags}get features(){return this.flags}set(ee,ne){if(this.flagRegistry[ee]==null)throw new Error(`Cannot set flag ${ee} as it has not been registered.`);this.flags[ee]=ne,this.flagRegistry[ee].setHook!=null&&this.flagRegistry[ee].setHook(ne)}evaluateFlag(ee){if(this.flagRegistry[ee]==null)throw new Error(`Cannot evaluate flag '${ee}': no evaluation function found.`);return this.flagRegistry[ee].evaluationFn()}setFlags(ee){this.flags=Object.assign({},ee)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const ee=getQueryParams(this.global.location.search);TENSORFLOWJS_FLAGS_PREFIX in ee&&ee[TENSORFLOWJS_FLAGS_PREFIX].split(",").forEach(ie=>{const[oe,ae]=ie.split(":");this.urlFlags[oe]=parseValue(oe,ae)})}}function getQueryParams(re){const ee={};return re.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(ne,...ie)=>(decodeParam(ee,ie[0],ie[1]),ie.join("="))),ee}function decodeParam(re,ee,ne){re[decodeURIComponent(ee)]=decodeURIComponent(ne||"")}function parseValue(re,ee){if(ee=ee.toLowerCase(),ee==="true"||ee==="false")return ee==="true";if(`${+ee}`===ee)return+ee;throw new Error(`Could not parse value flag value ${ee} for flag ${re}.`)}function env(){return ENV$2}let ENV$2=null;function setEnvironmentGlobal(re){ENV$2=re}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let globalNameSpace;function getGlobalNamespace(){if(globalNameSpace==null){let re;if(typeof window<"u")re=window;else if(typeof globalThis<"u")re=globalThis;else if(typeof browser$1$1<"u")re=browser$1$1;else if(typeof self<"u")re=self;else throw new Error("Could not find a globalThis object");globalNameSpace=re}return globalNameSpace}function getGlobalMap(){const re=getGlobalNamespace();return re._tfGlobals==null&&(re._tfGlobals=new Map),re._tfGlobals}function getGlobal(re,ee){const ne=getGlobalMap();if(ne.has(re))return ne.get(re);{const ie=ee();return ne.set(re,ie),ne.get(re)}}const Abs$1="Abs",Acos="Acos",Acosh="Acosh",Add$2="Add",AddN="AddN",All="All",Any="Any",ArgMax="ArgMax",ArgMin="ArgMin",Asin="Asin",Asinh="Asinh",Atan="Atan",Atanh="Atanh",Atan2="Atan2",AvgPool="AvgPool",AvgPoolGrad="AvgPoolGrad",AvgPool3D="AvgPool3D",AvgPool3DGrad="AvgPool3DGrad",BatchMatMul="BatchMatMul",BatchToSpaceND="BatchToSpaceND",Bincount="Bincount",BroadcastTo="BroadcastTo",Cast="Cast",Ceil="Ceil",ClipByValue="ClipByValue",Complex="Complex",ComplexAbs="ComplexAbs",Concat="Concat",Conv2D$1="Conv2D",Conv2DBackpropFilter="Conv2DBackpropFilter",Conv2DBackpropInput="Conv2DBackpropInput",Conv3D$1="Conv3D",Conv3DBackpropFilterV2="Conv3DBackpropFilterV2",Conv3DBackpropInputV2="Conv3DBackpropInputV2",Cos="Cos",Cosh="Cosh",Cumsum="Cumsum",CropAndResize="CropAndResize",DenseBincount="DenseBincount",DepthToSpace="DepthToSpace",DepthwiseConv2dNative="DepthwiseConv2dNative",DepthwiseConv2dNativeBackpropFilter="DepthwiseConv2dNativeBackpropFilter",DepthwiseConv2dNativeBackpropInput="DepthwiseConv2dNativeBackpropInput",Diag="Diag",Dilation2D="Dilation2D",Dilation2DBackpropInput="Dilation2DBackpropInput",Dilation2DBackpropFilter="Dilation2DBackpropFilter",RealDiv="RealDiv",Elu$1="Elu",EluGrad="EluGrad",Erf="Erf",Equal="Equal",Exp="Exp",ExpandDims="ExpandDims",Expm1="Expm1",FFT$2="FFT",Fill="Fill",FlipLeftRight="FlipLeftRight",Floor="Floor",FloorDiv="FloorDiv",FusedBatchNorm="FusedBatchNorm",GatherV2="GatherV2",GatherNd="GatherNd",Greater="Greater",GreaterEqual="GreaterEqual",Identity$1="Identity",IFFT="IFFT",Imag="Imag",IsFinite="IsFinite",IsInf="IsInf",IsNan="IsNan",LeakyRelu="LeakyRelu",Less="Less",LessEqual="LessEqual",LinSpace="LinSpace",Log="Log",Log1p="Log1p",LogicalAnd="LogicalAnd",LogicalNot="LogicalNot",LogicalOr="LogicalOr",LogSoftmax$1="LogSoftmax",LRN="LRN",LRNGrad="LRNGrad",Max="Max",Maximum$1="Maximum",MaxPool="MaxPool",MaxPoolGrad="MaxPoolGrad",MaxPool3D="MaxPool3D",MaxPool3DGrad="MaxPool3DGrad",MaxPoolWithArgmax="MaxPoolWithArgmax",Mean="Mean",Min="Min",Minimum$1="Minimum",MirrorPad="MirrorPad",Mod="Mod",Multinomial="Multinomial",Multiply$2="Multiply",Neg="Neg",NotEqual="NotEqual",NonMaxSuppressionV3="NonMaxSuppressionV3",NonMaxSuppressionV4="NonMaxSuppressionV4",NonMaxSuppressionV5="NonMaxSuppressionV5",OnesLike="OnesLike",OneHot="OneHot",Pack="Pack",PadV2="PadV2",Pow$1="Pow",Prelu="Prelu",Prod="Prod",Range="Range",Real="Real",Reciprocal="Reciprocal",Relu$1="Relu",Reshape$1="Reshape",ResizeNearestNeighbor="ResizeNearestNeighbor",ResizeNearestNeighborGrad="ResizeNearestNeighborGrad",ResizeBilinear="ResizeBilinear",ResizeBilinearGrad="ResizeBilinearGrad",Relu6$1="Relu6",Reverse="Reverse",Round="Round",Rsqrt="Rsqrt",ScatterNd="ScatterNd",Select$2="Select",Selu$1="Selu",Slice="Slice",Sin="Sin",Sinh="Sinh",Sign="Sign",Sigmoid$1="Sigmoid",Softplus$1="Softplus",Sqrt="Sqrt",Sum="Sum",SpaceToBatchND="SpaceToBatchND",SplitV="SplitV",Softmax$2="Softmax",SquaredDifference="SquaredDifference",Square="Square",Sub="Sub",SparseToDense="SparseToDense",StridedSlice="StridedSlice",Tan="Tan",Tanh$1="Tanh",Tile="Tile",TopK="TopK",Transpose="Transpose",Unique="Unique",Unpack="Unpack",UnsortedSegmentSum="UnsortedSegmentSum",ZerosLike="ZerosLike",Step="Step",FromPixels="FromPixels",RotateWithOffset="RotateWithOffset",_FusedMatMul="_FusedMatMul",FusedConv2D="FusedConv2D",FusedDepthwiseConv2D="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernelRegistry=getGlobal("kernelRegistry",()=>new Map),gradRegistry=getGlobal("gradRegistry",()=>new Map);function getKernel(re,ee){const ne=makeKey(re,ee);return kernelRegistry.get(ne)}function getGradient(re){return gradRegistry.get(re)}function getKernelsForBackend(re){const ee=kernelRegistry.entries(),ne=[];for(;;){const{done:ie,value:oe}=ee.next();if(ie)break;const[ae,ce]=oe,[le]=ae.split("_");le===re&&ne.push(ce)}return ne}function registerKernel(re){const{kernelName:ee,backendName:ne}=re,ie=makeKey(ee,ne);kernelRegistry.has(ie)&&console.warn(`The kernel '${ee}' for backend '${ne}' is already registered`),kernelRegistry.set(ie,re)}function registerGradient(re){const{kernelName:ee}=re;gradRegistry.has(ee)&&env().getBool("DEBUG")&&console.warn(`Overriding the gradient for '${ee}'`),gradRegistry.set(ee,re)}function makeKey(re,ee){return`${ee}_${re}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createScalarValue(re,ee){return ee==="string"?encodeString(re):toTypedArray([re],ee)}function noConversionNeeded(re,ee){return re instanceof Float32Array&&ee==="float32"||re instanceof Int32Array&&ee==="int32"||re instanceof Uint8Array&&ee==="bool"}function toTypedArray(re,ee){if(ee==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(re)&&(re=flatten$2(re)),env().getBool("DEBUG")&&checkConversionForErrors(re,ee),noConversionNeeded(re,ee))return re;if(ee==null||ee==="float32"||ee==="complex64")return new Float32Array(re);if(ee==="int32")return new Int32Array(re);if(ee==="bool"){const ne=new Uint8Array(re.length);for(let ie=0;ie<ne.length;++ie)Math.round(re[ie])!==0&&(ne[ie]=1);return ne}else throw new Error(`Unknown data type ${ee}`)}function now$1(){return env().platform.now()}function encodeString(re,ee="utf-8"){return ee=ee||"utf-8",env().platform.encode(re,ee)}function decodeString(re,ee="utf-8"){return ee=ee||"utf-8",env().platform.decode(re,ee)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Profiler{constructor(ee,ne){this.backendTimer=ee,this.logger=ne,ne==null&&(this.logger=new Logger)}profileKernel(ee,ne,ie){let oe;const ae=()=>{oe=ie()},ce=this.backendTimer.time(ae);if(env().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let ue=0;ue<oe.length;ue++){const he=oe[ue];he.data().then(fe=>{checkComputationForErrors(fe,he.dtype,ee)})}return{kernelName:ee,outputs:oe,inputs:ne,timeMs:ce.then(ue=>ue.kernelMs),extraInfo:ce.then(ue=>ue.getExtraProfileInfo!=null?ue.getExtraProfileInfo():"")}}logKernelProfile(ee){const{kernelName:ne,outputs:ie,timeMs:oe,inputs:ae,extraInfo:ce}=ee;ie.forEach(le=>{Promise.all([le.data(),oe,ce]).then(ue=>{this.logger.logKernelProfile(ne,le,ue[0],ue[1],ae,ue[2])})})}}function checkComputationForErrors(re,ee,ne){if(ee!=="float32")return!1;for(let ie=0;ie<re.length;ie++){const oe=re[ie];if(isNaN(oe)||!isFinite(oe))return console.warn(`Found ${oe} in the result of '${ne}'`),!0}return!1}class Logger{logKernelProfile(ee,ne,ie,oe,ae,ce){const le=typeof oe=="number"?rightPad(`${oe}ms`,9):oe.error,ue=rightPad(ee,25),he=ne.rank,fe=ne.size,me=rightPad(ne.shape.toString(),14);let ge="";for(const ve in ae){const ye=ae[ve];if(ye!=null){const be=ye.shape||ne.shape,Ce=be.length;ge+=`${ve}: ${Ce}D ${Ce>0?be:""} `}}console.log(`%c${ue}	%c${le}	%c${he}D ${me}	%c${fe}	%c${ge}	%c${ce}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getFilteredNodesXToY(re,ee,ne){const ie={},oe={};for(let ue=0;ue<ee.length;ue++)ie[ee[ue].id]=!0;for(let ue=0;ue<re.length;ue++){const he=re[ue],fe=he.inputs;for(const me in fe){const ge=fe[me];let ve=!1;for(let ye=0;ye<ee.length;ye++)if(ie[ge.id]){he.outputs.forEach(be=>ie[be.id]=!0),ve=!0,oe[he.id]=!0;break}if(ve)break}}const ae={};ae[ne.id]=!0;const ce={};for(let ue=re.length-1;ue>=0;ue--){const he=re[ue],fe=he.inputs;for(let me=0;me<he.outputs.length;me++)if(ae[he.outputs[me].id]){for(const ge in fe)ae[fe[ge].id]=!0,ce[he.id]=!0;break}}const le=[];for(let ue=0;ue<re.length;ue++){const he=re[ue];if(oe[he.id]&&ce[he.id]){const fe={};for(const ge in he.inputs){const ve=he.inputs[ge];ie[ve.id]&&(fe[ge]=ve)}const me=Object.assign({},he);me.inputs=fe,me.outputs=he.outputs,le.push(me)}}return le}function backpropagateGradients(re,ee,ne,ie){for(let oe=ee.length-1;oe>=0;oe--){const ae=ee[oe],ce=[];if(ae.outputs.forEach(ue=>{const he=re[ue.id];he!=null?ce.push(he):ce.push(null)}),ae.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${ae.kernelName}.`);const le=ae.gradient(ce);for(const ue in ae.inputs){if(!(ue in le))throw new Error(`Cannot backprop through input ${ue}. Available gradients found: ${Object.keys(le)}.`);const he=ne(()=>le[ue]());if(he.dtype!=="float32")throw new Error(`Error in gradient for op ${ae.kernelName}. The gradient of input ${ue} must have 'float32' dtype, but has '${he.dtype}'`);const fe=ae.inputs[ue];if(!arraysEqual(he.shape,fe.shape))throw new Error(`Error in gradient for op ${ae.kernelName}. The gradient of input '${ue}' has shape '${he.shape}', which does not match the shape of the input '${fe.shape}'`);if(re[fe.id]==null)re[fe.id]=he;else{const me=re[fe.id];re[fe.id]=ie(me,he),me.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FORMAT_LIMIT_NUM_VALS=20,FORMAT_NUM_FIRST_LAST_VALS=3,FORMAT_NUM_SIG_DIGITS=7;function tensorToString(re,ee,ne,ie){const oe=computeStrides(ee),ae=computeMaxSizePerColumn(re,ee,ne,oe),ce=ee.length,le=subTensorToString(re,ee,ne,oe,ae),ue=["Tensor"];return ie&&(ue.push(`  dtype: ${ne}`),ue.push(`  rank: ${ce}`),ue.push(`  shape: [${ee}]`),ue.push("  values:")),ue.push(le.map(he=>"    "+he).join(`
`)),ue.join(`
`)}function computeMaxSizePerColumn(re,ee,ne,ie){const oe=sizeFromShape(ee),ae=ie[ie.length-1],ce=new Array(ae).fill(0),le=ee.length,ue=ne==="complex64"?createComplexTuples(re):re;if(le>1)for(let he=0;he<oe/ae;he++){const fe=he*ae;for(let me=0;me<ae;me++)ce[me]=Math.max(ce[me],valToString(ue[fe+me],0,ne).length)}return ce}function valToString(re,ee,ne){let ie;return Array.isArray(re)?ie=`${parseFloat(re[0].toFixed(FORMAT_NUM_SIG_DIGITS))} + ${parseFloat(re[1].toFixed(FORMAT_NUM_SIG_DIGITS))}j`:isString$2(re)?ie=`'${re}'`:ne==="bool"?ie=boolNumToString(re):ie=parseFloat(re.toFixed(FORMAT_NUM_SIG_DIGITS)).toString(),rightPad(ie,ee)}function boolNumToString(re){return re===0?"false":"true"}function subTensorToString(re,ee,ne,ie,oe,ae=!0){const ce=ne==="complex64"?2:1,le=ee[0],ue=ee.length;if(ue===0){if(ne==="complex64"){const be=createComplexTuples(re);return[valToString(be[0],0,ne)]}return ne==="bool"?[boolNumToString(re[0])]:[re[0].toString()]}if(ue===1){if(le>FORMAT_LIMIT_NUM_VALS){const Ce=FORMAT_NUM_FIRST_LAST_VALS*ce;let Se=Array.from(re.slice(0,Ce)),$e=Array.from(re.slice((le-FORMAT_NUM_FIRST_LAST_VALS)*ce,le*ce));return ne==="complex64"&&(Se=createComplexTuples(Se),$e=createComplexTuples($e)),["["+Se.map((Te,Ne)=>valToString(Te,oe[Ne],ne)).join(", ")+", ..., "+$e.map((Te,Ne)=>valToString(Te,oe[le-FORMAT_NUM_FIRST_LAST_VALS+Ne],ne)).join(", ")+"]"]}return["["+(ne==="complex64"?createComplexTuples(re):Array.from(re)).map((Ce,Se)=>valToString(Ce,oe[Se],ne)).join(", ")+"]"]}const he=ee.slice(1),fe=ie.slice(1),me=ie[0]*ce,ge=[];if(le>FORMAT_LIMIT_NUM_VALS){for(let be=0;be<FORMAT_NUM_FIRST_LAST_VALS;be++){const Ce=be*me,Se=Ce+me;ge.push(...subTensorToString(re.slice(Ce,Se),he,ne,fe,oe,!1))}ge.push("...");for(let be=le-FORMAT_NUM_FIRST_LAST_VALS;be<le;be++){const Ce=be*me,Se=Ce+me;ge.push(...subTensorToString(re.slice(Ce,Se),he,ne,fe,oe,be===le-1))}}else for(let be=0;be<le;be++){const Ce=be*me,Se=Ce+me;ge.push(...subTensorToString(re.slice(Ce,Se),he,ne,fe,oe,be===le-1))}const ve=ue===2?",":"";ge[0]="["+ge[0]+ve;for(let be=1;be<ge.length-1;be++)ge[be]=" "+ge[be]+ve;let ye=`,
`;for(let be=2;be<ue;be++)ye+=`
`;return ge[ge.length-1]=" "+ge[ge.length-1]+"]"+(ae?"":ye),ge}function createComplexTuples(re){const ee=[];for(let ne=0;ne<re.length;ne+=2)ee.push([re[ne],re[ne+1]]);return ee}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TensorBuffer{constructor(ee,ne,ie){if(this.dtype=ne,this.shape=ee.slice(),this.size=sizeFromShape(ee),ie!=null){const oe=ie.length;assert$2(oe===this.size,()=>`Length of values '${oe}' does not match the size inferred by the shape '${this.size}'.`)}if(ne==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=ie||getArrayFromDType(ne,this.size),this.strides=computeStrides(ee)}set(ee,...ne){ne.length===0&&(ne=[0]),assert$2(ne.length===this.rank,()=>`The number of provided coordinates (${ne.length}) must match the rank (${this.rank})`);const ie=this.locToIndex(ne);this.values[ie]=ee}get(...ee){ee.length===0&&(ee=[0]);let ne=0;for(const oe of ee){if(oe<0||oe>=this.shape[ne]){const ae=`Requested out of range element at ${ee}.   Buffer shape=${this.shape}`;throw new Error(ae)}ne++}let ie=ee[ee.length-1];for(let oe=0;oe<ee.length-1;++oe)ie+=this.strides[oe]*ee[oe];return this.values[ie]}locToIndex(ee){if(this.rank===0)return 0;if(this.rank===1)return ee[0];let ne=ee[ee.length-1];for(let ie=0;ie<ee.length-1;++ie)ne+=this.strides[ie]*ee[ie];return ne}indexToLoc(ee){if(this.rank===0)return[];if(this.rank===1)return[ee];const ne=new Array(this.shape.length);for(let ie=0;ie<ne.length-1;++ie)ne[ie]=Math.floor(ee/this.strides[ie]),ee-=ne[ie]*this.strides[ie];return ne[ne.length-1]=ee,ne}get rank(){return this.shape.length}toTensor(){return trackerFn().makeTensor(this.values,this.shape,this.dtype)}}let trackerFn=null,opHandler$1=null;function setTensorTracker(re){trackerFn=re}function setOpHandler(re){opHandler$1=re}class Tensor{constructor(ee,ne,ie,oe){this.kept=!1,this.isDisposedInternal=!1,this.shape=ee.slice(),this.dtype=ne||"float32",this.size=sizeFromShape(ee),this.strides=computeStrides(ee),this.dataId=ie,this.id=oe,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const ee=await this.data();return opHandler$1.buffer(this.shape,this.dtype,ee)}bufferSync(){return opHandler$1.buffer(this.shape,this.dtype,this.dataSync())}async array(){const ee=await this.data();return toNestedArray(this.shape,ee)}arraySync(){return toNestedArray(this.shape,this.dataSync())}async data(){this.throwIfDisposed();const ee=trackerFn().read(this.dataId);if(this.dtype==="string"){const ne=await ee;try{return ne.map(ie=>decodeString(ie))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return ee}dataSync(){this.throwIfDisposed();const ee=trackerFn().readSync(this.dataId);if(this.dtype==="string")try{return ee.map(ne=>decodeString(ne))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return ee}async bytes(){this.throwIfDisposed();const ee=await trackerFn().read(this.dataId);return this.dtype==="string"?ee:new Uint8Array(ee.buffer)}dispose(){this.isDisposed||(trackerFn().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(ee=!1){return opHandler$1.print(this,ee)}clone(){return this.throwIfDisposed(),opHandler$1.clone(this)}toString(ee=!1){const ne=this.dataSync();return tensorToString(ne,this.shape,this.dtype,ee)}cast(ee){return this.throwIfDisposed(),opHandler$1.cast(this,ee)}variable(ee=!0,ne,ie){return this.throwIfDisposed(),trackerFn().makeVariable(this,ee,ne,ie)}}Object.defineProperty(Tensor,Symbol.hasInstance,{value:re=>!!re&&re.data!=null&&re.dataSync!=null&&re.throwIfDisposed!=null});class Variable extends Tensor{constructor(ee,ne,ie,oe){super(ee.shape,ee.dtype,ee.dataId,oe),this.trainable=ne,this.name=ie}assign(ee){if(ee.dtype!==this.dtype)throw new Error(`dtype of the new value (${ee.dtype}) and previous value (${this.dtype}) must match`);if(!arraysEqual(ee.shape,this.shape))throw new Error(`shape of the new value (${ee.shape}) and previous value (${this.shape}) must match`);trackerFn().disposeTensor(this),this.dataId=ee.dataId,trackerFn().incRef(this,null)}dispose(){trackerFn().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(Variable,Symbol.hasInstance,{value:re=>re instanceof Tensor&&re.assign!=null&&re.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Rank;(function(re){re.R0="R0",re.R1="R1",re.R2="R2",re.R3="R3",re.R4="R4",re.R5="R5",re.R6="R6"})(Rank||(Rank={}));var UpcastInt32AndMap;(function(re){re.float32="float32",re.int32="int32",re.bool="int32",re.complex64="complex64"})(UpcastInt32AndMap||(UpcastInt32AndMap={}));var UpcastBoolAndMap;(function(re){re.float32="float32",re.int32="int32",re.bool="bool",re.complex64="complex64"})(UpcastBoolAndMap||(UpcastBoolAndMap={}));var UpcastFloat32AndMap;(function(re){re.float32="float32",re.int32="float32",re.bool="float32",re.complex64="complex64"})(UpcastFloat32AndMap||(UpcastFloat32AndMap={}));var UpcastComplex64AndMap;(function(re){re.float32="complex64",re.int32="complex64",re.bool="complex64",re.complex64="complex64"})(UpcastComplex64AndMap||(UpcastComplex64AndMap={}));const upcastTypeMap={float32:UpcastFloat32AndMap,int32:UpcastInt32AndMap,bool:UpcastBoolAndMap,complex64:UpcastComplex64AndMap};function upcastType(re,ee){if(re==="string"||ee==="string"){if(re==="string"&&ee==="string")return"string";throw new Error(`Can not upcast ${re} with ${ee}`)}return upcastTypeMap[re][ee]}function sumOutType(re){return upcastType(re,"int32")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function makeTypesMatch(re,ee){if(re.dtype===ee.dtype)return[re,ee];const ne=upcastType(re.dtype,ee.dtype);return[re.cast(ne),ee.cast(ne)]}function getTensorsInContainer(re){const ee=[];return walkTensorContainer(re,ee,new Set),ee}function walkTensorContainer(re,ee,ne){if(re==null)return;if(re instanceof Tensor){ee.push(re);return}if(!isIterable(re))return;const ie=re;for(const oe in ie){const ae=ie[oe];ne.has(ae)||(ne.add(ae),walkTensorContainer(ae,ee,ne))}}function isIterable(re){return Array.isArray(re)||typeof re=="object"}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EngineState{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(ee=>ee.name)))}}}dispose(){for(const ee in this.registeredVariables)this.registeredVariables[ee].dispose()}}class Engine{constructor(ee){this.ENV=ee,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new EngineState}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const ee=this.getSortedBackends();for(let ne=0;ne<ee.length;ne++){const ie=ee[ne];if(await this.initializeBackend(ie).success){await this.setBackend(ie);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:ee,asyncInit:ne}=this.initializeBackendsAndReturnBest();if(ne)throw new Error(`The highest priority backend '${ee}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(ee)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(ee){if(!(ee in this.registry))if(ee in this.registryFactory){const{asyncInit:ne}=this.initializeBackend(ee);if(ne)return null}else return null;return this.registry[ee]}findBackendFactory(ee){return ee in this.registryFactory?this.registryFactory[ee].factory:null}registerBackend(ee,ne,ie=1){return ee in this.registryFactory?(console.warn(`${ee} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[ee]={factory:ne,priority:ie},!0)}async setBackend(ee){if(this.registryFactory[ee]==null)throw new Error(`Backend name '${ee}' not found in registry`);if(this.backendName=ee,this.registry[ee]==null){this.backendInstance=null;const{success:ne,asyncInit:ie}=this.initializeBackend(ee);if(!(ie?await ne:ne))return!1}return this.backendInstance=this.registry[ee],this.setupRegisteredKernels(),this.profiler=new Profiler(this.backendInstance),!0}setupRegisteredKernels(){getKernelsForBackend(this.backendName).forEach(ne=>{ne.setupFunc!=null&&ne.setupFunc(this.backendInstance)})}disposeRegisteredKernels(ee){getKernelsForBackend(ee).forEach(ie=>{ie.disposeFunc!=null&&ie.disposeFunc(this.registry[ee])})}initializeBackend(ee){const ne=this.registryFactory[ee];if(ne==null)throw new Error(`Cannot initialize backend ${ee}, no registration found.`);try{const ie=ne.factory();if(ie&&!(ie instanceof KernelBackend)&&typeof ie.then=="function"){const oe=++this.pendingBackendInitId,ae=ie.then(ce=>oe<this.pendingBackendInitId?!1:(this.registry[ee]=ce,this.pendingBackendInit=null,!0)).catch(ce=>(oe<this.pendingBackendInitId||(this.pendingBackendInit=null,console.warn(`Initialization of backend ${ee} failed`),console.warn(ce.stack||ce.message)),!1));return this.pendingBackendInit=ae,{success:ae,asyncInit:!0}}else return this.registry[ee]=ie,{success:!0,asyncInit:!1}}catch(ie){return console.warn(`Initialization of backend ${ee} failed`),console.warn(ie.stack||ie.message),{success:!1,asyncInit:!1}}}removeBackend(ee){if(!(ee in this.registryFactory))throw new Error(`${ee} backend not found in registry`);this.backendName===ee&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,ee in this.registry&&(this.disposeRegisteredKernels(ee),this.registry[ee].dispose(),delete this.registry[ee]),delete this.registryFactory[ee],this.backendName===ee&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((ee,ne)=>this.registryFactory[ne].priority-this.registryFactory[ee].priority)}initializeBackendsAndReturnBest(){const ee=this.getSortedBackends();for(let ne=0;ne<ee.length;ne++){const ie=ee[ne],{success:oe,asyncInit:ae}=this.initializeBackend(ie);if(ae||oe)return{name:ie,asyncInit:ae}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(ee,ne){const ie=this.state.tensorInfo.get(ne),oe=ie.backend,ae=this.readSync(ne);oe.disposeData(ne),ie.backend=ee,ee.move(ne,ae,ie.shape,ie.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(ee,ne){let ie=null;if(ne==null){if(typeof ee!="function")throw new Error("Please provide a function to tidy()");ne=ee}else{if(typeof ee!="string"&&!(ee instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof ne!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");ie=ee}let oe;return this.scopedRun(()=>this.startScope(ie),()=>this.endScope(oe),()=>(oe=ne(),oe instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),oe))}scopedRun(ee,ne,ie){ee();try{const oe=ie();return ne(),oe}catch(oe){throw ne(),oe}}nextTensorId(){return Engine.nextTensorId++}nextVariableId(){return Engine.nextVariableId++}clone(ee){const ne=this.makeTensorFromDataId(ee.dataId,ee.shape,ee.dtype),ie={x:ee},oe=ce=>({x:()=>{const le="float32",ue={x:ce},he={dtype:le};return ENGINE.runKernelFunc(fe=>fe.cast(ce,le),ue,null,Cast,he)}}),ae=[];return this.addTapeNode(this.state.activeScope.name,ie,[ne],oe,ae,{}),ne}runKernel(ee,ne,ie,oe,ae){return this.runKernelFunc(null,ne,null,ee,ie,oe,ae)}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(ee,ne,ie){const oe=this.backend.numDataIds();let ae=0;ie.forEach(ue=>{ae+=ue.dtype==="complex64"?3:1});const ce=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],le=oe-ne-ae-ce;if(le>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${le} data ids) after running '${ee}'`)}runKernelFunc(ee,ne,ie,oe,ae,ce,le){let ue,he=[];const fe=this.isTapeOn();oe==null&&(oe=this.state.activeScope!=null?this.state.activeScope.name:"");const me=this.state.numBytes,ge=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let ve;this.backendName==null&&this.backend;const ye=getKernel(oe,this.backendName);let be;if(ye!=null)ve=()=>{const Se=this.backend.numDataIds();be=ye.kernelFunc({inputs:ne,attrs:ae,backend:this.backend});const $e=Array.isArray(be)?be:[be];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(oe,Se,$e);const Te=$e.map(Ne=>{if(Ne.rank!=null)return Ne;const{dataId:Ie,shape:ke,dtype:De}=Ne;return this.makeTensorFromDataId(Ie,ke,De)});if(fe){let Ne=this.getTensorsForGradient(oe,ne,Te);if(Ne==null){le==null&&(le=[]);const Ie=Te.filter((ke,De)=>le[De]);Ne=(ce||[]).slice().concat(Ie)}he=this.saveTensorsForBackwardMode(Ne)}return Te};else{if(ee==null)throw new Error(`Error running ${oe}: Neither modular kernel nor forward func passed`);const Se=$e=>{fe&&(he=$e.map(Te=>this.keep(this.clone(Te))))};ve=()=>{const $e=this.backend.numDataIds();be=this.tidy(()=>ee(this.backend,Se));const Te=Array.isArray(be)?be:[be];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(oe,$e,Te),Te}}let Ce;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?ue=ve():(Ce=this.profiler.profileKernel(oe,ne,()=>ve()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(Ce),ue=Ce.outputs)}),fe&&this.addTapeNode(oe,ne,ue,ie,he,ae),this.state.profiling&&this.state.activeProfile.kernels.push({name:oe,bytesAdded:this.state.numBytes-me,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-ge,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(ne).map(Se=>ne[Se]!=null?ne[Se].shape:null),outputShapes:ue.map(Se=>Se.shape),kernelTimeMs:Ce.timeMs,extraInfo:Ce.extraInfo}),Array.isArray(be)?ue:ue[0]}saveTensorsForBackwardMode(ee){return ee.map(ie=>this.keep(this.clone(ie)))}getTensorsForGradient(ee,ne,ie){const oe=getGradient(ee);if(oe!=null){const ae=oe.inputsToSave||[],ce=oe.outputsToSave||[];let le;oe.saveAllInputs?(assert$2(Array.isArray(ne),()=>"saveAllInputs is true, expected inputs to be an array."),le=Object.keys(ne).map(he=>ne[he])):le=ae.map(he=>ne[he]);const ue=ie.filter((he,fe)=>ce[fe]);return le.concat(ue)}return null}makeTensor(ee,ne,ie,oe){if(ee==null)throw new Error("Values passed to engine.makeTensor() are null");ie=ie||"float32",oe=oe||this.backend;let ae=ee;ie==="string"&&isString$2(ee[0])&&(ae=ee.map(ue=>encodeString(ue)));const ce=oe.write(ae,ne,ie),le=new Tensor(ne,ie,ce,this.nextTensorId());if(this.incRef(le,oe),ie==="string"){const ue=this.state.tensorInfo.get(ce),he=bytesFromStringArray(ae);this.state.numBytes+=he-ue.bytes,ue.bytes=he}return le}makeTensorFromDataId(ee,ne,ie,oe){ie=ie||"float32";const ae=new Tensor(ne,ie,ee,this.nextTensorId());return this.incRef(ae,oe),ae}makeVariable(ee,ne=!0,ie,oe){ie=ie||this.nextVariableId().toString(),oe!=null&&oe!==ee.dtype&&(ee=ee.cast(oe));const ae=new Variable(ee,ne,ie,this.nextTensorId());if(this.state.registeredVariables[ae.name]!=null)throw new Error(`Variable with name ${ae.name} was already registered`);return this.state.registeredVariables[ae.name]=ae,this.incRef(ae,this.backend),ae}incRef(ee,ne){const ie=this.state.tensorInfo.has(ee.dataId)?this.state.tensorInfo.get(ee.dataId).refCount:0;if(this.state.numTensors++,ee.dtype==="string"&&this.state.numStringTensors++,ie===0){this.state.numDataBuffers++;let oe=0;ee.dtype!=="complex64"&&ee.dtype!=="string"&&(oe=ee.size*bytesPerElement(ee.dtype)),this.state.tensorInfo.set(ee.dataId,{backend:ne||this.backend,dtype:ee.dtype,shape:ee.shape,bytes:oe,refCount:0}),this.state.numBytes+=oe}this.state.tensorInfo.get(ee.dataId).refCount++,ee instanceof Variable||this.track(ee)}disposeTensor(ee){if(!this.state.tensorInfo.has(ee.dataId))return;this.state.numTensors--,ee.dtype==="string"&&this.state.numStringTensors--;const ne=this.state.tensorInfo.get(ee.dataId);ne.refCount<=1?(ee.dtype!=="complex64"&&(this.state.numBytes-=ne.bytes),this.state.numDataBuffers--,ne.backend.disposeData(ee.dataId),this.state.tensorInfo.delete(ee.dataId)):(ne.backend.decComplexRef(ee.dataId),this.state.tensorInfo.get(ee.dataId).refCount--)}disposeVariables(){for(const ee in this.state.registeredVariables){const ne=this.state.registeredVariables[ee];this.disposeVariable(ne)}}disposeVariable(ee){this.disposeTensor(ee),this.state.registeredVariables[ee.name]!=null&&delete this.state.registeredVariables[ee.name]}memory(){const ee=this.backend.memory();return ee.numTensors=this.state.numTensors,ee.numDataBuffers=this.state.numDataBuffers,ee.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(ee.unreliable=!0,ee.reasons==null&&(ee.reasons=[]),ee.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),ee}async profile(ee){this.state.profiling=!0;const ne=this.state.numBytes,ie=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await ee(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(oe=>oe.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-ne,this.state.activeProfile.newTensors=this.state.numTensors-ie;for(const oe of this.state.activeProfile.kernels)oe.kernelTimeMs=await oe.kernelTimeMs,oe.extraInfo=await oe.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(ee,ne,ie,oe,ae,ce){const le={id:this.state.nextTapeNodeId++,kernelName:ee,inputs:ne,outputs:ie,saved:ae},ue=getGradient(ee);ue!=null&&(oe=ue.gradFunc),oe!=null&&(le.gradient=he=>(he=he.map((fe,me)=>{if(fe==null){const ge=ie[me],ve=makeZerosTypedArray(ge.size,ge.dtype);return this.makeTensor(ve,ge.shape,ge.dtype)}return fe}),oe(he.length>1?he:he[0],ae,ce))),this.state.activeTape.push(le)}keep(ee){return ee.kept=!0,ee}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(ee){const ne={track:[],name:"unnamed scope",id:this.state.nextScopeId++};ee&&(ne.name=ee),this.state.scopeStack.push(ne),this.state.activeScope=ne}endScope(ee){const ne=getTensorsInContainer(ee),ie=new Set(ne.map(ae=>ae.id));for(let ae=0;ae<this.state.activeScope.track.length;ae++){const ce=this.state.activeScope.track[ae];!ce.kept&&!ie.has(ce.id)&&ce.dispose()}const oe=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],ne.forEach(ae=>{!ae.kept&&ae.scopeId===oe.id&&this.track(ae)})}gradients(ee,ne,ie,oe=!1){if(assert$2(ne.length>0,()=>"gradients() received an empty list of xs."),ie!=null&&ie.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${ie.dtype}'`);const ae=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",ee));assert$2(ae instanceof Tensor,()=>"The result y returned by f() must be a tensor.");const ce=getFilteredNodesXToY(this.state.activeTape,ne,ae);if(!oe&&ce.length===0&&ne.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const le={};le[ae.id]=ie??ones$1(ae.shape),backpropagateGradients(le,ce,he=>this.tidy(he),add$2);const ue=ne.map(he=>le[he.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(he=>{for(const fe of he.saved)fe.dispose()}),this.state.activeTape=null),{value:ae,grads:ue}})}customGrad(ee){return assert$2(isFunction$3(ee),()=>"The f passed in customGrad(f) must be a function."),(...ne)=>{assert$2(ne.every(ae=>ae instanceof Tensor),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let ie;const oe={};return ne.forEach((ae,ce)=>{oe[ce]=ae}),this.runKernelFunc((ae,ce)=>(ie=ee(...ne,ce),assert$2(ie.value instanceof Tensor,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),assert$2(isFunction$3(ie.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),ie.value),oe,(ae,ce)=>{const le=ie.gradFunc(ae,ce),ue=Array.isArray(le)?le:[le];assert$2(ue.length===ne.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),assert$2(ue.every(fe=>fe instanceof Tensor),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const he={};return ue.forEach((fe,me)=>{he[me]=()=>fe}),he})}}readSync(ee){return this.state.tensorInfo.get(ee).backend.readSync(ee)}read(ee){return this.state.tensorInfo.get(ee).backend.read(ee)}async time(ee){const ne=now$1(),ie=await this.backend.time(ee);return ie.wallMs=now$1()-ne,ie}track(ee){return this.state.activeScope!=null&&(ee.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(ee)),ee}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new EngineState;for(const ee in this.registry)this.disposeRegisteredKernels(ee),this.registry[ee].dispose(),delete this.registry[ee];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}Engine.nextTensorId=0;Engine.nextVariableId=0;function ones$1(re){const ee=makeOnesTypedArray(sizeFromShape(re),"float32");return ENGINE.makeTensor(ee,re,"float32")}function getOrMakeEngine(){const re=getGlobalNamespace();if(re._tfengine==null){const ee=new Environment(re);re._tfengine=new Engine(ee)}return setEnvironmentGlobal(re._tfengine.ENV),setTensorTracker(()=>re._tfengine),re._tfengine}const ENGINE=getOrMakeEngine();function add$2(re,ee){const ne={a:re,b:ee};return ENGINE.runKernel(Add$2,ne)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _isNavigatorDefined(){return typeof navigator<"u"&&navigator!=null}function isMobile(){if(_isNavigatorDefined()){const re=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(re)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(re.substr(0,4))}return!1}function isBrowser$2(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const ENV$1=env();ENV$1.registerFlag("DEBUG",()=>!1,re=>{re&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});ENV$1.registerFlag("IS_BROWSER",()=>isBrowser$2());ENV$1.registerFlag("IS_NODE",()=>typeof browser$1$1<"u"&&typeof browser$1$1.versions<"u"&&typeof browser$1$1.versions.node<"u");ENV$1.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));ENV$1.registerFlag("PROD",()=>!1);ENV$1.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>ENV$1.getBool("DEBUG"));ENV$1.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);ENV$1.registerFlag("IS_TEST",()=>!1);ENV$1.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>!0);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function inferShape(re,ee){let ne=re;if(isTypedArray$3(re))return ee==="string"?[]:[re.length];if(!Array.isArray(re))return[];const ie=[];for(;Array.isArray(ne)||isTypedArray$3(ne)&&ee!=="string";)ie.push(ne.length),ne=ne[0];return Array.isArray(re)&&env().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&deepAssertShapeConsistency(re,ie,[]),ie}function deepAssertShapeConsistency(re,ee,ne){if(ne=ne||[],!Array.isArray(re)&&!isTypedArray$3(re)){assert$2(ee.length===0,()=>`Element arr[${ne.join("][")}] is a primitive, but should be an array/TypedArray of ${ee[0]} elements`);return}assert$2(ee.length>0,()=>`Element arr[${ne.join("][")}] should be a primitive, but is an array of ${re.length} elements`),assert$2(re.length===ee[0],()=>`Element arr[${ne.join("][")}] should have ${ee[0]} elements, but has ${re.length} elements`);const ie=ee.slice(1);for(let oe=0;oe<re.length;++oe)deepAssertShapeConsistency(re[oe],ie,ne.concat(oe))}function assertDtype(re,ee,ne,ie){if(re!=="string_or_numeric"){if(re==null)throw new Error("Expected dtype cannot be null.");if(re!=="numeric"&&re!==ee||re==="numeric"&&ee==="string")throw new Error(`Argument '${ne}' passed to '${ie}' must be ${re} tensor, but got ${ee} tensor`)}}function convertToTensor(re,ee,ne,ie="numeric"){if(re instanceof Tensor)return assertDtype(ie,re.dtype,ee,ne),re;let oe=inferDtype(re);if(oe!=="string"&&["bool","int32","float32"].indexOf(ie)>=0&&(oe=ie),assertDtype(ie,oe,ee,ne),re==null||!isTypedArray$3(re)&&!Array.isArray(re)&&typeof re!="number"&&typeof re!="boolean"&&typeof re!="string"){const ue=re==null?"null":re.constructor.name;throw new Error(`Argument '${ee}' passed to '${ne}' must be a Tensor or TensorLike, but got '${ue}'`)}const ae=inferShape(re,oe);!isTypedArray$3(re)&&!Array.isArray(re)&&(re=[re]);const le=oe!=="string"?toTypedArray(re,oe):flatten$2(re,[],!0);return ENGINE.makeTensor(le,ae,oe)}function convertToTensorArray(re,ee,ne,ie="numeric"){if(!Array.isArray(re))throw new Error(`Argument ${ee} passed to ${ne} must be a \`Tensor[]\` or \`TensorLike[]\``);return re.map((ae,ce)=>convertToTensor(ae,`${ee}[${ce}]`,ne,ie))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OP_SCOPE_SUFFIX="__op";function op(re){const ee=Object.keys(re);if(ee.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${ee.length} keys.`);let ne=ee[0];const ie=re[ne];ne.endsWith("_")&&(ne=ne.substring(0,ne.length-1)),ne=ne+OP_SCOPE_SUFFIX;const oe=(...ae)=>{ENGINE.startScope(ne);try{const ce=ie(...ae);return isPromise(ce)&&console.error("Cannot return a Promise inside of tidy."),ENGINE.endScope(ce),ce}catch(ce){throw ENGINE.endScope(null),ce}};return Object.defineProperty(oe,"name",{value:ne,configurable:!0}),oe}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function complex_(re,ee){const ne=convertToTensor(re,"real","complex"),ie=convertToTensor(ee,"imag","complex");assertShapesMatch(ne.shape,ie.shape,`real and imag shapes, ${ne.shape} and ${ie.shape}, must match in call to tf.complex().`);const oe={real:ne,imag:ie};return ENGINE.runKernel(Complex,oe)}const complex$2=op({complex_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function makeTensor(re,ee,ne,ie){if(ie==null&&(ie=inferDtype(re)),ie==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!isTypedArray$3(re)&&!Array.isArray(re)&&typeof re!="number"&&typeof re!="boolean"&&typeof re!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(ee!=null){assertNonNegativeIntegerDimensions(ee);const oe=sizeFromShape(ee),ae=sizeFromShape(ne);assert$2(oe===ae,()=>`Based on the provided shape, [${ee}], the tensor should have ${oe} values but has ${ae}`);for(let ce=0;ce<ne.length;++ce){const le=ne[ce],ue=ce===ne.length-1?le!==sizeFromShape(ee.slice(ce)):!0;assert$2(ne[ce]===ee[ce]||!ue,()=>`Error creating a new Tensor. Inferred shape (${ne}) does not match the provided shape (${ee}). `)}}return!isTypedArray$3(re)&&!Array.isArray(re)&&(re=[re]),ee=ee||ne,re=ie!=="string"?toTypedArray(re,ie):flatten$2(re,[],!0),ENGINE.makeTensor(re,ee,ie)}const NUM_BYTES_STRING_LENGTH=4;async function encodeWeights(re,ee){const ne=[],ie=[],oe=Array.isArray(re)?re.map(ce=>ce.name):Object.keys(re);for(let ce=0;ce<oe.length;++ce){const le=oe[ce],ue=Array.isArray(re)?re[ce].tensor:re[le];if(ue.dtype!=="float32"&&ue.dtype!=="int32"&&ue.dtype!=="bool"&&ue.dtype!=="string"&&ue.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${le}': ${ue.dtype}`);const he={name:le,shape:ue.shape,dtype:ue.dtype};if(ue.dtype==="string"){const fe=new Promise(async me=>{const ge=await ue.bytes(),ve=ge.reduce((Ce,Se)=>Ce+Se.length,0)+NUM_BYTES_STRING_LENGTH*ge.length,ye=new Uint8Array(ve);let be=0;for(let Ce=0;Ce<ge.length;Ce++){const Se=ge[Ce],$e=new Uint8Array(new Uint32Array([Se.length]).buffer);ye.set($e,be),be+=NUM_BYTES_STRING_LENGTH,ye.set(Se,be),be+=Se.length}me(ye)});ie.push(fe)}else ie.push(ue.data());ee!=null&&(he.group=ee),ne.push(he)}const ae=await Promise.all(ie);return{data:concatenateTypedArrays(ae),specs:ne}}function concatenateTypedArrays(re){if(re===null)throw new Error(`Invalid input value: ${JSON.stringify(re)}`);let ee=0;const ne=[];re.forEach(ae=>{if(ee+=ae.byteLength,ne.push(ae.byteLength===ae.buffer.byteLength?ae:new ae.constructor(ae)),!(ae instanceof Float32Array||ae instanceof Int32Array||ae instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${ae.constructor.name}`)});const ie=new Uint8Array(ee);let oe=0;return ne.forEach(ae=>{ie.set(new Uint8Array(ae.buffer),oe),oe+=ae.byteLength}),ie.buffer}const useNodeBuffer=typeof Buffer$2<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function stringByteLength(re){return useNodeBuffer?Buffer$2.byteLength(re):new Blob([re]).size}function arrayBufferToBase64String(re){if(useNodeBuffer)return Buffer$2.from(re).toString("base64");const ee=new Uint8Array(re);let ne="";for(let ie=0,oe=ee.length;ie<oe;ie++)ne+=String.fromCharCode(ee[ie]);return btoa(ne)}function base64StringToArrayBuffer(re){if(useNodeBuffer){const ie=Buffer$2.from(re,"base64");return ie.buffer.slice(ie.byteOffset,ie.byteOffset+ie.byteLength)}const ee=atob(re),ne=new Uint8Array(ee.length);for(let ie=0;ie<ee.length;++ie)ne.set([ee.charCodeAt(ie)],ie);return ne.buffer}function concatenateArrayBuffers(re){if(re.length===1)return re[0];let ee=0;re.forEach(oe=>{ee+=oe.byteLength});const ne=new Uint8Array(ee);let ie=0;return re.forEach(oe=>{ne.set(new Uint8Array(oe),ie),ie+=oe.byteLength}),ne.buffer}function getModelArtifactsInfoForJSON(re){if(re.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:re.modelTopology==null?0:stringByteLength(JSON.stringify(re.modelTopology)),weightSpecsBytes:re.weightSpecs==null?0:stringByteLength(JSON.stringify(re.weightSpecs)),weightDataBytes:re.weightData==null?0:re.weightData.byteLength}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IORouterRegistry{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return IORouterRegistry.instance==null&&(IORouterRegistry.instance=new IORouterRegistry),IORouterRegistry.instance}static registerSaveRouter(ee){IORouterRegistry.getInstance().saveRouters.push(ee)}static registerLoadRouter(ee){IORouterRegistry.getInstance().loadRouters.push(ee)}static getSaveHandlers(ee){return IORouterRegistry.getHandlers(ee,"save")}static getLoadHandlers(ee,ne){return IORouterRegistry.getHandlers(ee,"load",ne)}static getHandlers(ee,ne,ie){const oe=[];return(ne==="load"?IORouterRegistry.getInstance().loadRouters:IORouterRegistry.getInstance().saveRouters).forEach(ce=>{const le=ce(ee,ie);le!==null&&oe.push(le)}),oe}}const getSaveHandlers=re=>IORouterRegistry.getSaveHandlers(re);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DATABASE_NAME="tensorflowjs",DATABASE_VERSION=1,MODEL_STORE_NAME="models_store",INFO_STORE_NAME="model_info_store";function getIndexedDBFactory(){if(!env().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const re=typeof window>"u"?self:window,ee=re.indexedDB||re.mozIndexedDB||re.webkitIndexedDB||re.msIndexedDB||re.shimIndexedDB;if(ee==null)throw new Error("The current browser does not appear to support IndexedDB.");return ee}function setUpDatabase(re){const ee=re.result;ee.createObjectStore(MODEL_STORE_NAME,{keyPath:"modelPath"}),ee.createObjectStore(INFO_STORE_NAME,{keyPath:"modelPath"})}class BrowserIndexedDB{constructor(ee){if(this.indexedDB=getIndexedDBFactory(),ee==null||!ee)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=ee}async save(ee){if(ee.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,ee)}async load(){return this.databaseAction(this.modelPath)}databaseAction(ee,ne){return new Promise((ie,oe)=>{const ae=this.indexedDB.open(DATABASE_NAME,DATABASE_VERSION);ae.onupgradeneeded=()=>setUpDatabase(ae),ae.onsuccess=()=>{const ce=ae.result;if(ne==null){const le=ce.transaction(MODEL_STORE_NAME,"readonly"),he=le.objectStore(MODEL_STORE_NAME).get(this.modelPath);he.onsuccess=()=>{if(he.result==null)return ce.close(),oe(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));ie(he.result.modelArtifacts)},he.onerror=fe=>(ce.close(),oe(he.error)),le.oncomplete=()=>ce.close()}else{const le=getModelArtifactsInfoForJSON(ne),ue=ce.transaction(INFO_STORE_NAME,"readwrite");let he=ue.objectStore(INFO_STORE_NAME);const fe=he.put({modelPath:this.modelPath,modelArtifactsInfo:le});let me;fe.onsuccess=()=>{me=ce.transaction(MODEL_STORE_NAME,"readwrite");const ve=me.objectStore(MODEL_STORE_NAME).put({modelPath:this.modelPath,modelArtifacts:ne,modelArtifactsInfo:le});ve.onsuccess=()=>ie({modelArtifactsInfo:le}),ve.onerror=ye=>{he=ue.objectStore(INFO_STORE_NAME);const be=he.delete(this.modelPath);be.onsuccess=()=>(ce.close(),oe(ve.error)),be.onerror=Ce=>(ce.close(),oe(ve.error))}},fe.onerror=ge=>(ce.close(),oe(fe.error)),ue.oncomplete=()=>{me==null?ce.close():me.oncomplete=()=>ce.close()}}},ae.onerror=ce=>oe(ae.error)})}}BrowserIndexedDB.URL_SCHEME="indexeddb://";const indexedDBRouter=re=>env().getBool("IS_BROWSER")&&!Array.isArray(re)&&re.startsWith(BrowserIndexedDB.URL_SCHEME)?browserIndexedDB(re.slice(BrowserIndexedDB.URL_SCHEME.length)):null;IORouterRegistry.registerSaveRouter(indexedDBRouter);IORouterRegistry.registerLoadRouter(indexedDBRouter);function browserIndexedDB(re){return new BrowserIndexedDB(re)}function maybeStripScheme$1(re){return re.startsWith(BrowserIndexedDB.URL_SCHEME)?re.slice(BrowserIndexedDB.URL_SCHEME.length):re}class BrowserIndexedDBManager{constructor(){this.indexedDB=getIndexedDBFactory()}async listModels(){return new Promise((ee,ne)=>{const ie=this.indexedDB.open(DATABASE_NAME,DATABASE_VERSION);ie.onupgradeneeded=()=>setUpDatabase(ie),ie.onsuccess=()=>{const oe=ie.result,ae=oe.transaction(INFO_STORE_NAME,"readonly"),le=ae.objectStore(INFO_STORE_NAME).getAll();le.onsuccess=()=>{const ue={};for(const he of le.result)ue[he.modelPath]=he.modelArtifactsInfo;ee(ue)},le.onerror=ue=>(oe.close(),ne(le.error)),ae.oncomplete=()=>oe.close()},ie.onerror=oe=>ne(ie.error)})}async removeModel(ee){return ee=maybeStripScheme$1(ee),new Promise((ne,ie)=>{const oe=this.indexedDB.open(DATABASE_NAME,DATABASE_VERSION);oe.onupgradeneeded=()=>setUpDatabase(oe),oe.onsuccess=()=>{const ae=oe.result,ce=ae.transaction(INFO_STORE_NAME,"readwrite"),le=ce.objectStore(INFO_STORE_NAME),ue=le.get(ee);let he;ue.onsuccess=()=>{if(ue.result==null)return ae.close(),ie(new Error(`Cannot find model with path '${ee}' in IndexedDB.`));{const fe=le.delete(ee),me=()=>{he=ae.transaction(MODEL_STORE_NAME,"readwrite");const ve=he.objectStore(MODEL_STORE_NAME).delete(ee);ve.onsuccess=()=>ne(ue.result.modelArtifactsInfo),ve.onerror=ye=>ie(ue.error)};fe.onsuccess=me,fe.onerror=ge=>(me(),ae.close(),ie(ue.error))}},ue.onerror=fe=>(ae.close(),ie(ue.error)),ce.oncomplete=()=>{he==null?ae.close():he.oncomplete=()=>ae.close()}},oe.onerror=ae=>ie(oe.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PATH_SEPARATOR="/",PATH_PREFIX="tensorflowjs_models",INFO_SUFFIX="info",MODEL_TOPOLOGY_SUFFIX="model_topology",WEIGHT_SPECS_SUFFIX="weight_specs",WEIGHT_DATA_SUFFIX="weight_data",MODEL_METADATA_SUFFIX="model_metadata";function getModelKeys(re){return{info:[PATH_PREFIX,re,INFO_SUFFIX].join(PATH_SEPARATOR),topology:[PATH_PREFIX,re,MODEL_TOPOLOGY_SUFFIX].join(PATH_SEPARATOR),weightSpecs:[PATH_PREFIX,re,WEIGHT_SPECS_SUFFIX].join(PATH_SEPARATOR),weightData:[PATH_PREFIX,re,WEIGHT_DATA_SUFFIX].join(PATH_SEPARATOR),modelMetadata:[PATH_PREFIX,re,MODEL_METADATA_SUFFIX].join(PATH_SEPARATOR)}}function getModelPathFromKey(re){const ee=re.split(PATH_SEPARATOR);if(ee.length<3)throw new Error(`Invalid key format: ${re}`);return ee.slice(1,ee.length-1).join(PATH_SEPARATOR)}function maybeStripScheme(re){return re.startsWith(BrowserLocalStorage.URL_SCHEME)?re.slice(BrowserLocalStorage.URL_SCHEME.length):re}class BrowserLocalStorage{constructor(ee){if(!env().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,ee==null||!ee)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=ee,this.keys=getModelKeys(this.modelPath)}async save(ee){if(ee.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const ne=JSON.stringify(ee.modelTopology),ie=JSON.stringify(ee.weightSpecs),oe=getModelArtifactsInfoForJSON(ee);try{this.LS.setItem(this.keys.info,JSON.stringify(oe)),this.LS.setItem(this.keys.topology,ne),this.LS.setItem(this.keys.weightSpecs,ie),this.LS.setItem(this.keys.weightData,arrayBufferToBase64String(ee.weightData));const ae={format:ee.format,generatedBy:ee.generatedBy,convertedBy:ee.convertedBy};return ee.signature!=null&&(ae.signature=ee.signature),ee.userDefinedMetadata!=null&&(ae.userDefinedMetadata=ee.userDefinedMetadata),ee.modelInitializer!=null&&(ae.modelInitializer=ee.modelInitializer),this.LS.setItem(this.keys.modelMetadata,JSON.stringify(ae)),{modelArtifactsInfo:oe}}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${oe.modelTopologyBytes}, weightSpecsBytes=${oe.weightSpecsBytes}, weightDataBytes=${oe.weightDataBytes}.`)}}}async load(){const ee=JSON.parse(this.LS.getItem(this.keys.info));if(ee==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(ee.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const ne={},ie=JSON.parse(this.LS.getItem(this.keys.topology));if(ie==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);ne.modelTopology=ie;const oe=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(oe==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);ne.weightSpecs=oe;const ae=this.LS.getItem(this.keys.modelMetadata);if(ae!=null){const le=JSON.parse(ae);ne.format=le.format,ne.generatedBy=le.generatedBy,ne.convertedBy=le.convertedBy,le.signature!=null&&(ne.signature=le.signature),le.userDefinedMetadata!=null&&(ne.userDefinedMetadata=le.userDefinedMetadata),le.modelInitializer!=null&&(ne.modelInitializer=le.modelInitializer)}const ce=this.LS.getItem(this.keys.weightData);if(ce==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return ne.weightData=base64StringToArrayBuffer(ce),ne}}BrowserLocalStorage.URL_SCHEME="localstorage://";const localStorageRouter=re=>env().getBool("IS_BROWSER")&&!Array.isArray(re)&&re.startsWith(BrowserLocalStorage.URL_SCHEME)?browserLocalStorage(re.slice(BrowserLocalStorage.URL_SCHEME.length)):null;IORouterRegistry.registerSaveRouter(localStorageRouter);IORouterRegistry.registerLoadRouter(localStorageRouter);function browserLocalStorage(re){return new BrowserLocalStorage(re)}class BrowserLocalStorageManager{constructor(){assert$2(env().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),assert$2(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const ee={},ne=PATH_PREFIX+PATH_SEPARATOR,ie=PATH_SEPARATOR+INFO_SUFFIX;for(let oe=0;oe<this.LS.length;++oe){const ae=this.LS.key(oe);if(ae.startsWith(ne)&&ae.endsWith(ie)){const ce=getModelPathFromKey(ae);ee[ce]=JSON.parse(this.LS.getItem(ae))}}return ee}async removeModel(ee){ee=maybeStripScheme(ee);const ne=getModelKeys(ee);if(this.LS.getItem(ne.info)==null)throw new Error(`Cannot find model at path '${ee}'`);const ie=JSON.parse(this.LS.getItem(ne.info));return this.LS.removeItem(ne.info),this.LS.removeItem(ne.topology),this.LS.removeItem(ne.weightSpecs),this.LS.removeItem(ne.weightData),ie}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const URL_SCHEME_SUFFIX="://";class ModelStoreManagerRegistry{constructor(){this.managers={}}static getInstance(){return ModelStoreManagerRegistry.instance==null&&(ModelStoreManagerRegistry.instance=new ModelStoreManagerRegistry),ModelStoreManagerRegistry.instance}static registerManager(ee,ne){assert$2(ee!=null,()=>"scheme must not be undefined or null."),ee.endsWith(URL_SCHEME_SUFFIX)&&(ee=ee.slice(0,ee.indexOf(URL_SCHEME_SUFFIX))),assert$2(ee.length>0,()=>"scheme must not be an empty string.");const ie=ModelStoreManagerRegistry.getInstance();assert$2(ie.managers[ee]==null,()=>`A model store manager is already registered for scheme '${ee}'.`),ie.managers[ee]=ne}static getManager(ee){const ne=this.getInstance().managers[ee];if(ne==null)throw new Error(`Cannot find model manager for scheme '${ee}'`);return ne}static getSchemes(){return Object.keys(this.getInstance().managers)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PlatformBrowser{fetch(ee,ne){return fetch(ee,ne)}now(){return performance.now()}encode(ee,ne){if(ne!=="utf-8"&&ne!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${ne}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(ee)}decode(ee,ne){return new TextDecoder(ne).decode(ee)}}if(env().get("IS_BROWSER")){env().setPlatform("browser",new PlatformBrowser);try{ModelStoreManagerRegistry.registerManager(BrowserLocalStorage.URL_SCHEME,new BrowserLocalStorageManager)}catch{}try{ModelStoreManagerRegistry.registerManager(BrowserIndexedDB.URL_SCHEME,new BrowserIndexedDBManager)}catch{}}const getNodeFetch={importFetch:()=>require$$0$1};let systemFetch;class PlatformNode{constructor(){this.util=require$$1$1,this.textEncoder=new this.util.TextEncoder}fetch(ee,ne){return env().global.fetch!=null?env().global.fetch(ee,ne):(systemFetch==null&&(systemFetch=getNodeFetch.importFetch()),systemFetch(ee,ne))}now(){const ee=browser$1$1.hrtime();return ee[0]*1e3+ee[1]/1e6}encode(ee,ne){if(ne!=="utf-8"&&ne!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${ne}`);return this.textEncoder.encode(ee)}decode(ee,ne){return ee.length===0?"":new this.util.TextDecoder(ne).decode(ee)}}env().get("IS_NODE")&&env().setPlatform("node",new PlatformNode);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function buffer$1(re,ee="float32",ne){return ee=ee||"float32",assertNonNegativeIntegerDimensions(re),new TensorBuffer(re,ee,ne)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cast_(re,ee){const ne=convertToTensor(re,"x","cast");if(!isValidDtype(ee))throw new Error(`Failed to cast to unknown dtype ${ee}`);if(ee==="string"&&ne.dtype!=="string"||ee!=="string"&&ne.dtype==="string")throw new Error("Only strings can be casted to strings");const ie={x:ne},oe={dtype:ee};return ENGINE.runKernel(Cast,ie,oe)}const cast$3=op({cast_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clone_(re){const ne={x:convertToTensor(re,"x","clone","string_or_numeric")};return ENGINE.runKernel(Identity$1,ne)}const clone$1=op({clone_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function print(re,ee=!1){console.log(re.toString(ee))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */getOrMakeEngine();const opHandler={buffer:buffer$1,cast:cast$3,clone:clone$1,print};setOpHandler(opHandler);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function matMul_(re,ee,ne=!1,ie=!1){let oe=convertToTensor(re,"a","matMul"),ae=convertToTensor(ee,"b","matMul");[oe,ae]=makeTypesMatch(oe,ae);const ce={a:oe,b:ae},le={transposeA:ne,transposeB:ie};return ENGINE.runKernel(BatchMatMul,ce,le)}const matMul$1=op({matMul_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oneHot_(re,ee,ne=1,ie=0){if(ee<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${ee}`);const ae={indices:convertToTensor(re,"indices","oneHot","int32")},ce={depth:ee,onValue:ne,offValue:ie};return ENGINE.runKernel(OneHot,ae,ce)}const oneHot$2=op({oneHot_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transpose_(re,ee){const ne=convertToTensor(re,"x","transpose");if(ee==null&&(ee=ne.shape.map((ae,ce)=>ce).reverse()),assert$2(ne.rank===ee.length,()=>`Error in transpose: rank of input ${ne.rank} must match length of perm ${ee}.`),ee.forEach(ae=>{assert$2(ae>=0&&ae<ne.rank,()=>`All entries in 'perm' must be between 0 and ${ne.rank-1} but got ${ee}`)}),ne.rank<=1)return ne.clone();const ie={x:ne},oe={perm:ee};return ENGINE.runKernel(Transpose,ie,oe)}const transpose$2=op({transpose_});function prepareAndValidate(re,ee){const ne=re.shape.length,ie=ee.shape.length;if(ne<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${ne}.`);if(ie<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${ie}.`);if(ee.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${ee.dtype}.`);if(ee.shape[ie-1]>ne)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${ee.shape[ie-1]} vs. ${ne}`);if(sizeFromShape(re.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${re.shape}.`);const oe=ee.shape,ae=oe[oe.length-1];let ce=1;for(let me=0;me<oe.length-1;++me)ce*=oe[me];const le=re.shape,ue=oe.slice();ue.pop();let he=1;for(let me=ae;me<ne;++me)he*=le[me],ue.push(le[me]);const fe=[...computeStrides(re.shape).map(me=>me/he),1].slice(0,ae);return[ue,ce,he,fe]}function validateUpdateShape(re,ee,ne){const ie=ee.rank>1?ee.shape[ee.rank-1]:1,oe=ee.rank>1?ee.rank-1:1,ae=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${ne.shape}, indices.shape: ${ee.shape}, shape: ${re}, sliceDim: ${ie}, and batchDim: ${oe}.`;if(ne.rank<oe)throw new Error(ae+` update.rank < ${oe}. `);if(re.length<ie+(ne.rank-oe))throw new Error(ae+` Output shape length < ${ie+(ne.rank-oe)}`);if(ne.rank!==oe+re.length-ie)throw new Error(ae+` update.rank != ${oe+re.length-ie}`);for(let ce=0;ce<oe;++ce)if(ne.shape[ce]!==ee.shape[ce])throw new Error(ae+` updates.shape[${ce}] (${ne.shape[ce]}) != indices.shape[${ce}] (${ee.shape[ce]}).`);for(let ce=0;ce<ne.rank-oe;++ce)if(ne.shape[ce+oe]!==re[ce+ie])throw new Error(ae+` updates.shape[${ce+oe}] (${ne.shape[ce+oe]}) != shape[${ce+oe}] (${re[ce+oe]})`)}function validateInput(re,ee,ne){if(ee.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${ee.rank}.`);if(re.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${re.rank}.`);if(ee.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${ee.dtype}`);if(ne.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${ne}`);if(ne.length===0){if(ee.size===0)throw new Error(`Indices specified for empty output. indices shape: ${ee.shape}`);if(re.size===0)throw new Error(`Updates specified for empty output. updates shape: ${re.shape}`)}validateUpdateShape(ne,ee,re)}function calculateShapes(re,ee,ne){const ie=ee.shape.length,oe=ie>1?ee.shape[ie-1]:1,ae=ne.length;let ce=1;for(let me=oe;me<ae;++me)ce*=ne[me];const le=oe<1?1:oe,ue=sizeFromShape(ee.shape)/le,he=[...computeStrides(ne.slice(0,oe)),1],fe=sizeFromShape(ne);return{sliceRank:oe,numUpdates:ue,sliceSize:ce,strides:he,outputSize:fe}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function assertParamsValid(re,ee,ne){const ie=re.shape.length;assert$2(ie===ee.length,()=>`Error in slice${ie}D: Length of begin ${ee} must match the rank of the array (${ie}).`),assert$2(ie===ne.length,()=>`Error in slice${ie}D: Length of size ${ne} must match the rank of the array (${ie}).`);for(let oe=0;oe<ie;++oe)assert$2(ee[oe]+ne[oe]<=re.shape[oe],()=>`Error in slice${ie}D: begin[${oe}] + size[${oe}] (${ee[oe]+ne[oe]}) would overflow input.shape[${oe}] (${re.shape[oe]})`)}function maskToAxes(re){const ee=[];let ne=0;for(;re>0;)re&1&&ee.push(ne),re/=2,ne++;return ee}function computeOutShape$2(re,ee,ne){const ie=[];for(let oe=0;oe<re.length;oe++)ie[oe]=Math.ceil((ee[oe]-re[oe])/ne[oe]);return ie}function stridesWithElidedDims(re,ee,ne,ie){const oe=[...re];for(let ae=oe.length;ae<ie.length;ae++)oe.push(1);for(let ae=0;ae<ne;ae++)ae===0?oe[ee]=1:(oe.splice(ee,0,1),oe.pop());return oe}function unnormalizeAxis(re,ee,ne){return ne<=re?ne:ne-(ee-1)}function getElidedAxes(re,ee){const ne=[];for(let ie=0;ie<re;ie++)ne.push(ee+ie);return ne}function getNormalizedAxes(re,ee,ne,ie,oe,ae,ce,le,ue){const he=re.length;let fe=new Array(he),me=new Array(he),ge=new Array(he);if(ee.length&&ne>0){const ve=ee[0],ye=ne+1;fe=startIndicesWithElidedDims(ce,ve,ye,ie,re),me=stopIndicesWithElidedDims(le,ve,ye,oe,re),ge=stridesWithElidedDims(ae,ve,ye,re)}else for(let ve=0;ve<he;ve++)fe[ve]=startForAxis(ce,ie,ae,re,ve,ue),me[ve]=stopForAxis(le,oe,ae,re,ve,ue),ge[ve]=stridesForAxis(ae,ve,ue);return{begin:fe,end:me,strides:ge}}function startIndicesWithElidedDims(re,ee,ne,ie,oe){const ae=[...oe],ce=getElidedAxes(ne,ee);for(let le=0;le<ae.length;le++)if(ce.indexOf(le)>-1)ae[le]=0;else{const ue=unnormalizeAxis(ee,ne,le);let he=ie[ue];re&1<<ue&&(he=0),ae[le]=he}return ae}function stopIndicesWithElidedDims(re,ee,ne,ie,oe){const ae=[...oe],ce=getElidedAxes(ne,ee);for(let le=0;le<ae.length;le++)if(ce.indexOf(le)>-1)ae[le]=Number.MAX_SAFE_INTEGER;else{const ue=unnormalizeAxis(ee,ne,le);let he=ie[ue];re&1<<ue&&(he=Number.MAX_SAFE_INTEGER),ae[le]=he}for(let le=0;le<ae.length;le++){const ue=oe[le];ae[le]<0&&(ae[le]+=ue),ae[le]=clamp$1(0,ae[le],oe[le])}return ae}function stridesForAxis(re,ee,ne){let ie=re[ee];return(ne&1<<ee||ie==null)&&(ie=1),ie}function startForAxis(re,ee,ne,ie,oe,ae){let ce=ee[oe];const le=ne[oe]||1;(re&1<<oe||ae&1<<oe||ce==null)&&(le>0?ce=Number.MIN_SAFE_INTEGER:ce=Number.MAX_SAFE_INTEGER);const ue=ie[oe];return ce<0&&(ce+=ue),ce=clamp$1(0,ce,ue-1),ce}function stopForAxis(re,ee,ne,ie,oe,ae){let ce=ee[oe];const le=ne[oe]||1;(re&1<<oe||ae&1<<oe||ce==null)&&(le>0?ce=Number.MAX_SAFE_INTEGER:ce=Number.MIN_SAFE_INTEGER);const ue=ie[oe];return ce<0&&(ce+=ue),le>0?ce=clamp$1(0,ce,ue):ce=clamp$1(-1,ce,ue-1),ce}function isSliceContinous(re,ee,ne){let ie=ne.length;for(let oe=0;oe<ne.length;oe++)if(ne[oe]>1){ie=oe;break}for(let oe=ie+1;oe<ne.length;oe++)if(ee[oe]>0||ne[oe]!==re[oe])return!1;return!0}function computeFlatOffset(re,ee){let ne=re.length>0?re[re.length-1]:1;for(let ie=0;ie<re.length-1;ie++)ne+=re[ie]*ee[ie];return ne}function parseSliceParams(re,ee,ne){let ie;const oe=re.shape.length;typeof ee=="number"?ie=[ee,...new Array(oe-1).fill(0)]:ee.length<oe?ie=ee.concat(new Array(oe-ee.length).fill(0)):ie=ee.slice(),ie.forEach(ce=>{assert$2(ce!==-1,()=>"slice() does not support negative begin indexing.")});let ae;return ne==null?ae=new Array(oe).fill(-1):typeof ne=="number"?ae=[ne,...new Array(oe-1).fill(-1)]:ne.length<oe?ae=ne.concat(new Array(oe-ne.length).fill(-1)):ae=ne,ae=ae.map((ce,le)=>ce>=0?ce:(assert$2(ce===-1,()=>`Negative size values should be exactly -1 but got ${ce} for the slice() size at index ${le}.`),re.shape[le]-ie[le])),[ie,ae]}function sliceInfo(re,ee,ne,ie,oe,ae,ce,le,ue){let he=ee.slice(),fe=ne.slice(),me=ie;ie==null&&(me=new Array(he.length));const ge=maskToAxes(ce);if(ge.length>1)throw new Error("Multiple ellipses in slice is not allowed.");if(ce!==0&&le!==0)throw new Error("Using both ellipsisMask and newAxisMask is not yet supported.");if(ce!==0&&ue!==0)throw new Error("Using both ellipsisMask and shrinkAxisMask is not yet supported.");const ve=re.length-he.length,ye=maskToAxes(le),be=re.slice();ye.forEach(De=>{he[De]=0,fe[De]=1,be.splice(De,0,1)});const{begin:Ce,end:Se,strides:$e}=getNormalizedAxes(be,ge,ve,he,fe,me,oe,ae,ce);he=Ce,fe=Se,me=$e;const Te=maskToAxes(ue);Te.forEach(De=>{fe[De]=he[De]+1,me[De]=1});const Ne=computeOutShape$2(he,fe,me),Ie=Ne.filter((De,Oe)=>Te.indexOf(Oe)===-1);return{nonStrided:me.every(De=>De===1),$begin:he,$end:fe,$strides:me,size:Ne,newShape:be,outShape:Ie}}const slice_util=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid,computeFlatOffset,computeOutShape:computeOutShape$2,getNormalizedAxes,isSliceContinous,maskToAxes,parseSliceParams,sliceInfo,startForAxis,startIndicesWithElidedDims,stopForAxis,stopIndicesWithElidedDims,stridesForAxis,stridesWithElidedDims},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Serializable{getClassName(){return this.constructor.className}static fromConfig(ee,ne){return new ee(ne)}}class SerializationMap{constructor(){this.classNameMap={}}static getMap(){return SerializationMap.instance==null&&(SerializationMap.instance=new SerializationMap),SerializationMap.instance}static register(ee){SerializationMap.getMap().classNameMap[ee.className]=[ee,ee.fromConfig]}}function registerClass(re){assert$2(re.className!=null,()=>"Class being registered does not have the static className property defined."),assert$2(typeof re.className=="string",()=>"className is required to be a string, but got type "+typeof re.className),assert$2(re.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),SerializationMap.register(re)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function deprecationWarn(re){env().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(re+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function engine(){return ENGINE}function memory(){return ENGINE.memory()}function tidy(re,ee){return ENGINE.tidy(re,ee)}function dispose(re){getTensorsInContainer(re).forEach(ne=>ne.dispose())}function keep(re){return ENGINE.keep(re)}function registerBackend(re,ee,ne=1){return ENGINE.registerBackend(re,ee,ne)}function backend(){return ENGINE.backend}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function add_(re,ee){let ne=convertToTensor(re,"a","add"),ie=convertToTensor(ee,"b","add");[ne,ie]=makeTypesMatch(ne,ie);const oe={a:ne,b:ie};return ENGINE.runKernel(Add$2,oe)}const add$1=op({add_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function floorDiv_(re,ee){let ne=convertToTensor(re,"a","floorDiv"),ie=convertToTensor(ee,"b","floorDiv");[ne,ie]=makeTypesMatch(ne,ie);const oe={a:ne,b:ie};return ENGINE.runKernel(FloorDiv,oe)}const floorDiv$2=op({floorDiv_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function div_(re,ee){let ne=convertToTensor(re,"a","div"),ie=convertToTensor(ee,"b","div");if([ne,ie]=makeTypesMatch(ne,ie),ne.dtype==="int32"&&ie.dtype==="int32")return floorDiv$2(ne,ie);const oe={a:ne,b:ie},ae={};return ENGINE.runKernel(RealDiv,oe,ae)}const div$1=op({div_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mul_(re,ee){let ne=convertToTensor(re,"a","mul"),ie=convertToTensor(ee,"b","mul");[ne,ie]=makeTypesMatch(ne,ie);const oe={a:ne,b:ie};return ENGINE.runKernel(Multiply$2,oe)}const mul=op({mul_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function abs_(re){const ee=convertToTensor(re,"x","abs");if(ee.dtype==="complex64"){const ne={x:ee};return ENGINE.runKernel(ComplexAbs,ne)}else{const ne={x:ee};return ENGINE.runKernel(Abs$1,ne)}}const abs$3=op({abs_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function acos_(re){const ne={x:convertToTensor(re,"x","acos")};return ENGINE.runKernel(Acos,ne)}const acos$2=op({acos_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function acosh_(re){const ne={x:convertToTensor(re,"x","acosh")};return ENGINE.runKernel(Acosh,ne)}const acosh$2=op({acosh_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function all_(re,ee=null,ne=!1){const oe={x:convertToTensor(re,"x","all","bool")},ae={axis:ee,keepDims:ne};return ENGINE.runKernel(All,oe,ae)}const all$2=op({all_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function any_(re,ee=null,ne=!1){const oe={x:convertToTensor(re,"x","any","bool")},ae={axis:ee,keepDims:ne};return ENGINE.runKernel(Any,oe,ae)}const any$2=op({any_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMax_(re,ee=0){const ie={x:convertToTensor(re,"x","argMax")},oe={axis:ee};return ENGINE.runKernel(ArgMax,ie,oe)}const argMax$2=op({argMax_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMin_(re,ee=0){const ie={x:convertToTensor(re,"x","argMin")},oe={axis:ee};return ENGINE.runKernel(ArgMin,ie,oe)}const argMin$2=op({argMin_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function asin_(re){const ne={x:convertToTensor(re,"x","asin")};return ENGINE.runKernel(Asin,ne)}const asin$2=op({asin_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function asinh_(re){const ne={x:convertToTensor(re,"x","asinh")};return ENGINE.runKernel(Asinh,ne)}const asinh$2=op({asinh_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function atan_(re){const ne={x:convertToTensor(re,"x","atan")};return ENGINE.runKernel(Atan,ne)}const atan$2=op({atan_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function atan2_(re,ee){let ne=convertToTensor(re,"a","atan2"),ie=convertToTensor(ee,"b","atan2");[ne,ie]=makeTypesMatch(ne,ie);const oe={a:ne,b:ie};return ENGINE.runKernel(Atan2,oe)}const atan2$2=op({atan2_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function atanh_(re){const ne={x:convertToTensor(re,"x","atanh")};return ENGINE.runKernel(Atanh,ne)}const atanh$2=op({atanh_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function computeDilation2DInfo(re,ee,ne,ie,oe="NHWC",ae){const ce=re[3],le=[...ee,ce],ue=convertConv2DDataFormat(oe);return computeConv2DInfo(re,le,ne,ae,ie,null,null,ue)}function computePool2DInfo(re,ee,ne,ie,oe,ae,ce="channelsLast"){const[le,ue]=parseTupleParam(ee);let he;if(ce==="channelsLast")he=[le,ue,re[3],re[3]];else if(ce==="channelsFirst")he=[le,ue,re[1],re[1]];else throw new Error(`Unknown dataFormat ${ce}`);return computeConv2DInfo(re,he,ne,ie,oe,ae,!1,ce)}function computePool3DInfo(re,ee,ne,ie,oe,ae,ce="NDHWC"){const[le,ue,he]=parse3TupleParam(ee);let fe,me;if(ce==="NDHWC")me="channelsLast",fe=[le,ue,he,re[4],re[4]];else if(ce==="NCDHW")me="channelsFirst",fe=[le,ue,he,re[1],re[1]];else throw new Error(`Unknown dataFormat ${ce}`);return computeConv3DInfo(re,fe,ne,ie,oe,!1,me,ae)}function computeConv2DInfo(re,ee,ne,ie,oe,ae,ce=!1,le="channelsLast"){let[ue,he,fe,me]=[-1,-1,-1,-1];if(le==="channelsLast")[ue,he,fe,me]=re;else if(le==="channelsFirst")[ue,me,he,fe]=re;else throw new Error(`Unknown dataFormat ${le}`);const[ge,ve,,ye]=ee,[be,Ce]=parseTupleParam(ne),[Se,$e]=parseTupleParam(ie),Te=getEffectiveFilterSize(ge,Se),Ne=getEffectiveFilterSize(ve,$e),{padInfo:Ie,outHeight:ke,outWidth:De}=getPadAndOutInfo(oe,he,fe,be,Ce,Te,Ne,ae,le),Oe=ce?ye*me:ye;let Be;return le==="channelsFirst"?Be=[ue,Oe,ke,De]:le==="channelsLast"&&(Be=[ue,ke,De,Oe]),{batchSize:ue,dataFormat:le,inHeight:he,inWidth:fe,inChannels:me,outHeight:ke,outWidth:De,outChannels:Oe,padInfo:Ie,strideHeight:be,strideWidth:Ce,filterHeight:ge,filterWidth:ve,effectiveFilterHeight:Te,effectiveFilterWidth:Ne,dilationHeight:Se,dilationWidth:$e,inShape:re,outShape:Be,filterShape:ee}}function computeConv3DInfo(re,ee,ne,ie,oe,ae=!1,ce="channelsLast",le){let[ue,he,fe,me,ge]=[-1,-1,-1,-1,-1];if(ce==="channelsLast")[ue,he,fe,me,ge]=re;else if(ce==="channelsFirst")[ue,ge,he,fe,me]=re;else throw new Error(`Unknown dataFormat ${ce}`);const[ve,ye,be,,Ce]=ee,[Se,$e,Te]=parse3TupleParam(ne),[Ne,Ie,ke]=parse3TupleParam(ie),De=getEffectiveFilterSize(ve,Ne),Oe=getEffectiveFilterSize(ye,Ie),Be=getEffectiveFilterSize(be,ke),{padInfo:Me,outDepth:Le,outHeight:je,outWidth:ze}=get3DPadAndOutInfo(oe,he,fe,me,Se,$e,Te,De,Oe,Be,le),Ve=ae?Ce*ge:Ce;let He;return ce==="channelsFirst"?He=[ue,Ve,Le,je,ze]:ce==="channelsLast"&&(He=[ue,Le,je,ze,Ve]),{batchSize:ue,dataFormat:ce,inDepth:he,inHeight:fe,inWidth:me,inChannels:ge,outDepth:Le,outHeight:je,outWidth:ze,outChannels:Ve,padInfo:Me,strideDepth:Se,strideHeight:$e,strideWidth:Te,filterDepth:ve,filterHeight:ye,filterWidth:be,effectiveFilterDepth:De,effectiveFilterHeight:Oe,effectiveFilterWidth:Be,dilationDepth:Ne,dilationHeight:Ie,dilationWidth:ke,inShape:re,outShape:He,filterShape:ee}}function computeOutputShape2D(re,ee,ne,ie,oe){ie==null&&(ie=computeDefaultPad(re,ee,ne));const ae=re[0],ce=re[1],le=round$4((ae-ee+2*ie)/ne+1,oe),ue=round$4((ce-ee+2*ie)/ne+1,oe);return[le,ue]}function computeOutputShape4D(re,ee,ne,ie,oe,ae){oe==null&&(oe=computeDefaultPad(re,ee,ie));const ce=re[0],le=re[1],ue=re[2],he=round$4((ce-ee+2*oe)/ie+1,ae),fe=round$4((le-ee+2*oe)/ie+1,ae),me=round$4((ue-ee+2*oe)/ie+1,ae);return[he,fe,me,ne]}function computeDefaultPad(re,ee,ne,ie=1){const oe=getEffectiveFilterSize(ee,ie);return Math.floor((re[0]*(ne-1)-ne+oe)/2)}function parseTupleParam(re){return typeof re=="number"?[re,re,re]:re.length===2?[re[0],re[1],1]:re}function parse3TupleParam(re){return typeof re=="number"?[re,re,re]:re}function getEffectiveFilterSize(re,ee){return ee<=1?re:re+(re-1)*(ee-1)}function getPadAndOutInfo(re,ee,ne,ie,oe,ae,ce,le,ue){let he,fe,me;if(typeof re=="number"){he={top:re,bottom:re,left:re,right:re,type:re===0?"VALID":"NUMBER"};const ve=computeOutputShape2D([ee,ne],ae,ie,re,le);fe=ve[0],me=ve[1]}else if(re==="same"){fe=Math.ceil(ee/ie),me=Math.ceil(ne/oe);const ge=Math.max(0,(fe-1)*ie+ae-ee),ve=Math.max(0,(me-1)*oe+ce-ne),ye=Math.floor(ge/2),be=ge-ye,Ce=Math.floor(ve/2),Se=ve-Ce;he={top:ye,bottom:be,left:Ce,right:Se,type:"SAME"}}else if(re==="valid")he={top:0,bottom:0,left:0,right:0,type:"VALID"},fe=Math.ceil((ee-ae+1)/ie),me=Math.ceil((ne-ce+1)/oe);else if(typeof re=="object"){const ge=ue==="channelsLast"?re[1][0]:re[2][0],ve=ue==="channelsLast"?re[1][1]:re[2][1],ye=ue==="channelsLast"?re[2][0]:re[3][0],be=ue==="channelsLast"?re[2][1]:re[3][1];he={top:ge,bottom:ve,left:ye,right:be,type:ge===0&&ve===0&&ye===0&&be===0?"VALID":"EXPLICIT"},fe=round$4((ee-ae+ge+ve)/ie+1,le),me=round$4((ne-ce+ye+be)/oe+1,le)}else throw Error(`Unknown padding parameter: ${re}`);return{padInfo:he,outHeight:fe,outWidth:me}}function get3DPadAndOutInfo(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe){let me,ge,ve,ye;if(typeof re=="number"){me={top:re,bottom:re,left:re,right:re,front:re,back:re,type:re===0?"VALID":"NUMBER"};const Ce=computeOutputShape4D([ee,ne,ie,1],le,1,oe,re,fe);ge=Ce[0],ve=Ce[1],ye=Ce[2]}else if(re==="same"){ge=Math.ceil(ee/oe),ve=Math.ceil(ne/ae),ye=Math.ceil(ie/ce);const be=(ge-1)*oe+le-ee,Ce=(ve-1)*ae+ue-ne,Se=(ye-1)*ce+he-ie,$e=Math.floor(be/2),Te=be-$e,Ne=Math.floor(Ce/2),Ie=Ce-Ne,ke=Math.floor(Se/2),De=Se-ke;me={top:Ne,bottom:Ie,left:ke,right:De,front:$e,back:Te,type:"SAME"}}else if(re==="valid")me={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},ge=Math.ceil((ee-le+1)/oe),ve=Math.ceil((ne-ue+1)/ae),ye=Math.ceil((ie-he+1)/ce);else throw Error(`Unknown padding parameter: ${re}`);return{padInfo:me,outDepth:ge,outHeight:ve,outWidth:ye}}function round$4(re,ee){if(!ee)return Math.trunc(re);switch(ee){case"round":return Math.round(re);case"ceil":return Math.ceil(re);case"floor":return Math.floor(re);default:throw new Error(`Unknown roundingMode ${ee}`)}}function tupleValuesAreOne(re){const[ee,ne,ie]=parseTupleParam(re);return ee===1&&ne===1&&ie===1}function eitherStridesOrDilationsAreOne(re,ee){return tupleValuesAreOne(re)||tupleValuesAreOne(ee)}function convertConv2DDataFormat(re){if(re==="NHWC")return"channelsLast";if(re==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${re}`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reshape_(re,ee){const ie={x:convertToTensor(re,"x","reshape","string_or_numeric")},oe={shape:ee};return ENGINE.runKernel(Reshape$1,ie,oe)}const reshape$2=op({reshape_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool_(re,ee,ne,ie,oe){const ae=convertToTensor(re,"x","avgPool","float32"),ce=1;assert$2(eitherStridesOrDilationsAreOne(ne,ce),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${ne} and dilations '${ce}'`);let le=ae,ue=!1;ae.rank===3&&(ue=!0,le=reshape$2(ae,[1,ae.shape[0],ae.shape[1],ae.shape[2]])),assert$2(le.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${le.rank}.`),oe!=null&&assert$2(isInt(ie),()=>`Error in avgPool: pad must be an integer when using, dimRoundingMode ${oe} but got pad ${ie}.`);const he={x:le},fe={filterSize:ee,strides:ne,pad:ie,dimRoundingMode:oe};let me=ENGINE.runKernel(AvgPool,he,fe);return me=cast$3(me,ae.dtype),ue?reshape$2(me,[me.shape[1],me.shape[2],me.shape[3]]):me}const avgPool$2=op({avgPool_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3d_(re,ee,ne,ie,oe,ae="NDHWC",ce){ce==null?ce=[1,1,1]:deprecationWarn("dilations is deprecated, this field will be gone in v3.0.0.");const le=convertToTensor(re,"x","avgPool3d","float32");let ue=le,he=!1;le.rank===4&&(he=!0,ue=reshape$2(le,[1,le.shape[0],le.shape[1],le.shape[2],le.shape[3]])),assert$2(ue.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${ue.rank}.`),assert$2(ae==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${ae}`),assert$2(eitherStridesOrDilationsAreOne(ne,ce),()=>`Error in avgPool3d: Either strides or dilations must be 1. Got strides ${ne} and dilations '${ce}'`),oe!=null&&assert$2(isInt(ie),()=>`Error in avgPool3d: pad must be an integer when using, dimRoundingMode ${oe} but got pad ${ie}.`);const fe={x:ue},me={filterSize:ee,strides:ne,pad:ie,dimRoundingMode:oe,dataFormat:ae,dilations:ce};let ge=ENGINE.runKernel(AvgPool3D,fe,me);return ge=cast$3(ge,ue.dtype),he?reshape$2(ge,[ge.shape[1],ge.shape[2],ge.shape[3],ge.shape[4]]):ge}const avgPool3d=op({avgPool3d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concat_(re,ee=0){assert$2(re.length>=1,()=>"Pass at least one tensor to concat");const ne=convertToTensorArray(re,"tensors","concat","string_or_numeric");if(ne[0].dtype==="complex64"&&ne.forEach(ae=>{if(ae.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${ae.dtype}. `)}),ne.length===1)return clone$1(ne[0]);const ie=ne,oe={axis:ee};return ENGINE.runKernel(Concat,ie,oe)}const concat$2=op({concat_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sigmoid_(re){const ne={x:convertToTensor(re,"x","sigmoid")};return ENGINE.runKernel(Sigmoid$1,ne)}const sigmoid$2=op({sigmoid_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice_(re,ee,ne){const ie=convertToTensor(re,"x","slice","string_or_numeric");if(ie.rank===0)throw new Error("Slicing scalar is not possible");const oe={x:ie},ae={begin:ee,size:ne};return ENGINE.runKernel(Slice,oe,ae)}const slice$4=op({slice_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tanh_(re){const ne={x:convertToTensor(re,"x","tanh")};return ENGINE.runKernel(Tanh$1,ne)}const tanh$2=op({tanh_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchToSpaceND_(re,ee,ne){const ie=convertToTensor(re,"x","batchToSpaceND"),oe=ee.reduce((le,ue)=>le*ue);assert$2(ie.rank>=1+ee.length,()=>`input rank is ${ie.rank} but should be > than blockShape.length ${ee.length}`),assert$2(ne.length===ee.length,()=>`crops.length is ${ne.length} but should be equal to blockShape.length  ${ee.length}`),assert$2(ie.shape[0]%oe===0,()=>`input tensor batch is ${ie.shape[0]} but is not divisible by the product of the elements of blockShape ${ee.join(" * ")} === ${oe}`);const ae={x:ie},ce={blockShape:ee,crops:ne};return ENGINE.runKernel(BatchToSpaceND,ae,ce)}const batchToSpaceND$2=op({batchToSpaceND_});function xAs4D(re){let ee;return re.rank===0||re.rank===1?ee=reshape$2(re,[1,1,1,re.size]):re.rank===2?ee=reshape$2(re,[1,1,re.shape[0],re.shape[1]]):re.rank===3?ee=reshape$2(re,[1,re.shape[0],re.shape[1],re.shape[2]]):ee=re,ee}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchNorm_(re,ee,ne,ie,oe,ae){ae==null&&(ae=.001);const ce=convertToTensor(re,"x","batchNorm"),le=convertToTensor(ee,"mean","batchNorm"),ue=convertToTensor(ne,"variance","batchNorm");let he;oe!=null&&(he=convertToTensor(oe,"scale","batchNorm"));let fe;ie!=null&&(fe=convertToTensor(ie,"offset","batchNorm")),assert$2(le.rank===ue.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),assert$2(fe==null||le.rank===fe.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),assert$2(he==null||le.rank===he.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const ge={x:xAs4D(ce),scale:he,offset:fe,mean:le,variance:ue},ve={varianceEpsilon:ae},ye=ENGINE.runKernel(FusedBatchNorm,ge,ve);return reshape$2(ye,ce.shape)}const batchNorm$2=op({batchNorm_});function batchNorm2d_(re,ee,ne,ie,oe,ae){const ce=convertToTensor(re,"x","batchNorm"),le=convertToTensor(ee,"mean","batchNorm"),ue=convertToTensor(ne,"variance","batchNorm");let he;oe!=null&&(he=convertToTensor(oe,"scale","batchNorm"));let fe;return ie!=null&&(fe=convertToTensor(ie,"offset","batchNorm")),assert$2(ce.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${ce.rank}.`),assert$2(le.rank===2||le.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${le.rank}.`),assert$2(ue.rank===2||ue.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${ue.rank}.`),he!=null&&assert$2(he.rank===2||he.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${he.rank}.`),fe!=null&&assert$2(fe.rank===2||fe.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${fe.rank}.`),batchNorm$2(ce,le,ue,fe,he,ae)}const batchNorm2d=op({batchNorm2d_});function batchNorm3d_(re,ee,ne,ie,oe,ae){const ce=convertToTensor(re,"x","batchNorm"),le=convertToTensor(ee,"mean","batchNorm"),ue=convertToTensor(ne,"variance","batchNorm");let he;oe!=null&&(he=convertToTensor(oe,"scale","batchNorm"));let fe;return ie!=null&&(fe=convertToTensor(ie,"offset","batchNorm")),assert$2(ce.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${ce.rank}.`),assert$2(le.rank===3||le.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${le.rank}.`),assert$2(ue.rank===3||ue.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${ue.rank}.`),he!=null&&assert$2(he.rank===3||he.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${he.rank}.`),fe!=null&&assert$2(fe.rank===3||fe.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${fe.rank}.`),batchNorm$2(ce,le,ue,fe,he,ae)}const batchNorm3d=op({batchNorm3d_});function batchNorm4d_(re,ee,ne,ie,oe,ae){const ce=convertToTensor(re,"x","batchNorm"),le=convertToTensor(ee,"mean","batchNorm"),ue=convertToTensor(ne,"variance","batchNorm");let he;oe!=null&&(he=convertToTensor(oe,"scale","batchNorm"));let fe;return ie!=null&&(fe=convertToTensor(ie,"offset","batchNorm")),assert$2(ce.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${ce.rank}.`),assert$2(le.rank===4||le.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${le.rank}.`),assert$2(ue.rank===4||ue.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${ue.rank}.`),he!=null&&assert$2(he.rank===4||he.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${he.rank}.`),fe!=null&&assert$2(fe.rank===4||fe.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${fe.rank}.`),batchNorm$2(ce,le,ue,fe,he,ae)}const batchNorm4d=op({batchNorm4d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function broadcastTo_(re,ee){let ne=convertToTensor(re,"broadcastTo","x");const ie=ne.shape;if(ee.some(he=>!(he>0)||he%1!==0))throw new Error(`broadcastTo(): Invalid broadcast shape [${ee}].`);if(ee.length<ne.rank)throw new Error(`broadcastTo(): shape.length=${ee.length} < input.rank=${ne.rank}.`);if(ee.length>ne.rank){const he=ne.shape.slice();for(;he.length<ee.length;)he.unshift(1);ne=reshape$2(ne,he)}const oe=ne.shape,ae=Array.from(ee);for(let he=ee.length-1;he>=0;he--)if(oe[he]===ee[he])ae[he]=1;else if(ne.shape[he]!==1)throw new Error(`broadcastTo(): [${ie}] cannot be broadcast to [${ee}].`);if(ae.map((he,fe)=>he>1?fe:-1).filter(he=>he>=0).length===0)return clone$1(ne);const le={x:ne},ue={reps:ae};return ENGINE.runKernel(Tile,le,ue)}const broadcastTo=op({broadcastTo_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ceil_(re){const ne={x:convertToTensor(re,"x","ceil")};return ENGINE.runKernel(Ceil,ne)}const ceil$2=op({ceil_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clipByValue_(re,ee,ne){const ie=convertToTensor(re,"x","clipByValue");assert$2(ee<=ne,()=>`Error in clip: min (${ee}) must be less than or equal to max (${ne}).`);const oe={x:ie},ae={clipValueMin:ee,clipValueMax:ne};return ENGINE.runKernel(ClipByValue,oe,ae)}const clipByValue$1=op({clipByValue_});function concat1d_(re){return concat$2(re,0)}const concat1d=op({concat1d_});function concat2d_(re,ee){return concat$2(re,ee)}const concat2d=op({concat2d_});function concat3d_(re,ee){return concat$2(re,ee)}const concat3d=op({concat3d_});function concat4d_(re,ee){return concat$2(re,ee)}const concat4d=op({concat4d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2d_(re,ee,ne,ie,oe="NHWC",ae=[1,1],ce){const le=convertToTensor(re,"x","conv2d"),ue=convertToTensor(ee,"filter","conv2d");let he=le,fe=!1;le.rank===3&&(fe=!0,he=reshape$2(le,[1,le.shape[0],le.shape[1],le.shape[2]])),assert$2(he.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${he.rank}.`),assert$2(ue.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${ue.rank}.`),ce!=null&&assert$2(isInt(ie),()=>`Error in conv2d: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${ie}.`);const me=oe==="NHWC"?he.shape[3]:he.shape[1];assert$2(me===ue.shape[2],()=>`Error in conv2d: depth of input (${me}) must match input depth for filter ${ue.shape[2]}.`),assert$2(eitherStridesOrDilationsAreOne(ne,ae),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${ne} and dilations '${ae}'`);const ge={x:he,filter:ue},ve={strides:ne,pad:ie,dataFormat:oe,dilations:ae,dimRoundingMode:ce},ye=ENGINE.runKernel(Conv2D$1,ge,ve);return fe?reshape$2(ye,[ye.shape[1],ye.shape[2],ye.shape[3]]):ye}const conv2d$2=op({conv2d_});function conv1d_(re,ee,ne,ie,oe="NWC",ae=1,ce){const le=convertToTensor(re,"x","conv1d"),ue=convertToTensor(ee,"filter","conv1d");let he=le,fe=!1;le.rank===2&&(fe=!0,he=reshape$2(le,[1,le.shape[0],le.shape[1]])),assert$2(he.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${he.rank}.`),assert$2(ue.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${ue.rank}.`),ce!=null&&assert$2(isInt(ie),()=>`Error in conv1d: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${ie}.`),assert$2(he.shape[2]===ue.shape[1],()=>`Error in conv1d: depth of input (${he.shape[2]}) must match input depth for filter ${ue.shape[1]}.`),assert$2(eitherStridesOrDilationsAreOne(ne,ae),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${ne} and dilation '${ae}'`),assert$2(oe==="NWC",()=>`Error in conv1d: got dataFormat of ${oe} but only NWC is currently supported.`);const me=reshape$2(ue,[1,ue.shape[0],ue.shape[1],ue.shape[2]]),ge=reshape$2(he,[he.shape[0],1,he.shape[1],he.shape[2]]),Ce=conv2d$2(ge,me,[1,ne],ie,"NHWC",[1,ae],ce);return fe?reshape$2(Ce,[Ce.shape[2],Ce.shape[3]]):reshape$2(Ce,[Ce.shape[0],Ce.shape[2],Ce.shape[3]])}const conv1d=op({conv1d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropInput_(re,ee,ne,ie,oe,ae="NHWC",ce){assert$2(re.length===ee.rank,()=>`Length of inShape (${re.length}) and rank of dy (${ee.rank}) must match`);let le=re,ue=ee,he=!1;ee.rank===3&&(he=!0,ue=reshape$2(ee,[1,ee.shape[0],ee.shape[1],ee.shape[2]]),le=[1,re[0],re[1],re[2]]),assert$2(le.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${le.length}.`),assert$2(ue.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${ue.rank}`),assert$2(ne.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${ne.rank}`);const fe=ae==="NHWC"?le[3]:le[1],me=ae==="NHWC"?ue.shape[3]:ue.shape[1];assert$2(fe===ne.shape[2],()=>`Error in conv2dDerInput: depth of input (${fe}) must match input depth for filter ${ne.shape[2]}.`),assert$2(me===ne.shape[3],()=>`Error in conv2dDerInput: depth of output (${me}) must match output depth for filter ${ne.shape[3]}.`),ce!=null&&assert$2(isInt(oe),()=>`Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${oe}.`);const ge={dy:ue,filter:ne},ve={strides:ie,pad:oe,dataFormat:ae,dimRoundingMode:ce,inputShape:le},ye=ENGINE.runKernel(Conv2DBackpropInput,ge,ve);return he?reshape$2(ye,[ye.shape[1],ye.shape[2],ye.shape[3]]):ye}const conv2DBackpropInput$2=op({conv2DBackpropInput_});function conv2dTranspose_(re,ee,ne,ie,oe,ae){const ce=convertToTensor(re,"x","conv2dTranspose"),le=convertToTensor(ee,"filter","conv2dTranspose");return conv2DBackpropInput$2(ne,ce,le,ie,oe,"NHWC",ae)}const conv2dTranspose=op({conv2dTranspose_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3d_(re,ee,ne,ie,oe="NDHWC",ae=[1,1,1]){const ce=convertToTensor(re,"x","conv3d"),le=convertToTensor(ee,"filter","conv3d");let ue=ce,he=!1;ce.rank===4&&(he=!0,ue=reshape$2(ce,[1,ce.shape[0],ce.shape[1],ce.shape[2],ce.shape[3]])),assert$2(ue.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${ue.rank}.`),assert$2(le.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${le.rank}.`),assert$2(ue.shape[4]===le.shape[3],()=>`Error in conv3d: depth of input (${ue.shape[4]}) must match input depth for filter ${le.shape[3]}.`),assert$2(eitherStridesOrDilationsAreOne(ne,ae),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${ne} and dilations '${ae}'`),assert$2(oe==="NDHWC",()=>`Error in conv3d: got dataFormat of ${oe} but only NDHWC is currently supported.`);const fe={x:ue,filter:le},me={strides:ne,pad:ie,dataFormat:oe,dilations:ae},ge=ENGINE.runKernel(Conv3D$1,fe,me);return he?reshape$2(ge,[ge.shape[1],ge.shape[2],ge.shape[3],ge.shape[4]]):ge}const conv3d=op({conv3d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropInput_(re,ee,ne,ie,oe){assert$2(re.length===ee.rank,()=>`Length of inShape (${re.length}) and rank of dy (${ee.rank}) must match`);let ae=re,ce=ee,le=!1;ee.rank===4&&(le=!0,ce=reshape$2(ee,[1,ee.shape[0],ee.shape[1],ee.shape[2],ee.shape[3]]),ae=[1,re[0],re[1],re[2],re[3]]);const ue=ae[4],he=ce.shape[4];assert$2(ae.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${ae.length}.`),assert$2(ce.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${ce.rank}`),assert$2(ne.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${ne.rank}`),assert$2(ue===ne.shape[3],()=>`Error in conv3dDerInput: depth of input (${ue}) must match input depth for filter ${ne.shape[3]}.`),assert$2(he===ne.shape[4],()=>`Error in conv3dDerInput: depth of output (${he}) must match output depth for filter ${ne.shape[4]}.`);const fe={dy:ce,filter:ne},me={pad:oe,strides:ie,inputShape:ae},ge=ENGINE.runKernel(Conv3DBackpropInputV2,fe,me);return le?reshape$2(ge,[ge.shape[1],ge.shape[2],ge.shape[3],ge.shape[4]]):ge}const conv3DBackpropInput$1=op({conv3DBackpropInput_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cos_(re){const ne={x:convertToTensor(re,"x","cos")};return ENGINE.runKernel(Cos,ne)}const cos$2=op({cos_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cosh_(re){const ne={x:convertToTensor(re,"x","cosh")};return ENGINE.runKernel(Cosh,ne)}const cosh$2=op({cosh_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumsum_(re,ee=0,ne=!1,ie=!1){const ae={x:convertToTensor(re,"x","cumsum")},ce={axis:ee,exclusive:ne,reverse:ie};return ENGINE.runKernel(Cumsum,ae,ce)}const cumsum$2=op({cumsum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthToSpace_(re,ee,ne="NHWC"){const ie=convertToTensor(re,"x","depthToSpace"),oe=ne==="NHWC"?ie.shape[1]:ie.shape[2],ae=ne==="NHWC"?ie.shape[2]:ie.shape[3],ce=ne==="NHWC"?ie.shape[3]:ie.shape[1];assert$2(oe*ee>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${oe} and ${ee}  for depthToSpace with input shape
    ${ie.shape}`),assert$2(ae*ee>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${ae} and ${ee} for depthToSpace with input shape
        ${ie.shape}`),assert$2(ce%(ee*ee)===0,()=>`Dimension size must be evenly divisible by ${ee*ee} but is ${ce} for depthToSpace with input shape ${ie.shape}`);const le={x:ie},ue={blockSize:ee,dataFormat:ne};return ENGINE.runKernel(DepthToSpace,le,ue)}const depthToSpace$2=op({depthToSpace_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2d_(re,ee,ne,ie,oe="NHWC",ae=[1,1],ce){const le=convertToTensor(re,"x","depthwiseConv2d"),ue=convertToTensor(ee,"filter","depthwiseConv2d");let he=le,fe=!1;le.rank===3&&(fe=!0,he=reshape$2(le,[1,le.shape[0],le.shape[1],le.shape[2]])),assert$2(he.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${he.rank}.`),assert$2(ue.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${ue.rank}.`),assert$2(he.shape[3]===ue.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${he.shape[3]}) must match the inChannels dimension in filter ${ue.shape[2]}.`),ce!=null&&assert$2(isInt(ie),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${ie}.`);const me={x:he,filter:ue},ge={strides:ne,pad:ie,dataFormat:oe,dilations:ae,dimRoundingMode:ce},ve=ENGINE.runKernel(DepthwiseConv2dNative,me,ge);return fe?reshape$2(ve,[ve.shape[1],ve.shape[2],ve.shape[3]]):ve}const depthwiseConv2d$1=op({depthwiseConv2d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dilation2d_(re,ee,ne,ie,oe=[1,1],ae="NHWC"){const ce=convertToTensor(re,"x","dilation2d"),le=convertToTensor(ee,"filter","dilation2d");assert$2(ce.rank===3||ce.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${ce.rank}.`),assert$2(le.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${le.rank}.`),assert$2(ae==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${ae}`);let ue=ce,he=!1;ce.rank===3&&(ue=reshape$2(ce,[1,ce.shape[0],ce.shape[1],ce.shape[2]]),he=!0);const fe={x:ue,filter:le},me={strides:ne,pad:ie,dilations:oe},ge=ENGINE.runKernel(Dilation2D,fe,me);return he?reshape$2(ge,[ge.shape[1],ge.shape[2],ge.shape[3]]):ge}const dilation2d=op({dilation2d_});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getBroadcastDims$1(re,ee){const ne=re.length,ie=[];for(let oe=0;oe<ne;oe++){const ae=ne-1-oe,ce=re[ae]||1;(ee[ee.length-1-oe]||1)>1&&ce===1&&ie.unshift(ae)}return ie}function getReductionAxes(re,ee){const ne=[];for(let ie=0;ie<ee.length;ie++){const oe=re[re.length-ie-1],ae=ee.length-ie-1,ce=ee[ae];(oe==null||oe===1&&ce>1)&&ne.unshift(ae)}return ne}function assertAndGetBroadcastShape(re,ee){const ne=[],ie=Math.max(re.length,ee.length);for(let oe=0;oe<ie;oe++){let ae=re[re.length-oe-1];ae==null&&(ae=1);let ce=ee[ee.length-oe-1];if(ce==null&&(ce=1),ae===1)ne.unshift(ce);else if(ce===1)ne.unshift(ae);else if(ae!==ce){const le=`Operands could not be broadcast together with shapes ${re} and ${ee}.`;throw Error(le)}else ne.unshift(ae)}return ne}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function equal_(re,ee){let ne=convertToTensor(re,"a","equal"),ie=convertToTensor(ee,"b","equal");[ne,ie]=makeTypesMatch(ne,ie),assertAndGetBroadcastShape(ne.shape,ie.shape);const oe={a:ne,b:ie};return ENGINE.runKernel(Equal,oe)}const equal$2=op({equal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function where_(re,ee,ne){const ie=convertToTensor(ee,"a","where"),oe=convertToTensor(ne,"b","where"),ae=convertToTensor(re,"condition","where","bool"),ce=assertAndGetBroadcastShape(ie.shape,oe.shape),le=broadcastTo(ie,ce),ue=broadcastTo(oe,ce);ae.rank===1&&assert$2(ae.shape[0]===ie.shape[0],()=>"The first dimension of `a` must match the size of `condition`."),ae.rank!==1&&assertShapesMatch(ae.shape,ue.shape,"Error in where: ");const he={condition:ae,t:le,e:ue};return ENGINE.runKernel(Select$2,he)}const where=op({where_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zerosLike_(re){const ne={x:convertToTensor(re,"x","zerosLike")};return ENGINE.runKernel(ZerosLike,ne)}const zerosLike$2=op({zerosLike_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function divNoNan_(re,ee){let ne=convertToTensor(re,"a","div"),ie=convertToTensor(ee,"b","div");[ne,ie]=makeTypesMatch(ne,ie);const oe=div$1(ne,ie),ae=zerosLike$2(oe),ce=equal$2(ie,ae);return where(ce,ae,oe)}const divNoNan=op({divNoNan_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dot_(re,ee){const ne=convertToTensor(re,"t1","dot"),ie=convertToTensor(ee,"t2","dot");assert$2((ne.rank===1||ne.rank===2)&&(ie.rank===1||ie.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${ne.rank} and ${ie.rank}.`);const oe=ne.rank===1?ne.size:ne.shape[1],ae=ie.rank===1?ie.size:ie.shape[0];if(assert$2(oe===ae,()=>`Error in dot: inner dimensions of inputs must match, but got ${oe} and ${ae}.`),ne.rank===1&&ie.rank===1){const ce=reshape$2(ne,[1,-1]),le=reshape$2(ie,[-1,1]),ue=matMul$1(ce,le);return reshape$2(ue,[])}else if(ne.rank===1&&ie.rank===2){const ce=reshape$2(ne,[1,-1]),le=reshape$2(ie,[ie.shape[0],ie.shape[1]]),ue=matMul$1(ce,le);return reshape$2(ue,[ue.size])}else if(ne.rank===2&&ie.rank===1){const ce=reshape$2(ie,[-1,1]),le=matMul$1(ne,ce);return reshape$2(le,[le.size])}else{const ce=reshape$2(ie,[ie.shape[0],ie.shape[1]]);return matMul$1(ne,ce)}}const dot$1=op({dot_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function elu_(re){const ne={x:convertToTensor(re,"x","elu")};return ENGINE.runKernel(Elu$1,ne)}const elu$3=op({elu_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function erf_(re){let ee=convertToTensor(re,"x","erf");assert$2(ee.dtype==="int32"||ee.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),ee.dtype==="int32"&&(ee=cast$3(ee,"float32"));const ne={x:ee};return ENGINE.runKernel(Erf,ne)}const erf$2=op({erf_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function exp_(re){const ne={x:convertToTensor(re,"x","exp")};return ENGINE.runKernel(Exp,ne)}const exp$2=op({exp_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expandDims_(re,ee=0){const ne=convertToTensor(re,"x","expandDims","string_or_numeric");assert$2(ee<=ne.rank,()=>"Axis must be <= rank of the tensor");const ie={input:ne},oe={dim:ee};return ENGINE.runKernel(ExpandDims,ie,oe)}const expandDims$3=op({expandDims_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expm1_(re){const ne={x:convertToTensor(re,"x","expm1")};return ENGINE.runKernel(Expm1,ne)}const expm1$2=op({expm1_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tile_(re,ee){const ne=convertToTensor(re,"x","tile","string_or_numeric");assert$2(ne.rank===ee.length,()=>`Error in transpose: rank of input ${ne.rank} must match length of reps ${ee}.`);const ie={x:ne},oe={reps:ee};return ENGINE.runKernel(Tile,ie,oe)}const tile$3=op({tile_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eye_(re,ee,ne,ie="float32"){ee==null&&(ee=re);const oe=buffer$1([re,ee],ie),ae=re<=ee?re:ee;for(let le=0;le<ae;++le)oe.set(1,le,le);const ce=reshape$2(oe.toTensor(),[re,ee]);if(ne==null)return ce;if(ne.length===1)return tile$3(expandDims$3(ce,0),[ne[0],1,1]);if(ne.length===2)return tile$3(expandDims$3(expandDims$3(ce,0),0),[ne[0],ne[1],1,1]);if(ne.length===3)return tile$3(expandDims$3(expandDims$3(expandDims$3(ce,0),0),0),[ne[0],ne[1],ne[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${ne.length}D.`)}const eye=op({eye_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fill$3(re,ee,ne){const ie={shape:re,value:ee,dtype:ne};return ENGINE.runKernel(Fill,{},ie)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function floor_(re){const ne={x:convertToTensor(re,"x","floor")};return ENGINE.runKernel(Floor,ne)}const floor$3=op({floor_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gather_(re,ee,ne=0,ie=0){const oe=convertToTensor(re,"x","gather"),ae=convertToTensor(ee,"indices","gather","int32"),ce={x:oe,indices:ae},le={axis:ne,batchDims:ie};return ENGINE.runKernel(GatherV2,ce,le)}const gather$1=op({gather_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function greater_(re,ee){let ne=convertToTensor(re,"a","greater"),ie=convertToTensor(ee,"b","greater");[ne,ie]=makeTypesMatch(ne,ie),assertAndGetBroadcastShape(ne.shape,ie.shape);const oe={a:ne,b:ie};return ENGINE.runKernel(Greater,oe)}const greater$2=op({greater_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function greaterEqual_(re,ee){let ne=convertToTensor(re,"a","greaterEqual"),ie=convertToTensor(ee,"b","greaterEqual");[ne,ie]=makeTypesMatch(ne,ie),assertAndGetBroadcastShape(ne.shape,ie.shape);const oe={a:ne,b:ie};return ENGINE.runKernel(GreaterEqual,oe)}const greaterEqual$2=op({greaterEqual_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imag_(re){const ne={input:convertToTensor(re,"input","imag")};return ENGINE.runKernel(Imag,ne)}const imag$2=op({imag_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isFinite_(re){const ne={x:convertToTensor(re,"x","isFinite")};return ENGINE.runKernel(IsFinite,ne)}const isFinite$3=op({isFinite_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isInf_(re){const ne={x:convertToTensor(re,"x","isInf")};return ENGINE.runKernel(IsInf,ne)}const isInf$2=op({isInf_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function isNaN_(re){const ne={x:convertToTensor(re,"x","isNaN")};return ENGINE.runKernel(IsNan,ne)}const isNaN$3=op({isNaN_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function leakyRelu_(re,ee=.2){const ie={x:convertToTensor(re,"x","leakyRelu")},oe={alpha:ee};return ENGINE.runKernel(LeakyRelu,ie,oe)}const leakyRelu$2=op({leakyRelu_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function less_(re,ee){let ne=convertToTensor(re,"a","less"),ie=convertToTensor(ee,"b","less");[ne,ie]=makeTypesMatch(ne,ie),assertAndGetBroadcastShape(ne.shape,ie.shape);const oe={a:ne,b:ie};return ENGINE.runKernel(Less,oe)}const less$2=op({less_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lessEqual_(re,ee){let ne=convertToTensor(re,"a","lessEqual"),ie=convertToTensor(ee,"b","lessEqual");[ne,ie]=makeTypesMatch(ne,ie),assertAndGetBroadcastShape(ne.shape,ie.shape);const oe={a:ne,b:ie};return ENGINE.runKernel(LessEqual,oe)}const lessEqual$2=op({lessEqual_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function localResponseNormalization_(re,ee=5,ne=1,ie=1,oe=.5){const ae=convertToTensor(re,"x","localResponseNormalization");assert$2(ae.rank===4||ae.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${ae.rank}.`),assert$2(isInt(ee),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${ee}.`);let ce=ae,le=!1;ae.rank===3&&(le=!0,ce=reshape$2(ae,[1,ae.shape[0],ae.shape[1],ae.shape[2]]));const ue={x:ce},he={depthRadius:ee,bias:ne,alpha:ie,beta:oe},fe=ENGINE.runKernel(LRN,ue,he);return le?reshape$2(fe,[fe.shape[1],fe.shape[2],fe.shape[3]]):fe}const localResponseNormalization=op({localResponseNormalization_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function log_(re){const ne={x:convertToTensor(re,"x","log")};return ENGINE.runKernel(Log,ne)}const log$5=op({log_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function log1p_(re){const ne={x:convertToTensor(re,"x","log1p")};return ENGINE.runKernel(Log1p,ne)}const log1p$2=op({log1p_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function variableGrads(re,ee){assert$2(isFunction$3(re),()=>"The f passed in variableGrads(f) must be a function"),assert$2(ee==null||Array.isArray(ee)&&ee.every(he=>he instanceof Variable),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const ne=ee!=null;if(!ne){ee=[];for(const he in ENGINE.registeredVariables)ee.push(ENGINE.registeredVariables[he])}const ie=ne?ee.filter(he=>!he.trainable):null,oe=ee.length;ee=ee.filter(he=>he.trainable),assert$2(ee.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${oe} variables is trainable.`);const ae=!0,{value:ce,grads:le}=ENGINE.gradients(re,ee,null,ae);assert$2(le.some(he=>he!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),assert$2(ce.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${ce.rank} tensor`);const ue={};return ee.forEach((he,fe)=>{le[fe]!=null&&(ue[he.name]=le[fe])}),ie!=null&&ie.forEach(he=>ue[he.name]=null),{value:ce,grads:ue}}function customGrad(re){return ENGINE.customGrad(re)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function neg_(re){const ne={x:convertToTensor(re,"x","neg")};return ENGINE.runKernel(Neg,ne)}const neg$2=op({neg_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softplus_(re){const ne={x:convertToTensor(re,"x","softplus")};return ENGINE.runKernel(Softplus$1,ne)}const softplus$2=op({softplus_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logSigmoid_(re){const ee=convertToTensor(re,"x","logSigmoid");return customGrad(ie=>({value:neg$2(softplus$2(neg$2(ie))),gradFunc:ce=>mul(ce,sigmoid$2(neg$2(ie)))}))(ee)}const logSigmoid=op({logSigmoid_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function max_(re,ee=null,ne=!1){const oe={x:convertToTensor(re,"x","max")},ae={reductionIndices:ee,keepDims:ne};return ENGINE.runKernel(Max,oe,ae)}const max$4=op({max_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sub_(re,ee){let ne=convertToTensor(re,"a","sub"),ie=convertToTensor(ee,"b","sub");[ne,ie]=makeTypesMatch(ne,ie);const oe={a:ne,b:ie};return ENGINE.runKernel(Sub,oe)}const sub$2=op({sub_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sum_(re,ee=null,ne=!1){let ie=convertToTensor(re,"x","sum");ie.dtype==="bool"&&(ie=cast$3(ie,"int32"));const oe={x:ie},ae={axis:ee,keepDims:ne};return ENGINE.runKernel(Sum,oe,ae)}const sum$2=op({sum_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logSoftmax_(re,ee=-1){const ne=convertToTensor(re,"logits","logSoftmax");if(ee===-1&&(ee=ne.rank-1),ee!==ne.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${ne.rank} and axis was ${ee}`);return customGrad((oe,ae)=>{const le=max$4(oe,ee,!0),ue=sub$2(oe,le),he=sub$2(cast$3(ue,"float32"),log$5(sum$2(exp$2(ue),ee,!0)));return ae([he]),{value:he,gradFunc:(me,ge)=>{const[ve]=ge,ye=!0,be=exp$2(ve);return sub$2(me,mul(sum$2(me,ee,ye),be))}}})(ne)}const logSoftmax=op({logSoftmax_});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function axesAreInnerMostDims(re,ee){for(let ne=0;ne<re.length;++ne)if(re[re.length-ne-1]!==ee-1-ne)return!1;return!0}function combineLocations(re,ee,ne){const ie=re.length+ee.length,oe=[];let ae=0,ce=0;for(let le=0;le<ie;le++)ne.indexOf(le)===-1?oe.push(re[ae++]):oe.push(ee[ce++]);return oe}function computeOutAndReduceShapes(re,ee){const ne=[],ie=re.length;for(let ae=0;ae<ie;ae++)ee.indexOf(ae)===-1&&ne.push(re[ae]);const oe=ee.map(ae=>re[ae]);return[ne,oe]}function expandShapeToKeepDim(re,ee){const ne=ee.map(ie=>1);return combineLocations(re,ne,ee)}function assertAxesAreInnerMostDims(re,ee,ne){assert$2(axesAreInnerMostDims(ee,ne),()=>`${re} supports only inner-most axes for now. Got axes ${ee} and rank-${ne} input.`)}function getAxesPermutation(re,ee){if(axesAreInnerMostDims(re,ee))return null;const ne=[];for(let ie=0;ie<ee;++ie)re.indexOf(ie)===-1&&ne.push(ie);return re.forEach(ie=>ne.push(ie)),ne}function getUndoAxesPermutation(re){return re.map((ee,ne)=>[ne,ee]).sort((ee,ne)=>ee[1]-ne[1]).map(ee=>ee[0])}function getInnerMostAxes(re,ee){const ne=[];for(let ie=ee-re;ie<ee;++ie)ne.push(ie);return ne}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logSumExp_(re,ee=null,ne=!1){const ie=convertToTensor(re,"x","logSumExp"),oe=parseAxisParam(ee,ie.shape),ae=max$4(ie,oe,!0),ce=sub$2(ie,ae),le=exp$2(ce),ue=sum$2(le,oe),he=log$5(ue),fe=add$1(reshape$2(ae,he.shape),he);if(ne){const me=expandShapeToKeepDim(fe.shape,oe);return reshape$2(fe,me)}return fe}const logSumExp=op({logSumExp_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalAnd_(re,ee){const ne=convertToTensor(re,"a","logicalAnd","bool"),ie=convertToTensor(ee,"b","logicalAnd","bool");assertAndGetBroadcastShape(ne.shape,ie.shape);const oe={a:ne,b:ie};return ENGINE.runKernel(LogicalAnd,oe)}const logicalAnd$2=op({logicalAnd_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalNot_(re){const ne={x:convertToTensor(re,"x","logicalNot","bool")};return ENGINE.runKernel(LogicalNot,ne)}const logicalNot$2=op({logicalNot_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalOr_(re,ee){const ne=convertToTensor(re,"a","logicalOr","bool"),ie=convertToTensor(ee,"b","logicalOr","bool");assertAndGetBroadcastShape(ne.shape,ie.shape);const oe={a:ne,b:ie};return ENGINE.runKernel(LogicalOr,oe)}const logicalOr$2=op({logicalOr_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function logicalXor_(re,ee){const ne=convertToTensor(re,"a","logicalXor","bool"),ie=convertToTensor(ee,"b","logicalXor","bool");return assertAndGetBroadcastShape(ne.shape,ie.shape),logicalAnd$2(logicalOr$2(re,ee),logicalNot$2(logicalAnd$2(re,ee)))}const logicalXor=op({logicalXor_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool_(re,ee,ne,ie,oe){const ae=convertToTensor(re,"x","maxPool"),ce=1;let le=ae,ue=!1;ae.rank===3&&(ue=!0,le=reshape$2(ae,[1,ae.shape[0],ae.shape[1],ae.shape[2]])),assert$2(le.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${le.rank}.`),assert$2(eitherStridesOrDilationsAreOne(ne,ce),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${ne} and dilations '${ce}'`),oe!=null&&assert$2(isInt(ie),()=>`Error in maxPool: pad must be an integer when using, dimRoundingMode ${oe} but got pad ${ie}.`);const he={x:le},fe={filterSize:ee,strides:ne,pad:ie,dimRoundingMode:oe},me=ENGINE.runKernel(MaxPool,he,fe);return ue?reshape$2(me,[me.shape[1],me.shape[2],me.shape[3]]):me}const maxPool$2=op({maxPool_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3d_(re,ee=[1,1,1],ne,ie,oe,ae="NDHWC",ce){ce==null?ce=[1,1,1]:deprecationWarn("dilations is deprecated, this field will be gone in v3.0.0.");const le=convertToTensor(re,"x","maxPool3d");let ue=le,he=!1;le.rank===4&&(he=!0,ue=reshape$2(le,[1,le.shape[0],le.shape[1],le.shape[2],le.shape[3]])),assert$2(ue.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${ue.rank}.`),assert$2(ae==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${ae}`),assert$2(eitherStridesOrDilationsAreOne(ne,ce),()=>`Error in maxPool3d: Either strides or dilations must be 1. Got strides ${ne} and dilations '${ce}'`),oe!=null&&assert$2(isInt(ie),()=>`Error in maxPool3d: pad must be an integer when using, dimRoundingMode ${oe} but got pad ${ie}.`);const fe={x:ue},me={filterSize:ee,strides:ne,pad:ie,dimRoundingMode:oe,dataFormat:ae,dilations:ce},ge=ENGINE.runKernel(MaxPool3D,fe,me);return he?reshape$2(ge,[ge.shape[1],ge.shape[2],ge.shape[3],ge.shape[4]]):ge}const maxPool3d$1=op({maxPool3d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maximum_(re,ee){let ne=convertToTensor(re,"a","maximum"),ie=convertToTensor(ee,"b","maximum");[ne,ie]=makeTypesMatch(ne,ie),ne.dtype==="bool"&&(ne=cast$3(ne,"int32"),ie=cast$3(ie,"int32")),assertAndGetBroadcastShape(ne.shape,ie.shape);const oe={a:ne,b:ie};return ENGINE.runKernel(Maximum$1,oe)}const maximum$2=op({maximum_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mean_(re,ee=null,ne=!1){const oe={x:convertToTensor(re,"x","mean")},ae={axis:ee,keepDims:ne};return ENGINE.runKernel(Mean,oe,ae)}const mean$1=op({mean_});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function min_(re,ee=null,ne=!1){const oe={x:convertToTensor(re,"x","min")},ae={axis:ee,keepDims:ne};return ENGINE.runKernel(Min,oe,ae)}const min$4=op({min_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function minimum_(re,ee){let ne=convertToTensor(re,"a","minimum"),ie=convertToTensor(ee,"b","minimum");[ne,ie]=makeTypesMatch(ne,ie),ne.dtype==="bool"&&(ne=cast$3(ne,"int32"),ie=cast$3(ie,"int32")),assertAndGetBroadcastShape(ne.shape,ie.shape);const oe={a:ne,b:ie};return ENGINE.runKernel(Minimum$1,oe)}const minimum$2=op({minimum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mirrorPad_(re,ee,ne){assert$2(ne==="reflect"||ne==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${ne}.`);const ie=convertToTensor(re,"x","mirrorPad");if(ie.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");assert$2(ee.length===ie.rank,()=>`Padding doesn't match input. Must be ${ie.rank}. Got ${ee.length}.`);const oe=ne==="reflect"?1:0;for(let le=0;le<ie.rank;le++)assert$2(ee[le].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),assert$2(ee[le][0]>=0&&ee[le][0]<=ie.shape[le]-oe&&ee[le][1]>=0&&ee[le][1]<=ie.shape[le]-oe,()=>`Padding in dimension ${le} cannot be greater than or equal to ${ie.shape[le]-oe} or less than 0 for input of shape ${ie.shape}`);const ae={paddings:ee,mode:ne},ce={x:ie};return ENGINE.runKernel(MirrorPad,ce,ae)}const mirrorPad$1=op({mirrorPad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mod_(re,ee){let ne=convertToTensor(re,"a","mod"),ie=convertToTensor(ee,"b","mod");[ne,ie]=makeTypesMatch(ne,ie);const oe={a:ne,b:ie};return ENGINE.runKernel(Mod,oe)}const mod$2=op({mod_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function square_(re){const ee=convertToTensor(re,"x","square"),ne={};return ENGINE.runKernel("Square",{x:ee},ne)}const square$3=op({square_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function moments_(re,ee=null,ne=!1){re=convertToTensor(re,"x","moments");const ie=parseAxisParam(ee,re.shape),oe=mean$1(re,ie,ne);let ae=oe.shape;ne||(ae=expandShapeToKeepDim(oe.shape,ie));const ce=square$3(sub$2(cast$3(re,"float32"),reshape$2(oe,ae))),le=mean$1(ce,ie,ne);return{mean:oe,variance:le}}const moments=op({moments_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function notEqual_(re,ee){let ne=convertToTensor(re,"a","notEqual"),ie=convertToTensor(ee,"b","notEqual");[ne,ie]=makeTypesMatch(ne,ie),assertAndGetBroadcastShape(ne.shape,ie.shape);const oe={a:ne,b:ie};return ENGINE.runKernel(NotEqual,oe)}const notEqual$2=op({notEqual_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zeros$1(re,ee="float32"){if(ee==="complex64"){const ie=zeros$1(re,"float32"),oe=zeros$1(re,"float32");return complex$2(ie,oe)}const ne=makeZerosTypedArray(sizeFromShape(re),ee);return ENGINE.makeTensor(ne,re,ee)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ones(re,ee="float32"){if(ee==="complex64"){const ie=ones(re,"float32"),oe=zeros$1(re,"float32");return complex$2(ie,oe)}const ne=makeOnesTypedArray(sizeFromShape(re),ee);return ENGINE.makeTensor(ne,re,ee)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function onesLike_(re){const ne={x:convertToTensor(re,"x","onesLike")};return ENGINE.runKernel(OnesLike,ne)}const onesLike$2=op({onesLike_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pad_(re,ee,ne=0){const ie=convertToTensor(re,"x","pad");if(ie.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const oe={paddings:ee,constantValue:ne},ae={x:ie};return ENGINE.runKernel(PadV2,ae,oe)}const pad=op({pad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spaceToBatchND_(re,ee,ne){const ie=convertToTensor(re,"x","spaceToBatchND");assert$2(ie.rank>=1+ee.length,()=>`input rank ${ie.rank} should be > than [blockShape] ${ee.length}`),assert$2(ne.length===ee.length,()=>`paddings.shape[0] ${ne.length} must be equal to [blockShape] ${ee.length}`),assert$2(ie.shape.reduce((ce,le,ue)=>ue>0&&ue<=ee.length?ce&&(le+ne[ue-1][0]+ne[ue-1][1])%ee[ue-1]===0:ce,!0),()=>`input spatial dimensions ${ie.shape.slice(1)} with paddings ${ne.toString()} must be divisible by blockShapes ${ee.toString()}`);const oe={x:ie},ae={blockShape:ee,paddings:ne};return ENGINE.runKernel(SpaceToBatchND,oe,ae)}const spaceToBatchND$2=op({spaceToBatchND_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pool_(re,ee,ne,ie,oe,ae){oe==null&&(oe=[1,1]),ae==null&&(ae=1),ie===0&&(ie="valid");const ce=convertToTensor(re,"x","maxPool");let le=ce,ue=!1;ce.rank===3&&(ue=!0,le=reshape$2(ce,[1,ce.shape[0],ce.shape[1],ce.shape[2]])),assert$2(eitherStridesOrDilationsAreOne(ae,oe),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${ae} and dilations '${oe}'`);const he=computePool2DInfo(le.shape,ee,ae,oe,ie),fe=[he.dilationHeight,he.dilationWidth];let me;ie==="same"?me=withSpaceToBatchBasePaddings([he.filterHeight,he.filterWidth],fe):me=[[0,0],[0,0]];const ge=fe[0]===1&&fe[1]===1,[ve,ye]=requiredSpaceToBatchPaddings([he.inHeight,he.inWidth],fe,me),be=ge?ie:"valid",Ce=ge?le:spaceToBatchND$2(le,fe,ve),$e=(ne==="avg"?()=>avgPool$2(Ce,ee,ae,be):()=>maxPool$2(Ce,ee,ae,be))(),Te=ge?$e:batchToSpaceND$2($e,fe,ye);return ue?reshape$2(Te,[Te.shape[1],Te.shape[2],Te.shape[3]]):Te}function requiredSpaceToBatchPaddings(re,ee,ne){const ie=ne.map(fe=>fe[0]),oe=ne.map(fe=>fe[1]),ae=re.concat(ie,oe),ce=ee.map((fe,me)=>(fe-ae[me]%fe)%fe),le=oe.map((fe,me)=>fe+ce[me]),ue=ee.map((fe,me)=>[ie[me],le[me]]),he=ee.map((fe,me)=>[0,ce[me]]);return[ue,he]}function withSpaceToBatchBasePaddings(re,ee){const ie=re.map((ce,le)=>ce+(ce-1)*(ee[le]-1)).map(ce=>ce-1),oe=ie.map(ce=>Math.floor(ce/2)),ae=ie.map((ce,le)=>ce-oe[le]);return ie.map((ce,le)=>[oe[le],ae[le]])}const pool$2=op({pool_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pow_(re,ee){let ne=convertToTensor(re,"base","pow"),ie=convertToTensor(ee,"exp","pow");[ne,ie]=makeTypesMatch(ne,ie);const oe={a:ne,b:ie};return ENGINE.runKernel(Pow$1,oe)}const pow$2=op({pow_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prelu_(re,ee){const ne=convertToTensor(re,"x","prelu"),ie=convertToTensor(ee,"alpha","prelu"),oe={x:ne,alpha:ie};return ENGINE.runKernel(Prelu,oe)}const prelu$2=op({prelu_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prod_(re,ee=null,ne=!1){let ie=convertToTensor(re,"x","prod");ie.dtype==="bool"&&(ie=cast$3(ie,"int32"));const oe={x:ie},ae={axis:ee,keepDims:ne};return ENGINE.runKernel(Prod,oe,ae)}const prod$2=op({prod_});var alea$5={exports:{}};alea$5.exports;(function(re){(function(ee,ne,ie){function oe(ue){var he=this,fe=le();he.next=function(){var me=2091639*he.s0+he.c*23283064365386963e-26;return he.s0=he.s1,he.s1=he.s2,he.s2=me-(he.c=me|0)},he.c=1,he.s0=fe(" "),he.s1=fe(" "),he.s2=fe(" "),he.s0-=fe(ue),he.s0<0&&(he.s0+=1),he.s1-=fe(ue),he.s1<0&&(he.s1+=1),he.s2-=fe(ue),he.s2<0&&(he.s2+=1),fe=null}function ae(ue,he){return he.c=ue.c,he.s0=ue.s0,he.s1=ue.s1,he.s2=ue.s2,he}function ce(ue,he){var fe=new oe(ue),me=he&&he.state,ge=fe.next;return ge.int32=function(){return fe.next()*4294967296|0},ge.double=function(){return ge()+(ge()*2097152|0)*11102230246251565e-32},ge.quick=ge,me&&(typeof me=="object"&&ae(me,fe),ge.state=function(){return ae(fe,{})}),ge}function le(){var ue=4022871197,he=function(fe){fe=fe.toString();for(var me=0;me<fe.length;me++){ue+=fe.charCodeAt(me);var ge=.02519603282416938*ue;ue=ge>>>0,ge-=ue,ge*=ue,ue=ge>>>0,ge-=ue,ue+=ge*4294967296}return(ue>>>0)*23283064365386963e-26};return he}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.alea=ce})(commonjsGlobal,re,!1)})(alea$5);var aleaExports$2=alea$5.exports,xor128$5={exports:{}};xor128$5.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this,he="";ue.x=0,ue.y=0,ue.z=0,ue.w=0,ue.next=function(){var me=ue.x^ue.x<<11;return ue.x=ue.y,ue.y=ue.z,ue.z=ue.w,ue.w^=ue.w>>>19^me^me>>>8},le===(le|0)?ue.x=le:he+=le;for(var fe=0;fe<he.length+64;fe++)ue.x^=he.charCodeAt(fe)|0,ue.next()}function ae(le,ue){return ue.x=le.x,ue.y=le.y,ue.z=le.z,ue.w=le.w,ue}function ce(le,ue){var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(typeof fe=="object"&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.xor128=ce})(commonjsGlobal,re,!1)})(xor128$5);var xor128Exports$2=xor128$5.exports,xorwow$5={exports:{}};xorwow$5.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this,he="";ue.next=function(){var me=ue.x^ue.x>>>2;return ue.x=ue.y,ue.y=ue.z,ue.z=ue.w,ue.w=ue.v,(ue.d=ue.d+362437|0)+(ue.v=ue.v^ue.v<<4^(me^me<<1))|0},ue.x=0,ue.y=0,ue.z=0,ue.w=0,ue.v=0,le===(le|0)?ue.x=le:he+=le;for(var fe=0;fe<he.length+64;fe++)ue.x^=he.charCodeAt(fe)|0,fe==he.length&&(ue.d=ue.x<<10^ue.x>>>4),ue.next()}function ae(le,ue){return ue.x=le.x,ue.y=le.y,ue.z=le.z,ue.w=le.w,ue.v=le.v,ue.d=le.d,ue}function ce(le,ue){var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(typeof fe=="object"&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.xorwow=ce})(commonjsGlobal,re,!1)})(xorwow$5);var xorwowExports$2=xorwow$5.exports,xorshift7$5={exports:{}};xorshift7$5.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this;ue.next=function(){var fe=ue.x,me=ue.i,ge,ve;return ge=fe[me],ge^=ge>>>7,ve=ge^ge<<24,ge=fe[me+1&7],ve^=ge^ge>>>10,ge=fe[me+3&7],ve^=ge^ge>>>3,ge=fe[me+4&7],ve^=ge^ge<<7,ge=fe[me+7&7],ge=ge^ge<<13,ve^=ge^ge<<9,fe[me]=ve,ue.i=me+1&7,ve};function he(fe,me){var ge,ve=[];if(me===(me|0))ve[0]=me;else for(me=""+me,ge=0;ge<me.length;++ge)ve[ge&7]=ve[ge&7]<<15^me.charCodeAt(ge)+ve[ge+1&7]<<13;for(;ve.length<8;)ve.push(0);for(ge=0;ge<8&&ve[ge]===0;++ge);for(ge==8?ve[7]=-1:ve[ge],fe.x=ve,fe.i=0,ge=256;ge>0;--ge)fe.next()}he(ue,le)}function ae(le,ue){return ue.x=le.x.slice(),ue.i=le.i,ue}function ce(le,ue){le==null&&(le=+new Date);var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(fe.x&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.xorshift7=ce})(commonjsGlobal,re,!1)})(xorshift7$5);var xorshift7Exports$2=xorshift7$5.exports,xor4096$5={exports:{}};xor4096$5.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this;ue.next=function(){var fe=ue.w,me=ue.X,ge=ue.i,ve,ye;return ue.w=fe=fe+1640531527|0,ye=me[ge+34&127],ve=me[ge=ge+1&127],ye^=ye<<13,ve^=ve<<17,ye^=ye>>>15,ve^=ve>>>12,ye=me[ge]=ye^ve,ue.i=ge,ye+(fe^fe>>>16)|0};function he(fe,me){var ge,ve,ye,be,Ce,Se=[],$e=128;for(me===(me|0)?(ve=me,me=null):(me=me+"\0",ve=0,$e=Math.max($e,me.length)),ye=0,be=-32;be<$e;++be)me&&(ve^=me.charCodeAt((be+32)%me.length)),be===0&&(Ce=ve),ve^=ve<<10,ve^=ve>>>15,ve^=ve<<4,ve^=ve>>>13,be>=0&&(Ce=Ce+1640531527|0,ge=Se[be&127]^=ve+Ce,ye=ge==0?ye+1:0);for(ye>=128&&(Se[(me&&me.length||0)&127]=-1),ye=127,be=4*128;be>0;--be)ve=Se[ye+34&127],ge=Se[ye=ye+1&127],ve^=ve<<13,ge^=ge<<17,ve^=ve>>>15,ge^=ge>>>12,Se[ye]=ve^ge;fe.w=Ce,fe.X=Se,fe.i=ye}he(ue,le)}function ae(le,ue){return ue.i=le.i,ue.w=le.w,ue.X=le.X.slice(),ue}function ce(le,ue){le==null&&(le=+new Date);var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(fe.X&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.xor4096=ce})(commonjsGlobal,re,!1)})(xor4096$5);var xor4096Exports$2=xor4096$5.exports,tychei$5={exports:{}};tychei$5.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this,he="";ue.next=function(){var me=ue.b,ge=ue.c,ve=ue.d,ye=ue.a;return me=me<<25^me>>>7^ge,ge=ge-ve|0,ve=ve<<24^ve>>>8^ye,ye=ye-me|0,ue.b=me=me<<20^me>>>12^ge,ue.c=ge=ge-ve|0,ue.d=ve<<16^ge>>>16^ye,ue.a=ye-me|0},ue.a=0,ue.b=0,ue.c=-1640531527,ue.d=1367130551,le===Math.floor(le)?(ue.a=le/4294967296|0,ue.b=le|0):he+=le;for(var fe=0;fe<he.length+20;fe++)ue.b^=he.charCodeAt(fe)|0,ue.next()}function ae(le,ue){return ue.a=le.a,ue.b=le.b,ue.c=le.c,ue.d=le.d,ue}function ce(le,ue){var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(typeof fe=="object"&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.tychei=ce})(commonjsGlobal,re,!1)})(tychei$5);var tycheiExports$2=tychei$5.exports,seedrandom$4={exports:{}};(function(re){(function(ee,ne){var ie=256,oe=6,ae=52,ce="random",le=ne.pow(ie,oe),ue=ne.pow(2,ae),he=ue*2,fe=ie-1,me;function ge(Te,Ne,Ie){var ke=[];Ne=Ne==!0?{entropy:!0}:Ne||{};var De=Ce(be(Ne.entropy?[Te,$e(ee)]:Te??Se(),3),ke),Oe=new ve(ke),Be=function(){for(var Me=Oe.g(oe),Le=le,je=0;Me<ue;)Me=(Me+je)*ie,Le*=ie,je=Oe.g(1);for(;Me>=he;)Me/=2,Le/=2,je>>>=1;return(Me+je)/Le};return Be.int32=function(){return Oe.g(4)|0},Be.quick=function(){return Oe.g(4)/4294967296},Be.double=Be,Ce($e(Oe.S),ee),(Ne.pass||Ie||function(Me,Le,je,ze){return ze&&(ze.S&&ye(ze,Oe),Me.state=function(){return ye(Oe,{})}),je?(ne[ce]=Me,Le):Me})(Be,De,"globalThis"in Ne?Ne.global:this==ne,Ne.state)}ne["seed"+ce]=ge;function ve(Te){var Ne,Ie=Te.length,ke=this,De=0,Oe=ke.i=ke.j=0,Be=ke.S=[];for(Ie||(Te=[Ie++]);De<ie;)Be[De]=De++;for(De=0;De<ie;De++)Be[De]=Be[Oe=fe&Oe+Te[De%Ie]+(Ne=Be[De])],Be[Oe]=Ne;(ke.g=function(Me){for(var Le,je=0,ze=ke.i,Ve=ke.j,He=ke.S;Me--;)Le=He[ze=fe&ze+1],je=je*ie+He[fe&(He[ze]=He[Ve=fe&Ve+Le])+(He[Ve]=Le)];return ke.i=ze,ke.j=Ve,je})(ie)}function ye(Te,Ne){return Ne.i=Te.i,Ne.j=Te.j,Ne.S=Te.S.slice(),Ne}function be(Te,Ne){var Ie=[],ke=typeof Te,De;if(Ne&&ke=="object")for(De in Te)try{Ie.push(be(Te[De],Ne-1))}catch{}return Ie.length?Ie:ke=="string"?Te:Te+"\0"}function Ce(Te,Ne){for(var Ie=Te+"",ke,De=0;De<Ie.length;)Ne[fe&De]=fe&(ke^=Ne[fe&De]*19)+Ie.charCodeAt(De++);return $e(Ne)}function Se(){try{var Te;return me&&(Te=me.randomBytes)?Te=Te(ie):(Te=new Uint8Array(ie),(globalThis.crypto||globalThis.msCrypto).getRandomValues(Te)),$e(Te)}catch{var Ne=globalThis.navigator,Ie=Ne&&Ne.plugins;return[+new Date,globalThis,Ie,globalThis.screen,$e(ee)]}}function $e(Te){return String.fromCharCode.apply(0,Te)}if(Ce(ne.random(),ee),re.exports){re.exports=ge;try{me=require$$0$1}catch{}}})([],Math)})(seedrandom$4);var seedrandomExports$2=seedrandom$4.exports,alea$4=aleaExports$2,xor128$4=xor128Exports$2,xorwow$4=xorwowExports$2,xorshift7$4=xorshift7Exports$2,xor4096$4=xor4096Exports$2,tychei$4=tycheiExports$2,sr$2=seedrandomExports$2;sr$2.alea=alea$4;sr$2.xor128=xor128$4;sr$2.xorwow=xorwow$4;sr$2.xorshift7=xorshift7$4;sr$2.xor4096=xor4096$4;sr$2.tychei=tychei$4;var seedrandom$3=sr$2;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MPRandGauss{constructor(ee,ne,ie,oe,ae){this.mean=ee,this.stdDev=ne,this.dtype=ie,this.nextVal=NaN,this.truncated=oe,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const ce=ae||Math.random();this.random=seedrandom$3.alea(ce.toString())}nextValue(){if(!isNaN(this.nextVal)){const oe=this.nextVal;return this.nextVal=NaN,oe}let ee,ne,ie=!1;for(;!ie;){let oe,ae,ce;do oe=2*this.random()-1,ae=2*this.random()-1,ce=oe*oe+ae*ae;while(ce>=1||ce===0);const le=Math.sqrt(-2*Math.log(ce)/ce);ee=this.mean+this.stdDev*oe*le,ne=this.mean+this.stdDev*ae*le,(!this.truncated||this.isValidTruncated(ee))&&(ie=!0)}return(!this.truncated||this.isValidTruncated(ne))&&(this.nextVal=this.convertValue(ne)),this.convertValue(ee)}convertValue(ee){return this.dtype==null||this.dtype==="float32"?ee:Math.round(ee)}isValidTruncated(ee){return ee<=this.upper&&ee>=this.lower}}class UniformRandom{constructor(ee=0,ne=1,ie,oe){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=ee,this.range=ne-ee,this.dtype=ie,oe==null&&(oe=Math.random()),typeof oe=="number"&&(oe=oe.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${ee} - ${ne} <= 1 and dtype is not float`);this.random=seedrandom$3.alea(oe)}convertValue(ee){return this.canReturnFloat()?ee:Math.round(ee)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function randomNormal_(re,ee=0,ne=1,ie,oe){if(ie!=null&&ie==="bool")throw new Error(`Unsupported data type ${ie}`);const ae=new MPRandGauss(ee,ne,ie,!1,oe),ce=buffer$1(re,ie);for(let le=0;le<ce.values.length;le++)ce.values[le]=ae.nextValue();return ce.toTensor()}const randomNormal$1=op({randomNormal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function randomUniform_(re,ee=0,ne=1,ie="float32",oe){const ae=buffer$1(re,ie),ce=new UniformRandom(ee,ne,null,oe);for(let le=0;le<ae.values.length;le++)ae.values[le]=ce.nextValue();return ae.toTensor()}const randomUniform=op({randomUniform_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function range$4(re,ee,ne=1,ie="float32"){if(ne===0)throw new Error("Cannot have a step of zero");const oe={start:re,stop:ee,step:ne,dtype:ie};return ENGINE.runKernel(Range,{},oe)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function real_(re){const ne={input:convertToTensor(re,"input","real")};return ENGINE.runKernel(Real,ne)}const real$2=op({real_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reciprocal_(re){const ne={x:convertToTensor(re,"x","reciprocal")};return ENGINE.runKernel(Reciprocal,ne)}const reciprocal$2=op({reciprocal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function relu_(re){const ne={x:convertToTensor(re,"x","relu")};return ENGINE.runKernel(Relu$1,ne)}const relu$2=op({relu_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function relu6_(re){const ne={x:convertToTensor(re,"x","relu6")};return ENGINE.runKernel(Relu6$1,ne)}const relu6$2=op({relu6_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse_(re,ee){const ie={x:convertToTensor(re,"x","reverse")},oe={dims:ee};return ENGINE.runKernel(Reverse,ie,oe)}const reverse$2=op({reverse_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function round_(re){const ne={x:convertToTensor(re,"x","round")};return ENGINE.runKernel(Round,ne)}const round$3=op({round_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rsqrt_(re){const ne={x:convertToTensor(re,"x","rsqrt")};return ENGINE.runKernel(Rsqrt,ne)}const rsqrt$2=op({rsqrt_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scalar(re,ee){if((isTypedArray$3(re)&&ee!=="string"||Array.isArray(re))&&ee!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(ee==="string"&&isTypedArray$3(re)&&!(re instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return makeTensor(re,[],[],ee)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function selu_(re){const ne={x:convertToTensor(re,"x","selu")};return ENGINE.runKernel(Selu$1,ne)}const selu$2=op({selu_});function separableConv2d_(re,ee,ne,ie,oe,ae=[1,1],ce="NHWC"){const le=convertToTensor(re,"x","separableConv2d"),ue=convertToTensor(ee,"depthwiseFilter","separableConv2d"),he=convertToTensor(ne,"pointwiseFilter","separableConv2d");let fe=le,me=!1;if(le.rank===3&&(me=!0,fe=reshape$2(le,[1,le.shape[0],le.shape[1],le.shape[2]])),ce==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");assert$2(fe.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${fe.rank}.`),assert$2(ue.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${ue.rank}.`),assert$2(he.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${ue.rank}.`),assert$2(he.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${he.shape[0]}.`),assert$2(he.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${he.shape[1]}.`);const ge=ue.shape[2],ve=ue.shape[3];assert$2(he.shape[2]===ge*ve,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${ge*ve}, but got ${he.shape[2]}.`);const ye=depthwiseConv2d$1(fe,ue,ie,oe,ce,ae),Ce=conv2d$2(ye,he,1,"valid",ce);return me?reshape$2(Ce,[Ce.shape[1],Ce.shape[2],Ce.shape[3]]):Ce}const separableConv2d=op({separableConv2d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sign_(re){const ne={x:convertToTensor(re,"x","sign")};return ENGINE.runKernel(Sign,ne)}const sign$3=op({sign_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sin_(re){const ne={x:convertToTensor(re,"x","sin")};return ENGINE.runKernel(Sin,ne)}const sin$2=op({sin_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sinh_(re){const ne={x:convertToTensor(re,"x","sinh")};return ENGINE.runKernel(Sinh,ne)}const sinh$2=op({sinh_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice1d_(re,ee,ne){const ie=convertToTensor(re,"x","slice1d");return assert$2(ie.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${ie.rank} tensor`),slice$4(ie,[ee],[ne])}const slice1d=op({slice1d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice2d_(re,ee,ne){const ie=convertToTensor(re,"x","slice2d");return assert$2(ie.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${ie.rank} tensor`),slice$4(ie,ee,ne)}const slice2d=op({slice2d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice3d_(re,ee,ne){const ie=convertToTensor(re,"x","slice3d");return assert$2(ie.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${ie.rank} tensor`),slice$4(ie,ee,ne)}const slice3d=op({slice3d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function slice4d_(re,ee,ne){const ie=convertToTensor(re,"x","slice4d");return assert$2(ie.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${ie.rank} tensor`),slice$4(ie,ee,ne)}const slice4d=op({slice4d_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmax_(re,ee=-1){const ne=convertToTensor(re,"logits","softmax","float32");if(ee===-1&&(ee=ne.rank-1),ee!==ne.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${ne.rank} and dim was ${ee}`);const ie={logits:ne},oe={dim:ee};return ENGINE.runKernel(Softmax$2,ie,oe)}const softmax$2=op({softmax_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft_(re){assert$2(re.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${re.dtype}.`);const ee={input:re};return ENGINE.runKernel(FFT$2,ee)}const fft$3=op({fft_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifft_(re){assert$2(re.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${re.dtype}.`);const ee={input:re};return ENGINE.runKernel(IFFT,ee)}const ifft$2=op({ifft_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function irfft_(re){const ee=re.shape[re.shape.length-1],ne=re.size/ee;let ie;if(ee<=2){const oe=reshape$2(re,[ne,ee]);ie=ifft$2(oe)}else{const oe=[ne,2*(ee-1)],ae=reshape$2(real$2(re),[ne,ee]),ce=reshape$2(imag$2(re),[ne,ee]),le=reverse$2(slice$4(ae,[0,1],[ne,ee-2]),1),ue=mul(reverse$2(slice$4(ce,[0,1],[ne,ee-2]),1),scalar(-1)),he=concat$2([ae,le],1),fe=concat$2([ce,ue],1),me=reshape$2(complex$2(he,fe),[oe[0],oe[1]]);ie=ifft$2(me)}if(ie=real$2(ie),re.rank===3&&re.shape[0]!==0){const oe=ie,ae=re.shape[0];ie=reshape$2(ie,[ae,ie.shape[0]/ae,ie.shape[1]]),oe.dispose()}return ie}const irfft=op({irfft_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function split_(re,ee,ne=0){const oe={x:convertToTensor(re,"x","split")},ae={numOrSizeSplits:ee,axis:ne};return ENGINE.runKernel(SplitV,oe,ae)}const split=op({split_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rfft_(re,ee){assert$2(re.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${re.dtype}`);let ne=re.shape[re.shape.length-1];const ie=re.size/ne;let oe;if(ee!=null&&ee<ne){const ye=re.shape.map(Ce=>0),be=re.shape.map(Ce=>Ce);be[re.shape.length-1]=ee,oe=slice$4(re,ye,be),ne=ee}else if(ee!=null&&ee>ne){const ye=re.shape.map(be=>be);ye[re.shape.length-1]=ee-ne,oe=concat$2([re,zeros$1(ye)],re.shape.length-1),ne=ee}else oe=re;const ae=zerosLike$2(oe),ce=reshape$2(complex$2(oe,ae),[ie,ne]),le=fft$3(ce),ue=Math.floor(ne/2)+1,he=real$2(le),fe=imag$2(le),me=split(he,[ue,ne-ue],he.shape.length-1),ge=split(fe,[ue,ne-ue],fe.shape.length-1),ve=oe.shape.slice();return ve[oe.shape.length-1]=ue,reshape$2(complex$2(me[0],ge[0]),ve)}const rfft=op({rfft_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sqrt_(re){const ne={x:convertToTensor(re,"x","sqrt")};return ENGINE.runKernel(Sqrt,ne)}const sqrt$2=op({sqrt_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function squaredDifference_(re,ee){let ne=convertToTensor(re,"a","squaredDifference"),ie=convertToTensor(ee,"b","squaredDifference");[ne,ie]=makeTypesMatch(ne,ie),assertAndGetBroadcastShape(ne.shape,ie.shape);const oe={a:ne,b:ie},ae={};return ENGINE.runKernel(SquaredDifference,oe,ae)}const squaredDifference$2=op({squaredDifference_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function squeeze_(re,ee){const ne=convertToTensor(re,"x","squeeze");return reshape$2(ne,squeezeShape(ne.shape,ee).newShape)}const squeeze=op({squeeze_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stack_(re,ee=0){const ne=convertToTensorArray(re,"tensors","stack","string_or_numeric");assert$2(ne.length>=1,()=>"Pass at least one tensor to tf.stack"),ne.length>0&&assert$2(ee<=ne[0].rank,()=>"Axis must be <= rank of the tensor");const ie=ne,oe={axis:ee};return ENGINE.runKernel(Pack,ie,oe)}const stack$1=op({stack_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function step_(re,ee=0){const ie={x:convertToTensor(re,"x","step")},oe={alpha:ee};return ENGINE.runKernel(Step,ie,oe)}const step$2=op({step_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSlice_(re,ee,ne,ie,oe=0,ae=0,ce=0,le=0,ue=0){const fe={x:convertToTensor(re,"x","stridedSlice")},me={begin:ee,end:ne,strides:ie,beginMask:oe,endMask:ae,ellipsisMask:ce,newAxisMask:le,shrinkAxisMask:ue};return ENGINE.runKernel(StridedSlice,fe,me)}const stridedSlice$2=op({stridedSlice_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tan_(re){const ne={x:convertToTensor(re,"x","tan")};return ENGINE.runKernel(Tan,ne)}const tan$2=op({tan_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor1d(re,ee){assertNonNull(re);const ne=inferShape(re,ee);if(ne.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return makeTensor(re,null,ne,ee)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tensor2d(re,ee,ne){if(assertNonNull(re),ee!=null&&ee.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const ie=inferShape(re,ne);if(ie.length!==2&&ie.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(ie.length===1&&ee==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return makeTensor(re,ee,ie,ne)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topk_(re,ee=1,ne=!0){const ie=convertToTensor(re,"x","topk");if(ie.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const oe=ie.shape[ie.shape.length-1];if(ee>oe)throw new Error(`'k' passed to topk() must be <= the last dimension (${oe}) but got ${ee}`);const ae={x:ie},ce={k:ee,sorted:ne},[le,ue]=ENGINE.runKernel(TopK,ae,ce);return{values:le,indices:ue}}const topk=op({topk_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function truncatedNormal_(re,ee=0,ne=1,ie,oe){if(ie!=null&&ie==="bool")throw new Error("Unsupported data type $ { dtype }");const ae=new MPRandGauss(ee,ne,ie,!0,oe),ce=buffer$1(re,ie);for(let le=0;le<ce.values.length;le++)ce.values[le]=ae.nextValue();return ce.toTensor()}const truncatedNormal=op({truncatedNormal_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unique_(re,ee=0){const ne=convertToTensor(re,"x","unique","string_or_numeric");assert$2(ne.rank>0,()=>"The input tensor must be at least 1D");const ie={x:ne},oe={axis:ee},[ae,ce]=ENGINE.runKernel(Unique,ie,oe);return{values:ae,indices:ce}}const unique$4=op({unique_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unsortedSegmentSum_(re,ee,ne){const ie=convertToTensor(re,"x","unsortedSegmentSum"),oe=convertToTensor(ee,"segmentIds","unsortedSegmentSum","int32");assert$2(isInt(ne),()=>"numSegments must be of dtype int");const ae={x:ie,segmentIds:oe},ce={numSegments:ne};return ENGINE.runKernel(UnsortedSegmentSum,ae,ce)}const unsortedSegmentSum$2=op({unsortedSegmentSum_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unstack_(re,ee=0){const ne=convertToTensor(re,"x","unstack","string_or_numeric");assert$2(ee>=-ne.shape.length&&ee<ne.shape.length,()=>`Axis = ${ee} is not in [-${ne.shape.length}, ${ne.shape.length})`);const ie={value:ne},oe={axis:ee};return ENGINE.runKernel(Unpack,ie,oe)}const unstack=op({unstack_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function variable(re,ee=!0,ne,ie){return ENGINE.makeVariable(re,ee,ne,ie)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function whereImpl$2(re,ee){const ne=[];for(let ae=0;ae<ee.length;ae++)ee[ae]&&ne.push(ae);const ie=buffer$1(re,"int32"),oe=buffer$1([ne.length,re.length],"int32");for(let ae=0;ae<ne.length;ae++){const ce=ie.indexToLoc(ne[ae]),le=ae*re.length;oe.values.set(ce,le)}return oe.toTensor()}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function notEqualStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","notEqualStrict"),ie=convertToTensor(ee,"b","notEqualStrict");return assertShapesMatch(ne.shape,ie.shape,"Error in notEqualStrict: "),notEqual$2(ne,ie)}function lessStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","lessStrict"),ie=convertToTensor(ee,"b","lessStrict");return assertShapesMatch(ne.shape,ie.shape,"Error in lessStrict: "),less$2(ne,ie)}function equalStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","equalStrict"),ie=convertToTensor(ee,"b","equalStrict");return assertShapesMatch(ne.shape,ie.shape,"Error in equalStrict: "),equal$2(ne,ie)}function lessEqualStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","lessEqualStrict"),ie=convertToTensor(ee,"b","lessEqualStrict");return assertShapesMatch(ne.shape,ie.shape,"Error in lessEqualStrict: "),lessEqual$2(ne,ie)}function greaterStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","greaterStrict"),ie=convertToTensor(ee,"b","greaterStrict");return assertShapesMatch(ne.shape,ie.shape,"Error in greaterStrict: "),greater$2(ne,ie)}function greaterEqualStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","greaterEqualStrict"),ie=convertToTensor(ee,"b","greaterEqualStrict");return assertShapesMatch(ne.shape,ie.shape,"Error in greaterEqualStrict: "),greaterEqual$2(ne,ie)}const equalStrict=op({equalStrict_}),greaterEqualStrict=op({greaterEqualStrict_}),greaterStrict=op({greaterStrict_}),lessEqualStrict=op({lessEqualStrict_}),lessStrict=op({lessStrict_}),notEqualStrict=op({notEqualStrict_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function addStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","addStrict"),ie=convertToTensor(ee,"b","addStrict");return assertShapesMatch(ne.shape,ie.shape,"Error in addStrict: "),add$1(ne,ie)}function subStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","subStrict"),ie=convertToTensor(ee,"b","subStrict");return assertShapesMatch(ne.shape,ie.shape,"Error in subStrict: "),sub$2(ne,ie)}function powStrict_(re,ee){return deprecationWarn("strict variants of ops have been deprecated and will be removed in future"),assertShapesMatch(re.shape,ee.shape,"Error in powStrict: "),pow$2(re,ee)}function mulStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","mul"),ie=convertToTensor(ee,"b","mul");return assertShapesMatch(ne.shape,ie.shape,"Error in multiplyStrict: "),mul(ne,ie)}function divStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","div"),ie=convertToTensor(ee,"b","div");return assertShapesMatch(ne.shape,ie.shape,"Error in divideStrict: "),div$1(ne,ie)}function modStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","modStrict"),ie=convertToTensor(ee,"b","modStrict");return assertShapesMatch(ne.shape,ie.shape,"Error in modStrict: "),mod$2(ne,ie)}function minimumStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","minimumStrict"),ie=convertToTensor(ee,"b","minimumStrict");return assertShapesMatch(ne.shape,ie.shape,"Error in minimumStrict: "),minimum$2(ne,ie)}function maximumStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","maximumStrict"),ie=convertToTensor(ee,"b","maximumStrict");return assertShapesMatch(ne.shape,ie.shape,"Error in maximumStrict: "),maximum$2(ne,ie)}function squaredDifferenceStrict_(re,ee){deprecationWarn("strict variants of ops have been deprecated and will be removed in future");const ne=convertToTensor(re,"a","squaredDifferenceStrict"),ie=convertToTensor(ee,"b","squaredDifferenceStrict");return assertShapesMatch(ne.shape,ie.shape,"Error in squaredDifferenceStrict: "),squaredDifference$2(ne,ie)}const addStrict=op({addStrict_}),divStrict=op({divStrict_}),maximumStrict=op({maximumStrict_}),minimumStrict=op({minimumStrict_}),modStrict=op({modStrict_}),mulStrict=op({mulStrict_}),powStrict=op({powStrict_}),squaredDifferenceStrict=op({squaredDifferenceStrict_}),subStrict=op({subStrict_});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function norm_(re,ee="euclidean",ne=null,ie=!1){re=convertToTensor(re,"x","norm");const oe=normImpl(re,ee,ne);let ae=oe.shape;if(ie){const ce=parseAxisParam(ne,re.shape);ae=expandShapeToKeepDim(oe.shape,ce)}return reshape$2(oe,ae)}function normImpl(re,ee,ne=null){if(re.rank===0)return abs$3(re);if(re.rank!==1&&ne===null)return normImpl(reshape$2(re,[-1]),ee,ne);if(re.rank===1||typeof ne=="number"||Array.isArray(ne)&&ne.length===1){if(ee===1)return sum$2(abs$3(re),ne);if(ee===1/0)return max$4(abs$3(re),ne);if(ee===-1/0)return min$4(abs$3(re),ne);if(ee==="euclidean"||ee===2)return sqrt$2(sum$2(pow$2(abs$3(re),scalar(2,"int32")),ne));throw new Error(`Error in norm: invalid ord value: ${ee}`)}if(Array.isArray(ne)&&ne.length===2){if(ee===1)return max$4(sum$2(abs$3(re),ne[0]),ne[1]-1);if(ee===1/0)return max$4(sum$2(abs$3(re),ne[1]),ne[0]);if(ee===-1/0)return min$4(sum$2(abs$3(re),ne[1]),ne[0]);if(ee==="fro"||ee==="euclidean")return sqrt$2(sum$2(square$3(re),ne));throw new Error(`Error in norm: invalid ord value: ${ee}`)}throw new Error(`Error in norm: invalid axis: ${ne}`)}const norm=op({norm_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getNoiseShape(re,ee){if(ee==null)return re.shape.slice();if(arraysEqual(re.shape,ee))return ee;if(re.shape.length===ee.length){const ne=[];for(let ie=0;ie<re.shape.length;ie++)ee[ie]==null&&re.shape[ie]!=null?ne.push(re.shape[ie]):ne.push(ee[ie]);return ne}return ee}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dropout_(re,ee,ne,ie){const oe=convertToTensor(re,"x","dropout");if(assert$2(oe.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${oe.dtype} tensor instead.`),assert$2(ee>=0&&ee<1,()=>`rate must be a float in the range [0, 1), but got ${ee}.`),ee===0)return re instanceof Tensor?oe.clone():oe;const ae=getNoiseShape(oe,ne),ce=1-ee,le=div$1(floor$3(add$1(randomUniform(ae,0,1,"float32",ie),ce)),ce);return mul(oe,le)}const dropout$1=op({dropout_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropFilter_(re,ee,ne,ie,oe,ae="NHWC",ce){let le=re;re.rank===3&&(le=reshape$2(re,[1,re.shape[0],re.shape[1],re.shape[2]]));let ue=ee;ue.rank===3&&(ue=reshape$2(ee,[1,ee.shape[0],ee.shape[1],ee.shape[2]])),assert$2(le.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${le.shape}.`),assert$2(ue.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${ue.shape}.`),assert$2(ne.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${ne}.`);const he=ae==="NHWC"?le.shape[3]:le.shape[1],fe=ae==="NHWC"?ue.shape[3]:ue.shape[1];assert$2(he===ne[2],()=>`Error in conv2dDerFilter: depth of input ${he}) must match input depth in filter (${ne[2]}.`),assert$2(fe===ne[3],()=>`Error in conv2dDerFilter: depth of dy (${fe}) must match output depth for filter (${ne[3]}).`),ce!=null&&assert$2(isInt(oe),()=>`Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${oe}.`);const me={x:le,dy:ue},ge={strides:ie,pad:oe,dataFormat:ae,dimRoundingMode:ce,filterShape:ne};return ENGINE.runKernel(Conv2DBackpropFilter,me,ge)}const conv2DBackpropFilter$2=op({conv2DBackpropFilter_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getFusedDyActivation(re,ee,ne){if(ne==null||ne==="linear")return re;if(ne==="relu")return mul(re,step$2(ee));throw new Error(`Cannot compute gradient for fused activation ${ne}.`)}function getFusedBiasGradient(re,ee){let ne=ee;const ie=getReductionAxes(re.shape,ee.shape);return ie.length>0&&(ne=sum$2(ne,ie)),reshape$2(ne,re.shape)}function applyActivation$1(re,ee,ne,ie){if(ee==="linear")return re;if(ee==="relu")return relu$2(re);if(ee==="elu")return elu$3(re);if(ee==="relu6")return relu6$2(re);if(ee==="prelu")return prelu$2(re,ne);if(ee==="leakyrelu")return leakyRelu$2(re,ie);throw new Error(`Unknown fused activation ${ee}.`)}const shouldFuse=(re,ee)=>!(re>0)||ee==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConv2d_({x:re,filter:ee,strides:ne,pad:ie,dataFormat:oe="NHWC",dilations:ae=[1,1],dimRoundingMode:ce,bias:le,activation:ue="linear",preluActivationWeights:he,leakyreluAlpha:fe}){if(ue=ue||"linear",shouldFuse(ENGINE.state.gradientDepth,ue)===!1){let Ie=conv2d$2(re,ee,ne,ie,oe,ae,ce);return le!=null&&(Ie=add$1(Ie,le)),applyActivation$1(Ie,ue,he,fe)}const me=convertToTensor(re,"x","conv2d"),ge=convertToTensor(ee,"filter","conv2d");let ve=me,ye=!1;me.rank===3&&(ye=!0,ve=reshape$2(me,[1,me.shape[0],me.shape[1],me.shape[2]])),assert$2(ve.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${ve.rank}.`),assert$2(ge.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${ge.rank}.`),ce!=null&&assert$2(isInt(ie),()=>`Error in fused conv2d: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${ie}.`),assert$2(ve.shape[3]===ge.shape[2],()=>`Error in conv2d: depth of input (${ve.shape[3]}) must match input depth for filter ${ge.shape[2]}.`),assert$2(eitherStridesOrDilationsAreOne(ne,ae),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${ne} and dilations '${ae}'`),assert$2(oe==="NHWC",()=>`Error in conv2d: got dataFormat of ${oe} but only NHWC is currently supported.`);const be=computeConv2DInfo(ve.shape,ge.shape,ne,ae,ie,ce);let Ce;le!=null&&(Ce=convertToTensor(le,"bias","fused conv2d"),[Ce]=makeTypesMatch(Ce,me),assertAndGetBroadcastShape(be.outShape,Ce.shape));let Se;he!=null&&(Se=convertToTensor(he,"prelu weights","fused conv2d"));const $e=(Ie,ke)=>{const[De,Oe,Be,Me]=ke,Le=getFusedDyActivation(Ie,Be,ue);assert$2(tupleValuesAreOne(ae),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${ae}'`);const je=conv2DBackpropInput$2(Oe.shape,Le,De,ne,ie),ze=conv2DBackpropFilter$2(Oe,Le,De.shape,ne,ie),Ve=[je,ze];if(Me!=null){const He=getFusedBiasGradient(Me,Le);Ve.push(He)}return Ve},Te={x:ve,filter:ge,bias:Ce,preluActivationWeights:Se},Ne={strides:ne,pad:ie,dataFormat:oe,dilations:ae,dimRoundingMode:ce,activation:ue,leakyreluAlpha:fe};return le==null?customGrad((ke,De,Oe)=>{let Be=ENGINE.runKernel(FusedConv2D,Te,Ne);return Oe([De,ke,Be]),ye&&(Be=reshape$2(Be,[Be.shape[1],Be.shape[2],Be.shape[3]])),{value:Be,gradFunc:$e}})(ve,ge):customGrad((ke,De,Oe,Be)=>{let Me=ENGINE.runKernel(FusedConv2D,Te,Ne);return Be([De,ke,Me,Oe]),ye&&(Me=reshape$2(Me,[Me.shape[1],Me.shape[2],Me.shape[3]])),{value:Me,gradFunc:$e}})(ve,ge,Ce)}const conv2d$1=op({fusedConv2d_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropFilter_(re,ee,ne,ie,oe,ae=[1,1],ce){let le=re;re.rank===3&&(le=reshape$2(re,[1,re.shape[0],re.shape[1],re.shape[2]]));let ue=ee;ue.rank===3&&(ue=reshape$2(ee,[1,ee.shape[0],ee.shape[1],ee.shape[2]]));const he={x:le,dy:ue},fe={strides:ie,pad:oe,dimRoundingMode:ce,dilations:ae,filterShape:ne};return ENGINE.runKernel(DepthwiseConv2dNativeBackpropFilter,he,fe)}const depthwiseConv2dNativeBackpropFilter$2=op({depthwiseConv2dNativeBackpropFilter_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropInput_(re,ee,ne,ie,oe,ae=[1,1],ce){let le=ee,ue=!1;ee.rank===3&&(ue=!0,le=reshape$2(ee,[1,ee.shape[0],ee.shape[1],ee.shape[2]]));const he={dy:le,filter:ne},fe={strides:ie,pad:oe,dimRoundingMode:ce,dilations:ae,inputShape:re},me=ENGINE.runKernel(DepthwiseConv2dNativeBackpropInput,he,fe);return ue?reshape$2(me,[me.shape[1],me.shape[2],me.shape[3]]):me}const depthwiseConv2dNativeBackpropInput$2=op({depthwiseConv2dNativeBackpropInput_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedMatMul_({a:re,b:ee,transposeA:ne=!1,transposeB:ie=!1,bias:oe,activation:ae="linear",preluActivationWeights:ce,leakyreluAlpha:le}){if(shouldFuse(ENGINE.state.gradientDepth,ae)===!1){let Me=matMul$1(re,ee,ne,ie);return oe!=null&&(Me=add$1(Me,oe)),applyActivation$1(Me,ae,ce,le)}let ue=convertToTensor(re,"a","fused matMul"),he=convertToTensor(ee,"b","fused matMul");[ue,he]=makeTypesMatch(ue,he);const fe=ne?ue.shape[ue.rank-2]:ue.shape[ue.rank-1],me=ie?he.shape[he.rank-1]:he.shape[he.rank-2],ge=ne?ue.shape[ue.rank-1]:ue.shape[ue.rank-2],ve=ie?he.shape[he.rank-2]:he.shape[he.rank-1],ye=ue.shape.slice(0,-2),be=he.shape.slice(0,-2),Ce=sizeFromShape(ye),Se=sizeFromShape(be);assert$2(ue.rank>=2&&he.rank>=2&&ue.rank===he.rank,()=>`Error in fused matMul: inputs must have the same rank of at least 2, got ranks ${ue.rank} and ${he.rank}.`),assert$2(arraysEqual(ye,be),()=>`Error in fused matMul: outer dimensions (${ye}) and (${be}) of Tensors with shapes ${ue.shape} and ${he.shape} must match.`),assert$2(fe===me,()=>`Error in fused matMul: inner shapes (${fe}) and (${me}) of Tensors with shapes ${ue.shape} and ${he.shape} and transposeA=${ne} and transposeB=${ie} must match.`);const $e=ue.shape.slice(0,-2).concat([ge,ve]),Te=ne?reshape$2(ue,[Ce,fe,ge]):reshape$2(ue,[Ce,ge,fe]),Ne=ie?reshape$2(he,[Se,ve,me]):reshape$2(he,[Se,me,ve]);let Ie;oe!=null&&(Ie=convertToTensor(oe,"bias","fused matMul"),[Ie]=makeTypesMatch(Ie,ue),assertAndGetBroadcastShape($e,Ie.shape));let ke;ce!=null&&(ke=convertToTensor(ce,"prelu weights","fused matMul"));const De=(Me,Le)=>{const[je,ze,Ve,He]=Le,We=getFusedDyActivation(reshape$2(Me,Ve.shape),Ve,ae);let Ye,Ue;if(!ne&&!ie?(Ye=matMul$1(We,ze,!1,!0),Ue=matMul$1(je,We,!0,!1)):!ne&&ie?(Ye=matMul$1(We,ze,!1,!1),Ue=matMul$1(We,je,!0,!1)):ne&&!ie?(Ye=matMul$1(ze,We,!1,!0),Ue=matMul$1(je,We,!1,!1)):(Ye=matMul$1(ze,We,!0,!0),Ue=matMul$1(We,je,!0,!0)),oe!=null){const Ke=getFusedBiasGradient(He,We);return[Ye,Ue,Ke]}else return[Ye,Ue]},Oe={a:Te,b:Ne,bias:Ie,preluActivationWeights:ke},Be={transposeA:ne,transposeB:ie,activation:ae,leakyreluAlpha:le};return oe==null?customGrad((Le,je,ze)=>{const Ve=ENGINE.runKernel(_FusedMatMul,Oe,Be);return ze([Le,je,Ve]),{value:reshape$2(Ve,$e),gradFunc:De}})(Te,Ne):customGrad((Le,je,ze,Ve)=>{const He=ENGINE.runKernel(_FusedMatMul,Oe,Be);return Ve([Le,je,He,ze]),{value:reshape$2(He,$e),gradFunc:De}})(Te,Ne,Ie)}const matMul=op({fusedMatMul_});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function binaryInsert(re,ee,ne){const ie=binarySearch(re,ee,ne),oe=ie<0?-(ie+1):ie;re.splice(oe,0,ee)}function binarySearch(re,ee,ne){return binarySearch_(re,ee,ne||defaultComparator)}function defaultComparator(re,ee){return re>ee?1:re<ee?-1:0}function binarySearch_(re,ee,ne){let ie=0,oe=re.length,ae=0,ce=!1;for(;ie<oe;){ae=ie+(oe-ie>>>1);const le=ne(ee,re[ae]);le>0?ie=ae+1:(oe=ae,ce=!le)}return ce?ie:-ie-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nonMaxSuppressionV3Impl$2(re,ee,ne,ie,oe){return nonMaxSuppressionImpl_(re,ee,ne,ie,oe,0)}function nonMaxSuppressionV4Impl$2(re,ee,ne,ie,oe,ae){return nonMaxSuppressionImpl_(re,ee,ne,ie,oe,0,!1,ae,!0)}function nonMaxSuppressionV5Impl$2(re,ee,ne,ie,oe,ae){return nonMaxSuppressionImpl_(re,ee,ne,ie,oe,ae,!0)}function nonMaxSuppressionImpl_(re,ee,ne,ie,oe,ae,ce=!1,le=!1,ue=!1){const he=[];for(let Ce=0;Ce<ee.length;Ce++)ee[Ce]>oe&&he.push({score:ee[Ce],boxIndex:Ce,suppressBeginIndex:0});he.sort(ascendingComparator);const fe=ae>0?-.5/ae:0,me=[],ge=[];for(;me.length<ne&&he.length>0;){const Ce=he.pop(),{score:Se,boxIndex:$e,suppressBeginIndex:Te}=Ce;if(Se<oe)break;let Ne=!1;for(let Ie=me.length-1;Ie>=Te;--Ie){const ke=intersectionOverUnion(re,$e,me[Ie]);if(ke>=ie){Ne=!0;break}if(Ce.score=Ce.score*suppressWeight(ie,fe,ke),Ce.score<=oe)break}Ce.suppressBeginIndex=me.length,Ne||(Ce.score===Se?(me.push($e),ge.push(Ce.score)):Ce.score>oe&&binaryInsert(he,Ce,ascendingComparator))}const ve=me.length,ye=ne-ve;le&&ye>0&&(me.push(...new Array(ye).fill(0)),ge.push(...new Array(ye).fill(0)));const be={selectedIndices:me};return ce&&(be.selectedScores=ge),ue&&(be.validOutputs=ve),be}function intersectionOverUnion(re,ee,ne){const ie=re.subarray(ee*4,ee*4+4),oe=re.subarray(ne*4,ne*4+4),ae=Math.min(ie[0],ie[2]),ce=Math.min(ie[1],ie[3]),le=Math.max(ie[0],ie[2]),ue=Math.max(ie[1],ie[3]),he=Math.min(oe[0],oe[2]),fe=Math.min(oe[1],oe[3]),me=Math.max(oe[0],oe[2]),ge=Math.max(oe[1],oe[3]),ve=(le-ae)*(ue-ce),ye=(me-he)*(ge-fe);if(ve<=0||ye<=0)return 0;const be=Math.max(ae,he),Ce=Math.max(ce,fe),Se=Math.min(le,me),$e=Math.min(ue,ge),Te=Math.max(Se-be,0)*Math.max($e-Ce,0);return Te/(ve+ye-Te)}function suppressWeight(re,ee,ne){const ie=Math.exp(ee*ne*ne);return ne<=re?ie:0}function ascendingComparator(re,ee){return re.score-ee.score||re.score===ee.score&&ee.boxIndex-re.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinear_(re,ee,ne=!1,ie=!1){const oe=convertToTensor(re,"images","resizeBilinear");assert$2(oe.rank===3||oe.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${oe.rank}.`),assert$2(ee.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${ee}.`),assert$2(ie===!1||ne===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let ae=oe,ce=!1;oe.rank===3&&(ce=!0,ae=reshape$2(oe,[1,oe.shape[0],oe.shape[1],oe.shape[2]]));const le={images:ae},ue={alignCorners:ne,halfPixelCenters:ie,size:ee},he=ENGINE.runKernel(ResizeBilinear,le,ue);return ce?reshape$2(he,[he.shape[1],he.shape[2],he.shape[3]]):he}const resizeBilinear$2=op({resizeBilinear_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighbor_(re,ee,ne=!1,ie=!1){const oe=convertToTensor(re,"images","resizeNearestNeighbor");assert$2(oe.rank===3||oe.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${oe.rank}.`),assert$2(ee.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${ee}.`),assert$2(oe.dtype==="float32"||oe.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),assert$2(ie===!1||ne===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let ae=oe,ce=!1;oe.rank===3&&(ce=!0,ae=reshape$2(oe,[1,oe.shape[0],oe.shape[1],oe.shape[2]]));const le={images:ae},ue={alignCorners:ne,halfPixelCenters:ie,size:ee},he=ENGINE.runKernel(ResizeNearestNeighbor,le,ue);return ce?reshape$2(he,[he.shape[1],he.shape[2],he.shape[3]]):he}const resizeNearestNeighbor$2=op({resizeNearestNeighbor_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bandPart_(re,ee,ne){assert$2(ee%1===0,()=>`bandPart(): numLower must be an integer, got ${ee}.`),assert$2(ne%1===0,()=>`bandPart(): numUpper must be an integer, got ${ne}.`);const ie=convertToTensor(re,"a","bandPart");assert$2(ie.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${ie.rank}.`);const oe=ie.shape,[ae,ce]=ie.shape.slice(-2);if(!(ee<=ae))throw new Error(`bandPart(): numLower (${ee}) must not be greater than the number of rows (${ae}).`);if(!(ne<=ce))throw new Error(`bandPart(): numUpper (${ne}) must not be greater than the number of columns (${ce}).`);ee<0&&(ee=ae),ne<0&&(ne=ce);const le=reshape$2(range$4(0,ae,1,"int32"),[-1,1]),ue=range$4(0,ce,1,"int32"),he=sub$2(le,ue),fe=logicalAnd$2(lessEqual$2(he,scalar(+ee,"int32")),greaterEqual$2(he,scalar(-ne,"int32"))),me=zeros$1([ae,ce],ie.dtype);return reshape$2(stack$1(unstack(reshape$2(ie,[-1,ae,ce])).map(ge=>where(fe,ge,me))),oe)}const bandPart=op({bandPart_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gramSchmidt_(re){let ee;if(Array.isArray(re)){ee=!1,assert$2(re!=null&&re.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const oe=re[0].shape[0];for(let ae=1;ae<re.length;++ae)assert$2(re[ae].shape[0]===oe,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${re[ae].shape[0]} vs. ${oe})`)}else ee=!0,re=split(re,re.shape[0],0).map(oe=>squeeze(oe,[0]));assert$2(re.length<=re[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${re.length}) exceeds number of dimensions (${re[0].shape[0]}).`);const ne=[],ie=re;for(let oe=0;oe<re.length;++oe)ne.push(ENGINE.tidy(()=>{let ae=ie[oe];if(oe>0)for(let ce=0;ce<oe;++ce){const le=mul(sum$2(mul(ne[ce],ae)),ne[ce]);ae=sub$2(ae,le)}return div$1(ae,norm(ae,"euclidean"))}));return ee?stack$1(ne,0):ne}const gramSchmidt=op({gramSchmidt_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qr_(re,ee=!1){if(assert$2(re.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${re.rank}`),re.rank===2)return qr2d(re,ee);{const ne=re.shape.slice(0,re.shape.length-2).reduce((ue,he)=>ue*he),ie=unstack(reshape$2(re,[ne,re.shape[re.shape.length-2],re.shape[re.shape.length-1]]),0),oe=[],ae=[];ie.forEach(ue=>{const[he,fe]=qr2d(ue,ee);oe.push(he),ae.push(fe)});const ce=reshape$2(stack$1(oe,0),re.shape),le=reshape$2(stack$1(ae,0),re.shape);return[ce,le]}}function qr2d(re,ee=!1){return ENGINE.tidy(()=>{assert$2(re.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${re.shape.length}D Tensor.`);const ne=re.shape[0],ie=re.shape[1];let oe=eye(ne),ae=clone$1(re);const ce=tensor2d([[1]],[1,1]);let le=clone$1(ce);const ue=ne>=ie?ie:ne;for(let he=0;he<ue;++he){const fe=ae,me=le,ge=oe;[le,ae,oe]=ENGINE.tidy(()=>{const ve=slice$4(ae,[he,he],[ne-he,1]),ye=norm(ve),be=slice$4(ae,[he,he],[1,1]),Ce=where(greater$2(be,0),tensor2d([[-1]]),tensor2d([[1]])),Se=sub$2(be,mul(Ce,ye)),$e=div$1(ve,Se);$e.shape[0]===1?le=clone$1(ce):le=concat$2([ce,slice$4($e,[1,0],[$e.shape[0]-1,$e.shape[1]])],0);const Te=neg$2(div$1(matMul$1(Ce,Se),ye)),Ne=slice$4(ae,[he,0],[ne-he,ie]),Ie=mul(Te,le),ke=transpose$2(le);if(he===0)ae=sub$2(Ne,matMul$1(Ie,matMul$1(ke,Ne)));else{const Be=sub$2(Ne,matMul$1(Ie,matMul$1(ke,Ne)));ae=concat$2([slice$4(ae,[0,0],[he,ie]),Be],0)}const De=transpose$2(Ie),Oe=slice$4(oe,[0,he],[ne,oe.shape[1]-he]);if(he===0)oe=sub$2(Oe,matMul$1(matMul$1(Oe,le),De));else{const Be=sub$2(Oe,matMul$1(matMul$1(Oe,le),De));oe=concat$2([slice$4(oe,[0,0],[ne,he]),Be],1)}return[le,ae,oe]}),dispose([fe,me,ge])}return!ee&&ne>ie&&(oe=slice$4(oe,[0,0],[ne,ie]),ae=slice$4(ae,[0,0],[ie,ie])),[oe,ae]})}const qr=op({qr_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const linalg={bandPart,gramSchmidt,qr};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Optimizer extends Serializable{minimize(ee,ne=!1,ie){const{value:oe,grads:ae}=this.computeGradients(ee,ie);if(ie!=null){const ce=ie.map(le=>({name:le.name,tensor:ae[le.name]}));this.applyGradients(ce)}else this.applyGradients(ae);return dispose(ae),ne?oe:(oe.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(ee,ne){return variableGrads(ee,ne)}dispose(){this.iterations_!=null&&dispose(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:scalar(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(ee){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(ee){return this.iterations_=(await ee[0].tensor.data())[0],ee.slice(1)}}Object.defineProperty(Optimizer,Symbol.hasInstance,{value:re=>re.minimize!=null&&re.computeGradients!=null&&re.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdadeltaOptimizer extends Optimizer{constructor(ee,ne,ie=null){super(),this.learningRate=ee,this.rho=ne,this.epsilon=ie,this.accumulatedGrads=[],this.accumulatedUpdates=[],ie==null&&(this.epsilon=ENGINE.backend.epsilon())}applyGradients(ee){(Array.isArray(ee)?ee.map(ie=>ie.name):Object.keys(ee)).forEach((ie,oe)=>{const ae=ENGINE.registeredVariables[ie],ce=!1;this.accumulatedGrads[oe]==null&&(this.accumulatedGrads[oe]={originalName:`${ie}/accum_grad`,variable:tidy(()=>zerosLike$2(ae).variable(ce))}),this.accumulatedUpdates[oe]==null&&(this.accumulatedUpdates[oe]={originalName:`${ie}/accum_var`,variable:tidy(()=>zerosLike$2(ae).variable(ce))});const le=Array.isArray(ee)?ee[oe].tensor:ee[ie];if(le==null)return;const ue=this.accumulatedGrads[oe].variable,he=this.accumulatedUpdates[oe].variable;tidy(()=>{const fe=add$1(mul(ue,this.rho),mul(square$3(le),1-this.rho)),me=mul(div$1(sqrt$2(add$1(he,this.epsilon)),sqrt$2(add$1(ue,this.epsilon))),le),ge=add$1(mul(he,this.rho),mul(square$3(me),1-this.rho));ue.assign(fe),he.assign(ge);const ve=add$1(mul(me,-this.learningRate),ae);ae.assign(ve)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(dispose(this.accumulatedGrads.map(ee=>ee.variable)),dispose(this.accumulatedUpdates.map(ee=>ee.variable)))}async getWeights(){const ee=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(ee.map(ne=>({name:ne.originalName,tensor:ne.variable})))}async setWeights(ee){ee=await this.extractIterations(ee);const ne=ee.length/2,ie=!1;this.accumulatedGrads=ee.slice(0,ne).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(ie)})),this.accumulatedUpdates=ee.slice(ne,ne*2).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(ie)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(ee,ne){return new ee(ne.learningRate,ne.rho,ne.epsilon)}}AdadeltaOptimizer.className="Adadelta";registerClass(AdadeltaOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdagradOptimizer extends Optimizer{constructor(ee,ne=.1){super(),this.learningRate=ee,this.initialAccumulatorValue=ne,this.accumulatedGrads=[]}applyGradients(ee){(Array.isArray(ee)?ee.map(ie=>ie.name):Object.keys(ee)).forEach((ie,oe)=>{const ae=ENGINE.registeredVariables[ie];this.accumulatedGrads[oe]==null&&(this.accumulatedGrads[oe]={originalName:`${ie}/accumulator`,variable:tidy(()=>fill$3(ae.shape,this.initialAccumulatorValue).variable(!1))});const ce=Array.isArray(ee)?ee[oe].tensor:ee[ie];if(ce==null)return;const le=this.accumulatedGrads[oe].variable;tidy(()=>{const ue=add$1(le,square$3(ce));le.assign(ue);const he=add$1(mul(div$1(ce,sqrt$2(add$1(ue,ENGINE.backend.epsilon()))),-this.learningRate),ae);ae.assign(he)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&dispose(this.accumulatedGrads.map(ee=>ee.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(ee=>({name:ee.originalName,tensor:ee.variable})))}async setWeights(ee){ee=await this.extractIterations(ee);const ne=!1;this.accumulatedGrads=ee.map(ie=>({originalName:ie.name,variable:ie.tensor.variable(ne)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(ee,ne){return new ee(ne.learningRate,ne.initialAccumulatorValue)}}AdagradOptimizer.className="Adagrad";registerClass(AdagradOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdamOptimizer extends Optimizer{constructor(ee,ne,ie,oe=null){super(),this.learningRate=ee,this.beta1=ne,this.beta2=ie,this.epsilon=oe,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],tidy(()=>{this.accBeta1=scalar(ne).variable(),this.accBeta2=scalar(ie).variable()}),oe==null&&(this.epsilon=ENGINE.backend.epsilon())}applyGradients(ee){const ne=Array.isArray(ee)?ee.map(ie=>ie.name):Object.keys(ee);tidy(()=>{const ie=sub$2(1,this.accBeta1),oe=sub$2(1,this.accBeta2);ne.forEach((ae,ce)=>{const le=ENGINE.registeredVariables[ae],ue=!1;this.accumulatedFirstMoment[ce]==null&&(this.accumulatedFirstMoment[ce]={originalName:`${ae}/m`,variable:tidy(()=>zerosLike$2(le).variable(ue))}),this.accumulatedSecondMoment[ce]==null&&(this.accumulatedSecondMoment[ce]={originalName:`${ae}/v`,variable:tidy(()=>zerosLike$2(le).variable(ue))});const he=Array.isArray(ee)?ee[ce].tensor:ee[ae];if(he==null)return;const fe=this.accumulatedFirstMoment[ce].variable,me=this.accumulatedSecondMoment[ce].variable,ge=add$1(mul(fe,this.beta1),mul(he,1-this.beta1)),ve=add$1(mul(me,this.beta2),mul(square$3(he),1-this.beta2)),ye=div$1(ge,ie),be=div$1(ve,oe);fe.assign(ge),me.assign(ve);const Ce=add$1(mul(div$1(ye,add$1(sqrt$2(be),this.epsilon)),-this.learningRate),le);le.assign(Ce)}),this.accBeta1.assign(mul(this.accBeta1,this.beta1)),this.accBeta2.assign(mul(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&dispose(this.accumulatedFirstMoment.map(ee=>ee.variable)),this.accumulatedSecondMoment!=null&&dispose(this.accumulatedSecondMoment.map(ee=>ee.variable))}async getWeights(){const ee=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(ee.map(ne=>({name:ne.originalName,tensor:ne.variable})))}async setWeights(ee){ee=await this.extractIterations(ee),tidy(()=>{this.accBeta1.assign(pow$2(this.beta1,this.iterations_+1)),this.accBeta2.assign(pow$2(this.beta2,this.iterations_+1))});const ne=ee.length/2,ie=!1;this.accumulatedFirstMoment=ee.slice(0,ne).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(ie)})),this.accumulatedSecondMoment=ee.slice(ne,ne*2).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(ie)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(ee,ne){return new ee(ne.learningRate,ne.beta1,ne.beta2,ne.epsilon)}}AdamOptimizer.className="Adam";registerClass(AdamOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AdamaxOptimizer extends Optimizer{constructor(ee,ne,ie,oe=null,ae=0){super(),this.learningRate=ee,this.beta1=ne,this.beta2=ie,this.epsilon=oe,this.decay=ae,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],tidy(()=>{this.iteration=scalar(0).variable(),this.accBeta1=scalar(ne).variable()}),oe==null&&(this.epsilon=ENGINE.backend.epsilon())}applyGradients(ee){const ne=Array.isArray(ee)?ee.map(ie=>ie.name):Object.keys(ee);tidy(()=>{const ie=sub$2(1,this.accBeta1),oe=div$1(-this.learningRate,add$1(mul(this.iteration,this.decay),1));ne.forEach((ae,ce)=>{const le=ENGINE.registeredVariables[ae],ue=!1;this.accumulatedFirstMoment[ce]==null&&(this.accumulatedFirstMoment[ce]={originalName:`${ae}/m`,variable:zerosLike$2(le).variable(ue)}),this.accumulatedWeightedInfNorm[ce]==null&&(this.accumulatedWeightedInfNorm[ce]={originalName:`${ae}/v`,variable:zerosLike$2(le).variable(ue)});const he=Array.isArray(ee)?ee[ce].tensor:ee[ae];if(he==null)return;const fe=this.accumulatedFirstMoment[ce].variable,me=this.accumulatedWeightedInfNorm[ce].variable,ge=add$1(mul(fe,this.beta1),mul(he,1-this.beta1)),ve=mul(me,this.beta2),ye=abs$3(he),be=maximum$2(ve,ye);fe.assign(ge),me.assign(be);const Ce=add$1(mul(div$1(oe,ie),div$1(ge,add$1(be,this.epsilon))),le);le.assign(Ce)}),this.iteration.assign(add$1(this.iteration,1)),this.accBeta1.assign(mul(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&dispose(this.accumulatedFirstMoment.map(ee=>ee.variable)),this.accumulatedWeightedInfNorm!=null&&dispose(this.accumulatedWeightedInfNorm.map(ee=>ee.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(ee){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(ee,ne){return new ee(ne.learningRate,ne.beta1,ne.beta2,ne.epsilon,ne.decay)}}AdamaxOptimizer.className="Adamax";registerClass(AdamaxOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SGDOptimizer extends Optimizer{constructor(ee){super(),this.learningRate=ee,this.setLearningRate(ee)}applyGradients(ee){(Array.isArray(ee)?ee.map(ie=>ie.name):Object.keys(ee)).forEach((ie,oe)=>{const ae=Array.isArray(ee)?ee[oe].tensor:ee[ie];if(ae==null)return;const ce=ENGINE.registeredVariables[ie];tidy(()=>{const le=add$1(mul(this.c,ae),ce);ce.assign(le)})}),this.incrementIterations()}setLearningRate(ee){this.learningRate=ee,this.c!=null&&this.c.dispose(),this.c=keep(scalar(-ee))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(ee){if(ee=await this.extractIterations(ee),ee.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(ee,ne){return new ee(ne.learningRate)}}SGDOptimizer.className="SGD";registerClass(SGDOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MomentumOptimizer extends SGDOptimizer{constructor(ee,ne,ie=!1){super(ee),this.learningRate=ee,this.momentum=ne,this.useNesterov=ie,this.accumulations=[],this.m=scalar(this.momentum)}applyGradients(ee){(Array.isArray(ee)?ee.map(ie=>ie.name):Object.keys(ee)).forEach((ie,oe)=>{const ae=ENGINE.registeredVariables[ie];this.accumulations[oe]==null&&(this.accumulations[oe]={originalName:`${ie}/momentum`,variable:tidy(()=>zerosLike$2(ae).variable(!1))});const ce=this.accumulations[oe].variable,le=Array.isArray(ee)?ee[oe].tensor:ee[ie];le!=null&&tidy(()=>{let ue;const he=add$1(mul(this.m,ce),le);this.useNesterov?ue=add$1(mul(this.c,add$1(le,mul(he,this.m))),ae):ue=add$1(mul(this.c,he),ae),ce.assign(he),ae.assign(ue)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&dispose(this.accumulations.map(ee=>ee.variable))}setMomentum(ee){this.momentum=ee}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(ee=>({name:ee.originalName,tensor:ee.variable})))}async setWeights(ee){ee=await this.extractIterations(ee);const ne=!1;this.accumulations=ee.map(ie=>({originalName:ie.name,variable:ie.tensor.variable(ne)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(ee,ne){return new ee(ne.learningRate,ne.momentum,ne.useNesterov)}}MomentumOptimizer.className="Momentum";registerClass(MomentumOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RMSPropOptimizer extends Optimizer{constructor(ee,ne=.9,ie=0,oe=null,ae=!1){if(super(),this.learningRate=ee,this.decay=ne,this.momentum=ie,this.epsilon=oe,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=ae,oe==null&&(this.epsilon=ENGINE.backend.epsilon()),ee==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(ee){(Array.isArray(ee)?ee.map(ie=>ie.name):Object.keys(ee)).forEach((ie,oe)=>{const ae=ENGINE.registeredVariables[ie],ce=!1;this.accumulatedMeanSquares[oe]==null&&(this.accumulatedMeanSquares[oe]={originalName:`${ie}/rms`,variable:tidy(()=>zerosLike$2(ae).variable(ce))}),this.accumulatedMoments[oe]==null&&(this.accumulatedMoments[oe]={originalName:`${ie}/momentum`,variable:tidy(()=>zerosLike$2(ae).variable(ce))}),this.accumulatedMeanGrads[oe]==null&&this.centered&&(this.accumulatedMeanGrads[oe]={originalName:`${ie}/mg`,variable:tidy(()=>zerosLike$2(ae).variable(ce))});const le=Array.isArray(ee)?ee[oe].tensor:ee[ie];if(le==null)return;const ue=this.accumulatedMeanSquares[oe].variable,he=this.accumulatedMoments[oe].variable;tidy(()=>{const fe=add$1(mul(ue,this.decay),mul(square$3(le),1-this.decay));if(this.centered){const me=this.accumulatedMeanGrads[oe].variable,ge=add$1(mul(me,this.decay),mul(le,1-this.decay)),ve=div$1(mul(le,this.learningRate),sqrt$2(sub$2(fe,add$1(square$3(ge),this.epsilon)))),ye=add$1(mul(he,this.momentum),ve);ue.assign(fe),me.assign(ge),he.assign(ye);const be=sub$2(ae,ye);ae.assign(be)}else{const me=add$1(mul(ue,this.decay),mul(square$3(le),1-this.decay)),ge=add$1(mul(he,this.momentum),div$1(mul(le,this.learningRate),sqrt$2(add$1(me,this.epsilon))));ue.assign(me),he.assign(ge);const ve=sub$2(ae,ge);ae.assign(ve)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&dispose(this.accumulatedMeanSquares.map(ee=>ee.variable)),this.accumulatedMeanGrads!=null&&this.centered&&dispose(this.accumulatedMeanGrads.map(ee=>ee.variable)),this.accumulatedMoments!=null&&dispose(this.accumulatedMoments.map(ee=>ee.variable))}async getWeights(){const ee=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&ee.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(ee.map(ne=>({name:ne.originalName,tensor:ne.variable})))}async setWeights(ee){ee=await this.extractIterations(ee);const ne=this.centered?ee.length/3:ee.length/2,ie=!1;this.accumulatedMeanSquares=ee.slice(0,ne).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(ie)})),this.accumulatedMoments=ee.slice(ne,ne*2).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(ie)})),this.centered&&(this.accumulatedMeanGrads=ee.slice(ne*2,ne*3).map(oe=>({originalName:oe.name,variable:oe.tensor.variable(ie)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(ee,ne){return new ee(ne.learningRate,ne.decay,ne.momentum,ne.epsilon,ne.centered)}}RMSPropOptimizer.className="RMSProp";registerClass(RMSPropOptimizer);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OptimizerConstructors{static sgd(ee){return new SGDOptimizer(ee)}static momentum(ee,ne,ie=!1){return new MomentumOptimizer(ee,ne,ie)}static rmsprop(ee,ne=.9,ie=0,oe=null,ae=!1){return new RMSPropOptimizer(ee,ne,ie,oe,ae)}static adam(ee=.001,ne=.9,ie=.999,oe=null){return new AdamOptimizer(ee,ne,ie,oe)}static adadelta(ee=.001,ne=.95,ie=null){return new AdadeltaOptimizer(ee,ne,ie)}static adamax(ee=.002,ne=.9,ie=.999,oe=null,ae=0){return new AdamaxOptimizer(ee,ne,ie,oe,ae)}static adagrad(ee,ne=.1){return new AdagradOptimizer(ee,ne)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const train={sgd:OptimizerConstructors.sgd,momentum:OptimizerConstructors.momentum,adadelta:OptimizerConstructors.adadelta,adagrad:OptimizerConstructors.adagrad,rmsprop:OptimizerConstructors.rmsprop,adamax:OptimizerConstructors.adamax,adam:OptimizerConstructors.adam};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const delayCallback=(()=>typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:re=>re())();function nextFrame(){return new Promise(re=>delayCallback(()=>re()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function assertParamsConsistent(re,ee){const ne=re[0].length;re.forEach((oe,ae)=>{assert$2(oe.length===ne,()=>`Error in concat${ne}D: rank of tensors[${ae}] must be the same as the rank of the rest (${ne})`)}),assert$2(ee>=0&&ee<ne,()=>`Error in concat${ne}D: axis must be between 0 and ${ne-1}.`);const ie=re[0];re.forEach((oe,ae)=>{for(let ce=0;ce<ne;ce++)assert$2(ce===ee||oe[ce]===ie[ce],()=>`Error in concat${ne}D: Shape of tensors[${ae}] (${oe}) does not match the shape of the rest (${ie}) along the non-concatenated axis ${ae}.`)})}function computeOutShape$1(re,ee){const ne=re[0].slice();for(let ie=1;ie<re.length;ie++)ne[ee]+=re[ie][ee];return ne}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PARALLELIZE_THRESHOLD=30;function computeOptimalWindowSize(re){return re<=PARALLELIZE_THRESHOLD?re:nearestDivisor(re,Math.floor(Math.sqrt(re)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getImageCenter(re,ee,ne){const ie=ne*(typeof re=="number"?re:re[0]),oe=ee*(typeof re=="number"?re:re[1]);return[ie,oe]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getReshaped(re,ee,ne,ie=!0){let oe=[];if(ie)oe=oe.concat(ee.slice(0)),oe.push(re[0]/ne),oe=oe.concat(re.slice(1));else{oe=oe.concat(re[0]);const ae=ee.length;for(let ce=0;ce<ae;++ce)oe=oe.concat([re[ce+1]/ee[ce],ee[ce]]);oe=oe.concat(re.slice(ae+1))}return oe}function getPermuted(re,ee,ne=!0){const ie=[];if(ne){ie.push(ee);for(let oe=ee+1;oe<re;++oe)oe<=2*ee?(ie.push(oe),ie.push(oe-(ee+1))):ie.push(oe)}else{const oe=[],ae=[];for(let ce=1;ce<re;++ce)ce>=ee*2+1||ce%2===1?ae.push(ce):oe.push(ce);ie.push(...oe),ie.push(0),ie.push(...ae)}return ie}function getReshapedPermuted(re,ee,ne,ie=!0){const oe=[];ie?oe.push(re[0]/ne):oe.push(re[0]*ne);for(let ae=1;ae<re.length;++ae)ae<=ee.length?ie?oe.push(ee[ae-1]*re[ae]):oe.push(re[ae]/ee[ae-1]):oe.push(re[ae]);return oe}function getSliceBeginCoords(re,ee){const ne=[0];for(let ie=0;ie<ee;++ie)ne.push(re[ie][0]);return ne}function getSliceSize(re,ee,ne){const ie=re.slice(0,1);for(let oe=0;oe<ne;++oe)ie.push(re[oe+1]-ee[oe][0]-ee[oe][1]);return ie}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SELU_SCALEALPHA=1.7580993408473768,SELU_SCALE=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ERF_P=.3275911,ERF_A1=.254829592,ERF_A2=-.284496736,ERF_A3=1.421413741,ERF_A4=-1.453152027,ERF_A5=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function warn$1(...re){env().getBool("IS_TEST")||console.warn(...re)}function log$4(...re){env().getBool("IS_TEST")||console.log(...re)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mergeRealAndImagArrays(re,ee){if(re.length!==ee.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${re.length}, imag: ${ee.length}.`);const ne=new Float32Array(re.length*2);for(let ie=0;ie<ne.length;ie+=2)ne[ie]=re[ie/2],ne[ie+1]=ee[ie/2];return ne}function splitRealAndImagArrays(re){const ee=new Float32Array(re.length/2),ne=new Float32Array(re.length/2);for(let ie=0;ie<re.length;ie+=2)ee[ie/2]=re[ie],ne[ie/2]=re[ie+1];return{real:ee,imag:ne}}function complexWithEvenIndex(re){const ee=Math.ceil(re.length/4),ne=new Float32Array(ee),ie=new Float32Array(ee);for(let oe=0;oe<re.length;oe+=4)ne[Math.floor(oe/4)]=re[oe],ie[Math.floor(oe/4)]=re[oe+1];return{real:ne,imag:ie}}function complexWithOddIndex(re){const ee=Math.floor(re.length/4),ne=new Float32Array(ee),ie=new Float32Array(ee);for(let oe=2;oe<re.length;oe+=4)ne[Math.floor(oe/4)]=re[oe],ie[Math.floor(oe/4)]=re[oe+1];return{real:ne,imag:ie}}function getComplexWithIndex(re,ee){const ne=re[ee*2],ie=re[ee*2+1];return{real:ne,imag:ie}}function assignToTypedArray(re,ee,ne,ie){re[ie*2]=ee,re[ie*2+1]=ne}function exponents(re,ee){const ne=new Float32Array(re/2),ie=new Float32Array(re/2);for(let oe=0;oe<Math.ceil(re/2);oe++){const ae=(ee?2:-2)*Math.PI*(oe/re);ne[oe]=Math.cos(ae),ie[oe]=Math.sin(ae)}return{real:ne,imag:ie}}function exponent(re,ee,ne){const ie=(ne?2:-2)*Math.PI*(re/ee),oe=Math.cos(ie),ae=Math.sin(ie);return{real:oe,imag:ae}}function prepareSplitSize(re,ee,ne=0){let ie=[];if(typeof ee=="number")assert$2(re.shape[ne]%ee===0,()=>"Number of splits must evenly divide the axis."),ie=new Array(ee).fill(re.shape[ne]/ee);else{const oe=ee.reduce((ce,le)=>(le===-1&&(ce+=1),ce),0);assert$2(oe<=1,()=>"There should be only one negative value in split array.");const ae=ee.indexOf(-1);if(ae!==-1){const ce=ee.reduce((le,ue)=>ue>0?le+ue:le);ee[ae]=re.shape[ne]-ce}assert$2(re.shape[ne]===ee.reduce((ce,le)=>ce+le),()=>"The sum of sizes must match the size of the axis dimension."),ie=ee}return ie}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function segOpComputeOptimalWindowSize(re,ee){let ne=!1,ie;for(re<=PARALLELIZE_THRESHOLD?(ie=re,ne=!0):ie=nearestDivisor(re,Math.floor(Math.sqrt(re)));!ne;)ie>ee||ie===re?ne=!0:ie=nearestDivisor(re,ie+1);return ie}function computeOutShape(re,ee,ne){const ie=[],oe=re.length;for(let ae=0;ae<oe;ae++)ae!==ee?ie.push(re[ae]):ie.push(ne);return ie}function collectGatherOpShapeInfo(re,ee,ne,ie){const oe=ee.shape.length,ae=re.shape.length;if(ie!==0&&(ie<-oe||ie>oe))throw new Error(`Expect batchDims in the range of [-${oe}, ${oe}], but got ${ie}`);if(ie<0&&(ie+=oe),ie>ae)throw new Error(`batchDims (${ie}) must be less than rank(x) (
    ${ae}).`);if(ne<ie)throw new Error(`batchDims (${ie}) must be less than or equal to axis (${ne}).`);for(let me=0;me<ie;++me)if(re.shape[me]!==ee.shape[me])throw new Error(`x.shape[${me}]: ${re.shape[me]} should be equal to indices.shape[${me}]: ${ee.shape[me]}.`);const ce=re.shape[ne],le=[];let ue=1,he=1,fe=1;for(let me=0;me<ie;++me)le.push(re.shape[me]),ue*=re.shape[me];for(let me=ie;me<ne;me++)le.push(re.shape[me]),he*=re.shape[me];for(let me=ie;me<oe;me++)le.push(ee.shape[me]);for(let me=ne+1;me<ae;me++)le.push(re.shape[me]),fe*=re.shape[me];return{batchSize:ue,sliceSize:fe,outerSize:he,dimSize:ce,outputShape:le}}const segment_util=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo,computeOutShape,segOpComputeOptimalWindowSize},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function castTensor(re,ee,ne){if(ee==="complex64"){if(re.dtype==="complex64")return re.clone();const ie=zeros$1(re.shape),oe=cast$3(re,"float32"),ae=ne.complex(oe,ie);return ie.dispose(),oe.dispose(),ae}if(!hasEncodingLoss(re.dtype,ee))return ENGINE.makeTensorFromDataId(re.dataId,re.shape,ee);if(re.dtype==="complex64"){const ie=ne.real(re),oe=cast$3(ie,ee);return ie.dispose(),oe}if(ee==="int32")return ne.int(re);if(ee==="bool"){const ie=scalar(0,re.dtype),oe=ne.notEqual(re,ie);return ie.dispose(),oe}else throw new Error(`Error in Cast: failed to cast ${re.dtype} to ${ee}`)}function reshapeTensor(re,ee){return ENGINE.makeTensorFromDataId(re.dataId,ee,re.dtype)}function fromUint8ToStringArray(re){try{return re.map(ee=>decodeString(ee))}catch(ee){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${ee}`)}}function fromStringArrayToUint8(re){return re.map(ee=>encodeString(ee))}const backend_util=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1,ERF_A2,ERF_A3,ERF_A4,ERF_A5,ERF_P,PARALLELIZE_THRESHOLD,SELU_SCALE,SELU_SCALEALPHA,applyActivation:applyActivation$1,assertAndGetBroadcastShape,assertAxesAreInnerMostDims,assertParamsConsistent,assignToTypedArray,axesAreInnerMostDims,calculateShapes,castTensor,combineLocations,complexWithEvenIndex,complexWithOddIndex,computeConv2DInfo,computeConv3DInfo,computeDefaultPad,computeDilation2DInfo,computeOptimalWindowSize,computeOutAndReduceShapes,computeOutShape:computeOutShape$1,computePool2DInfo,computePool3DInfo,convertConv2DDataFormat,eitherStridesOrDilationsAreOne,expandShapeToKeepDim,exponent,exponents,fromStringArrayToUint8,fromUint8ToStringArray,getAxesPermutation,getBroadcastDims:getBroadcastDims$1,getComplexWithIndex,getFusedBiasGradient,getFusedDyActivation,getImageCenter,getInnerMostAxes,getPermuted,getReductionAxes,getReshaped,getReshapedPermuted,getSliceBeginCoords,getSliceSize,getUndoAxesPermutation,log:log$4,mergeRealAndImagArrays,prepareAndValidate,prepareSplitSize,reshapeTensor,segment_util,shouldFuse,slice_util,splitRealAndImagArrays,tupleValuesAreOne,upcastType,validateInput,validateUpdateShape,warn:warn$1},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const absGradConfig={kernelName:Abs$1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,step$2(cast$3(ne,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acosGradConfig={kernelName:Acos,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>{const ie=square$3(cast$3(ne,"float32")),oe=sqrt$2(sub$2(scalar(1),ie));return neg$2(div$1(re,oe))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acoshGradConfig={kernelName:Acosh,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>{const ie=sqrt$2(sub$2(square$3(cast$3(ne,"float32")),1));return div$1(re,ie)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const addGradConfig={kernelName:Add$2,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ie]=ee,oe=assertAndGetBroadcastShape(ne.shape,ie.shape);return{a:()=>{let le=re;const ue=getReductionAxes(ne.shape,oe);return ue.length>0&&(le=sum$2(le,ue)),reshape$2(le,ne.shape)},b:()=>{let le=re;const ue=getReductionAxes(ie.shape,oe);return ue.length>0&&(le=sum$2(le,ue)),reshape$2(le,ie.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const addNGradConfig={kernelName:AddN,saveAllInputs:!0,gradFunc:(re,ee)=>{const ne={};return ee.forEach((ie,oe)=>{ne[oe]=()=>re.clone()}),ne}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const argMaxGradConfig={kernelName:ArgMax,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>zerosLike$2(ne)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const argMinGradConfig={kernelName:ArgMin,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>zerosLike$2(ne)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asinGradConfig={kernelName:Asin,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,sqrt$2(sub$2(scalar(1),square$3(cast$3(ne,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asinhGradConfig={kernelName:Asinh,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>{const ie=sqrt$2(add$1(scalar(1),square$3(cast$3(ne,"float32"))));return div$1(re,ie)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atan2GradConfig={kernelName:Atan2,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ie]=ee,oe=assertAndGetBroadcastShape(ne.shape,ie.shape);return{a:()=>{const le=add$1(square$3(ne),square$3(ie));let ue=mul(re,div$1(ie,le));const he=getReductionAxes(ne.shape,oe);return he.length>0&&(ue=sum$2(ue,he)),reshape$2(ue,ne.shape)},b:()=>{const le=add$1(square$3(ne),square$3(ie));let ue=neg$2(mul(re,div$1(ne,le)));const he=getReductionAxes(ie.shape,oe);return he.length>0&&(ue=sum$2(ue,he)),reshape$2(ue,ie.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atanGradConfig={kernelName:Atan,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,add$1(square$3(cast$3(ne,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atanhGradConfig={kernelName:Atanh,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,sub$2(scalar(1),square$3(cast$3(ne,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3dGrad_(re,ee,ne,ie,oe=[1,1,1],ae,ce){const le=convertToTensor(re,"dy","avgPool3dGrad"),ue=convertToTensor(ee,"input","avgPool3dGrad");let he=le,fe=ue,me=!1;ue.rank===4&&(me=!0,he=reshape$2(le,[1,le.shape[0],le.shape[1],le.shape[2],le.shape[3]]),fe=reshape$2(ue,[1,ue.shape[0],ue.shape[1],ue.shape[2],ue.shape[3]])),assert$2(he.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${he.rank}.`),assert$2(fe.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${fe.rank}.`),assert$2(eitherStridesOrDilationsAreOne(ie,oe),()=>`Error in avgPool3dGrad: Either strides or dilations must be 1. Got strides ${ie} and dilations '${oe}'`),ce!=null&&assert$2(isInt(ae),()=>`Error in avgPool3dGrad: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${ae}.`);const ge={dy:he,input:fe},ve={filterSize:ne,strides:ie,dilations:oe,pad:ae,dimRoundingMode:ce},ye=ENGINE.runKernel(AvgPool3DGrad,ge,ve);return me?reshape$2(ye,[ye.shape[1],ye.shape[2],ye.shape[3],ye.shape[4]]):ye}const avgPool3dGrad=op({avgPool3dGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const avgPool3DGradConfig$1={kernelName:AvgPool3D,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ie]=ee,{filterSize:oe,strides:ae,dilations:ce,pad:le,dimRoundingMode:ue}=ne,he=ce??[1,1,1];return{x:()=>avgPool3dGrad(re,ie,oe,ae,he,le,ue)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPoolGrad_(re,ee,ne,ie,oe){const ae=convertToTensor(re,"dy","avgPoolGrad"),ce=convertToTensor(ee,"input","avgPoolGrad");assert$2(ce.rank===ae.rank,()=>`Rank of input (${ce.rank}) does not match rank of dy (${ae.rank})`);let le=ce,ue=ae,he=!1;ce.rank===3&&(he=!0,le=reshape$2(ce,[1,ce.shape[0],ce.shape[1],ce.shape[2]]),ue=reshape$2(ae,[1,ae.shape[0],ae.shape[1],ae.shape[2]])),assert$2(ue.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${ue.rank}.`),assert$2(le.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${le.rank}.`);const fe={dy:ue,input:le},me={filterSize:ne,strides:ie,pad:oe},ge=ENGINE.runKernel(AvgPoolGrad,fe,me);return he?reshape$2(ge,[ge.shape[1],ge.shape[2],ge.shape[3]]):ge}const avgPoolGrad$2=op({avgPoolGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const avgPoolGradConfig$2={kernelName:AvgPool,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ie]=ee,{filterSize:oe,strides:ae,pad:ce}=ne;return{x:()=>avgPoolGrad$2(re,ie,oe,ae,ce)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchMatMulGradConfig={kernelName:BatchMatMul,inputsToSave:["a","b"],gradFunc:(re,ee,ne)=>{const[ie,oe]=ee,{transposeA:ae,transposeB:ce}=ne;return!ae&&!ce?{a:()=>matMul$1(re,oe,!1,!0),b:()=>matMul$1(ie,re,!0,!1)}:!ae&&ce?{a:()=>matMul$1(re,oe,!1,!1),b:()=>matMul$1(re,ie,!0,!1)}:ae&&!ce?{a:()=>matMul$1(oe,re,!1,!0),b:()=>matMul$1(ie,re,!1,!1)}:{a:()=>matMul$1(oe,re,!0,!0),b:()=>matMul$1(re,ie,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchToSpaceNDGradConfig={kernelName:BatchToSpaceND,gradFunc:(re,ee,ne)=>{const{blockShape:ie,crops:oe}=ne;return{x:()=>spaceToBatchND$2(re,ie,oe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const broadcastToGradConfig={kernelName:BroadcastTo,gradFunc:(re,ee,ne)=>{const ie=ne,oe=ie.inputShape,ae=ie.shape,ce=Array.from(ae);for(let ue=oe.length-1;ue>=0;ue--)if(oe[ue]===ae[ue])ce[ue]=1;else if(oe[ue]!==1)throw new Error(`broadcastTo(): [${oe}] cannot be broadcast to [${ae}].`);const le=[];for(let ue=0;ue<ce.length;ue++)ce[ue]>1&&le.push(ue);return{x:()=>sum$2(re,le,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const castGradConfig={kernelName:Cast,gradFunc:re=>({x:()=>re.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ceilGradConfig={kernelName:Ceil,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const clipByValueGradConfig={kernelName:ClipByValue,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ie]=ee,{clipValueMin:oe,clipValueMax:ae}=ne;return{x:()=>where(logicalAnd$2(greaterEqual$2(ie,oe),lessEqual$2(ie,ae)),re,zerosLike$2(re))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const complexAbsGradConfig={kernelName:ComplexAbs,inputsToSave:["x"],gradFunc:absGradConfig.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const concatGradConfig={kernelName:Concat,saveAllInputs:!0,gradFunc:(re,ee,ne)=>{const ie=ee.map(ue=>ue.shape),{axis:oe}=ne,ae=parseAxisParam(oe,ee[0].shape)[0],ce=ie.map(ue=>ue[ae]);return split(re,ce,ae).map(ue=>()=>ue)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const conv2DGradConfig={kernelName:Conv2D$1,inputsToSave:["x","filter"],gradFunc:(re,ee,ne)=>{const[ie,oe]=ee,{dilations:ae,strides:ce,pad:le,dataFormat:ue}=ne;return assert$2(tupleValuesAreOne(ae),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${ae}'`),{x:()=>conv2DBackpropInput$2(ie.shape,re,oe,ce,le,ue),filter:()=>conv2DBackpropFilter$2(ie,re,oe.shape,ce,le,ue)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const conv2DBackpropInputGradConfig={kernelName:Conv2DBackpropInput,inputsToSave:["dy","filter"],gradFunc:(re,ee,ne)=>{const[ie,oe]=ee,{strides:ae,pad:ce,dataFormat:le,dimRoundingMode:ue}=ne;return{dy:()=>conv2d$2(re,oe,ae,ce,le,1,ue),filter:()=>conv2DBackpropFilter$2(re,ie,oe.shape,ae,ce,le,ue)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropFilter_(re,ee,ne,ie,oe){let ae=re;re.rank===4&&(ae=reshape$2(re,[1,re.shape[0],re.shape[1],re.shape[2],re.shape[3]]));let ce=ee;ce.rank===4&&(ce=reshape$2(ee,[1,ee.shape[0],ee.shape[1],ee.shape[2],ee.shape[3]])),assert$2(ae.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${ae.shape}.`),assert$2(ce.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${ce.shape}.`),assert$2(ne.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${ne}.`),assert$2(ae.shape[4]===ne[3],()=>`Error in conv3dDerFilter: depth of input ${ae.shape[4]}) must match input depth in filter (${ne[3]}.`),assert$2(ce.shape[4]===ne[4],()=>`Error in conv3dDerFilter: depth of dy (${ce.shape[4]}) must match output depth for filter (${ne[4]}).`);const le={x:ae,dy:ce},ue={strides:ie,pad:oe,filterShape:ne};return ENGINE.runKernel(Conv3DBackpropFilterV2,le,ue)}const conv3DBackpropFilter=op({conv3DBackpropFilter_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const conv3DGradConfig={kernelName:Conv3D$1,inputsToSave:["x","filter"],gradFunc:(re,ee,ne)=>{const{dilations:ie,strides:oe,pad:ae}=ne;assert$2(tupleValuesAreOne(ie),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${ie}'`);const[ce,le]=ee;return{x:()=>conv3DBackpropInput$1(ce.shape,re,le,oe,ae),filter:()=>conv3DBackpropFilter(ce,re,le.shape,oe,ae)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cosGradConfig={kernelName:Cos,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(neg$2(sin$2(cast$3(ne,"float32"))),re)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const coshGradConfig={kernelName:Cosh,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(sinh$2(cast$3(ne,"float32")),re)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cumsumGradConfig={kernelName:Cumsum,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ie]=ee,{axis:oe,exclusive:ae,reverse:ce}=ne;return{x:()=>{const le=getAxesPermutation([oe],ie.rank);let ue=cumsum$2(re,oe,ae,!ce);return le!=null&&(ue=transpose$2(ue,le)),ue}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const depthwiseConv2dNativeGradConfig={kernelName:DepthwiseConv2dNative,inputsToSave:["x","filter"],gradFunc:(re,ee,ne)=>{const{dilations:ie,strides:oe,pad:ae,dimRoundingMode:ce}=ne,le=ie??[1,1];assert$2(tupleValuesAreOne(le),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${le}'`);const[ue,he]=ee;return assert$2(ue.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${ue.rank}.`),assert$2(he.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${he.rank}.`),assert$2(ue.shape[3]===he.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${ue.shape[3]}) must match the inChannels dimension in filter ${he.shape[2]}.`),assert$2(eitherStridesOrDilationsAreOne(oe,le),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${oe} and dilations '${le}'.`),ce!=null&&assert$2(isInt(ae),()=>`Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${ae}.`),{x:()=>depthwiseConv2dNativeBackpropInput$2(ue.shape,re,he,oe,ae,ie,ce),filter:()=>depthwiseConv2dNativeBackpropFilter$2(ue,re,he.shape,oe,ae,ie,ce)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dGradConfig={kernelName:Dilation2D,inputsToSave:["x","filter"],gradFunc:(re,ee,ne)=>{const[ie,oe]=ee,ae={x:ie,filter:oe,dy:re},ce={x:ie,filter:oe,dy:re};return{x:()=>ENGINE.runKernel(Dilation2DBackpropInput,ae,ne),filter:()=>ENGINE.runKernel(Dilation2DBackpropFilter,ce,ne)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eluGradConfig$2={kernelName:Elu$1,outputsToSave:[!0],gradFunc:(re,ee)=>{const[ne]=ee,ie={dy:re,y:ne};return{x:()=>ENGINE.runKernel(EluGrad,ie)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const erfGradConfig={kernelName:Erf,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee,ie=mul(exp$2(neg$2(square$3(ne))),2/Math.sqrt(Math.PI));return{x:()=>mul(re,ie)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expGradConfig={kernelName:Exp,outputsToSave:[!0],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,ne)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expandDimsGradConfig={kernelName:ExpandDims,inputsToSave:["input"],gradFunc:(re,ee)=>{const[ne]=ee;return{input:()=>reshape$2(re,ne.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expm1GradConfig={kernelName:Expm1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,exp$2(ne))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorGradConfig={kernelName:Floor,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorDivGradConfig={kernelName:FloorDiv,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ie]=ee,oe=assertAndGetBroadcastShape(ne.shape,ie.shape);return{a:()=>{const le=div$1(re,cast$3(ie,"float32")),ue=getReductionAxes(ne.shape,oe);return ue.length>0?reshape$2(sum$2(le,ue),ne.shape):le},b:()=>{let le=mul(re,cast$3(ne,"float32"));const ue=getReductionAxes(ie.shape,oe);ue.length>0&&(le=reshape$2(sum$2(le,ue),ie.shape));const he=square$3(ie);return neg$2(div$1(le,cast$3(he,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fusedBatchNormGradConfig={kernelName:FusedBatchNorm,inputsToSave:["x","mean","variance","scale"],gradFunc:(re,ee,ne)=>{const{varianceEpsilon:ie}=ne,[oe,ae,ce,le]=ee,ue=le??scalar(1),he=getReductionAxes(ae.shape,oe.shape),fe=[];if(ae.rank===1){for(let Ne=0;Ne<oe.shape.length-1;++Ne)fe.push(oe.shape[Ne]);fe.push(1)}const me=sub$2(oe,ae),ge=mul(re,ue),ve=rsqrt$2(add$1(ce,scalar(ie))),ye=mul(mul(mul(ve,ve),ve),scalar(-.5));return{x:()=>ae.rank===1?reshape$2(mul(mul(re,tile$3(reshape$2(ve,[1,1,1,ae.shape[0]]),fe)),ue),oe.shape):reshape$2(mul(mul(re,ve),ue),oe.shape),mean:()=>{let Ne=mul(mul(ve,scalar(-1)),ge);return ae.rank===1&&(Ne=sum$2(Ne,he)),reshape$2(Ne,ae.shape)},variance:()=>{let Ne=mul(mul(ye,me),ge);return ae.rank===1&&(Ne=sum$2(Ne,he)),reshape$2(Ne,ae.shape)},scale:()=>{const Ne=mul(me,ve);let Ie=mul(re,Ne);return ae.rank===1&&(Ie=sum$2(Ie,he)),reshape$2(Ie,ae.shape)},offset:()=>{let Ne=re;return ae.rank===1&&(Ne=sum$2(Ne,he)),reshape$2(Ne,ae.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gatherGradConfig={kernelName:GatherV2,inputsToSave:["x","indices"],gradFunc:(re,ee,ne)=>{const[ie,oe]=ee,{axis:ae}=ne,ce=parseAxisParam(ae,ie.shape)[0];return{x:()=>{const ue=ie.shape,he=oe.size,fe=ue.slice(0,ce),me=fe.length,ge=ue.slice(ae,ue.length).slice(1),ve=ge.length,ye=arrayRange(0,me),be=arrayRange(me+1,me+1+ve),Ce=arrayConcat([fe,[he],ge]),Se=reshape$2(re,Ce),$e=reshape$2(oe,[he]),Te=arrayConcat([[me],ye,be]),Ne=transpose$2(Se,Te);let Ie=unsortedSegmentSum$2(Ne,$e,ie.shape[ce]);const ke=getUndoAxesPermutation(Te);return Ie=transpose$2(Ie,ke),Ie},indices:()=>oe}}};function arrayRange(re,ee){const ne=[];for(let ie=re;ie<ee;++ie)ne.push(ie);return ne}function arrayConcat(re){const ee=[];for(let ne=0;ne<re.length;++ne)for(let ie=0;ie<re[ne].length;++ie)ee.push(re[ne][ie]);return ee}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const greaterEqualGradConfig={kernelName:GreaterEqual,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ie]=ee;return{a:()=>zerosLike$2(ne),b:()=>zerosLike$2(ie)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const identityGradConfig={kernelName:Identity$1,gradFunc:re=>({x:()=>cast$3(re,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isFiniteGradConfig={kernelName:IsFinite,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isInfGradConfig={kernelName:IsInf,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isNanGradConfig={kernelName:IsNan,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const leakyReluGradConfig={kernelName:LeakyRelu,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ie]=ee,{alpha:oe}=ne,ae=greater$2(ie,0);return{x:()=>where(ae,re,mul(re,oe))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const log1pGradConfig={kernelName:Log1p,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,add$1(ne,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logGradConfig={kernelName:Log,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,cast$3(ne,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logSoftmaxGradConfig={kernelName:LogSoftmax$1,inputsToSave:[],outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const[ie]=ee,{axis:oe}=ne;return{logits:()=>{const ce=exp$2(ie);return sub$2(re,mul(sum$2(re,oe,!0),ce))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function localResponseNormalizationBackprop_(re,ee,ne,ie=5,oe=1,ae=1,ce=.5){const le={x:re,y:ee,dy:ne},ue={depthRadius:ie,bias:oe,alpha:ae,beta:ce};return ENGINE.runKernel(LRNGrad,le,ue)}const localResponseNormalizationBackprop=op({localResponseNormalizationBackprop_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrnGradConfig={kernelName:LRN,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const[ie,oe]=ee,{depthRadius:ae,bias:ce,alpha:le,beta:ue}=ne;return{x:()=>localResponseNormalizationBackprop(ie,oe,re,ae,ce,le,ue)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gradForMinAndMax(re,ee,ne,ie){return ee.rank<ne.rank&&(ee=reshape$2(ee,expandShapeToKeepDim(ee.shape,ie))),re.rank<ne.rank&&(re=reshape$2(re,expandShapeToKeepDim(re.shape,ie))),{x:()=>mul(re,cast$3(equal$2(ne,ee),re.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxGradConfig={kernelName:Max,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const ie=ne,{reductionIndices:oe}=ie,ae=ee[0],ce=ee[1],le=parseAxisParam(oe,ae.shape),ue=gradForMinAndMax(re,ce,ae,le);return{x:()=>ue.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maximumGradConfig={kernelName:Maximum$1,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ie]=ee;return{a:()=>mul(re,cast$3(greaterEqual$2(ne,ie),"float32")),b:()=>mul(re,cast$3(less$2(ne,ie),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3dGrad_(re,ee,ne,ie,oe,ae=[1,1,1],ce,le){const ue=convertToTensor(re,"dy","maxPool3dGrad"),he=convertToTensor(ee,"input","maxPool3dGrad"),fe=convertToTensor(ne,"output","maxPool3dGrad");let me=ue,ge=he,ve=fe,ye=!1;he.rank===4&&(ye=!0,me=reshape$2(ue,[1,ue.shape[0],ue.shape[1],ue.shape[2],ue.shape[3]]),ge=reshape$2(he,[1,he.shape[0],he.shape[1],he.shape[2],he.shape[3]]),ve=reshape$2(fe,[1,fe.shape[0],fe.shape[1],fe.shape[2],fe.shape[3]])),assert$2(me.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${me.rank}.`),assert$2(ge.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${ge.rank}.`),assert$2(ve.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${ve.rank}.`),assert$2(eitherStridesOrDilationsAreOne(oe,ae),()=>`Error in maxPool3dGrad: Either strides or dilations must be 1. Got strides ${oe} and dilations '${ae}'`),le!=null&&assert$2(isInt(ce),()=>`Error in maxPool3dGrad: pad must be an integer when using, dimRoundingMode ${le} but got pad ${ce}.`);const be={dy:me,input:ge,output:ve},Ce={filterSize:ie,strides:oe,dilations:ae,pad:ce,dimRoundingMode:le},Se=ENGINE.runKernel(MaxPool3DGrad,be,Ce);return ye?reshape$2(Se,[Se.shape[1],Se.shape[2],Se.shape[3],Se.shape[4]]):Se}const maxPool3dGrad=op({maxPool3dGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPool3DGradConfig$1={kernelName:MaxPool3D,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const[ie,oe]=ee,{filterSize:ae,strides:ce,dilations:le,pad:ue,dimRoundingMode:he}=ne,fe=le??[1,1,1];return{x:()=>maxPool3dGrad(re,ie,oe,ae,ce,fe,ue,he)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolGrad_(re,ee,ne,ie,oe,ae,ce){const le=convertToTensor(re,"dy","maxPoolGrad"),ue=convertToTensor(ee,"input","maxPoolGrad"),he=convertToTensor(ne,"output","maxPoolGrad");assert$2(ue.rank===le.rank,()=>`Rank of input (${ue.rank}) does not match rank of dy (${le.rank})`),assert$2(le.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${le.rank}.`),assert$2(ue.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${ue.rank}.`),ce!=null&&assert$2(isInt(ae),()=>`Error in maxPoolGrad: pad must be an integer when using, dimRoundingMode ${ce} but got pad ${ae}.`);const fe={dy:le,input:ue,output:he},me={filterSize:ie,strides:oe,pad:ae,dimRoundingMode:ce};return ENGINE.runKernel(MaxPoolGrad,fe,me)}const maxPoolGrad$2=op({maxPoolGrad_});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPoolGradConfig$2={kernelName:MaxPool,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const[ie,oe]=ee,{filterSize:ae,strides:ce,pad:le}=ne;return{x:()=>maxPoolGrad$2(re,ie,oe,ae,ce,le)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const meanGradConfig={kernelName:Mean,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ie]=ee,{axis:oe}=ne,ae=parseAxisParam(oe,ie.shape),le=computeOutAndReduceShapes(ie.shape,ae)[1],ue=sizeFromShape(le);return{x:()=>{const fe=ie.shape.slice();ae.forEach(ve=>{fe[ve]=1});const me=reshape$2(re,fe);return div$1(mul(me,ones(ie.shape,"float32")),ue)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const minGradConfig={kernelName:Min,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const ie=ne,{axis:oe}=ie,[ae,ce]=ee,le=parseAxisParam(oe,ae.shape),ue=gradForMinAndMax(re,ce,ae,le);return{x:()=>ue.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const minimumGradConfig={kernelName:Minimum$1,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ie]=ee;return{a:()=>mul(re,cast$3(lessEqual$2(ne,ie),"float32")),b:()=>mul(re,cast$3(greater$2(ne,ie),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mirrorPadGradConfig={kernelName:MirrorPad,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const ie=ee[0],{paddings:oe}=ne,ae=oe.map(ce=>ce[0]);return{x:()=>slice$4(re,ae,ie.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const modGradConfig={kernelName:Mod,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ie]=ee,oe=assertAndGetBroadcastShape(ne.shape,ie.shape);return{a:()=>{const le=getReductionAxes(ne.shape,oe);return le.length>0?reshape$2(sum$2(re,le),ne.shape):re},b:()=>{const le=mul(re,neg$2(floor$3(div$1(ne,ie)))),ue=getReductionAxes(ie.shape,oe);return ue.length>0?reshape$2(sum$2(le,ue),ie.shape):le}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const multiplyGradConfig={kernelName:Multiply$2,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ie]=ee,oe=assertAndGetBroadcastShape(ne.shape,ie.shape);return{a:()=>{const le=mul(re,cast$3(ie,"float32")),ue=getReductionAxes(ne.shape,oe);return ue.length>0?reshape$2(sum$2(le,ue),ne.shape):le},b:()=>{const le=mul(re,cast$3(ne,"float32")),ue=getReductionAxes(ie.shape,oe);return ue.length>0?reshape$2(sum$2(le,ue),ie.shape):le}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const negGradConfig={kernelName:Neg,gradFunc:re=>({x:()=>neg$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oneHotGradConfig={kernelName:OneHot,inputsToSave:["indices"],gradFunc:(re,ee)=>{const ne=ee[0];return{indices:()=>zeros$1(ne.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const onesLikeGradConfig={kernelName:OnesLike,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const packGradConfig={kernelName:Pack,saveAllInputs:!0,gradFunc:(re,ee,ne)=>{const{axis:ie}=ne;return unstack(re,ie).map(ae=>()=>ae)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const padV2GradConfig={kernelName:PadV2,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const ie=ee[0],{paddings:oe}=ne,ae=oe.map(ce=>ce[0]);return{x:()=>slice$4(re,ae,ie.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const powGradConfig={kernelName:Pow$1,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(re,ee)=>{const[ne,ie,oe]=ee,ae=ne,ce=ie,le=assertAndGetBroadcastShape(ae.shape,ce.shape);return{a:()=>{const fe=cast$3(ce,"float32");let me=mul(re,mul(fe,pow$2(ae,sub$2(fe,scalar(1)))));const ge=getReductionAxes(ae.shape,le);return ge.length>0&&(me=sum$2(me,ge)),reshape$2(me,ae.shape)},b:()=>{const fe=greater$2(ae,0),me=where(fe,log$5(ae),zerosLike$2(ae));let ge=mul(re,mul(oe,me));const ve=getReductionAxes(ce.shape,le);return ve.length>0&&(ge=sum$2(ge,ve)),reshape$2(ge,ce.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const preluGradConfig={kernelName:Prelu,inputsToSave:["x","alpha"],gradFunc:(re,ee)=>{const[ne,ie]=ee,oe=greater$2(ne,0);return{x:()=>where(oe,re,mul(re,ie)),alpha:()=>{let ae=where(oe,zerosLike$2(re),mul(re,ne));const ce=getReductionAxes(ie.shape,re.shape);return ce.length>0&&(ae=sum$2(ae,ce)),reshape$2(ae,ie.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const divGradConfig={kernelName:RealDiv,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ie]=ee,oe=assertAndGetBroadcastShape(ne.shape,ie.shape);return{a:()=>{const le=div$1(re,cast$3(ie,"float32")),ue=getReductionAxes(ne.shape,oe);return ue.length>0?reshape$2(sum$2(le,ue),ne.shape):le},b:()=>{let le=mul(re,cast$3(ne,"float32"));const ue=getReductionAxes(ie.shape,oe);ue.length>0&&(le=reshape$2(sum$2(le,ue),ie.shape));const he=square$3(ie);return neg$2(div$1(le,cast$3(he,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reciprocalGradConfig={kernelName:Reciprocal,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,neg$2(square$3(ne)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const relu6GradConfig={kernelName:Relu6$1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee,ie=mul(lessEqual$2(ne,6),step$2(ne));return{x:()=>mul(re,cast$3(ie,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reluGradConfig={kernelName:Relu$1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,cast$3(step$2(ne),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reshapeGradConfig={kernelName:Reshape$1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>reshape$2(re,ne.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const resizeBilinearGradConfig$2={kernelName:ResizeBilinear,inputsToSave:["images"],gradFunc:(re,ee,ne)=>{const[ie]=ee,oe={dy:re,images:ie};return{images:()=>ENGINE.runKernel(ResizeBilinearGrad,oe,ne)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const resizeNearestNeighborGradConfig$2={kernelName:ResizeNearestNeighbor,inputsToSave:["images"],gradFunc:(re,ee,ne)=>{const[ie]=ee,oe={dy:re,images:ie};return{images:()=>ENGINE.runKernel(ResizeNearestNeighborGrad,oe,ne)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reverseGradConfig={kernelName:Reverse,gradFunc:(re,ee,ne)=>{const{dims:ie}=ne,oe=parseAxisParam(ie,re.shape);return{x:()=>reverse$2(re,oe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const roundGradConfig={kernelName:Round,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rsqrtGradConfig={kernelName:Rsqrt,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>neg$2(div$1(re,mul(pow$2(ne,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const selectGradConfig={kernelName:Select$2,inputsToSave:["condition"],gradFunc:(re,ee)=>{const[ne]=ee;return{condition:()=>cast$3(zerosLike$2(ne),"float32"),t:()=>mul(re,cast$3(ne,re.dtype)),e:()=>mul(re,cast$3(logicalNot$2(ne),re.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const seluGradConfig={kernelName:Selu$1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>{const ie=greater$2(ne,scalar(0)),oe=scalar(SELU_SCALEALPHA),ae=scalar(SELU_SCALE),ce=mul(re,ae),le=mul(mul(re,oe),exp$2(cast$3(ne,"float32")));return where(ie,ce,le)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sigmoidGradConfig={kernelName:Sigmoid$1,outputsToSave:[!0],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,mul(ne,sub$2(scalar(1),ne)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const signGradConfig={kernelName:Sign,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sinGradConfig={kernelName:Sin,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(cos$2(cast$3(ne,"float32")),re)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sinhGradConfig={kernelName:Sinh,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(cosh$2(cast$3(ne,"float32")),re)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sliceGradConfig={kernelName:Slice,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ie]=ee,{begin:oe,size:ae}=ne,ce=ie.shape,[le,ue]=parseSliceParams(ie,oe,ae),he=[];for(let fe=0;fe<re.rank;fe++)he.push([le[fe],ce[fe]-le[fe]-ue[fe]]);return{x:()=>pad(re,he)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const softmaxGradConfig={kernelName:Softmax$2,outputsToSave:[!0],gradFunc:(re,ee,ne)=>{const[ie]=ee,{dim:oe}=ne,ae=!0,ce=mul(re,ie);return{logits:()=>sub$2(ce,mul(sum$2(ce,[oe],ae),ie))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const softplusGradConfig={kernelName:Softplus$1,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,sigmoid$2(ne))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spaceToBatchNDGradConfig={kernelName:SpaceToBatchND,gradFunc:(re,ee,ne)=>{const{blockShape:ie,paddings:oe}=ne;return{x:()=>batchToSpaceND$2(re,ie,oe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const splitVGradConfig={kernelName:SplitV,gradFunc:(re,ee,ne)=>{const{axis:ie}=ne;return{x:()=>concat$2(re,ie)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sqrtGradConfig={kernelName:Sqrt,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,mul(sqrt$2(cast$3(ne,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squareGradConfig={kernelName:Square,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(re,mul(cast$3(ne,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squaredDifferenceGradConfig={kernelName:SquaredDifference,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ie]=ee,oe=scalar(2);return{a:()=>mul(re,mul(oe,sub$2(ne,ie))),b:()=>mul(re,mul(oe,sub$2(ie,ne)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const stepGradConfig={kernelName:Step,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const subGradConfig={kernelName:Sub,inputsToSave:["a","b"],gradFunc:(re,ee)=>{const[ne,ie]=ee,oe=assertAndGetBroadcastShape(ne.shape,ie.shape);return{a:()=>{let le=re;const ue=getReductionAxes(ne.shape,oe);return ue.length>0&&(le=sum$2(le,ue)),reshape$2(le,ne.shape)},b:()=>{let le=re;const ue=getReductionAxes(ie.shape,oe);return ue.length>0&&(le=sum$2(le,ue)),reshape$2(neg$2(le),ie.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sumGradConfig={kernelName:Sum,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ie]=ee,oe=ie.shape.slice(),{axis:ae}=ne;parseAxisParam(ae,ie.shape).forEach(he=>{oe[he]=1});const le=reshape$2(re,oe),ue=mul(le,ones(ie.shape,"float32"));return{x:()=>ue}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tanGradConfig={kernelName:Tan,inputsToSave:["x"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>div$1(re,square$3(cos$2(ne)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tanhGradConfig={kernelName:Tanh$1,outputsToSave:[!0],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>mul(sub$2(scalar(1),square$3(ne)),re)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tileGradConfig={kernelName:Tile,inputsToSave:["x"],gradFunc:(re,ee,ne)=>{const[ie]=ee,{reps:oe}=ne;return{x:()=>{let ce=zerosLike$2(ie);if(ie.rank===1)for(let le=0;le<oe[0];++le)ce=add$1(ce,slice$4(re,[le*ie.shape[0]],[ie.shape[0]]));else if(ie.rank===2)for(let le=0;le<oe[0];++le)for(let ue=0;ue<oe[1];++ue)ce=add$1(ce,slice$4(re,[le*ie.shape[0],ue*ie.shape[1]],[ie.shape[0],ie.shape[1]]));else if(ie.rank===3)for(let le=0;le<oe[0];++le)for(let ue=0;ue<oe[1];++ue)for(let he=0;he<oe[2];++he)ce=add$1(ce,slice$4(re,[le*ie.shape[0],ue*ie.shape[1],he*ie.shape[2]],[ie.shape[0],ie.shape[1],ie.shape[2]]));else if(ie.rank===4)for(let le=0;le<oe[0];++le)for(let ue=0;ue<oe[1];++ue)for(let he=0;he<oe[2];++he)for(let fe=0;fe<oe[3];++fe)ce=add$1(ce,slice$4(re,[le*ie.shape[0],ue*ie.shape[1],he*ie.shape[2],fe*ie.shape[3]],[ie.shape[0],ie.shape[1],ie.shape[2],ie.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${ie.rank} tensors yet.`);return ce}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const transposeGradConfig={kernelName:Transpose,gradFunc:(re,ee,ne)=>{const ie=ne,{perm:oe}=ie,ae=getUndoAxesPermutation(oe);return{x:()=>transpose$2(re,ae)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const unpackGradConfig={kernelName:Unpack,gradFunc:(re,ee,ne)=>{const ie=ne,{axis:oe}=ie;return{value:()=>stack$1(re,oe)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const unsortedSegmentSumGradConfig={kernelName:UnsortedSegmentSum,inputsToSave:["segmentIds"],gradFunc:(re,ee)=>{const[ne]=ee;return{x:()=>gatherDropNegatives(re,ne)}}};function gatherDropNegatives(re,ee){const ne=maximum$2(ee,zerosLike$2(ee)),ie=gather$1(re,ne);let oe=greaterEqual$2(ee,scalar(0,"int32"));const ae=ie.rank-oe.rank;for(let le=0;le<ae;++le)oe=expandDims$3(oe,le+1);oe=logicalAnd$2(oe,ones(ie.shape,"bool"));const ce=zerosLike$2(ie);return where(oe,ie,ce)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zerosLikeGradConfig={kernelName:ZerosLike,gradFunc:re=>({x:()=>zerosLike$2(re)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gradConfigs=[absGradConfig,acosGradConfig,acoshGradConfig,addGradConfig,addNGradConfig,argMaxGradConfig,argMinGradConfig,asinGradConfig,asinhGradConfig,atan2GradConfig,atanGradConfig,atanhGradConfig,avgPool3DGradConfig$1,avgPoolGradConfig$2,batchMatMulGradConfig,batchToSpaceNDGradConfig,broadcastToGradConfig,castGradConfig,ceilGradConfig,clipByValueGradConfig,complexAbsGradConfig,concatGradConfig,conv2DBackpropInputGradConfig,conv2DGradConfig,conv3DGradConfig,cosGradConfig,coshGradConfig,cumsumGradConfig,depthwiseConv2dNativeGradConfig,dilation2dGradConfig,divGradConfig,eluGradConfig$2,erfGradConfig,expGradConfig,expandDimsGradConfig,expm1GradConfig,floorDivGradConfig,floorGradConfig,fusedBatchNormGradConfig,gatherGradConfig,greaterEqualGradConfig,identityGradConfig,isFiniteGradConfig,isInfGradConfig,isNanGradConfig,leakyReluGradConfig,log1pGradConfig,logGradConfig,logSoftmaxGradConfig,lrnGradConfig,maxGradConfig,maxGradConfig,maximumGradConfig,maxPool3DGradConfig$1,maxPoolGradConfig$2,meanGradConfig,minGradConfig,minimumGradConfig,mirrorPadGradConfig,modGradConfig,multiplyGradConfig,negGradConfig,oneHotGradConfig,onesLikeGradConfig,packGradConfig,padV2GradConfig,padV2GradConfig,powGradConfig,preluGradConfig,reciprocalGradConfig,relu6GradConfig,reluGradConfig,reshapeGradConfig,resizeBilinearGradConfig$2,resizeNearestNeighborGradConfig$2,reverseGradConfig,roundGradConfig,rsqrtGradConfig,selectGradConfig,seluGradConfig,sigmoidGradConfig,signGradConfig,sinGradConfig,sinhGradConfig,sliceGradConfig,softmaxGradConfig,softplusGradConfig,spaceToBatchNDGradConfig,spaceToBatchNDGradConfig,splitVGradConfig,splitVGradConfig,sqrtGradConfig,squaredDifferenceGradConfig,squareGradConfig,stepGradConfig,subGradConfig,sumGradConfig,tanGradConfig,tanhGradConfig,tileGradConfig,transposeGradConfig,unpackGradConfig,unsortedSegmentSumGradConfig,zerosLikeGradConfig];for(const re of gradConfigs)registerGradient(re);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.abs=function(){return this.throwIfDisposed(),abs$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.acos=function(){return this.throwIfDisposed(),acos$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.acosh=function(){return this.throwIfDisposed(),acosh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.addStrict=function(re){return this.throwIfDisposed(),addStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.add=function(re){return this.throwIfDisposed(),add$1(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.all=function(re,ee){return this.throwIfDisposed(),all$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.any=function(re,ee){return this.throwIfDisposed(),any$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.argMax=function(re){return this.throwIfDisposed(),argMax$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.argMin=function(re){return this.throwIfDisposed(),argMin$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.asScalar=function(){return this.throwIfDisposed(),assert$2(this.size===1,()=>"The array must have only 1 element."),reshape$2(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.asType=function(re){return this.throwIfDisposed(),cast$3(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as1D=function(){return this.throwIfDisposed(),reshape$2(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as2D=function(re,ee){return this.throwIfDisposed(),reshape$2(this,[re,ee])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as3D=function(re,ee,ne){return this.throwIfDisposed(),reshape$2(this,[re,ee,ne])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as4D=function(re,ee,ne,ie){return this.throwIfDisposed(),reshape$2(this,[re,ee,ne,ie])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.as5D=function(re,ee,ne,ie,oe){return this.throwIfDisposed(),reshape$2(this,[re,ee,ne,ie,oe])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.asin=function(){return this.throwIfDisposed(),asin$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.asinh=function(){return this.throwIfDisposed(),asinh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.atan=function(){return this.throwIfDisposed(),atan$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.atan2=function(re){return this.throwIfDisposed(),atan2$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.atanh=function(){return this.throwIfDisposed(),atanh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.avgPool=function(re,ee,ne,ie){return this.throwIfDisposed(),avgPool$2(this,re,ee,ne,ie)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.batchToSpaceND=function(re,ee){return this.throwIfDisposed(),batchToSpaceND$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.batchNorm=function(re,ee,ne,ie,oe){return this.throwIfDisposed(),batchNorm$2(this,re,ee,ne,ie,oe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.broadcastTo=function(re){return this.throwIfDisposed(),broadcastTo(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.cast=function(re){return this.throwIfDisposed(),cast$3(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.ceil=function(){return this.throwIfDisposed(),ceil$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.clipByValue=function(re,ee){return this.throwIfDisposed(),clipByValue$1(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.concat=function(re,ee){return this.throwIfDisposed(),re instanceof Tensor&&(re=[re]),concat$2([this,...re],ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.conv1d=function(re,ee,ne,ie,oe,ae){return this.throwIfDisposed(),conv1d(this,re,ee,ne,ie,oe,ae)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.conv2dTranspose=function(re,ee,ne,ie,oe){return this.throwIfDisposed(),conv2dTranspose(this,re,ee,ne,ie,oe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.conv2d=function(re,ee,ne,ie,oe,ae){return this.throwIfDisposed(),conv2d$2(this,re,ee,ne,ie,oe,ae)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.cos=function(){return this.throwIfDisposed(),cos$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.cosh=function(){return this.throwIfDisposed(),cosh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.cumsum=function(re,ee,ne){return this.throwIfDisposed(),cumsum$2(this,re,ee,ne)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.depthToSpace=function(re,ee){return this.throwIfDisposed(),depthToSpace$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.depthwiseConv2D=function(re,ee,ne,ie,oe,ae){return deprecationWarn("depthwiseConv2D is deprecated, use depthwiseConv2d instead"),this.throwIfDisposed(),depthwiseConv2d$1(this,re,ee,ne,ie,oe,ae)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.depthwiseConv2d=function(re,ee,ne,ie,oe,ae){return this.throwIfDisposed(),depthwiseConv2d$1(this,re,ee,ne,ie,oe,ae)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.dilation2d=function(re,ee,ne,ie,oe){return this.throwIfDisposed(),dilation2d(this,re,ee,ne,ie,oe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.divNoNan=function(re){return this.throwIfDisposed(),divNoNan(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.divStrict=function(re){return this.throwIfDisposed(),divStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.div=function(re){return this.throwIfDisposed(),div$1(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.dot=function(re){return this.throwIfDisposed(),dot$1(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.elu=function(){return this.throwIfDisposed(),elu$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.equalStrict=function(re){return this.throwIfDisposed(),equalStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.equal=function(re){return this.throwIfDisposed(),equal$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.erf=function(){return this.throwIfDisposed(),erf$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.exp=function(){return this.throwIfDisposed(),exp$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.expandDims=function(re){return this.throwIfDisposed(),expandDims$3(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.expm1=function(){return this.throwIfDisposed(),expm1$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.fft=function(){return this.throwIfDisposed(),fft$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.flatten=function(){return this.throwIfDisposed(),reshape$2(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.floor=function(){return this.throwIfDisposed(),floor$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.floorDiv=function(re){return this.throwIfDisposed(),floorDiv$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.gather=function(re,ee){return this.throwIfDisposed(),gather$1(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.greaterEqualStrict=function(re){return this.throwIfDisposed(),greaterEqualStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.greaterEqual=function(re){return this.throwIfDisposed(),greaterEqual$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.greaterStrict=function(re){return this.throwIfDisposed(),greaterStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.greater=function(re){return this.throwIfDisposed(),greater$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.ifft=function(){return this.throwIfDisposed(),ifft$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.irfft=function(){return this.throwIfDisposed(),irfft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.isFinite=function(){return this.throwIfDisposed(),isFinite$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.isInf=function(){return this.throwIfDisposed(),isInf$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.isNaN=function(){return this.throwIfDisposed(),isNaN$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.leakyRelu=function(re){return this.throwIfDisposed(),leakyRelu$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.lessEqualStrict=function(re){return this.throwIfDisposed(),lessEqualStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.lessEqual=function(re){return this.throwIfDisposed(),lessEqual$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.lessStrict=function(re){return this.throwIfDisposed(),lessStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.less=function(re){return this.throwIfDisposed(),less$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.localResponseNormalization=function(re,ee,ne,ie){return this.throwIfDisposed(),localResponseNormalization(this,re,ee,ne,ie)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logSigmoid=function(){return this.throwIfDisposed(),logSigmoid(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logSoftmax=function(re){return this.throwIfDisposed(),logSoftmax(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logSumExp=function(re,ee){return this.throwIfDisposed(),logSumExp(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.log=function(){return this.throwIfDisposed(),log$5(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.log1p=function(){return this.throwIfDisposed(),log1p$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logicalAnd=function(re){return this.throwIfDisposed(),logicalAnd$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logicalNot=function(){return this.throwIfDisposed(),logicalNot$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logicalOr=function(re){return this.throwIfDisposed(),logicalOr$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.logicalXor=function(re){return this.throwIfDisposed(),logicalXor(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.matMul=function(re,ee,ne){return this.throwIfDisposed(),matMul$1(this,re,ee,ne)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.maxPool=function(re,ee,ne,ie){return this.throwIfDisposed(),maxPool$2(this,re,ee,ne,ie)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.max=function(re,ee){return this.throwIfDisposed(),max$4(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.maximumStrict=function(re){return this.throwIfDisposed(),maximumStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.maximum=function(re){return this.throwIfDisposed(),maximum$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mean=function(re,ee){return this.throwIfDisposed(),mean$1(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.min=function(re,ee){return this.throwIfDisposed(),min$4(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.minimumStrict=function(re){return this.throwIfDisposed(),minimumStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.minimum=function(re){return this.throwIfDisposed(),minimum$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mirrorPad=function(re,ee){return this.throwIfDisposed(),mirrorPad$1(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.modStrict=function(re){return this.throwIfDisposed(),modStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mod=function(re){return this.throwIfDisposed(),mod$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mulStrict=function(re){return this.throwIfDisposed(),mulStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.mul=function(re){return this.throwIfDisposed(),mul(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.neg=function(){return this.throwIfDisposed(),neg$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.norm=function(re,ee,ne){return this.throwIfDisposed(),norm(this,re,ee,ne)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.notEqualStrict=function(re){return this.throwIfDisposed(),notEqualStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.notEqual=function(re){return this.throwIfDisposed(),notEqual$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.oneHot=function(re,ee=1,ne=0){return this.throwIfDisposed(),oneHot$2(this,re,ee,ne)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.onesLike=function(){return this.throwIfDisposed(),onesLike$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.pad=function(re,ee){return this.throwIfDisposed(),pad(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.pool=function(re,ee,ne,ie,oe){return this.throwIfDisposed(),pool$2(this,re,ee,ne,ie,oe)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.powStrict=function(re){return this.throwIfDisposed(),powStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.pow=function(re){return this.throwIfDisposed(),pow$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.prelu=function(re){return this.throwIfDisposed(),prelu$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.prod=function(re,ee){return this.throwIfDisposed(),prod$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.reciprocal=function(){return this.throwIfDisposed(),reciprocal$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.relu=function(){return this.throwIfDisposed(),relu$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.relu6=function(){return this.throwIfDisposed(),relu6$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.reshapeAs=function(re){return this.throwIfDisposed(),reshape$2(this,re.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.reshape=function(re){return this.throwIfDisposed(),reshape$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.resizeBilinear=function(re,ee,ne){return this.throwIfDisposed(),resizeBilinear$2(this,re,ee,ne)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.resizeNearestNeighbor=function(re,ee,ne){return this.throwIfDisposed(),resizeNearestNeighbor$2(this,re,ee,ne)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.reverse=function(re){return this.throwIfDisposed(),reverse$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.rfft=function(){return this.throwIfDisposed(),rfft(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.round=function(){return this.throwIfDisposed(),round$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.rsqrt=function(){return this.throwIfDisposed(),rsqrt$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.selu=function(){return this.throwIfDisposed(),selu$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.separableConv2d=function(re,ee,ne,ie,oe,ae){return this.throwIfDisposed(),separableConv2d(this,re,ee,ne,ie,oe,ae)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sigmoid=function(){return this.throwIfDisposed(),sigmoid$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sign=function(){return this.throwIfDisposed(),sign$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sin=function(){return this.throwIfDisposed(),sin$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sinh=function(){return this.throwIfDisposed(),sinh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.slice=function(re,ee){return this.throwIfDisposed(),slice$4(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.softmax=function(re){return this.throwIfDisposed(),softmax$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.softplus=function(){return this.throwIfDisposed(),softplus$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.spaceToBatchND=function(re,ee){return this.throwIfDisposed(),spaceToBatchND$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.split=function(re,ee){return this.throwIfDisposed(),split(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sqrt=function(){return this.throwIfDisposed(),sqrt$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.square=function(){return this.throwIfDisposed(),square$3(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.squaredDifference=function(re){return this.throwIfDisposed(),squaredDifference$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.squaredDifferenceStrict=function(re){return this.throwIfDisposed(),squaredDifferenceStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.squeeze=function(re){return this.throwIfDisposed(),squeeze(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.stack=function(re,ee){this.throwIfDisposed();const ne=re instanceof Tensor?[this,re]:[this,...re];return stack$1(ne,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.step=function(re){return this.throwIfDisposed(),step$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.stridedSlice=function(re,ee,ne,ie,oe,ae,ce,le){return this.throwIfDisposed(),stridedSlice$2(this,re,ee,ne,ie,oe,ae,ce,le)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.subStrict=function(re){return this.throwIfDisposed(),subStrict(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sub=function(re){return this.throwIfDisposed(),sub$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.sum=function(re,ee){return this.throwIfDisposed(),sum$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.tan=function(){return this.throwIfDisposed(),tan$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.tanh=function(){return this.throwIfDisposed(),tanh$2(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.tile=function(re){return this.throwIfDisposed(),tile$3(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.toBool=function(){return this.throwIfDisposed(),cast$3(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.toFloat=function(){return this.throwIfDisposed(),cast$3(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.toInt=function(){return this.throwIfDisposed(),cast$3(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.topk=function(re,ee){return this.throwIfDisposed(),topk(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.transpose=function(re){return this.throwIfDisposed(),transpose$2(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.unique=function(re){return this.throwIfDisposed(),unique$4(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.unsortedSegmentSum=function(re,ee){return this.throwIfDisposed(),unsortedSegmentSum$2(this,re,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.unstack=function(re){return this.throwIfDisposed(),unstack(this,re)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.where=function(re,ee){return this.throwIfDisposed(),where(re,this,ee)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */Tensor.prototype.zerosLike=function(){return this.throwIfDisposed(),zerosLike$2(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let _epsilon;function epsilon$1(){return _epsilon==null&&(_epsilon=backend().epsilon()),_epsilon}function imageDataFormat(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class AttributeError extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,AttributeError.prototype)}}class RuntimeError extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,RuntimeError.prototype)}}class ValueError extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,ValueError.prototype)}}class NotImplementedError extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,NotImplementedError.prototype)}}class AssertionError extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,AssertionError.prototype)}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pyListRepeat(re,ee){if(Array.isArray(re)){let ne=[];for(let ie=0;ie<ee;ie++)ne=ne.concat(re);return ne}else{const ne=new Array(ee);return ne.fill(re),ne}}function assert$1(re,ee){if(!re)throw new AssertionError(ee)}function count(re,ee){let ne=0;for(const ie of re)ie===ee&&ne++;return ne}function singletonOrArray(re){return re.length===1?re[0]:re}function toList(re){return Array.isArray(re)?re:[re]}function toSnakeCase(re){const ne=re.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return ne[0]!=="_"?ne:"private"+ne}function toCamelCase(re){return re.length<=1||re.indexOf("_")===-1?re:re.replace(/[_]+(\w|$)/g,(ee,ne)=>ne.toUpperCase())}let _GLOBAL_CUSTOM_OBJECTS={};function serializeKerasObject(re){if(re==null)return null;const ee={};return ee.className=re.getClassName(),ee.config=re.getConfig(),ee}function convertNDArrayScalarsInConfig(re){if(!(re==null||typeof re!="object"))if(Array.isArray(re))re.forEach(ee=>convertNDArrayScalarsInConfig(ee));else{const ee=Object.keys(re);for(const ne of ee){const ie=re[ne];ie!=null&&typeof ie=="object"&&(!Array.isArray(ie)&&ie.type==="ndarray"&&typeof ie.value=="number"?re[ne]=ie.value:convertNDArrayScalarsInConfig(ie))}}}function deserializeKerasObject(re,ee={},ne={},ie="object",oe=!1){if(typeof re=="string"){const ae=re;let ce;if(ae in ne)ce=ne[ae];else if(ae in _GLOBAL_CUSTOM_OBJECTS)ce=_GLOBAL_CUSTOM_OBJECTS[ae];else if(ce=ee[ae],ce==null)throw new ValueError(`Unknown ${ie}: ${re}. This may be due to one of the following reasons:
1. The ${ie} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${ie} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return ce}else{const ae=re;if(ae.className==null||ae.config==null)throw new ValueError(`${ie}: Improper config format: ${JSON.stringify(ae)}.
'className' and 'config' must set.`);const ce=ae.className;let le,ue;if(ce in ne?[le,ue]=ne[ce]:ce in _GLOBAL_CUSTOM_OBJECTS?[le,ue]=_GLOBAL_CUSTOM_OBJECTS.className:ce in ee&&([le,ue]=ee[ce]),le==null)throw new ValueError(`Unknown ${ie}: ${ce}. This may be due to one of the following reasons:
1. The ${ie} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${ie} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(ue!=null){const he={};for(const ve of Object.keys(_GLOBAL_CUSTOM_OBJECTS))he[ve]=_GLOBAL_CUSTOM_OBJECTS[ve];for(const ve of Object.keys(ne))he[ve]=ne[ve];const fe=ae.config;fe.customObjects=he;const me=Object.assign({},_GLOBAL_CUSTOM_OBJECTS);for(const ve of Object.keys(ne))_GLOBAL_CUSTOM_OBJECTS[ve]=ne[ve];convertNDArrayScalarsInConfig(ae.config);const ge=ue(le,ae.config,ne,oe);return _GLOBAL_CUSTOM_OBJECTS=Object.assign({},me),ge}else{const he=Object.assign({},_GLOBAL_CUSTOM_OBJECTS);for(const me of Object.keys(ne))_GLOBAL_CUSTOM_OBJECTS[me]=ne[me];const fe=new le(ae.config);return _GLOBAL_CUSTOM_OBJECTS=Object.assign({},he),fe}}}function numberCompare(re,ee){return re<ee?-1:re>ee?1:0}function reverseNumberCompare(re,ee){return-1*numberCompare(re,ee)}function unique$3(re){if(re==null)return re;const ee=[];for(const ne of re)ee.indexOf(ne)===-1&&ee.push(ne);return ee}function isObjectEmpty(re){if(re==null)throw new ValueError(`Invalid value in obj: ${JSON.stringify(re)}`);for(const ee in re)if(re.hasOwnProperty(ee))return!1;return!0}function checkStringTypeUnionValue(re,ee,ne){if(ne!=null&&re.indexOf(ne)<0)throw new ValueError(`${ne} is not a valid ${ee}.  Valid values are ${re} or null/undefined.`)}function checkArrayTypeAndLength(re,ee,ne=0,ie=1/0){return assert$1(ne>=0),assert$1(ie>=ne),Array.isArray(re)&&re.length>=ne&&re.length<=ie&&re.every(oe=>typeof oe===ee)}function assertPositiveInteger(re,ee){Array.isArray(re)?(assert$2(re.length>0,()=>`${ee} is unexpectedly an empty array.`),re.forEach((ne,ie)=>assertPositiveInteger(ne,`element ${ie+1} of ${ee}`))):assert$2(Number.isInteger(re)&&re>0,()=>`Expected ${ee} to be a positive integer, but got ${formatAsFriendlyString(re)}.`)}function formatAsFriendlyString(re){return re===null?"null":Array.isArray(re)?"["+re.map(ee=>formatAsFriendlyString(ee)).join(",")+"]":typeof re=="string"?`"${re}"`:`${re}`}function debounce(re,ee){let ne=now$1(),ie;return(...ae)=>{const ce=now$1();return ce-ne<ee||(ne=ce,ie=re(...ae)),ie}}function mapActivationToFusedKernel(re){return re==="relu"?"relu":re==="linear"?"linear":re==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function calcL2Norms(re,ee){return tidy(()=>sqrt$2(sum$2(mul(re,re),ee,!0)))}class Constraint extends Serializable{getConfig(){return{}}}class MaxNorm extends Constraint{constructor(ee){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=ee.maxValue!=null?ee.maxValue:this.defaultMaxValue,this.axis=ee.axis!=null?ee.axis:this.defaultAxis}apply(ee){return tidy(()=>{const ne=calcL2Norms(ee,this.axis),ie=clipByValue$1(ne,0,this.maxValue);return mul(ee,div$1(ie,add$1(epsilon$1(),ne)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}MaxNorm.className="MaxNorm";registerClass(MaxNorm);class UnitNorm extends Constraint{constructor(ee){super(),this.defaultAxis=0,this.axis=ee.axis!=null?ee.axis:this.defaultAxis}apply(ee){return tidy(()=>div$1(ee,add$1(epsilon$1(),calcL2Norms(ee,this.axis))))}getConfig(){return{axis:this.axis}}}UnitNorm.className="UnitNorm";registerClass(UnitNorm);class NonNeg extends Constraint{apply(ee){return relu$2(ee)}}NonNeg.className="NonNeg";registerClass(NonNeg);class MinMaxNorm extends Constraint{constructor(ee){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=ee.minValue!=null?ee.minValue:this.defaultMinValue,this.maxValue=ee.maxValue!=null?ee.maxValue:this.defaultMaxValue,this.rate=ee.rate!=null?ee.rate:this.defaultRate,this.axis=ee.axis!=null?ee.axis:this.defaultAxis}apply(ee){return tidy(()=>{const ne=calcL2Norms(ee,this.axis),ie=add$1(mul(this.rate,clipByValue$1(ne,this.minValue,this.maxValue)),mul(1-this.rate,ne));return mul(ee,div$1(ie,add$1(epsilon$1(),ne)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}MinMaxNorm.className="MinMaxNorm";registerClass(MinMaxNorm);const CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function serializeConstraint(re){return serializeKerasObject(re)}function deserializeConstraint(re,ee={}){return deserializeKerasObject(re,SerializationMap.getMap().classNameMap,ee,"constraint")}function getConstraint(re){if(re==null)return null;if(typeof re=="string"){const ne={className:re in CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP?CONSTRAINT_IDENTIFIER_REGISTRY_SYMBOL_MAP[re]:re,config:{}};return deserializeConstraint(ne)}else return re instanceof Constraint?re:deserializeConstraint(re)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const VALID_DATA_FORMAT_VALUES=["channelsFirst","channelsLast"],VALID_INTERPOLATION_FORMAT_VALUES=["nearest","bilinear"],VALID_PADDING_MODE_VALUES=["valid","same","causal"],VALID_POOL_MODE_VALUES=["max","avg"],VALID_BIDIRECTIONAL_MERGE_MODES=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const nameMap=new Map;function checkDataFormat(re){checkStringTypeUnionValue(VALID_DATA_FORMAT_VALUES,"DataFormat",re)}function checkInterpolationFormat(re){checkStringTypeUnionValue(VALID_INTERPOLATION_FORMAT_VALUES,"InterpolationFormat",re)}function checkPaddingMode(re){checkStringTypeUnionValue(VALID_PADDING_MODE_VALUES,"PaddingMode",re)}function checkPoolMode(re){checkStringTypeUnionValue(VALID_POOL_MODE_VALUES,"PoolMode",re)}const _nameScopeStack=[],_nameScopeDivider="/";function nameScope(re,ee){_nameScopeStack.push(re);try{const ne=ee();return _nameScopeStack.pop(),ne}catch(ne){throw _nameScopeStack.pop(),ne}}function currentNameScopePrefix(){return _nameScopeStack.length===0?"":_nameScopeStack.join(_nameScopeDivider)+_nameScopeDivider}function getScopedTensorName(re){if(!isValidTensorName(re))throw new Error("Not a valid tensor name: '"+re+"'");return currentNameScopePrefix()+re}function getUniqueTensorName(re){if(!isValidTensorName(re))throw new Error("Not a valid tensor name: '"+re+"'");nameMap.has(re)||nameMap.set(re,0);const ee=nameMap.get(re);if(nameMap.set(re,nameMap.get(re)+1),ee>0){const ne=`${re}_${ee}`;return nameMap.set(ne,1),ne}else return re}const tensorNameRegex=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function isValidTensorName(re){return!!re.match(tensorNameRegex)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isInteger(re){return re===parseInt(re.toString(),10)}function arrayProd(re,ee,ne){ee==null&&(ee=0),ne==null&&(ne=re.length);let ie=1;for(let oe=ee;oe<ne;++oe)ie*=re[oe];return ie}function toArray1D(re){return re=Array.isArray(re)?new Float32Array(re):re,tensor1d(re)}function min$3(re){return min$4(toArray1D(re)).dataSync()[0]}function max$3(re){return max$4(toArray1D(re)).dataSync()[0]}function range$3(re,ee){if(ee<re)throw new ValueError(`end (${ee}) < begin (${re}) is forbidden.`);const ne=[];for(let ie=re;ie<ee;++ie)ne.push(ie);return ne}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function cast$2(re,ee){return re.asType(ee)}function expandDims$2(re,ee=-1){const ne=re.shape.slice();return ee<0&&(ee=ne.length+ee+1),ne.splice(ee,0,1),re.reshape(ne)}function repeat(re,ee){return tidy(()=>{if(re.shape.length!==2)throw new ValueError(`repeat() expects a rank-2 tensor, but received a rank-${re.shape.length} tensor.`);const ne=expandDims$2(re,1);return tile$2(ne,[1,ee,1])})}function flatten$1(re){const ee=[arrayProd(re.shape)];return re.reshape(ee)}function batchFlatten(re){if(re.rank<=1)throw new ValueError(`batchFlatten requires a minimum rank of 2. Got rank: ${re.rank}.`);const ee=[re.shape[0],arrayProd(re.shape,1)];return re.reshape(ee)}function sliceAlongFirstAxis(re,ee,ne){return tidy(()=>{switch(re.rank){case 1:return slice1d(re,ee,ne);case 2:return slice2d(re,[ee,0],[ne,re.shape[1]]);case 3:return slice3d(re,[ee,0,0],[ne,re.shape[1],re.shape[2]]);case 4:return slice4d(re,[ee,0,0,0],[ne,re.shape[1],re.shape[2],re.shape[3]]);case 5:return slice$4(re,[ee,0,0,0,0],[ne,re.shape[1],re.shape[2],re.shape[3],re.shape[4]]);case 6:return slice$4(re,[ee,0,0,0,0,0],[ne,re.shape[1],re.shape[2],re.shape[3],re.shape[4],re.shape[5]]);default:throw new ValueError(`sliceAlongFirstAxis() received an unsupported tensor rank: ${re.rank}`)}})}function sliceAlongLastAxis(re,ee,ne){return tidy(()=>{switch(re.rank){case 1:return slice1d(re,ee,ne);case 2:return slice2d(re,[0,ee],[re.shape[0],ne]);case 3:return slice3d(re,[0,0,ee],[re.shape[0],re.shape[1],ne]);case 4:return slice4d(re,[0,0,0,ee],[re.shape[0],re.shape[1],re.shape[2],ne]);default:throw new ValueError(`sliceAlongLastAxis() received an unsupported tensor rank: ${re.rank}`)}})}function sliceAlongAxis(re,ee,ne,ie){return tidy(()=>{switch(re.rank){case 1:return slice1d(re,ee,ne);case 2:switch(ie){case 1:return sliceAlongFirstAxis(re,ee,ne);case 2:return sliceAlongLastAxis(re,ee,ne);default:throw new ValueError(`The axis is not within the rank of the tensor ${ie}`)}case 3:switch(ie){case 1:return sliceAlongFirstAxis(re,ee,ne);case 2:return slice3d(re,[0,ee,0],[re.shape[0],ne,re.shape[2]]);case 3:return sliceAlongLastAxis(re,ee,ne);default:throw new ValueError(`The axis is not within the rank of the tensor ${ie}`)}case 4:switch(ie){case 1:return sliceAlongFirstAxis(re,ee,ne);case 2:return slice4d(re,[0,ee,0,0],[re.shape[0],ne,re.shape[2],re.shape[3]]);case 3:return slice4d(re,[0,0,ee,0],[re.shape[0],re.shape[1],ne,re.shape[3]]);case 4:return sliceAlongLastAxis(re,ee,ne);default:throw new ValueError(`The axis is not within the rank of the tensor ${ie}`)}default:throw new ValueError(`sliceAlongLastAxis() received an unsupported tensor rank: ${re.rank}`)}})}function concatenate(re,ee=-1){let ne;return ee<0&&(ne=re[0].rank,ne!==0?ee=ne:ee=0),ee===re[0].rank&&(ee=-1),concat$2(re,ee)}function concatAlongFirstAxis(re,ee){switch(re.rank){case 1:return concat1d([re,ee]);case 2:return concat2d([re,ee],0);case 3:return concat3d([re,ee],0);case 4:return concat4d([re,ee],0);default:throw new ValueError(`concatAlongFirstAxis() received an unsupported tensor rank: ${re.rank}`)}}function tile$2(re,ee){if(Array.isArray(ee)||(ee=[ee]),re.rank!==ee.length)throw new ValueError(`The length of input n (${ee.length}) does not match the number of dimensions in input x (${re.rank})`);return tile$3(re,ee)}function randomNormal(re,ee=0,ne=1,ie,oe){return randomNormal$1(re,ee,ne,ie,oe)}function dot(re,ee,ne,ie){if(re.rank<2||ee.rank<2)throw new NotImplementedError(`dot requires both inputs to be rank >= 2 but got x shape = ${re.shape} and y shape = ${ee.shape}`);if(ee.rank>=3){const oe=re.shape.slice(-1)[0],ae=ee.shape.slice(-2)[0];if(oe!==ae)throw new NotImplementedError(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${re.shape} and  y shape = ${ee.shape}`)}if(re.rank===2&&ee.rank===2)return matMul({a:re,b:ee,transposeA:!1,transposeB:!1,bias:ie?reshapeBias(re.rank,ie,imageDataFormat()):null,activation:ne});{const oe=re.shape.slice(),ae=oe.pop();re=re.reshape([-1,ae]);const ce=ee.shape.slice(),le=ce.pop(),ue=ce.pop(),he=[...ce,le],fe=Array.from({length:ee.rank},(ye,be)=>be===0?ee.rank-2:be<=ee.rank-2?be-1:be);ee=ee.transpose(fe).reshape([ue,-1]);const me=[...oe,...he];return matMul({a:re,b:ee,transposeA:!1,transposeB:!1,bias:ie?reshapeBias(re.rank,ie,imageDataFormat()):null,activation:ne}).reshape(me)}}function gather(re,ee,ne){return tidy(()=>(Array.isArray(ee)?ee=tensor1d(ee,"int32"):ee=ee.toInt(),gather$1(re,ee,ne)))}function square$2(re){return mul(re,re)}function reshapeBias(re,ee,ne){const ie=ee.shape;if(ee.rank!==1&&ee.rank!==re)throw new ValueError(`Unexpected bias dimensions: ${ee.rank}; expected it to be 1 or ${re}`);if(re===5){if(ne==="channelsFirst")return ie.length===1?ee.reshape([1,ie[0],1,1,1]):ee.reshape([1,ie[3],ie[0],ie[1],ie[2]]);if(ne==="channelsLast")return ie.length===1?ee.reshape([1,1,1,1,ie[0]]):ee.reshape([1].concat(ie))}else if(re===4){if(ne==="channelsFirst")return ie.length===1?ee.reshape([1,ie[0],1,1]):ee.reshape([1,ie[2],ie[0],ie[1]]);if(ne==="channelsLast")return ie.length===1?ee.reshape([1,1,1,ie[0]]):ee.reshape([1].concat(ie))}else if(re===3){if(ne==="channelsFirst")return ie.length===1?ee.reshape([1,ie[0],1]):ee.reshape([1,ie[1],ie[0]]);if(ne==="channelsLast")return ie.length===1?ee.reshape([1,1,ie[0]]):ee.reshape([1].concat(ie))}else if(re<3)return ee;throw new ValueError(`Unsupported input rank by biasAdd: ${ee.rank}`)}function biasAdd(re,ee,ne){return tidy(()=>(ne==null&&(ne=imageDataFormat()),checkDataFormat(ne),re.add(reshapeBias(re.rank,ee,ne))))}function elu$2(re,ee=1){if(ee!==1)throw new NotImplementedError(`Support for alpha values other than 1 (${ee}) is not implemented yet.`);return elu$3(re)}function softsign(re){return tidy(()=>div$1(re,abs$3(re).add(1)))}function dropout(re,ee,ne,ie){return tidy(()=>dropout$1(re,ee,ne,ie))}function hardSigmoid(re){return tidy(()=>{const ee=add$1(.5,mul(.2,re));return clipByValue$1(ee,0,1)})}function inTrainPhase(re,ee,ne=!1){return ne?re():ee()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const VALID_FAN_MODE_VALUES=["fanIn","fanOut","fanAvg"],VALID_DISTRIBUTION_VALUES=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function checkFanMode(re){checkStringTypeUnionValue(VALID_FAN_MODE_VALUES,"FanMode",re)}function checkDistribution(re){checkStringTypeUnionValue(VALID_DISTRIBUTION_VALUES,"Distribution",re)}class Initializer extends Serializable{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class Zeros extends Initializer{apply(ee,ne){return zeros$1(ee,ne)}}Zeros.className="Zeros";registerClass(Zeros);class Ones extends Initializer{apply(ee,ne){return ones(ee,ne)}}Ones.className="Ones";registerClass(Ones);class Constant extends Initializer{constructor(ee){if(super(),typeof ee!="object")throw new ValueError(`Expected argument of type ConstantConfig but got ${ee}`);if(ee.value===void 0)throw new ValueError(`config must have value set but got ${ee}`);this.value=ee.value}apply(ee,ne){return tidy(()=>mul(scalar(this.value),ones(ee,ne)))}getConfig(){return{value:this.value}}}Constant.className="Constant";registerClass(Constant);class RandomUniform extends Initializer{constructor(ee){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=ee.minval||this.DEFAULT_MINVAL,this.maxval=ee.maxval||this.DEFAULT_MAXVAL,this.seed=ee.seed}apply(ee,ne){return randomUniform(ee,this.minval,this.maxval,ne)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}RandomUniform.className="RandomUniform";registerClass(RandomUniform);class RandomNormal extends Initializer{constructor(ee){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=ee.mean||this.DEFAULT_MEAN,this.stddev=ee.stddev||this.DEFAULT_STDDEV,this.seed=ee.seed}apply(ee,ne){if(ne=ne||"float32",ne!=="float32"&&ne!=="int32")throw new NotImplementedError(`randomNormal does not support dType ${ne}.`);return randomNormal(ee,this.mean,this.stddev,ne,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}RandomNormal.className="RandomNormal";registerClass(RandomNormal);class TruncatedNormal extends Initializer{constructor(ee){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=ee.mean||this.DEFAULT_MEAN,this.stddev=ee.stddev||this.DEFAULT_STDDEV,this.seed=ee.seed}apply(ee,ne){if(ne=ne||"float32",ne!=="float32"&&ne!=="int32")throw new NotImplementedError(`truncatedNormal does not support dType ${ne}.`);return truncatedNormal(ee,this.mean,this.stddev,ne,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}TruncatedNormal.className="TruncatedNormal";registerClass(TruncatedNormal);class Identity extends Initializer{constructor(ee){super(),this.gain=ee.gain!=null?ee.gain:1}apply(ee,ne){return tidy(()=>{if(ee.length!==2||ee[0]!==ee[1])throw new ValueError("Identity matrix initializer can only be used for 2D square matrices.");return mul(this.gain,eye(ee[0]))})}getConfig(){return{gain:this.gain}}}Identity.className="Identity";registerClass(Identity);function computeFans(re,ee="channelsLast"){let ne,ie;if(checkDataFormat(ee),re.length===2)ne=re[0],ie=re[1];else if([3,4,5].indexOf(re.length)!==-1){if(ee==="channelsFirst"){const oe=arrayProd(re,2);ne=re[1]*oe,ie=re[0]*oe}else if(ee==="channelsLast"){const oe=arrayProd(re,0,re.length-2);ne=re[re.length-2]*oe,ie=re[re.length-1]*oe}}else{const oe=arrayProd(re);ne=Math.sqrt(oe),ie=Math.sqrt(oe)}return[ne,ie]}class VarianceScaling extends Initializer{constructor(ee){if(super(),ee.scale<0)throw new ValueError(`scale must be a positive float. Got: ${ee.scale}`);this.scale=ee.scale==null?1:ee.scale,this.mode=ee.mode==null?"fanIn":ee.mode,checkFanMode(this.mode),this.distribution=ee.distribution==null?"normal":ee.distribution,checkDistribution(this.distribution),this.seed=ee.seed}apply(ee,ne){const ie=computeFans(ee),oe=ie[0],ae=ie[1];let ce=this.scale;if(this.mode==="fanIn"?ce/=Math.max(1,oe):this.mode==="fanOut"?ce/=Math.max(1,ae):ce/=Math.max(1,(oe+ae)/2),this.distribution==="normal"){const le=Math.sqrt(ce);if(ne=ne||"float32",ne!=="float32"&&ne!=="int32")throw new NotImplementedError(`${this.getClassName()} does not support dType ${ne}.`);return truncatedNormal(ee,0,le,ne,this.seed)}else{const le=Math.sqrt(3*ce);return randomUniform(ee,-le,le,ne)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}VarianceScaling.className="VarianceScaling";registerClass(VarianceScaling);class GlorotUniform extends VarianceScaling{constructor(ee){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:ee==null?null:ee.seed})}getClassName(){return VarianceScaling.className}}GlorotUniform.className="GlorotUniform";registerClass(GlorotUniform);class GlorotNormal extends VarianceScaling{constructor(ee){super({scale:1,mode:"fanAvg",distribution:"normal",seed:ee==null?null:ee.seed})}getClassName(){return VarianceScaling.className}}GlorotNormal.className="GlorotNormal";registerClass(GlorotNormal);class HeNormal extends VarianceScaling{constructor(ee){super({scale:2,mode:"fanIn",distribution:"normal",seed:ee==null?null:ee.seed})}getClassName(){return VarianceScaling.className}}HeNormal.className="HeNormal";registerClass(HeNormal);class HeUniform extends VarianceScaling{constructor(ee){super({scale:2,mode:"fanIn",distribution:"uniform",seed:ee==null?null:ee.seed})}getClassName(){return VarianceScaling.className}}HeUniform.className="HeUniform";registerClass(HeUniform);class LeCunNormal extends VarianceScaling{constructor(ee){super({scale:1,mode:"fanIn",distribution:"normal",seed:ee==null?null:ee.seed})}getClassName(){return VarianceScaling.className}}LeCunNormal.className="LeCunNormal";registerClass(LeCunNormal);class LeCunUniform extends VarianceScaling{constructor(ee){super({scale:1,mode:"fanIn",distribution:"uniform",seed:ee==null?null:ee.seed})}getClassName(){return VarianceScaling.className}}LeCunUniform.className="LeCunNormal";registerClass(LeCunUniform);class Orthogonal extends Initializer{constructor(ee){if(super(),this.DEFAULT_GAIN=1,this.gain=ee.gain==null?this.DEFAULT_GAIN:ee.gain,this.seed=ee.seed,this.seed!=null)throw new NotImplementedError("Random seed is not implemented for Orthogonal Initializer yet.")}apply(ee,ne){return tidy(()=>{if(ee.length<2)throw new NotImplementedError("Shape must be at least 2D.");ee[0]*ee[1]>2e3&&console.warn(`Orthogonal initializer is being called on a matrix with more than 2000 (${ee[0]*ee[1]}) elements: Slowness may result.`);const ie=ee[0]>ee[1]?[ee[1],ee[0]]:ee,oe=randomNormal(ie,0,1,"float32");let ae=linalg.gramSchmidt(oe);return ee[0]>ee[1]&&(ae=ae.transpose()),mul(this.gain,ae)})}getConfig(){return{gain:this.gain,seed:this.seed}}}Orthogonal.className="Orthogonal";registerClass(Orthogonal);const INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function deserializeInitializer(re,ee={}){return deserializeKerasObject(re,SerializationMap.getMap().classNameMap,ee,"initializer")}function serializeInitializer(re){return serializeKerasObject(re)}function getInitializer(re){if(typeof re=="string"){const ee=re in INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?INITIALIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[re]:re;if(ee==="GlorotNormal")return new GlorotNormal;if(ee==="GlorotUniform")return new GlorotUniform;if(ee==="HeNormal")return new HeNormal;if(ee==="HeUniform")return new HeUniform;if(ee==="LeCunNormal")return new LeCunNormal;if(ee==="LeCunUniform")return new LeCunUniform;{const ne={};return ne.className=ee,ne.config={},deserializeInitializer(ne)}}else return re instanceof Initializer?re:deserializeInitializer(re)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let _nextUniqueTensorId=0;function getNextUniqueTensorId(){return _nextUniqueTensorId++}const _uidPrefixes={};function getUid(re=""){return re in _uidPrefixes||(_uidPrefixes[re]=0),_uidPrefixes[re]+=1,re+_uidPrefixes[re].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isArrayOfShapes(re){return Array.isArray(re)&&Array.isArray(re[0])}function normalizeShapeList(re){return re.length===0?[]:Array.isArray(re[0])?re:[re]}function getExactlyOneTensor(re){let ee;if(Array.isArray(re)){if(re.length!==1)throw new ValueError(`Expected Tensor length to be 1; got ${re.length}`);ee=re[0]}else ee=re;return ee}function getExactlyOneShape(re){if(Array.isArray(re)&&Array.isArray(re[0])){if(re.length===1)return re=re,re[0];throw new ValueError(`Expected exactly 1 Shape; got ${re.length}`)}else return re}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function countParamsInWeights(re){let ee=0;for(const ne of re)ne.shape.length===0?ee+=1:ee+=ne.shape.reduce((ie,oe)=>ie*oe);return ee}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DEFAULT_VARIABLE_NAME_PREFIX="Variable";class LayerVariable{constructor(ee,ne="float32",ie=DEFAULT_VARIABLE_NAME_PREFIX,oe=!0,ae=null){this.dtype=ne??"float32",this.shape=ee.shape,this.id=getNextUniqueTensorId(),ie=ie??DEFAULT_VARIABLE_NAME_PREFIX,this.originalName=getScopedTensorName(ie),this.name=getUniqueTensorName(this.originalName),this.trainable_=oe,this.constraint=ae,this.val=variable(ee,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(ee){return this.assertNotDisposed(),checkShapesMatch(this.val,ee),this.val.id!==ee.id&&(this.val.assign(ee),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(ee){this.trainable_=ee,this.val.trainable=ee}}function checkShapesMatch(re,ee){if(re.shape.toString()!==ee.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(re.shape)+" vs. "+JSON.stringify(ee.shape))}function batchGetValue(re){return re.map(ee=>ee.read())}function batchSetValue(re){re.forEach(ee=>{ee[0].write(ee[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class InputSpec{constructor(ee){this.dtype=ee.dtype,this.shape=ee.shape,ee.shape!=null?this.ndim=ee.shape.length:this.ndim=ee.ndim,this.maxNDim=ee.maxNDim,this.minNDim=ee.minNDim,this.axes=ee.axes||{}}}class SymbolicTensor{constructor(ee,ne,ie,oe,ae,ce,le){this.dtype=ee,this.shape=ne,this.sourceLayer=ie,this.inputs=oe,this.callArgs=ae,this.outputTensorIndex=le,this.id=getNextUniqueTensorId(),ce!=null&&(this.originalName=getScopedTensorName(ce),this.name=getUniqueTensorName(this.originalName)),this.rank=ne.length}}let _nextNodeID=0,Node$1=class{constructor(ee,ne){this.callArgs=ne,this.id=_nextNodeID++,this.outboundLayer=ee.outboundLayer,this.inboundLayers=ee.inboundLayers,this.nodeIndices=ee.nodeIndices,this.tensorIndices=ee.tensorIndices,this.inputTensors=ee.inputTensors,this.outputTensors=ee.outputTensors,this.inputMasks=ee.inputMasks,this.outputMasks=ee.outputMasks,this.inputShapes=ee.inputShapes,this.outputShapes=ee.outputShapes;for(const ie of ee.inboundLayers)ie!=null&&ie.outboundNodes.push(this);ee.outboundLayer.inboundNodes.push(this)}getConfig(){const ee=[];for(const ne of this.inboundLayers)ne!=null?ee.push(ne.name):ee.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:ee,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},_nextLayerID=0;class Layer extends Serializable{constructor(ee={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=_nextLayerID++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let ne=ee.name;if(!ne){const ie=this.getClassName();ne=toSnakeCase(ie)+"_"+getUid(ie)}if(this.name=ne,this.trainable_=ee.trainable==null?!0:ee.trainable,ee.inputShape!=null||ee.batchInputShape!=null){let ie;if(ee.batchInputShape!=null)ie=ee.batchInputShape;else if(ee.inputShape!=null){let ae=null;ee.batchSize!=null&&(ae=ee.batchSize),ie=[ae].concat(ee.inputShape)}this.batchInputShape=ie;let oe=ee.dtype;oe==null&&(oe=ee.inputDType),oe==null&&(oe="float32"),this.dtype=oe}ee.weights!=null?this.initialWeights=ee.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(ee,ne){return ee.name+"_ib-"+ne.toString()}getNodeAtIndex(ee,ne){if(this.inboundNodes.length===0)throw new RuntimeError(`The layer has never been called and thus has no defined ${ne}.`);if(this.inboundNodes.length<=ee)throw new ValueError(`Asked to get ${ne} at node ${ee}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[ee]}getInputAt(ee){return singletonOrArray(this.getNodeAtIndex(ee,"input").inputTensors)}getOutputAt(ee){return singletonOrArray(this.getNodeAtIndex(ee,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new AttributeError(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new AttributeError(`Layer ${this.name} is not connected, no input to return.`);return singletonOrArray(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new AttributeError(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new AttributeError(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return singletonOrArray(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(ee=>ee())}get updates(){return this._updates}get built(){return this._built}set built(ee){this._built=ee}get trainable(){return this.trainable_}set trainable(ee){this._trainableWeights.forEach(ne=>ne.trainable=ee),this.trainable_=ee}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(ee=>ee.trainable):[]}set trainableWeights(ee){this._trainableWeights=ee}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(ee=>!ee.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(ee){this._nonTrainableWeights=ee}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(ee){if(ee=toList(ee),this.inputSpec==null||this.inputSpec.length===0)return;const ne=toList(this.inputSpec);if(ee.length!==ne.length)throw new ValueError(`Layer ${this.name} expects ${ne.length} inputs, but it received ${ee.length} input tensors. Input received: ${ee}`);for(let ie=0;ie<ee.length;ie++){const oe=ee[ie],ae=ne[ie];if(ae==null)continue;const ce=oe.rank;if(ae.ndim!=null&&ce!==ae.ndim)throw new ValueError(`Input ${ie} is incompatible with layer ${this.name}: expected ndim=${ae.ndim}, found ndim=${ce}`);if(ae.maxNDim!=null&&ce>ae.maxNDim)throw new ValueError(`Input ${ie} is incompatible with layer ${this.name}: expected max_ndim=${ae.maxNDim}, found ndim=${ce}`);if(ae.minNDim!=null&&ce<ae.minNDim)throw new ValueError(`Input ${ie} is incompatible with layer ${this.name}: expected min_ndim=${ae.minNDim}, found ndim=${ce}.`);if(ae.dtype!=null&&oe.dtype!==ae.dtype)throw new ValueError(`Input ${ie} is incompatible with layer ${this.name} : expected dtype=${ae.dtype}, found dtype=${oe.dtype}.`);if(ae.axes){const le=oe.shape;for(const ue in ae.axes){const he=Number(ue),fe=ae.axes[ue],me=he>=0?le[he]:le[le.length+he];if(fe!=null&&[fe,null].indexOf(me)===-1)throw new ValueError(`Input ${ie} is incompatible with layer ${this.name}: expected axis ${he} of input shape to have value ${fe} but got shape ${le}.`)}}if(ae.shape!=null)for(let le=0;le<ae.shape.length;++le){const ue=ae.shape[le],he=oe.shape[le];if(ue!=null&&he!=null&&ue!==he)throw new ValueError(`Input ${ie} is incompatible with layer ${this.name}: expected shape=${ae.shape}, found shape=${oe.shape}.`)}}}call(ee,ne){return ee}invokeCallHook(ee,ne){this._callHook!=null&&this._callHook(ee,ne)}setCallHook(ee){this._callHook=ee}clearCallHook(){this._callHook=null}apply(ee,ne){ne=ne||{},this.assertNotDisposed();const ie=toList(ee);let oe=!0;for(const ce of ie)if(!(ce instanceof SymbolicTensor)){oe=!1;break}let ae=!0;for(const ce of ie)if(ce instanceof SymbolicTensor){ae=!1;break}if(oe===ae)throw new ValueError("Arguments to apply() must be all SymbolicTensors or all Tensors");return nameScope(this.name,()=>{if(!this.built){this.assertInputCompatibility(ee);const ce=[];for(const le of toList(ee))ce.push(le.shape);this.build(singletonOrArray(ce)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&ae&&(this._refCount=1)}if(this.assertInputCompatibility(ee),ae){let ce=this.call(ee,ne);const le=toList(ce),ue=[];for(let he of le)ie.indexOf(he)!==-1&&(he=he.clone()),ue.push(he);if(ce=singletonOrArray(ue),this.activityRegularizer!=null)throw new NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return ce}else{const ce=collectInputShape(ee),le=this.computeOutputShape(ce);let ue;const he=guessOutputDType(ee);if(this.warnOnIncompatibleInputShape(Array.isArray(ee)?ce[0]:ce),le!=null&&le.length>0&&Array.isArray(le[0])?ue=le.map((fe,me)=>new SymbolicTensor(he,fe,this,toList(ee),ne,this.name,me)):ue=new SymbolicTensor(he,le,this,toList(ee),ne,this.name),this.addInboundNode(ee,ue,null,null,ce,le,ne),this._refCount++,this.activityRegularizer!=null)throw new NotImplementedError("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return ue}})}warnOnIncompatibleInputShape(ee){if(this.batchInputShape!=null)if(ee.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(ee)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let ne=!1;this.batchInputShape.forEach((ie,oe)=>{ie!=null&&ee[oe]!=null&&ee[oe]!==ie&&(ne=!0)}),ne&&console.warn(`The shape of the input tensor (${JSON.stringify(ee)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new AttributeError(`The layer ${this.name} has never been called and thus has no defined output shape.`);const ee=[];for(const ne of this.inboundNodes){const ie=JSON.stringify(ne.outputShapes);ee.indexOf(ie)===-1&&ee.push(ie)}if(ee.length===1){const ne=this.inboundNodes[0].outputShapes;return Array.isArray(ne)&&Array.isArray(ne[0])&&ne.length===1?ne[0]:ne}else throw new AttributeError(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new RuntimeError(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return countParamsInWeights(this.weights)}build(ee){this.built=!0}getWeights(ee=!1){return batchGetValue(ee?this.trainableWeights:this.weights)}setWeights(ee){tidy(()=>{const ne=this.weights;if(ne.length!==ee.length)throw new ValueError(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${ee.length}, but the layer was expecting ${ne.length} weights. Provided weights: ${ee}...`);if(ne.length===0)return;const ie=[],oe=batchGetValue(ne);for(let ae=0;ae<oe.length;++ae){const ce=oe[ae],le=ne[ae],ue=ee[ae];if(!arraysEqual(ce.shape,ue.shape))throw new ValueError(`Layer weight shape ${ce.shape} not compatible with provided weight shape ${ue.shape}`);ie.push([le,ue])}batchSetValue(ie)})}addWeight(ee,ne,ie,oe,ae,ce,le){if(this._addedWeightNames.indexOf(ee)!==-1)throw new ValueError(`Duplicate weight name ${ee} for layer ${this.name}`);this._addedWeightNames.push(ee),ie==null&&(ie="float32"),this.fastWeightInitDuringBuild&&(oe=getInitializer("zeros"));const ue=oe.apply(ne,ie),he=new LayerVariable(ue,ie,ee,ce,le);return ue.dispose(),ae!=null&&this.addLoss(()=>ae.apply(he.read())),ce==null&&(ce=!0),ce?this._trainableWeights.push(he):this._nonTrainableWeights.push(he),he}setFastWeightInitDuringBuild(ee){this.fastWeightInitDuringBuild=ee}addLoss(ee){ee==null||Array.isArray(ee)&&ee.length===0||(ee=toList(ee),this._losses!==void 0&&this._losses!==null&&this.losses.push(...ee))}computeOutputShape(ee){return ee}computeMask(ee,ne){if(!this.supportsMasking){if(ne!=null)if(Array.isArray(ne))ne.forEach(ie=>{if(ie!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return ne}addInboundNode(ee,ne,ie,oe,ae,ce,le=null){const ue=toList(ee);ne=toList(ne),ie=toList(ie),oe=toList(oe),ae=normalizeShapeList(ae),ce=normalizeShapeList(ce);const he=[],fe=[],me=[];for(const ge of ue)he.push(ge.sourceLayer),fe.push(ge.nodeIndex),me.push(ge.tensorIndex);new Node$1({outboundLayer:this,inboundLayers:he,nodeIndices:fe,tensorIndices:me,inputTensors:ue,outputTensors:ne,inputMasks:ie,outputMasks:oe,inputShapes:ae,outputShapes:ce},le);for(let ge=0;ge<ne.length;ge++)ne[ge].sourceLayer=this,ne[ge].nodeIndex=this.inboundNodes.length-1,ne[ge].tensorIndex=ge}getConfig(){const ee={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(ee.batchInputShape=this.batchInputShape),this.dtype!=null&&(ee.dtype=this.dtype),ee}disposeWeights(){return this.weights.forEach(ee=>ee.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let ee=0;return--this._refCount===0&&(ee=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:ee}}}function collectInputShape(re){re=toList(re);const ee=[];for(const ne of re)ee.push(ne.shape);return singletonOrArray(ee)}function guessOutputDType(re){return"float32"}function getSourceInputs(re,ee,ne){if((ee==null||ne!=null&&ne>0)&&(ee=re.sourceLayer,ne=re.nodeIndex),ee.inboundNodes.length===0)return[re];{const ie=ee.inboundNodes[ne];if(ie.inboundLayers.length===0)return ie.inputTensors;{const oe=[];for(let ae=0;ae<ie.inboundLayers.length;ae++){const ce=ie.inputTensors[ae],le=ie.inboundLayers[ae],ue=ie.nodeIndices[ae],he=getSourceInputs(ce,le,ue);for(const fe of he)oe.indexOf(fe)===-1&&oe.push(fe)}return oe}}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class InputLayer extends Layer{constructor(ee){if(super({dtype:ee.dtype,name:ee.name!=null?ee.name:getUid("input").toString()}),ee.batchSize==null&&(ee.batchSize=null),ee.sparse==null&&(ee.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=ee.sparse,ee.inputShape!=null&&ee.batchInputShape!=null)throw new ValueError("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let ne=ee.batchInputShape;if(ne==null){if(ee.inputShape==null)throw new ValueError("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");ne=[ee.batchSize].concat(ee.inputShape)}else if(ee.batchSize!=null)throw new ValueError("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const ie=ee.dtype||"float32";this.batchInputShape=ne,this.dtype=ie,this.inputSpec=[{shape:ne}];const oe=new SymbolicTensor(this.dtype,this.batchInputShape,this,[],{},this.name);oe.nodeIndex=0,oe.tensorIndex=0,new Node$1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[oe],outputTensors:[oe],inputMasks:[null],outputMasks:[null],inputShapes:[ne],outputShapes:[ne]})}apply(ee,ne){throw new ValueError(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}InputLayer.className="InputLayer";registerClass(InputLayer);function Input$3(re){if(re.batchShape==null&&re.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(re.batchShape!=null&&re.shape!=null)throw new ValueError("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let ee=re.batchShape;re.shape!=null&&ee==null&&(ee=[null].concat(re.shape));let ne=re.dtype;return ne==null&&(ne="float32"),new InputLayer({batchInputShape:ee,name:re.name,dtype:ne,sparse:re.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function resolveScalarsInLogs(re){if(re==null)return;const ee=[],ne=[],ie=[];for(const oe in re){const ae=re[oe];if(typeof ae!="number"){const ce=ae;ee.push(ce.data()),ne.push(oe),ie.push(ce)}}if(ee.length>0){const oe=await Promise.all(ee);for(let ae=0;ae<oe.length;++ae)re[ne[ae]]=oe[ae][0];dispose(ie)}}function disposeTensorsInLogs(re){if(re!=null)for(const ee in re){const ne=re[ee];typeof ne!="number"&&ne.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var ModelLoggingVerbosity;(function(re){re[re.SILENT=0]="SILENT",re[re.VERBOSE=1]="VERBOSE"})(ModelLoggingVerbosity||(ModelLoggingVerbosity={}));const DEFAULT_YIELD_EVERY_MS=125;class BaseCallback{constructor(){this.validationData=null}setParams(ee){this.params=ee}async onEpochBegin(ee,ne){}async onEpochEnd(ee,ne){}async onBatchBegin(ee,ne){}async onBatchEnd(ee,ne){}async onTrainBegin(ee){}async onTrainEnd(ee){}setModel(ee){}}class CallbackList{constructor(ee,ne=10){ee==null&&(ee=[]),this.callbacks=ee,this.queueLength=ne}append(ee){this.callbacks.push(ee)}setParams(ee){for(const ne of this.callbacks)ne.setParams(ee)}setModel(ee){for(const ne of this.callbacks)ne.setModel(ee)}async onEpochBegin(ee,ne){ne==null&&(ne={});for(const ie of this.callbacks)await ie.onEpochBegin(ee,ne)}async onEpochEnd(ee,ne){ne==null&&(ne={});for(const ie of this.callbacks)await ie.onEpochEnd(ee,ne)}async onBatchBegin(ee,ne){ne==null&&(ne={});for(const ie of this.callbacks)await ie.onBatchBegin(ee,ne)}async onBatchEnd(ee,ne){ne==null&&(ne={});for(const ie of this.callbacks)await ie.onBatchEnd(ee,ne)}async onTrainBegin(ee){ee==null&&(ee={});for(const ne of this.callbacks)await ne.onTrainBegin(ee)}async onTrainEnd(ee){ee==null&&(ee={});for(const ne of this.callbacks)await ne.onTrainEnd(ee)}}class BaseLogger extends BaseCallback{constructor(){super()}async onEpochBegin(ee){this.seen=0,this.totals={}}async onBatchEnd(ee,ne){ne==null&&(ne={});const ie=ne.size==null?0:ne.size;this.seen+=ie;for(const oe in ne){const ae=ne[oe];if(typeof ae=="number")this.totals.hasOwnProperty(oe)||(this.totals[oe]=0),this.totals[oe]=this.totals[oe]+ae*ie;else{let ce;oe in this.totals?ce=this.totals[oe]:this.totals[oe]=0;const le=tidy(()=>add$1(this.totals[oe],mul(ae,ie)));this.totals[oe]=le,ce!=null&&ce.dispose()}}}async onEpochEnd(ee,ne){if(ne!=null)for(const ie of this.params.metrics)this.totals[ie]!=null&&(typeof this.totals[ie]=="number"?ne[ie]=this.totals[ie]/this.seen:tidy(()=>{const oe=mul(div$1(1,this.seen),this.totals[ie]);ne[ie]=oe,this.totals[ie].dispose(),keep(ne[ie])}))}}let History$1=class extends BaseCallback{async onTrainBegin(ee){this.epoch=[],this.history={}}async onEpochEnd(ee,ne){ne==null&&(ne={}),this.epoch.push(ee);for(const ie in ne)this.history[ie]==null&&(this.history[ie]=[]),this.history[ie].push(ne[ie])}async syncData(){const ee=[],ne=[],ie=[];for(const ae in this.history){const ce=this.history[ae];for(let le=0;le<ce.length;++le)if(typeof ce[le]!="number"){const ue=ce[le];ee.push(ue.data()),ne.push(ae),ie.push(le)}}const oe=await Promise.all(ee);for(let ae=0;ae<oe.length;++ae)this.history[ne[ae]][ie[ae]].dispose(),this.history[ne[ae]][ie[ae]]=oe[ae][0]}};class CustomCallback extends BaseCallback{constructor(ee,ne){if(super(),this.currentEpoch=0,this.yieldEvery=ne||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=DEFAULT_YIELD_EVERY_MS),this.yieldEvery==="never"&&ee.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");isNumber$3(this.yieldEvery)&&(this.maybeWait=debounce(this.maybeWait.bind(this),this.yieldEvery)),this.trainBegin=ee.onTrainBegin,this.trainEnd=ee.onTrainEnd,this.epochBegin=ee.onEpochBegin,this.epochEnd=ee.onEpochEnd,this.batchBegin=ee.onBatchBegin,this.batchEnd=ee.onBatchEnd,this.yield=ee.onYield}async maybeWait(ee,ne,ie){const oe=[];this.yield!=null&&(await resolveScalarsInLogs(ie),oe.push(this.yield(ee,ne,ie))),oe.push(nextFrame()),await Promise.all(oe)}async onEpochBegin(ee,ne){this.currentEpoch=ee,this.epochBegin!=null&&(await resolveScalarsInLogs(ne),await this.epochBegin(ee,ne))}async onEpochEnd(ee,ne){const ie=[];this.epochEnd!=null&&(await resolveScalarsInLogs(ne),ie.push(this.epochEnd(ee,ne))),this.yieldEvery==="epoch"&&ie.push(nextFrame()),await Promise.all(ie)}async onBatchBegin(ee,ne){this.batchBegin!=null&&(await resolveScalarsInLogs(ne),await this.batchBegin(ee,ne))}async onBatchEnd(ee,ne){const ie=[];this.batchEnd!=null&&(await resolveScalarsInLogs(ne),ie.push(this.batchEnd(ee,ne))),this.yieldEvery==="batch"?ie.push(nextFrame()):isNumber$3(this.yieldEvery)&&ie.push(this.maybeWait(this.currentEpoch,ee,ne)),await Promise.all(ie)}async onTrainBegin(ee){this.trainBegin!=null&&(await resolveScalarsInLogs(ee),await this.trainBegin(ee))}async onTrainEnd(ee){this.trainEnd!=null&&(await resolveScalarsInLogs(ee),await this.trainEnd(ee))}}function standardizeCallbacks(re,ee){return re==null&&(re={}),re instanceof BaseCallback?[re]:Array.isArray(re)&&re[0]instanceof BaseCallback?re:toList(re).map(ie=>new CustomCallback(ie,ee))}class CallbackConstructorRegistry{constructor(){}static registerCallbackConstructor(ee,ne){assert$2(ee>=0&&Number.isInteger(ee),()=>`Verbosity level is expected to be an integer >= 0, but got ${ee}`),CallbackConstructorRegistry.checkForDuplicate(ne),CallbackConstructorRegistry.constructors[ee]==null&&(CallbackConstructorRegistry.constructors[ee]=[]),CallbackConstructorRegistry.constructors[ee].push(ne)}static checkForDuplicate(ee){for(const ne in CallbackConstructorRegistry.constructors)CallbackConstructorRegistry.constructors[+ne].forEach(oe=>{if(oe===ee)throw new ValueError("Duplicate callback constructor.")})}static clear(){CallbackConstructorRegistry.constructors={}}static createCallbacks(ee){const ne=[];for(const ie in CallbackConstructorRegistry.constructors){const oe=+ie;ee>=oe&&ne.push(...CallbackConstructorRegistry.constructors[oe])}return ne.map(ie=>new ie)}}CallbackConstructorRegistry.constructors={};function configureCallbacks(re,ee,ne,ie,oe,ae,ce,le,ue){const he=new History$1,fe=[new BaseLogger,...CallbackConstructorRegistry.createCallbacks(ee)];re!=null&&fe.push(...re),fe.push(he);const me=new CallbackList(fe);return me.setParams({epochs:ne,initialEpoch:ie,samples:oe,steps:ae,batchSize:ce,verbose:ee,doValidation:le,metrics:ue}),{callbackList:me,history:he}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function deserialize(re,ee={},ne=!1){return deserializeKerasObject(re,SerializationMap.getMap().classNameMap,ee,"layer",ne)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function l2Normalize(re,ee){return tidy(()=>{re.dtype!=="float32"&&(re=re.asType("float32"));const ne=sum$2(square$2(re),ee,!0),ie=fill$3(ne.shape,epsilon$1()),oe=sqrt$2(maximum$2(ne,ie));return div$1(re,oe)})}function meanSquaredError(re,ee){return tidy(()=>mean$1(square$2(sub$2(ee,re)),-1))}function meanAbsoluteError(re,ee){return tidy(()=>mean$1(abs$3(sub$2(ee,re)),-1))}function meanAbsolutePercentageError(re,ee){return tidy(()=>{const ne=sub$2(re,ee),ie=clipByValue$1(abs$3(re),epsilon$1(),Number.MAX_VALUE),oe=abs$3(div$1(ne,ie));return mul(100,mean$1(oe,-1))})}function meanSquaredLogarithmicError(re,ee){return tidy(()=>{const ne=clipByValue$1(ee,epsilon$1(),Number.MAX_VALUE),ie=log$5(add$1(1,ne)),oe=clipByValue$1(re,epsilon$1(),Number.MAX_VALUE),ae=log$5(add$1(1,oe));return mean$1(square$2(sub$2(ie,ae)),-1)})}function squaredHinge(re,ee){return tidy(()=>{const ne=maximum$2(0,sub$2(1,mul(re,ee)));return mean$1(square$2(ne),-1)})}function hinge(re,ee){return tidy(()=>{const ne=maximum$2(0,sub$2(1,mul(re,ee)));return mean$1(ne,-1)})}function categoricalHinge(re,ee){return tidy(()=>{const ne=sum$2(mul(re,ee),-1),ie=max$4(mul(sub$2(1,re),ee),-1);return maximum$2(0,add$1(1,sub$2(ie,ne)))})}function logcosh(re,ee){return tidy(()=>{const ne=Math.log(2),ie=sub$2(ee,re),oe=sub$2(add$1(ie,softplus$2(mul(-2,ie))),ne);return mean$1(oe,-1)})}function categoricalCrossentropy$1(re,ee,ne=!1){return tidy(()=>{if(ne)ee=softmax$2(ee);else{const ie=sum$2(ee,ee.shape.length-1,!0);ee=div$1(ee,ie)}return ee=clipByValue$1(ee,epsilon$1(),1-epsilon$1()),neg$2(sum$2(mul(re.toFloat(),log$5(ee)),ee.shape.length-1))})}function sparseCategoricalCrossentropy$1(re,ee,ne=!1){return tidy(()=>{const ie=floor$3(flatten$1(re)).toInt();ee=clipByValue$1(ee,epsilon$1(),1-epsilon$1());const oe=ee.shape,ae=oneHot$2(ie,oe[oe.length-1]).reshape(oe);return categoricalCrossentropy$1(ae,ee,ne)})}function sigmoidCrossEntropyWithLogits(re,ee){if(!arraysEqual(re.shape,ee.shape))throw new ValueError(`logits and labels must have the same shape, but got shapes ${JSON.stringify(re.shape)} and ${JSON.stringify(ee.shape)}`);return tidy(()=>{const ne=ee.relu(),ie=ee.abs().neg();return ne.sub(ee.mul(re)).add(ie.exp().log1p())})}function binaryCrossentropy$1(re,ee){return tidy(()=>{let ne;return ne=clipByValue$1(ee,epsilon$1(),1-epsilon$1()),ne=log$5(div$1(ne,sub$2(1,ne))),mean$1(sigmoidCrossEntropyWithLogits(re,ne),-1)})}function kullbackLeiblerDivergence(re,ee){return tidy(()=>{const ne=clipByValue$1(re,epsilon$1(),1),ie=clipByValue$1(ee,epsilon$1(),1);return sum$2(mul(re,log$5(div$1(ne,ie))),-1)})}function poisson(re,ee){return tidy(()=>{const ne=log$5(add$1(epsilon$1(),ee));return mean$1(sub$2(ee,mul(re,ne)),-1)})}function cosineProximity(re,ee){return tidy(()=>{const ne=l2Normalize(re,-1),ie=l2Normalize(ee,-1),oe=mul(ne,ie);return neg$2(sum$2(oe,-1))})}const lossesMap={meanSquaredError,meanAbsoluteError,meanAbsolutePercentageError,meanSquaredLogarithmicError,squaredHinge,hinge,categoricalHinge,logcosh,categoricalCrossentropy:categoricalCrossentropy$1,sparseCategoricalCrossentropy:sparseCategoricalCrossentropy$1,binaryCrossentropy:binaryCrossentropy$1,kullbackLeiblerDivergence,poisson,cosineProximity};function get$3(re){if(typeof re=="string"){if(re in lossesMap)return lossesMap[re];let ee=`Unknown loss ${re}`;throw re.toLowerCase().includes("softmaxcrossentropy")&&(ee=`Unknown loss ${re}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new ValueError(ee)}else return re}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function binaryAccuracy(re,ee){return tidy(()=>{const ne=mul(.5,onesLike$2(ee)),ie=cast$2(greater$2(ee,ne),re.dtype);return mean$1(equal$2(re,ie),-1)})}function categoricalAccuracy(re,ee){return tidy(()=>cast$2(equal$2(argMax$2(re,-1),argMax$2(ee,-1)),"float32"))}function truePositives(re,ee){return tidy(()=>logicalAnd$2(re.equal(1),ee.equal(1)).sum().cast("float32"))}function falsePositives(re,ee){return tidy(()=>logicalAnd$2(re.equal(0),ee.equal(1)).sum().cast("float32"))}function precision(re,ee){return tidy(()=>{const ne=truePositives(re,ee),ie=falsePositives(re,ee),oe=ne.add(ie);return where(greater$2(oe,0),ne.div(oe),0).cast("float32")})}function binaryCrossentropy(re,ee){return binaryCrossentropy$1(re,ee)}function sparseCategoricalAccuracy(re,ee){return re.rank===ee.rank&&(re=re.squeeze([re.rank-1])),ee=ee.argMax(-1),ee.dtype!==re.dtype&&(ee=ee.asType(re.dtype)),equal$2(re,ee).asType("float32")}const mse=meanSquaredError,MSE=meanSquaredError,mae=meanAbsoluteError,MAE=meanAbsoluteError,mape=meanAbsolutePercentageError,MAPE=meanAbsolutePercentageError,categoricalCrossentropy=categoricalCrossentropy$1,cosine=cosineProximity,sparseCategoricalCrossentropy=sparseCategoricalCrossentropy$1,metricsMap={binaryAccuracy,categoricalAccuracy,precision,categoricalCrossentropy,sparseCategoricalCrossentropy,mse,MSE,mae,MAE,mape,MAPE,cosine};function get$2(re){if(typeof re=="string"&&re in metricsMap)return metricsMap[re];if(typeof re!="string"&&re!=null)return re;throw new ValueError(`Unknown metric ${re}`)}function getLossOrMetricName(re){if(assert$1(re!==null,`Unknown LossOrMetricFn ${re}`),typeof re=="string")return re;{let ee;for(const ne of Object.keys(lossesMap))if(lossesMap[ne]===re){ee=ne;break}if(ee!==void 0)return ee;for(const ne of Object.keys(metricsMap))if(metricsMap[ne]===re){ee=ne;break}return ee!==void 0?ee:re.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function getOptimizer(re){const ee={Adagrad:()=>train.adagrad(.01),Adadelta:()=>train.adadelta(1,.95,epsilon$1()),Adam:()=>train.adam(.001,.9,.999,epsilon$1()),Adamax:()=>train.adamax(.002,.9,.999,epsilon$1(),0),RMSProp:()=>train.rmsprop(.001,.9,0,epsilon$1()),SGD:()=>train.sgd(.01)};if(ee.adagrad=ee.Adagrad,ee.adadelta=ee.Adadelta,ee.adam=ee.Adam,ee.adamax=ee.Adamax,ee.rmsprop=ee.RMSProp,ee.sgd=ee.SGD,re in ee)return ee[re]();throw new ValueError(`Unknown Optimizer ${re}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH=1*1024*1024;function checkUserDefinedMetadata(re,ee,ne=!1){if(re==null||typeof re!="object"||Object.getPrototypeOf(re)!==Object.prototype||!plainObjectCheck(re))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(ne){const ie=JSON.stringify(re);ie.length>MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH&&console.warn(`User-defined metadata of model "${ee}" is too large in size (length=${ie.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${MAX_USER_DEFINED_METADATA_SERIALIZED_LENGTH}.`)}}function plainObjectCheck(re){if(re===null)return!0;if(typeof re=="object")if(Object.getPrototypeOf(re)===Object.prototype){const ee=Object.keys(re);for(const ne of ee)if(typeof ne!="string"||!plainObjectCheck(re[ne]))return!1;return!0}else if(Array.isArray(re)){for(const ee of re)if(!plainObjectCheck(ee))return!1;return!0}else return!1;else{const ee=typeof re;return ee==="string"||ee==="number"||ee==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function printSummary(re,ee,ne,ie=console.log){const oe=isModelSequentialLike(re),ae=["Layer (type)","Output shape","Param #"];oe?(ee=ee||65,ne=ne||[.45,.85,1]):(ee=ee||98,ne=ne||[.33,.55,.67,1]),ne[ne.length-1]<=1&&(ne=ne.map(fe=>Math.floor(ee*fe)));let ce;if(!oe){ae.push("Receives inputs"),ce=[];for(const fe in re.nodesByDepth)ce.push(...re.nodesByDepth[fe])}ie("_".repeat(ee)),printRow(ae,ne,ie),ie("=".repeat(ee));const le=re.layers;for(let fe=0;fe<le.length;++fe)oe?printLayerSummary(le[fe],ne,ie):printLayerSummaryWithConnections(le[fe],ne,ce,ie),ie((fe===le.length-1?"=":"_").repeat(ee));re.checkTrainableWeightsConsistency();const ue=countTrainableParams(re),he=countParamsInWeights(re.nonTrainableWeights);ie(`Total params: ${ue+he}`),ie(`Trainable params: ${ue}`),ie(`Non-trainable params: ${he}`),ie("_".repeat(ee))}function countTrainableParams(re){let ee;return re.collectedTrainableWeights!=null?ee=countParamsInWeights(re.collectedTrainableWeights):ee=countParamsInWeights(re.trainableWeights),ee}function isModelSequentialLike(re){let ee=!0;const ne=[],ie=[];for(const oe in re.nodesByDepth)ne.push(re.nodesByDepth[oe]);for(const oe of ne){if(oe.length>1||oe.length===1&&oe[0].inboundLayers.length>1){ee=!1;break}ie.push(...oe)}if(ee)for(const oe of re.layers){let ae=!1;for(const ce of oe.inboundNodes)if(ie.indexOf(ce)!==-1)if(ae){ee=!1;break}else ae=!0;if(!ee)break}return ee}function printRow(re,ee,ne=console.log){let ie="";for(let oe=0;oe<re.length;++oe)oe>0&&(ie=ie.slice(0,ie.length-1)+" "),ie+=re[oe],ie=ie.slice(0,ee[oe]),ie+=" ".repeat(ee[oe]-ie.length);ne(ie)}function printLayerSummary(re,ee,ne){let ie;try{ie=JSON.stringify(re.outputShape)}catch{ie="multiple"}const oe=re.name,ae=re.getClassName(),ce=[`${oe} (${ae})`,ie,re.countParams().toString()];printRow(ce,ee,ne)}function printLayerSummaryWithConnections(re,ee,ne,ie){let oe;try{oe=JSON.stringify(re.outputShape)}catch{oe="multiple"}const ae=[];for(const fe of re.inboundNodes)if(!(ne!=null&&ne.length>0&&ne.indexOf(fe)===-1))for(let me=0;me<fe.inboundLayers.length;++me){const ge=fe.inboundLayers[me].name,ve=fe.nodeIndices[me],ye=fe.tensorIndices[me];ae.push(`${ge}[${ve}][${ye}]`)}const ce=re.name,le=re.getClassName(),ue=ae.length===0?"":ae[0],he=[`${ce} (${le})`,oe,re.countParams().toString(),ue];printRow(he,ee,ie);for(let fe=1;fe<ae.length;++fe)printRow(["","","",ae[fe]],ee,ie)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isArrayItemInputOrOutputName(re,ee,ne){return(re==="inboundNodes"||re==="outputLayers"||re==="inputLayers")&&ee===0&&typeof ne=="string"}function convertPythonicToTs(re,ee){if(re===null)return null;if(typeof re=="string")return toCamelCase(re);if(typeof re=="number"||typeof re=="boolean")return re;if(re instanceof Array){const ne=[],ie=re.length;for(let oe=0;oe<ie;++oe){const ae=re[oe];isArrayItemInputOrOutputName(ee,oe,ae)?ne.push(ae):ne.push(convertPythonicToTs(ae,ee))}return ne}else{const ne={};for(const ie of Object.keys(re)){const oe=re[ie];if(ie==="name"&&typeof oe=="string")ne[ie]=oe;else{const ae=toCamelCase(ie);ne[ae]=convertPythonicToTs(oe,ae)}}return ne}}function convertTsToPythonic(re,ee){if(re==null)return null;if(typeof re=="string")return toSnakeCase(re);if(typeof re=="number"||typeof re=="boolean")return re;if(re instanceof Array){const ne=[],ie=re.length;for(let oe=0;oe<ie;++oe){const ae=re[oe];isArrayItemInputOrOutputName(ee,oe,ae)?ne.push(ae):ne.push(convertTsToPythonic(ae,ee))}return ne}else{const ne={};for(const ie of Object.keys(re)){const oe=re[ie],ae=toSnakeCase(ie);(ie==="name"||ie==="className")&&typeof oe=="string"?ne[ae]=oe:ne[ae]=convertTsToPythonic(oe,ie)}return ne}}/** @license See the LICENSE file. */const version$1="2.8.6";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function assertFeedCompatibility(re,ee){if(re.dtype==null||re.dtype===ee.dtype)return ee;try{return cast$3(ee,re.dtype)}catch{throw new ValueError(`The dtype of the feed (${ee.dtype}) can not be cast to the dtype of the key '${re.name}' (${re.dtype}).`)}}class FeedDict{constructor(ee){if(this.id2Value={},this.id2Mask={},this.name2Id={},ee instanceof FeedDict)for(const ne in ee.id2Value)this.id2Value[ne]=ee.id2Value[ne],ne in ee.id2Mask&&(this.id2Mask[ne]=ee.id2Mask[ne]);else{if(ee==null)return;for(const ne of ee)this.add(ne.key,ne.value)}}add(ee,ne,ie){if(this.id2Value[ee.id]==null)this.id2Value[ee.id]=assertFeedCompatibility(ee,ne),this.name2Id[ee.name]=ee.id,ie!=null&&(this.id2Mask[ee.id]=ie);else throw new ValueError(`Duplicate key: name=${ee.name}, id=${ee.id}`);return this}addFeed(ee){this.add(ee.key,ee.value)}hasKey(ee){return this.id2Value[ee.id]!=null}names(){return Object.keys(this.name2Id)}getValue(ee){if(ee instanceof SymbolicTensor){if(this.id2Value[ee.id]==null)throw new ValueError(`Nonexistent key: ${ee.name}`);return this.id2Value[ee.id]}else{const ne=this.name2Id[ee];if(ne==null)throw new ValueError(`Feed dict has no SymbolicTensor name: ${ee}`);return this.id2Value[ne]}}getMask(ee){if(ee instanceof SymbolicTensor){if(this.id2Value[ee.id]==null)throw new ValueError(`Nonexistent key: ${ee.name}`);return this.id2Mask[ee.id]}else{const ne=this.name2Id[ee];if(ne==null)throw new ValueError(`Feed dict has no SymbolicTensor name: ${ee}`);return this.id2Mask[ne]}}disposeMasks(){this.id2Mask!=null&&dispose(this.id2Mask)}}const cachedSorted={},cachedRecipientCounts={};function execute(re,ee,ne,ie){const oe=ne==null?!1:ne.training,ae=Array.isArray(re),ce=ae?re:[re],le=ce.map(ye=>ye.name),ue=[],he=ee.names();for(const ye of le)he.indexOf(ye)!==-1?ue.push(ee.getValue(ye)):ue.push(null);ie!=null&&(ie.maxNumTensors=-1/0,ie.minNumTensors=1/0);const fe=le.join(",")+"|"+ee.names().join(",");let me,ge;if(cachedSorted[fe]==null){const ye=getTopologicalSortAndRecipientCounts(ce,ee);me=ye.sorted,ge=ye.recipientCounts,cachedSorted[fe]=me,cachedRecipientCounts[fe]=ge}me=cachedSorted[fe],ge={},oe||Object.assign(ge,cachedRecipientCounts[fe]);const ve=new FeedDict(ee);for(let ye=0;ye<me.length;++ye){if(ie!=null){const Be=memory().numTensors;Be>ie.maxNumTensors&&(ie.maxNumTensors=Be),Be<ie.minNumTensors&&(ie.minNumTensors=Be)}const be=me[ye],Ce=be.sourceLayer;if(Ce instanceof InputLayer)continue;const Se=[],$e=[],Te=[];let Ne=!1;for(const Be of be.inputs){const Me=ve.getValue(Be),Le=ve.getMask(Be);Se.push(Me),$e.push(Le),Le!=null&&(Ne=!0),oe||(ge[Be.name]--,ge[Be.name]===0&&!ee.hasKey(Be)&&le.indexOf(Be.name)===-1&&!Me.isDisposed&&Be.sourceLayer.stateful!==!0&&Te.push(Me))}Ne&&(ne=ne||{},ne.mask=$e[0]);const Ie=toList(Ce.apply(Se,ne));let ke=null;Ce.supportsMasking&&(ke=Ce.computeMask(Se,$e));const De=getNodeOutputs(be),Oe=Array.isArray(De)?De:[De];for(let Be=0;Be<Oe.length;++Be){ve.hasKey(Oe[Be])||ve.add(Oe[Be],Ie[Be],Array.isArray(ke)?ke[0]:ke);const Me=le.indexOf(Oe[Be].name);Me!==-1&&(ue[Me]=Ie[Be])}oe||dispose(Te)}return ve.disposeMasks(),ae?ue:ue[0]}function getTopologicalSortAndRecipientCounts(re,ee){assert$2(re!=null&&re.length>0,()=>"Expected at least one fetch, got none");let ne=[],ie={};if(re.length===1){const oe=getTopologicalSortAndRecipientCountsForOneFetch(re[0],ee);ne=oe.sorted,ie=oe.recipientMap}else{const oe=new Set;for(const ae of re){const{sorted:ce,recipientMap:le}=getTopologicalSortAndRecipientCountsForOneFetch(ae,ee);for(const ue of ce)oe.has(ue.name)||(ne.push(ue),oe.add(ue.name));for(const ue in le)ie[ue]==null&&(ie[ue]=new Set),le[ue].forEach(he=>ie[ue].add(he))}}return{sorted:ne,recipientCounts:recipientMap2Counts(ie)}}function recipientMap2Counts(re){const ee={};for(const ne in re)ee[ne]=re[ne].size;return ee}function getTopologicalSortAndRecipientCountsForOneFetch(re,ee){const ne=new Set,ie=[],oe={};for(const le of ee.names())ne.add(le);const ae=[],ce=[];for(ae.push(re);ae.length>0;){const le=ae[ae.length-1];if(ne.has(le.name)){ae.pop();continue}const ue=ce[ce.length-1]===ae.length-1;if(le.inputs.length===0||ue)ae.pop(),ie.push(le),ne.add(le.name),ue&&ce.pop();else{ce.push(ae.length-1);for(const he of le.inputs)oe[he.name]==null&&(oe[he.name]=new Set),oe[he.name].add(le.name),!ne.has(he.name)&&ae.push(he)}}return{sorted:ie,recipientMap:oe}}function getNodeOutputs(re){let ee;if(re.sourceLayer.inboundNodes.length===1)ee=re.sourceLayer.output;else{let ne=null;for(let ie=0;ie<re.sourceLayer.inboundNodes.length;++ie)for(const oe of re.sourceLayer.inboundNodes[ie].outputTensors)if(oe.id===re.id){ne=ie;break}ee=re.sourceLayer.getOutputAt(ne)}return ee}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Container extends Layer{constructor(ee){if(super({}),this.containerNodes=new Set,this.name=ee.name,this.name==null){const $e=this.getClassName().toLowerCase();this.name=getUid($e)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(ee.inputs)?this.inputs=ee.inputs.slice():this.inputs=[ee.inputs],Array.isArray(ee.outputs)?this.outputs=ee.outputs.slice():this.outputs=[ee.outputs],unique$3(this.inputs).length!==this.inputs.length)throw new ValueError(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map($e=>$e.name)}`);unique$3(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map($e=>$e.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const $e of this.outputs){const Te=$e.sourceLayer,Ne=$e.nodeIndex,Ie=$e.tensorIndex;this.outputLayers.push(Te),this.outputLayersNodeIndices.push(Ne),this.outputLayersTensorIndices.push(Ie)}for(const $e of this.inputs){const Te=$e.sourceLayer,Ne=$e.nodeIndex,Ie=$e.tensorIndex;assert$1(Ne===0,"input layer has >1 nodes"),assert$1(Ie===0,"input layer has >1 tensors"),this.inputLayers.push(Te),this.inputLayersNodeIndices.push(Ne),this.inputLayersTensorIndices.push(Ie)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let $e=0;$e<this.inputLayers.length;$e++){const Te=this.inputLayers[$e];if(!(Te instanceof InputLayer))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${ee.inputs}. Input ${$e} (0-based) originates from layer type ${Te.getClassName()}.`);this.inputNames.push(Te.name),this.feedInputShapes.push(Te.batchInputShape),this.feedInputNames.push(Te.name)}for(const $e of this.outputLayers)this.outputNames.push($e.name);this.internalInputShapes=this.inputs.map($e=>$e.shape),this.internalOutputShapes=this.outputs.map($e=>$e.shape);const ne={},ie={},oe={},ae={},ce={},le=[],ue=($e,Te,Ne,Ie,ke,De)=>{(Ie==null||ke==null||De==null)&&(Ie=$e.sourceLayer,ke=$e.nodeIndex,De=$e.tensorIndex);const Oe=Ie.inboundNodes[ke];if(Ne.indexOf(Oe)!==-1)throw new RuntimeError(`The tensor ${$e.name} at layer "${Ie.name}" is part of a cycle.`);if(Te.indexOf(Oe)!==-1)return;this.containerNodes.add(Container.nodeKey(Ie,ke)),Ie.id in ce||(ce[Ie.id]=Object.keys(ce).length),Ne.indexOf(Oe)===-1&&Ne.push(Oe);const Be=Oe.inboundLayers.length;for(let Me=0;Me<Be;Me++){const Le=Oe.inputTensors[Me],je=Oe.inboundLayers[Me],ze=Oe.nodeIndices[Me],Ve=Oe.tensorIndices[Me];ue(Le,Te,Ne,je,ze,Ve)}for(Te.push(Oe);Ne.indexOf(Oe)>=0;)Ne.splice(Ne.indexOf(Oe),1);le.push(Oe)},he=[],fe=[];for(const $e of this.outputs)ue($e,he,fe);const me=le.slice().reverse();for(const $e of me){ie[$e.id]=$e,$e.id in ne||(ne[$e.id]=0);let Te=ne[$e.id];const Ne=oe[$e.outboundLayer.id]==null?0:oe[$e.outboundLayer.id];Te=Math.max(Te,Ne),oe[$e.outboundLayer.id]=Te,ae[$e.outboundLayer.id]=$e.outboundLayer,ne[$e.id]=Te;for(let Ie=0;Ie<$e.inboundLayers.length;Ie++){const ke=$e.inboundLayers[Ie],De=$e.nodeIndices[Ie],Oe=ke.inboundNodes[De],Be=ne[Oe.id]==null?0:ne[Oe.id];ne[Oe.id]=Math.max(Te+1,Be),ie[Oe.id]=Oe}}const ge={};for(const $e in ne){const Te=ne[$e];Te in ge||(ge[Te]=[]),ge[Te].push(ie[$e])}const ve={};for(const $e in oe){const Te=oe[$e];Te in ve||(ve[Te]=[]),ve[Te].push(ae[$e])}let ye=Object.keys(ve).map($e=>parseInt($e,10)).sort(reverseNumberCompare);this.layers=[];for(const $e of ye){const Te=ve[$e];Te.sort((Ne,Ie)=>{const ke=ce[Ne.id],De=ce[Ie.id];return ke<De?-1:ke>De?1:0});for(const Ne of Te)Ne instanceof Container&&this.internalContainerRefs.push(Ne),this.layers.push(Ne)}this.layersByDepth=ve,ye=Object.keys(ge).map($e=>parseInt($e,10)).sort(reverseNumberCompare);const be=this.inputs.slice(),Ce=[];for(const $e of ye)for(const Te of ge[$e]){const Ne=Te.outboundLayer;if(Ne!=null){for(const Ie of Te.inputTensors)if(be.indexOf(Ie)===-1)throw new RuntimeError(`Graph disconnected: cannot obtain value for tensor ${Ie} at layer "${Ne.name}". The following previous layers were accessed without issue: ${Ce}`);for(const Ie of Te.outputTensors)be.push(Ie);Ce.push(Ne.name)}}this.nodesByDepth=ge;const Se=this.layers.map($e=>$e.name);for(const $e of Se){const Te=Se.filter(Ne=>Ne===$e).length;if(Te!==1)throw new RuntimeError(`The name "${$e}" is used ${Te} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(Se))}this.outboundNodes=[],this.inboundNodes=[],new Node$1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map($e=>null),outputMasks:this.outputs.map($e=>null),inputShapes:this.inputs.map($e=>$e.shape),outputShapes:this.outputs.map($e=>$e.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const ee={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const ne of this.layers)ee.numDisposedVariables+=ne.dispose().numDisposedVariables;for(const ne of this.internalContainerRefs)ee.numDisposedVariables+=ne.dispose().numDisposedVariables}return ee.refCountAfterDispose=this._refCount,ee}get trainable(){return this.trainable_}set trainable(ee){this.layers.forEach(ne=>{ne._trainableWeights.forEach(ie=>ie.trainable=ee)}),this.trainable_=ee}get trainableWeights(){if(this._trainableWeights.length>0)throw new ValueError("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let ee=[];for(const ne of this.layers)ee=ee.concat(ne.trainableWeights);return ee}get nonTrainableWeights(){const ee=[];for(const ne of this.layers)ee.push(...ne.nonTrainableWeights);if(!this.trainable){const ne=[];for(const ie of this.layers)ne.push(...ie.trainableWeights);return ne.concat(ee)}return ee}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(ee,ne=!0){const ie={};let oe=0;for(const ce of this.layers)for(const le of ce.weights){if(ie[le.originalName]!=null)throw new ValueError(`Duplicate weight name: ${le.originalName}`);ie[le.originalName]=le,oe++}const ae=[];for(const ce in ee){let le=ce;if(ie[ce]==null){const ue=ce.split("/");le=ue.slice(0,-2).concat([ue[ue.length-1]]).join("/")}if(ie[le]!=null)ae.push([ie[le],ee[ce]]);else if(ne)throw new ValueError(`Provided weight data has no target variable: ${ce}`);delete ie[le]}if(ne){const ce=[];for(const le in ie)ce.push(le);if(ce.length>0)throw new ValueError(`${ce.length} of ${oe} weights are not set: ${ce}`)}batchSetValue(ae)}updatedConfig(){const ee=this.getConfig(),ne={};return ne.className=this.getClassName(),ne.config=ee,ne.kerasVersion=`tfjs-layers ${version$1}`,ne.backend="TensorFlow.js",ne}toJSON(ee,ne=!0){const ie=convertTsToPythonic(this.updatedConfig());return ne?JSON.stringify(ie):ie}call(ee,ne){return tidy(()=>{ee=toList(ee);const ie=new FeedDict;for(let oe=0;oe<this.inputs.length;++oe)ie.add(this.inputs[oe],ee[oe]);return execute(this.outputs,ie,ne)})}computeMask(ee,ne){return tidy(()=>{ee=toList(ee);let ie;return ne==null?ie=pyListRepeat(null,ee.length):ie=toList(ne),this.runInternalGraph(ee,ie)[1]})}computeOutputShape(ee){const ne=normalizeShapeList(ee);if(ne.length!==this.inputLayers.length)throw new ValueError(`Invalid inputShape argument ${ee}: model has ${this.inputLayers.length} tensor inputs.`);const ie={};for(let le=0;le<ne.length;le++){const ue=this.inputLayers[le],he=ne[le],fe=ue.name+"_0_0";ie[fe]=he}const oe=Object.keys(this.nodesByDepth).map(le=>parseInt(le,10)).sort(reverseNumberCompare);if(oe.length>1)for(const le of oe){const ue=this.nodesByDepth[le];for(const he of ue){const fe=he.outboundLayer;if(this.inputLayers.map(be=>be.id).indexOf(fe.id)!==-1)continue;const me=[];for(let be=0;be<he.inboundLayers.length;be++){const Ce=he.inboundLayers[be],Se=he.nodeIndices[be],$e=he.tensorIndices[be],Te=`${Ce.name}_${Se}_${$e}`,Ne=ie[Te];me.push(Ne)}const ge=fe.computeOutputShape(singletonOrArray(me)),ve=normalizeShapeList(ge),ye=fe.inboundNodes.indexOf(he);for(let be=0;be<ve.length;be++){const Ce=`${fe.name}_${ye}_${be}`;ie[Ce]=ve[be]}}}const ae=[],ce=[];for(let le=0;le<this.outputLayers.length;le++){const ue=this.outputLayers[le],he=this.outputLayersNodeIndices[le],fe=this.outputLayersTensorIndices[le],me=`${ue.name}_${he}_${fe}`;ce.push(me)}for(let le=0;le<ce.length;le++){const ue=ce[le];assert$1(ue in ie),ae.push(ie[ue])}return singletonOrArray(ae)}runInternalGraph(ee,ne){ne==null&&(ne=pyListRepeat(null,ee.length));const ie={};for(let ue=0;ue<this.inputs.length;++ue){const he=this.inputs[ue],fe=ee[ue],me=ne[ue];ie[he.id]=[fe,me]}const oe=Object.keys(this.nodesByDepth).map(ue=>parseInt(ue,10)).sort(reverseNumberCompare);for(const ue of oe){const he=this.nodesByDepth[ue];for(const fe of he){const me=fe.outboundLayer,ge=fe.inputTensors,ve=fe.outputTensors,ye=new Array;for(const be of ge)be.id in ie&&ye.push(ie[be.id]);if(ye.length===ge.length){let be={},Ce,Se,$e,Te;if(fe.callArgs!=null&&(be=fe.callArgs),ye.length===1){const[Ne,Ie]=ye[0];be.mask==null&&(be.mask=Ie),$e=toList(me.call(Ne,be)),Te=toList(me.computeMask(Ne,Ie)),Ce=[Ne],Se=[Ie]}else Ce=ye.map(Ne=>Ne[0]),Se=ye.map(Ne=>Ne[1]),be.mask==null&&(be.mask=Se),$e=toList(me.call(Ce,be)),Te=toList(me.computeMask(Ce,Se));if(me.activityRegularizer)throw new NotImplementedError("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let Ne=0;Ne<ve.length;++Ne){const Ie=ve[Ne],ke=$e[Ne],De=Te[Ne];ie[Ie.id]=[ke,De]}}}}const ae=[],ce=[],le=[];for(const ue of this.outputs){assert$1(ue.id in ie,`Could not compute output ${ue.name} : ${ue.id}`);const[he,fe]=ie[ue.id];le.push(he.shape),ae.push(he),ce.push(fe)}return[ae,ce,le]}buildNodeConversionMap(ee){const ne={};let ie;for(const oe of this.layers){ie=oe instanceof Container?1:0;for(let ae=0;ae<oe.inboundNodes.length;ae++){const ce=Container.nodeKey(oe,ae);this.containerNodes.has(ce)&&(ne[ce]=ie,ie+=1)}}return ne}getLayer(ee,ne){if(ne!=null){if(this.layers.length<=ne)throw new ValueError(`Was asked to retrieve layer at index ${ne}, but model only has ${this.layers.length} layer(s).`);return this.layers[ne]}else if(ee==null)throw new ValueError("Provide either a layer name or layer index");for(const ie of this.layers)if(ie.name===ee)return ie;throw new ValueError(`No such layer: ${ee}`)}calculateLosses(){return tidy(()=>{const ee=[];for(const ne of this.layers)for(let ie=0;ie<ne.inboundNodes.length;++ie){const oe=Container.nodeKey(ne,ie);this.containerNodes.has(oe)&&ee.push(...ne.calculateLosses())}return ee})}getConfig(){const ee={name:this.name},ne=this.buildNodeConversionMap(this.layers),ie=[];for(const ce of this.layers){const le=ce.getClassName(),ue=ce.getConfig(),he=[];for(let me=0;me<ce.inboundNodes.length;me++){const ge=ce.inboundNodes[me],ve=Container.nodeKey(ce,me);let ye={};if(this.containerNodes.has(ve)){if(ge.callArgs)try{JSON.stringify(ge.callArgs),ye=ge.callArgs}catch{console.warn(`Layer ${ce.name} was passed non-serializable keyword arguments: ${ge.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),ye={}}if(ge.inboundLayers.length>0){const be=[];for(let Ce=0;Ce<ge.inboundLayers.length;Ce++){const Se=ge.inboundLayers[Ce],$e=ge.nodeIndices[Ce],Te=ge.tensorIndices[Ce],Ne=Container.nodeKey(Se,$e);let Ie=ne[Ne];Ie==null&&(Ie=0),be.push([Se.name,Ie,Te,ye])}he.push(be)}}}const fe={};fe.name=ce.name,fe.className=le,fe.config=ue,fe.inboundNodes=he,ie.push(fe)}ee.layers=ie;const oe=[];for(let ce=0;ce<this.inputLayers.length;ce++){const le=this.inputLayers[ce],ue=this.inputLayersNodeIndices[ce],he=Container.nodeKey(le,ue);if(!this.containerNodes.has(he))continue;let fe=ne[he];fe==null&&(fe=0);const me=this.inputLayersTensorIndices[ce];oe.push([le.name,fe,me])}ee.inputLayers=oe;const ae=[];for(let ce=0;ce<this.outputLayers.length;ce++){const le=this.outputLayers[ce],ue=this.outputLayersNodeIndices[ce],he=Container.nodeKey(le,ue);if(!this.containerNodes.has(he))continue;let fe=ne[he];fe==null&&(fe=0);const me=this.outputLayersTensorIndices[ce];ae.push([le.name,fe,me])}return ee.outputLayers=ae,ee}static fromConfig(ee,ne,ie={},oe=!1){const ae={},ce={};function le(Ce,Se){Ce.name in ce?ce[Ce.name].push(Se):ce[Ce.name]=[Se]}function ue(Ce,Se){const $e=[];let Te;for(const Ne of Se){const Ie=Ne[0],ke=Ne[1],De=Ne[2];if(Te=Ne[3]==null?{}:Ne[3],!(Ie in ae)){le(Ce,Se);return}const Oe=ae[Ie];if(Oe.inboundNodes.length<=ke){le(Ce,Se);return}const Be=Oe.inboundNodes[ke];$e.push(Be.outputTensors[De])}$e.length>0&&Ce.apply(singletonOrArray($e),Te)}function he(Ce){const Se=Ce.name,$e=deserialize(Ce,ne.customObjects!=null?ne.customObjects:{});$e.setFastWeightInitDuringBuild(oe),ae[Se]=$e,Ce.inboundNodes.forEach(Ne=>{if(!(Ne instanceof Array))throw new ValueError(`Corrupted configuration, expected array for nodeData: ${Ne}`);le($e,Ne)})}const fe=ne.name,me=ne.layers;for(const Ce of me)he(Ce);for(;!isObjectEmpty(ce);)for(const Ce of me){const Se=ae[Ce.name];if(Se.name in ce){const $e=ce[Se.name];delete ce[Se.name];for(const Te of $e)ue(Se,Te)}}const ge=[],ve=[],ye=ne.inputLayers;for(const Ce of ye){const Se=Ce[0],$e=Ce[1],Te=Ce[2];assert$1(Se in ae);const Ie=ae[Se].inboundNodes[$e].outputTensors;ge.push(Ie[Te])}const be=ne.outputLayers;for(const Ce of be){const Se=Ce[0],$e=Ce[1],Te=Ce[2];assert$1(Se in ae);const Ie=ae[Se].inboundNodes[$e].outputTensors;ve.push(Ie[Te])}return new ee({inputs:ge,outputs:ve,name:fe})}get stateful(){if(this._stateful)throw new ValueError("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const ee of this.layers)if(ee.stateful)return!0;return!1}resetStates(){tidy(()=>{this.layers.forEach(ee=>{ee.stateful&&ee.resetStates()})})}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function standardizeSampleOrClassWeights(re,ee,ne){const ie=ee.length;if(re==null||Array.isArray(re)&&re.length===0)return ee.map(oe=>null);if(ie===1)return Array.isArray(re)&&re.length===1?re:typeof re=="object"&&ee[0]in re?[re[ee[0]]]:[re];if(Array.isArray(re)){if(re.length!==ie)throw new Error(`Provided ${ne} is an array of ${re.length} element(s), but the model has ${ie} outputs. Make sure a set of weights is provided for each model output.`);return re}else if(typeof re=="object"&&Object.keys(re).length>0&&typeof re[Object.keys(re)[0]]=="object"){const oe=[];return ee.forEach(ae=>{ae in re?oe.push(re[ae]):oe.push(null)}),oe}else throw new Error(`The model has multiple (${ie}) outputs, so ${ne} must be either an array with ${ie} elements or an object with ${ee} keys. Provided ${ne} not understood: ${JSON.stringify(re)}`)}function standardizeClassWeights(re,ee){return standardizeSampleOrClassWeights(re,ee,"classWeight")}async function standardizeWeights(re,ee,ne,ie){if(ee!=null||ie!=null)throw new Error("Support sampleWeight is not implemented yet");if(ne!=null){const oe=tidy(()=>{if(re.shape.length===1)return re.clone();if(re.shape.length===2){if(re.shape[1]>1)return re.argMax(1);if(re.shape[1]===1)return re.reshape([re.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${re.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${re.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),ae=Array.from(await oe.data());dispose(oe);const ce=[];return ae.forEach(le=>{if(ne[le]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${le} exists in the data but not in classWeight`);ce.push(ne[le])}),tensor1d(ce,"float32")}else return null}function computeWeightedLoss(re,ee){return mul(re,ee)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const DEFAULT_VALIDATION_BATCH_SIZE=32;function standardizeDataIteratorOutput(re,ee){let ne,ie;const oe=ee;ne=oe.xs,ie=oe.ys,assert$2(ne!=null&&ie!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${ee}`);const ae=flattenTensorOrArrayOrMap("input",re.inputNames,ne),ce=flattenTensorOrArrayOrMap("output",re.outputNames,ie),le=ae[0].shape[0];assert$2(ae.length===re.inputs.length,()=>`LayersModel has ${re.inputs.length} inputs, but the dataset provides ${ae.length} inputs.  (Expected input keys: ${JSON.stringify(re.inputNames)})`),assert$2(ce.length===re.outputs.length,()=>`LayersModel has ${re.outputs.length} outputs, but the dataset provides ${ce.length} outputs.  (Expected output keys: ${JSON.stringify(re.outputNames)})`);for(let ue=0;ue<ae.length;ue++)assert$2(ae[ue].shape[0]===le,()=>`Batch size mismatch: input ${re.inputNames[ue]} has ${ae[ue].shape[0]}; expected  ${le} based on input ${re.inputNames[0]}.`);for(let ue=0;ue<ce.length;ue++)assert$2(ce[ue].shape[0]===le,()=>`Batch size mismatch: output ${re.outputNames[ue]} has ${ce[ue].shape[0]}; expected  ${le} based on input ${re.inputNames[0]}.`);return{xs:ae,ys:ce}}function flattenTensorOrArrayOrMap(re,ee,ne){if(ne instanceof Tensor)return[ne];if(Array.isArray(ne))return assert$2(ne.length===ee.length,()=>`Received an array of ${ne.length} Tensors, but expected ${ee.length} to match the ${re} keys ${ee}.`),ne;{const ie=[];for(const oe of ee){if(ne[oe]==null)throw new ValueError(`The feature data generated by the dataset lacks the required ${re} key '${oe}'.`);ie.push(ne[oe])}return ie}}function standardizeTensorValidationData(re){if(re.length===3)throw new NotImplementedError("Validation with sample weights is not implemented yet.");return{xs:re[0],ys:re[1]}}async function fitDataset(re,ee,ne){const ie=ne.batchesPerEpoch!=null;if(assert$2(re.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),assert$2(ne!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),assert$2(ne.epochs!=null&&ne.epochs>0&&Number.isInteger(ne.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${ne.epochs}`),assert$2(!ie||ne.batchesPerEpoch>0&&Number.isInteger(ne.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${ne.batchesPerEpoch}`),assert$2(ne.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),re.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");re.isTraining=!0;try{const oe=ne.validationData!=null;let ae,ce;if(oe)if(isDatasetObject(ne.validationData))assert$2(ne.validationBatches==null||ne.validationBatches>0&&Number.isInteger(ne.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${ne.validationBatches}`);else{const Ce=standardizeTensorValidationData(ne.validationData);ae=Ce.xs,ce=Ce.ys}const le=re.makeTrainFunction(),ue=re.getDedupedMetricsNames();let he;oe?he=ue.slice().concat(ue.map(Ce=>"val_"+Ce)):he=ue.slice();const fe=standardizeCallbacks(ne.callbacks,ne.yieldEvery),me=ne.verbose==null?1:ne.verbose,{callbackList:ge,history:ve}=configureCallbacks(fe,me,ne.epochs,null,null,getStepsPerEpoch(ee,ne),null,oe,he);ge.setModel(re),re.history=ve,await ge.onTrainBegin(),re.stopTraining_=!1;let ye=ne.initialEpoch==null?0:ne.initialEpoch,be=await ee.iterator();for(;ye<ne.epochs;){const Ce={};await ge.onEpochBegin(ye);let Se=0,$e=0;for(ie||(be=await ee.iterator());!ie||Se<ne.batchesPerEpoch;){const Te=await be.next();if(ie&&Te.done){console.warn(`You provided \`batchesPerEpoch\` as ${ne.batchesPerEpoch}, but your dataset iterator ran out of data after ${Se} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${ne.batchesPerEpoch*ne.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(Te.value!=null){const{xs:Ne,ys:Ie}=standardizeDataIteratorOutput(re,Te.value),ke={};ke.batch=$e,ke.size=Ne[0].shape[0],await ge.onBatchBegin($e,ke);const De=[];if(ne.classWeight!=null){const Me=standardizeClassWeights(ne.classWeight,re.outputNames);for(let Le=0;Le<Me.length;++Le)De.push(await standardizeWeights(Ie[Le],null,Me[Le]))}const Oe=Ne.concat(Ie).concat(De),Be=le(Oe);dispose(Oe);for(let Me=0;Me<ue.length;++Me){const Le=ue[Me],je=Be[Me];ke[Le]=je,keep(je)}await ge.onBatchEnd($e,ke),disposeTensorsInLogs(ke),$e++,Se++}if(ie?Se>=ne.batchesPerEpoch:Te.done){if(oe){let Ne;isDatasetObject(ne.validationData)?Ne=toList(await re.evaluateDataset(ne.validationData,{batches:ne.validationBatches})):Ne=toList(re.evaluate(ae,ce,{batchSize:ne.validationBatchSize==null?DEFAULT_VALIDATION_BATCH_SIZE:ne.validationBatchSize,verbose:0}));for(let Ie=0;Ie<re.metricsNames.length;++Ie)Ce[`val_${re.metricsNames[Ie]}`]=Ne[Ie]}break}if(re.stopTraining_)break}if(await ge.onEpochEnd(ye,Ce),ye++,re.stopTraining_)break}return await ge.onTrainEnd(),await re.history.syncData(),re.history}finally{re.isTraining=!1}}function getStepsPerEpoch(re,ee){let ne=null;return ee.batchesPerEpoch!=null?ne=ee.batchesPerEpoch:Number.isFinite(re.size)&&(ne=re.size),ne}function isDatasetObject(re){return typeof re.iterator=="function"}function isLazyIteratorObject(re){return typeof re.next=="function"}async function evaluateDataset(re,ee,ne){ne=ne||{};const ie=ne.batches!=null,oe=re.testFunction;let ae=[];if(ne.verbose>0)throw new NotImplementedError("Verbose mode is not implemented yet.");assert$2(!ie||ne.batches>0&&Number.isInteger(ne.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(ne.batches)}`);const ce=isLazyIteratorObject(ee)?ee:await ee.iterator();let le=0,ue=0;for(;!ie||ue<ne.batches;){const he=await ce.next();if(ae=tidy(()=>{if(he.value){const{xs:fe,ys:me}=standardizeDataIteratorOutput(re,he.value),ge=fe.concat(me),ve=tidy(()=>oe(ge));if(dispose(ge),ue===0)for(let be=0;be<ve.length;++be)ae.push(scalar(0));const ye=ge[0].shape[0];for(let be=0;be<ve.length;++be){const Ce=ve[be],Se=ae[be];ae[be]=tidy(()=>add$1(ae[be],mul(ye,Ce))),ue>0&&dispose(Se)}dispose(ve),le+=ye,++ue}return ae}),he.done){ie&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${ne.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let he=0;he<ae.length;++he){const fe=ae[he];ae[he]=div$1(ae[he],le),dispose(fe)}return singletonOrArray(ae)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function checkBatchSize(re){assert$2(re>0&&Number.isInteger(re),()=>`batchSize is required to be a positive integer, but got ${re}`)}function sliceArrays(re,ee,ne){return re==null?[null]:Array.isArray(re)?re.map(ie=>sliceAlongFirstAxis(ie,ee,ne-ee)):sliceAlongFirstAxis(re,ee,ne-ee)}function sliceArraysByIndices(re,ee){return tidy(()=>re==null?null:Array.isArray(re)?re.map(ne=>sliceArraysByIndices(ne,ee)):gather(re,ee.dtype==="int32"?ee:ee.toInt()))}function makeBatches(re,ee){const ne=[];let ie=0,oe=null;for(;ie<re;)oe=ie+ee,oe>=re&&(oe=re),ne.push([ie,oe]),ie=oe;return ne}async function fitLoop(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe,me,ge,ve,ye){oe==null&&(oe=32),ae==null&&(ae=1),fe==null&&(fe=!0),ge==null&&(ge=0);let be=!1;if(ue!=null&&he!=null&&(be=!0),ye!=null&&(be=!0,ve==null))throw new ValueError("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const Ce=re.checkNumSamples(ne,oe,ve,"steps_per_epoch");let Se;Ce!=null&&(Se=range$3(0,Ce)),ce==null&&(ce=1);const{callbackList:$e,history:Te}=configureCallbacks(le,ce,ae,ge,Ce,ve,oe,be,me);$e.setModel(re),re.history=Te,await $e.onTrainBegin(),re.stopTraining_=!1;for(let Ne=ge;Ne<ae;++Ne){await $e.onEpochBegin(Ne);const Ie={};if(ve!=null)throw new NotImplementedError("stepsPerEpoch mode is not implemented yet.");{if(fe==="batch")throw new NotImplementedError("batch shuffling is not implemneted yet");fe&&shuffle(Se);const ke=tensor1d(Se),De=makeBatches(Ce,oe);for(let Oe=0;Oe<De.length;++Oe){const Be={};if(await $e.onBatchBegin(Oe,Be),tidy(()=>{const Me=De[Oe][0],Le=De[Oe][1],je=sliceAlongFirstAxis(ke,Me,Le-Me);Be.batch=Oe,Be.size=Le-Me;const ze=sliceArraysByIndices(ne,je),Ve=ee(ze);for(let He=0;He<ie.length;++He){const We=ie[He],Ye=Ve[He];Be[We]=Ye,keep(Ye)}if(Oe===De.length-1&&be){const He=re.testLoop(ue,he,oe);for(let We=0;We<ie.length;++We){const Ye=ie[We],Ue=He[We];keep(Ue),Ie["val_"+Ye]=Ue}}}),await $e.onBatchEnd(Oe,Be),disposeTensorsInLogs(Be),re.stopTraining_)break}ke.dispose()}if(await $e.onEpochEnd(Ne,Ie),re.stopTraining_)break}return await $e.onTrainEnd(),await re.history.syncData(),re.history}async function fitTensors(re,ee,ne,ie={}){if(re.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");re.isTraining=!0;let oe,ae,ce,le,ue,he,fe;try{const me=ie.batchSize==null?32:ie.batchSize;checkBatchSize(me);const ge=!1,ve=await re.standardizeUserData(ee,ne,ie.sampleWeight,ie.classWeight,ge,me);oe=ve[0],ae=ve[1],fe=ve[2];let ye=!1,be;if(ie.validationData!=null&&ie.validationData.length>0){if(ye=!0,ie.validationData.length===2)ce=ie.validationData[0],le=ie.validationData[1];else throw ie.validationData.length===3?new NotImplementedError("validationData including sample weights is not supported yet."):new ValueError(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${ie.validationData} is invalid.`);const De=!0,Oe=await re.standardizeUserData(ce,le,null,null,De,me);ue=Oe[0],he=Oe[1],be=ue.concat(he)}else if(ie.validationSplit!=null&&ie.validationSplit>0&&ie.validationSplit<1){ye=!0;const De=Math.floor(oe[0].shape[0]*(1-ie.validationSplit)),Oe=oe[0].shape[0];ue=sliceArrays(oe,De,Oe),oe=sliceArrays(oe,0,De),he=sliceArrays(ae,De,Oe),ae=sliceArrays(ae,0,De),be=ue.concat(he)}else ie.validationSteps!=null&&(ye=!0);const Ce=oe.concat(ae).concat(fe);re.checkTrainableWeightsConsistency();const Se=re.makeTrainFunction(),$e=re.getDedupedMetricsNames();let Te,Ne;ye?(re.makeTestFunction(),Te=re.testFunction,Ne=$e.slice().concat($e.map(De=>"val_"+De))):(Te=null,be=[],Ne=$e.slice());const Ie=standardizeCallbacks(ie.callbacks,ie.yieldEvery);return await fitLoop(re,Se,Ce,$e,me,ie.epochs,ie.verbose,Ie,Te,be,ie.shuffle,Ne,ie.initialEpoch,null,null)}finally{re.isTraining=!1,disposeNewTensors(oe,ee),disposeNewTensors(ae,ne),disposeNewTensors(ue,ce),disposeNewTensors(he,le),fe!=null&&dispose(fe)}}function ensureTensorsRank2OrHigher(re){const ee=[];re instanceof Tensor&&(re=[re]);for(let ne=0;ne<re.length;++ne){const ie=re[ne];if(ie.rank===1)ee.push(expandDims$2(ie,1));else{if(ie.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");ee.push(ie)}}return ee}function disposeNewTensors(re,ee){if(re==null)return;const ne=[];if(ee instanceof Tensor)ne.push(ee.id);else if(Array.isArray(ee))ee.forEach(oe=>ne.push(oe.id));else if(ee!=null)for(const oe in ee){const ae=ee[oe];ne.push(ae.id)}const ie=[];if(re instanceof Tensor)ne.indexOf(re.id)===-1&&ie.push(re);else if(Array.isArray(re))re.forEach(oe=>{ne.indexOf(oe.id)===-1&&ie.push(oe)});else if(re!=null)for(const oe in re){const ae=re[oe];ne.indexOf(ae.id)===-1&&ie.push(ae)}ie.forEach(oe=>{oe.isDisposed||oe.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function isDataTensor(re){return re instanceof Tensor}function isDataArray(re){return Array.isArray(re)}function isDataDict(re){return!isDataTensor(re)&&!isDataArray(re)}function standardizeInputData(re,ee,ne,ie=!0,oe=""){if(ee==null||ee.length===0){if(re!=null){let ce=!1;if(isDataArray(re)&&re.length>0)ce=!0;else if(isDataDict(re)){for(const le in re)if(re.hasOwnProperty(le)){ce=!0;break}}else ce=!0;if(ce)throw new ValueError(`Error when checking model ${oe} expected no data, but got ${re}`)}return[]}if(re==null)return ee.map(ce=>null);let ae;if(isDataDict(re)){re=re,ae=[];for(const ce of ee){if(re[ce]==null)throw new ValueError(`No data provided for "${ce}". Need data for each key in: ${ee}`);ae.push(re[ce])}}else if(isDataArray(re)){if(re=re,re.length!==ee.length)throw new ValueError(`Error when checking model ${oe}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${ee.length} Tensor(s), but instead got the following list of Tensor(s): ${re}`);ae=re}else{if(re=re,ee.length>1)throw new ValueError(`The model ${oe} expects ${ee.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${re.shape}`);ae=[re]}if(ae=ensureTensorsRank2OrHigher(ae),ne!=null)for(let ce=0;ce<ee.length;++ce){if(ne[ce]==null)continue;const le=ae[ce];if(le.shape.length!==ne[ce].length)throw new ValueError(`Error when checking ${oe}: expected ${ee[ce]} to have ${ne[ce].length} dimension(s). but got array with shape ${le.shape}`);for(let ue=0;ue<ne[ce].length;++ue){if(ue===0&&!ie)continue;const he=le.shape[ue],fe=ne[ce][ue];if(fe!=null&&fe>=0&&he!==fe)throw new ValueError(`Error when checking ${oe}: expected ${ee[ce]} to have shape [${ne[ce]}], but got array with shape [${le.shape}].`)}}return ae}function checkArrayLengths(re,ee,ne){const ie=unique$3(re.map(ae=>ae.shape[0]));ie.sort();const oe=unique$3(ee.map(ae=>ae.shape[0]));if(oe.sort(),ie.length>1)throw new ValueError(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(re.map(ae=>ae.shape))}`);if(oe.length>1)throw new ValueError(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(ee.map(ae=>ae.shape))}`);if(ie.length>0&&oe.length>0&&!arraysEqual(ie,oe))throw new ValueError(`Input Tensors should have the same number of samples as target Tensors. Found ${ie[0]} input sample(s) and ${oe[0]} target sample(s).`)}function checkLossAndTargetCompatibility(re,ee,ne){const ie=[meanSquaredError,binaryCrossentropy$1,categoricalCrossentropy$1];for(let oe=0;oe<re.length;++oe){const ae=re[oe],ce=ee[oe],le=ne[oe];if(ce!=null){if(ce===categoricalCrossentropy$1&&ae.shape[ae.shape.length-1]===1)throw new ValueError(`You are passing a target array of shape ${ae.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(ie.indexOf(ce)!==-1){const ue=ae.shape.slice(1),he=le.slice(1);for(let fe=0;fe<ue.length;++fe){const me=ue[fe],ge=he[fe];if(ge!=null&&me!==ge)throw new ValueError(`A target Tensor with shape ${ae.shape} was passed for an output of shape ${le}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function checkInputData(re,ee,ne,ie=!0,oe=""){let ae;if(Array.isArray(re)){if(re.length!==ee.length)throw new ValueError(`Error when checking model ${oe}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${ee.length} Tensor(s), but instead got ${re.length} Tensors(s).`);ae=re}else{if(ee.length>1)throw new ValueError(`The model expects ${ee.length} ${oe} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(re.shape)}.`);ae=[re]}if(ne!=null)for(let ce=0;ce<ee.length;++ce){if(ne[ce]==null)continue;const le=ae[ce];if(le.shape.length!==ne[ce].length)throw new ValueError(`Error when checking ${oe}: expected ${ee[ce]} to have ${ne[ce].length} dimension(s), but got array with shape ${JSON.stringify(le.shape)}`);for(let ue=0;ue<ne[ce].length;++ue){if(ue===0&&!ie)continue;const he=le.shape[ue],fe=ne[ce][ue];if(fe!=null&&fe!==he)throw new ValueError(`Error when checking ${oe}: expected ${ee[ce]} to have shape ${JSON.stringify(ne[ce])} but got array with shape ${JSON.stringify(le.shape)}.`)}}}function collectMetrics(re,ee){if(re==null||Array.isArray(re)&&re.length===0)return ee.map(ie=>[]);let ne;if(typeof re=="string"||typeof re=="function")ne=[re];else if(Array.isArray(re)||typeof re=="object")ne=re;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${re}`);if(Array.isArray(ne))return ee.map(ie=>ne);{const ie=[];for(const oe of ee){let ae=ne.hasOwnProperty(oe)?ne[oe]:[];Array.isArray(ae)||(ae=[ae]),ie.push(ae)}return ie}}const LAYERS_MODEL_FORMAT_NAME="layers-model";class LayersModel extends Container{constructor(ee){super(ee),this.isTraining=!1}summary(ee,ne,ie=console.log){if(!this.built)throw new ValueError("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");printSummary(this,ee,ne,ie)}compile(ee){if(ee.loss==null&&(ee.loss=[]),this.loss=ee.loss,typeof ee.optimizer=="string")this.optimizer_=getOptimizer(ee.optimizer),this.isOptimizerOwned=!0;else{if(!(ee.optimizer instanceof Optimizer))throw new ValueError("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=ee.optimizer,this.isOptimizerOwned=!1}let ne=[];if(!Array.isArray(ee.loss)&&typeof ee.loss!="string"&&typeof ee.loss!="function"){ee.loss=ee.loss;for(const ce in ee.loss)if(this.outputNames.indexOf(ce)===-1)throw new ValueError(`Unknown entry in loss dictionary: "${ce}". Only expected the following keys: ${this.outputNames}`);for(const ce of this.outputNames)ee.loss[ce]==null&&console.warn(`Output "${ce}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${ce} during training`),ne.push(get$3(ee.loss[ce]))}else if(Array.isArray(ee.loss)){if(ee.loss.length!==this.outputs.length)throw new ValueError(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${ee.loss}.`);ne=ee.loss.map(le=>get$3(le))}else{const ce=get$3(ee.loss);this.outputs.forEach(le=>{ne.push(ce)})}this.lossFunctions=ne,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let ce=0;ce<this.outputs.length;++ce){const le=this.internalOutputShapes[ce],ue=this.outputNames[ce];this.feedOutputNames.push(ue),this.feedOutputShapes.push(le),this.feedLossFns.push(this.lossFunctions[ce])}const ie=[];this.metrics=ee.metrics,this.metricsNames=["loss"],this.metricsTensors=[],nameScope("loss",()=>{for(let ce=0;ce<this.outputs.length;++ce){if(ie.indexOf(ce)!==-1)continue;const le=this.lossFunctions[ce];this.outputs.length>1&&(this.metricsTensors.push([le,ce]),this.metricsNames.push(this.outputNames[ce]+"_loss"))}});const oe=collectMetrics(ee.metrics,this.outputNames),ae=(ce,le,ue)=>{this.outputNames.length>1&&(le=this.outputNames[ce]+"_"+le),this.metricsNames.push(le),this.metricsTensors.push([ue,ce])};nameScope("metric",()=>{for(let ce=0;ce<this.outputs.length;++ce){if(ie.indexOf(ce)!==-1)continue;const le=oe[ce];(he=>{const fe="";let me,ge,ve;for(const ye of he){if(typeof ye=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(ye)!==-1){const Ce=this.internalOutputShapes[ce];Ce[Ce.length-1]===1||this.lossFunctions[ce]===binaryCrossentropy$1?["accuracy","acc"].indexOf(ye)!==-1?ge=binaryAccuracy:["crossentropy","ce"].indexOf(ye)!==-1&&(ge=binaryCrossentropy):this.lossFunctions[ce]===sparseCategoricalCrossentropy$1?["accuracy","acc"].indexOf(ye)!==-1?ge=sparseCategoricalAccuracy:["crossentropy","ce"].indexOf(ye)!==-1&&(ge=sparseCategoricalCrossentropy):["accuracy","acc"].indexOf(ye)!==-1?ge=categoricalAccuracy:["crossentropy","ce"].indexOf(ye)!==-1&&(ge=categoricalCrossentropy);let Se;["accuracy","acc"].indexOf(ye)!==-1?Se="acc":["crossentropy","ce"].indexOf(ye)!==-1&&(Se="ce"),ve=ge,me=fe+Se}else ve=get$2(ye),me=fe+getLossOrMetricName(ye);let be;nameScope(me,()=>{be=ve}),ae(ce,me,be)}})(le)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(ee,ne,ie={}){const oe=ie.batchSize==null?32:ie.batchSize;checkBatchSize(oe);const ae=!0,ce=this.standardizeUserDataXY(ee,ne,ae,oe);try{const le=ce[0].concat(ce[1]);this.makeTestFunction();const ue=this.testFunction,he=this.testLoop(ue,le,oe,ie.verbose,ie.steps);return singletonOrArray(he)}finally{disposeNewTensors(ce[0],ee),disposeNewTensors(ce[1],ne)}}async evaluateDataset(ee,ne){return this.makeTestFunction(),evaluateDataset(this,ee,ne)}checkNumSamples(ee,ne,ie,oe="steps"){let ae;if(ie!=null){if(ae=null,ne!=null)throw new ValueError(`If ${oe} is set, batchSize must be null or undefined.Got batchSize = ${ne}`)}else if(ee!=null)Array.isArray(ee)?ae=ee[0].shape[0]:ae=ee.shape[0];else throw new ValueError(`Either the input data should have a defined shape, or ${oe} shoud be specified.`);return ae}execute(ee,ne){if(Array.isArray(ne)&&ne.length===0)throw new ValueError("`outputs` is an empty Array, which is not allowed.");const ie=Array.isArray(ne),oe=ie?ne:[ne],ae=this.retrieveSymbolicTensors(oe),ce=new FeedDict;if(ee instanceof Tensor&&(ee=[ee]),Array.isArray(ee)){if(ee.length!==this.inputs.length)throw new ValueError(`The number of inputs provided (${ee.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let ue=0;ue<this.inputs.length;++ue)ce.add(this.inputs[ue],ee[ue])}else for(const ue of this.inputs){const he=ee[ue.name];if(he==null)throw new ValueError(`No value is provided for the model's input ${ue.name}`);ce.add(ue,he)}const le=execute(ae,ce);return ie?le:le[0]}retrieveSymbolicTensors(ee){const ne=pyListRepeat(null,ee.length);let ie=ee.length;for(const oe of this.layers){const ae=Array.isArray(oe.output)?oe.output:[oe.output],ce=ae.map(le=>le.name);for(let le=0;le<ee.length;++le){const ue=ce.indexOf(ee[le]);if(ue!==-1&&(ne[le]=ae[ue],ie--),ie===0)break}if(ie===0)break}if(ie>0){const oe=[];throw ne.forEach((ae,ce)=>{ae==null&&oe.push(ee[ce])}),new ValueError(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(oe)}`)}return ne}predictLoop(ee,ne=32,ie=!1){return tidy(()=>{const oe=this.checkNumSamples(ee);if(ie)throw new NotImplementedError("Verbose predictLoop() is not implemented yet.");const ae=makeBatches(oe,ne),ce=this.outputs.map(le=>[]);for(let le=0;le<ae.length;++le)tidy(()=>{const he=ae[le][0],fe=ae[le][1],me=sliceArrays(ee,he,fe),ge=[];if(Array.isArray(me))for(let ye=0;ye<me.length;++ye)ge.push({key:this.inputs[ye],value:me[ye]});else ge.push({key:this.inputs[0],value:me});const ve=new FeedDict(ge);return execute(this.outputs,ve)}).forEach((he,fe)=>ce[fe].push(he));return singletonOrArray(ce.map(le=>concat$2(le,0)))})}predict(ee,ne={}){const ie=ensureTensorsRank2OrHigher(ee);checkInputData(ie,this.inputNames,this.feedInputShapes,!1);try{const oe=ne.batchSize==null?32:ne.batchSize;return checkBatchSize(oe),this.predictLoop(ie,oe)}finally{disposeNewTensors(ie,ee)}}predictOnBatch(ee){checkInputData(ee,this.inputNames,this.feedInputShapes,!0);const ne=(Array.isArray(ee)?ee[0]:ee).shape[0];return this.predictLoop(ee,ne)}standardizeUserDataXY(ee,ne,ie=!0,oe){if(this.optimizer_==null)throw new RuntimeError("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const ae=[];for(let ce=0;ce<this.feedOutputShapes.length;++ce){const le=this.feedOutputShapes[ce];this.feedLossFns[ce]===sparseCategoricalCrossentropy$1?ae.push(le.slice(0,le.length-1).concat([1])):ae.push(le)}if(ee=standardizeInputData(ee,this.feedInputNames,this.feedInputShapes,!1,"input"),ne=standardizeInputData(ne,this.feedOutputNames,ae,!1,"target"),checkArrayLengths(ee,ne),checkLossAndTargetCompatibility(ne,this.feedLossFns,this.feedOutputShapes),this.stateful&&oe!=null&&oe>0&&ee[0].shape[0]%oe!==0)throw new ValueError(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${oe}. Found: ${ee[0].shape[0]} sample(s).`);return[ee,ne]}async standardizeUserData(ee,ne,ie,oe,ae=!0,ce){const[le,ue]=this.standardizeUserDataXY(ee,ne,ae,ce);if(ie!=null)throw new Error("sample weight is not supported yet.");let he=null;if(oe!=null){const fe=standardizeClassWeights(oe,this.outputNames);he=[];for(let me=0;me<fe.length;++me)he.push(await standardizeWeights(ue[me],null,fe[me]))}return[le,ue,he]}testLoop(ee,ne,ie,oe=0,ae){return tidy(()=>{const ce=this.checkNumSamples(ne,ie,ae,"steps"),le=[];if(oe>0)throw new NotImplementedError("Verbose mode is not implemented yet.");if(ae!=null)throw new NotImplementedError("steps mode in testLoop() is not implemented yet");{const ue=makeBatches(ce,ie),he=tensor1d(range$3(0,ce));for(let fe=0;fe<ue.length;++fe){const me=ue[fe][0],ge=ue[fe][1],ve=sliceAlongFirstAxis(he,me,ge-me),ye=sliceArraysByIndices(ne,ve),be=ee(ye);if(fe===0)for(let Ce=0;Ce<be.length;++Ce)le.push(scalar(0));for(let Ce=0;Ce<be.length;++Ce){const Se=be[Ce];le[Ce]=add$1(le[Ce],mul(ge-me,Se))}}for(let fe=0;fe<le.length;++fe)le[fe]=div$1(le[fe],ce)}return le})}getDedupedMetricsNames(){const ee=this.metricsNames,ne=[];for(let ie=0;ie<ee.length;++ie){const oe=ee[ie];let ae=oe;if(count(ee,oe)>1){const ce=count(ee.slice(0,ie),oe);ae+=`_${ce}`}ne.push(ae)}return ne}makeTrainFunction(){return ee=>{const ne=[],ie=ee.slice(0,this.inputs.length),oe=ee.slice(this.inputs.length,this.inputs.length+this.outputs.length),ae=ee.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),ce=[],le=()=>{const me=[];for(let be=0;be<this.inputs.length;++be)me.push({key:this.inputs[be],value:ie[be]});const ge=new FeedDict(me),ve=execute(this.outputs,ge,{training:!0});let ye;for(let be=0;be<this.lossFunctions.length;++be){const Ce=this.lossFunctions[be];let Se=Ce(oe[be],ve[be]);ae[be]!=null&&(Se=computeWeightedLoss(Se,ae[be]));const $e=mean$1(Se);ne.push($e),be===0?ye=Se:ye=add$1(ye,Se)}for(let be=0;be<this.metricsTensors.length;++be){let Ce;if(this.outputs.length>1&&be<this.outputs.length)Ce=ne[be];else{const Se=this.metricsTensors[be][0],$e=this.metricsTensors[be][1];Ce=mean$1(Se(oe[$e],ve[$e]))}keep(Ce),ce.push(Ce)}return ye=mean$1(ye),this.calculateLosses().forEach(be=>{ye=add$1(ye,be)}),ye},ue=this.collectedTrainableWeights.map(me=>me.read()),he=!0;return[this.optimizer_.minimize(le,he,ue)].concat(ce)}}makeTestFunction(){this.testFunction=ee=>tidy(()=>{const ne=[];let ie;const oe=ee.slice(0,this.inputs.length),ae=ee.slice(this.inputs.length,this.inputs.length+this.outputs.length),ce=[];for(let he=0;he<this.inputs.length;++he)ce.push({key:this.inputs[he],value:oe[he]});const le=new FeedDict(ce),ue=execute(this.outputs,le);for(let he=0;he<this.lossFunctions.length;++he){const fe=this.lossFunctions[he],me=mean$1(fe(ae[he],ue[he]));he===0?ie=me:ie=add$1(ie,me),ne.push(ie)}for(let he=0;he<this.metricsTensors.length;++he){const fe=this.metricsTensors[he][0],me=this.metricsTensors[he][1],ge=mean$1(fe(ae[me],ue[me]));ne.push(ge)}return ne})}async fit(ee,ne,ie={}){return fitTensors(this,ee,ne,ie)}async fitDataset(ee,ne){return fitDataset(this,ee,ne)}async trainOnBatch(ee,ne){const ie=await this.standardizeUserData(ee,ne),oe=ie[0],ae=ie[1],le=this.makeTrainFunction()(oe.concat(ae)),ue=[];for(const he of le){const fe=await he.data();ue.push(fe[0])}return dispose(le),singletonOrArray(ue)}getNamedWeights(ee){const ne=[],ie=ee!=null&&ee.trainableOnly,oe=ie?this.trainableWeights:this.weights,ae=this.getWeights(ie);for(let ce=0;ce<oe.length;++ce)ie&&!oe[ce].trainable||ne.push({name:oe[ce].originalName,tensor:ae[ce]});return ne}set stopTraining(ee){this.stopTraining_=ee}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(ee){this.optimizer_!==ee&&(this.optimizer_=ee,this.isOptimizerOwned=!1)}dispose(){const ee=super.dispose();if(ee.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const ne=memory().numTensors;this.optimizer_.dispose(),ee.numDisposedVariables+=ne-memory().numTensors}return ee}getLossIdentifiers(){let ee;if(typeof this.loss=="string")ee=toSnakeCase(this.loss);else if(Array.isArray(this.loss)){for(const ne of this.loss)if(typeof ne!="string")throw new Error("Serialization of non-string loss is not supported.");ee=this.loss.map(ne=>toSnakeCase(ne))}else{const ne=Object.keys(this.loss);ee={};const ie=this.loss;for(const oe of ne)if(typeof ie[oe]=="string")ee[oe]=toSnakeCase(ie[oe]);else throw new Error("Serialization of non-string loss is not supported.")}return ee}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[toSnakeCase(getLossOrMetricName(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(ee=>toSnakeCase(getLossOrMetricName(ee)));{const ee={};for(const ne in this.metrics)ee[ne]=toSnakeCase(getLossOrMetricName(this.metrics[ne]));return ee}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(ee){if(ee.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(ee.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(ee.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const ne=convertPythonicToTs(ee.optimizer_config),ie=deserialize(ne);let oe;if(typeof ee.loss=="string")oe=toCamelCase(ee.loss);else if(Array.isArray(ee.loss))oe=ee.loss.map(ce=>toCamelCase(ce));else if(ee.loss!=null){oe={};for(const ce in ee.loss)oe[ce]=toCamelCase(ee.loss[ce])}let ae;if(Array.isArray(ee.metrics))ae=ee.metrics.map(ce=>toCamelCase(ce));else if(ee.metrics!=null){ae={};for(const ce in ee.metrics)ae[ce]=toCamelCase(ee.metrics[ce])}this.compile({loss:oe,metrics:ae,optimizer:ie})}async save(ee,ne){if(typeof ee=="string"){const he=getSaveHandlers(ee);if(he.length===0)throw new ValueError(`Cannot find any save handlers for URL '${ee}'`);if(he.length>1)throw new ValueError(`Found more than one (${he.length}) save handlers for URL '${ee}'`);ee=he[0]}if(ee.save==null)throw new ValueError("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const ie=await encodeWeights(this.getNamedWeights(ne)),oe=!1,ae=null,le={modelTopology:this.toJSON(ae,oe),format:LAYERS_MODEL_FORMAT_NAME,generatedBy:`TensorFlow.js tfjs-layers v${version$1}`,convertedBy:null};if((ne==null?!1:ne.includeOptimizer)&&this.optimizer!=null){le.trainingConfig=this.getTrainingConfig();const he="optimizer",{data:fe,specs:me}=await encodeWeights(await this.optimizer.getWeights(),he);ie.specs.push(...me),ie.data=concatenateArrayBuffers([ie.data,fe])}return this.userDefinedMetadata!=null&&(checkUserDefinedMetadata(this.userDefinedMetadata,this.name,!0),le.userDefinedMetadata=this.userDefinedMetadata),le.weightData=ie.data,le.weightSpecs=ie.specs,ee.save(le)}setUserDefinedMetadata(ee){checkUserDefinedMetadata(ee,this.name),this.userDefinedMetadata=ee}getUserDefinedMetadata(){return this.userDefinedMetadata}}LayersModel.className="Model";registerClass(LayersModel);class Functional extends LayersModel{}Functional.className="Functional";registerClass(Functional);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Sequential extends LayersModel{constructor(ee){if(super({inputs:[],outputs:[]}),ee=ee||{},this.trainable=!0,this.built=!1,this.name=ee.name!=null?ee.name:getUid("sequential_"),ee.layers!=null)for(const ne of ee.layers)this.add(ne)}checkShape(ee){if(ee.inboundNodes[0].outputTensors[0].shape.some(ie=>ie<0))throw new ValueError(`Negative dimension size caused by adding layer ${ee.name} with input shape [${ee.inboundNodes[0].inputTensors[0].shape}]`)}add(ee){const ne=ee instanceof Sequential||ee instanceof LayersModel;let ie;if(ne){if(ie=ee,ie.outputs.length!==1)throw new ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(ie.inputs.length!==1)throw new ValueError("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(ee.inboundNodes.length===0){if(ee.batchInputShape==null)throw new ValueError("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const oe=Input$3({batchShape:ee.batchInputShape,dtype:ee.dtype,name:ee.name+"_input"});ee.apply(oe)}if(ne)this.outputs=ie.outputs,this.inputs=ie.inputs;else{if(ee.inboundNodes.length!==1)throw new ValueError(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${ee.name} which has ${ee.inboundNodes.length} pre-existing inbound connections.`);if(ee.inboundNodes[0].outputTensors.length!==1)throw new ValueError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(ee),this.outputs=[ee.inboundNodes[0].outputTensors[0]],this.inputs=getSourceInputs(this.outputs[0])}this.inboundNodes=[],new Node$1({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:pyListRepeat(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(oe=>oe.shape),outputShapes:this.outputs[0].shape})}else{const oe=ee.apply(this.outputs[0]);if(Array.isArray(oe))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(ee),this.outputs=[oe],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(ee),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const ee=this.layers.length-1;this.layers[ee].outboundNodes=[],this.outputs=[this.layers[ee].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(ee,ne){return this.model==null&&this.build(),this.model.call(ee,ne)}build(ee){if(getExactlyOneShape(ee),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new LayersModel({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(ee,ne,ie=console.log){this.built||this.build(),super.summary(ee,ne,ie)}setWeights(ee){this.model==null&&this.build(),this.model.setWeights(ee)}evaluate(ee,ne,ie={}){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.evaluate(ee,ne,ie)}async evaluateDataset(ee,ne){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.evaluateDataset(ee,ne)}predict(ee,ne={}){return this.model==null&&this.build(),this.model.predict(ee,ne)}predictOnBatch(ee){return this.model==null&&this.build(),this.model.predictOnBatch(ee)}compile(ee){this.build(),this.model.compile(ee),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(ee){this.model.optimizer=ee}async fit(ee,ne,ie={}){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.fit(ee,ne,ie)}async fitDataset(ee,ne){if(!this.built)throw new RuntimeError("The model needs to be compiled before being used.");return this.model.fitDataset(ee,ne)}async trainOnBatch(ee,ne){return this.model.trainOnBatch(ee,ne)}static fromConfig(ee,ne,ie={},oe=!1){let ae,ce={};if(ne instanceof Array){if(ne[0].className==null||ne[0].className==="Merge")throw new ValueError("Legacy serialization format not supported yet.");ae=ne}else assert$2(ne.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),ae=ne.layers,delete ne.layers,ce=ne;const le=new ee(ce);if(!(le instanceof Sequential))throw new NotImplementedError(`Sequential.fromConfig called on non-Sequential input: ${le}`);for(const ue of ae){const fe=deserialize(ue,void 0,oe);oe&&fe.setFastWeightInitDuringBuild(!0),le.add(fe)}return le}set stopTraining(ee){if(this.model==null)throw new ValueError("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=ee}get stopTraining(){if(this.model==null)throw new ValueError("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const ee=[];for(const ne of this.layers){const ie={};ie.className=ne.getClassName(),ie.config=ne.getConfig(),ee.push(ie)}return{name:this.name,layers:ee}}}Sequential.className="Sequential";registerClass(Sequential);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Activation$1=class extends Serializable{getConfig(){return{}}};class Elu extends Activation$1{apply(ee,ne=1){return elu$2(ee,ne)}}Elu.className="elu";registerClass(Elu);class Selu extends Activation$1{apply(ee){return selu$2(ee)}}Selu.className="selu";registerClass(Selu);class Relu extends Activation$1{apply(ee){return relu$2(ee)}}Relu.className="relu";registerClass(Relu);class Relu6 extends Activation$1{apply(ee){return tidy(()=>minimum$2(6,relu$2(ee)))}}Relu6.className="relu6";registerClass(Relu6);class Linear extends Activation$1{apply(ee){return ee}}Linear.className="linear";registerClass(Linear);class Sigmoid extends Activation$1{apply(ee){return sigmoid$2(ee)}}Sigmoid.className="sigmoid";registerClass(Sigmoid);class HardSigmoid extends Activation$1{apply(ee){return hardSigmoid(ee)}}HardSigmoid.className="hardSigmoid";registerClass(HardSigmoid);class Softplus extends Activation$1{apply(ee){return softplus$2(ee)}}Softplus.className="softplus";registerClass(Softplus);class Softsign extends Activation$1{apply(ee){return softsign(ee)}}Softsign.className="softsign";registerClass(Softsign);class Tanh extends Activation$1{apply(ee){return tanh$2(ee)}}Tanh.className="tanh";registerClass(Tanh);let Softmax$1=class extends Activation$1{apply(ee,ne=-1){return softmax$2(ee,ne)}};Softmax$1.className="softmax";registerClass(Softmax$1);class LogSoftmax extends Activation$1{apply(ee,ne=-1){return logSoftmax(ee,ne)}}LogSoftmax.className="logSoftmax";registerClass(LogSoftmax);class Swish extends Activation$1{apply(ee,ne=1){return tidy(()=>sigmoid$2(ee.mul(ne)).mul(ee))}}Swish.className="swish";registerClass(Swish);function serializeActivation(re){return re.getClassName()}function deserializeActivation(re,ee={}){return deserializeKerasObject(re,SerializationMap.getMap().classNameMap,ee,"activation")}function getActivation(re){if(re==null){const ee={};return ee.className="linear",ee.config={},deserializeActivation(ee)}if(typeof re=="string"){const ee={};return ee.className=re,ee.config={},deserializeActivation(ee)}else return re instanceof Activation$1?re:deserializeActivation(re)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function assertObjectArgs(re){if(re!=null&&typeof re!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${re}`)}class Regularizer extends Serializable{}class L1L2 extends Regularizer{constructor(ee){super(),assertObjectArgs(ee),this.l1=ee==null||ee.l1==null?.01:ee.l1,this.l2=ee==null||ee.l2==null?.01:ee.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(ee){return tidy(()=>{let ne=zeros$1([1]);return this.hasL1&&(ne=add$1(ne,sum$2(mul(this.l1,abs$3(ee))))),this.hasL2&&(ne=add$1(ne,sum$2(mul(this.l2,square$2(ee))))),ne.asScalar()})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(ee,ne){return new ee({l1:ne.l1,l2:ne.l2})}}L1L2.className="L1L2";registerClass(L1L2);const REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP={l1l2:"L1L2"};function serializeRegularizer(re){return serializeKerasObject(re)}function deserializeRegularizer(re,ee={}){return deserializeKerasObject(re,SerializationMap.getMap().classNameMap,ee,"regularizer")}function getRegularizer(re){if(re==null)return null;if(typeof re=="string"){const ne={className:re in REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP?REGULARIZER_IDENTIFIER_REGISTRY_SYMBOL_MAP[re]:re,config:{}};return deserializeRegularizer(ne)}else return re instanceof Regularizer?re:deserializeRegularizer(re)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class ReLU extends Layer{constructor(ee){super(ee??{}),this.supportsMasking=!0,ee!=null&&(this.maxValue=ee.maxValue)}call(ee,ne){ee=getExactlyOneTensor(ee);let ie=relu$2(ee);return this.maxValue!=null&&(ie=clipByValue$1(ie,0,this.maxValue)),ie}computeOutputShape(ee){return ee}getConfig(){const ee={maxValue:this.maxValue},ne=super.getConfig();return Object.assign(ee,ne),ee}}ReLU.className="ReLU";registerClass(ReLU);class LeakyReLU extends Layer{constructor(ee){super(ee??{}),this.DEFAULT_ALPHA=.3,ee==null&&(ee={}),this.alpha=ee.alpha==null?this.DEFAULT_ALPHA:ee.alpha}call(ee,ne){const ie=getExactlyOneTensor(ee);return leakyRelu$2(ie,this.alpha)}computeOutputShape(ee){return ee}getConfig(){const ee={alpha:this.alpha},ne=super.getConfig();return Object.assign(ee,ne),ee}}LeakyReLU.className="LeakyReLU";registerClass(LeakyReLU);class PReLU extends Layer{constructor(ee){if(super(ee??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",ee==null&&(ee={}),this.supportsMasking=!0,this.alphaInitializer=getInitializer(ee.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=getRegularizer(ee.alphaRegularizer),this.alphaConstraint=getConstraint(ee.alphaConstraint),ee.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(ee.sharedAxes))this.sharedAxes=ee.sharedAxes;else if(typeof ee.sharedAxes=="number")this.sharedAxes=[ee.sharedAxes];else throw new ValueError(`Expected sharedAxes to be a number or an array of numbers, but got ${ee.sharedAxes}`)}build(ee){ee=getExactlyOneShape(ee);const ne=ee.slice(1);if(this.sharedAxes!=null)for(const oe of this.sharedAxes)ne[oe-1]=1;this.alpha=this.addWeight("alpha",ne,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const ie={};if(this.sharedAxes!=null)for(let oe=1;oe<ee.length;++oe)ie[oe]=ee[oe];this.inputSpec=[new InputSpec({ndim:ee.length,axes:ie})],this.built=!0}call(ee,ne){return ee=getExactlyOneTensor(ee),prelu$2(ee,this.alpha.read())}getConfig(){const ee={alphaInitializer:serializeInitializer(this.alphaInitializer),alphaRegularizer:serializeRegularizer(this.alphaRegularizer),alphaConstraint:serializeConstraint(this.alphaConstraint),sharedAxes:this.sharedAxes},ne=super.getConfig();return Object.assign(ee,ne),ee}}PReLU.className="PReLU";registerClass(PReLU);let ELU$3=class extends Layer{constructor(ee){if(super(ee??{}),this.DEFAULT_ALPHA=1,ee==null&&(ee={}),ee.alpha!=null&&ee.alpha!==this.DEFAULT_ALPHA)throw new NotImplementedError(`Non-default alpha value (${ee.alpha}) is not supported by the ELU layer yet.`);this.alpha=ee.alpha==null?this.DEFAULT_ALPHA:ee.alpha}call(ee,ne){const ie=getExactlyOneTensor(ee);return elu$3(ie)}computeOutputShape(ee){return ee}getConfig(){const ee={alpha:this.alpha},ne=super.getConfig();return Object.assign(ee,ne),ee}};ELU$3.className="ELU";registerClass(ELU$3);class ThresholdedReLU extends Layer{constructor(ee){super(ee??{}),this.DEFAULT_THETA=1,ee==null&&(ee={}),this.theta=ee.theta==null?this.DEFAULT_THETA:ee.theta}call(ee,ne){const ie=getExactlyOneTensor(ee);return ie.mul(cast$2(ie.greater(this.theta),"float32"))}computeOutputShape(ee){return ee}getConfig(){const ee={theta:this.theta},ne=super.getConfig();return Object.assign(ee,ne),ee}}ThresholdedReLU.className="ThresholdedReLU";registerClass(ThresholdedReLU);class Softmax extends Layer{constructor(ee){super(ee??{}),this.DEFAULT_AXIS=1,ee==null&&(ee={}),this.softmax=new Softmax$1().apply,this.axis=ee.axis==null?this.DEFAULT_AXIS:ee.axis}call(ee,ne){const ie=getExactlyOneTensor(ee);return this.softmax(ie,this.axis)}computeOutputShape(ee){return ee}getConfig(){const ee={axis:this.axis},ne=super.getConfig();return Object.assign(ee,ne),ee}}Softmax.className="Softmax";registerClass(Softmax);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function normalizeArray(re,ee,ne){if(typeof re=="number")return pyListRepeat(re,ee);if(re.length!==ee)throw new ValueError(`The ${ne} argument must be an integer or tuple of ${ee} integers. Received: ${re.length} elements.`);for(let ie=0;ie<ee;++ie){const oe=re[ie];if(!isInteger(oe))throw new ValueError(`The ${ne} argument must be an integer or tuple of ${ee} integers. Received: ${JSON.stringify(re)} including a non-integer number ${oe}`)}return re}function convOutputLength(re,ee,ne,ie,oe=1){if(re==null)return re;const ae=ee+(ee-1)*(oe-1);let ce;return ne==="same"?ce=re:ce=re-ae+1,Math.floor((ce+ie-1)/ie)}function deconvLength(re,ee,ne,ie){if(re==null)return null;if(ie==="valid")re=re*ee+max$3([ne-ee,0]);else if(ie==="same")re=re*ee;else throw new ValueError(`Unsupport padding mode: ${ie}.`);return re}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function preprocessConv2DInput(re,ee){return tidy(()=>(checkDataFormat(ee),ee==="channelsFirst"?transpose$2(re,[0,2,3,1]):re))}function preprocessConv3DInput(re,ee){return tidy(()=>(checkDataFormat(ee),ee==="channelsFirst"?transpose$2(re,[0,2,3,4,1]):re))}function conv1dWithBias(re,ee,ne,ie=1,oe="valid",ae,ce=1){return tidy(()=>{if(ae==null&&(ae=imageDataFormat()),checkDataFormat(ae),re.shape.length!==3)throw new ValueError(`The input of a conv1dWithBias operation should be 3, but is ${re.shape.length} instead.`);if(ee.shape.length!==3)throw new ValueError(`The kernel for a conv1dWithBias operation should be 3, but is ${ee.shape.length} instead`);if(ne!=null&&ne.shape.length!==1)throw new ValueError(`The bias for a conv1dWithBias operation should be 1, but is ${ee.shape.length} instead`);if(ae==="channelsFirst"&&(re=transpose$2(re,[0,2,1])),oe==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let le=conv1d(re,ee,ie,oe==="same"?"same":"valid","NWC",ce);return ne!=null&&(le=biasAdd(le,ne)),le})}function conv2dWithBiasActivation(re,ee,ne,ie=[1,1],oe="valid",ae,ce,le=null){return tidy(()=>{if(ae==null&&(ae=imageDataFormat()),checkDataFormat(ae),re.rank!==3&&re.rank!==4)throw new ValueError(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${re.rank}.`);if(ee.rank!==3&&ee.rank!==4)throw new ValueError(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${re.rank}.`);let ue=preprocessConv2DInput(re,ae);if(oe==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return ue=conv2d$1({x:ue,filter:ee,strides:ie,pad:oe==="same"?"same":"valid",dilations:ce,dataFormat:"NHWC",bias:ne,activation:le}),ae==="channelsFirst"&&(ue=transpose$2(ue,[0,3,1,2])),ue})}function conv3dWithBias(re,ee,ne,ie=[1,1,1],oe="valid",ae,ce){return tidy(()=>{if(ae==null&&(ae=imageDataFormat()),checkDataFormat(ae),re.rank!==4&&re.rank!==5)throw new ValueError(`conv3dWithBias expects input to be of rank 4 or 5, but received ${re.rank}.`);if(ee.rank!==4&&ee.rank!==5)throw new ValueError(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${re.rank}.`);let le=preprocessConv3DInput(re,ae);if(oe==="causal")throw new NotImplementedError("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return le=conv3d(le,ee,ie,oe==="same"?"same":"valid","NDHWC",ce),ne!=null&&(le=biasAdd(le,ne)),ae==="channelsFirst"&&(le=transpose$2(le,[0,4,1,2,3])),le})}class BaseConv extends Layer{constructor(ee,ne){if(super(ne),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",BaseConv.verifyArgs(ne),this.rank=ee,assertPositiveInteger(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new NotImplementedError(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=normalizeArray(ne.kernelSize,ee,"kernelSize"),this.strides=normalizeArray(ne.strides==null?1:ne.strides,ee,"strides"),this.padding=ne.padding==null?"valid":ne.padding,checkPaddingMode(this.padding),this.dataFormat=ne.dataFormat==null?"channelsLast":ne.dataFormat,checkDataFormat(this.dataFormat),this.activation=getActivation(ne.activation),this.useBias=ne.useBias==null?!0:ne.useBias,this.biasInitializer=getInitializer(ne.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=getConstraint(ne.biasConstraint),this.biasRegularizer=getRegularizer(ne.biasRegularizer),this.activityRegularizer=getRegularizer(ne.activityRegularizer),this.dilationRate=normalizeArray(ne.dilationRate==null?1:ne.dilationRate,ee,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new ValueError(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new ValueError(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new ValueError(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(ee){if(assert$1("kernelSize"in ee,"required key 'kernelSize' not in config"),typeof ee.kernelSize!="number"&&!checkArrayTypeAndLength(ee.kernelSize,"number",1,3))throw new ValueError(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(ee.kernelSize)}.`)}getConfig(){const ee={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:serializeActivation(this.activation),useBias:this.useBias,biasInitializer:serializeInitializer(this.biasInitializer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),biasConstraint:serializeConstraint(this.biasConstraint)},ne=super.getConfig();return Object.assign(ee,ne),ee}}class Conv extends BaseConv{constructor(ee,ne){super(ee,ne),this.kernel=null,Conv.verifyArgs(ne),this.filters=ne.filters,assertPositiveInteger(this.filters,"filters"),this.kernelInitializer=getInitializer(ne.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=getConstraint(ne.kernelConstraint),this.kernelRegularizer=getRegularizer(ne.kernelRegularizer)}build(ee){ee=getExactlyOneShape(ee);const ne=this.dataFormat==="channelsFirst"?1:ee.length-1;if(ee[ne]==null)throw new ValueError(`The channel dimension of the input should be defined. Found ${ee[ne]}`);const ie=ee[ne],oe=this.kernelSize.concat([ie,this.filters]);this.kernel=this.addWeight("kernel",oe,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[ne]:ie}}],this.built=!0}call(ee,ne){return tidy(()=>{ee=getExactlyOneTensor(ee);let ie;const oe=this.bias==null?null:this.bias.read(),ae=mapActivationToFusedKernel(this.activation.getClassName());if(ae!=null&&this.rank===2)ie=conv2dWithBiasActivation(ee,this.kernel.read(),oe,this.strides,this.padding,this.dataFormat,this.dilationRate,ae);else{if(this.rank===1)ie=conv1dWithBias(ee,this.kernel.read(),oe,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)ie=conv2dWithBiasActivation(ee,this.kernel.read(),oe,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)ie=conv3dWithBias(ee,this.kernel.read(),oe,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new NotImplementedError("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(ie=this.activation.apply(ie))}return ie})}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=[],ie=this.dataFormat==="channelsLast"?ee.slice(1,ee.length-1):ee.slice(2);for(let ae=0;ae<ie.length;++ae){const ce=convOutputLength(ie[ae],this.kernelSize[ae],this.padding,this.strides[ae],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[ae]);ne.push(ce)}let oe=[ee[0]];return this.dataFormat==="channelsLast"?(oe=oe.concat(ne),oe.push(this.filters)):(oe.push(this.filters),oe=oe.concat(ne)),oe}getConfig(){const ee={filters:this.filters,kernelInitializer:serializeInitializer(this.kernelInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint)},ne=super.getConfig();return Object.assign(ee,ne),ee}static verifyArgs(ee){if(!("filters"in ee)||typeof ee.filters!="number"||ee.filters<1)throw new ValueError(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(ee.filters)}`)}}class Conv2D extends Conv{constructor(ee){super(2,ee),Conv2D.verifyArgs(ee)}getConfig(){const ee=super.getConfig();return delete ee.rank,ee}static verifyArgs(ee){if(typeof ee.kernelSize!="number"&&!checkArrayTypeAndLength(ee.kernelSize,"number",1,2))throw new ValueError(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(ee.kernelSize)}.`)}}Conv2D.className="Conv2D";registerClass(Conv2D);class Conv3D extends Conv{constructor(ee){super(3,ee),Conv3D.verifyArgs(ee)}getConfig(){const ee=super.getConfig();return delete ee.rank,ee}static verifyArgs(ee){if(typeof ee.kernelSize!="number"&&!(Array.isArray(ee.kernelSize)&&(ee.kernelSize.length===1||ee.kernelSize.length===3)))throw new ValueError(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(ee.kernelSize)}.`)}}Conv3D.className="Conv3D";registerClass(Conv3D);class Conv2DTranspose extends Conv2D{constructor(ee){if(super(ee),this.inputSpec=[new InputSpec({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new ValueError(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(ee){if(ee=getExactlyOneShape(ee),ee.length!==4)throw new ValueError("Input should have rank 4; Received input shape: "+JSON.stringify(ee));const ne=this.dataFormat==="channelsFirst"?1:ee.length-1;if(ee[ne]==null)throw new ValueError("The channel dimension of the inputs should be defined. Found `None`.");const ie=ee[ne],oe=this.kernelSize.concat([this.filters,ie]);this.kernel=this.addWeight("kernel",oe,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new InputSpec({ndim:4,axes:{[ne]:ie}})],this.built=!0}call(ee,ne){return tidy(()=>{let ie=getExactlyOneTensor(ee);if(ie.shape.length!==4)throw new ValueError(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${ie.shape.length}`);const oe=ie.shape,ae=oe[0];let ce,le;this.dataFormat==="channelsFirst"?(ce=2,le=3):(ce=1,le=2);const ue=oe[ce],he=oe[le],fe=this.kernelSize[0],me=this.kernelSize[1],ge=this.strides[0],ve=this.strides[1],ye=deconvLength(ue,ge,fe,this.padding),be=deconvLength(he,ve,me,this.padding),Ce=[ae,ye,be,this.filters];this.dataFormat!=="channelsLast"&&(ie=transpose$2(ie,[0,2,3,1]));let Se=conv2dTranspose(ie,this.kernel.read(),Ce,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(Se=transpose$2(Se,[0,3,1,2])),this.bias!=null&&(Se=biasAdd(Se,this.bias.read(),this.dataFormat)),this.activation!=null&&(Se=this.activation.apply(Se)),Se})}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=ee.slice();let ie,oe,ae;this.dataFormat==="channelsFirst"?(ie=1,oe=2,ae=3):(ie=3,oe=1,ae=2);const ce=this.kernelSize[0],le=this.kernelSize[1],ue=this.strides[0],he=this.strides[1];return ne[ie]=this.filters,ne[oe]=deconvLength(ne[oe],ue,ce,this.padding),ne[ae]=deconvLength(ne[ae],he,le,this.padding),ne}getConfig(){const ee=super.getConfig();return delete ee.dilationRate,ee}}Conv2DTranspose.className="Conv2DTranspose";registerClass(Conv2DTranspose);class SeparableConv extends Conv{constructor(ee,ne){if(super(ee,ne),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,ne.filters==null)throw new ValueError("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(ne.kernelInitializer!=null||ne.kernelRegularizer!=null||ne.kernelConstraint!=null)throw new ValueError("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(ne.padding!=null&&ne.padding!=="same"&&ne.padding!=="valid")throw new ValueError(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(ne.padding)}`);this.depthMultiplier=ne.depthMultiplier==null?1:ne.depthMultiplier,this.depthwiseInitializer=getInitializer(ne.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=getRegularizer(ne.depthwiseRegularizer),this.depthwiseConstraint=getConstraint(ne.depthwiseConstraint),this.pointwiseInitializer=getInitializer(ne.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=getRegularizer(ne.pointwiseRegularizer),this.pointwiseConstraint=getConstraint(ne.pointwiseConstraint)}build(ee){if(ee=getExactlyOneShape(ee),ee.length<this.rank+2)throw new ValueError(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(ee)}`);const ne=this.dataFormat==="channelsFirst"?1:ee.length-1;if(ee[ne]==null||ee[ne]<0)throw new ValueError(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(ee[ne])}`);const ie=ee[ne],oe=this.kernelSize.concat([ie,this.depthMultiplier]),ae=[];for(let le=0;le<this.rank;++le)ae.push(1);ae.push(ie*this.depthMultiplier,this.filters);const ce=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",oe,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,ce,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",ae,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,ce,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,ce,this.biasConstraint):this.bias=null,this.inputSpec=[new InputSpec({ndim:this.rank+2,axes:{[ne]:ie}})],this.built=!0}call(ee,ne){return tidy(()=>{ee=getExactlyOneTensor(ee);let ie;if(this.rank===1)throw new NotImplementedError("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(ee=transpose$2(ee,[0,2,3,1])),ie=separableConv2d(ee,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(ie=biasAdd(ie,this.bias.read(),this.dataFormat)),this.activation!=null&&(ie=this.activation.apply(ie)),this.dataFormat==="channelsFirst"&&(ie=transpose$2(ie,[0,3,1,2])),ie})}getConfig(){const ee=super.getConfig();return delete ee.rank,delete ee.kernelInitializer,delete ee.kernelRegularizer,delete ee.kernelConstraint,ee.depthwiseInitializer=serializeInitializer(this.depthwiseInitializer),ee.pointwiseInitializer=serializeInitializer(this.pointwiseInitializer),ee.depthwiseRegularizer=serializeRegularizer(this.depthwiseRegularizer),ee.pointwiseRegularizer=serializeRegularizer(this.pointwiseRegularizer),ee.depthwiseConstraint=serializeConstraint(this.depthwiseConstraint),ee.pointwiseConstraint=serializeConstraint(this.pointwiseConstraint),ee}}SeparableConv.className="SeparableConv";class SeparableConv2D extends SeparableConv{constructor(ee){super(2,ee)}}SeparableConv2D.className="SeparableConv2D";registerClass(SeparableConv2D);class Conv1D extends Conv{constructor(ee){super(1,ee),Conv1D.verifyArgs(ee),this.inputSpec=[{ndim:3}]}getConfig(){const ee=super.getConfig();return delete ee.rank,delete ee.dataFormat,ee}static verifyArgs(ee){if(typeof ee.kernelSize!="number"&&!checkArrayTypeAndLength(ee.kernelSize,"number",1,1))throw new ValueError(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(ee.kernelSize)}.`)}}Conv1D.className="Conv1D";registerClass(Conv1D);class Cropping2D extends Layer{constructor(ee){super(ee),typeof ee.cropping=="number"?this.cropping=[[ee.cropping,ee.cropping],[ee.cropping,ee.cropping]]:typeof ee.cropping[0]=="number"?this.cropping=[[ee.cropping[0],ee.cropping[0]],[ee.cropping[1],ee.cropping[1]]]:this.cropping=ee.cropping,this.dataFormat=ee.dataFormat===void 0?"channelsLast":ee.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(ee){return this.dataFormat==="channelsFirst"?[ee[0],ee[1],ee[2]-this.cropping[0][0]-this.cropping[0][1],ee[3]-this.cropping[1][0]-this.cropping[1][1]]:[ee[0],ee[1]-this.cropping[0][0]-this.cropping[0][1],ee[2]-this.cropping[1][0]-this.cropping[1][1],ee[3]]}call(ee,ne){return tidy(()=>{if(ee=getExactlyOneTensor(ee),this.dataFormat==="channelsLast"){const ie=sliceAlongAxis(ee,this.cropping[0][0],ee.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return sliceAlongAxis(ie,this.cropping[1][0],ee.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const ie=sliceAlongAxis(ee,this.cropping[0][0],ee.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return sliceAlongAxis(ie,this.cropping[1][0],ee.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const ee={cropping:this.cropping,dataFormat:this.dataFormat},ne=super.getConfig();return Object.assign(ee,ne),ee}}Cropping2D.className="Cropping2D";registerClass(Cropping2D);class UpSampling2D extends Layer{constructor(ee){super(ee),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=ee.size==null?this.DEFAULT_SIZE:ee.size,this.dataFormat=ee.dataFormat==null?"channelsLast":ee.dataFormat,checkDataFormat(this.dataFormat),this.interpolation=ee.interpolation==null?"nearest":ee.interpolation,checkInterpolationFormat(this.interpolation)}computeOutputShape(ee){if(this.dataFormat==="channelsFirst"){const ne=ee[2]==null?null:this.size[0]*ee[2],ie=ee[3]==null?null:this.size[1]*ee[3];return[ee[0],ee[1],ne,ie]}else{const ne=ee[1]==null?null:this.size[0]*ee[1],ie=ee[2]==null?null:this.size[1]*ee[2];return[ee[0],ne,ie,ee[3]]}}call(ee,ne){return tidy(()=>{let ie=getExactlyOneTensor(ee);const oe=ie.shape;if(this.dataFormat==="channelsFirst"){ie=transpose$2(ie,[0,2,3,1]);const ae=this.size[0]*oe[2],ce=this.size[1]*oe[3],le=this.interpolation==="nearest"?ie.resizeNearestNeighbor([ae,ce]):ie.resizeBilinear([ae,ce]);return transpose$2(le,[0,3,1,2])}else{const ae=this.size[0]*oe[1],ce=this.size[1]*oe[2];return this.interpolation==="nearest"?ie.resizeNearestNeighbor([ae,ce]):ie.resizeBilinear([ae,ce])}})}getConfig(){const ee={size:this.size,dataFormat:this.dataFormat},ne=super.getConfig();return Object.assign(ee,ne),ee}}UpSampling2D.className="UpSampling2D";registerClass(UpSampling2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function depthwiseConv2d(re,ee,ne=[1,1],ie="valid",oe,ae){return tidy(()=>{oe==null&&(oe=imageDataFormat()),checkDataFormat(oe);let ce=preprocessConv2DInput(re,oe);if(re.rank!==4)throw new ValueError(`Input for depthwiseConv2d is required to be 4-D, but is instead ${re.rank}-D`);if(ee.rank!==4)throw new ValueError(`depthwiseKernel is required to be 4-D, but is instead ${ee.rank}-D`);return ce=depthwiseConv2d$1(ce,ee,ne,ie==="same"?"same":"valid","NHWC",ae),oe==="channelsFirst"&&(ce=transpose$2(ce,[0,3,1,2])),ce})}class DepthwiseConv2D extends BaseConv{constructor(ee){super(2,ee),this.depthwiseKernel=null,this.depthMultiplier=ee.depthMultiplier==null?1:ee.depthMultiplier,this.depthwiseInitializer=getInitializer(ee.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=getConstraint(ee.depthwiseConstraint),this.depthwiseRegularizer=getRegularizer(ee.depthwiseRegularizer)}build(ee){if(ee=getExactlyOneShape(ee),ee.length<4)throw new ValueError(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(ee)}.`);const ne=this.dataFormat==="channelsFirst"?1:3;if(ee[ne]==null||ee[ne]<0)throw new ValueError(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${ee[ne]}).`);const ie=ee[ne],oe=[this.kernelSize[0],this.kernelSize[1],ie,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",oe,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[ie*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(ee,ne){return tidy(()=>{ee=getExactlyOneTensor(ee);let ie=depthwiseConv2d(ee,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(ie=biasAdd(ie,this.bias.read(),this.dataFormat)),this.activation!=null&&(ie=this.activation.apply(ie)),ie})}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=this.dataFormat==="channelsFirst"?ee[2]:ee[1],ie=this.dataFormat==="channelsFirst"?ee[3]:ee[2],oe=this.dataFormat==="channelsFirst"?ee[1]*this.depthMultiplier:ee[3]*this.depthMultiplier,ae=convOutputLength(ne,this.kernelSize[0],this.padding,this.strides[0]),ce=convOutputLength(ie,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[ee[0],oe,ae,ce]:[ee[0],ae,ce,oe]}getConfig(){const ee=super.getConfig();return ee.depthMultiplier=this.depthMultiplier,ee.depthwiseInitializer=serializeInitializer(this.depthwiseInitializer),ee.depthwiseRegularizer=serializeRegularizer(this.depthwiseRegularizer),ee.depthwiseConstraint=serializeConstraint(this.depthwiseRegularizer),ee}}DepthwiseConv2D.className="DepthwiseConv2D";registerClass(DepthwiseConv2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function standardizeArgs(re,ee,ne,ie){if(Array.isArray(re)){if(ee!=null||ne!=null)throw new ValueError("When inputs is an array, neither initialState or constants should be provided");ie!=null&&(ne=re.slice(re.length-ie,re.length),re=re.slice(0,re.length-ie)),re.length>1&&(ee=re.slice(1,re.length)),re=re[0]}function oe(ae){return ae==null||Array.isArray(ae)?ae:[ae]}return ee=oe(ee),ne=oe(ne),{inputs:re,initialState:ee,constants:ne}}function rnn(re,ee,ne,ie=!1,oe,ae,ce=!1,le=!1){return tidy(()=>{const ue=ee.shape.length;if(ue<3)throw new ValueError(`Input should be at least 3D, but is ${ue}D.`);const he=[1,0].concat(range$3(2,ue));if(ee=transpose$2(ee,he),ae!=null)throw new NotImplementedError("The rnn() functoin of the deeplearn.js backend does not support constants yet.");ce&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),oe!=null&&(oe=oe.asType("bool").asType("float32"),oe.rank===ue-1&&(oe=expandDims$3(oe,-1)),oe=transpose$2(oe,he)),ie&&(ee=reverse$2(ee,0),oe!=null&&(oe=reverse$2(oe,0)));const fe=[];let me,ge=ne;const ve=ee.shape[0],ye=unstack(ee);let be;oe!=null&&(be=unstack(oe));for(let Se=0;Se<ve;++Se){const $e=ye[Se],Te=tidy(()=>re($e,ge));if(oe==null)me=Te[0],ge=Te[1];else{const Ne=tidy(()=>{const Ie=be[Se],ke=onesLike$2(Ie).sub(Ie),De=Te[0].mul(Ie).add(ge[0].mul(ke)),Oe=ge.map((Be,Me)=>Te[1][Me].mul(Ie).add(Be.mul(ke)));return{output:De,newStates:Oe}});me=Ne.output,ge=Ne.newStates}le&&fe.push(me)}let Ce;return le&&(Ce=stack$1(fe,1)),[me,Ce,ge]})}class RNN extends Layer{constructor(ee){super(ee);let ne;if(ee.cell==null)throw new ValueError("cell property is missing for the constructor of RNN.");if(Array.isArray(ee.cell)?ne=new StackedRNNCells({cells:ee.cell}):ne=ee.cell,ne.stateSize==null)throw new ValueError("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=ne,this.returnSequences=ee.returnSequences==null?!1:ee.returnSequences,this.returnState=ee.returnState==null?!1:ee.returnState,this.goBackwards=ee.goBackwards==null?!1:ee.goBackwards,this._stateful=ee.stateful==null?!1:ee.stateful,this.unroll=ee.unroll==null?!1:ee.unroll,this.supportsMasking=!0,this.inputSpec=[new InputSpec({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const ee=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return range$3(0,ee).map(ne=>null)}else return this.states_}setStates(ee){this.states_=ee}computeOutputShape(ee){isArrayOfShapes(ee)&&(ee=ee[0]),ee=ee;let ne=this.cell.stateSize;Array.isArray(ne)||(ne=[ne]);const ie=ne[0];let oe;if(this.returnSequences?oe=[ee[0],ee[1],ie]:oe=[ee[0],ie],this.returnState){const ae=[];for(const ce of ne)ae.push([ee[0],ce]);return[oe].concat(ae)}else return oe}computeMask(ee,ne){return tidy(()=>{Array.isArray(ne)&&(ne=ne[0]);const ie=this.returnSequences?ne:null;if(this.returnState){const oe=this.states.map(ae=>null);return[ie].concat(oe)}else return ie})}get states(){if(this.states_==null){const ee=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,ne=[];for(let ie=0;ie<ee;++ie)ne.push(null);return ne}else return this.states_}set states(ee){this.states_=ee}build(ee){if(this.numConstants!=null)throw new NotImplementedError("Constants support is not implemented in RNN yet.");isArrayOfShapes(ee)&&(ee=ee[0]),ee=ee;const ne=this.stateful?ee[0]:null,ie=ee.slice(2);this.inputSpec[0]=new InputSpec({shape:[ne,null,...ie]});const oe=[ee[0]].concat(ee.slice(2));this.cell.build(oe);let ae;if(Array.isArray(this.cell.stateSize)?ae=this.cell.stateSize:ae=[this.cell.stateSize],this.stateSpec!=null){if(!arraysEqual(this.stateSpec.map(ce=>ce.shape[ce.shape.length-1]),ae))throw new ValueError(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=ae.map(ce=>new InputSpec({shape:[null,ce]}));this.stateful&&this.resetStates()}resetStates(ee,ne=!1){tidy(()=>{if(!this.stateful)throw new AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const ie=this.inputSpec[0].shape[0];if(ie==null)throw new ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(oe=>zeros$1([ie,oe])):this.states_=[zeros$1([ie,this.cell.stateSize])];else if(ee==null)dispose(this.states_),this.keptStates!=null&&(dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(oe=>zeros$1([ie,oe])):this.states_[0]=zeros$1([ie,this.cell.stateSize]);else{if(Array.isArray(ee)||(ee=[ee]),ee.length!==this.states_.length)throw new ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${ee.length} state value(s). Input received: ${ee}`);ne===!0?this.keptStates.push(this.states_.slice()):dispose(this.states_);for(let oe=0;oe<this.states_.length;++oe){const ae=ee[oe],ce=Array.isArray(this.cell.stateSize)?this.cell.stateSize[oe]:this.cell.stateSize,le=[ie,ce];if(!arraysEqual(ae.shape,le))throw new ValueError(`State ${oe} is incompatible with layer ${this.name}: expected shape=${le}, received shape=${ae.shape}`);this.states_[oe]=ae}}this.states_=this.states_.map(oe=>keep(oe.clone()))})}apply(ee,ne){let ie=ne==null?null:ne.initialState,oe=ne==null?null:ne.constants;ne==null&&(ne={});const ae=standardizeArgs(ee,ie,oe,this.numConstants);ee=ae.inputs,ie=ae.initialState,oe=ae.constants;let ce=[],le=[];if(ie!=null){ne.initialState=ie,ce=ce.concat(ie),this.stateSpec=[];for(const he of ie)this.stateSpec.push(new InputSpec({shape:he.shape}));le=le.concat(this.stateSpec)}if(oe!=null&&(ne.constants=oe,ce=ce.concat(oe),this.numConstants=oe.length),ce[0]instanceof SymbolicTensor){const he=[ee].concat(ce),fe=this.inputSpec.concat(le),me=this.inputSpec;this.inputSpec=fe;const ge=super.apply(he,ne);return this.inputSpec=me,ge}else return super.apply(ee,ne)}call(ee,ne){return tidy(()=>{const ie=ne==null?null:ne.mask,oe=ne==null?null:ne.training;let ae=ne==null?null:ne.initialState;ee=getExactlyOneTensor(ee),ae==null&&(this.stateful?ae=this.states_:ae=this.getInitialState(ee));const ce=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(ae.length!==ce)throw new ValueError(`RNN Layer has ${ce} state(s) but was passed ${ae.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const le={training:oe},he=rnn((ye,be)=>{const Ce=this.cell.call([ye].concat(be),le);return[Ce[0],Ce.slice(1)]},ee,ae,this.goBackwards,ie,null,this.unroll,this.returnSequences),fe=he[0],me=he[1],ge=he[2];this.stateful&&this.resetStates(ge,oe);const ve=this.returnSequences?me:fe;return this.returnState?[ve].concat(ge):ve})}getInitialState(ee){return tidy(()=>{let ne=zeros$1(ee.shape);return ne=sum$2(ne,[1,2]),ne=expandDims$2(ne),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(ie=>ie>1?tile$2(ne,[1,ie]):ne):this.cell.stateSize>1?[tile$2(ne,[1,this.cell.stateSize])]:[ne]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(ee){super.setFastWeightInitDuringBuild(ee),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(ee)}getConfig(){const ee=super.getConfig(),ne={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(ne.numConstants=this.numConstants);const ie=this.cell.getConfig();return this.getClassName()===RNN.className&&(ne.cell={className:this.cell.getClassName(),config:ie}),Object.assign({},ie,ee,ne)}static fromConfig(ee,ne,ie={}){const oe=ne.cell,ae=deserialize(oe,ie);return new ee(Object.assign(ne,{cell:ae}))}}RNN.className="RNN";registerClass(RNN);class RNNCell extends Layer{}class SimpleRNNCell extends RNNCell{constructor(ee){super(ee),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=ee.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation(ee.activation==null?this.DEFAULT_ACTIVATION:ee.activation),this.useBias=ee.useBias==null?!0:ee.useBias,this.kernelInitializer=getInitializer(ee.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=getInitializer(ee.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=getInitializer(ee.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=getRegularizer(ee.kernelRegularizer),this.recurrentRegularizer=getRegularizer(ee.recurrentRegularizer),this.biasRegularizer=getRegularizer(ee.biasRegularizer),this.kernelConstraint=getConstraint(ee.kernelConstraint),this.recurrentConstraint=getConstraint(ee.recurrentConstraint),this.biasConstraint=getConstraint(ee.biasConstraint),this.dropout=min$3([1,max$3([0,ee.dropout==null?0:ee.dropout])]),this.recurrentDropout=min$3([1,max$3([0,ee.recurrentDropout==null?0:ee.recurrentDropout])]),this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(ee){ee=getExactlyOneShape(ee),this.kernel=this.addWeight("kernel",[ee[ee.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(ee,ne){return tidy(()=>{if(ee=ee,ee.length!==2)throw new ValueError(`SimpleRNNCell expects 2 input Tensors, got ${ee.length}.`);let ie=ee[1];ee=ee[0];const oe=ne.training==null?!1:ne.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(ee),rate:this.dropout,training:oe})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(ie),rate:this.recurrentDropout,training:oe}));let ae;const ce=this.dropoutMask,le=this.recurrentDropoutMask;ce!=null?ae=dot(mul(ee,ce),this.kernel.read()):ae=dot(ee,this.kernel.read()),this.bias!=null&&(ae=biasAdd(ae,this.bias.read())),le!=null&&(ie=mul(ie,le));let ue=add$1(ae,dot(ie,this.recurrentKernel.read()));return this.activation!=null&&(ue=this.activation.apply(ue)),[ue,ue]})}getConfig(){const ee=super.getConfig(),ne={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign({},ee,ne)}}SimpleRNNCell.className="SimpleRNNCell";registerClass(SimpleRNNCell);class SimpleRNN extends RNN{constructor(ee){ee.cell=new SimpleRNNCell(ee),super(ee)}call(ee,ne){return tidy(()=>{this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const ie=ne==null?null:ne.mask,oe=ne==null?null:ne.training,ae=ne==null?null:ne.initialState;return super.call(ee,{mask:ie,training:oe,initialState:ae})})}static fromConfig(ee,ne){return new ee(ne)}}SimpleRNN.className="SimpleRNN";registerClass(SimpleRNN);class GRUCell extends RNNCell{constructor(ee){if(super(ee),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",ee.resetAfter)throw new ValueError("GRUCell does not support reset_after parameter set to true.");this.units=ee.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation(ee.activation===void 0?this.DEFAULT_ACTIVATION:ee.activation),this.recurrentActivation=getActivation(ee.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:ee.recurrentActivation),this.useBias=ee.useBias==null?!0:ee.useBias,this.kernelInitializer=getInitializer(ee.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=getInitializer(ee.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=getInitializer(ee.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=getRegularizer(ee.kernelRegularizer),this.recurrentRegularizer=getRegularizer(ee.recurrentRegularizer),this.biasRegularizer=getRegularizer(ee.biasRegularizer),this.kernelConstraint=getConstraint(ee.kernelConstraint),this.recurrentConstraint=getConstraint(ee.recurrentConstraint),this.biasConstraint=getConstraint(ee.biasConstraint),this.dropout=min$3([1,max$3([0,ee.dropout==null?0:ee.dropout])]),this.recurrentDropout=min$3([1,max$3([0,ee.recurrentDropout==null?0:ee.recurrentDropout])]),this.implementation=ee.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(ee){ee=getExactlyOneShape(ee);const ne=ee[ee.length-1];this.kernel=this.addWeight("kernel",[ne,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(ee,ne){return tidy(()=>{if(ee=ee,ee.length!==2)throw new ValueError(`GRUCell expects 2 input Tensors (inputs, h, c), got ${ee.length}.`);const ie=ne.training==null?!1:ne.training;let oe=ee[1];ee=ee[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(ee),rate:this.dropout,training:ie,count:3})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(oe),rate:this.recurrentDropout,training:ie,count:3}));const ae=this.dropoutMask,ce=this.recurrentDropoutMask;let le,ue,he;0<this.dropout&&this.dropout<1&&(ee=mul(ee,ae[0]));let fe=dot(ee,this.kernel.read());this.useBias&&(fe=biasAdd(fe,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(oe=mul(oe,ce[0]));const me=this.recurrentKernel.read(),[ge,ve]=split(me,[2*this.units,this.units],me.rank-1),ye=dot(oe,ge),[be,Ce,Se]=split(fe,3,fe.rank-1),[$e,Te]=split(ye,2,ye.rank-1);le=this.recurrentActivation.apply(add$1(be,$e)),ue=this.recurrentActivation.apply(add$1(Ce,Te));const Ne=dot(mul(ue,oe),ve);he=this.activation.apply(add$1(Se,Ne));const Ie=add$1(mul(le,oe),mul(add$1(1,neg$2(le)),he));return[Ie,Ie]})}getConfig(){const ee=super.getConfig(),ne={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign({},ee,ne)}}GRUCell.className="GRUCell";registerClass(GRUCell);class GRU extends RNN{constructor(ee){ee.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),ee.cell=new GRUCell(ee),super(ee)}call(ee,ne){return tidy(()=>{this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const ie=ne==null?null:ne.mask,oe=ne==null?null:ne.training,ae=ne==null?null:ne.initialState;return super.call(ee,{mask:ie,training:oe,initialState:ae})})}static fromConfig(ee,ne){return ne.implmentation===0&&(ne.implementation=1),new ee(ne)}}GRU.className="GRU";registerClass(GRU);class LSTMCell extends RNNCell{constructor(ee){super(ee),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=ee.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation(ee.activation===void 0?this.DEFAULT_ACTIVATION:ee.activation),this.recurrentActivation=getActivation(ee.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:ee.recurrentActivation),this.useBias=ee.useBias==null?!0:ee.useBias,this.kernelInitializer=getInitializer(ee.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=getInitializer(ee.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=getInitializer(ee.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=ee.unitForgetBias,this.kernelRegularizer=getRegularizer(ee.kernelRegularizer),this.recurrentRegularizer=getRegularizer(ee.recurrentRegularizer),this.biasRegularizer=getRegularizer(ee.biasRegularizer),this.kernelConstraint=getConstraint(ee.kernelConstraint),this.recurrentConstraint=getConstraint(ee.recurrentConstraint),this.biasConstraint=getConstraint(ee.biasConstraint),this.dropout=min$3([1,max$3([0,ee.dropout==null?0:ee.dropout])]),this.recurrentDropout=min$3([1,max$3([0,ee.recurrentDropout==null?0:ee.recurrentDropout])]),this.implementation=ee.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(ee){var ne;ee=getExactlyOneShape(ee);const ie=ee[ee.length-1];this.kernel=this.addWeight("kernel",[ie,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let oe;if(this.useBias){if(this.unitForgetBias){const ae=this.biasInitializer,ce=this.units;oe=new(ne=class extends Initializer{apply(ue,he){const fe=ae.apply([ce]),me=new Ones().apply([ce]),ge=ae.apply([ce*2]);return concatAlongFirstAxis(concatAlongFirstAxis(fe,me),ge)}},ne.className="CustomInit",ne)}else oe=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,oe,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(ee,ne){return tidy(()=>{const ie=ne.training==null?!1:ne.training;if(ee=ee,ee.length!==3)throw new ValueError(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${ee.length}.`);let oe=ee[1];const ae=ee[2];ee=ee[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(ee),rate:this.dropout,training:ie,count:4})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(oe),rate:this.recurrentDropout,training:ie,count:4}));const ce=this.dropoutMask,le=this.recurrentDropoutMask;let ue,he,fe,me;0<this.dropout&&this.dropout<1&&(ee=mul(ee,ce[0]));let ge=dot(ee,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(oe=mul(oe,le[0])),ge=add$1(ge,dot(oe,this.recurrentKernel.read())),this.useBias&&(ge=biasAdd(ge,this.bias.read()));const[ve,ye,be,Ce]=split(ge,4,ge.rank-1);ue=this.recurrentActivation.apply(ve),he=this.recurrentActivation.apply(ye),fe=add$1(mul(he,ae),mul(ue,this.activation.apply(be))),me=this.recurrentActivation.apply(Ce);const Se=mul(me,this.activation.apply(fe));return[Se,Se,fe]})}getConfig(){const ee=super.getConfig(),ne={units:this.units,activation:serializeActivation(this.activation),recurrentActivation:serializeActivation(this.recurrentActivation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),recurrentInitializer:serializeInitializer(this.recurrentInitializer),biasInitializer:serializeInitializer(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:serializeRegularizer(this.kernelRegularizer),recurrentRegularizer:serializeRegularizer(this.recurrentRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),recurrentConstraint:serializeConstraint(this.recurrentConstraint),biasConstraint:serializeConstraint(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign({},ee,ne)}}LSTMCell.className="LSTMCell";registerClass(LSTMCell);class LSTM extends RNN{constructor(ee){ee.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),ee.cell=new LSTMCell(ee),super(ee)}call(ee,ne){return tidy(()=>{this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const ie=ne==null?null:ne.mask,oe=ne==null?null:ne.training,ae=ne==null?null:ne.initialState;return super.call(ee,{mask:ie,training:oe,initialState:ae})})}static fromConfig(ee,ne){return ne.implmentation===0&&(ne.implementation=1),new ee(ne)}}LSTM.className="LSTM";registerClass(LSTM);class StackedRNNCells extends RNNCell{constructor(ee){super(ee),this.cells=ee.cells}get stateSize(){const ee=[];for(const ne of this.cells.slice().reverse())Array.isArray(ne.stateSize)?ee.push(...ne.stateSize):ee.push(ne.stateSize);return ee}call(ee,ne){return tidy(()=>{ee=ee;let ie=ee.slice(1);const oe=[];for(const le of this.cells.slice().reverse())Array.isArray(le.stateSize)?oe.push(ie.splice(0,le.stateSize.length)):oe.push(ie.splice(0,1));oe.reverse();const ae=[];let ce;for(let le=0;le<this.cells.length;++le){const ue=this.cells[le];ie=oe[le],le===0?ce=[ee[0]].concat(ie):ce=[ce[0]].concat(ie),ce=ue.call(ce,ne),ae.push(ce.slice(1))}ie=[];for(const le of ae.slice().reverse())ie.push(...le);return[ce[0]].concat(ie)})}build(ee){isArrayOfShapes(ee)&&(ee=ee[0]),ee=ee;let ne;this.cells.forEach((ie,oe)=>{nameScope(`RNNCell_${oe}`,()=>{ie.build(ee),Array.isArray(ie.stateSize)?ne=ie.stateSize[0]:ne=ie.stateSize,ee=[ee[0],ne]})}),this.built=!0}getConfig(){const ee=super.getConfig(),ne=ae=>({className:ae.getClassName(),config:ae.getConfig()}),oe={cells:this.cells.map(ne)};return Object.assign({},ee,oe)}static fromConfig(ee,ne,ie={}){const oe=[];for(const ae of ne.cells)oe.push(deserialize(ae,ie));return new ee({cells:oe})}get trainableWeights(){if(!this.trainable)return[];const ee=[];for(const ne of this.cells)ee.push(...ne.trainableWeights);return ee}get nonTrainableWeights(){const ee=[];for(const ne of this.cells)ee.push(...ne.nonTrainableWeights);if(!this.trainable){const ne=[];for(const ie of this.cells)ne.push(...ie.trainableWeights);return ne.concat(ee)}return ee}getWeights(){const ee=[];for(const ne of this.cells)ee.push(...ne.weights);return batchGetValue(ee)}setWeights(ee){const ne=[];for(const ie of this.cells){const oe=ie.weights.length,ae=ee.splice(oe);for(let ce=0;ce<ie.weights.length;++ce)ne.push([ie.weights[ce],ae[ce]])}batchSetValue(ne)}}StackedRNNCells.className="StackedRNNCells";registerClass(StackedRNNCells);function generateDropoutMask(re){const{ones:ee,rate:ne,training:ie=!1,count:oe=1}=re,ae=()=>dropout(ee(),ne),ce=()=>inTrainPhase(ae,ee,ie);return!oe||oe<=1?keep(ce().clone()):Array(oe).fill(void 0).map(ce).map(ue=>keep(ue.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var __rest=globalThis&&globalThis.__rest||function(re,ee){var ne={};for(var ie in re)Object.prototype.hasOwnProperty.call(re,ie)&&ee.indexOf(ie)<0&&(ne[ie]=re[ie]);if(re!=null&&typeof Object.getOwnPropertySymbols=="function")for(var oe=0,ie=Object.getOwnPropertySymbols(re);oe<ie.length;oe++)ee.indexOf(ie[oe])<0&&Object.prototype.propertyIsEnumerable.call(re,ie[oe])&&(ne[ie[oe]]=re[ie[oe]]);return ne};class ConvRNN2D extends RNN{constructor(ee){if(ee.unroll)throw new NotImplementedError("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(ee.cell))throw new NotImplementedError("It is not possible at the moment to stack convolutional cells.");super(ee),this.inputSpec=[new InputSpec({ndim:5})]}call(ee,ne){return tidy(()=>{if(this.cell.dropoutMask!=null&&(dispose(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(dispose(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),ne&&ne.constants)throw new ValueError("ConvRNN2D cell does not support constants");const ie=ne==null?null:ne.mask,oe=ne==null?null:ne.training,ae=ne==null?null:ne.initialState;return super.call(ee,{mask:ie,training:oe,initialState:ae})})}computeOutputShape(ee){let ne=this.computeSingleOutputShape(ee);return this.returnSequences||(ne=[ne[0],...ne.slice(2)]),this.returnState&&(ne=[ne,...Array(2).fill([ee[0],...ne.slice(-3)])]),ne}getInitialState(ee){return tidy(()=>{const{stateSize:ne}=this.cell,ie=ee.shape,oe=this.computeSingleOutputShape(ie),ae=[oe[0],...oe.slice(2)],ce=zeros$1(ae);return Array.isArray(ne)?Array(ne.length).fill(ce):[ce]})}resetStates(ee,ne=!1){tidy(()=>{if(!this.stateful)throw new AttributeError("Cannot call resetStates() on an RNN Layer that is not stateful.");const ie=this.inputSpec[0].shape,oe=this.computeSingleOutputShape(ie),ae=[oe[0],...oe.slice(2)];if(ie[0]==null)throw new ValueError("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>zeros$1(ae)):this.states_=[zeros$1(ae)];else if(ee==null)dispose(this.states_),this.keptStates!=null&&(dispose(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>zeros$1(ae)):this.states_[0]=zeros$1(ae);else{if(Array.isArray(ee)||(ee=[ee]),ee.length!==this.states_.length)throw new ValueError(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${ee.length} state value(s). Input received: ${ee}`);ne?this.keptStates.push(this.states_.slice()):dispose(this.states_);for(let le=0;le<this.states_.length;++le){const ue=ee[le],he=ae;if(!arraysEqual(ue.shape,he))throw new ValueError(`State ${le} is incompatible with layer ${this.name}: expected shape=${he}, received shape=${ue.shape}`);this.states_[le]=ue}}this.states_=this.states_.map(le=>keep(le.clone()))})}computeSingleOutputShape(ee){const{dataFormat:ne,filters:ie,kernelSize:oe,padding:ae,strides:ce,dilationRate:le}=this.cell,ue=ne==="channelsFirst",he=ee[ue?3:2],fe=ee[ue?4:3],me=convOutputLength(he,oe[0],ae,ce[0],le[0]),ge=convOutputLength(fe,oe[1],ae,ce[1],le[1]);return[...ee.slice(0,2),...ue?[ie,me,ge]:[me,ge,ie]]}}ConvRNN2D.className="ConvRNN2D";class ConvLSTM2DCell extends LSTMCell{constructor(ee){const{filters:ne,kernelSize:ie,strides:oe,padding:ae,dataFormat:ce,dilationRate:le}=ee;super(Object.assign({},ee,{units:ne})),this.filters=ne,assertPositiveInteger(this.filters,"filters"),this.kernelSize=normalizeArray(ie,2,"kernelSize"),this.kernelSize.forEach(ue=>assertPositiveInteger(ue,"kernelSize")),this.strides=normalizeArray(oe||1,2,"strides"),this.strides.forEach(ue=>assertPositiveInteger(ue,"strides")),this.padding=ae||"valid",checkPaddingMode(this.padding),this.dataFormat=ce||"channelsLast",checkDataFormat(this.dataFormat),this.dilationRate=normalizeArray(le||1,2,"dilationRate"),this.dilationRate.forEach(ue=>assertPositiveInteger(ue,"dilationRate"))}build(ee){var ne;ee=getExactlyOneShape(ee);const ie=this.dataFormat==="channelsFirst"?1:ee.length-1;if(ee[ie]==null)throw new ValueError(`The channel dimension of the input should be defined. Found ${ee[ie]}`);const oe=ee[ie],ae=4,ce=this.kernelSize.concat([oe,this.filters*ae]);this.kernel=this.addWeight("kernel",ce,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const le=this.kernelSize.concat([this.filters,this.filters*ae]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",le,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let ue;if(this.unitForgetBias){const he=this.biasInitializer,fe=this.filters;ue=new(ne=class extends Initializer{apply(ge,ve){const ye=he.apply([fe]),be=ones([fe]),Ce=he.apply([fe*2]);return concatenate([ye,be,Ce])}},ne.className="CustomInit",ne)}else ue=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*ae],null,ue,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(ee,ne){return tidy(()=>{if(ee.length!==3)throw new ValueError(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${ee.length}.`);const ie=ne.training||!1,oe=ee[0],ae=ee[1],ce=ee[2],le=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=generateDropoutMask({ones:()=>onesLike$2(oe),rate:this.dropout,training:ie,count:le}));const ue=this.dropoutMask,he=(Xe,Vt,Wt)=>!Vt||!Vt[Wt]?Xe:mul(Vt[Wt],Xe);let fe=he(oe,ue,0),me=he(oe,ue,1),ge=he(oe,ue,2),ve=he(oe,ue,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=generateDropoutMask({ones:()=>onesLike$2(ae),rate:this.recurrentDropout,training:ie,count:le}));const ye=this.recurrentDropoutMask;let be=he(ae,ye,0),Ce=he(ae,ye,1),Se=he(ae,ye,2),$e=he(ae,ye,3);const Te=3,[Ne,Ie,ke,De]=split(this.kernel.read(),le,Te),[Oe,Be,Me,Le]=this.useBias?split(this.bias.read(),le):[null,null,null,null];fe=this.inputConv(fe,Ne,Oe,this.padding),me=this.inputConv(me,Ie,Be,this.padding),ge=this.inputConv(ge,ke,Me,this.padding),ve=this.inputConv(ve,De,Le,this.padding);const[je,ze,Ve,He]=split(this.recurrentKernel.read(),le,Te);be=this.recurrentConv(be,je),Ce=this.recurrentConv(Ce,ze),Se=this.recurrentConv(Se,Ve),$e=this.recurrentConv($e,He);const We=this.recurrentActivation.apply(add$1(fe,be)),Ye=this.recurrentActivation.apply(add$1(me,Ce)),Ue=add$1(mul(Ye,ce),mul(We,this.activation.apply(add$1(ge,Se)))),Ke=mul(this.recurrentActivation.apply(add$1(ve,$e)),this.activation.apply(Ue));return[Ke,Ke,Ue]})}getConfig(){const ee=super.getConfig(),ne=__rest(ee,["units"]),ie={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign({},ne,ie)}inputConv(ee,ne,ie,oe){const ae=conv2d$2(ee,ne,this.strides,oe||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return ie?biasAdd(ae,ie,this.dataFormat):ae}recurrentConv(ee,ne){return conv2d$2(ee,ne,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}ConvLSTM2DCell.className="ConvLSTM2DCell";registerClass(ConvLSTM2DCell);class ConvLSTM2D extends ConvRNN2D{constructor(ee){const ne=new ConvLSTM2DCell(ee);super(Object.assign({},ee,{cell:ne}))}static fromConfig(ee,ne){return new ee(ne)}}ConvLSTM2D.className="ConvLSTM2D";registerClass(ConvLSTM2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Dropout extends Layer{constructor(ee){super(ee),this.rate=Math.max(Math.min(ee.rate,1),0),this.noiseShape=ee.noiseShape,this.seed=ee.seed,this.supportsMasking=!0}getNoiseShape(ee){if(this.noiseShape==null)return this.noiseShape;const ne=ee.shape,ie=[];for(let oe=0;oe<this.noiseShape.length;++oe)ie.push(this.noiseShape[oe]==null?ne[oe]:this.noiseShape[oe]);return ie}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ie=getExactlyOneTensor(ee);if(0<this.rate&&this.rate<1){const oe=ne.training==null?!1:ne.training,ae=this.getNoiseShape(ie);return inTrainPhase(()=>dropout(ie,this.rate,ae,this.seed),()=>ie,oe)}return ee})}getConfig(){const ee={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},ne=super.getConfig();return Object.assign(ee,ne),ee}dispose(){return super.dispose()}}Dropout.className="Dropout";registerClass(Dropout);class SpatialDropout1D extends Dropout{constructor(ee){super(ee),this.inputSpec=[{ndim:3}]}getNoiseShape(ee){const ne=ee.shape;return[ne[0],1,ne[2]]}}SpatialDropout1D.className="SpatialDropout1D";registerClass(SpatialDropout1D);class Dense extends Layer{constructor(ee){if(super(ee),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",ee.batchInputShape==null&&ee.inputShape==null&&ee.inputDim!=null){let ne=null;ee.batchSize!=null&&(ne=ee.batchSize),this.batchInputShape=[ne,ee.inputDim]}this.units=ee.units,assertPositiveInteger(this.units,"units"),this.activation=getActivation(ee.activation),ee.useBias!=null&&(this.useBias=ee.useBias),this.kernelInitializer=getInitializer(ee.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=getInitializer(ee.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=getConstraint(ee.kernelConstraint),this.biasConstraint=getConstraint(ee.biasConstraint),this.kernelRegularizer=getRegularizer(ee.kernelRegularizer),this.biasRegularizer=getRegularizer(ee.biasRegularizer),this.activityRegularizer=getRegularizer(ee.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(ee){ee=getExactlyOneShape(ee);const ne=ee[ee.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[ne,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:ne}}],this.built=!0}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=ee.slice();return ne[ne.length-1]=this.units,ne}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ie=getExactlyOneTensor(ee),oe=mapActivationToFusedKernel(this.activation.getClassName());let ae;return oe!=null?ae=dot(ie,this.kernel.read(),oe,this.bias?this.bias.read():null):(ae=dot(ie,this.kernel.read()),this.bias!=null&&(ae=biasAdd(ae,this.bias.read())),this.activation!=null&&(ae=this.activation.apply(ae))),ae})}getConfig(){const ee={units:this.units,activation:serializeActivation(this.activation),useBias:this.useBias,kernelInitializer:serializeInitializer(this.kernelInitializer),biasInitializer:serializeInitializer(this.biasInitializer),kernelRegularizer:serializeRegularizer(this.kernelRegularizer),biasRegularizer:serializeRegularizer(this.biasRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),kernelConstraint:serializeConstraint(this.kernelConstraint),biasConstraint:serializeConstraint(this.biasConstraint)},ne=super.getConfig();return Object.assign(ee,ne),ee}}Dense.className="Dense";registerClass(Dense);class Flatten extends Layer{constructor(ee){ee=ee||{},super(ee),this.inputSpec=[{minNDim:3}],this.dataFormat=ee.dataFormat}computeOutputShape(ee){ee=getExactlyOneShape(ee);for(const ne of ee.slice(1))if(ne==null)throw new ValueError(`The shape of the input to "Flatten" is not fully defined (got ${ee.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[ee[0],arrayProd(ee,1)]}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);let ie=getExactlyOneTensor(ee);if(this.dataFormat==="channelsFirst"&&ie.rank>1){const oe=[0];for(let ae=2;ae<ie.rank;++ae)oe.push(ae);oe.push(1),ie=ie.transpose(oe)}return batchFlatten(ie)})}getConfig(){const ee={};this.dataFormat!=null&&(ee.dataFormat=this.dataFormat);const ne=super.getConfig();return Object.assign(ee,ne),ee}}Flatten.className="Flatten";registerClass(Flatten);class Activation extends Layer{constructor(ee){super(ee),this.supportsMasking=!0,this.activation=getActivation(ee.activation)}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ie=getExactlyOneTensor(ee);return this.activation.apply(ie)})}getConfig(){const ee={activation:serializeActivation(this.activation)},ne=super.getConfig();return Object.assign(ee,ne),ee}}Activation.className="Activation";registerClass(Activation);class RepeatVector extends Layer{constructor(ee){super(ee),this.n=ee.n,this.inputSpec=[{ndim:2}]}computeOutputShape(ee){return[ee[0],this.n,ee[1]]}call(ee,ne){return tidy(()=>(ee=getExactlyOneTensor(ee),repeat(ee,this.n)))}getConfig(){const ee={n:this.n},ne=super.getConfig();return Object.assign(ee,ne),ee}}RepeatVector.className="RepeatVector";registerClass(RepeatVector);class Reshape extends Layer{constructor(ee){super(ee),this.targetShape=ee.targetShape;for(let ne=0;ne<this.targetShape.length;++ne)this.isUnknown(this.targetShape[ne])&&(this.targetShape[ne]=null)}isUnknown(ee){return ee<0||ee==null}fixUnknownDimension(ee,ne){const ie="Total size of new array must be unchanged.",oe=ne.slice();let ae=1,ce=null;for(let ue=0;ue<oe.length;++ue){const he=oe[ue];if(this.isUnknown(he))if(ce===null)ce=ue;else throw new ValueError("Can only specifiy one unknown dimension.");else ae*=he}const le=arrayProd(ee);if(ce!==null){if(ae===0||le%ae!==0)throw new ValueError(ie);oe[ce]=le/ae}else if(le!==ae)throw new ValueError(ie);return oe}computeOutputShape(ee){let ne=!1;for(let ie=0;ie<ee.length;++ie)if(this.isUnknown(ee[ie])){ne=!0;break}return ne?ee.slice(0,1).concat(this.targetShape):ee.slice(0,1).concat(this.fixUnknownDimension(ee.slice(1),this.targetShape))}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ie=getExactlyOneTensor(ee),oe=ie.shape,ae=oe.slice(0,1).concat(this.fixUnknownDimension(oe.slice(1),this.targetShape));return ie.reshape(ae)})}getConfig(){const ee={targetShape:this.targetShape},ne=super.getConfig();return Object.assign(ee,ne),ee}}Reshape.className="Reshape";registerClass(Reshape);class Permute extends Layer{constructor(ee){if(super(ee),ee.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(ee.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${ee.dims} instead.`);const ne=range$3(1,ee.dims.length+1);if(!arraysEqual(ee.dims.slice().sort(),ne))throw new Error("Invalid permutation `dims`: "+JSON.stringify(ee.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=ee.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new InputSpec({ndim:this.dims.length+1})]}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=ee.slice();return this.dims.forEach((ie,oe)=>{ne[oe+1]=ee[ie]}),ne}call(ee,ne){return transpose$2(getExactlyOneTensor(ee),this.dimsIncludingBatch)}getConfig(){const ee={dims:this.dims},ne=super.getConfig();return Object.assign(ee,ne),ee}}Permute.className="Permute";registerClass(Permute);class Masking extends Layer{constructor(ee){super(ee??{}),this.supportsMasking=!0,ee!=null?this.maskValue=ee.maskValue==null?0:ee.maskValue:this.maskValue=0}computeOutputShape(ee){return ee}getConfig(){const ee=super.getConfig(),ne={maskValue:this.maskValue};return Object.assign(ne,ee),ne}computeMask(ee,ne){const ie=getExactlyOneTensor(ee),oe=-1;return any$2(notEqual$2(ie,this.maskValue),oe)}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ie=getExactlyOneTensor(ee),oe=-1,ae=!0,ce=any$2(notEqual$2(ie,this.maskValue),oe,ae);return ie.mul(ce.asType(ie.dtype))})}}Masking.className="Masking";registerClass(Masking);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Embedding extends Layer{constructor(ee){if(super(ee),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",ee.batchInputShape==null&&ee.inputShape==null){let ne=null;ee.batchSize!=null&&(ne=ee.batchSize),ee.inputLength==null?this.batchInputShape=[ne,null]:this.batchInputShape=[ne].concat(toList(ee.inputLength))}this.inputDim=ee.inputDim,assertPositiveInteger(this.inputDim,"inputDim"),this.outputDim=ee.outputDim,assertPositiveInteger(this.outputDim,"outputDim"),this.embeddingsInitializer=getInitializer(ee.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=getRegularizer(ee.embeddingsRegularizer),this.activityRegularizer=getRegularizer(ee.activityRegularizer),this.embeddingsConstraint=getConstraint(ee.embeddingsConstraint),this.maskZero=ee.maskZero,this.supportsMasking=ee.maskZero,this.inputLength=ee.inputLength}build(ee){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(ee){}computeMask(ee,ne){return tidy(()=>this.maskZero?(ee=getExactlyOneTensor(ee),notEqual$2(ee,zerosLike$2(ee))):null)}computeOutputShape(ee){if(ee=getExactlyOneShape(ee),this.inputLength==null)return[...ee,this.outputDim];const ne=toList(this.inputLength);if(ne.length!==ee.length-1)throw new ValueError(`"inputLength" is ${this.inputLength}, but received input shape has shape ${ee}`);{let ie=0;for(let oe=0;oe<ne.length;++oe){const ae=ne[oe],ce=ee[oe+1];if(ae!=null&&ce!=null&&ae!==ce)throw new ValueError(`"inputLength" is ${this.inputLength}, but received input shape has shape ${ee}`);ae==null&&(ne[ie]=ce),ie++}}return[ee[0],...ne,this.outputDim]}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);let ie=getExactlyOneTensor(ee);return ie.dtype!=="int32"&&(ie=cast$2(ie,"int32")),gather(this.embeddings.read(),ie.as1D()).reshape(getExactlyOneShape(this.computeOutputShape(ie.shape)))})}getConfig(){const ee={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:serializeInitializer(this.embeddingsInitializer),embeddingsRegularizer:serializeRegularizer(this.embeddingsRegularizer),activityRegularizer:serializeRegularizer(this.activityRegularizer),embeddingsConstraint:serializeConstraint(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},ne=super.getConfig();return Object.assign(ee,ne),ee}}Embedding.className="Embedding";registerClass(Embedding);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let Merge$1=class extends Layer{constructor(ee){super(ee||{}),this.supportsMasking=!0}mergeFunction(ee){throw new NotImplementedError}computeElementwiseOpOutputShape(ee,ne){if(ee==null||ne==null)return null;if(ee.length<ne.length)return this.computeElementwiseOpOutputShape(ne,ee);if(ne.length===0)return ee;const ie=ee.slice(0,ee.length-ne.length);for(let oe=0;oe<ne.length;++oe){const ae=ee[ee.length-ne.length+oe],ce=ne[oe];if(ae==null||ce==null||ae<0||ce<0)ie.push(null);else if(ae===1)ie.push(ce);else if(ce===1)ie.push(ae);else{if(ae!==ce)throw new ValueError("Operands could not be broadcast together with shapes "+JSON.stringify(ee)+" "+JSON.stringify(ne));ie.push(ae)}}return ie}build(ee){if(Array.isArray(ee)&&!Array.isArray(ee[0])&&(ee=[getExactlyOneShape(ee)]),ee=ee,ee.length<2)throw new ValueError(`A merge layer should be called on an Array of at least 2 inputs. Got ${ee.length} input(s).`);let ne=[];for(const ae of ee)ae!=null&&ae[0]!==null&&ne.push(ae[0]);if(ne=unique$3(ne),ne.length>1)throw new ValueError(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(ee)}.`);let ie=ee[0]==null?null:ee[0].slice(1);for(let ae=1;ae<ee.length;++ae){const ce=ee[ae]==null?null:ee[ae].slice(1);ie=this.computeElementwiseOpOutputShape(ie,ce)}const oe=ee.map(ae=>ae.length);ee.indexOf(null)===-1&&unique$3(oe).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(ee,ne){return tidy(()=>{if(ee=ee,this.reshapeRequired){const ie=[],oe=ee.map(ae=>ae.rank);if(oe.indexOf(null)===-1){const ae=max$3(oe);for(let ce of ee){const le=ce.rank;for(let ue=0;ue<ae-le;++ue)ce=expandDims$2(ce,1);ie.push(ce)}return this.mergeFunction(ie)}else{let ae=!1;for(const ue of ee){const he=ue.rank;if(he==null){const fe=ue.shape,me=fe[0],ge=fe.slice(1).concat([me]);let ve=ue.reshape([me].concat(arrayProd(fe.slice(1))));ve=transpose$2(ve,[1,0]),ve=ve.reshape(ge),ie.push(ve),ae=!0}else if(he>1){const fe=range$3(1,he).concat([0]);ie.push(transpose$2(ue,fe)),ae=!0}else ie.push(ue)}let ce=this.mergeFunction(ie);const le=ce.rank;if(ae){if(le==null){const ue=ce.shape,he=ue.length,fe=ue[he-1],me=[fe].concat(ue.slice(0,ue.length-1));ce=transpose$2(ce.reshape([-1,fe]),[1,0]).reshape(me)}else if(le>1){const ue=[le-1].concat(range$3(0,le-1));ce=transpose$2(ce,ue)}}return ce}}else return this.mergeFunction(ee)})}computeOutputShape(ee){ee=ee;let ne;ee[0]==null?ne=null:ne=ee[0].slice(1);for(let oe=1;oe<ee.length;++oe){const ae=ee[oe]==null?null:ee[oe].slice(1);ne=this.computeElementwiseOpOutputShape(ne,ae)}let ie=[];for(const oe of ee)oe!=null&&oe[0]!==null&&ie.push(oe[0]);return ie=unique$3(ie),ie.length===1?ne=ie.concat(ne):ne=[null].concat(ne),ne}computeMask(ee,ne){return tidy(()=>{if(ne==null)return null;if(!Array.isArray(ne))throw new ValueError("`mask` should be an Array");if(!Array.isArray(ee))throw new ValueError("`inputs` should be an Array");if(ne.length!==ee.length)throw new ValueError(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${ee.length} vs ${ne.length})`);if(ne.every(oe=>oe==null))return null;ne=ne.map(oe=>oe==null?oe:expandDims$3(oe,0));let ie=ne[0];for(let oe=1;oe<ne.length-1;++oe)ie=logicalAnd$2(ie,ne[oe]);return ie})}},Add$1=class extends Merge$1{constructor(ee){super(ee)}mergeFunction(ee){return tidy(()=>{let ne=ee[0].clone();for(let ie=1;ie<ee.length;++ie)ne=add$1(ne,ee[ie]);return ne})}};Add$1.className="Add";registerClass(Add$1);let Multiply$1=class extends Merge$1{constructor(ee){super(ee)}mergeFunction(ee){return tidy(()=>{let ne=ee[0].clone();for(let ie=1;ie<ee.length;++ie)ne=mul(ne,ee[ie]);return ne})}};Multiply$1.className="Multiply";registerClass(Multiply$1);class Average extends Merge$1{constructor(ee){super(ee)}mergeFunction(ee){return tidy(()=>{let ne=ee[0].clone();for(let ie=1;ie<ee.length;++ie)ne=add$1(ne,ee[ie]);return mul(1/ee.length,ne)})}}Average.className="Average";registerClass(Average);class Maximum extends Merge$1{constructor(ee){super(ee)}mergeFunction(ee){return tidy(()=>{let ne=ee[0];for(let ie=1;ie<ee.length;++ie)ne=maximum$2(ne,ee[ie]);return ne})}}Maximum.className="Maximum";registerClass(Maximum);class Minimum extends Merge$1{constructor(ee){super(ee)}mergeFunction(ee){return tidy(()=>{let ne=ee[0];for(let ie=1;ie<ee.length;++ie)ne=minimum$2(ne,ee[ie]);return ne})}}Minimum.className="Minimum";registerClass(Minimum);class Concatenate extends Merge$1{constructor(ee){super(ee),this.DEFAULT_AXIS=-1,ee==null&&(ee={}),this.axis=ee.axis==null?this.DEFAULT_AXIS:ee.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(ee){if(!(Array.isArray(ee)&&Array.isArray(ee[0]))||ee.length===1)throw new ValueError("A `Concatenate` layer should be called on a list of at least 2 inputs");ee=ee;let ne=!0;for(const oe of ee)if(oe!=null){ne=!1;break}if(ne)return;const ie=[];for(let oe=0;oe<ee.length;++oe){const ae=ee[oe].slice();ae.splice(this.axis,1);let ce=!1;for(const le of ie)if(arraysEqual(le,ae)){ce=!0;break}ce||ie.push(ae)}if(ie.length>1)throw new ValueError("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(ee))}mergeFunction(ee){return tidy(()=>concatenate(ee,this.axis))}computeOutputShape(ee){if(!(Array.isArray(ee)&&Array.isArray(ee[0])))throw new ValueError("A `Concatenate` layer should be called on a list of inputs.");const ne=ee,ie=ne[0].slice(),oe=this.axis<0?ie.length+this.axis:this.axis;for(const ae of ne.slice(1)){if(ie[oe]==null||ae[oe]==null){ie[oe]=null;break}ie[oe]+=ae[oe]}return ie}computeMask(ee,ne){if(ne==null)return null;if(!Array.isArray(ne))throw new ValueError("`mask` should be an array for Concatenate");if(!Array.isArray(ee))throw new ValueError("`inputs` should be an array for Concatenate");if(ne.length!==ee.length)throw new ValueError(`Mismatch in the length of mask (${ne.length}) and the legnth of inputs (${ee.length})`);return tidy(()=>{let ie=!0;if(ne.forEach(ce=>{if(ce!=null){ie=!1;return}}),ie)return null;const oe=[];for(let ce=0;ce<ee.length;++ce)ne[ce]==null?oe.push(onesLike$2(ee[ce]).asType("bool")):ne[ce].rank<ee[ce].rank?oe.push(expandDims$3(ne[ce],-1)):oe.push(ne[ce]);const ae=concat$2(oe,this.axis);return all$2(ae,-1,!1)})}getConfig(){const ee={axis:this.axis},ne=super.getConfig();return Object.assign(ee,ne),ee}}Concatenate.className="Concatenate";registerClass(Concatenate);function interpretAxis(re,ee){for(;re<0;)re+=ee;return re}function batchDot(re,ee,ne){if(re.shape.length>3||ee.shape.length>3)throw new NotImplementedError("batchDot is not implemented for tensors of 4D or higher rank yet");if(assert$2(re.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${re.shape.length}`),assert$2(re.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${ee.shape.length}`),typeof ne=="number"&&(ne=[ne,ne]),re.dtype==="complex64"||ee.dtype==="complex64")throw new NotImplementedError("batchDot is not implemented for complex64-type Tensors yet.");const ie=re.shape.length,oe=ee.shape.length;ne==null&&(ne=[ie-1,oe-2]);const ae=ne;return tidy(()=>{let ce;if(ie>oe){ce=ie-oe;const ue=[];for(let he=0;he<ce;++he)ue.push(1);ee=ee.reshape(ee.shape.concat(ue))}else if(oe>ie){ce=oe-ie;const ue=[];for(let he=0;he<ce;++he)ue.push(1);re=re.reshape(re.shape.concat(ue))}else ce=0;let le;if(re.shape.length===2&&ee.shape.length===2)ae[0]===ae[1]?le=re.mul(ee).sum(ae[0]):le=re.transpose([1,0]).mul(ee).sum(ae[1]);else{const ue=ae[0]!==re.shape.length-1,he=ae[1]===ee.shape.length-1;le=re.matMul(ee,ue,he)}if(ce>0){let ue;ie>oe?ue=ie+oe-3:ue=ie-1;const he=[];for(let fe=ue;fe<ue+ce;++fe)he.push(fe);le=le.squeeze(he)}return le.shape.length===1&&(le=le.expandDims(1)),le})}class Dot extends Merge$1{constructor(ee){super(ee),this.axes=ee.axes,this.normalize=ee.normalize==null?!1:ee.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(ee){assert$2(Array.isArray(ee)&&ee.length===2&&Array.isArray(ee[0])&&Array.isArray(ee[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const ne=ee[0],ie=ee[1];if(ne.length>3||ie.length>3)throw new NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const oe=this.interpretAxes(ne,ie);if(ne[oe[0]]!==ie[oe[1]])throw new ValueError(`Dimension incompatibility: ${ne[oe[0]]} !== ${ie[oe[1]]}`)}mergeFunction(ee){if(ee.length!==2)throw new ValueError(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${ee.length} input(s).`);let ne=ee[0],ie=ee[1],oe;return Array.isArray(this.axes)?oe=this.axes.map((ae,ce)=>interpretAxis(ae,ee[ce].shape.length)):oe=[interpretAxis(this.axes,ne.shape.length),interpretAxis(this.axes,ie.shape.length)],this.normalize&&(ne=l2Normalize(ne,oe[0]),ie=l2Normalize(ie,oe[1])),batchDot(ne,ie,oe)}interpretAxes(ee,ne){let ie;return Array.isArray(this.axes)?ie=this.axes:ie=[interpretAxis(this.axes,ee.length),interpretAxis(this.axes,ne.length)],ie}computeOutputShape(ee){assert$2(Array.isArray(ee)&&ee.length===2&&Array.isArray(ee[0])&&Array.isArray(ee[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const ne=ee[0].slice(),ie=ee[1].slice();if(ne.length>3||ie.length>3)throw new NotImplementedError("Dot layer does not support tensors of 4D or higher rank yet.");const oe=this.interpretAxes(ne,ie);ne.splice(oe[0],1),ie.splice(oe[1],1),ie.splice(0,1);const ae=ne.concat(ie);return ae.length===1&&ae.push(1),ae}computeMask(ee,ne){return null}getConfig(){const ee={axes:this.axes,normalize:this.normalize},ne=super.getConfig();return Object.assign(ee,ne),ee}}Dot.className="Dot";registerClass(Dot);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class GaussianNoise extends Layer{constructor(ee){super(ee),this.supportsMasking=!0,this.stddev=ee.stddev}computeOutputShape(ee){return ee}getConfig(){const ee=super.getConfig(),ne={stddev:this.stddev};return Object.assign(ne,ee),ne}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ie=getExactlyOneTensor(ee);return inTrainPhase(()=>randomNormal(ie.shape,0,this.stddev).add(ie),()=>ie,ne.training||!1)})}}GaussianNoise.className="GaussianNoise";registerClass(GaussianNoise);class GaussianDropout extends Layer{constructor(ee){super(ee),this.supportsMasking=!0,this.rate=ee.rate}computeOutputShape(ee){return ee}getConfig(){const ee=super.getConfig(),ne={rate:this.rate};return Object.assign(ne,ee),ne}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne);const ie=getExactlyOneTensor(ee);return this.rate>0&&this.rate<1?inTrainPhase(()=>{const ae=Math.sqrt(this.rate/(1-this.rate));return ie.mul(randomNormal(ie.shape,1,ae))},()=>ie,ne.training||!1):ie})}}GaussianDropout.className="GaussianDropout";registerClass(GaussianDropout);class AlphaDropout extends Layer{constructor(ee){super(ee),this.supportsMasking=!0,this.rate=ee.rate,this.noiseShape=ee.noiseShape}_getNoiseShape(ee){return this.noiseShape||getExactlyOneTensor(ee).shape}computeOutputShape(ee){return ee}getConfig(){const ee=super.getConfig(),ne={rate:this.rate};return Object.assign(ne,ee),ne}call(ee,ne){return tidy(()=>{if(this.rate<1&&this.rate>0){const ie=this._getNoiseShape(ee);return inTrainPhase(()=>{const ae=getExactlyOneTensor(ee),ce=1.6732632423543772,le=1.0507009873554805,ue=-ce*le;let he=greaterEqual$2(randomUniform(ie),this.rate);he=cast$2(he,"float32");const fe=((1-this.rate)*(1+this.rate*ue**2))**-.5,me=-fe*ue*this.rate;return ae.mul(he).add(he.add(-1).mul(ue)).mul(fe).add(me)},()=>getExactlyOneTensor(ee),ne.training||!1)}return ee})}}AlphaDropout.className="AlphaDropout";registerClass(AlphaDropout);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function batchNormalization(re,ee,ne,ie,oe,ae=.001){let ce;if(re.rank===2)ce=batchNorm2d(re,ee,ne,ie,oe,ae);else if(re.rank===3)ce=batchNorm3d(re,ee,ne,ie,oe,ae);else if(re.rank===4)ce=batchNorm4d(re,ee,ne,ie,oe,ae);else throw new NotImplementedError(`batchNormalization is not implemented for array of rank ${re.rank} yet`);return ce}function regularNormalizeBatchInTraining(re,ee,ne,ie,oe=.001){return tidy(()=>{const ae=moments(re,ie),ce=ae.mean,le=ae.variance;return[batchNormalization(re,ce,le,ne,ee,oe),ce,le]})}function broadcastNormalizeBatchInTraining(re,ee,ne,ie,oe=.001){return tidy(()=>{const ae=moments(re,ie),ce=ae.mean,le=ae.variance,ue=[];for(const ye of range$3(0,re.rank))ie.indexOf(ye)!==-1?ue.push(1):ue.push(re.shape[ye]);const he=ce.reshape(ue),fe=le.reshape(ue),me=ee==null?null:ee.reshape(ue),ge=ne==null?null:ne.reshape(ue);return[batchNormalization(re,he,fe,ge,me,oe),ce,le]})}function normalizeBatchInTraining(re,ee,ne,ie,oe=.001){return arraysEqual(ie.slice().sort(),range$3(0,re.rank-1))?regularNormalizeBatchInTraining(re,ee,ne,ie,oe):broadcastNormalizeBatchInTraining(re,ee,ne,ie,oe)}class BatchNormalization extends Layer{constructor(ee){ee==null&&(ee={}),super(ee),this.supportsMasking=!0,this.axis=ee.axis==null?-1:ee.axis,this.momentum=ee.momentum==null?.99:ee.momentum,this.epsilon=ee.epsilon==null?.001:ee.epsilon,this.center=ee.center==null?!0:ee.center,this.scale=ee.scale==null?!0:ee.scale,this.betaInitializer=getInitializer(ee.betaInitializer||"zeros"),this.gammaInitializer=getInitializer(ee.gammaInitializer||"ones"),this.movingMeanInitializer=getInitializer(ee.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=getInitializer(ee.movingVarianceInitializer||"ones"),this.betaConstraint=getConstraint(ee.betaConstraint),this.gammaConstraint=getConstraint(ee.gammaConstraint),this.betaRegularizer=getRegularizer(ee.betaRegularizer),this.gammaRegularizer=getRegularizer(ee.gammaRegularizer)}build(ee){ee=getExactlyOneShape(ee);const ne=this.axis>=0?this.axis:this.axis+ee.length,ie=ee[ne];if(ie==null)throw new ValueError(`Axis ${ne} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(ee)}.`);this.inputSpec=[new InputSpec({ndim:ee.length,axes:{[ne]:ie}})];const oe=[ie];this.scale&&(this.gamma=this.addWeight("gamma",oe,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",oe,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",oe,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",oe,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(ee,ne){return tidy(()=>{const ie=ne.training==null?!1:ne.training,oe=getExactlyOneTensor(ee),ae=oe.shape,ce=ae.length,le=range$3(0,ce),ue=this.axis>=0?this.axis:this.axis+ce;le.splice(ue,1);const he=pyListRepeat(1,ce);he[ue]=ae[ue];const fe=le.slice();fe.sort();const me=!arraysEqual(fe,range$3(0,ce).slice(0,ce-1)),ge=()=>{if(me){const $e=this.movingMean.read().reshape(he),Te=this.movingVariance.read().reshape(he),Ne=this.center?this.beta.read().reshape(he):null,Ie=this.scale?this.gamma.read().reshape(he):null;return batchNormalization(oe,$e,Te,Ne,Ie,this.epsilon)}else return batchNormalization(oe,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!ie)return ge();const[ve,ye,be]=normalizeBatchInTraining(oe,this.gamma.read(),this.beta.read(),le,this.epsilon),Ce=($e,Te,Ne)=>{tidy(()=>{const Ie=1-Ne,ke=$e.read(),De=ke.sub(Te).mul(Ie);$e.write(ke.sub(De))})};return(()=>{Ce(this.movingMean,ye,this.momentum),Ce(this.movingVariance,be,this.momentum)})(),ve})}getConfig(){const ee={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:serializeInitializer(this.betaInitializer),gammaInitializer:serializeInitializer(this.gammaInitializer),movingMeanInitializer:serializeInitializer(this.movingMeanInitializer),movingVarianceInitializer:serializeInitializer(this.movingVarianceInitializer),betaRegularizer:serializeRegularizer(this.betaRegularizer),gammaRegularizer:serializeRegularizer(this.gammaRegularizer),betaConstraint:serializeConstraint(this.betaConstraint),gammaConstraint:serializeConstraint(this.gammaConstraint)},ne=super.getConfig();return Object.assign(ee,ne),ee}}BatchNormalization.className="BatchNormalization";registerClass(BatchNormalization);class LayerNormalization extends Layer{constructor(ee){if(ee==null&&(ee={}),super(ee),this.axis=ee.axis==null?-1:ee.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const ne of this.axis)if(!Number.isInteger(ne))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=ee.epsilon==null?.001:ee.epsilon,this.center=ee.center==null?!0:ee.center,this.scale=ee.scale==null?!0:ee.scale,this.betaInitializer=getInitializer(ee.betaInitializer||"zeros"),this.gammaInitializer=getInitializer(ee.gammaInitializer||"ones"),this.betaRegularizer=getRegularizer(ee.betaRegularizer),this.gammaRegularizer=getRegularizer(ee.gammaRegularizer),this.supportsMasking=!0}build(ee){ee=getExactlyOneShape(ee);const ne=ee.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let ae=0;ae<this.axis.length;++ae)this.axis[ae]<0&&(this.axis[ae]+=ne);for(const ae of this.axis)if(ae<0||ae>=ne)throw new Error(`Invalid axis: ${ae}`);if(this.axis.length!==unique$3(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const ie=this.axis.map(ae=>ee[ae]),oe=!0;this.scale?this.gamma=this.addWeight("gamma",ie,"float32",this.gammaInitializer,this.gammaRegularizer,oe):this.gamma=null,this.center?this.beta=this.addWeight("beta",ie,"float32",this.betaInitializer,this.betaRegularizer,oe):this.beta=null,this.built=!0}call(ee,ne){const ie=getExactlyOneTensor(ee),oe=ie.shape,ae=oe.length;return tidy(()=>{let{mean:le,variance:ue}=moments(ie,this.axis,!0);const he=pyListRepeat(1,ae);for(const be of this.axis)he[be]=oe[be];const fe=be=>be!=null&&be.shape.length!==ae&&this.axis!==[ae-1]?be.reshape(he):be;let me=fe(this.gamma.read()),ge=fe(this.beta.read());const ve=[],ye=[];for(let be=0;be<ae;++be)this.axis.indexOf(be)!==-1?(ve.push(oe[be]),ye.push(1)):(ve.push(1),ye.push(oe[be]));return le=le.tile(ve),ue=ue.tile(ve),me=me.tile(ye),ge=ge.tile(ye),batchNormalization(ie,le,ue,ge,me,this.epsilon)})}getConfig(){const ee={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:serializeInitializer(this.betaInitializer),gammaInitializer:serializeInitializer(this.gammaInitializer),betaRegularizer:serializeRegularizer(this.betaRegularizer),gammaRegularizer:serializeRegularizer(this.gammaRegularizer)},ne=super.getConfig();return Object.assign(ee,ne),ee}}LayerNormalization.className="LayerNormalization";registerClass(LayerNormalization);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function spatial2dPadding(re,ee,ne){return tidy(()=>{if(re.rank!==4)throw new ValueError(`temporalPadding expects input tensor to be 4-D, but received a ${re.rank}-D tensor.`);if(ee==null&&(ee=[[1,1],[1,1]]),ee.length!==2||ee[0].length!==2||ee[1].length!==2)throw new ValueError("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(ne==null&&(ne=imageDataFormat()),ne!=="channelsLast"&&ne!=="channelsFirst")throw new ValueError(`Unknown data format: ${ne}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let ie;return ne==="channelsFirst"?ie=[[0,0],[0,0],ee[0],ee[1]]:ie=[[0,0],ee[0],ee[1],[0,0]],pad(re,ie)})}class ZeroPadding2D extends Layer{constructor(ee){if(ee==null&&(ee={}),super(ee),this.dataFormat=ee.dataFormat==null?imageDataFormat():ee.dataFormat,ee.padding==null)this.padding=[[1,1],[1,1]];else if(typeof ee.padding=="number")this.padding=[[ee.padding,ee.padding],[ee.padding,ee.padding]];else{if(ee.padding=ee.padding,ee.padding.length!==2)throw new ValueError(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${ee.padding.length} array.`);let ne,ie;if(typeof ee.padding[0]=="number")ne=[ee.padding[0],ee.padding[0]],ie=[ee.padding[1],ee.padding[1]];else{if(ee.padding=ee.padding,ee.padding[0].length!==2)throw new ValueError(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${ee.padding[0].length} array.`);if(ne=ee.padding[0],ee.padding[1].length!==2)throw new ValueError(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${ee.padding[1].length} array.`);ie=ee.padding[1]}this.padding=[ne,ie]}this.inputSpec=[new InputSpec({ndim:4})]}computeOutputShape(ee){ee=getExactlyOneShape(ee);let ne,ie;return this.dataFormat==="channelsFirst"?(ee[2]!=null&&ee[2]>=0?ne=ee[2]+this.padding[0][0]+this.padding[0][1]:ne=null,ee[3]!=null&&ee[3]>=0?ie=ee[3]+this.padding[1][0]+this.padding[1][1]:ie=null,[ee[0],ee[1],ne,ie]):(ee[1]!=null&&ee[1]>=0?ne=ee[1]+this.padding[0][0]+this.padding[0][1]:ne=null,ee[2]!=null&&ee[2]>=0?ie=ee[2]+this.padding[1][0]+this.padding[1][1]:ie=null,[ee[0],ne,ie,ee[3]])}call(ee,ne){return tidy(()=>spatial2dPadding(getExactlyOneTensor(ee),this.padding,this.dataFormat))}getConfig(){const ee={padding:this.padding,dataFormat:this.dataFormat},ne=super.getConfig();return Object.assign(ee,ne),ee}}ZeroPadding2D.className="ZeroPadding2D";registerClass(ZeroPadding2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function pool2d(re,ee,ne,ie,oe,ae){return tidy(()=>{checkDataFormat(oe),checkPoolMode(ae),checkPaddingMode(ie),ne==null&&(ne=[1,1]),ie==null&&(ie="valid"),oe==null&&(oe=imageDataFormat()),ae==null&&(ae="max"),re=preprocessConv2DInput(re,oe);let ce;const le=ie==="same"?"same":"valid";return ae==="max"?ce=maxPool$2(re,ee,ne,le):ce=avgPool$2(re,ee,ne,le),oe==="channelsFirst"&&(ce=transpose$2(ce,[0,3,1,2])),ce})}function pool3d$1(re,ee,ne,ie,oe,ae){return tidy(()=>{checkDataFormat(oe),checkPoolMode(ae),checkPaddingMode(ie),ne==null&&(ne=[1,1,1]),ie==null&&(ie="valid"),oe==null&&(oe=imageDataFormat()),ae==null&&(ae="max"),re=preprocessConv3DInput(re,oe);let ce;const le=ie==="same"?"same":"valid";return ae==="max"?ce=maxPool3d$1(re,ee,ne,le):ce=avgPool3d(re,ee,ne,le),oe==="channelsFirst"&&(ce=transpose$2(ce,[0,4,1,2,3])),ce})}class Pooling1D extends Layer{constructor(ee){if(ee.poolSize==null&&(ee.poolSize=2),super(ee),typeof ee.poolSize=="number")this.poolSize=[ee.poolSize];else if(Array.isArray(ee.poolSize)&&ee.poolSize.length===1&&typeof ee.poolSize[0]=="number")this.poolSize=ee.poolSize;else throw new ValueError(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(ee.poolSize)}`);if(assertPositiveInteger(this.poolSize,"poolSize"),ee.strides==null)this.strides=this.poolSize;else if(typeof ee.strides=="number")this.strides=[ee.strides];else if(Array.isArray(ee.strides)&&ee.strides.length===1&&typeof ee.strides[0]=="number")this.strides=ee.strides;else throw new ValueError(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(ee.strides)}`);assertPositiveInteger(this.strides,"strides"),this.padding=ee.padding==null?"valid":ee.padding,checkPaddingMode(this.padding),this.inputSpec=[new InputSpec({ndim:3})]}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=convOutputLength(ee[1],this.poolSize[0],this.padding,this.strides[0]);return[ee[0],ne,ee[2]]}call(ee,ne){return tidy(()=>{this.invokeCallHook(ee,ne),ee=expandDims$2(getExactlyOneTensor(ee),2);const ie=this.poolingFunction(getExactlyOneTensor(ee),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return squeeze(ie,[2])})}getConfig(){const ee={poolSize:this.poolSize,padding:this.padding,strides:this.strides},ne=super.getConfig();return Object.assign(ee,ne),ee}}class MaxPooling1D extends Pooling1D{constructor(ee){super(ee)}poolingFunction(ee,ne,ie,oe,ae){return checkDataFormat(ae),checkPaddingMode(oe),pool2d(ee,ne,ie,oe,ae,"max")}}MaxPooling1D.className="MaxPooling1D";registerClass(MaxPooling1D);class AveragePooling1D extends Pooling1D{constructor(ee){super(ee)}poolingFunction(ee,ne,ie,oe,ae){return checkDataFormat(ae),checkPaddingMode(oe),pool2d(ee,ne,ie,oe,ae,"avg")}}AveragePooling1D.className="AveragePooling1D";registerClass(AveragePooling1D);class Pooling2D extends Layer{constructor(ee){if(ee.poolSize==null&&(ee.poolSize=[2,2]),super(ee),this.poolSize=Array.isArray(ee.poolSize)?ee.poolSize:[ee.poolSize,ee.poolSize],ee.strides==null)this.strides=this.poolSize;else if(Array.isArray(ee.strides)){if(ee.strides.length!==2)throw new ValueError(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${ee.strides.length}.`);this.strides=ee.strides}else this.strides=[ee.strides,ee.strides];assertPositiveInteger(this.poolSize,"poolSize"),assertPositiveInteger(this.strides,"strides"),this.padding=ee.padding==null?"valid":ee.padding,this.dataFormat=ee.dataFormat==null?"channelsLast":ee.dataFormat,checkDataFormat(this.dataFormat),checkPaddingMode(this.padding),this.inputSpec=[new InputSpec({ndim:4})]}computeOutputShape(ee){ee=getExactlyOneShape(ee);let ne=this.dataFormat==="channelsFirst"?ee[2]:ee[1],ie=this.dataFormat==="channelsFirst"?ee[3]:ee[2];return ne=convOutputLength(ne,this.poolSize[0],this.padding,this.strides[0]),ie=convOutputLength(ie,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[ee[0],ee[1],ne,ie]:[ee[0],ne,ie,ee[3]]}call(ee,ne){return tidy(()=>(this.invokeCallHook(ee,ne),this.poolingFunction(getExactlyOneTensor(ee),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const ee={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},ne=super.getConfig();return Object.assign(ee,ne),ee}}class MaxPooling2D extends Pooling2D{constructor(ee){super(ee)}poolingFunction(ee,ne,ie,oe,ae){return checkDataFormat(ae),checkPaddingMode(oe),pool2d(ee,ne,ie,oe,ae,"max")}}MaxPooling2D.className="MaxPooling2D";registerClass(MaxPooling2D);class AveragePooling2D extends Pooling2D{constructor(ee){super(ee)}poolingFunction(ee,ne,ie,oe,ae){return checkDataFormat(ae),checkPaddingMode(oe),pool2d(ee,ne,ie,oe,ae,"avg")}}AveragePooling2D.className="AveragePooling2D";registerClass(AveragePooling2D);class Pooling3D extends Layer{constructor(ee){if(ee.poolSize==null&&(ee.poolSize=[2,2,2]),super(ee),this.poolSize=Array.isArray(ee.poolSize)?ee.poolSize:[ee.poolSize,ee.poolSize,ee.poolSize],ee.strides==null)this.strides=this.poolSize;else if(Array.isArray(ee.strides)){if(ee.strides.length!==3)throw new ValueError(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${ee.strides.length}.`);this.strides=ee.strides}else this.strides=[ee.strides,ee.strides,ee.strides];assertPositiveInteger(this.poolSize,"poolSize"),assertPositiveInteger(this.strides,"strides"),this.padding=ee.padding==null?"valid":ee.padding,this.dataFormat=ee.dataFormat==null?"channelsLast":ee.dataFormat,checkDataFormat(this.dataFormat),checkPaddingMode(this.padding),this.inputSpec=[new InputSpec({ndim:5})]}computeOutputShape(ee){ee=getExactlyOneShape(ee);let ne=this.dataFormat==="channelsFirst"?ee[2]:ee[1],ie=this.dataFormat==="channelsFirst"?ee[3]:ee[2],oe=this.dataFormat==="channelsFirst"?ee[4]:ee[3];return ne=convOutputLength(ne,this.poolSize[0],this.padding,this.strides[0]),ie=convOutputLength(ie,this.poolSize[1],this.padding,this.strides[1]),oe=convOutputLength(oe,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[ee[0],ee[1],ne,ie,oe]:[ee[0],ne,ie,oe,ee[4]]}call(ee,ne){return tidy(()=>(this.invokeCallHook(ee,ne),this.poolingFunction(getExactlyOneTensor(ee),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const ee={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},ne=super.getConfig();return Object.assign(ee,ne),ee}}class MaxPooling3D extends Pooling3D{constructor(ee){super(ee)}poolingFunction(ee,ne,ie,oe,ae){return checkDataFormat(ae),checkPaddingMode(oe),pool3d$1(ee,ne,ie,oe,ae,"max")}}MaxPooling3D.className="MaxPooling3D";registerClass(MaxPooling3D);class AveragePooling3D extends Pooling3D{constructor(ee){super(ee)}poolingFunction(ee,ne,ie,oe,ae){return checkDataFormat(ae),checkPaddingMode(oe),pool3d$1(ee,ne,ie,oe,ae,"avg")}}AveragePooling3D.className="AveragePooling3D";registerClass(AveragePooling3D);class GlobalPooling1D extends Layer{constructor(ee){super(ee),this.inputSpec=[new InputSpec({ndim:3})]}computeOutputShape(ee){return[ee[0],ee[2]]}call(ee,ne){throw new NotImplementedError}}class GlobalAveragePooling1D extends GlobalPooling1D{constructor(ee){super(ee||{})}call(ee,ne){return tidy(()=>{const ie=getExactlyOneTensor(ee);return mean$1(ie,1)})}}GlobalAveragePooling1D.className="GlobalAveragePooling1D";registerClass(GlobalAveragePooling1D);class GlobalMaxPooling1D extends GlobalPooling1D{constructor(ee){super(ee||{})}call(ee,ne){return tidy(()=>{const ie=getExactlyOneTensor(ee);return max$4(ie,1)})}}GlobalMaxPooling1D.className="GlobalMaxPooling1D";registerClass(GlobalMaxPooling1D);class GlobalPooling2D extends Layer{constructor(ee){super(ee),this.dataFormat=ee.dataFormat==null?"channelsLast":ee.dataFormat,checkDataFormat(this.dataFormat),this.inputSpec=[new InputSpec({ndim:4})]}computeOutputShape(ee){return ee=ee,this.dataFormat==="channelsLast"?[ee[0],ee[3]]:[ee[0],ee[1]]}call(ee,ne){throw new NotImplementedError}getConfig(){const ee={dataFormat:this.dataFormat},ne=super.getConfig();return Object.assign(ee,ne),ee}}class GlobalAveragePooling2D extends GlobalPooling2D{call(ee,ne){return tidy(()=>{const ie=getExactlyOneTensor(ee);return this.dataFormat==="channelsLast"?mean$1(ie,[1,2]):mean$1(ie,[2,3])})}}GlobalAveragePooling2D.className="GlobalAveragePooling2D";registerClass(GlobalAveragePooling2D);class GlobalMaxPooling2D extends GlobalPooling2D{call(ee,ne){return tidy(()=>{const ie=getExactlyOneTensor(ee);return this.dataFormat==="channelsLast"?max$4(ie,[1,2]):max$4(ie,[2,3])})}}GlobalMaxPooling2D.className="GlobalMaxPooling2D";registerClass(GlobalMaxPooling2D);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wrapper extends Layer{constructor(ee){super(ee),this.layer=ee.layer}build(ee){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(ee){this.layer!=null&&(this.layer.trainable=ee)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(ee){this.layer.setWeights(ee)}getConfig(){const ee={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},ne=super.getConfig();return Object.assign(ee,ne),ee}setFastWeightInitDuringBuild(ee){super.setFastWeightInitDuringBuild(ee),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(ee)}static fromConfig(ee,ne,ie={}){const oe=ne.layer,ae=deserialize(oe,ie);delete ne.layer;const ce={layer:ae};return Object.assign(ce,ne),new ee(ce)}}class TimeDistributed extends Wrapper{constructor(ee){super(ee),this.supportsMasking=!0}build(ee){if(ee=getExactlyOneShape(ee),ee.length<3)throw new ValueError(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(ee)}`);this.inputSpec=[{shape:ee}];const ne=[ee[0]].concat(ee.slice(2));this.layer.built||(this.layer.build(ne),this.layer.built=!0),super.build(ee)}computeOutputShape(ee){ee=getExactlyOneShape(ee);const ne=[ee[0]].concat(ee.slice(2)),ie=this.layer.computeOutputShape(ne),oe=ee[1];return[ie[0],oe].concat(ie.slice(1))}call(ee,ne){return tidy(()=>(ee=getExactlyOneTensor(ee),rnn((ce,le)=>[getExactlyOneTensor(this.layer.call(ce,ne)),[]],ee,[],!1,null,null,!1,!0)[1]))}}TimeDistributed.className="TimeDistributed";registerClass(TimeDistributed);function checkBidirectionalMergeMode(re){checkStringTypeUnionValue(VALID_BIDIRECTIONAL_MERGE_MODES,"BidirectionalMergeMode",re)}const DEFAULT_BIDIRECTIONAL_MERGE_MODE="concat";class Bidirectional extends Wrapper{constructor(ee){super(ee);const ne=ee.layer.getConfig(),ie={};ie.className=ee.layer.getClassName(),ie.config=ne,this.forwardLayer=deserialize(ie),ne.goBackwards=ne.goBackwards!==!0;const oe={};if(oe.className=ee.layer.getClassName(),oe.config=ne,this.backwardLayer=deserialize(oe),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=ee.mergeMode===void 0?DEFAULT_BIDIRECTIONAL_MERGE_MODE:ee.mergeMode,checkBidirectionalMergeMode(this.mergeMode),ee.weights)throw new NotImplementedError("weights support is not implemented for Bidirectional layer yet.");this._stateful=ee.layer.stateful,this.returnSequences=ee.layer.returnSequences,this.returnState=ee.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=ee.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(ee){this._trainable=ee,this.forwardLayer!=null&&(this.forwardLayer.trainable=ee),this.backwardLayer!=null&&(this.backwardLayer.trainable=ee)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(ee){const ne=ee.length,ie=Math.floor(ne/2);this.forwardLayer.setWeights(ee.slice(0,ie)),this.backwardLayer.setWeights(ee.slice(ie))}computeOutputShape(ee){let ne=this.forwardLayer.computeOutputShape(ee);Array.isArray(ne)&&Array.isArray(ne[0])||(ne=[ne]),ne=ne;let ie,oe,ae;return this.returnState&&(ae=ne.slice(1)),ie=ne[0],ie=ie,this.mergeMode==="concat"?(ie[ie.length-1]*=2,oe=[ie]):this.mergeMode==null?oe=[ie,ie.slice()]:oe=[ie],this.returnState?this.mergeMode==null?oe.concat(ae).concat(ae.slice()):[ie].concat(ae).concat(ae.slice()):singletonOrArray(oe)}apply(ee,ne){let ie=ne==null?null:ne.initialState,oe=ne==null?null:ne.constants;ne==null&&(ne={});const ae=standardizeArgs(ee,ie,oe,this.numConstants);if(ee=ae.inputs,ie=ae.initialState,oe=ae.constants,Array.isArray(ee)&&(ie=ee.slice(1),ee=ee[0]),(ie==null||ie.length===0)&&oe==null)return super.apply(ee,ne);const ce=[],le=[];if(ie!=null){const he=ie.length;if(he%2>0)throw new ValueError("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");ne.initialState=ie,ce.push(...ie);const fe=ie.map(me=>new InputSpec({shape:me.shape}));this.forwardLayer.stateSpec=fe.slice(0,he/2),this.backwardLayer.stateSpec=fe.slice(he/2),le.push(...fe)}if(oe!=null)throw new NotImplementedError("Support for constants in Bidirectional layers is not implemented yet.");const ue=ce[0]instanceof SymbolicTensor;for(const he of ce)if(he instanceof SymbolicTensor!==ue)throw new ValueError("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(ue){const he=[ee].concat(ce),fe=this.inputSpec.concat(le),me=this.inputSpec;this.inputSpec=fe;const ge=super.apply(he,ne);return this.inputSpec=me,ge}else return super.apply(ee,ne)}call(ee,ne){return tidy(()=>{const ie=ne.initialState;let oe,ae;if(ie==null)oe=this.forwardLayer.call(ee,ne),ae=this.backwardLayer.call(ee,ne);else{const ue=ie.slice(0,ie.length/2),he=ie.slice(ie.length/2);oe=this.forwardLayer.call(ee,Object.assign(ne,{initialState:ue})),ae=this.backwardLayer.call(ee,Object.assign(ne,{initialState:he}))}let ce;this.returnState&&(Array.isArray(oe)&&(ce=oe.slice(1).concat(ae.slice(1))),oe=oe[0],ae=ae[0]),this.returnSequences&&(ae=reverse$2(ae,1));let le;return this.mergeMode==="concat"?le=concatenate([oe,ae]):this.mergeMode==="sum"?le=add$1(oe,ae):this.mergeMode==="ave"?le=mul(.5,add$1(oe,ae)):this.mergeMode==="mul"?le=mul(oe,ae):this.mergeMode==null&&(le=[oe,ae]),this.returnState?this.mergeMode==null?le.concat(ce):[le].concat(ce):le})}resetStates(ee){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(ee){nameScope(this.forwardLayer.name,()=>{this.forwardLayer.build(ee)}),nameScope(this.backwardLayer.name,()=>{this.backwardLayer.build(ee)}),this.built=!0}computeMask(ee,ne){Array.isArray(ne)&&(ne=ne[0]);let ie;if(this.returnSequences?this.mergeMode==null?ie=[ne,ne]:ie=ne:this.mergeMode==null?ie=[null,null]:ie=null,this.returnState){const ae=this.forwardLayer.states.map(ce=>null);return Array.isArray(ie)?ie.concat(ae).concat(ae):[ie].concat(ae).concat(ae)}else return ie}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(ee){super.setFastWeightInitDuringBuild(ee),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(ee),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(ee)}getConfig(){const ee={mergeMode:this.mergeMode},ne=super.getConfig();return Object.assign(ee,ne),ee}static fromConfig(ee,ne){const ie=deserialize(ne.layer);if(delete ne.layer,ne.numConstants!=null)throw new NotImplementedError("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const oe=ne;return oe.layer=ie,new ee(oe)}}Bidirectional.className="Bidirectional";registerClass(Bidirectional);/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var DataType;(function(re){re[re.DT_INVALID=0]="DT_INVALID",re[re.DT_FLOAT=1]="DT_FLOAT",re[re.DT_DOUBLE=2]="DT_DOUBLE",re[re.DT_INT32=3]="DT_INT32",re[re.DT_UINT8=4]="DT_UINT8",re[re.DT_INT16=5]="DT_INT16",re[re.DT_INT8=6]="DT_INT8",re[re.DT_STRING=7]="DT_STRING",re[re.DT_COMPLEX64=8]="DT_COMPLEX64",re[re.DT_INT64=9]="DT_INT64",re[re.DT_BOOL=10]="DT_BOOL",re[re.DT_QINT8=11]="DT_QINT8",re[re.DT_QUINT8=12]="DT_QUINT8",re[re.DT_QINT32=13]="DT_QINT32",re[re.DT_BFLOAT16=14]="DT_BFLOAT16",re[re.DT_FLOAT_REF=101]="DT_FLOAT_REF",re[re.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",re[re.DT_INT32_REF=103]="DT_INT32_REF",re[re.DT_UINT8_REF=104]="DT_UINT8_REF",re[re.DT_INT16_REF=105]="DT_INT16_REF",re[re.DT_INT8_REF=106]="DT_INT8_REF",re[re.DT_STRING_REF=107]="DT_STRING_REF",re[re.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",re[re.DT_INT64_REF=109]="DT_INT64_REF",re[re.DT_BOOL_REF=110]="DT_BOOL_REF",re[re.DT_QINT8_REF=111]="DT_QINT8_REF",re[re.DT_QUINT8_REF=112]="DT_QUINT8_REF",re[re.DT_QINT32_REF=113]="DT_QINT32_REF",re[re.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"})(DataType||(DataType={}));var SaverDef;(function(re){(function(ee){ee[ee.LEGACY=0]="LEGACY",ee[ee.V1=1]="V1",ee[ee.V2=2]="V2"})(re.CheckpointFormatVersion||(re.CheckpointFormatVersion={}))})(SaverDef||(SaverDef={}));var alea$3={exports:{}};alea$3.exports;(function(re){(function(ee,ne,ie){function oe(ue){var he=this,fe=le();he.next=function(){var me=2091639*he.s0+he.c*23283064365386963e-26;return he.s0=he.s1,he.s1=he.s2,he.s2=me-(he.c=me|0)},he.c=1,he.s0=fe(" "),he.s1=fe(" "),he.s2=fe(" "),he.s0-=fe(ue),he.s0<0&&(he.s0+=1),he.s1-=fe(ue),he.s1<0&&(he.s1+=1),he.s2-=fe(ue),he.s2<0&&(he.s2+=1),fe=null}function ae(ue,he){return he.c=ue.c,he.s0=ue.s0,he.s1=ue.s1,he.s2=ue.s2,he}function ce(ue,he){var fe=new oe(ue),me=he&&he.state,ge=fe.next;return ge.int32=function(){return fe.next()*4294967296|0},ge.double=function(){return ge()+(ge()*2097152|0)*11102230246251565e-32},ge.quick=ge,me&&(typeof me=="object"&&ae(me,fe),ge.state=function(){return ae(fe,{})}),ge}function le(){var ue=4022871197,he=function(fe){fe=fe.toString();for(var me=0;me<fe.length;me++){ue+=fe.charCodeAt(me);var ge=.02519603282416938*ue;ue=ge>>>0,ge-=ue,ge*=ue,ue=ge>>>0,ge-=ue,ue+=ge*4294967296}return(ue>>>0)*23283064365386963e-26};return he}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.alea=ce})(commonjsGlobal,re,!1)})(alea$3);var aleaExports$1=alea$3.exports,xor128$3={exports:{}};xor128$3.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this,he="";ue.x=0,ue.y=0,ue.z=0,ue.w=0,ue.next=function(){var me=ue.x^ue.x<<11;return ue.x=ue.y,ue.y=ue.z,ue.z=ue.w,ue.w^=ue.w>>>19^me^me>>>8},le===(le|0)?ue.x=le:he+=le;for(var fe=0;fe<he.length+64;fe++)ue.x^=he.charCodeAt(fe)|0,ue.next()}function ae(le,ue){return ue.x=le.x,ue.y=le.y,ue.z=le.z,ue.w=le.w,ue}function ce(le,ue){var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(typeof fe=="object"&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.xor128=ce})(commonjsGlobal,re,!1)})(xor128$3);var xor128Exports$1=xor128$3.exports,xorwow$3={exports:{}};xorwow$3.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this,he="";ue.next=function(){var me=ue.x^ue.x>>>2;return ue.x=ue.y,ue.y=ue.z,ue.z=ue.w,ue.w=ue.v,(ue.d=ue.d+362437|0)+(ue.v=ue.v^ue.v<<4^(me^me<<1))|0},ue.x=0,ue.y=0,ue.z=0,ue.w=0,ue.v=0,le===(le|0)?ue.x=le:he+=le;for(var fe=0;fe<he.length+64;fe++)ue.x^=he.charCodeAt(fe)|0,fe==he.length&&(ue.d=ue.x<<10^ue.x>>>4),ue.next()}function ae(le,ue){return ue.x=le.x,ue.y=le.y,ue.z=le.z,ue.w=le.w,ue.v=le.v,ue.d=le.d,ue}function ce(le,ue){var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(typeof fe=="object"&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.xorwow=ce})(commonjsGlobal,re,!1)})(xorwow$3);var xorwowExports$1=xorwow$3.exports,xorshift7$3={exports:{}};xorshift7$3.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this;ue.next=function(){var fe=ue.x,me=ue.i,ge,ve;return ge=fe[me],ge^=ge>>>7,ve=ge^ge<<24,ge=fe[me+1&7],ve^=ge^ge>>>10,ge=fe[me+3&7],ve^=ge^ge>>>3,ge=fe[me+4&7],ve^=ge^ge<<7,ge=fe[me+7&7],ge=ge^ge<<13,ve^=ge^ge<<9,fe[me]=ve,ue.i=me+1&7,ve};function he(fe,me){var ge,ve=[];if(me===(me|0))ve[0]=me;else for(me=""+me,ge=0;ge<me.length;++ge)ve[ge&7]=ve[ge&7]<<15^me.charCodeAt(ge)+ve[ge+1&7]<<13;for(;ve.length<8;)ve.push(0);for(ge=0;ge<8&&ve[ge]===0;++ge);for(ge==8?ve[7]=-1:ve[ge],fe.x=ve,fe.i=0,ge=256;ge>0;--ge)fe.next()}he(ue,le)}function ae(le,ue){return ue.x=le.x.slice(),ue.i=le.i,ue}function ce(le,ue){le==null&&(le=+new Date);var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(fe.x&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.xorshift7=ce})(commonjsGlobal,re,!1)})(xorshift7$3);var xorshift7Exports$1=xorshift7$3.exports,xor4096$3={exports:{}};xor4096$3.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this;ue.next=function(){var fe=ue.w,me=ue.X,ge=ue.i,ve,ye;return ue.w=fe=fe+1640531527|0,ye=me[ge+34&127],ve=me[ge=ge+1&127],ye^=ye<<13,ve^=ve<<17,ye^=ye>>>15,ve^=ve>>>12,ye=me[ge]=ye^ve,ue.i=ge,ye+(fe^fe>>>16)|0};function he(fe,me){var ge,ve,ye,be,Ce,Se=[],$e=128;for(me===(me|0)?(ve=me,me=null):(me=me+"\0",ve=0,$e=Math.max($e,me.length)),ye=0,be=-32;be<$e;++be)me&&(ve^=me.charCodeAt((be+32)%me.length)),be===0&&(Ce=ve),ve^=ve<<10,ve^=ve>>>15,ve^=ve<<4,ve^=ve>>>13,be>=0&&(Ce=Ce+1640531527|0,ge=Se[be&127]^=ve+Ce,ye=ge==0?ye+1:0);for(ye>=128&&(Se[(me&&me.length||0)&127]=-1),ye=127,be=4*128;be>0;--be)ve=Se[ye+34&127],ge=Se[ye=ye+1&127],ve^=ve<<13,ge^=ge<<17,ve^=ve>>>15,ge^=ge>>>12,Se[ye]=ve^ge;fe.w=Ce,fe.X=Se,fe.i=ye}he(ue,le)}function ae(le,ue){return ue.i=le.i,ue.w=le.w,ue.X=le.X.slice(),ue}function ce(le,ue){le==null&&(le=+new Date);var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(fe.X&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.xor4096=ce})(commonjsGlobal,re,!1)})(xor4096$3);var xor4096Exports$1=xor4096$3.exports,tychei$3={exports:{}};tychei$3.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this,he="";ue.next=function(){var me=ue.b,ge=ue.c,ve=ue.d,ye=ue.a;return me=me<<25^me>>>7^ge,ge=ge-ve|0,ve=ve<<24^ve>>>8^ye,ye=ye-me|0,ue.b=me=me<<20^me>>>12^ge,ue.c=ge=ge-ve|0,ue.d=ve<<16^ge>>>16^ye,ue.a=ye-me|0},ue.a=0,ue.b=0,ue.c=-1640531527,ue.d=1367130551,le===Math.floor(le)?(ue.a=le/4294967296|0,ue.b=le|0):he+=le;for(var fe=0;fe<he.length+20;fe++)ue.b^=he.charCodeAt(fe)|0,ue.next()}function ae(le,ue){return ue.a=le.a,ue.b=le.b,ue.c=le.c,ue.d=le.d,ue}function ce(le,ue){var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(typeof fe=="object"&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.tychei=ce})(commonjsGlobal,re,!1)})(tychei$3);var tycheiExports$1=tychei$3.exports,seedrandom$2={exports:{}};(function(re){(function(ee,ne){(0,eval)("this");var ie=256,oe=6,ae=52,ce="random",le=ne.pow(ie,oe),ue=ne.pow(2,ae),he=ue*2,fe=ie-1,me;function ge(Te,Ne,Ie){var ke=[];Ne=Ne==!0?{entropy:!0}:Ne||{};var De=Ce(be(Ne.entropy?[Te,$e(ee)]:Te??Se(),3),ke),Oe=new ve(ke),Be=function(){for(var Me=Oe.g(oe),Le=le,je=0;Me<ue;)Me=(Me+je)*ie,Le*=ie,je=Oe.g(1);for(;Me>=he;)Me/=2,Le/=2,je>>>=1;return(Me+je)/Le};return Be.int32=function(){return Oe.g(4)|0},Be.quick=function(){return Oe.g(4)/4294967296},Be.double=Be,Ce($e(Oe.S),ee),(Ne.pass||Ie||function(Me,Le,je,ze){return ze&&(ze.S&&ye(ze,Oe),Me.state=function(){return ye(Oe,{})}),je?(ne[ce]=Me,Le):Me})(Be,De,"globalThis"in Ne?Ne.global:this==ne,Ne.state)}ne["seed"+ce]=ge;function ve(Te){var Ne,Ie=Te.length,ke=this,De=0,Oe=ke.i=ke.j=0,Be=ke.S=[];for(Ie||(Te=[Ie++]);De<ie;)Be[De]=De++;for(De=0;De<ie;De++)Be[De]=Be[Oe=fe&Oe+Te[De%Ie]+(Ne=Be[De])],Be[Oe]=Ne;(ke.g=function(Me){for(var Le,je=0,ze=ke.i,Ve=ke.j,He=ke.S;Me--;)Le=He[ze=fe&ze+1],je=je*ie+He[fe&(He[ze]=He[Ve=fe&Ve+Le])+(He[Ve]=Le)];return ke.i=ze,ke.j=Ve,je})(ie)}function ye(Te,Ne){return Ne.i=Te.i,Ne.j=Te.j,Ne.S=Te.S.slice(),Ne}function be(Te,Ne){var Ie=[],ke=typeof Te,De;if(Ne&&ke=="object")for(De in Te)try{Ie.push(be(Te[De],Ne-1))}catch{}return Ie.length?Ie:ke=="string"?Te:Te+"\0"}function Ce(Te,Ne){for(var Ie=Te+"",ke,De=0;De<Ie.length;)Ne[fe&De]=fe&(ke^=Ne[fe&De]*19)+Ie.charCodeAt(De++);return $e(Ne)}function Se(){try{var Te;return me&&(Te=me.randomBytes)?Te=Te(ie):(Te=new Uint8Array(ie),(globalThis.crypto||globalThis.msCrypto).getRandomValues(Te)),$e(Te)}catch{var Ne=globalThis.navigator,Ie=Ne&&Ne.plugins;return[+new Date,globalThis,Ie,globalThis.screen,$e(ee)]}}function $e(Te){return String.fromCharCode.apply(0,Te)}if(Ce(ne.random(),ee),re.exports){re.exports=ge;try{me=require$$0$1}catch{}}})([],Math)})(seedrandom$2);var seedrandomExports$1=seedrandom$2.exports,alea$2=aleaExports$1,xor128$2=xor128Exports$1,xorwow$2=xorwowExports$1,xorshift7$2=xorshift7Exports$1,xor4096$2=xor4096Exports$1,tychei$2=tycheiExports$1,sr$1=seedrandomExports$1;sr$1.alea=alea$2;sr$1.xor128=xor128$2;sr$1.xorwow=xorwow$2;sr$1.xorshift7=xorshift7$2;sr$1.xor4096=xor4096$2;sr$1.tychei=tychei$2;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ZipMismatchMode;(function(re){re[re.FAIL=0]="FAIL",re[re.SHORTEST=1]="SHORTEST",re[re.LONGEST=2]="LONGEST"})(ZipMismatchMode||(ZipMismatchMode={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function assertNotComplex$1(re,ee){Array.isArray(re)||(re=[re]),re.forEach(ne=>{ne!=null&&assert$2(ne.dtype!=="complex64",()=>`${ee} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const whereImpl$1=whereImpl$2;class MathBackendCPU extends KernelBackend{constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new DataStorage(this,engine())}write(ee,ne,ie){this.firstUse&&(this.firstUse=!1,env().get("IS_NODE")&&warn$1(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));const oe={};return this.data.set(oe,{values:ee,dtype:ie,refCount:1}),oe}makeTensorInfo(ee,ne,ie){let oe;if(ne==="string"&&ie!=null&&ie.length>0&&isString$2(ie[0])){const ae=ie.map(ce=>encodeString(ce));oe=this.write(ae,ee,ne)}else oe=this.write(ie,ee,ne);return{dataId:oe,shape:ee,dtype:ne}}incRef(ee){const ne=this.data.get(ee);ne.refCount++}decRef(ee){if(this.data.has(ee)){const ne=this.data.get(ee);ne.refCount--}}move(ee,ne,ie,oe){this.data.set(ee,{values:ne,dtype:oe,refCount:1})}numDataIds(){return this.data.numDataIds()}async read(ee){return this.readSync(ee)}readSync(ee){const{dtype:ne,complexTensorInfos:ie}=this.data.get(ee);if(ne==="complex64"){const oe=this.readSync(ie.real.dataId),ae=this.readSync(ie.imag.dataId);return mergeRealAndImagArrays(oe,ae)}return this.data.get(ee).values}bufferSync(ee){const ne=this.readSync(ee.dataId);let ie=ne;if(ee.dtype==="string")try{ie=ne.map(oe=>decodeString(oe))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return buffer$1(ee.shape,ee.dtype,ie)}makeOutput(ee,ne,ie){const oe=this.write(ee,ne,ie);return engine().makeTensorFromDataId(oe,ne,ie,this)}disposeData(ee){if(this.data.has(ee)){const{complexTensorInfos:ne}=this.data.get(ee);ne!=null&&(this.disposeData(ne.real.dataId),this.disposeData(ne.imag.dataId)),this.data.delete(ee)}}disposeIntermediateTensorInfo(ee){const ne=ee.dataId;if(this.data.has(ne)){const ie=this.data.get(ne);ie.refCount--,ie.refCount<1&&this.disposeData(ne)}}async time(ee){const ne=now$1();return ee(),{kernelMs:now$1()-ne}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(ee){assertNotComplex$1([ee],"where");const ne=this.readSync(ee.dataId);return whereImpl$1(ee.shape,ne)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function simpleAbsImpl(re){const ee=new Float32Array(re.length);for(let ne=0;ne<re.length;++ne)ee[ne]=Math.abs(re[ne]);return ee}const abs$2=re=>{const{x:ee}=re.inputs,ne=re.backend;assertNotComplex$1(ee,"abs");let ie=new Float32Array(sizeFromShape(ee.shape));const oe=ne.data.get(ee.dataId).values;return ie=simpleAbsImpl(oe),ne.makeOutput(ie,ee.shape,"float32")},absConfig$1={kernelName:Abs$1,backendName:"cpu",kernelFunc:abs$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createSimpleBinaryKernelImpl(re){return(ee,ne,ie,oe,ae)=>{const ce=assertAndGetBroadcastShape(ee,ne),le=ce.length,ue=computeStrides(ce),he=sizeFromShape(ce),fe=getTypedArrayFromDType(ae,he),me=ee.length,ge=ne.length,ve=computeStrides(ee),ye=computeStrides(ne),be=getBroadcastDims$1(ee,ce),Ce=getBroadcastDims$1(ne,ce);if(be.length+Ce.length===0)for(let Se=0;Se<fe.length;++Se)fe[Se]=re(ie[Se%ie.length],oe[Se%oe.length]);else for(let Se=0;Se<fe.length;++Se){const $e=indexToLoc(Se,le,ue),Te=$e.slice(-me);be.forEach(De=>Te[De]=0);const Ne=locToIndex(Te,me,ve),Ie=$e.slice(-ge);Ce.forEach(De=>Ie[De]=0);const ke=locToIndex(Ie,ge,ye);fe[Se]=re(ie[Ne],oe[ke])}return[fe,ce]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function complex$1(re){const{inputs:ee,backend:ne}=re,{real:ie,imag:oe}=ee,ae=ne.data.get(ie.dataId).values,ce=ne.data.get(oe.dataId).values,le=ne.makeTensorInfo(ie.shape,"complex64"),ue=ne.data.get(le.dataId);return ue.complexTensorInfos={real:ne.makeTensorInfo(ie.shape,"float32",ae),imag:ne.makeTensorInfo(oe.shape,"float32",ce)},le}const complexConfig$1={kernelName:Complex,backendName:"cpu",kernelFunc:complex$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zeros(re,ee,ne="float32"){if(ne==="complex64"){const oe=zeros(re,ee,"float32"),ae=zeros(re,ee,"float32");return complex$1({inputs:{real:oe,imag:ae},backend:re})}const ie=makeZerosTypedArray(sizeFromShape(ee),ne);return re.makeTensorInfo(ee,ne,ie)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function identity$4(re){const{inputs:ee,backend:ne}=re,{x:ie}=ee;return ne.incRef(ie.dataId),{dataId:ie.dataId,shape:ie.shape,dtype:ie.dtype}}const identityConfig$1={kernelName:Identity$1,backendName:"cpu",kernelFunc:identity$4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function real$1(re){const{inputs:ee,backend:ne}=re,{input:ie}=ee,oe=ne.data.get(ie.dataId).complexTensorInfos.real,ae=ne.data.get(oe.dataId).values;return ne.makeTensorInfo(oe.shape,oe.dtype,ae)}const realConfig$1={kernelName:Real,backendName:"cpu",kernelFunc:real$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cast$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{dtype:ae}=ie;if(ae==="complex64"){if(oe.dtype==="complex64")return identity$4({inputs:{x:oe},backend:ne});const ce=zeros(ne,oe.shape,oe.dtype),le=cast$1({inputs:{x:oe},backend:ne,attrs:{dtype:"float32"}}),ue=complex$1({inputs:{real:le,imag:ce},backend:ne});return ne.disposeIntermediateTensorInfo(ce),ne.disposeIntermediateTensorInfo(le),ue}if(oe.dtype==="complex64"){const ce=real$1({inputs:{input:oe},backend:ne}),le=cast$1({inputs:{x:ce},backend:ne,attrs:{dtype:ae}});return ne.disposeIntermediateTensorInfo(ce),le}if(!hasEncodingLoss(oe.dtype,ae)){const ce=identity$4({inputs:{x:oe},backend:ne});return{dataId:ce.dataId,shape:ce.shape,dtype:ae}}if(ae==="int32"){const ce=ne.data.get(oe.dataId).values,le=Int32Array.from(ce);return ne.makeTensorInfo(oe.shape,"int32",le)}if(ae==="bool"){const ce=ne.data.get(oe.dataId).values,le=toTypedArray([0],oe.dtype),[ue,he]=createSimpleBinaryKernelImpl((fe,me)=>fe!==me?1:0)(oe.shape,[],ce,le,"bool");return ne.makeTensorInfo(he,"bool",ue)}throw new Error(`Error in Cast: failed to cast ${oe.dtype} to ${ae}`)}const castConfig$1={kernelName:Cast,backendName:"cpu",kernelFunc:cast$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function binaryKernelFunc$1(re,ee,ne,ie){return ne==null?({inputs:oe,backend:ae})=>{const{a:ce,b:le}=oe,ue=ae;assertNotComplex$1([ce,le],re);const he=ue.data.get(ce.dataId).values,fe=ue.data.get(le.dataId).values,me=ie||ce.dtype,[ge,ve]=ee(ce.shape,le.shape,he,fe,me);return ue.makeTensorInfo(ve,me,ge)}:({inputs:oe,backend:ae})=>{const{a:ce,b:le}=oe,ue=ae;if(ce.dtype==="complex64"||le.dtype==="complex64"){const he=cast$1({inputs:{x:ce},backend:ue,attrs:{dtype:"complex64"}}),fe=ue.data.get(he.dataId),me=fe.complexTensorInfos.real,ge=fe.complexTensorInfos.imag,ve=ue.data.get(me.dataId).values,ye=ue.data.get(ge.dataId).values,be=cast$1({inputs:{x:le},backend:ue,attrs:{dtype:"complex64"}}),Ce=ue.data.get(be.dataId),Se=Ce.complexTensorInfos.real,$e=Ce.complexTensorInfos.imag,Te=ue.data.get(Se.dataId).values,Ne=ue.data.get($e.dataId).values,[Ie,ke,De]=ne(ce.shape,le.shape,ve,ye,Te,Ne),Oe=ue.makeTensorInfo(De,"float32",Ie),Be=ue.makeTensorInfo(De,"float32",ke),Me=complex$1({inputs:{real:Oe,imag:Be},backend:ue});return ue.disposeIntermediateTensorInfo(he),ue.disposeIntermediateTensorInfo(be),ue.disposeIntermediateTensorInfo(Oe),ue.disposeIntermediateTensorInfo(Be),Me}else{const he=ue.data.get(ce.dataId).values,fe=ue.data.get(le.dataId).values,me=ie||ce.dtype,[ge,ve]=ee(ce.shape,le.shape,he,fe,me);return ue.makeTensorInfo(ve,me,ge)}}}function createComplexBinaryKernelImpl(re){return(ee,ne,ie,oe,ae,ce)=>{const le=assertAndGetBroadcastShape(ee,ne),ue=sizeFromShape(le),he=le.length,fe=computeStrides(le),me=getTypedArrayFromDType("float32",ue),ge=getTypedArrayFromDType("float32",ue),ve=getBroadcastDims$1(ee,le),ye=getBroadcastDims$1(ne,le),be=mergeRealAndImagArrays(ie,oe),Ce=mergeRealAndImagArrays(ae,ce),Se=ee.length,$e=computeStrides(ee),Te=ne.length,Ne=computeStrides(ne);if(ve.length+ye.length===0)for(let Ie=0;Ie<me.length;Ie++){const ke=Ie%be.length,De=Ie%Ce.length,Oe=re(be[ke*2],be[ke*2+1],Ce[De*2],Ce[De*2+1]);me[Ie]=Oe.real,ge[Ie]=Oe.imag}else for(let Ie=0;Ie<me.length;Ie++){const ke=indexToLoc(Ie,he,fe),De=ke.slice(-Se);ve.forEach(je=>De[je]=0);const Oe=locToIndex(De,Se,$e),Be=ke.slice(-Te);ye.forEach(je=>Be[je]=0);const Me=locToIndex(Be,Te,Ne),Le=re(be[Oe*2],be[Oe*2+1],Ce[Me*2],Ce[Me*2+1]);me[Ie]=Le.real,ge[Ie]=Le.imag}return[me,ge,le]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const addImpl=createSimpleBinaryKernelImpl((re,ee)=>re+ee),addComplexImpl=createComplexBinaryKernelImpl((re,ee,ne,ie)=>({real:re+ne,imag:ee+ie})),add=binaryKernelFunc$1(Add$2,addImpl,addComplexImpl),addConfig$1={kernelName:Add$2,backendName:"cpu",kernelFunc:add};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincountImpl(re,ee,ne,ie,oe){const ae=sizeFromShape(ie),ce=makeZerosTypedArray(oe,ne);for(let le=0;le<re.length;le++){const ue=re[le];if(ue<0)throw new Error("Input x must be non-negative!");ue>=oe||(ae>0?ce[ue]+=ee[le]:ce[ue]+=1)}return ce}function bincountReduceImpl(re,ee,ne,ie=!1){const oe=re.shape[0],ae=re.shape[1],ce=buffer$1([oe,ne],ee.dtype);for(let le=0;le<oe;le++)for(let ue=0;ue<ae;ue++){const he=re.get(le,ue);if(he<0)throw new Error("Input x must be non-negative!");he>=ne||(ie?ce.set(1,le,he):ee.size>0?ce.set(ce.get(le,he)+ee.get(le,ue),le,he):ce.set(ce.get(le,he)+1,le,he))}return ce}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createSimpleUnaryImpl(re){return(ee,ne,ie)=>{const oe=getTypedArrayFromDType(ne,ee.length);for(let ae=0;ae<ee.length;++ae)oe[ae]=re(ee[ae],ie);return oe}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unaryKernelFunc$1(re,ee,ne){return({inputs:ie,attrs:oe,backend:ae})=>{const{x:ce}=ie;if(assertNotComplex$1(ce,re),ce.dtype==="string"||ne==="string")throw new Error("unaryKernelFunc does not support string input/output");const le=ae,ue=le.data.get(ce.dataId).values,he=sizeFromShape(ce.shape),fe=ne||ce.dtype,me=getArrayFromDType(fe,he);for(let ge=0;ge<he;++ge)me[ge]=ee(ue[ge],oe);return le.makeTensorInfo(ce.shape,fe,me)}}function unaryKernelFuncFromImpl(re,ee,ne){return({inputs:ie,attrs:oe,backend:ae})=>{const{x:ce}=ie;if(assertNotComplex$1(ce,re),ce.dtype==="string"||ne==="string")throw new Error("unaryKernelFunc does not support string input/output");const le=ae,ue=le.data.get(ce.dataId).values,he=ne||ce.dtype,fe=ee(ue,he,oe);return le.makeTensorInfo(ce.shape,he,fe)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ceilImpl=createSimpleUnaryImpl(re=>Math.ceil(re)),ceil$1=unaryKernelFuncFromImpl(Ceil,ceilImpl),ceilConfig$1={kernelName:Ceil,backendName:"cpu",kernelFunc:ceil$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concatImpl$1(re,ee,ne,ie){const oe=getArrayFromDType(ne,sizeFromShape(ee));if(ie&&ne!=="string"){let ae=0;re.forEach(ce=>{const le=sizeFromShape(ce.shape);oe.set(ce.vals,ae),ae+=le})}else{let ae=0;re.forEach(ce=>{const le=ne==="string"?fromUint8ToStringArray(ce.vals):ce.vals;let ue=0;for(let he=0;he<ce.shape[0];++he){const fe=he*ee[1]+ae;for(let me=0;me<ce.shape[1];++me)oe[fe+me]=le[ue++]}ae+=ce.shape[1]})}return oe}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expImpl=createSimpleUnaryImpl(re=>Math.exp(re)),exp$1=unaryKernelFuncFromImpl(Exp,expImpl),expConfig$1={kernelName:Exp,backendName:"cpu",kernelFunc:exp$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const expm1Impl=createSimpleUnaryImpl(re=>Math.expm1(re)),expm1$1=unaryKernelFuncFromImpl(Expm1,expm1Impl),expm1Config$1={kernelName:Expm1,backendName:"cpu",kernelFunc:expm1$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorImpl=createSimpleUnaryImpl(re=>Math.floor(re)),floor$2=unaryKernelFuncFromImpl(Floor,floorImpl),floorConfig$1={kernelName:Floor,backendName:"cpu",kernelFunc:floor$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherV2Impl(re,ee,ne){const ie=buffer$1(ne,re.dtype);for(let oe=0;oe<ie.size;++oe){const ce=ie.indexToLoc(oe).slice(),le=ce[0],ue=ce[2],he=ee.locToIndex([le,ue]);ce[2]=ee.values[he];const fe=re.locToIndex(ce);ie.values[oe]=re.values[fe]}return ie}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const greaterImpl=createSimpleBinaryKernelImpl((re,ee)=>re>ee?1:0),greater$1=binaryKernelFunc$1(Greater,greaterImpl,null,"bool"),greaterConfig$1={kernelName:Greater,backendName:"cpu",kernelFunc:greater$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lessImpl=createSimpleBinaryKernelImpl((re,ee)=>re<ee?1:0),less$1=binaryKernelFunc$1(Less,lessImpl,null,"bool"),lessConfig$1={kernelName:Less,backendName:"cpu",kernelFunc:less$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linSpaceImpl(re,ee,ne){const ie=(ee-re)/(ne-1),oe=makeZerosTypedArray(ne,"float32");oe[0]=re;for(let ae=1;ae<oe.length;ae++)oe[ae]=oe[ae-1]+ie;return oe}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logImpl=createSimpleUnaryImpl(re=>Math.log(re)),log$3=unaryKernelFuncFromImpl(Log,logImpl),logConfig$1={kernelName:Log,backendName:"cpu",kernelFunc:log$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxImpl$1(re,ee,ne,ie){const oe=getTypedArrayFromDType(ie,sizeFromShape(ne));for(let ae=0;ae<oe.length;++ae){const ce=ae*ee;let le=re[ce];for(let ue=0;ue<ee;++ue){const he=re[ce+ue];he>le&&(le=he)}oe[ae]=le}return oe}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maximumImpl=createSimpleBinaryKernelImpl((re,ee)=>Math.max(re,ee)),maximum$1=binaryKernelFunc$1(Maximum$1,maximumImpl),maximumConfig$1={kernelName:Maximum$1,backendName:"cpu",kernelFunc:maximum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const minimumImpl=createSimpleBinaryKernelImpl((re,ee)=>Math.min(re,ee)),minimum$1=binaryKernelFunc$1(Minimum$1,minimumImpl),minimumConfig$1={kernelName:Minimum$1,backendName:"cpu",kernelFunc:minimum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const multiplyImpl=createSimpleBinaryKernelImpl((re,ee)=>re*ee),multiplyComplexImpl=createComplexBinaryKernelImpl((re,ee,ne,ie)=>({real:re*ne-ee*ie,imag:re*ie+ee*ne})),multiply$2=binaryKernelFunc$1(Multiply$2,multiplyImpl,multiplyComplexImpl),multiplyConfig$1={kernelName:Multiply$2,backendName:"cpu",kernelFunc:multiply$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function negImpl(re,ee,ne){const ie=createScalarValue(-1,ne);return multiplyImpl([],ee,ie,re,ne)}function neg$1(re){const{inputs:ee,backend:ne}=re,{x:ie}=ee;assertNotComplex$1(ie,"neg");const oe=ne.data.get(ie.dataId).values,[ae,ce]=negImpl(oe,ie.shape,ie.dtype);return ne.makeTensorInfo(ce,ie.dtype,ae)}const negConfig$1={kernelName:Neg,backendName:"cpu",kernelFunc:neg$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const notEqualImpl=createSimpleBinaryKernelImpl((re,ee)=>re!==ee?1:0),notEqual$1=binaryKernelFunc$1(NotEqual,notEqualImpl,null,"bool"),notEqualConfig$1={kernelName:NotEqual,backendName:"cpu",kernelFunc:notEqual$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transposeImpl$1(re,ee,ne,ie,oe){const ae=ee.length,ce=sizeFromShape(ee),le=computeStrides(ee),ue=computeStrides(oe),he=getTypedArrayFromDType(ne,sizeFromShape(oe));for(let fe=0;fe<ce;++fe){const me=indexToLoc(fe,ae,le),ge=new Array(me.length);for(let ye=0;ye<ge.length;ye++)ge[ye]=me[ie[ye]];const ve=locToIndex(ge,ae,ue);he[ve]=re[fe]}return he}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transpose$1(re){const{inputs:ee,attrs:ne,backend:ie}=re,{x:oe}=ee,{perm:ae}=ne;assertNotComplex$1(oe,"transpose");const ce=oe.shape.length,le=new Array(ce);for(let me=0;me<le.length;me++)le[me]=oe.shape[ae[me]];const ue=ie.data.get(oe.dataId).values,he=transposeImpl$1(ue,oe.shape,oe.dtype,ae,le);return{dataId:ie.write(he,le,oe.dtype),shape:le,dtype:oe.dtype}}const transposeConfig$1={kernelName:Transpose,backendName:"cpu",kernelFunc:transpose$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prodImpl(re,ee,ne,ie){const[oe,ae]=computeOutAndReduceShapes(re,ie),ce=upcastType(ee,"int32"),le=makeZerosTypedArray(sizeFromShape(oe),ce),ue=sizeFromShape(ae);for(let he=0;he<le.length;++he){const fe=he*ue;let me=1;for(let ge=0;ge<ue;++ge)me*=ne[fe+ge];le[he]=me}return{outVals:le,outShape:oe,outDtype:ce}}function prod$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,keepDims:ce}=ie;assertNotComplex$1(oe,"prod");const le=oe.shape.length,ue=parseAxisParam(ae,oe.shape),he=getAxesPermutation(ue,le);let fe=ue,me=oe;const ge=[];he!=null&&(me=transpose$1({inputs:{x:oe},backend:ne,attrs:{perm:he}}),ge.push(me),fe=getInnerMostAxes(fe.length,le));const ve=ne.data.get(me.dataId).values,{outVals:ye,outShape:be,outDtype:Ce}=prodImpl(me.shape,me.dtype,ve,fe);let Se=be;return ce&&(Se=expandShapeToKeepDim(be,ue)),ge.forEach($e=>ne.disposeIntermediateTensorInfo($e)),ne.makeTensorInfo(Se,Ce,ye)}const prodConfig$1={kernelName:Prod,backendName:"cpu",kernelFunc:prod$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rangeImpl(re,ee,ne,ie){const oe=re===ee,ae=re<ee&&ne<0,ce=ee<re&&ne>1;if(oe||ae||ce)return makeZerosTypedArray(0,ie);const le=Math.abs(Math.ceil((ee-re)/ne)),ue=makeZerosTypedArray(le,ie);ee<re&&ne===1&&(ne=-1),ue[0]=re;for(let he=1;he<ue.length;he++)ue[he]=ue[he-1]+ne;return ue}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rsqrtImpl=createSimpleUnaryImpl(re=>1/Math.sqrt(re)),rsqrt$1=unaryKernelFuncFromImpl(Rsqrt,rsqrtImpl),rsqrtConfig$1={kernelName:Rsqrt,backendName:"cpu",kernelFunc:rsqrt$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sliceImpl(re,ee,ne,ie,oe){const ae=isSliceContinous(ie,ee,ne),ce=sizeFromShape(ne),le=computeStrides(ie);if(ae){const me=computeFlatOffset(ee,le);return oe==="string"?re.slice(me,me+ce):re.subarray(me,me+ce)}const ue=oe==="string"?fromUint8ToStringArray(re):re,he=buffer$1(ie,oe,ue),fe=buffer$1(ne,oe);for(let me=0;me<fe.size;++me){const ge=fe.indexToLoc(me),ve=ge.map((ye,be)=>ye+ee[be]);fe.set(he.get(...ve),...ge)}return oe==="string"?fromStringArrayToUint8(fe.values):fe.values}function slice$3(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{begin:ae,size:ce}=ie;assertNotComplex$1(oe,"slice");const[le,ue]=parseSliceParams(oe,ae,ce);assertParamsValid(oe,le,ue);const he=ne.data.get(oe.dataId).values,fe=sliceImpl(he,le,ue,oe.shape,oe.dtype);return ne.makeTensorInfo(ue,oe.dtype,fe)}const sliceConfig$1={kernelName:Slice,backendName:"cpu",kernelFunc:slice$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squaredDifferenceImpl=createSimpleBinaryKernelImpl((re,ee)=>{const ne=re-ee;return ne*ne}),squaredDifference$1=binaryKernelFunc$1(SquaredDifference,squaredDifferenceImpl),squaredDifferenceConfig$1={kernelName:SquaredDifference,backendName:"cpu",kernelFunc:squaredDifference$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSliceImpl(re,ee,ne,ie){const oe=buffer$1(re,ee.dtype);for(let ae=0;ae<oe.size;ae++){const ce=oe.indexToLoc(ae),le=new Array(ce.length);for(let ue=0;ue<le.length;ue++)le[ue]=ce[ue]*ne[ue]+ie[ue];oe.set(ee.get(...le),...ce)}return oe}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const subImpl=createSimpleBinaryKernelImpl((re,ee)=>re-ee),subComplexImpl=createComplexBinaryKernelImpl((re,ee,ne,ie)=>({real:re-ne,imag:ee-ie})),sub$1=binaryKernelFunc$1(Sub,subImpl,subComplexImpl),subConfig$1={kernelName:Sub,backendName:"cpu",kernelFunc:sub$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tileImpl(re,ee){const ne=new Array(re.rank);for(let oe=0;oe<ne.length;oe++)ne[oe]=re.shape[oe]*ee[oe];const ie=buffer$1(ne,re.dtype);for(let oe=0;oe<ie.values.length;++oe){const ae=ie.indexToLoc(oe),ce=new Array(re.rank);for(let ue=0;ue<ce.length;ue++)ce[ue]=ae[ue]%re.shape[ue];const le=re.locToIndex(ce);ie.values[oe]=re.values[le]}return ie}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topKImpl(re,ee,ne,ie,oe){const ae=ee[ee.length-1],[ce,le]=[re.length/ae,ae],ue=getTypedArrayFromDType(ne,ce*ie),he=getTypedArrayFromDType("int32",ce*ie);for(let me=0;me<ce;me++){const ge=me*le,ve=re.subarray(ge,ge+le),ye=[];for(let $e=0;$e<ve.length;$e++)ye.push({value:ve[$e],index:$e});ye.sort(($e,Te)=>Te.value-$e.value);const be=me*ie,Ce=ue.subarray(be,be+ie),Se=he.subarray(be,be+ie);for(let $e=0;$e<ie;$e++)Ce[$e]=ye[$e].value,Se[$e]=ye[$e].index}const fe=ee.slice();return fe[fe.length-1]=ie,[buffer$1(fe,ne,ue),buffer$1(fe,"int32",he)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uniqueImpl(re,ee,ne,ie){const oe=parseAxisParam(ee,ne)[0],ae=[1,ne[0],1];for(let ye=0;ye<oe;ye++)ae[0]*=ne[ye];ae[1]=ne[oe];for(let ye=oe+1;ye<ne.length;ye++)ae[2]*=ne[ye];const ce={},le=new Int32Array(ne[oe]),ue=new TensorBuffer(ae,ie,re),he=[],fe=ae[0]===1&&ae[2]===1;for(let ye=0;ye<ne[oe];ye++){let be;if(fe)be=re[ye].toString();else{const Ce=[];for(let Se=0;Se<ae[0];Se++)for(let $e=0;$e<ae[2];$e++)Ce.push(ue.get(Se,ye,$e));be=Ce.join(",")}if(ce[be]!==void 0)le[ye]=ce[be];else{const Ce=Object.keys(ce).length;ce[be]=Ce,le[ye]=Ce,he.push(ye)}}const me=ae.slice();me[1]=Object.keys(ce).length;const ge=new TensorBuffer(me,ie);he.forEach((ye,be)=>{for(let Ce=0;Ce<ae[0];Ce++)for(let Se=0;Se<ae[2];Se++)ge.set(ue.get(Ce,ye,Se),Ce,be,Se)});const ve=ne.slice();return ve[oe]=me[1],{outputValues:ge.values,outputShape:ve,indices:le}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const shared=Object.freeze(Object.defineProperty({__proto__:null,addImpl,bincountImpl,bincountReduceImpl,ceilImpl,concatImpl:concatImpl$1,expImpl,expm1Impl,floorImpl,gatherV2Impl,greaterImpl,lessImpl,linSpaceImpl,logImpl,maxImpl:maxImpl$1,maximumImpl,minimumImpl,multiplyImpl,negImpl,notEqualImpl,prodImpl,rangeImpl,rsqrtImpl,simpleAbsImpl,sliceImpl,squaredDifferenceImpl,stridedSliceImpl,subImpl,tileImpl,topKImpl,transposeImpl:transposeImpl$1,uniqueImpl},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */registerBackend("cpu",()=>new MathBackendCPU,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const elu$1=unaryKernelFunc$1(Elu$1,re=>re>=0?re:Math.exp(re)-1),eluConfig$1={kernelName:Elu$1,backendName:"cpu",kernelFunc:elu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function leakyRelu$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{alpha:ae}=ie;assertNotComplex$1([oe],"leakyRelu");const ce=sizeFromShape(oe.shape),le=ne.data.get(oe.dataId).values,ue=getTypedArrayFromDType("float32",ce);for(let he=0;he<le.length;he++)ue[he]=le[he]<0?ae*le[he]:le[he];return ne.makeTensorInfo(oe.shape,"float32",ue)}const leakyReluConfig$1={kernelName:LeakyRelu,backendName:"cpu",kernelFunc:leakyRelu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const preluImpl=createSimpleBinaryKernelImpl((re,ee)=>re<0?ee*re:re);function prelu$1(re){const{inputs:ee,backend:ne}=re,{x:ie,alpha:oe}=ee;assertNotComplex$1([ie,oe],"prelu");const ae=ne.data.get(ie.dataId).values,ce=ne.data.get(oe.dataId).values,[le,ue]=preluImpl(ie.shape,oe.shape,ae,ce,ie.dtype);return ne.makeTensorInfo(ue,ie.dtype,le)}const preluConfig$1={kernelName:Prelu,backendName:"cpu",kernelFunc:prelu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const relu$1=unaryKernelFunc$1(Relu$1,re=>Math.max(0,re)),reluConfig$1={kernelName:Relu$1,backendName:"cpu",kernelFunc:relu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const relu6$1=unaryKernelFunc$1(Relu6$1,re=>Math.min(Math.max(0,re),6)),relu6Config$1={kernelName:Relu6$1,backendName:"cpu",kernelFunc:relu6$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function applyActivation(re,ee,ne,ie,oe){if(ne==="linear")return identity$4({inputs:{x:ee},backend:re});if(ne==="relu")return relu$1({inputs:{x:ee},backend:re});if(ne==="elu")return elu$1({inputs:{x:ee},backend:re});if(ne==="relu6")return relu6$1({inputs:{x:ee},backend:re});if(ne==="prelu")return prelu$1({inputs:{x:ee,alpha:ie},backend:re});if(ne==="leakyrelu")return leakyRelu$1({inputs:{x:ee},backend:re,attrs:{alpha:oe}});throw new Error(`Activation ${ne} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reshape$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{shape:ae}=ie,ce=sizeFromShape(oe.shape),le=inferFromImplicitShape(ae,ce),ue=sizeFromShape(le);assert$2(ce===ue,()=>`The new shape (${le}) has ${ue} elements and the old shape (${oe.shape}) has ${ce} elements. The new shape and old shape must have the same number of elements.`),ne.incRef(oe.dataId);const he=ne.data.get(oe.dataId);if(he.complexTensorInfos!=null){const fe=he.complexTensorInfos.real,me=he.complexTensorInfos.imag;fe.shape=le,me.shape=le}return{dataId:oe.dataId,shape:le,dtype:oe.dtype}}const reshapeConfig$1={kernelName:Reshape$1,backendName:"cpu",kernelFunc:reshape$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchMatMul$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{a:oe,b:ae}=ee,{transposeA:ce,transposeB:le}=ie;assertNotComplex$1([oe,ae],"matMul");const ue=oe.shape.length,he=ae.shape.length,fe=ce?oe.shape[ue-2]:oe.shape[ue-1],me=le?ae.shape[he-1]:ae.shape[he-2],ge=ce?oe.shape[ue-1]:oe.shape[ue-2],ve=le?ae.shape[he-2]:ae.shape[he-1],ye=oe.shape.slice(0,-2),be=ae.shape.slice(0,-2),Ce=sizeFromShape(ye),Se=sizeFromShape(be),$e=Ce===Se||Ce===1||Se===1;assert$2(ue>=2&&he>=2&&$e,()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${ye}) and (${be}).`);const Ne=(Ce>Se?oe.shape.slice(0,-2):ae.shape.slice(0,-2)).concat([ge,ve]);assert$2(fe===me,()=>`Error in matMul: inner shapes (${fe}) and (${me}) of Tensors with shapes ${oe.shape} and ${ae.shape} and transposeA=${ce} and transposeB=${le} must match.`);const Ie=ce?[Ce,fe,ge]:[Ce,ge,fe],ke=le?[Se,ve,me]:[Se,me,ve],De=reshape$1({inputs:{x:oe},backend:ne,attrs:{shape:Ie}}),Oe=reshape$1({inputs:{x:ae},backend:ne,attrs:{shape:ke}}),Be=ce?De.shape[1]:De.shape[2],Me=ce?De.shape[2]:De.shape[1],Le=le?Oe.shape[1]:Oe.shape[2],je=Math.max(Ce,Se),ze=ne.data.get(De.dataId).values,Ve=ne.data.get(Oe.dataId).values,He=computeStrides(De.shape),We=computeStrides(Oe.shape),[Ye,Ue,Ke]=ce?[He[0],1,He[1]]:[He[0],He[1],1],[Xe,Vt,Wt]=le?[1,We[1],We[0]]:[We[1],1,We[0]],Kt=Me*Le,tn=buffer$1([je,Me,Le],De.dtype),Xt=tn.values,dn=ne.blockSize;for(let nn=0;nn<je;nn++)for(let rn=0;rn<Me;rn+=dn)for(let vn=0;vn<Le;vn+=dn)for(let yn=0;yn<Be;yn+=dn){const Sn=Math.min(rn+dn,Me),kn=Math.min(vn+dn,Le),Bn=Math.min(yn+dn,Be);for(let Dn=rn;Dn<Sn;Dn++)for(let Je=vn;Je<kn;Je++){let Yt=0;for(let an=yn;an<Bn;an++){const An=Math.min(nn,Ce-1)*Ye,fn=Math.min(nn,Se-1)*Wt,mn=ze[An+Dn*Ue+an*Ke],Tn=Ve[an*Xe+Je*Vt+fn];Yt+=mn*Tn}Xt[nn*Kt+(Dn*Le+Je)]+=Yt}}return ne.disposeIntermediateTensorInfo(De),ne.disposeIntermediateTensorInfo(Oe),ne.makeTensorInfo(Ne,tn.dtype,tn.values)}const batchMatMulConfig$1={kernelName:BatchMatMul,backendName:"cpu",kernelFunc:batchMatMul$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fusedMatMul$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{a:oe,b:ae,bias:ce,preluActivationWeights:le}=ee,{transposeA:ue,transposeB:he,activation:fe,leakyreluAlpha:me}=ie;let ge,ve,ye;const be=[];ge=batchMatMul$1({inputs:{a:oe,b:ae},attrs:{transposeA:ue,transposeB:he},backend:ne}),ce&&(ve=add({inputs:{a:ge,b:ce},backend:ne}),be.push(ge),ge=ve),fe&&(ye=applyActivation(ne,ge,fe,le,me),be.push(ge),ge=ye);for(const Se of be)ne.disposeIntermediateTensorInfo(Se);return ge}const _fusedMatMulConfig$1={kernelName:_FusedMatMul,backendName:"cpu",kernelFunc:_fusedMatMul$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acos$1=unaryKernelFunc$1(Acos,re=>Math.acos(re)),acosConfig$1={kernelName:Acos,backendName:"cpu",kernelFunc:acos$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const acosh$1=unaryKernelFunc$1(Acosh,re=>Math.acosh(re)),acoshConfig$1={kernelName:Acosh,backendName:"cpu",kernelFunc:acosh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function addN$1(re){const{inputs:ee,backend:ne}=re,ie=ee;assertNotComplex$1(ee,"addN");const oe=ie.map(le=>ne.data.get(le.dataId).values),ae=buffer$1(ie[0].shape,ie[0].dtype),ce=ae.values;for(let le=0;le<ie.length;le++){const ue=oe[le];for(let he=0;he<ce.length;he++)ce[he]+=ue[he]}return ne.makeTensorInfo(ae.shape,ae.dtype,ae.values)}const addNConfig$1={kernelName:AddN,backendName:"cpu",kernelFunc:addN$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function all$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,keepDims:ce}=ie;assertNotComplex$1(oe,"all");const le=parseAxisParam(ae,oe.shape);let ue=le;const he=getAxesPermutation(ue,oe.shape.length);let fe=oe;he!=null&&(fe=transpose$1({inputs:{x:oe},backend:ne,attrs:{perm:he}}),ue=getInnerMostAxes(ue.length,oe.shape.length)),assertAxesAreInnerMostDims("all",ue,fe.shape.length);const[me,ge]=computeOutAndReduceShapes(fe.shape,ue),ve=sizeFromShape(ge),ye=makeZerosTypedArray(sizeFromShape(me),fe.dtype),be=ne.data.get(fe.dataId).values;for(let Se=0;Se<ye.length;++Se){const $e=Se*ve;let Te=be[$e];for(let Ne=0;Ne<ve;++Ne){const Ie=be[$e+Ne];Te=Te&&Ie}ye[Se]=Te}he!=null&&ne.disposeIntermediateTensorInfo(fe);const Ce=ne.makeTensorInfo(me,fe.dtype,ye);if(ce){const Se=expandShapeToKeepDim(me,le),$e=reshape$1({inputs:{x:Ce},backend:ne,attrs:{shape:Se}});return ne.disposeIntermediateTensorInfo(Ce),$e}return Ce}const allConfig$1={kernelName:All,backendName:"cpu",kernelFunc:all$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function any$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,keepDims:ce}=ie;assertNotComplex$1(oe,"any");const le=parseAxisParam(ae,oe.shape);let ue=le;const he=getAxesPermutation(ue,oe.shape.length);let fe=oe;he!=null&&(fe=transpose$1({inputs:{x:oe},backend:ne,attrs:{perm:he}}),ue=getInnerMostAxes(ue.length,oe.shape.length)),assertAxesAreInnerMostDims("any",ue,fe.shape.length);const[me,ge]=computeOutAndReduceShapes(fe.shape,ue),ve=sizeFromShape(ge),ye=makeZerosTypedArray(sizeFromShape(me),fe.dtype),be=ne.data.get(fe.dataId).values;for(let Se=0;Se<ye.length;++Se){const $e=Se*ve;let Te=be[$e];for(let Ne=0;Ne<ve;++Ne){const Ie=be[$e+Ne];Te=Te||Ie}ye[Se]=Te}he!=null&&ne.disposeIntermediateTensorInfo(fe);const Ce=ne.makeTensorInfo(me,fe.dtype,ye);if(ce){const Se=expandShapeToKeepDim(me,le),$e=reshape$1({inputs:{x:Ce},backend:ne,attrs:{shape:Se}});return ne.disposeIntermediateTensorInfo(Ce),$e}return Ce}const anyConfig$1={kernelName:Any,backendName:"cpu",kernelFunc:any$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMax$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae}=ie;assertNotComplex$1(oe,"argMax");let ce=parseAxisParam(ae,oe.shape);const le=getAxesPermutation(ce,oe.shape.length);let ue=oe;const he=[];le!=null&&(ue=transpose$1({inputs:{x:oe},backend:ne,attrs:{perm:le}}),he.push(ue),ce=getInnerMostAxes(ce.length,ue.shape.length)),ce=[ce[0]],assertAxesAreInnerMostDims("argMax",ce,ue.shape.length);const[fe,me]=computeOutAndReduceShapes(ue.shape,ce),ge=sizeFromShape(fe),ve=makeZerosTypedArray(ge,"int32"),ye=sizeFromShape(me),be=ne.data.get(ue.dataId).values;for(let Ce=0;Ce<ve.length;++Ce){const Se=Ce*ye;let $e=be[Se],Te=0;for(let Ne=0;Ne<ye;++Ne){const Ie=be[Se+Ne];Ie>$e&&($e=Ie,Te=Ne)}ve[Ce]=Te}return he.forEach(Ce=>ne.disposeIntermediateTensorInfo(Ce)),ne.makeTensorInfo(fe,"int32",ve)}const argMaxConfig$1={kernelName:ArgMax,backendName:"cpu",kernelFunc:argMax$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMin$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae}=ie;assertNotComplex$1(oe,"argMin");let ce=parseAxisParam(ae,oe.shape);const le=getAxesPermutation(ce,oe.shape.length);let ue=oe;const he=[];le!=null&&(ue=transpose$1({inputs:{x:oe},backend:ne,attrs:{perm:le}}),he.push(ue),ce=getInnerMostAxes(ce.length,ue.shape.length)),ce=[ce[0]],assertAxesAreInnerMostDims("argMin",ce,ue.shape.length);const[fe,me]=computeOutAndReduceShapes(ue.shape,ce),ge=sizeFromShape(fe),ve=makeZerosTypedArray(ge,"int32"),ye=sizeFromShape(me),be=ne.data.get(ue.dataId).values;for(let Ce=0;Ce<ve.length;++Ce){const Se=Ce*ye;let $e=be[Se],Te=0;for(let Ne=0;Ne<ye;++Ne){const Ie=be[Se+Ne];Ie<$e&&($e=Ie,Te=Ne)}ve[Ce]=Te}return he.forEach(Ce=>ne.disposeIntermediateTensorInfo(Ce)),ne.makeTensorInfo(fe,"int32",ve)}const argMinConfig$1={kernelName:ArgMin,backendName:"cpu",kernelFunc:argMin$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asin$1=unaryKernelFunc$1(Asin,re=>Math.asin(re)),asinConfig$1={kernelName:Asin,backendName:"cpu",kernelFunc:asin$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const asinh$1=unaryKernelFunc$1(Asinh,re=>Math.asinh(re)),asinhConfig$1={kernelName:Asinh,backendName:"cpu",kernelFunc:asinh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atan$1=unaryKernelFunc$1(Atan,re=>Math.atan(re)),atanConfig$1={kernelName:Atan,backendName:"cpu",kernelFunc:atan$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atan2Impl=createSimpleBinaryKernelImpl((re,ee)=>Math.atan2(re,ee)),atan2$1=binaryKernelFunc$1(Atan2,atan2Impl),atan2Config$1={kernelName:Atan2,backendName:"cpu",kernelFunc:atan2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const atanh$1=unaryKernelFunc$1(Atanh,re=>Math.atanh(re)),atanhConfig$1={kernelName:Atanh,backendName:"cpu",kernelFunc:atanh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pool$1(re,ee,ne,ie,oe,ae){const ce=oe.strideHeight,le=oe.strideWidth,ue=oe.dilationHeight,he=oe.dilationWidth,fe=oe.effectiveFilterHeight,me=oe.effectiveFilterWidth,ge=oe.padInfo.top,ve=oe.padInfo.left,ye=ae==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,be=buffer$1(oe.outShape,ne),Ce=be.values,Se=oe.outShape[1]*oe.outShape[2]*oe.outShape[3],$e=oe.outShape[2]*oe.outShape[3],Te=oe.outShape[3];for(let Ne=0;Ne<oe.batchSize;++Ne){const Ie=Ne*Se,ke=Ne*ie[0];for(let De=0;De<oe.inChannels;++De)for(let Oe=0;Oe<oe.outHeight;++Oe){const Be=Oe*ce-ge,Me=Math.max(0,Be),Le=Math.min(oe.inHeight,fe+Be),je=Ie+Oe*$e;for(let ze=0;ze<oe.outWidth;++ze){const Ve=ze*le-ve,He=Math.max(0,Ve),We=Math.min(oe.inWidth,me+Ve);let Ye=ye,Ue=0,Ke=0;for(let Vt=Me;Vt<Le;Vt+=ue){const Wt=ke+Vt*ie[1];for(let Kt=He;Kt<We;Kt+=he){const tn=Wt+Kt*ie[2],Xt=re[tn+De];ae==="max"&&Xt>Ye?Ye=Xt:ae==="avg"&&(Ue+=Xt,Ke++)}if(isNaN(Ye))break}const Xe=je+ze*Te+De;Ce[Xe]=ae==="avg"?Ue/Ke:Ye}}}return be}function maxPoolPositions(re,ee,ne,ie,oe=!1,ae=!1){const ce=buffer$1(ie.outShape,"int32"),le=ie.strideHeight,ue=ie.strideWidth,he=ie.dilationHeight,fe=ie.dilationWidth,me=ie.effectiveFilterHeight,ge=ie.effectiveFilterWidth,ve=ie.padInfo.top,ye=ie.padInfo.left,be=buffer$1(ee,ne,re);for(let Ce=0;Ce<ie.batchSize;++Ce)for(let Se=0;Se<ie.inChannels;++Se)for(let $e=0;$e<ie.outHeight;++$e){const Te=$e*le-ve;let Ne=Te;for(;Ne<0;)Ne+=he;const Ie=Math.min(ie.inHeight,me+Te);for(let ke=0;ke<ie.outWidth;++ke){const De=ke*ue-ye;let Oe=De;for(;Oe<0;)Oe+=fe;const Be=Math.min(ie.inWidth,ge+De);let Me=Number.NEGATIVE_INFINITY,Le=-1;for(let je=Ne;je<Ie;je+=he){const ze=je-Te;for(let Ve=Oe;Ve<Be;Ve+=fe){const He=Ve-De,We=be.get(Ce,je,Ve,Se);We>Me&&(Me=We,oe?Le=ae?((Ce*ie.inHeight+je)*ie.inWidth+Ve)*ie.inChannels+Se:(je*ie.inWidth+Ve)*ie.inChannels+Se:Le=ze*ge+He)}}ce.set(Le,Ce,$e,ke,Se)}}return ce}function pool3d(re,ee,ne,ie,oe,ae){const ce=oe.strideDepth,le=oe.strideHeight,ue=oe.strideWidth,he=oe.dilationDepth,fe=oe.dilationHeight,me=oe.dilationWidth,ge=oe.effectiveFilterDepth,ve=oe.effectiveFilterHeight,ye=oe.effectiveFilterWidth,be=oe.padInfo.front,Ce=oe.padInfo.top,Se=oe.padInfo.left,$e=ae==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,Te=buffer$1(oe.outShape,ne),Ne=Te.values,Ie=oe.outShape[1]*oe.outShape[2]*oe.outShape[3]*oe.outShape[4],ke=oe.outShape[2]*oe.outShape[3]*oe.outShape[4],De=oe.outShape[3]*oe.outShape[4],Oe=oe.outShape[4];for(let Be=0;Be<oe.batchSize;++Be){const Me=Be*Ie,Le=Be*ie[0];for(let je=0;je<oe.inChannels;++je)for(let ze=0;ze<oe.outDepth;++ze){const Ve=ze*ce-be;let He=Ve;for(;He<0;)He+=he;const We=Math.min(oe.inDepth,ge+Ve),Ye=Me+ze*ke;for(let Ue=0;Ue<oe.outHeight;++Ue){const Ke=Ue*le-Ce;let Xe=Ke;for(;Xe<0;)Xe+=fe;const Vt=Math.min(oe.inHeight,ve+Ke),Wt=Ye+Ue*De;for(let Kt=0;Kt<oe.outWidth;++Kt){const tn=Kt*ue-Se;let Xt=tn;for(;Xt<0;)Xt+=me;const dn=Math.min(oe.inWidth,ye+tn),nn=Wt+Kt*Oe;let rn=$e,vn=0,yn=0;for(let kn=He;kn<We;kn+=he){const Bn=Le+kn*ie[1];for(let Dn=Xe;Dn<Vt;Dn+=fe){const Je=Bn+Dn*ie[2];for(let Yt=Xt;Yt<dn;Yt+=me){const an=Je+Yt*ie[3],An=re[an+je];if(ae==="max"&&An>rn?rn=An:ae==="avg"&&(vn+=An,yn++),isNaN(rn))break}if(isNaN(rn))break}if(isNaN(rn))break}const Sn=nn+je;Ne[Sn]=ae==="avg"?vn/yn:rn}}}}return Te}function maxPool3dPositions(re,ee){const ne=buffer$1(ee.outShape,"int32"),ie=ee.strideDepth,oe=ee.strideHeight,ae=ee.strideWidth,ce=ee.dilationDepth,le=ee.dilationHeight,ue=ee.dilationWidth,he=ee.effectiveFilterDepth,fe=ee.effectiveFilterHeight,me=ee.effectiveFilterWidth,ge=ee.padInfo.front,ve=ee.padInfo.top,ye=ee.padInfo.left;for(let be=0;be<ee.batchSize;++be)for(let Ce=0;Ce<ee.inChannels;++Ce)for(let Se=0;Se<ee.outDepth;++Se){const $e=Se*ie-ge;let Te=$e;for(;Te<0;)Te+=ce;const Ne=Math.min(ee.inDepth,he+$e);for(let Ie=0;Ie<ee.outHeight;++Ie){const ke=Ie*oe-ve;let De=ke;for(;De<0;)De+=le;const Oe=Math.min(ee.inHeight,fe+ke);for(let Be=0;Be<ee.outWidth;++Be){const Me=Be*ae-ye;let Le=Me;for(;Le<0;)Le+=ue;const je=Math.min(ee.inWidth,me+Me);let ze=Number.NEGATIVE_INFINITY,Ve=-1;for(let He=Te;He<Ne;He+=ce){const We=He-$e;for(let Ye=De;Ye<Oe;Ye+=le){const Ue=Ye-ke;for(let Ke=Le;Ke<je;Ke+=ue){const Xe=Ke-Me,Vt=re.get(be,He,Ye,Ke,Ce);Vt>=ze&&(ze=Vt,Ve=We*fe*me+Ue*fe+Xe)}}}ne.set(Ve,be,Se,Ie,Be,Ce)}}}return ne}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee;assertNotComplex$1(oe,"avgPool");const{filterSize:ae,strides:ce,pad:le,dimRoundingMode:ue}=ie,he=1;assert$2(eitherStridesOrDilationsAreOne(ce,he),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${ce} and dilations '${he}'`);const fe=computePool2DInfo(oe.shape,ae,ce,he,le,ue);let me;if(fe.filterWidth===1&&fe.filterHeight===1&&arraysEqual(fe.inShape,fe.outShape))me=identity$4({inputs:{x:oe},backend:ne});else{const ge=ne.data.get(oe.dataId).values,ve=computeStrides(oe.shape),ye=pool$1(ge,oe.shape,oe.dtype,ve,fe,"avg");me=ne.makeTensorInfo(fe.outShape,oe.dtype,ye.values)}return me}const avgPoolConfig$1={kernelName:AvgPool,backendName:"cpu",kernelFunc:avgPool$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3D$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{filterSize:ae,strides:ce,pad:le,dimRoundingMode:ue,dataFormat:he,dilations:fe}=ie;assertNotComplex$1(oe,"avgPool3d");let me=fe;me==null&&(me=[1,1,1]);const ge=computePool3DInfo(oe.shape,ae,ce,me,le,ue,he),ve=ne.data.get(oe.dataId).values,ye=pool3d(ve,oe.shape,oe.dtype,computeStrides(oe.shape),ge,"avg");return ne.makeTensorInfo(ye.shape,"float32",ye.values)}const avgPool3DConfig$1={kernelName:AvgPool3D,backendName:"cpu",kernelFunc:avgPool3D$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3DGrad$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,input:ae}=ee,{filterSize:ce,strides:le,pad:ue,dilations:he,dimRoundingMode:fe}=ie;assertNotComplex$1([oe,ae],"avgPool3DGrad");const me=computePool3DInfo(ae.shape,ce,le,he,ue,fe),ge=me.strideDepth,ve=me.strideHeight,ye=me.strideWidth,be=me.filterDepth,Ce=me.filterHeight,Se=me.filterWidth,$e=me.dilationDepth,Te=me.dilationHeight,Ne=me.dilationWidth,Ie=me.effectiveFilterDepth,ke=me.effectiveFilterHeight,De=me.effectiveFilterWidth,Oe=Ie-1-me.padInfo.front,Be=De-1-me.padInfo.left,Me=ke-1-me.padInfo.top,Le=buffer$1(ae.shape,"float32"),je=1/(be*Ce*Se),ze=ne.bufferSync(oe);for(let Ve=0;Ve<me.batchSize;++Ve)for(let He=0;He<me.inChannels;++He)for(let We=0;We<me.inDepth;++We)for(let Ye=0;Ye<me.inHeight;++Ye)for(let Ue=0;Ue<me.inWidth;++Ue){const Ke=We-Oe,Xe=Ye-Me,Vt=Ue-Be;let Wt=0;for(let Kt=0;Kt<Ie;Kt+=$e){const tn=(Ke+Kt)/ge;if(!(tn<0||tn>=me.outDepth||Math.floor(tn)!==tn))for(let Xt=0;Xt<ke;Xt+=Te){const dn=(Xe+Xt)/ve;if(!(dn<0||dn>=me.outHeight||Math.floor(dn)!==dn))for(let nn=0;nn<De;nn+=Ne){const rn=(Vt+nn)/ye;if(rn<0||rn>=me.outWidth||Math.floor(rn)!==rn)continue;const vn=ze.get(Ve,tn,dn,rn,He);Wt+=vn}}}Le.set(Wt*je,Ve,We,Ye,Ue,He)}return ne.makeTensorInfo(Le.shape,Le.dtype,Le.values)}const avgPool3DGradConfig={kernelName:AvgPool3DGrad,backendName:"cpu",kernelFunc:avgPool3DGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPoolGrad$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,input:ae}=ee,ce=ae;assertNotComplex$1([oe,ae],"avgPoolGrad");const{filterSize:le,strides:ue,pad:he}=ie,fe=computePool2DInfo(ce.shape,le,ue,1,he),me=fe.strideHeight,ge=fe.strideWidth,ve=fe.filterHeight,ye=fe.filterWidth,be=fe.dilationHeight,Ce=fe.dilationWidth,Se=fe.effectiveFilterHeight,$e=fe.effectiveFilterWidth,Te=$e-1-fe.padInfo.left,Ne=Se-1-fe.padInfo.top,Ie=buffer$1(ce.shape,"float32"),ke=1/(ve*ye),De=ne.data.get(oe.dataId).values,Oe=buffer$1(oe.shape,"float32",De);for(let Be=0;Be<fe.batchSize;++Be)for(let Me=0;Me<fe.inChannels;++Me)for(let Le=0;Le<fe.inHeight;++Le)for(let je=0;je<fe.inWidth;++je){const ze=Le-Ne,Ve=je-Te;let He=0;for(let We=0;We<Se;We+=be){const Ye=(ze+We)/me;if(!(Ye<0||Ye>=fe.outHeight||Math.floor(Ye)!==Ye))for(let Ue=0;Ue<$e;Ue+=Ce){const Ke=(Ve+Ue)/ge;if(Ke<0||Ke>=fe.outWidth||Math.floor(Ke)!==Ke)continue;const Xe=Oe.get(Be,Ye,Ke,Me);He+=Xe}}Ie.set(He*ke,Be,Le,je,Me)}return ne.makeTensorInfo(Ie.shape,Ie.dtype,Ie.values)}const avgPoolGradConfig$1={kernelName:AvgPoolGrad,backendName:"cpu",kernelFunc:avgPoolGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchNorm$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,scale:ae,offset:ce,mean:le,variance:ue}=ee;assert$2(le.shape.length===ue.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),assert$2(ce==null||le.shape.length===ce.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),assert$2(ae==null||le.shape.length===ae.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),assertNotComplex$1([oe,le,ue,ae,ce],"batchNorm");let{varianceEpsilon:he}=ie;he==null&&(he=.001);const fe=ne.data.get(oe.dataId).values,me=ne.data.get(le.dataId).values,ge=ne.data.get(ue.dataId).values,ve=ae?ne.data.get(ae.dataId).values:new Float32Array([1]),ye=ce?ne.data.get(ce.dataId).values:new Float32Array([0]),be=new Float32Array(fe.length),Ce=ye.length,Se=ve.length,$e=ge.length,Te=me.length;let Ne=0,Ie=0,ke=0,De=0;for(let Oe=0;Oe<fe.length;++Oe)be[Oe]=ye[Ne++]+(fe[Oe]-me[Ie++])*ve[ke++]/Math.sqrt(ge[De++]+he),Ne>=Ce&&(Ne=0),Ie>=Te&&(Ie=0),ke>=Se&&(ke=0),De>=$e&&(De=0);return ne.makeTensorInfo(oe.shape,oe.dtype,be)}const batchNormConfig$1={kernelName:FusedBatchNorm,backendName:"cpu",kernelFunc:batchNorm$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchToSpaceND$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{blockShape:ae,crops:ce}=ie;assertNotComplex$1([oe],"batchToSpaceND");const le=ae.reduce((Se,$e)=>Se*$e),ue=getReshaped(oe.shape,ae,le),he=getPermuted(ue.length,ae.length),fe=getReshapedPermuted(oe.shape,ae,le),me=getSliceBeginCoords(ce,ae.length),ge=getSliceSize(fe,ce,ae.length),ve=reshape$1({inputs:{x:oe},backend:ne,attrs:{shape:ue}}),ye=transpose$1({inputs:{x:ve},backend:ne,attrs:{perm:he}}),be=reshape$1({inputs:{x:ye},backend:ne,attrs:{shape:fe}}),Ce=slice$3({inputs:{x:be},backend:ne,attrs:{begin:me,size:ge}});return ne.disposeIntermediateTensorInfo(ve),ne.disposeIntermediateTensorInfo(ye),ne.disposeIntermediateTensorInfo(be),Ce}const batchToSpaceNDConfig$1={kernelName:BatchToSpaceND,backendName:"cpu",kernelFunc:batchToSpaceND$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincount$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,weights:ae}=ee,{size:ce}=ie,le=ne.data.get(oe.dataId).values,ue=ne.data.get(ae.dataId).values,he=bincountImpl(le,ue,ae.dtype,ae.shape,ce);return ne.makeTensorInfo([ce],ae.dtype,he)}const bincountConfig$1={kernelName:Bincount,backendName:"cpu",kernelFunc:bincount$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const clip=unaryKernelFunc$1(ClipByValue,(re,ee)=>{const ne=ee;return re>ne.clipValueMax?ne.clipValueMax:re<ne.clipValueMin?ne.clipValueMin:re}),clipConfig={kernelName:ClipByValue,backendName:"cpu",kernelFunc:clip};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const complexAbs$1=re=>{const{x:ee}=re.inputs,ne=re.backend,ie=new Float32Array(sizeFromShape(ee.shape)),oe=ne.data.get(ee.dataId),ae=oe.complexTensorInfos.real,ce=oe.complexTensorInfos.imag,le=ne.data.get(ae.dataId).values,ue=ne.data.get(ce.dataId).values;for(let he=0;he<le.length;he++){const fe=le[he],me=ue[he];ie[he]=Math.hypot(fe,me)}return ne.makeOutput(ie,ee.shape,"float32")},complexAbsConfig$1={kernelName:ComplexAbs,backendName:"cpu",kernelFunc:complexAbs$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imag$1(re){const{inputs:ee,backend:ne}=re,{input:ie}=ee,oe=ne.data.get(ie.dataId).complexTensorInfos.imag,ae=ne.data.get(oe.dataId).values;return ne.makeTensorInfo(oe.shape,oe.dtype,ae)}const imagConfig$1={kernelName:Imag,backendName:"cpu",kernelFunc:imag$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concat$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{axis:oe}=ie,ae=parseAxisParam(oe,ee[0].shape)[0];let ce=computeOutShape$1(ee.map(be=>be.shape),ae);if(sizeFromShape(ce)===0)return ne.makeTensorInfo(ce,ee[0].dtype,[]);const le=ee.filter(be=>sizeFromShape(be.shape)>0);if(le.length===1)return identity$4({inputs:{x:le[0]},backend:ne});const ue=le.map(be=>be.shape);if(assertParamsConsistent(ue,ae),le[0].dtype==="complex64"){const be=le.map(Ne=>real$1({inputs:{input:Ne},backend:ne})),Ce=le.map(Ne=>imag$1({inputs:{input:Ne},backend:ne})),Se=concat$1({inputs:be,backend:ne,attrs:{axis:ae}}),$e=concat$1({inputs:Ce,backend:ne,attrs:{axis:ae}}),Te=complex$1({inputs:{real:Se,imag:$e},backend:ne});return be.forEach(Ne=>ne.disposeIntermediateTensorInfo(Ne)),Ce.forEach(Ne=>ne.disposeIntermediateTensorInfo(Ne)),ne.disposeIntermediateTensorInfo(Se),ne.disposeIntermediateTensorInfo($e),Te}const he=le.map(be=>{const Se=[-1,sizeFromShape(be.shape.slice(ae))];return reshape$1({inputs:{x:be},backend:ne,attrs:{shape:Se}})}),fe=he.map(be=>({vals:ne.data.get(be.dataId).values,shape:be.shape}));ce=computeOutShape$1(he.map(be=>be.shape),1);const me=he[0].shape[0]===1,ge=concatImpl$1(fe,ce,ee[0].dtype,me),ve=computeOutShape$1(le.map(be=>be.shape),ae),ye=ne.makeTensorInfo(ve,ee[0].dtype,ge);return he.forEach(be=>ne.disposeIntermediateTensorInfo(be)),ye}const concatConfig$1={kernelName:Concat,backendName:"cpu",kernelFunc:concat$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2D(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,filter:ae}=ee,{strides:ce,pad:le,dataFormat:ue,dilations:he,dimRoundingMode:fe}=ie;assertNotComplex$1([oe,ae],"conv2d");const me=convertConv2DDataFormat(ue),ge=computeConv2DInfo(oe.shape,ae.shape,ce,he,le,fe,!1,me),ve=ge.filterHeight,ye=ge.filterWidth,be=ge.dilationHeight,Ce=ge.dilationWidth,Se=ge.padInfo.left,$e=ge.padInfo.top,Te=ge.dataFormat==="channelsLast",Ne=new TensorBuffer(ge.outShape,oe.dtype),Ie=computeStrides(oe.shape),ke=computeStrides(ae.shape),De=Ie[0],Oe=Te?Ie[1]:Ie[2],Be=Te?Ie[2]:1,Me=Te?1:Ie[1],Le=Ne.strides[0],je=Te?Ne.strides[1]:Ne.strides[2],ze=Te?Ne.strides[2]:1,Ve=Te?1:Ne.strides[1],He=ne.data.get(oe.dataId).values,We=ne.data.get(ae.dataId).values,Ye=Ne.values;for(let Ue=0;Ue<ge.batchSize;++Ue){const Ke=Ue*De,Xe=Ue*Le;for(let Vt=0;Vt<ge.outHeight;++Vt){const Wt=Xe+Vt*je,Kt=Vt*ge.strideHeight-$e;for(let tn=0;tn<ve;++tn){const Xt=Kt+tn*be;if(Xt<0||Xt>=ge.inHeight)continue;const dn=tn*ke[0],nn=Ke+Xt*Oe;for(let rn=0;rn<ge.outWidth;++rn){const vn=Wt+rn*ze,yn=rn*ge.strideWidth-Se;for(let Sn=0;Sn<ye;++Sn){const kn=yn+Sn*Ce;if(kn<0||kn>=ge.inWidth)continue;const Bn=dn+Sn*ke[1],Dn=nn+kn*Be;let Je=Bn;for(let Yt=0;Yt<ge.inChannels;++Yt){const an=He[Dn+Yt*Me];for(let An=0;An<ge.outChannels;++An)Ye[vn+An*Ve]+=an*We[Je+An];Je+=ge.outChannels}}}}}}return ne.makeTensorInfo(Ne.shape,Ne.dtype,Ye)}const conv2DConfig$1={kernelName:Conv2D$1,backendName:"cpu",kernelFunc:conv2D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropFilter$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,dy:ae}=ee,{strides:ce,pad:le,dataFormat:ue,dimRoundingMode:he,filterShape:fe}=ie;assertNotComplex$1([oe,ae],"conv2dBackpropFilter");const me=convertConv2DDataFormat(ue),ge=computeConv2DInfo(oe.shape,fe,ce,1,le,he,!1,me),{strideHeight:ve,strideWidth:ye,filterHeight:be,filterWidth:Ce}=ge,Se=ge.dataFormat==="channelsLast",$e=new TensorBuffer(ge.filterShape,"float32"),Te=ge.padInfo.left,Ne=ge.padInfo.top,Ie=ne.data.get(oe.dataId).values,ke=ne.data.get(ae.dataId).values,De=new TensorBuffer(oe.shape,oe.dtype,Ie),Oe=new TensorBuffer(ae.shape,ae.dtype,ke);for(let Be=0;Be<be;++Be){const Me=Math.max(0,Math.ceil((Ne-Be)/ve)),Le=Math.min(ge.outHeight,(ge.inHeight+Ne-Be)/ve);for(let je=0;je<Ce;++je){const ze=Math.max(0,Math.ceil((Te-je)/ye)),Ve=Math.min(ge.outWidth,(ge.inWidth+Te-je)/ye);for(let He=0;He<ge.inChannels;++He)for(let We=0;We<ge.outChannels;++We){let Ye=0;for(let Ue=0;Ue<ge.batchSize;++Ue)for(let Ke=Me;Ke<Le;++Ke){const Xe=Be+Ke*ve-Ne;for(let Vt=ze;Vt<Ve;++Vt){const Wt=je+Vt*ye-Te;Se?Ye+=De.get(Ue,Xe,Wt,He)*Oe.get(Ue,Ke,Vt,We):Ye+=De.get(Ue,He,Xe,Wt)*Oe.get(Ue,We,Ke,Vt)}}$e.set(Ye,Be,je,He,We)}}}return ne.makeTensorInfo($e.shape,$e.dtype,$e.values)}const conv2DBackpropFilterConfig$1={kernelName:Conv2DBackpropFilter,backendName:"cpu",kernelFunc:conv2DBackpropFilter$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropInput$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,filter:ae}=ee,{inputShape:ce,strides:le,pad:ue,dataFormat:he,dimRoundingMode:fe}=ie;assertNotComplex$1([oe,ae],"conv2dBackpropInput");const me=computeStrides(ae.shape),ge=computeStrides(oe.shape);let ve=convertConv2DDataFormat(he);const ye=computeConv2DInfo(ce,ae.shape,le,1,ue,fe,!1,ve),be=new TensorBuffer(ye.inShape,"float32"),Ce=be.values,Se=ne.data.get(oe.dataId).values,$e=ne.data.get(ae.dataId).values,[Te,Ne,Ie]=me,{batchSize:ke,filterHeight:De,filterWidth:Oe,inChannels:Be,inHeight:Me,inWidth:Le,outChannels:je,outHeight:ze,outWidth:Ve,strideHeight:He,strideWidth:We}=ye;ve=ye.dataFormat;const Ye=De-1-ye.padInfo.top,Ue=Oe-1-ye.padInfo.left,Ke=ve==="channelsLast",Xe=be.strides[0],Vt=Ke?be.strides[1]:be.strides[2],Wt=Ke?be.strides[2]:1,Kt=Ke?1:be.strides[1],tn=ge[0],Xt=Ke?ge[1]:ge[2],dn=Ke?ge[2]:1,nn=Ke?1:ge[1];for(let rn=0;rn<ke;++rn)for(let vn=0;vn<Be;++vn)for(let yn=0;yn<Me;++yn){const Sn=yn-Ye,kn=Math.max(0,Math.ceil(Sn/He)),Bn=Math.min(ze,(De+Sn)/He);for(let Dn=0;Dn<Le;++Dn){const Je=Dn-Ue,Yt=Math.max(0,Math.ceil(Je/We)),an=Math.min(Ve,(Oe+Je)/We);let An=0;for(let mn=kn;mn<Bn;++mn){const Tn=mn*He-Sn;for(let Vn=Yt;Vn<an;++Vn){const Gn=Vn*We-Je,Pn=tn*rn+Xt*mn+dn*Vn,Un=Te*(De-1-Tn)+Ne*(Oe-1-Gn)+Ie*vn;for(let ls=0;ls<je;++ls){const Rn=Se[Pn+nn*ls],Kn=$e[Un+ls];An+=Rn*Kn}}}const fn=Xe*rn+Vt*yn+Wt*Dn+Kt*vn;Ce[fn]=An}}return ne.makeTensorInfo(be.shape,be.dtype,be.values)}const conv2DBackpropInputConfig$1={kernelName:Conv2DBackpropInput,backendName:"cpu",kernelFunc:conv2DBackpropInput$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3D$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,filter:ae}=ee,{strides:ce,pad:le,dilations:ue}=ie;assertNotComplex$1([oe,ae],"conv3d");const he=computeConv3DInfo(oe.shape,ae.shape,ce,ue,le),{filterDepth:fe,filterHeight:me,filterWidth:ge,dilationDepth:ve,dilationHeight:ye,dilationWidth:be,padInfo:Ce}=he,Se=Ce.front,$e=Ce.left,Te=Ce.top,Ne=new TensorBuffer(he.outShape,oe.dtype),Ie=ne.data.get(oe.dataId).values,ke=ne.data.get(ae.dataId).values,De=Ne.values,Oe=computeStrides(oe.shape),Be=computeStrides(ae.shape);for(let Me=0;Me<he.batchSize;++Me){const Le=Me*Oe[0],je=Me*Ne.strides[0];for(let ze=0;ze<he.outDepth;++ze){const Ve=je+ze*Ne.strides[1],He=ze*he.strideDepth-Se;for(let We=0;We<fe;++We){const Ye=He+We*ve;if(Ye<0||Ye>=he.inDepth)continue;const Ue=We*Be[0],Ke=Le+Ye*Oe[1];for(let Xe=0;Xe<he.outHeight;++Xe){const Vt=Ve+Xe*Ne.strides[2],Wt=Xe*he.strideHeight-Te;for(let Kt=0;Kt<me;++Kt){const tn=Wt+Kt*ye;if(tn<0||tn>=he.inHeight)continue;const Xt=Ue+Kt*Be[1],dn=Ke+tn*Oe[2];for(let nn=0;nn<he.outWidth;++nn){const rn=Vt+nn*he.outChannels,vn=nn*he.strideWidth-$e;for(let yn=0;yn<ge;++yn){const Sn=vn+yn*be;if(Sn<0||Sn>=he.inWidth)continue;const kn=Xt+yn*Be[2],Bn=dn+Sn*he.inChannels;let Dn=kn;for(let Je=0;Je<he.inChannels;++Je){const Yt=Ie[Bn+Je];for(let an=0;an<he.outChannels;++an)De[rn+an]+=Yt*ke[Dn+an];Dn+=he.outChannels}}}}}}}}return ne.makeTensorInfo(Ne.shape,Ne.dtype,Ne.values)}const conv3DConfig$1={kernelName:Conv3D$1,backendName:"cpu",kernelFunc:conv3D$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropFilterV2$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,dy:ae}=ee,{strides:ce,pad:le,filterShape:ue}=ie;assertNotComplex$1([oe,ae],"conv3dBackpropFilterV2");const he=computeStrides(oe.shape),fe=computeStrides(ae.shape),me=computeConv3DInfo(oe.shape,ue,ce,1,le),ge=me.strideDepth,ve=me.strideHeight,ye=me.strideWidth,be=me.filterDepth,Ce=me.filterHeight,Se=me.filterWidth,$e=new TensorBuffer(me.filterShape,"float32"),Te=$e.values,[Ne,Ie,ke,De]=$e.strides,Oe=ne.data.get(ae.dataId).values,[Be,Me,Le,je]=fe,ze=ne.data.get(oe.dataId).values,[Ve,He,We,Ye]=he,Ue=me.padInfo.front,Ke=me.padInfo.left,Xe=me.padInfo.top;for(let Vt=0;Vt<be;++Vt){const Wt=Math.max(0,Math.ceil((Ue-Vt)/ge)),Kt=Math.min(me.outDepth,(me.inDepth+Ue-Vt)/ge),tn=Vt*Ne;for(let Xt=0;Xt<Ce;++Xt){const dn=Math.max(0,Math.ceil((Xe-Xt)/ve)),nn=Math.min(me.outHeight,(me.inHeight+Xe-Xt)/ve),rn=Xt*Ie+tn;for(let vn=0;vn<Se;++vn){const yn=Math.max(0,Math.ceil((Ke-vn)/ye)),Sn=Math.min(me.outWidth,(me.inWidth+Ke-vn)/ye),kn=vn*ke+rn;for(let Bn=0;Bn<me.inChannels;++Bn){const Dn=Bn*De+kn;for(let Je=0;Je<me.outChannels;++Je){let Yt=0;for(let an=0;an<me.batchSize;++an){const An=an*Ve,fn=an*Be;for(let mn=Wt;mn<Kt;++mn){const Vn=(Vt+mn*ge-Ue)*He+An,Gn=mn*Me+fn;for(let Pn=dn;Pn<nn;++Pn){const ls=(Xt+Pn*ve-Xe)*We+Vn,Rn=Pn*Le+Gn;for(let Kn=yn;Kn<Sn;++Kn){const sn=(vn+Kn*ye-Ke)*Ye+ls,Nn=Kn*je+Rn;Yt+=ze[sn+Bn]*Oe[Nn+Je]}}}}Te[Dn+Je]=Yt}}}}}return ne.makeTensorInfo($e.shape,$e.dtype,$e.values)}const conv3DBackpropFilterV2Config$1={kernelName:Conv3DBackpropFilterV2,backendName:"cpu",kernelFunc:conv3DBackpropFilterV2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropInputV2(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,filter:ae}=ee,{pad:ce,strides:le,inputShape:ue}=ie;assertNotComplex$1([oe],"conv3dBackpropInputV2");const he=computeStrides(oe.shape),fe=computeStrides(ae.shape),me=computeConv3DInfo(ue,ae.shape,le,1,ce),ge=new TensorBuffer(me.inShape,"float32"),ve=ge.values,[ye,be,Ce,Se]=ge.strides,$e=ne.data.get(oe.dataId).values,[Te,Ne,Ie,ke]=he,De=ne.data.get(ae.dataId).values,[Oe,Be,Me,Le]=fe,{batchSize:je,filterDepth:ze,filterHeight:Ve,filterWidth:He,inChannels:We,inDepth:Ye,inHeight:Ue,inWidth:Ke,outChannels:Xe,outDepth:Vt,outHeight:Wt,outWidth:Kt,strideDepth:tn,strideHeight:Xt,strideWidth:dn}=me,nn=ze-1-me.padInfo.front,rn=Ve-1-me.padInfo.top,vn=He-1-me.padInfo.left;for(let yn=0;yn<je;++yn)for(let Sn=0;Sn<We;++Sn)for(let kn=0;kn<Ye;++kn){const Bn=kn-nn,Dn=Math.max(0,Math.ceil(Bn/tn)),Je=Math.min(Vt,(ze+Bn)/tn);for(let Yt=0;Yt<Ue;++Yt){const an=Yt-rn,An=Math.max(0,Math.ceil(an/Xt)),fn=Math.min(Wt,(Ve+an)/Xt);for(let mn=0;mn<Ke;++mn){const Tn=mn-vn,Vn=Math.max(0,Math.ceil(Tn/dn)),Gn=Math.min(Kt,(He+Tn)/dn);let Pn=0;for(let Un=Dn;Un<Je;++Un){const ls=Un*tn-Bn;for(let Rn=An;Rn<fn;++Rn){const Kn=Rn*Xt-an;for(let pn=Vn;pn<Gn;++pn){const sn=pn*dn-Tn,Nn=Te*yn+Ne*Un+Ie*Rn+ke*pn,wn=Oe*(ze-1-ls)+Be*(Ve-1-Kn)+Me*(He-1-sn)+Le*Sn;for(let is=0;is<Xe;++is){const Cs=$e[Nn+is],ss=De[wn+is];Pn+=Cs*ss}}}}ve[ye*yn+be*kn+Ce*Yt+Se*mn+Sn]=Pn}}}return ne.makeTensorInfo(ge.shape,ge.dtype,ge.values)}const conv3DBackpropInputV2Config={kernelName:Conv3DBackpropInputV2,backendName:"cpu",kernelFunc:conv3DBackpropInputV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cos$1=unaryKernelFunc$1(Cos,re=>Math.cos(re)),cosConfig$1={kernelName:Cos,backendName:"cpu",kernelFunc:cos$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cosh$1=unaryKernelFunc$1(Cosh,re=>Math.cosh(re)),coshConfig$1={kernelName:Cosh,backendName:"cpu",kernelFunc:cosh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cropAndResize$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{image:oe,boxes:ae,boxInd:ce}=ee,{cropSize:le,method:ue,extrapolationValue:he}=ie,[fe,me,ge,ve]=oe.shape,ye=ae.shape[0],[be,Ce]=le,Se=buffer$1([ye,be,Ce,ve],"float32"),$e=ne.data.get(ae.dataId).values,Te=ne.data.get(ce.dataId).values,Ne=ne.data.get(oe.dataId).values,Ie=computeStrides(oe.shape),ke=computeStrides(Se.shape);for(let De=0;De<ye;De++){const Oe=De*4,Be=$e[Oe],Me=$e[Oe+1],Le=$e[Oe+2],je=$e[Oe+3],ze=Te[De];if(ze>=fe)continue;const Ve=be>1?(Le-Be)*(me-1)/(be-1):0,He=Ce>1?(je-Me)*(ge-1)/(Ce-1):0;for(let We=0;We<be;We++){const Ye=be>1?Be*(me-1)+We*Ve:.5*(Be+Le)*(me-1);if(Ye<0||Ye>me-1){for(let Ue=0;Ue<Ce;Ue++)for(let Ke=0;Ke<ve;Ke++){const Xe=Ke+Ue*ke[2]+We*ke[1]+De*ke[0];Se.values[Xe]=he}continue}if(ue==="bilinear"){const Ue=Math.floor(Ye),Ke=Math.ceil(Ye),Xe=Ye-Ue;for(let Vt=0;Vt<Ce;Vt++){const Wt=Ce>1?Me*(ge-1)+Vt*He:.5*(Me+je)*(ge-1);if(Wt<0||Wt>ge-1){for(let dn=0;dn<ve;dn++){const nn=dn+Vt*ke[2]+We*ke[1]+De*ke[0];Se.values[nn]=he}continue}const Kt=Math.floor(Wt),tn=Math.ceil(Wt),Xt=Wt-Kt;for(let dn=0;dn<ve;dn++){let nn=dn+Kt*Ie[2]+Ue*Ie[1]+ze*Ie[0];const rn=Ne[nn];nn=dn+tn*Ie[2]+Ue*Ie[1]+ze*Ie[0];const vn=Ne[nn];nn=dn+Kt*Ie[2]+Ke*Ie[1]+ze*Ie[0];const yn=Ne[nn];nn=dn+tn*Ie[2]+Ke*Ie[1]+ze*Ie[0];const Sn=Ne[nn],kn=rn+(vn-rn)*Xt,Bn=yn+(Sn-yn)*Xt;nn=dn+Vt*ke[2]+We*ke[1]+De*ke[0],Se.values[nn]=kn+(Bn-kn)*Xe}}}else for(let Ue=0;Ue<Ce;++Ue){const Ke=Ce>1?Me*(ge-1)+Ue*He:.5*(Me+je)*(ge-1);if(Ke<0||Ke>ge-1){for(let Wt=0;Wt<ve;Wt++){const Kt=Wt+Ue*ke[2]+We*ke[1]+De*ke[0];Se.values[Kt]=he}continue}const Xe=Math.round(Ke),Vt=Math.round(Ye);for(let Wt=0;Wt<ve;Wt++){const Kt=Wt+Xe*Ie[2]+Vt*Ie[1]+ze*Ie[0],tn=Wt+Ue*ke[2]+We*ke[1]+De*ke[0];Se.values[tn]=Ne[Kt]}}}}return ne.makeTensorInfo(Se.shape,Se.dtype,Se.values)}const cropAndResizeConfig$1={kernelName:CropAndResize,backendName:"cpu",kernelFunc:cropAndResize$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumsum$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,exclusive:ce,reverse:le}=ie;assertNotComplex$1(oe,"cumsum");const ue=getAxesPermutation([ae],oe.shape.length);let he=oe;ue!=null&&(he=transpose$1({inputs:{x:oe},backend:ne,attrs:{perm:ue}}));const fe=getInnerMostAxes(1,oe.shape.length)[0];if(fe!==he.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${he.shape.length-1} but got axis=${fe}`);const me=upcastType(he.dtype,"int32"),ge=makeZerosTypedArray(sizeFromShape(he.shape),me),ve=ne.data.get(he.dataId).values,ye=he.shape[he.shape.length-1],be=le?(Se,$e)=>Se+ye-$e-1:(Se,$e)=>Se+$e;for(let Se=0;Se<ve.length;Se+=ye)for(let $e=0;$e<ye;$e++){const Te=be(Se,$e);if($e===0)ge[Te]=ce?0:ve[Te];else{const Ne=be(Se,$e-1);ge[Te]=ce?ve[Ne]+ge[Ne]:ve[Te]+ge[Ne]}}const Ce=ne.makeTensorInfo(he.shape,me,ge);if(ue!=null){const Se=getUndoAxesPermutation(ue),$e=transpose$1({inputs:{x:Ce},backend:ne,attrs:{perm:Se}});return ne.disposeIntermediateTensorInfo(Ce),ne.disposeIntermediateTensorInfo(he),$e}return Ce}const cumsumConfig$1={kernelName:Cumsum,backendName:"cpu",kernelFunc:cumsum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function denseBincount$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,weights:ae}=ee,{size:ce,binaryOutput:le}=ie;if(oe.shape.length===1){const ue=ne.data.get(oe.dataId).values,he=ne.data.get(ae.dataId).values,fe=bincountImpl(ue,he,ae.dtype,ae.shape,ce);return ne.makeTensorInfo([ce],ae.dtype,fe)}else if(oe.shape.length===2){const ue=ne.bufferSync(oe),he=ne.bufferSync(ae),fe=bincountReduceImpl(ue,he,ce,le);return ne.makeTensorInfo(fe.shape,ae.dtype,fe.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${oe.shape.length}.`)}const denseBincountConfig$1={kernelName:DenseBincount,backendName:"cpu",kernelFunc:denseBincount$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthToSpace$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{blockSize:ae,dataFormat:ce}=ie;assert$2(ce==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${ce}`),assert$2(ae>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${ae}`);const le=oe.shape[0],ue=oe.shape[1],he=oe.shape[2],fe=oe.shape[3],me=ue*ae,ge=he*ae,ve=fe/(ae*ae),ye=ne.data.get(oe.dataId).values,be=new Float32Array(le*me*ge*ve);let Ce=0;for(let Se=0;Se<le;++Se)for(let $e=0;$e<me;++$e){const Te=Math.floor($e/ae),Ne=$e%ae;for(let Ie=0;Ie<ge;++Ie){const ke=Math.floor(Ie/ae),De=Ie%ae,Oe=(Ne*ae+De)*ve;for(let Be=0;Be<ve;++Be){const Le=Be+Oe+fe*(ke+he*(Te+ue*Se));be[Ce++]=ye[Le]}}}return ne.makeTensorInfo([le,me,ge,ve],oe.dtype,be)}const depthToSpaceConfig$1={kernelName:DepthToSpace,backendName:"cpu",kernelFunc:depthToSpace$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNative$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,filter:ae}=ee,{strides:ce,pad:le,dilations:ue,dimRoundingMode:he}=ie;assertNotComplex$1([oe,ae],"depthwiseConv2DNative");const fe=computeStrides(oe.shape),me=computeStrides(ae.shape);let ge=ue;ge==null&&(ge=[1,1]),assert$2(eitherStridesOrDilationsAreOne(ce,ge),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${ce} and dilations '${ge}'`);const ve=computeConv2DInfo(oe.shape,ae.shape,ce,ge,le,he,!0),{filterHeight:ye,filterWidth:be,dilationHeight:Ce,dilationWidth:Se,padInfo:$e}=ve,Te=$e.left,Ne=$e.top,Ie=ve.outChannels/ve.inChannels,ke=new TensorBuffer(ve.outShape,oe.dtype),De=ne.data.get(oe.dataId).values,Oe=ne.data.get(ae.dataId).values,Be=ke.values;for(let Me=0;Me<ve.batchSize;++Me){const Le=Me*fe[0],je=Me*ke.strides[0];for(let ze=0;ze<ve.outHeight;++ze){const Ve=je+ze*ke.strides[1],He=ze*ve.strideHeight-Te;for(let We=0;We<ye;++We){const Ye=He+We*Ce;if(Ye<0||Ye>=ve.inHeight)continue;const Ue=We*me[0],Ke=Le+Ye*fe[1];for(let Xe=0;Xe<ve.outWidth;++Xe){const Vt=Ve+Xe*ke.strides[2],Wt=Xe*ve.strideWidth-Ne;for(let Kt=0;Kt<be;++Kt){const tn=Wt+Kt*Se;if(tn<0||tn>=ve.inWidth)continue;const Xt=Ue+Kt*me[1],dn=Ke+tn*ve.inChannels;let nn=Vt,rn=Xt;for(let vn=0;vn<ve.inChannels;++vn){const yn=De[dn+vn];for(let Sn=0;Sn<Ie;++Sn)Be[nn+Sn]+=yn*Oe[rn+Sn];nn+=Ie,rn+=Ie}}}}}}return ne.makeTensorInfo(ke.shape,ke.dtype,ke.values)}const depthwiseConv2dNativeConfig$1={kernelName:DepthwiseConv2dNative,backendName:"cpu",kernelFunc:depthwiseConv2dNative$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropFilter$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,dy:ae}=ee,{strides:ce,dilations:le,pad:ue,dimRoundingMode:he,filterShape:fe}=ie;assertNotComplex$1([oe,ae],"depthwiseConv2dNativeBackpropFilter");const me=computeConv2DInfo(oe.shape,fe,ce,le,ue,he,!0),{strideHeight:ge,strideWidth:ve,filterHeight:ye,filterWidth:be}=me,Ce=new TensorBuffer(me.filterShape,"float32"),Se=me.padInfo.left,$e=me.padInfo.top,Te=me.outChannels/me.inChannels,Ne=ne.data.get(oe.dataId).values,Ie=new TensorBuffer(oe.shape,oe.dtype,Ne),ke=ne.data.get(ae.dataId).values,De=new TensorBuffer(ae.shape,ae.dtype,ke);for(let Oe=0;Oe<ye;++Oe){const Be=Math.max(0,Math.ceil(($e-Oe)/ge)),Me=Math.min(me.outHeight,(me.inHeight+$e-Oe)/ge);for(let Le=0;Le<be;++Le){const je=Math.max(0,Math.ceil((Se-Le)/ve)),ze=Math.min(me.outWidth,(me.inWidth+Se-Le)/ve);for(let Ve=0;Ve<me.outChannels;++Ve){const He=Math.trunc(Ve/Te),We=Ve%Te;let Ye=0;for(let Ue=0;Ue<me.batchSize;++Ue)for(let Ke=Be;Ke<Me;++Ke){const Xe=Oe+Ke*ge-$e;for(let Vt=je;Vt<ze;++Vt){const Wt=Le+Vt*ve-Se;Ye+=Ie.get(Ue,Xe,Wt,He)*De.get(Ue,Ke,Vt,Ve)}}Ce.set(Ye,Oe,Le,He,We)}}}return ne.makeTensorInfo(Ce.shape,Ce.dtype,Ce.values)}const depthwiseConv2dNativeBackpropFilterConfig$1={kernelName:DepthwiseConv2dNativeBackpropFilter,backendName:"cpu",kernelFunc:depthwiseConv2dNativeBackpropFilter$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropInput$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,filter:ae}=ee,{strides:ce,dilations:le,pad:ue,dimRoundingMode:he,inputShape:fe}=ie;assertNotComplex$1([oe,ae],"depthwiseConv2DNativeBackpropInput");const me=computeStrides(oe.shape),ge=computeStrides(ae.shape),ve=computeConv2DInfo(fe,ae.shape,ce,le,ue,he,!0),ye=new TensorBuffer(ve.inShape,"float32"),be=ye.values,[Ce,Se,$e]=ye.strides,Te=ne.data.get(oe.dataId).values,[Ne,Ie,ke]=me,De=ne.data.get(ae.dataId).values,[Oe,Be,Me]=ge,{batchSize:Le,filterHeight:je,filterWidth:ze,inChannels:Ve,inHeight:He,inWidth:We,outChannels:Ye,outHeight:Ue,outWidth:Ke,strideHeight:Xe,strideWidth:Vt}=ve,Wt=je-1-ve.padInfo.top,Kt=ze-1-ve.padInfo.left,tn=Ye/Ve;for(let Xt=0;Xt<Le;++Xt)for(let dn=0;dn<Ve;++dn)for(let nn=0;nn<He;++nn){const rn=nn-Wt,vn=Math.max(0,Math.ceil(rn/Xe)),yn=Math.min(Ue,(je+rn)/Xe);for(let Sn=0;Sn<We;++Sn){const kn=Sn-Kt,Bn=Math.max(0,Math.ceil(kn/Vt)),Dn=Math.min(Ke,(ze+kn)/Vt);let Je=0;for(let Yt=vn;Yt<yn;++Yt){const an=Yt*Xe-rn;for(let An=Bn;An<Dn;++An){const fn=An*Vt-kn,mn=Ne*Xt+Ie*Yt+ke*An,Tn=Oe*(je-1-an)+Be*(ze-1-fn)+Me*dn;for(let Vn=0;Vn<tn;++Vn){const Gn=dn*tn+Vn,Pn=Te[mn+Gn],Un=De[Tn+Vn];Je+=Pn*Un}}}be[Ce*Xt+Se*nn+$e*Sn+dn]=Je}}return ne.makeTensorInfo(ye.shape,ye.dtype,ye.values)}const depthwiseConv2dNativeBackpropInputConfig$1={kernelName:DepthwiseConv2dNativeBackpropInput,backendName:"cpu",kernelFunc:depthwiseConv2dNativeBackpropInput$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function diag$1(re){const{inputs:ee,backend:ne}=re,{x:ie}=ee,oe=sizeFromShape(ie.shape),ae=ne.data.get(ie.dataId).values,ce=buffer$1([oe,oe],ie.dtype),le=ce.values;for(let he=0;he<ae.length;he++)le[he*oe+he]=ae[he];const ue=[...ie.shape,...ie.shape];return ne.makeTensorInfo(ue,ce.dtype,ce.values)}const diagConfig$1={kernelName:Diag,backendName:"cpu",kernelFunc:diag$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dConfig={kernelName:Dilation2D,backendName:"cpu",kernelFunc:({inputs:re,backend:ee,attrs:ne})=>{const{x:ie,filter:oe}=re,{strides:ae,pad:ce,dilations:le}=ne,ue=ee,he=ue.data.get(ie.dataId).values,fe=ie.shape.length,me=ue.data.get(oe.dataId).values,ge=oe.shape.length,{batchSize:ve,inHeight:ye,inWidth:be,inChannels:Ce,outHeight:Se,outWidth:$e,padInfo:Te,strideHeight:Ne,strideWidth:Ie,filterHeight:ke,filterWidth:De,dilationHeight:Oe,dilationWidth:Be,outShape:Me}=computeDilation2DInfo(ie.shape,oe.shape,ae,ce,"NHWC",le),Le=sizeFromShape(Me),je=Me.length,ze=getArrayFromDType(ie.dtype,Le);for(let He=0;He<ve;++He)for(let We=0;We<Se;++We){const Ye=We*Ne-Te.top;for(let Ue=0;Ue<$e;++Ue){const Ke=Ue*Ie-Te.left;for(let Xe=0;Xe<Ce;++Xe){let Vt=Number.MIN_SAFE_INTEGER;for(let Kt=0;Kt<ke;++Kt){const tn=Ye+Kt*Oe;if(tn>=0&&tn<ye)for(let Xt=0;Xt<De;++Xt){const dn=Ke+Xt*Be;if(dn>=0&&dn<be){const nn=locToIndex([He,tn,dn,Xe],fe,computeStrides(ie.shape)),rn=locToIndex([Kt,Xt,Xe],ge,computeStrides(oe.shape)),vn=he[nn]+me[rn];vn>Vt&&(Vt=vn)}}}const Wt=locToIndex([He,We,Ue,Xe],je,computeStrides(Me));ze[Wt]=Vt}}}return{dataId:ue.write(toTypedArray(ze,ie.dtype),Me,ie.dtype),shape:Me,dtype:ie.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dBackpropFilterConfig={kernelName:Dilation2DBackpropFilter,backendName:"cpu",kernelFunc:({inputs:re,backend:ee,attrs:ne})=>{const{x:ie,filter:oe,dy:ae}=re,{strides:ce,pad:le,dilations:ue}=ne,he=ee,fe=toNestedArray(ie.shape,he.data.get(ie.dataId).values),me=toNestedArray(oe.shape,he.data.get(oe.dataId).values),{batchSize:ge,inHeight:ve,inWidth:ye,inChannels:be,outHeight:Ce,outWidth:Se,padInfo:$e,strideHeight:Te,strideWidth:Ne,filterHeight:Ie,filterWidth:ke,dilationHeight:De,dilationWidth:Oe,outShape:Be}=computeDilation2DInfo(ie.shape,oe.shape,ce,le,"NHWC",ue);assert$2(ae.rank===Be.length,()=>`Error in ${Dilation2DBackpropFilter}, dy must have the same rank as output ${Be.length}, but got ${ae.rank}`);const Me=toNestedArray(Be,he.data.get(ae.dataId).values),Le=makeZerosNestedTypedArray(oe.shape,oe.dtype);for(let ze=0;ze<ge;++ze)for(let Ve=0;Ve<Ce;++Ve){const He=Ve*Te-$e.top;for(let We=0;We<Se;++We){const Ye=We*Ne-$e.left;for(let Ue=0;Ue<be;++Ue){let Ke=Number.MIN_SAFE_INTEGER,Xe=0,Vt=0;for(let Wt=0;Wt<Ie;++Wt){const Kt=He+Wt*De;if(Kt>=0&&Kt<ve)for(let tn=0;tn<ke;++tn){const Xt=Ye+tn*Oe;if(Xt>=0&&Xt<ye){const dn=fe[ze][Kt][Xt][Ue]+me[Wt][tn][Ue];dn>Ke&&(Ke=dn,Xe=Wt,Vt=tn)}}}Le[Xe][Vt][Ue]+=Me[ze][Ve][We][Ue]}}}return{dataId:he.write(toTypedArray(Le,ie.dtype),oe.shape,oe.dtype),shape:oe.shape,dtype:oe.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dilation2dBackpropInputConfig={kernelName:Dilation2DBackpropInput,backendName:"cpu",kernelFunc:({inputs:re,backend:ee,attrs:ne})=>{const{x:ie,filter:oe,dy:ae}=re,{strides:ce,pad:le,dilations:ue}=ne,he=ee,fe=toNestedArray(ie.shape,he.data.get(ie.dataId).values),me=toNestedArray(oe.shape,he.data.get(oe.dataId).values),{batchSize:ge,inHeight:ve,inWidth:ye,inChannels:be,outHeight:Ce,outWidth:Se,padInfo:$e,strideHeight:Te,strideWidth:Ne,filterHeight:Ie,filterWidth:ke,dilationHeight:De,dilationWidth:Oe,outShape:Be}=computeDilation2DInfo(ie.shape,oe.shape,ce,le,"NHWC",ue);assert$2(ae.rank===Be.length,()=>`Error in ${Dilation2DBackpropInput}, dy must have the same rank as output ${Be.length}, but got ${ae.rank}`);const Me=toNestedArray(Be,he.data.get(ae.dataId).values),Le=makeZerosNestedTypedArray(ie.shape,ie.dtype);for(let ze=0;ze<ge;++ze)for(let Ve=0;Ve<Ce;++Ve){const He=Ve*Te-$e.top;for(let We=0;We<Se;++We){const Ye=We*Ne-$e.left;for(let Ue=0;Ue<be;++Ue){let Ke=Number.MIN_SAFE_INTEGER,Xe=He<0?0:He,Vt=Ye<0?0:Ye;for(let Wt=0;Wt<Ie;++Wt){const Kt=He+Wt*De;if(Kt>=0&&Kt<ve)for(let tn=0;tn<ke;++tn){const Xt=Ye+tn*Oe;if(Xt>=0&&Xt<ye){const dn=fe[ze][Kt][Xt][Ue]+me[Wt][tn][Ue];dn>Ke&&(Ke=dn,Xe=Kt,Vt=Xt)}}}Le[ze][Xe][Vt][Ue]+=Me[ze][Ve][We][Ue]}}}return{dataId:he.write(toTypedArray(Le,ie.dtype),ie.shape,ie.dtype),shape:ie.shape,dtype:ie.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eluGrad$1(re){const{inputs:ee,backend:ne}=re,{dy:ie,y:oe}=ee;assertNotComplex$1([ie,oe],"eluGrad");const ae=new Float32Array(sizeFromShape(oe.shape)),ce=ne.data.get(oe.dataId).values,le=ne.data.get(ie.dataId).values;for(let ue=0;ue<ce.length;++ue){const he=ce[ue];he>=1?ae[ue]=le[ue]:ae[ue]=le[ue]*(he+1)}return ne.makeTensorInfo(oe.shape,"float32",ae)}const eluGradConfig$1={kernelName:EluGrad,backendName:"cpu",kernelFunc:eluGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const equalImpl=createSimpleBinaryKernelImpl((re,ee)=>re===ee?1:0),equal$1=binaryKernelFunc$1(Equal,equalImpl,null,"bool"),equalConfig$1={kernelName:Equal,backendName:"cpu",kernelFunc:equal$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p$1=ERF_P,a1=ERF_A1,a2=ERF_A2,a3=ERF_A3,a4=ERF_A4,a5=ERF_A5,erf$1=unaryKernelFunc$1(Erf,re=>{const ee=Math.sign(re),ne=Math.abs(re),ie=1/(1+p$1*ne);return ee*(1-((((a5*ie+a4)*ie+a3)*ie+a2)*ie+a1)*ie*Math.exp(-ne*ne))}),erfConfig$1={kernelName:Erf,backendName:"cpu",kernelFunc:erf$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expandDims$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{input:oe}=ee,{dim:ae}=ie,ce=oe.shape.length,le=oe.shape.slice();let ue=ae;return ae<0&&(assert$2(-(ce+1)<=ae,()=>`Axis must be in the interval [${-(ce+1)}, ${ce}]`),ue=ce+ae+1),le.splice(ue,0,1),reshape$1({inputs:{x:oe},backend:ne,attrs:{shape:le}})}const expandDimsConfig$1={kernelName:ExpandDims,backendName:"cpu",kernelFunc:expandDims$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const realDivImpl=createSimpleBinaryKernelImpl((re,ee)=>re/ee),div=binaryKernelFunc$1(RealDiv,realDivImpl),realDivConfig$1={kernelName:RealDiv,backendName:"cpu",kernelFunc:div};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fftBatch(re,ee,ne){const ie=re.shape,oe=ie[0],ae=ie[1],ce=ne.data.get(re.dataId),le=ce.complexTensorInfos.real,ue=ce.complexTensorInfos.imag,he=[oe,ae],fe=sizeFromShape(he),me=getTypedArrayFromDType("float32",fe),ge=getTypedArrayFromDType("float32",fe);for(let Ce=0;Ce<oe;Ce++){const Se=slice$3({inputs:{x:le},backend:ne,attrs:{begin:[Ce,0],size:[1,ae]}}),$e=slice$3({inputs:{x:ue},backend:ne,attrs:{begin:[Ce,0],size:[1,ae]}}),Te=complex$1({inputs:{real:Se,imag:$e},backend:ne}),{real:Ne,imag:Ie}=fftImpl$1(Te,ee,ne),ke=mergeRealAndImagArrays(Ne,Ie);for(let De=0;De<ae;De++){const Oe=getComplexWithIndex(ke,De);me[Ce*ae+De]=Oe.real,ge[Ce*ae+De]=Oe.imag}ne.disposeIntermediateTensorInfo(Se),ne.disposeIntermediateTensorInfo($e),ne.disposeIntermediateTensorInfo(Te)}const ve=ne.makeTensorInfo(he,"float32",me),ye=ne.makeTensorInfo(he,"float32",ge),be=complex$1({inputs:{real:ve,imag:ye},backend:ne});return ne.disposeIntermediateTensorInfo(ve),ne.disposeIntermediateTensorInfo(ye),be}function fftImpl$1(re,ee,ne){const ie=sizeFromShape(re.shape),oe=ne.data.get(re.dataId),ae=ne.data.get(oe.complexTensorInfos.real.dataId).values,ce=ne.data.get(oe.complexTensorInfos.imag.dataId).values;if(isExponentOf2(ie)){const le=fftRadix2$1(ae,ce,ie,ee,ne),ue=[re.shape[0],re.shape[1]];if(ee){const he=ne.makeTensorInfo(ue,"float32",le.real),fe=ne.makeTensorInfo(ue,"float32",le.imag),me=ne.makeTensorInfo([],"float32",createScalarValue(ie,"float32")),ge=identity$4({inputs:{x:me},backend:ne}),ve=realDivConfig$1.kernelFunc({inputs:{a:he,b:me},backend:ne}),ye=realDivConfig$1.kernelFunc({inputs:{a:fe,b:ge},backend:ne}),be=ne.data.get(ve.dataId).values,Ce=ne.data.get(ye.dataId).values;return ne.disposeIntermediateTensorInfo(he),ne.disposeIntermediateTensorInfo(fe),ne.disposeIntermediateTensorInfo(me),ne.disposeIntermediateTensorInfo(ge),ne.disposeIntermediateTensorInfo(ve),ne.disposeIntermediateTensorInfo(ye),{real:be,imag:Ce}}return le}else{const le=mergeRealAndImagArrays(ae,ce),ue=fourierTransformByMatmul(le,ie,ee);return splitRealAndImagArrays(ue)}}function isExponentOf2(re){return(re&re-1)===0}function fftRadix2$1(re,ee,ne,ie,oe){if(ne===1)return{real:re,imag:ee};const ae=mergeRealAndImagArrays(re,ee),ce=ne/2,le=complexWithEvenIndex(ae),ue=le.real,he=le.imag,fe=[ue.length],me=oe.makeTensorInfo(fe,"float32",ue),ge=oe.makeTensorInfo(fe,"float32",he),ve=complex$1({inputs:{real:me,imag:ge},backend:oe}),ye=complexWithOddIndex(ae),be=ye.real,Ce=ye.imag,Se=[be.length],$e=oe.makeTensorInfo(Se,"float32",be),Te=oe.makeTensorInfo(Se,"float32",Ce),Ne=complex$1({inputs:{real:$e,imag:Te},backend:oe}),Ie=fftRadix2$1(ue,he,ce,ie,oe),ke=Ie.real,De=Ie.imag,Oe=[ke.length],Be=oe.makeTensorInfo(Oe,"float32",ke),Me=oe.makeTensorInfo(Oe,"float32",De),Le=complex$1({inputs:{real:Be,imag:Me},backend:oe}),je=fftRadix2$1(be,Ce,ce,ie,oe),ze=je.real,Ve=je.imag,He=[ze.length],We=oe.makeTensorInfo(He,"float32",ze),Ye=oe.makeTensorInfo(He,"float32",Ve),Ue=complex$1({inputs:{real:We,imag:Ye},backend:oe}),Ke=exponents(ne,ie),Xe=[Ke.real.length],Vt=oe.makeTensorInfo(Xe,"float32",Ke.real),Wt=oe.makeTensorInfo(Xe,"float32",Ke.imag),Kt=complex$1({inputs:{real:Vt,imag:Wt},backend:oe}),tn=multiply$2({inputs:{a:Kt,b:Ue},backend:oe}),Xt=add({inputs:{a:Le,b:tn},backend:oe}),dn=sub$1({inputs:{a:Le,b:tn},backend:oe}),nn=real$1({inputs:{input:Xt},backend:oe}),rn=real$1({inputs:{input:dn},backend:oe}),vn=imag$1({inputs:{input:Xt},backend:oe}),yn=imag$1({inputs:{input:dn},backend:oe}),Sn=concat$1({inputs:[nn,rn],backend:oe,attrs:{axis:0}}),kn=concat$1({inputs:[vn,yn],backend:oe,attrs:{axis:0}}),Bn=oe.data.get(Sn.dataId).values,Dn=oe.data.get(kn.dataId).values;return oe.disposeIntermediateTensorInfo(me),oe.disposeIntermediateTensorInfo(ge),oe.disposeIntermediateTensorInfo(ve),oe.disposeIntermediateTensorInfo($e),oe.disposeIntermediateTensorInfo(Te),oe.disposeIntermediateTensorInfo(Ne),oe.disposeIntermediateTensorInfo(Be),oe.disposeIntermediateTensorInfo(Me),oe.disposeIntermediateTensorInfo(Le),oe.disposeIntermediateTensorInfo(We),oe.disposeIntermediateTensorInfo(Ye),oe.disposeIntermediateTensorInfo(Ue),oe.disposeIntermediateTensorInfo(Vt),oe.disposeIntermediateTensorInfo(Wt),oe.disposeIntermediateTensorInfo(Kt),oe.disposeIntermediateTensorInfo(tn),oe.disposeIntermediateTensorInfo(Xt),oe.disposeIntermediateTensorInfo(dn),oe.disposeIntermediateTensorInfo(nn),oe.disposeIntermediateTensorInfo(vn),oe.disposeIntermediateTensorInfo(rn),oe.disposeIntermediateTensorInfo(yn),oe.disposeIntermediateTensorInfo(Sn),oe.disposeIntermediateTensorInfo(kn),{real:Bn,imag:Dn}}function fourierTransformByMatmul(re,ee,ne){const ie=new Float32Array(ee*2);for(let oe=0;oe<ee;oe++){let ae=0,ce=0;for(let le=0;le<ee;le++){const ue=exponent(oe*le,ee,ne),he=getComplexWithIndex(re,le);ae+=he.real*ue.real-he.imag*ue.imag,ce+=he.real*ue.imag+he.imag*ue.real}ne&&(ae/=ee,ce/=ee),assignToTypedArray(ie,ae,ce,oe)}return ie}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft$2(re){const{inputs:ee,backend:ne}=re,{input:ie}=ee,oe=sizeFromShape(ie.shape),ae=ie.shape[ie.shape.length-1],ce=oe/ae,le=reshape$1({inputs:{x:ie},backend:ne,attrs:{shape:[ce,ae]}}),ue=fftBatch(le,!1,ne),he=reshape$1({inputs:{x:ue},backend:ne,attrs:{shape:ie.shape}});return ne.disposeIntermediateTensorInfo(le),ne.disposeIntermediateTensorInfo(ue),he}const fftConfig$1={kernelName:FFT$2,backendName:"cpu",kernelFunc:fft$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fill$2(re){const{backend:ee,attrs:ne}=re,{shape:ie,value:oe,dtype:ae}=ne,ce=ae||inferDtype(oe),le=getArrayFromDType(ce,sizeFromShape(ie));return fillValues(le,oe,ce),ee.makeTensorInfo(ie,ce,le)}const fillConfig$1={kernelName:Fill,backendName:"cpu",kernelFunc:fill$2};function fillValues(re,ee,ne){re.fill(ee)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const flipLeftRightConfig$1={kernelName:FlipLeftRight,backendName:"cpu",kernelFunc:({inputs:re,attrs:ee,backend:ne})=>{const{image:ie}=re,oe=ne,ae=getTypedArrayFromDType(ie.dtype,sizeFromShape(ie.shape)),[ce,le,ue,he]=ie.shape,fe=oe.data.get(ie.dataId).values;for(let ge=0;ge<ce;ge++){const ve=ge*ue*le*he;for(let ye=0;ye<le;ye++){const be=ye*(ue*he);for(let Ce=0;Ce<ue;Ce++){const Se=Ce*he;for(let $e=0;$e<he;$e++){const Ne=[ce,ye,Ce,$e][2],Ie=Math.round(ue-Ne),ke=ve+be+Se+$e;let De=fe[ke];if(Ie>=0&&Ie<ue){const Oe=Ie*he,Be=ve+be+Oe+$e;De=fe[Be]}ae[ke]=De}}}}return{dataId:oe.write(ae,ie.shape,ie.dtype),shape:ie.shape,dtype:ie.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const floorDivImpl=createSimpleBinaryKernelImpl((re,ee)=>Math.floor(re/ee)),floorDiv$1=binaryKernelFunc$1(FloorDiv,floorDivImpl,null,"int32"),floorDivConfig$1={kernelName:FloorDiv,backendName:"cpu",kernelFunc:floorDiv$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConv2D(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,filter:ae,bias:ce,preluActivationWeights:le}=ee,{strides:ue,pad:he,dataFormat:fe,dilations:me,dimRoundingMode:ge,activation:ve,leakyreluAlpha:ye}=ie;let be=conv2D({inputs:{x:oe,filter:ae},backend:ne,attrs:{strides:ue,pad:he,dataFormat:fe,dilations:me,dimRoundingMode:ge}});if(ce){const Ce=be;be=add({inputs:{a:be,b:ce},backend:ne}),ne.disposeIntermediateTensorInfo(Ce)}if(ve){const Ce=be;be=applyActivation(ne,be,ve,le,ye),ne.disposeIntermediateTensorInfo(Ce)}return be}const fusedConv2DConfig$1={kernelName:FusedConv2D,backendName:"cpu",kernelFunc:fusedConv2D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedDepthwiseConv2D$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,filter:ae,bias:ce,preluActivationWeights:le}=ee,{strides:ue,pad:he,dataFormat:fe,dilations:me,dimRoundingMode:ge,activation:ve,leakyreluAlpha:ye}=ie;let be=depthwiseConv2dNative$1({inputs:{x:oe,filter:ae},backend:ne,attrs:{strides:ue,pad:he,dataFormat:fe,dilations:me,dimRoundingMode:ge}});if(ce){const Ce=be;be=add({inputs:{a:be,b:ce},backend:ne}),ne.disposeIntermediateTensorInfo(Ce)}if(ve){const Ce=be;be=applyActivation(ne,be,ve,le,ye),ne.disposeIntermediateTensorInfo(Ce)}return be}const fusedDepthwiseConv2DConfig$1={kernelName:FusedDepthwiseConv2D,backendName:"cpu",kernelFunc:fusedDepthwiseConv2D$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherNd$1(re){const{inputs:ee,backend:ne}=re,{params:ie,indices:oe}=ee,ae=sizeFromShape(ie.shape),ce=oe.shape,le=ce[ce.length-1],[ue,he,fe,me]=prepareAndValidate(ie,oe);if(he===0)return ne.makeTensorInfo(ue,ie.dtype,[]);const ge=buffer$1([he,fe],ie.dtype),ve=ne.data.get(oe.dataId).values,ye=ne.data.get(ie.dataId).values;for(let be=0;be<he;be++){const Ce=[];let Se=0;for(let $e=0;$e<le;$e++){const Te=ve[be*le+$e];Se+=Te*me[$e],Ce.push(Te)}if(Se<0||Se>=ae/fe)throw new Error(`Invalid indices: ${Ce} does not index into ${ie.shape}`);for(let $e=0;$e<fe;$e++)ge.values[be*fe+$e]=ye[Se*fe+$e]}return ne.makeTensorInfo(ue,ge.dtype,ge.values)}const gatherNdConfig$1={kernelName:GatherNd,backendName:"cpu",kernelFunc:gatherNd$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherV2$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,indices:ae}=ee,{axis:ce,batchDims:le}=ie;assertNotComplex$1([oe,ae],"gatherV2");let ue=le;le==null&&(ue=0);const he=sizeFromShape(ae.shape),fe=parseAxisParam(ce,oe.shape)[0],me=collectGatherOpShapeInfo(oe,ae,fe,ue),ge=reshape$1({inputs:{x:oe},backend:ne,attrs:{shape:[me.batchSize,me.outerSize,me.dimSize,me.sliceSize]}}),ve=reshape$1({inputs:{x:ae},backend:ne,attrs:{shape:[me.batchSize,he/me.batchSize]}}),ye=[me.batchSize,me.outerSize,he/me.batchSize,me.sliceSize],be=ne.bufferSync(ve),Ce=ne.bufferSync(ge),Se=gatherV2Impl(Ce,be,ye);return ne.disposeIntermediateTensorInfo(ge),ne.disposeIntermediateTensorInfo(ve),ne.makeTensorInfo(me.outputShape,Se.dtype,Se.values)}const gatherV2Config$1={kernelName:GatherV2,backendName:"cpu",kernelFunc:gatherV2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const greaterEqualImpl=createSimpleBinaryKernelImpl((re,ee)=>re>=ee?1:0),greaterEqual$1=binaryKernelFunc$1(GreaterEqual,greaterEqualImpl,null,"bool"),greaterEqualConfig$1={kernelName:GreaterEqual,backendName:"cpu",kernelFunc:greaterEqual$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifft$1(re){const{inputs:ee,backend:ne}=re,{input:ie}=ee,oe=sizeFromShape(ie.shape),ae=ie.shape[ie.shape.length-1],ce=oe/ae,le=reshape$1({inputs:{x:ie},backend:ne,attrs:{shape:[ce,ae]}}),ue=fftBatch(le,!0,ne),he=reshape$1({inputs:{x:ue},backend:ne,attrs:{shape:ie.shape}});return ne.disposeIntermediateTensorInfo(le),ne.disposeIntermediateTensorInfo(ue),he}const ifftConfig$1={kernelName:IFFT,backendName:"cpu",kernelFunc:ifft$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isFinite$2=unaryKernelFunc$1(IsFinite,re=>Number.isFinite(re)?1:0,"bool"),isFiniteConfig$1={kernelName:IsFinite,backendName:"cpu",kernelFunc:isFinite$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isInf$1=unaryKernelFunc$1(IsInf,re=>Math.abs(re)===1/0?1:0,"bool"),isInfConfig$1={kernelName:IsInf,backendName:"cpu",kernelFunc:isInf$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const isNaN$2=unaryKernelFunc$1(IsNan,re=>Number.isNaN(re)?1:0,"bool"),isNaNConfig$1={kernelName:IsNan,backendName:"cpu",kernelFunc:isNaN$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lessEqualImpl=createSimpleBinaryKernelImpl((re,ee)=>re<=ee?1:0),lessEqual$1=binaryKernelFunc$1(LessEqual,lessEqualImpl,null,"bool"),lessEqualConfig$1={kernelName:LessEqual,backendName:"cpu",kernelFunc:lessEqual$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linSpace$1(re){const{backend:ee,attrs:ne}=re,{start:ie,stop:oe,num:ae}=ne,ce=linSpaceImpl(ie,oe,ae);return ee.makeTensorInfo([ce.length],"float32",ce)}const linSpaceConfig$1={kernelName:LinSpace,backendName:"cpu",kernelFunc:linSpace$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const log1p$1=unaryKernelFunc$1(Log1p,re=>Math.log1p(re)),log1pConfig$1={kernelName:Log1p,backendName:"cpu",kernelFunc:log1p$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logicalAndImpl=createSimpleBinaryKernelImpl((re,ee)=>re&&ee),logicalAnd$1=binaryKernelFunc$1(LogicalAnd,logicalAndImpl,null,"bool"),logicalAndConfig$1={kernelName:LogicalAnd,backendName:"cpu",kernelFunc:logicalAnd$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logicalNot$1=unaryKernelFunc$1(LogicalNot,re=>re?0:1,"bool"),logicalNotConfig$1={kernelName:LogicalNot,backendName:"cpu",kernelFunc:logicalNot$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const logicalOrImpl=createSimpleBinaryKernelImpl((re,ee)=>re||ee),logicalOr$1=binaryKernelFunc$1(LogicalOr,logicalOrImpl,null,"bool"),logicalOrConfig$1={kernelName:LogicalOr,backendName:"cpu",kernelFunc:logicalOr$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRN(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{depthRadius:ae,bias:ce,alpha:le,beta:ue}=ie;assertNotComplex$1(oe,"LRN");const he=oe.shape[3],fe=he-1,me=ne.data.get(oe.dataId).values,ge=sizeFromShape(oe.shape),ve=new Float32Array(ge);function ye(be){const Ce=be%he;let Se=be-Ce+Math.max(0,Ce-ae);const $e=be-Ce+Math.min(Ce+ae,fe);let Te=0;for(;Se<=$e;Se++){const Ne=me[Se];Te+=Ne*Ne}return Te}for(let be=0;be<ge;be++){const Ce=ye(be),Se=me[be]*Math.pow(ce+le*Ce,-ue);ve[be]=Se}return ne.makeTensorInfo(oe.shape,oe.dtype,ve)}const lRNConfig={kernelName:LRN,backendName:"cpu",kernelFunc:lRN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lRNGrad(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,y:ae,dy:ce}=ee,{depthRadius:le,bias:ue,alpha:he,beta:fe}=ie;assertNotComplex$1(ce,"LRNGrad");const me=sizeFromShape(ce.shape),ge=ce.shape[3],ve=ne.data.get(ce.dataId).values,ye=ne.data.get(oe.dataId).values,be=ne.data.get(ae.dataId).values,Ce=new Float32Array(me),Se=me;for(let $e=0;$e<Se;$e++){const Te=$e%ge,Ne=$e-Te+Math.max(0,Te-le),Ie=$e-Te+Math.min(ge,Te+le+1);let ke=0;for(let De=Ne;De<Ie;De++)ke+=Math.pow(ye[De],2);ke=he*ke+ue;for(let De=Ne;De<Ie;De++){let Oe=-2*he*fe*ye[De]*be[$e]/ke;$e===De&&(Oe+=Math.pow(ke,-fe)),Oe*=ve[$e],Ce[De]+=Oe}}return ne.makeTensorInfo(ce.shape,oe.dtype,Ce)}const lRNGradConfig={kernelName:LRNGrad,backendName:"cpu",kernelFunc:lRNGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function max$2(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{reductionIndices:ae,keepDims:ce}=ie,le=ne;let ue=oe.shape;const he=ue.length,fe=parseAxisParam(ae,ue);let me=fe;const ge=getAxesPermutation(me,he);let ve=le.data.get(oe.dataId).values;if(ge!=null){const Ne=new Array(he);for(let Ie=0;Ie<Ne.length;Ie++)Ne[Ie]=ue[ge[Ie]];ve=transposeImpl$1(ve,ue,oe.dtype,ge,Ne),me=getInnerMostAxes(me.length,he),ue=Ne}assertNotComplex$1(oe,"max"),assertAxesAreInnerMostDims("max",me,he);const[ye,be]=computeOutAndReduceShapes(ue,me),Ce=sizeFromShape(be),Se=maxImpl$1(ve,Ce,ye,oe.dtype),$e=le.write(Se,ye,oe.dtype);let Te=ye;return ce&&(Te=expandShapeToKeepDim(ye,fe)),{dataId:$e,shape:Te,dtype:oe.dtype}}const maxConfig$1={kernelName:Max,backendName:"cpu",kernelFunc:max$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee;assertNotComplex$1(oe,"maxPool");const{filterSize:ae,strides:ce,pad:le,dimRoundingMode:ue}=ie,he=1;assert$2(eitherStridesOrDilationsAreOne(ce,he),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${ce} and dilations '${he}'`);const fe=computePool2DInfo(oe.shape,ae,ce,he,le,ue);let me;if(fe.filterWidth===1&&fe.filterHeight===1&&arraysEqual(fe.inShape,fe.outShape))me=identity$4({inputs:{x:oe},backend:ne});else{const ge=ne.data.get(oe.dataId).values,ve=computeStrides(oe.shape),ye=pool$1(ge,oe.shape,oe.dtype,ve,fe,"max");me=ne.makeTensorInfo(fe.outShape,oe.dtype,ye.values)}return me}const maxPoolConfig$1={kernelName:MaxPool,backendName:"cpu",kernelFunc:maxPool$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3D(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{filterSize:ae,strides:ce,pad:le,dimRoundingMode:ue,dataFormat:he,dilations:fe}=ie;assertNotComplex$1(oe,"maxPool3d");let me=fe;me==null&&(me=[1,1,1]);const ge=computePool3DInfo(oe.shape,ae,ce,me,le,ue,he),ve=ne.data.get(oe.dataId).values,ye=pool3d(ve,oe.shape,oe.dtype,computeStrides(oe.shape),ge,"max");return ne.makeTensorInfo(ye.shape,"float32",ye.values)}const maxPool3DConfig$1={kernelName:MaxPool3D,backendName:"cpu",kernelFunc:maxPool3D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3DGrad$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,input:ae}=ee,{filterSize:ce,strides:le,pad:ue,dilations:he,dimRoundingMode:fe}=ie;assertNotComplex$1([oe,ae],"maxPool3DGrad");const me=computePool3DInfo(ae.shape,ce,le,he,ue,fe),ge=ne.bufferSync(ae),ve=maxPool3dPositions(ge,me),ye=me.strideDepth,be=me.strideHeight,Ce=me.strideWidth,Se=me.dilationDepth,$e=me.dilationHeight,Te=me.dilationWidth,Ne=me.effectiveFilterDepth,Ie=me.effectiveFilterHeight,ke=me.effectiveFilterWidth,De=Ne-1-me.padInfo.front,Oe=ke-1-me.padInfo.left,Be=Ie-1-me.padInfo.top,Me=buffer$1(ae.shape,"float32"),Le=ne.bufferSync(oe);for(let je=0;je<me.batchSize;++je)for(let ze=0;ze<me.inChannels;++ze)for(let Ve=0;Ve<me.inDepth;++Ve)for(let He=0;He<me.inHeight;++He)for(let We=0;We<me.inWidth;++We){const Ye=Ve-De,Ue=He-Be,Ke=We-Oe;let Xe=0;for(let Vt=0;Vt<Ne;Vt+=Se){const Wt=(Ye+Vt)/ye;if(!(Wt<0||Wt>=me.outDepth||Math.floor(Wt)!==Wt))for(let Kt=0;Kt<Ie;Kt+=$e){const tn=(Ue+Kt)/be;if(!(tn<0||tn>=me.outHeight||Math.floor(tn)!==tn))for(let Xt=0;Xt<ke;Xt+=Te){const dn=(Ke+Xt)/Ce;if(dn<0||dn>=me.outWidth||Math.floor(dn)!==dn)continue;const nn=Ne*Ie*ke-1-ve.get(je,Wt,tn,dn,ze),rn=Vt*Ie*ke+Kt*ke+Xt,vn=nn===rn?1:0;if(vn===0)continue;const yn=Le.get(je,Wt,tn,dn,ze);Xe+=yn*vn}}}Me.set(Xe,je,Ve,He,We,ze)}return ne.makeTensorInfo(Me.shape,Me.dtype,Me.values)}const maxPool3DGradConfig={kernelName:MaxPool3DGrad,backendName:"cpu",kernelFunc:maxPool3DGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolGrad$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,input:ae,output:ce}=ee,le=ae;assertNotComplex$1([ae,ce],"maxPoolGrad");const{filterSize:ue,strides:he,pad:fe,dimRoundingMode:me}=ie,ge=computePool2DInfo(le.shape,ue,he,1,fe,me),ve=ne.data.get(le.dataId).values,ye=buffer$1(ge.outShape,le.dtype,maxPoolPositions(ve,le.shape,le.dtype,ge).values),be=ge.strideHeight,Ce=ge.strideWidth,Se=ge.dilationHeight,$e=ge.dilationWidth,Te=ge.effectiveFilterHeight,Ne=ge.effectiveFilterWidth,Ie=Ne-1-ge.padInfo.left,ke=Te-1-ge.padInfo.top,De=buffer$1(le.shape,"float32"),Oe=ne.data.get(oe.dataId).values,Be=buffer$1(oe.shape,"float32",Oe);for(let Me=0;Me<ge.batchSize;++Me)for(let Le=0;Le<ge.inChannels;++Le)for(let je=0;je<ge.inHeight;++je)for(let ze=0;ze<ge.inWidth;++ze){const Ve=je-ke,He=ze-Ie;let We=0;for(let Ye=0;Ye<Te;Ye+=Se){const Ue=(Ve+Ye)/be;if(!(Ue<0||Ue>=ge.outHeight||Math.floor(Ue)!==Ue))for(let Ke=0;Ke<Ne;Ke+=$e){const Xe=(He+Ke)/Ce;if(Xe<0||Xe>=ge.outWidth||Math.floor(Xe)!==Xe)continue;const Vt=Te*Ne-1-ye.get(Me,Ue,Xe,Le),Wt=Ye*Ne+Ke,Kt=Vt===Wt?1:0;if(Kt===0)continue;const tn=Be.get(Me,Ue,Xe,Le);We+=tn*Kt}}De.set(We,Me,je,ze,Le)}return ne.makeTensorInfo(De.shape,De.dtype,De.values)}const maxPoolGradConfig$1={kernelName:MaxPoolGrad,backendName:"cpu",kernelFunc:maxPoolGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolWithArgmaxImpl$1(re,ee,ne,ie,oe){const ae=computeStrides(ee),ce=pool$1(re,ee,ne,ae,oe,"max"),le=maxPoolPositions(re,ee,ne,oe,!0,ie);return[ce.values,le.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPoolWithArgmaxConfig$1={kernelName:MaxPoolWithArgmax,backendName:"cpu",kernelFunc:({inputs:re,attrs:ee,backend:ne})=>{const{x:ie}=re,{filterSize:oe,strides:ae,pad:ce,includeBatchInIndex:le}=ee,ue=ne;assertNotComplex$1(ie,"MaxPoolWithArgmax");const he=ue.data.get(ie.dataId).values,fe=computePool2DInfo(ie.shape,oe,ae,[1,1],ce),[me,ge]=maxPoolWithArgmaxImpl$1(he,ie.shape,ie.dtype,le,fe),ve=ue.write(me,fe.outShape,ie.dtype),ye=ue.write(ge,fe.outShape,ie.dtype);return[{dataId:ve,shape:fe.outShape,dtype:ie.dtype},{dataId:ye,shape:fe.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sum$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,keepDims:ce}=ie;assertNotComplex$1(oe,"sum");let le;oe.dtype==="bool"?le=cast$1({inputs:{x:oe},backend:ne,attrs:{dtype:"int32"}}):le=identity$4({inputs:{x:oe},backend:ne});const ue=le.shape.length,he=parseAxisParam(ae,le.shape),fe=getAxesPermutation(he,ue);let me=he,ge=le;fe!=null&&(ge=transpose$1({inputs:{x:le},backend:ne,attrs:{perm:fe}}),me=getInnerMostAxes(me.length,ue)),assertAxesAreInnerMostDims("sum",me,ge.shape.length);const[ve,ye]=computeOutAndReduceShapes(ge.shape,me),be=upcastType(ge.dtype,"int32");let Ce=zeros(ne,ve,be);const Se=sizeFromShape(ye),$e=ne.data.get(Ce.dataId).values,Te=ne.data.get(ge.dataId).values;for(let Ne=0;Ne<$e.length;++Ne){const Ie=Ne*Se;let ke=0;for(let De=0;De<Se;++De)ke+=Te[Ie+De];$e[Ne]=ke}if(ce){const Ne=expandShapeToKeepDim(Ce.shape,he),Ie=Ce;Ce=reshape$1({inputs:{x:Ce},backend:ne,attrs:{shape:Ne}}),ne.disposeIntermediateTensorInfo(Ie)}return ne.disposeIntermediateTensorInfo(le),fe!=null&&ne.disposeIntermediateTensorInfo(ge),Ce}const sumConfig$1={kernelName:Sum,backendName:"cpu",kernelFunc:sum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mean(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,keepDims:ce}=ie,le=parseAxisParam(ae,oe.shape),he=computeOutAndReduceShapes(oe.shape,le)[1],fe=sizeFromShape(he),me=[],ge=ne.makeTensorInfo([],"float32",new Float32Array([fe]));me.push(ge);const ve=cast$1({inputs:{x:oe},backend:ne,attrs:{dtype:"float32"}});me.push(ve);const ye=div({inputs:{a:ve,b:ge},backend:ne});me.push(ye);const be=sum$1({inputs:{x:ye},backend:ne,attrs:{axis:ae,keepDims:ce}});return me.forEach(Ce=>ne.disposeIntermediateTensorInfo(Ce)),be}const meanConfig$1={kernelName:Mean,backendName:"cpu",kernelFunc:mean};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function min$2(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,keepDims:ce}=ie;assertNotComplex$1(oe,"min");const le=parseAxisParam(ae,oe.shape);let ue=le;const he=getAxesPermutation(ue,oe.shape.length);let fe=oe;he!=null&&(fe=transpose$1({inputs:{x:oe},backend:ne,attrs:{perm:he}}),ue=getInnerMostAxes(ue.length,oe.shape.length)),assertAxesAreInnerMostDims("min",ue,fe.shape.length);const[me,ge]=computeOutAndReduceShapes(fe.shape,ue),ve=sizeFromShape(ge),ye=makeZerosTypedArray(sizeFromShape(me),fe.dtype),be=ne.data.get(fe.dataId).values;for(let Se=0;Se<ye.length;++Se){const $e=Se*ve;let Te=be[$e];for(let Ne=0;Ne<ve;++Ne){const Ie=be[$e+Ne];Ie<Te&&(Te=Ie)}ye[Se]=Te}he!=null&&ne.disposeIntermediateTensorInfo(fe);const Ce=ne.makeTensorInfo(me,fe.dtype,ye);if(ce){const Se=expandShapeToKeepDim(me,le),$e=reshape$1({inputs:{x:Ce},backend:ne,attrs:{shape:Se}});return ne.disposeIntermediateTensorInfo(Ce),$e}return Ce}const minConfig$1={kernelName:Min,backendName:"cpu",kernelFunc:min$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mirrorPad(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{paddings:ae,mode:ce}=ie;assertNotComplex$1(oe,"mirrorPad");const le=ae.map((Te,Ne)=>Te[0]+oe.shape[Ne]+Te[1]),ue=ae.map(Te=>Te[0]),he=ae.map((Te,Ne)=>Te[0]+oe.shape[Ne]),fe=ce==="reflect"?0:1,me=ne.data.get(oe.dataId).values,ge=oe.shape.length,ve=computeStrides(oe.shape),ye=sizeFromShape(le),be=le.length,Ce=computeStrides(le),Se=getTypedArrayFromDType(oe.dtype,ye);for(let Te=0;Te<ye;Te++){let Ne=indexToLoc(Te,be,Ce);for(let ke=0;ke<be;ke++)Ne[ke]<ue[ke]?Ne[ke]=ue[ke]*2-Ne[ke]-fe:Ne[ke]>=he[ke]&&(Ne[ke]=(he[ke]-1)*2-Ne[ke]+fe);Ne=Ne.map((ke,De)=>ke-ue[De]);const Ie=locToIndex(Ne,ge,ve);Se[Te]=me[Ie]}return{dataId:ne.write(Se,le,oe.dtype),shape:le,dtype:oe.dtype}}const mirrorPadConfig$1={kernelName:MirrorPad,backendName:"cpu",kernelFunc:mirrorPad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const modImpl=createSimpleBinaryKernelImpl((re,ee)=>{const ne=re%ee;return re<0&&ee<0||re>=0&&ee>=0?ne:(ne+ee)%ee}),mod$1=binaryKernelFunc$1(Mod,modImpl),modConfig$1={kernelName:Mod,backendName:"cpu",kernelFunc:mod$1};var alea$1={exports:{}};alea$1.exports;(function(re){(function(ee,ne,ie){function oe(ue){var he=this,fe=le();he.next=function(){var me=2091639*he.s0+he.c*23283064365386963e-26;return he.s0=he.s1,he.s1=he.s2,he.s2=me-(he.c=me|0)},he.c=1,he.s0=fe(" "),he.s1=fe(" "),he.s2=fe(" "),he.s0-=fe(ue),he.s0<0&&(he.s0+=1),he.s1-=fe(ue),he.s1<0&&(he.s1+=1),he.s2-=fe(ue),he.s2<0&&(he.s2+=1),fe=null}function ae(ue,he){return he.c=ue.c,he.s0=ue.s0,he.s1=ue.s1,he.s2=ue.s2,he}function ce(ue,he){var fe=new oe(ue),me=he&&he.state,ge=fe.next;return ge.int32=function(){return fe.next()*4294967296|0},ge.double=function(){return ge()+(ge()*2097152|0)*11102230246251565e-32},ge.quick=ge,me&&(typeof me=="object"&&ae(me,fe),ge.state=function(){return ae(fe,{})}),ge}function le(){var ue=4022871197,he=function(fe){fe=fe.toString();for(var me=0;me<fe.length;me++){ue+=fe.charCodeAt(me);var ge=.02519603282416938*ue;ue=ge>>>0,ge-=ue,ge*=ue,ue=ge>>>0,ge-=ue,ue+=ge*4294967296}return(ue>>>0)*23283064365386963e-26};return he}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.alea=ce})(commonjsGlobal,re,!1)})(alea$1);var aleaExports=alea$1.exports,xor128$1={exports:{}};xor128$1.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this,he="";ue.x=0,ue.y=0,ue.z=0,ue.w=0,ue.next=function(){var me=ue.x^ue.x<<11;return ue.x=ue.y,ue.y=ue.z,ue.z=ue.w,ue.w^=ue.w>>>19^me^me>>>8},le===(le|0)?ue.x=le:he+=le;for(var fe=0;fe<he.length+64;fe++)ue.x^=he.charCodeAt(fe)|0,ue.next()}function ae(le,ue){return ue.x=le.x,ue.y=le.y,ue.z=le.z,ue.w=le.w,ue}function ce(le,ue){var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(typeof fe=="object"&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.xor128=ce})(commonjsGlobal,re,!1)})(xor128$1);var xor128Exports=xor128$1.exports,xorwow$1={exports:{}};xorwow$1.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this,he="";ue.next=function(){var me=ue.x^ue.x>>>2;return ue.x=ue.y,ue.y=ue.z,ue.z=ue.w,ue.w=ue.v,(ue.d=ue.d+362437|0)+(ue.v=ue.v^ue.v<<4^(me^me<<1))|0},ue.x=0,ue.y=0,ue.z=0,ue.w=0,ue.v=0,le===(le|0)?ue.x=le:he+=le;for(var fe=0;fe<he.length+64;fe++)ue.x^=he.charCodeAt(fe)|0,fe==he.length&&(ue.d=ue.x<<10^ue.x>>>4),ue.next()}function ae(le,ue){return ue.x=le.x,ue.y=le.y,ue.z=le.z,ue.w=le.w,ue.v=le.v,ue.d=le.d,ue}function ce(le,ue){var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(typeof fe=="object"&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.xorwow=ce})(commonjsGlobal,re,!1)})(xorwow$1);var xorwowExports=xorwow$1.exports,xorshift7$1={exports:{}};xorshift7$1.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this;ue.next=function(){var fe=ue.x,me=ue.i,ge,ve;return ge=fe[me],ge^=ge>>>7,ve=ge^ge<<24,ge=fe[me+1&7],ve^=ge^ge>>>10,ge=fe[me+3&7],ve^=ge^ge>>>3,ge=fe[me+4&7],ve^=ge^ge<<7,ge=fe[me+7&7],ge=ge^ge<<13,ve^=ge^ge<<9,fe[me]=ve,ue.i=me+1&7,ve};function he(fe,me){var ge,ve=[];if(me===(me|0))ve[0]=me;else for(me=""+me,ge=0;ge<me.length;++ge)ve[ge&7]=ve[ge&7]<<15^me.charCodeAt(ge)+ve[ge+1&7]<<13;for(;ve.length<8;)ve.push(0);for(ge=0;ge<8&&ve[ge]===0;++ge);for(ge==8?ve[7]=-1:ve[ge],fe.x=ve,fe.i=0,ge=256;ge>0;--ge)fe.next()}he(ue,le)}function ae(le,ue){return ue.x=le.x.slice(),ue.i=le.i,ue}function ce(le,ue){le==null&&(le=+new Date);var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(fe.x&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.xorshift7=ce})(commonjsGlobal,re,!1)})(xorshift7$1);var xorshift7Exports=xorshift7$1.exports,xor4096$1={exports:{}};xor4096$1.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this;ue.next=function(){var fe=ue.w,me=ue.X,ge=ue.i,ve,ye;return ue.w=fe=fe+1640531527|0,ye=me[ge+34&127],ve=me[ge=ge+1&127],ye^=ye<<13,ve^=ve<<17,ye^=ye>>>15,ve^=ve>>>12,ye=me[ge]=ye^ve,ue.i=ge,ye+(fe^fe>>>16)|0};function he(fe,me){var ge,ve,ye,be,Ce,Se=[],$e=128;for(me===(me|0)?(ve=me,me=null):(me=me+"\0",ve=0,$e=Math.max($e,me.length)),ye=0,be=-32;be<$e;++be)me&&(ve^=me.charCodeAt((be+32)%me.length)),be===0&&(Ce=ve),ve^=ve<<10,ve^=ve>>>15,ve^=ve<<4,ve^=ve>>>13,be>=0&&(Ce=Ce+1640531527|0,ge=Se[be&127]^=ve+Ce,ye=ge==0?ye+1:0);for(ye>=128&&(Se[(me&&me.length||0)&127]=-1),ye=127,be=4*128;be>0;--be)ve=Se[ye+34&127],ge=Se[ye=ye+1&127],ve^=ve<<13,ge^=ge<<17,ve^=ve>>>15,ge^=ge>>>12,Se[ye]=ve^ge;fe.w=Ce,fe.X=Se,fe.i=ye}he(ue,le)}function ae(le,ue){return ue.i=le.i,ue.w=le.w,ue.X=le.X.slice(),ue}function ce(le,ue){le==null&&(le=+new Date);var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(fe.X&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.xor4096=ce})(commonjsGlobal,re,!1)})(xor4096$1);var xor4096Exports=xor4096$1.exports,tychei$1={exports:{}};tychei$1.exports;(function(re){(function(ee,ne,ie){function oe(le){var ue=this,he="";ue.next=function(){var me=ue.b,ge=ue.c,ve=ue.d,ye=ue.a;return me=me<<25^me>>>7^ge,ge=ge-ve|0,ve=ve<<24^ve>>>8^ye,ye=ye-me|0,ue.b=me=me<<20^me>>>12^ge,ue.c=ge=ge-ve|0,ue.d=ve<<16^ge>>>16^ye,ue.a=ye-me|0},ue.a=0,ue.b=0,ue.c=-1640531527,ue.d=1367130551,le===Math.floor(le)?(ue.a=le/4294967296|0,ue.b=le|0):he+=le;for(var fe=0;fe<he.length+20;fe++)ue.b^=he.charCodeAt(fe)|0,ue.next()}function ae(le,ue){return ue.a=le.a,ue.b=le.b,ue.c=le.c,ue.d=le.d,ue}function ce(le,ue){var he=new oe(le),fe=ue&&ue.state,me=function(){return(he.next()>>>0)/4294967296};return me.double=function(){do var ge=he.next()>>>11,ve=(he.next()>>>0)/4294967296,ye=(ge+ve)/(1<<21);while(ye===0);return ye},me.int32=he.next,me.quick=me,fe&&(typeof fe=="object"&&ae(fe,he),me.state=function(){return ae(he,{})}),me}ne&&ne.exports?ne.exports=ce:ie&&ie.amd?ie(function(){return ce}):this.tychei=ce})(commonjsGlobal,re,!1)})(tychei$1);var tycheiExports=tychei$1.exports,seedrandom$1={exports:{}};(function(re){(function(ee,ne){var ie=256,oe=6,ae=52,ce="random",le=ne.pow(ie,oe),ue=ne.pow(2,ae),he=ue*2,fe=ie-1,me;function ge(Te,Ne,Ie){var ke=[];Ne=Ne==!0?{entropy:!0}:Ne||{};var De=Ce(be(Ne.entropy?[Te,$e(ee)]:Te??Se(),3),ke),Oe=new ve(ke),Be=function(){for(var Me=Oe.g(oe),Le=le,je=0;Me<ue;)Me=(Me+je)*ie,Le*=ie,je=Oe.g(1);for(;Me>=he;)Me/=2,Le/=2,je>>>=1;return(Me+je)/Le};return Be.int32=function(){return Oe.g(4)|0},Be.quick=function(){return Oe.g(4)/4294967296},Be.double=Be,Ce($e(Oe.S),ee),(Ne.pass||Ie||function(Me,Le,je,ze){return ze&&(ze.S&&ye(ze,Oe),Me.state=function(){return ye(Oe,{})}),je?(ne[ce]=Me,Le):Me})(Be,De,"globalThis"in Ne?Ne.global:this==ne,Ne.state)}ne["seed"+ce]=ge;function ve(Te){var Ne,Ie=Te.length,ke=this,De=0,Oe=ke.i=ke.j=0,Be=ke.S=[];for(Ie||(Te=[Ie++]);De<ie;)Be[De]=De++;for(De=0;De<ie;De++)Be[De]=Be[Oe=fe&Oe+Te[De%Ie]+(Ne=Be[De])],Be[Oe]=Ne;(ke.g=function(Me){for(var Le,je=0,ze=ke.i,Ve=ke.j,He=ke.S;Me--;)Le=He[ze=fe&ze+1],je=je*ie+He[fe&(He[ze]=He[Ve=fe&Ve+Le])+(He[Ve]=Le)];return ke.i=ze,ke.j=Ve,je})(ie)}function ye(Te,Ne){return Ne.i=Te.i,Ne.j=Te.j,Ne.S=Te.S.slice(),Ne}function be(Te,Ne){var Ie=[],ke=typeof Te,De;if(Ne&&ke=="object")for(De in Te)try{Ie.push(be(Te[De],Ne-1))}catch{}return Ie.length?Ie:ke=="string"?Te:Te+"\0"}function Ce(Te,Ne){for(var Ie=Te+"",ke,De=0;De<Ie.length;)Ne[fe&De]=fe&(ke^=Ne[fe&De]*19)+Ie.charCodeAt(De++);return $e(Ne)}function Se(){try{var Te;return me&&(Te=me.randomBytes)?Te=Te(ie):(Te=new Uint8Array(ie),(globalThis.crypto||globalThis.msCrypto).getRandomValues(Te)),$e(Te)}catch{var Ne=globalThis.navigator,Ie=Ne&&Ne.plugins;return[+new Date,globalThis,Ie,globalThis.screen,$e(ee)]}}function $e(Te){return String.fromCharCode.apply(0,Te)}if(Ce(ne.random(),ee),re.exports){re.exports=ge;try{me=require$$0$1}catch{}}})([],Math)})(seedrandom$1);var seedrandomExports=seedrandom$1.exports,alea=aleaExports,xor128=xor128Exports,xorwow=xorwowExports,xorshift7=xorshift7Exports,xor4096=xor4096Exports,tychei=tycheiExports,sr=seedrandomExports;sr.alea=alea;sr.xor128=xor128;sr.xorwow=xorwow;sr.xorshift7=xorshift7;sr.xor4096=xor4096;sr.tychei=tychei;var seedrandom=sr;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmax$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{logits:oe}=ee,{dim:ae}=ie,ce=oe.shape.length;let le=ae;if(le===-1&&(le=ce-1),le!==ce-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${ce} and dim was ${le}`);const ue=parseAxisParam([le],oe.shape),he=max$2({inputs:{x:oe},backend:ne,attrs:{reductionIndices:ue,keepDims:!1}}),fe=expandShapeToKeepDim(he.shape,ue),me=reshape$1({inputs:{x:he},backend:ne,attrs:{shape:fe}}),ge=sub$1({inputs:{a:oe,b:me},backend:ne}),ve=exp$1({inputs:{x:ge},backend:ne}),ye=sum$1({inputs:{x:ve},backend:ne,attrs:{axis:ue,keepDims:!1}}),be=reshape$1({inputs:{x:ye},backend:ne,attrs:{shape:fe}}),Ce=div({inputs:{a:ve,b:be},backend:ne});return ne.disposeIntermediateTensorInfo(he),ne.disposeIntermediateTensorInfo(me),ne.disposeIntermediateTensorInfo(ge),ne.disposeIntermediateTensorInfo(ve),ne.disposeIntermediateTensorInfo(ye),ne.disposeIntermediateTensorInfo(be),Ce}const softmaxConfig$1={kernelName:Softmax$2,backendName:"cpu",kernelFunc:softmax$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function multinomial$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{logits:oe}=ee,{numSamples:ae,seed:ce,normalized:le}=ie;assertNotComplex$1(oe,"multinomial");const ue=le?oe:softmax$1({inputs:{logits:oe},backend:ne,attrs:{dim:-1}}),he=ue.shape[0],fe=ue.shape[1],me=ne.data.get(ue.dataId).values,ge=[he,ae],ve=makeZerosTypedArray(sizeFromShape(ge),"int32");for(let ye=0;ye<he;++ye){const be=ye*fe,Ce=new Float32Array(fe-1);Ce[0]=me[be];for(let Te=1;Te<Ce.length;++Te)Ce[Te]=Ce[Te-1]+me[be+Te];const Se=seedrandom.alea(ce.toString()),$e=ye*ae;for(let Te=0;Te<ae;++Te){const Ne=Se();ve[$e+Te]=Ce.length;for(let Ie=0;Ie<Ce.length;Ie++)if(Ne<Ce[Ie]){ve[$e+Te]=Ie;break}}}return le||ne.disposeIntermediateTensorInfo(ue),ne.makeTensorInfo(ge,"int32",ve)}const multinomialConfig$1={kernelName:Multinomial,backendName:"cpu",kernelFunc:multinomial$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV3Impl$1=nonMaxSuppressionV3Impl$2;function nonMaxSuppressionV3$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{boxes:oe,scores:ae}=ee,{maxOutputSize:ce,iouThreshold:le,scoreThreshold:ue}=ie;assertNotComplex$1(oe,"NonMaxSuppression");const he=ne.data.get(oe.dataId).values,fe=ne.data.get(ae.dataId).values,{selectedIndices:me}=nonMaxSuppressionV3Impl$1(he,fe,ce,le,ue);return ne.makeTensorInfo([me.length],"int32",new Int32Array(me))}const nonMaxSuppressionV3Config$1={kernelName:NonMaxSuppressionV3,backendName:"cpu",kernelFunc:nonMaxSuppressionV3$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV4Impl$1=nonMaxSuppressionV4Impl$2;function nonMaxSuppressionV4$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{boxes:oe,scores:ae}=ee,{maxOutputSize:ce,iouThreshold:le,scoreThreshold:ue,padToMaxOutputSize:he}=ie;assertNotComplex$1(oe,"NonMaxSuppressionPadded");const fe=ne.data.get(oe.dataId).values,me=ne.data.get(ae.dataId).values,{selectedIndices:ge,validOutputs:ve}=nonMaxSuppressionV4Impl$1(fe,me,ce,le,ue,he);return[ne.makeTensorInfo([ge.length],"int32",new Int32Array(ge)),ne.makeTensorInfo([],"int32",new Int32Array([ve]))]}const nonMaxSuppressionV4Config$1={kernelName:NonMaxSuppressionV4,backendName:"cpu",kernelFunc:nonMaxSuppressionV4$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV5Impl$1=nonMaxSuppressionV5Impl$2;function nonMaxSuppressionV5$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{boxes:oe,scores:ae}=ee,{maxOutputSize:ce,iouThreshold:le,scoreThreshold:ue,softNmsSigma:he}=ie;assertNotComplex$1(oe,"NonMaxSuppressionWithScore");const fe=ne.data.get(oe.dataId).values,me=ne.data.get(ae.dataId).values,ge=ce,ve=le,ye=ue,be=he,{selectedIndices:Ce,selectedScores:Se}=nonMaxSuppressionV5Impl$1(fe,me,ge,ve,ye,be);return[ne.makeTensorInfo([Ce.length],"int32",new Int32Array(Ce)),ne.makeTensorInfo([Se.length],"float32",new Float32Array(Se))]}const nonMaxSuppressionV5Config$1={kernelName:NonMaxSuppressionV5,backendName:"cpu",kernelFunc:nonMaxSuppressionV5$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oneHot$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{indices:oe}=ee,{depth:ae,onValue:ce,offValue:le}=ie;assertNotComplex$1(oe,"oneHot");const ue=sizeFromShape(oe.shape),he=new Float32Array(ue*ae);he.fill(le);const fe=ne.data.get(oe.dataId).values;for(let me=0;me<ue;++me)fe[me]>=0&&fe[me]<ae&&(he[me*ae+fe[me]]=ce);return ne.makeTensorInfo([...oe.shape,ae],"int32",he)}const oneHotConfig$1={kernelName:OneHot,backendName:"cpu",kernelFunc:oneHot$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zerosLike$1(re){const{inputs:ee,backend:ne}=re,{x:ie}=ee;if(ie.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(ie.dtype==="complex64"){const oe=real$1({inputs:{input:ie},backend:ne}),ae=zerosLike$1({inputs:{x:oe},backend:ne}),ce=imag$1({inputs:{input:ie},backend:ne}),le=zerosLike$1({inputs:{x:ce},backend:ne}),ue=complex$1({inputs:{real:ae,imag:le},backend:ne});return ne.disposeIntermediateTensorInfo(oe),ne.disposeIntermediateTensorInfo(ae),ne.disposeIntermediateTensorInfo(ce),ne.disposeIntermediateTensorInfo(le),ue}else return fill$2({backend:ne,attrs:{shape:ie.shape,value:0,dtype:ie.dtype}})}const zerosLikeConfig$1={kernelName:ZerosLike,backendName:"cpu",kernelFunc:zerosLike$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function onesLike$1(re){const{inputs:ee,backend:ne}=re,{x:ie}=ee;if(ie.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(ie.dtype==="complex64"){const oe=real$1({inputs:{input:ie},backend:ne}),ae=onesLike$1({inputs:{x:oe},backend:ne}),ce=imag$1({inputs:{input:ie},backend:ne}),le=zerosLike$1({inputs:{x:ce},backend:ne}),ue=complex$1({inputs:{real:ae,imag:le},backend:ne});return ne.disposeIntermediateTensorInfo(oe),ne.disposeIntermediateTensorInfo(ae),ne.disposeIntermediateTensorInfo(ce),ne.disposeIntermediateTensorInfo(le),ue}else return fill$2({backend:ne,attrs:{shape:ie.shape,value:1,dtype:ie.dtype}})}const onesLikeConfig$1={kernelName:OnesLike,backendName:"cpu",kernelFunc:onesLike$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pack$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{axis:oe}=ie;if(ee.length===1)return expandDims$1({inputs:{input:ee[0]},backend:ne,attrs:{dim:oe}});const ae=ee[0].shape,ce=ee[0].dtype;ee.forEach(fe=>{assertShapesMatch(ae,fe.shape,"All tensors passed to stack must have matching shapes"),assert$2(ce===fe.dtype,()=>"All tensors passed to stack must have matching dtypes")});const le=[],ue=ee.map(fe=>{const me=expandDims$1({inputs:{input:fe},backend:ne,attrs:{dim:oe}});return le.push(me),me}),he=concat$1({inputs:ue,backend:ne,attrs:{axis:oe}});return le.forEach(fe=>ne.disposeIntermediateTensorInfo(fe)),he}const packConfig$1={kernelName:Pack,backendName:"cpu",kernelFunc:pack$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function padV2$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{paddings:ae,constantValue:ce}=ie;assertNotComplex$1(oe,"pad");const le=ae.map(($e,Te)=>$e[0]+oe.shape[Te]+$e[1]),ue=ae.map($e=>$e[0]),he=ne.data.get(oe.dataId).values,fe=sizeFromShape(oe.shape),me=oe.shape.length,ge=computeStrides(oe.shape),ve=sizeFromShape(le),ye=le.length,be=computeStrides(le),Ce=getTypedArrayFromDType(oe.dtype,ve);ce!==0&&Ce.fill(ce);for(let $e=0;$e<fe;$e++){const Ne=indexToLoc($e,me,ge).map((ke,De)=>ke+ue[De]),Ie=locToIndex(Ne,ye,be);Ce[Ie]=he[$e]}return{dataId:ne.write(Ce,le,oe.dtype),shape:le,dtype:oe.dtype}}const padV2Config$1={kernelName:PadV2,backendName:"cpu",kernelFunc:padV2$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const powImpl=createSimpleBinaryKernelImpl((re,ee)=>Math.pow(re,ee)),pow$1=binaryKernelFunc$1(Pow$1,powImpl),powConfig$1={kernelName:Pow$1,backendName:"cpu",kernelFunc:pow$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function range$2(re){const{backend:ee,attrs:ne}=re,{start:ie,stop:oe,dtype:ae,step:ce}=ne,le=rangeImpl(ie,oe,ce,ae);return ee.makeTensorInfo([le.length],ae,le)}const rangeConfig$1={kernelName:Range,backendName:"cpu",kernelFunc:range$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const reciprocal$1=unaryKernelFunc$1(Reciprocal,re=>1/re),reciprocalConfig$1={kernelName:Reciprocal,backendName:"cpu",kernelFunc:reciprocal$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinear$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{images:oe}=ee,{alignCorners:ae,halfPixelCenters:ce,size:le}=ie;assertNotComplex$1(oe,"resizeBilinear");const ue=computeStrides(oe.shape),[he,fe]=le,[me,ge,ve,ye]=oe.shape,be=ne.data.get(oe.dataId).values,Ce=new Float32Array(sizeFromShape([me,he,fe,ye])),Se=[ae&&he>1?ge-1:ge,ae&&fe>1?ve-1:ve],$e=[ae&&he>1?he-1:he,ae&&fe>1?fe-1:fe];let Te=0;const Ne=Se[0]/$e[0],Ie=Se[1]/$e[1];for(let ke=0;ke<me;ke++)for(let De=0;De<he;De++){let Oe;ce?Oe=Ne*(De+.5)-.5:Oe=Ne*De;const Be=Math.max(0,Math.floor(Oe)),Me=Oe-Be,Le=Math.min(ge-1,Math.ceil(Oe)),je=ke*ue[0]+Be*ue[1],ze=ke*ue[0]+Le*ue[1];for(let Ve=0;Ve<fe;Ve++){let He;ce?He=Ie*(Ve+.5)-.5:He=Ie*Ve;const We=Math.max(0,Math.floor(He)),Ye=He-We,Ue=Math.min(ve-1,Math.ceil(He)),Ke=je+We*ue[2],Xe=ze+We*ue[2],Vt=je+Ue*ue[2],Wt=ze+Ue*ue[2];for(let Kt=0;Kt<ye;Kt++){const tn=be[Ke+Kt],Xt=be[Xe+Kt],dn=be[Vt+Kt],nn=be[Wt+Kt],rn=tn+(dn-tn)*Ye,vn=Xt+(nn-Xt)*Ye,yn=rn+(vn-rn)*Me;Ce[Te++]=yn}}}return ne.makeTensorInfo([me,he,fe,ye],"float32",Ce)}const resizeBilinearConfig$1={kernelName:ResizeBilinear,backendName:"cpu",kernelFunc:resizeBilinear$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinearGrad$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{images:oe,dy:ae}=ee,{alignCorners:ce}=ie;assertNotComplex$1([ae,oe],"resizeBilinearGrad");const le=computeStrides(oe.shape),[ue,he,fe,me]=oe.shape,[,ge,ve]=ae.shape,ye=new Float32Array(ue*he*fe*me),be=[ce&&ge>1?he-1:he,ce&&ve>1?fe-1:fe],Ce=[ce&&ge>1?ge-1:ge,ce&&ve>1?ve-1:ve],Se=be[0]/Ce[0],$e=be[1]/Ce[1],Te=ne.data.get(ae.dataId).values;let Ne=0;for(let Ie=0;Ie<ue;Ie++){const ke=Ie*le[0];for(let De=0;De<ge;De++){const Oe=De*Se,Be=Math.floor(Oe),Me=Math.min(Math.ceil(Oe),he-1),Le=ke+Be*le[1],je=ke+Me*le[1],ze=Oe-Be,Ve=1-ze;for(let He=0;He<ve;He++){const We=He*$e,Ye=Math.floor(We),Ue=Math.min(Math.ceil(We),fe-1),Ke=We-Ye,Xe=1-Ke,Vt=Le+Ye*le[2],Wt=Le+Ue*le[2],Kt=je+Ye*le[2],tn=je+Ue*le[2],Xt=Ve*Xe,dn=Ve*Ke,nn=ze*Xe,rn=ze*Ke;for(let vn=0;vn<me;vn++){const yn=Te[Ne++];ye[Vt+vn]+=yn*Xt,ye[Wt+vn]+=yn*dn,ye[Kt+vn]+=yn*nn,ye[tn+vn]+=yn*rn}}}}return ne.makeTensorInfo([ue,fe,he,me],"float32",ye)}const resizeBilinearGradConfig$1={kernelName:ResizeBilinearGrad,backendName:"cpu",kernelFunc:resizeBilinearGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighbor$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{images:oe}=ee,{alignCorners:ae,halfPixelCenters:ce,size:le}=ie;assertNotComplex$1(oe,"resizeNearestNeighbor");const ue=computeStrides(oe.shape),[he,fe]=le,[me,ge,ve,ye]=oe.shape,be=ne.data.get(oe.dataId).values,Ce=new Float32Array(me*he*fe*ye),Se=[ae&&he>1?ge-1:ge,ae&&fe>1?ve-1:ve],$e=[ae&&he>1?he-1:he,ae&&fe>1?fe-1:fe],Te=Se[0]/$e[0],Ne=Se[1]/$e[1];let Ie=0;for(let ke=0;ke<me;ke++){const De=ke*ue[0];for(let Oe=0;Oe<he;Oe++){const Be=ce?Te*(Oe+.5):Te*Oe;let Me=Math.min(ge-1,ae?Math.round(Be):Math.floor(Be));ce&&(Me=Math.max(0,Me));const Le=De+Me*ue[1];for(let je=0;je<fe;je++){const ze=ce?Ne*(je+.5):Ne*je;let Ve=Math.min(ve-1,ae?Math.round(ze):Math.floor(ze));ce&&(Ve=Math.max(0,Ve));const He=Le+Ve*ue[2];for(let We=0;We<ye;We++){const Ye=be[He+We];Ce[Ie++]=Ye}}}}return ne.makeTensorInfo([me,he,fe,ye],oe.dtype,Ce)}const resizeNearestNeighborConfig$1={kernelName:ResizeNearestNeighbor,backendName:"cpu",kernelFunc:resizeNearestNeighbor$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighborGrad$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{images:oe,dy:ae}=ee,{alignCorners:ce}=ie;assertNotComplex$1([ae,oe],"resizeNearestNeighborGrad");const le=computeStrides(oe.shape),ue=computeStrides(ae.shape),[he,fe,me,ge]=oe.shape,[,ve,ye]=ae.shape,be=new Float32Array(he*fe*me*ge),Ce=ne.data.get(ae.dataId).values,Se=[ce&&ve>1?fe-1:fe,ce&&ye>1?me-1:me],$e=[ce&&ve>1?ve-1:ve,ce&&ye>1?ye-1:ye],Te=Se[0]/$e[0],Ne=Se[1]/$e[1],Ie=1/Te,ke=1/Ne,De=Math.ceil(Ie)*2+2,Oe=Math.ceil(ke)*2+2;for(let Be=0;Be<he;Be++){const Me=Be*le[0];for(let Le=0;Le<fe;Le++){const je=Me+Le*le[1],ze=Math.floor(Le*Ie),Ve=Math.floor(ze-De/2);for(let He=0;He<me;He++){const We=je+He*le[2],Ye=Math.floor(He*ke),Ue=Math.floor(Ye-Oe/2);for(let Ke=0;Ke<ge;Ke++){let Xe=0;for(let Vt=0;Vt<De;Vt++){const Wt=Vt+Ve;if(Wt<0||Wt>=ve)continue;const Kt=Me+Wt*ue[1],tn=Wt*Te,Xt=Math.min(fe-1,ce?Math.round(tn):Math.floor(tn));if(Le===Xt)for(let dn=0;dn<Oe;dn++){const nn=dn+Ue;if(nn<0||nn>=ye)continue;const rn=Kt+nn*ue[2],vn=nn*Ne,yn=Math.min(me-1,ce?Math.round(vn):Math.floor(vn));He===yn&&(Xe+=Ce[rn+Ke])}}be[We+Ke]=Xe}}}}return ne.makeTensorInfo(oe.shape,oe.dtype,be)}const resizeNearestNeighborGradConfig$1={kernelName:ResizeNearestNeighborGrad,backendName:"cpu",kernelFunc:resizeNearestNeighborGrad$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{dims:ae}=ie;assertNotComplex$1(oe,"reverse");const ce=oe.shape.length,le=parseAxisParam(ae,oe.shape);if(ce===0)return identity$4({inputs:{x:oe},backend:ne});const ue=new TensorBuffer(oe.shape,oe.dtype),he=ne.bufferSync(oe);for(let fe=0;fe<ue.size;fe++){const me=ue.indexToLoc(fe),ge=me.slice();le.forEach(ve=>ge[ve]=oe.shape[ve]-1-ge[ve]),ue.set(he.get(...ge),...me)}return ne.makeTensorInfo(ue.shape,ue.dtype,ue.values)}const reverseConfig$1={kernelName:Reverse,backendName:"cpu",kernelFunc:reverse$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rotateWithOffsetConfig$1={kernelName:RotateWithOffset,backendName:"cpu",kernelFunc:({inputs:re,attrs:ee,backend:ne})=>{const{image:ie}=re,{radians:oe,fillValue:ae,center:ce}=ee,le=ne,ue=getTypedArrayFromDType(ie.dtype,sizeFromShape(ie.shape)),[he,fe,me,ge]=ie.shape,[ve,ye]=getImageCenter(ce,fe,me),be=255,Ce=Math.sin(oe),Se=Math.cos(oe),$e=le.data.get(ie.dataId).values;for(let Ne=0;Ne<he;Ne++){const Ie=Ne*me*fe*ge;for(let ke=0;ke<fe;ke++){const De=ke*(me*ge);for(let Oe=0;Oe<me;Oe++){const Be=Oe*ge;for(let Me=0;Me<ge;Me++){const Le=[he,ke,Oe,Me],je=Le[2],ze=Le[1];let Ve=(je-ve)*Se-(ze-ye)*Ce,He=(je-ve)*Ce+(ze-ye)*Se;Ve=Math.round(Ve+ve),He=Math.round(He+ye);let We=ae;if(typeof ae!="number"&&(Me===3?We=be:We=ae[Me]),Ve>=0&&Ve<me&&He>=0&&He<fe){const Ue=He*(me*ge),Ke=Ve*ge,Xe=Ie+Ue+Ke+Me;We=$e[Xe]}const Ye=Ie+De+Be+Me;ue[Ye]=We}}}}return{dataId:le.write(ue,ie.shape,ie.dtype),shape:ie.shape,dtype:ie.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const round$2=unaryKernelFunc$1(Round,re=>{const ee=Math.floor(re);return re-ee<.5?Math.floor(re):re-ee>.5?Math.ceil(re):ee%2===0?ee:ee+1}),roundConfig$1={kernelName:Round,backendName:"cpu",kernelFunc:round$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterImpl(re,ee,ne,ie,oe,ae,ce,le,ue,he){const fe=[ie/oe,oe],me=re.values,ge=ee.values;if(ie===0)return buffer$1(ne,ee.dtype);const ve=buffer$1(fe,ee.dtype);ve.values.fill(ue);for(let ye=0;ye<ae;ye++){const be=[];let Ce=0;for(let Se=0;Se<ce;Se++){const $e=me[ye*ce+Se];be.push($e),Ce+=$e*le[Se]}if(Ce<0||Ce>=ie/oe)throw new Error(`Invalid indices: ${be} does not index into ${ne}`);for(let Se=0;Se<oe;Se++)he?ve.values[Ce*oe+Se]+=ge[ye*oe+Se]:ve.values[Ce*oe+Se]=ee.rank===0?ge[0]:ge[ye*oe+Se]}return ve}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterNd$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{indices:oe,updates:ae}=ee,{shape:ce}=ie,{sliceRank:le,numUpdates:ue,sliceSize:he,strides:fe,outputSize:me}=calculateShapes(ae,oe,ce),ge=!0,ve=ne.bufferSync(oe),ye=ne.bufferSync(ae),be=scatterImpl(ve,ye,ce,me,he,ue,le,fe,0,ge);return ne.makeTensorInfo(ce,be.dtype,be.values)}const scatterNdConfig$1={kernelName:ScatterNd,backendName:"cpu",kernelFunc:scatterNd$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function select$1(re){const{inputs:ee,backend:ne}=re,{condition:ie,t:oe,e:ae}=ee;assertNotComplex$1([ie,oe,ae],"select");const ce=ie.shape.length,le=ne.data.get(ie.dataId).values,ue=ne.data.get(oe.dataId).values,he=ne.data.get(ae.dataId).values,fe=upcastType(oe.dtype,ae.dtype),me=makeZerosTypedArray(sizeFromShape(oe.shape),fe);let ge=0;const ve=ce===0||ce>1||oe.shape.length===1?1:sizeFromShape(oe.shape.slice(1));for(let ye=0;ye<le.length;ye++)for(let be=0;be<ve;be++)le[ye]===1?me[ge++]=ue[ye]:me[ge++]=he[ye];return ne.makeTensorInfo(oe.shape,fe,me)}const selectConfig$1={kernelName:Select$2,backendName:"cpu",kernelFunc:select$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const scaleAlpha=SELU_SCALEALPHA,scale$1=SELU_SCALE,selu$1=unaryKernelFunc$1(Selu$1,re=>re>=0?scale$1*re:scaleAlpha*(Math.exp(re)-1)),seluConfig$1={kernelName:Selu$1,backendName:"cpu",kernelFunc:selu$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sigmoid$1=unaryKernelFunc$1(Sigmoid$1,re=>1/(1+Math.exp(-re))),sigmoidConfig$1={kernelName:Sigmoid$1,backendName:"cpu",kernelFunc:sigmoid$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sign$2=unaryKernelFunc$1(Sign,re=>re<0?-1:re>0?1:0),signConfig$1={kernelName:Sign,backendName:"cpu",kernelFunc:sign$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sin$1=unaryKernelFunc$1(Sin,re=>Math.sin(re)),sinConfig$1={kernelName:Sin,backendName:"cpu",kernelFunc:sin$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sinh$1=unaryKernelFunc$1(Sinh,re=>Math.sinh(re)),sinhConfig$1={kernelName:Sinh,backendName:"cpu",kernelFunc:sinh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const epsilon=11920928955078125e-23,threshold=Math.log(epsilon)+2,softplus$1=unaryKernelFunc$1(Softplus$1,re=>{const ee=re>-threshold,ne=re<threshold,ie=Math.exp(re);let oe;return ne?oe=ie:ee?oe=re:oe=Math.log(1+ie),oe}),softplusConfig$1={kernelName:Softplus$1,backendName:"cpu",kernelFunc:softplus$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function spaceToBatchND$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{blockShape:ae,paddings:ce}=ie;assertNotComplex$1([oe],"spaceToBatchND");const le=sizeFromShape(ae),ue=[[0,0]];ue.push(...ce);for(let ke=1+ae.length;ke<oe.shape.length;++ke)ue.push([0,0]);const he=padV2Config$1.kernelFunc({inputs:{x:oe},backend:ne,attrs:{paddings:ue,constantValue:0}}),fe=getReshaped(he.shape,ae,le,!1),me=getPermuted(fe.length,ae.length,!1),ge=getReshapedPermuted(he.shape,ae,le,!1),be=reshape$1({inputs:{x:he},backend:ne,attrs:{shape:fe}}),$e=transpose$1({inputs:{x:be},backend:ne,attrs:{perm:me}}),Ie=reshape$1({inputs:{x:$e},backend:ne,attrs:{shape:ge}});return ne.disposeIntermediateTensorInfo(he),ne.disposeIntermediateTensorInfo(be),ne.disposeIntermediateTensorInfo($e),Ie}const spaceToBatchNDConfig$1={kernelName:SpaceToBatchND,backendName:"cpu",kernelFunc:spaceToBatchND$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseToDense$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{sparseIndices:oe,sparseValues:ae,defaultValue:ce}=ee,{outputShape:le}=ie,{sliceRank:ue,numUpdates:he,sliceSize:fe,strides:me,outputSize:ge}=calculateShapes(ae,oe,le),ve=!1,ye=ne.bufferSync(oe),be=ne.bufferSync(ae),Ce=ne.data.get(ce.dataId).values[0],Se=scatterImpl(ye,be,le,ge,fe,he,ue,me,Ce,ve);return ne.makeTensorInfo(le,Se.dtype,Se.values)}const sparseToDenseConfig$1={kernelName:SparseToDense,backendName:"cpu",kernelFunc:sparseToDense$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function splitV$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{numOrSizeSplits:ae,axis:ce}=ie,le=parseAxisParam(ce,oe.shape)[0],ue=prepareSplitSize(oe,ae,le),he=new Array(oe.shape.length).fill(0),fe=oe.shape.slice();return ue.map(me=>{const ge=[...fe];ge[le]=me;const ve=slice$3({inputs:{x:oe},backend:ne,attrs:{begin:he,size:ge}});return he[le]+=me,ve})}const splitVConfig$1={kernelName:SplitV,backendName:"cpu",kernelFunc:splitV$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sqrt$1=unaryKernelFunc$1(Sqrt,re=>Math.sqrt(re)),sqrtConfig$1={kernelName:Sqrt,backendName:"cpu",kernelFunc:sqrt$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const squareConfig$1={kernelName:Square,backendName:"cpu",kernelFunc:({inputs:re,backend:ee})=>{const{x:ne}=re,ie=ee;assertNotComplex$1(ne,"square");const oe=ie.data.get(ne.dataId).values,ae=new Float32Array(oe.length);for(let le=0;le<oe.length;++le){const ue=oe[le];ae[le]=ue*ue}return{dataId:ie.write(ae,ne.shape,ne.dtype),shape:ne.shape,dtype:ne.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const step$1=unaryKernelFunc$1(Step,(re,ee)=>{const ne=ee;return isNaN(re)?NaN:re>0?1:ne.alpha}),stepConfig$1={kernelName:Step,backendName:"cpu",kernelFunc:step$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSlice$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{begin:ae,end:ce,strides:le,beginMask:ue,endMask:he,ellipsisMask:fe,newAxisMask:me,shrinkAxisMask:ge}=ie;assertNotComplex$1(oe,"stridedSlice");const{nonStrided:ve,$begin:ye,$strides:be,size:Ce,newShape:Se,outShape:$e}=sliceInfo(oe.shape,ae,ce,le,ue,he,fe,me,ge),Te=reshape$1({inputs:{x:oe},backend:ne,attrs:{shape:Se}});let Ne;if(ve){const ke=slice$3({inputs:{x:Te},backend:ne,attrs:{begin:ye,size:Ce}});Ne=reshape$1({inputs:{x:ke},backend:ne,attrs:{shape:$e}}),ne.disposeIntermediateTensorInfo(ke)}else if($e.some(ke=>ke===0))Ne=ne.makeTensorInfo($e,oe.dtype,[]);else{const ke=ne.bufferSync(Te),De=stridedSliceImpl($e,ke,be,ye);Ne=ne.makeTensorInfo(De.shape,De.dtype,De.values)}const Ie=reshape$1({inputs:{x:Ne},backend:ne,attrs:{shape:$e}});return ne.disposeIntermediateTensorInfo(Te),ne.disposeIntermediateTensorInfo(Ne),Ie}const stridedSliceConfig$1={kernelName:StridedSlice,backendName:"cpu",kernelFunc:stridedSlice$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tan$1=unaryKernelFunc$1(Tan,re=>Math.tan(re)),tanConfig$1={kernelName:Tan,backendName:"cpu",kernelFunc:tan$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tanh$1=unaryKernelFunc$1(Tanh$1,re=>Math.tanh(re)),tanhConfig$1={kernelName:Tanh$1,backendName:"cpu",kernelFunc:tanh$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tile$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{reps:ae}=ie;assertNotComplex$1(oe,"tile");const ce=tileImpl(ne.bufferSync(oe),ae);return ne.makeTensorInfo(ce.shape,ce.dtype,ce.values)}const tileConfig$1={kernelName:Tile,backendName:"cpu",kernelFunc:tile$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topK$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{k:ae,sorted:ce}=ie;assertNotComplex$1(oe,"topk");const le=ne.data.get(oe.dataId).values,[ue,he]=topKImpl(le,oe.shape,oe.dtype,ae);return[ne.makeTensorInfo(ue.shape,ue.dtype,ue.values),ne.makeTensorInfo(he.shape,he.dtype,he.values)]}const topKConfig$1={kernelName:TopK,backendName:"cpu",kernelFunc:topK$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unique$2(re){const{inputs:ee,attrs:ne,backend:ie}=re,{axis:oe}=ne,{x:ae}=ee;assertNotComplex$1(ae,"unique");const ce=ie.data.get(ae.dataId).values,{outputValues:le,outputShape:ue,indices:he}=uniqueImpl(ce,oe,ae.shape,ae.dtype);return[ie.makeTensorInfo(ue,ae.dtype,le),ie.makeTensorInfo([he.length],"int32",he)]}const uniqueConfig$1={kernelName:Unique,backendName:"cpu",kernelFunc:unique$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unpack$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{value:oe}=ee;let{axis:ae}=ie;ae<0&&(ae+=oe.shape.length);const ce=oe.shape.length,le=oe.shape[ae],ue=new Array(ce-1);let he=0;for(let ve=0;ve<ce;ve++)ve!==ae&&(ue[he++]=oe.shape[ve]);const fe=new Array(ce).fill(0),me=oe.shape.slice();me[ae]=1;const ge=new Array(le);for(let ve=0;ve<ge.length;ve++){fe[ae]=ve;const ye=slice$3({inputs:{x:oe},backend:ne,attrs:{begin:fe,size:me}});ge[ve]=reshape$1({inputs:{x:ye},backend:ne,attrs:{shape:ue}}),ne.disposeIntermediateTensorInfo(ye)}return ge}const unpackConfig$1={kernelName:Unpack,backendName:"cpu",kernelFunc:unpack$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unsortedSegmentSum$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,segmentIds:ae}=ee,{numSegments:ce}=ie;assertNotComplex$1(oe,"unsortedSegmentSum");const le=oe.shape.length,ue=ae.shape.length,he=[],fe=[],me=le-ue;let ge=ae;for(let ye=0;ye<me;++ye){const be=expandDims$1({inputs:{input:ge},backend:ne,attrs:{dim:ye+1}});ge=be,fe.push(be)}for(let ye=0;ye<ce;++ye){const be=createScalarValue(ye,"int32"),Ce=ne.makeTensorInfo([],"int32",be),Se=equal$1({inputs:{a:Ce,b:ge},backend:ne}),$e=cast$1({inputs:{x:Se},backend:ne,attrs:{dtype:"float32"}}),Te=multiply$2({inputs:{a:$e,b:oe},backend:ne}),Ne=sum$1({inputs:{x:Te},backend:ne,attrs:{axis:0,keepDims:!1}});he.push(Ne),fe.push(Ce),fe.push(Se),fe.push($e),fe.push(Te),fe.push(Ne)}const ve=pack$1({inputs:he,backend:ne,attrs:{axis:0}});return fe.forEach(ye=>ne.disposeIntermediateTensorInfo(ye)),ve}const unsortedSegmentSumConfig$1={kernelName:UnsortedSegmentSum,backendName:"cpu",kernelFunc:unsortedSegmentSum$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernelConfigs$1=[_fusedMatMulConfig$1,absConfig$1,acosConfig$1,acoshConfig$1,addConfig$1,addNConfig$1,allConfig$1,anyConfig$1,argMaxConfig$1,argMinConfig$1,asinConfig$1,asinhConfig$1,atanConfig$1,atan2Config$1,atanhConfig$1,avgPoolConfig$1,avgPool3DConfig$1,avgPool3DGradConfig,avgPoolGradConfig$1,batchMatMulConfig$1,batchNormConfig$1,batchToSpaceNDConfig$1,bincountConfig$1,castConfig$1,ceilConfig$1,clipConfig,complexConfig$1,complexAbsConfig$1,concatConfig$1,conv2DBackpropFilterConfig$1,conv2DBackpropInputConfig$1,conv2DConfig$1,conv3DBackpropFilterV2Config$1,conv3DBackpropInputV2Config,conv3DConfig$1,cosConfig$1,coshConfig$1,cropAndResizeConfig$1,cumsumConfig$1,denseBincountConfig$1,depthToSpaceConfig$1,depthwiseConv2dNativeConfig$1,depthwiseConv2dNativeBackpropFilterConfig$1,depthwiseConv2dNativeBackpropInputConfig$1,diagConfig$1,dilation2dConfig,dilation2dBackpropInputConfig,dilation2dBackpropFilterConfig,realDivConfig$1,eluConfig$1,eluGradConfig$1,equalConfig$1,erfConfig$1,expConfig$1,expandDimsConfig$1,expm1Config$1,fftConfig$1,fillConfig$1,flipLeftRightConfig$1,floorConfig$1,floorDivConfig$1,fusedConv2DConfig$1,fusedDepthwiseConv2DConfig$1,gatherNdConfig$1,gatherV2Config$1,greaterConfig$1,greaterEqualConfig$1,identityConfig$1,ifftConfig$1,imagConfig$1,isFiniteConfig$1,isInfConfig$1,isNaNConfig$1,leakyReluConfig$1,lessConfig$1,lessEqualConfig$1,linSpaceConfig$1,logConfig$1,log1pConfig$1,logicalAndConfig$1,logicalNotConfig$1,logicalOrConfig$1,lRNConfig,lRNGradConfig,maximumConfig$1,maxPoolConfig$1,maxPool3DConfig$1,maxPool3DGradConfig,maxPoolGradConfig$1,maxPoolWithArgmaxConfig$1,maxConfig$1,meanConfig$1,minConfig$1,minimumConfig$1,mirrorPadConfig$1,modConfig$1,multinomialConfig$1,multiplyConfig$1,negConfig$1,nonMaxSuppressionV3Config$1,nonMaxSuppressionV4Config$1,nonMaxSuppressionV5Config$1,notEqualConfig$1,oneHotConfig$1,onesLikeConfig$1,packConfig$1,padV2Config$1,powConfig$1,preluConfig$1,prodConfig$1,rangeConfig$1,realConfig$1,reciprocalConfig$1,reluConfig$1,relu6Config$1,reshapeConfig$1,resizeBilinearConfig$1,resizeBilinearGradConfig$1,resizeNearestNeighborConfig$1,resizeNearestNeighborGradConfig$1,reverseConfig$1,rotateWithOffsetConfig$1,roundConfig$1,rsqrtConfig$1,scatterNdConfig$1,selectConfig$1,seluConfig$1,sigmoidConfig$1,signConfig$1,sinConfig$1,sinhConfig$1,sliceConfig$1,softmaxConfig$1,softplusConfig$1,spaceToBatchNDConfig$1,sparseToDenseConfig$1,splitVConfig$1,sqrtConfig$1,squareConfig$1,squaredDifferenceConfig$1,stepConfig$1,stridedSliceConfig$1,subConfig$1,sumConfig$1,tanConfig$1,tanhConfig$1,tileConfig$1,topKConfig$1,transposeConfig$1,uniqueConfig$1,unpackConfig$1,unsortedSegmentSumConfig$1,zerosLikeConfig$1];for(const re of kernelConfigs$1)registerKernel(re);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const contexts={},WEBGL_ATTRIBUTES={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function setWebGLContext(re,ee){contexts[re]=ee}function getWebGLContext(re){if(!(re in contexts)){const ne=getWebGLRenderingContext(re);if(ne!==null)contexts[re]=ne;else return console.log("Could not get context for WebGL version",re),null}const ee=contexts[re];return ee.isContextLost()?(delete contexts[re],getWebGLContext(re)):(ee.disable(ee.DEPTH_TEST),ee.disable(ee.STENCIL_TEST),ee.disable(ee.BLEND),ee.disable(ee.DITHER),ee.disable(ee.POLYGON_OFFSET_FILL),ee.disable(ee.SAMPLE_COVERAGE),ee.enable(ee.SCISSOR_TEST),ee.enable(ee.CULL_FACE),ee.cullFace(ee.BACK),contexts[re])}function createCanvas(re){if(typeof OffscreenCanvas<"u"&&re===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function getWebGLRenderingContext(re){if(re!==1&&re!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const ee=createCanvas(re);return ee.addEventListener("webglcontextlost",ne=>{ne.preventDefault(),delete contexts[re]},!1),re===1?ee.getContext("webgl",WEBGL_ATTRIBUTES)||ee.getContext("experimental-webgl",WEBGL_ATTRIBUTES):ee.getContext("webgl2",WEBGL_ATTRIBUTES)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var PackingScheme;(function(re){re[re.DENSE=0]="DENSE",re[re.SHARED_BATCH=1]="SHARED_BATCH"})(PackingScheme||(PackingScheme={}));var TextureUsage;(function(re){re[re.RENDER=0]="RENDER",re[re.UPLOAD=1]="UPLOAD",re[re.PIXELS=2]="PIXELS",re[re.DOWNLOAD=3]="DOWNLOAD"})(TextureUsage||(TextureUsage={}));var PhysicalTextureType;(function(re){re[re.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",re[re.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",re[re.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",re[re.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",re[re.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(PhysicalTextureType||(PhysicalTextureType={}));function getUnpackedMatrixTextureShapeWidthHeight(re,ee){return[ee,re]}function getUnpackedArraySizeFromMatrixSize(re,ee){return re*ee}function getDenseTexShape(re){const ee=sizeFromShape(re),ne=Math.ceil(ee/4);return sizeToSquarishShape(ne)}function getPackedMatrixTextureShapeWidthHeight(re,ee){return[Math.max(1,Math.ceil(ee/2)),Math.max(1,Math.ceil(re/2))]}function getPackedRGBAArraySizeFromMatrixShape(re,ee){const[ne,ie]=getPackedMatrixTextureShapeWidthHeight(re,ee);return ne*ie*4}function getTextureConfig(re,ee){const ne=re;let ie,oe,ae,ce,le,ue,he,fe,me,ge;return env().getNumber("WEBGL_VERSION")===2?(ie=ne.R32F,oe=ne.R16F,ae=ne.RGBA16F,ce=ne.RGBA32F,le=ne.RED,he=4,fe=1,me=ne.HALF_FLOAT,ge=ne.FLOAT):(ie=re.RGBA,oe=re.RGBA,ae=re.RGBA,ce=ne.RGBA,le=re.RGBA,he=4,fe=4,me=ee!=null?ee.HALF_FLOAT_OES:null,ge=re.FLOAT),ue=re.RGBA,{internalFormatFloat:ie,internalFormatHalfFloat:oe,internalFormatPackedHalfFloat:ae,internalFormatPackedFloat:ce,textureFormatFloat:le,downloadTextureFormat:ue,downloadUnpackNumChannels:he,defaultNumChannels:fe,textureTypeHalfFloat:me,textureTypeFloat:ge}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function callAndCheck(re,ee){const ne=ee();return env().getBool("DEBUG")&&checkWebGLError(re),ne}function checkWebGLError(re){const ee=re.getError();if(ee!==re.NO_ERROR)throw new Error("WebGL Error: "+getWebGLErrorMessage(re,ee))}const MIN_FLOAT16=596e-10,MAX_FLOAT16=65504;function canBeRepresented(re){return!!(env().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||re===0||MIN_FLOAT16<Math.abs(re)&&Math.abs(re)<MAX_FLOAT16)}function getWebGLErrorMessage(re,ee){switch(ee){case re.NO_ERROR:return"NO_ERROR";case re.INVALID_ENUM:return"INVALID_ENUM";case re.INVALID_VALUE:return"INVALID_VALUE";case re.INVALID_OPERATION:return"INVALID_OPERATION";case re.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case re.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case re.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${ee}`}}function getExtensionOrThrow(re,ee){return throwIfNull(re,()=>re.getExtension(ee),'Extension "'+ee+'" not supported on this browser.')}function createVertexShader$1(re,ee){const ne=throwIfNull(re,()=>re.createShader(re.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(callAndCheck(re,()=>re.shaderSource(ne,ee)),callAndCheck(re,()=>re.compileShader(ne)),re.getShaderParameter(ne,re.COMPILE_STATUS)===!1)throw console.log(re.getShaderInfoLog(ne)),new Error("Failed to compile vertex shader.");return ne}function createFragmentShader(re,ee){const ne=throwIfNull(re,()=>re.createShader(re.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(callAndCheck(re,()=>re.shaderSource(ne,ee)),callAndCheck(re,()=>re.compileShader(ne)),re.getShaderParameter(ne,re.COMPILE_STATUS)===!1)throw logShaderSourceAndInfoLog(ee,re.getShaderInfoLog(ne)),new Error("Failed to compile fragment shader.");return ne}const lineNumberRegex=/ERROR: [0-9]+:([0-9]+):/g;function logShaderSourceAndInfoLog(re,ee){const ne=lineNumberRegex.exec(ee);if(ne==null){console.log(`Couldn't parse line number in error: ${ee}`),console.log(re);return}const ie=+ne[1],oe=re.split(`
`),ae=oe.length.toString().length+2,ce=oe.map((me,ge)=>rightPad((ge+1).toString(),ae)+me);let le=0;for(let me=0;me<ce.length;me++)le=Math.max(ce[me].length,le);const ue=ce.slice(0,ie-1),he=ce.slice(ie-1,ie),fe=ce.slice(ie);console.log(ue.join(`
`)),console.log(ee.split(`
`)[0]),console.log(`%c ${rightPad(he[0],le)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(fe.join(`
`))}function createProgram(re){return throwIfNull(re,()=>re.createProgram(),"Unable to create WebGLProgram.")}function linkProgram(re,ee){if(callAndCheck(re,()=>re.linkProgram(ee)),re.getProgramParameter(ee,re.LINK_STATUS)===!1)throw console.log(re.getProgramInfoLog(ee)),new Error("Failed to link vertex and fragment shaders.")}function validateProgram(re,ee){if(callAndCheck(re,()=>re.validateProgram(ee)),re.getProgramParameter(ee,re.VALIDATE_STATUS)===!1)throw console.log(re.getProgramInfoLog(ee)),new Error("Shader program validation failed.")}function createStaticVertexBuffer(re,ee){const ne=throwIfNull(re,()=>re.createBuffer(),"Unable to create WebGLBuffer");return callAndCheck(re,()=>re.bindBuffer(re.ARRAY_BUFFER,ne)),callAndCheck(re,()=>re.bufferData(re.ARRAY_BUFFER,ee,re.STATIC_DRAW)),ne}function createStaticIndexBuffer(re,ee){const ne=throwIfNull(re,()=>re.createBuffer(),"Unable to create WebGLBuffer");return callAndCheck(re,()=>re.bindBuffer(re.ELEMENT_ARRAY_BUFFER,ne)),callAndCheck(re,()=>re.bufferData(re.ELEMENT_ARRAY_BUFFER,ee,re.STATIC_DRAW)),ne}function createTexture(re){return throwIfNull(re,()=>re.createTexture(),"Unable to create WebGLTexture.")}function validateTextureSize(re,ee){const ne=env().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(re<=0||ee<=0){const ie=`[${re}x${ee}]`;throw new Error("Requested texture size "+ie+" is invalid.")}if(re>ne||ee>ne){const ie=`[${re}x${ee}]`,oe=`[${ne}x${ne}]`;throw new Error("Requested texture size "+ie+" greater than WebGL maximum on this browser / GPU "+oe+".")}}function createFramebuffer(re){return throwIfNull(re,()=>re.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function bindVertexBufferToProgramAttribute(re,ee,ne,ie,oe,ae,ce){const le=re.getAttribLocation(ee,ne);return le===-1?!1:(callAndCheck(re,()=>re.bindBuffer(re.ARRAY_BUFFER,ie)),callAndCheck(re,()=>re.vertexAttribPointer(le,oe,re.FLOAT,!1,ae,ce)),callAndCheck(re,()=>re.enableVertexAttribArray(le)),!0)}function bindTextureUnit(re,ee,ne){validateTextureUnit(re,ne),callAndCheck(re,()=>re.activeTexture(re.TEXTURE0+ne)),callAndCheck(re,()=>re.bindTexture(re.TEXTURE_2D,ee))}function getProgramUniformLocationOrThrow(re,ee,ne){return throwIfNull(re,()=>re.getUniformLocation(ee,ne),'uniform "'+ne+'" not present in program.')}function getProgramUniformLocation(re,ee,ne){return re.getUniformLocation(ee,ne)}function bindTextureToProgramUniformSampler(re,ee,ne,ie){callAndCheck(re,()=>bindTextureUnit(re,ee,ie)),callAndCheck(re,()=>re.uniform1i(ne,ie))}function bindColorTextureToFramebuffer(re,ee,ne){callAndCheck(re,()=>re.bindFramebuffer(re.FRAMEBUFFER,ne)),callAndCheck(re,()=>re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,ee,0))}function unbindColorTextureFromFramebuffer(re,ee){callAndCheck(re,()=>re.bindFramebuffer(re.FRAMEBUFFER,ee)),callAndCheck(re,()=>re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,null,0))}function validateFramebuffer(re){const ee=re.checkFramebufferStatus(re.FRAMEBUFFER);if(ee!==re.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+getFramebufferErrorMessage(re,ee))}function getFramebufferErrorMessage(re,ee){switch(ee){case re.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case re.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case re.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case re.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${ee}`}}function throwIfNull(re,ee,ne){const ie=callAndCheck(re,()=>ee());if(ie==null)throw new Error(ne);return ie}function validateTextureUnit(re,ee){const ne=re.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,ie=ee+re.TEXTURE0;if(ie<re.TEXTURE0||ie>ne){const oe=`[gl.TEXTURE0, gl.TEXTURE${ne}]`;throw new Error(`textureUnit must be in ${oe}.`)}}function getBatchDim(re,ee=2){return sizeFromShape(re.slice(0,re.length-ee))}function getRowsCols(re){if(re.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[re.length>1?re[re.length-2]:1,re[re.length-1]]}function getShapeAs3D(re){let ee=[1,1,1];return re.length===0||re.length===1&&re[0]===1||(ee=[getBatchDim(re),...getRowsCols(re)]),ee}function getTextureShapeFromLogicalShape(re,ee=!1){let ne=env().getNumber("WEBGL_MAX_TEXTURE_SIZE");ee&&(ne=ne*2,re=re.map((oe,ae)=>ae>=re.length-2?nearestLargerEven(re[ae]):re[ae]),re.length===1&&(re=[2,re[0]])),re.length!==2&&(re=squeezeShape(re).newShape);let ie=sizeFromShape(re);if(re.length<=1&&ie<=ne)return[1,ie];if(re.length===2&&re[0]<=ne&&re[1]<=ne)return re;if(re.length===3&&re[0]*re[1]<=ne&&re[2]<=ne)return[re[0]*re[1],re[2]];if(re.length===3&&re[0]<=ne&&re[1]*re[2]<=ne)return[re[0],re[1]*re[2]];if(re.length===4&&re[0]*re[1]*re[2]<=ne&&re[3]<=ne)return[re[0]*re[1]*re[2],re[3]];if(re.length===4&&re[0]<=ne&&re[1]*re[2]*re[3]<=ne)return[re[0],re[1]*re[2]*re[3]];if(ee){const oe=getBatchDim(re);let ae=2,ce=2;return re.length&&([ae,ce]=getRowsCols(re)),ie=oe*(ae/2)*(ce/2),sizeToSquarishShape(ie).map(le=>le*2)}return sizeToSquarishShape(ie)}function isEven(re){return re%2===0}function isReshapeFree(re,ee){if(re=re.slice(-2),ee=ee.slice(-2),arraysEqual(re,ee)||!re.length||!ee.length||re[0]===0||re[1]===0||ee[0]===0||ee[1]===0)return!0;if(re.length!==ee.length){const ne=re.slice(-1)[0],ie=ee.slice(-1)[0];if(ne===ie||isEven(ne)&&isEven(ie)&&(re[0]===1||ee[0]===1))return!0}return re[1]===ee[1]&&isEven(re[0])&&isEven(ee[0])}let MAX_TEXTURE_SIZE,MAX_TEXTURES_IN_SHADER;function getWebGLMaxTextureSize(re){if(MAX_TEXTURE_SIZE==null){const ee=getWebGLContext(re);MAX_TEXTURE_SIZE=ee.getParameter(ee.MAX_TEXTURE_SIZE)}return MAX_TEXTURE_SIZE}function getMaxTexturesInShader(re){if(MAX_TEXTURES_IN_SHADER==null){const ee=getWebGLContext(re);MAX_TEXTURES_IN_SHADER=ee.getParameter(ee.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,MAX_TEXTURES_IN_SHADER)}function getWebGLDisjointQueryTimerVersion(re){if(re===0)return 0;let ee;const ne=getWebGLContext(re);return hasExtension(ne,"EXT_disjoint_timer_query_webgl2")&&re===2?ee=2:hasExtension(ne,"EXT_disjoint_timer_query")?ee=1:ee=0,ee}function hasExtension(re,ee){return re.getExtension(ee)!=null}function isWebGLVersionEnabled(re){try{if(getWebGLContext(re)!=null)return!0}catch(ee){return console.log("Error when getting WebGL context: ",ee),!1}return!1}function isCapableOfRenderingToFloatTexture(re){if(re===0)return!1;const ee=getWebGLContext(re);if(re===1){if(!hasExtension(ee,"OES_texture_float"))return!1}else if(!hasExtension(ee,"EXT_color_buffer_float"))return!1;return createFloatTextureAndBindToFramebuffer(ee)}function isDownloadFloatTextureEnabled(re){if(re===0)return!1;const ee=getWebGLContext(re);if(re===1){if(!hasExtension(ee,"OES_texture_float")||!hasExtension(ee,"WEBGL_color_buffer_float"))return!1}else{if(hasExtension(ee,"EXT_color_buffer_float"))return createFloatTextureAndBindToFramebuffer(ee);const ie="EXT_color_buffer_half_float";if(hasExtension(ee,ie)){const oe=ee.getExtension(ie);return createHalfFloatTextureAndBindToFramebuffer(ee,oe)}return!1}return createFloatTextureAndBindToFramebuffer(ee)}function createFloatTextureAndBindToFramebuffer(re){const ee=getTextureConfig(re),ne=re.createTexture();re.bindTexture(re.TEXTURE_2D,ne);const ie=1,oe=1;re.texImage2D(re.TEXTURE_2D,0,ee.internalFormatFloat,ie,oe,0,ee.textureFormatFloat,ee.textureTypeFloat,null);const ae=re.createFramebuffer();re.bindFramebuffer(re.FRAMEBUFFER,ae),re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,ne,0);const ce=re.checkFramebufferStatus(re.FRAMEBUFFER)===re.FRAMEBUFFER_COMPLETE;return re.bindTexture(re.TEXTURE_2D,null),re.bindFramebuffer(re.FRAMEBUFFER,null),re.deleteTexture(ne),re.deleteFramebuffer(ae),ce}function createHalfFloatTextureAndBindToFramebuffer(re,ee){const ne=getTextureConfig(re,ee),ie=re.createTexture();re.bindTexture(re.TEXTURE_2D,ie);const oe=1,ae=1;re.texImage2D(re.TEXTURE_2D,0,ne.internalFormatHalfFloat,oe,ae,0,ne.textureFormatFloat,ne.textureTypeHalfFloat,null);const ce=re.createFramebuffer();re.bindFramebuffer(re.FRAMEBUFFER,ce),re.framebufferTexture2D(re.FRAMEBUFFER,re.COLOR_ATTACHMENT0,re.TEXTURE_2D,ie,0);const le=re.checkFramebufferStatus(re.FRAMEBUFFER)===re.FRAMEBUFFER_COMPLETE;return re.bindTexture(re.TEXTURE_2D,null),re.bindFramebuffer(re.FRAMEBUFFER,null),re.deleteTexture(ie),re.deleteFramebuffer(ce),le}function isWebGLFenceEnabled(re){return re!==2?!1:getWebGLContext(re).fenceSync!=null}function assertNotComplex(re,ee){Array.isArray(re)||(re=[re]),re.forEach(ne=>{ne!=null&&assert$2(ne.dtype!=="complex64",()=>`${ee} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ENV=env();ENV.registerFlag("HAS_WEBGL",()=>ENV.getNumber("WEBGL_VERSION")>0);ENV.registerFlag("WEBGL_VERSION",()=>isWebGLVersionEnabled(2)?2:isWebGLVersionEnabled(1)?1:0);ENV.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);ENV.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>ENV.get("WEBGL_VERSION")===2);ENV.registerFlag("WEBGL_CPU_FORWARD",()=>!0);ENV.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);ENV.registerFlag("WEBGL_PACK",()=>ENV.getBool("HAS_WEBGL"));ENV.registerFlag("WEBGL_PACK_NORMALIZATION",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_CLIP",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>!1);ENV.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_PACK_REDUCE",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_LAZILY_UNPACK",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_CONV_IM2COL",()=>ENV.getBool("WEBGL_PACK"));ENV.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>getWebGLMaxTextureSize(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>getMaxTexturesInShader(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const re=ENV.getNumber("WEBGL_VERSION");return re===0?0:getWebGLDisjointQueryTimerVersion(re)});ENV.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>ENV.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!isMobile());ENV.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>isCapableOfRenderingToFloatTexture(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>ENV.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:ENV.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));ENV.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>isDownloadFloatTextureEnabled(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_FENCE_API_ENABLED",()=>isWebGLFenceEnabled(ENV.getNumber("WEBGL_VERSION")));ENV.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>ENV.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);ENV.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,re=>{if(re<0&&re!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${re}.`)});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getGlslDifferences(){let re,ee,ne,ie,oe,ae,ce,le,ue,he;return env().getNumber("WEBGL_VERSION")===2?(re="#version 300 es",ee="in",ne="out",ie="in",oe="texture",ae="outputColor",ce="out vec4 outputColor;",le=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,ue="",he=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(re="",ee="attribute",ne="varying",ie="varying",oe="texture2D",ae="gl_FragColor",ce="",le=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,ue=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,he=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:re,attribute:ee,varyingVs:ne,varyingFs:ie,texture2D:oe,output:ae,defineOutput:ce,defineSpecialNaN:le,defineSpecialInf:ue,defineRound:he}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getLogicalCoordinatesFromFlatIndex(re,ee,ne="index"){const ie=computeStrides(ee);return ie.map((oe,ae)=>{const ce=`int ${re[ae]} = ${ne} / ${oe}`,le=ae===ie.length-1?`int ${re[ae+1]} = ${ne} - ${re[ae]} * ${oe}`:`index -= ${re[ae]} * ${oe}`;return`${ce}; ${le};`}).join("")}function getFlatIndexFrom3D(re){const ee=computeStrides(re).map(ne=>ne.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${ee[0]} + coords.y * ${ee[1]} + coords.z;
  }
`}const ENCODE_FLOAT_SNIPPET=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DecodeMatrixProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=PackingScheme.DENSE;const ne=getDenseTexShape(ee),ie=getGlslDifferences();this.outputShape=ee,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${getLogicalCoordinatesFromFlatIndex(["r","c","d"],ee)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${ne[0]}, ${ne[1]}));
        int index = 4 * (resTexRC.x * ${ne[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${ie.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DecodeMatrixPackedProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=PackingScheme.DENSE;const ne=getDenseTexShape(ee),ie=getGlslDifferences();this.outputShape=ee,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${getLogicalCoordinatesFromFlatIndex(["r","c","d"],ee)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(${ne[0]}, ${ne[1]}));
        int index = 4 * (resTexRC.x * ${ne[1]} + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${ie.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeFloatProgram{constructor(ee){this.variableNames=["A"],this.outTexUsage=TextureUsage.DOWNLOAD;const ne=getGlslDifferences();this.outputShape=ee,this.userCode=`
      ${ENCODE_FLOAT_SNIPPET}

      void main() {
        float x = getAAtOutCoords();
        ${ne.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeFloatPackedProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=TextureUsage.DOWNLOAD;const ne=getGlslDifferences();this.outputShape=ee,this.userCode=`
      ${ENCODE_FLOAT_SNIPPET}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${ne.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeMatrixProgram{constructor(ee,ne,ie=!1){this.variableNames=["A"];const oe=getGlslDifferences(),[ae,ce]=ne;this.outputShape=ee;let le="result";ie&&(le="floor(result * 255. + 0.5)"),this.userCode=`
      ${getFlatIndexFrom3D(ee)}

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);

        int r = flatIndex / ${ce};
        int c = imod(flatIndex, ${ce});
        vec2 uv = (vec2(c, r) + halfCR) / vec2(${ce}.0, ${ae}.0);
        vec4 values = ${oe.texture2D}(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        ${oe.output} = vec4(${le}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EncodeMatrixPackedProgram{constructor(ee,ne,ie=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const oe=getGlslDifferences(),[ae,ce]=ne;this.outputShape=ee;let le="",ue="result";ie&&(ue="floor(result * 255. + 0.5)");for(let he=0;he<=1;he++)for(let fe=0;fe<=1;fe++){const me=he*2+fe;le+=`
          localCoords = coords;
          if(localCoords[2] + ${fe} < ${ee[2]}) {
            localCoords[2] += ${fe};
            if(localCoords[1] + ${he} < ${ee[1]}) {
              localCoords[1] += ${he};

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / ${ce};
              c = imod(flatIndex, ${ce});
              uv = (vec2(c, r) + halfCR) / vec2(${ce}.0, ${ae}.0);
              values = ${oe.texture2D}(A, uv);

              if(offset == 0) {
                result[${me}] = values[0];
              } else if(offset == 1) {
                result[${me}] = values[1];
              } else if(offset == 2) {
                result[${me}] = values[2];
              } else {
                result[${me}] = values[3];
              }
            }
          }
        `}this.userCode=`
      ${getFlatIndexFrom3D(ee)}

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        ${le}

        ${oe.output} = ${ue};
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function createVertexShader(re){const ee=getGlslDifferences(),ne=`${ee.version}
    precision highp float;
    ${ee.attribute} vec3 clipSpacePos;
    ${ee.attribute} vec2 uv;
    ${ee.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return createVertexShader$1(re,ne)}function createVertexBuffer(re){const ee=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return createStaticVertexBuffer(re,ee)}function createIndexBuffer(re){const ee=new Uint16Array([0,1,2,2,1,3]);return createStaticIndexBuffer(re,ee)}function createAndConfigureTexture(re,ee,ne,ie,oe,ae){validateTextureSize(ee,ne);const ce=createTexture(re),le=re.TEXTURE_2D;return callAndCheck(re,()=>re.bindTexture(le,ce)),callAndCheck(re,()=>re.texParameteri(le,re.TEXTURE_WRAP_S,re.CLAMP_TO_EDGE)),callAndCheck(re,()=>re.texParameteri(le,re.TEXTURE_WRAP_T,re.CLAMP_TO_EDGE)),callAndCheck(re,()=>re.texParameteri(le,re.TEXTURE_MIN_FILTER,re.NEAREST)),callAndCheck(re,()=>re.texParameteri(le,re.TEXTURE_MAG_FILTER,re.NEAREST)),callAndCheck(re,()=>re.texImage2D(le,0,ie,ee,ne,0,oe,ae,null)),callAndCheck(re,()=>re.bindTexture(re.TEXTURE_2D,null)),ce}function getInternalFormatForFloat32MatrixTexture(re){return re.internalFormatFloat}function createFloat32MatrixTexture(re,ee,ne,ie){const[oe,ae]=getUnpackedMatrixTextureShapeWidthHeight(ee,ne);return createAndConfigureTexture(re,oe,ae,getInternalFormatForFloat32MatrixTexture(ie),ie.textureFormatFloat,re.FLOAT)}function getInternalFormatForFloat16MatrixTexture(re){return re.internalFormatHalfFloat}function createFloat16MatrixTexture(re,ee,ne,ie){const[oe,ae]=getUnpackedMatrixTextureShapeWidthHeight(ee,ne);return createAndConfigureTexture(re,oe,ae,getInternalFormatForFloat16MatrixTexture(ie),ie.textureFormatFloat,ie.textureTypeHalfFloat)}function getInternalFormatForUnsignedBytesMatrixTexture(re){return re.downloadTextureFormat}function createUnsignedBytesMatrixTexture(re,ee,ne,ie){const[oe,ae]=getUnpackedMatrixTextureShapeWidthHeight(ee,ne);return createAndConfigureTexture(re,oe,ae,getInternalFormatForUnsignedBytesMatrixTexture(ie),re.RGBA,re.UNSIGNED_BYTE)}function getInternalFormatForPackedMatrixTexture(re){return re.internalFormatPackedFloat}function createPackedMatrixTexture(re,ee,ne,ie){const[oe,ae]=getPackedMatrixTextureShapeWidthHeight(ee,ne);return createAndConfigureTexture(re,oe,ae,getInternalFormatForPackedMatrixTexture(ie),re.RGBA,re.FLOAT)}function getInternalFormatForFloat16PackedMatrixTexture(re){return re.internalFormatPackedHalfFloat}function createFloat16PackedMatrixTexture(re,ee,ne,ie){const[oe,ae]=getPackedMatrixTextureShapeWidthHeight(ee,ne);return createAndConfigureTexture(re,oe,ae,getInternalFormatForFloat16PackedMatrixTexture(ie),re.RGBA,ie.textureTypeHalfFloat)}function bindVertexProgramAttributeStreams(re,ee,ne){return callAndCheck(re,()=>re.bindBuffer(re.ARRAY_BUFFER,ne)),bindVertexBufferToProgramAttribute(re,ee,"clipSpacePos",ne,3,20,0)&&bindVertexBufferToProgramAttribute(re,ee,"uv",ne,2,20,12)}function uploadDenseMatrixToTexture(re,ee,ne,ie,oe,ae){callAndCheck(re,()=>re.bindTexture(re.TEXTURE_2D,ee));let ce,le,ue;oe instanceof Uint8Array?(ce=new Uint8Array(ne*ie*4),le=re.UNSIGNED_BYTE,ue=re.RGBA):(ce=new Float32Array(ne*ie*4),le=re.FLOAT,ue=ae.internalFormatPackedFloat),ce.set(oe),callAndCheck(re,()=>re.texImage2D(re.TEXTURE_2D,0,ue,ne,ie,0,re.RGBA,le,ce)),callAndCheck(re,()=>re.bindTexture(re.TEXTURE_2D,null))}function uploadPixelDataToTexture(re,ee,ne){callAndCheck(re,()=>re.bindTexture(re.TEXTURE_2D,ee)),ne.data instanceof Uint8Array?callAndCheck(re,()=>re.texImage2D(re.TEXTURE_2D,0,re.RGBA,ne.width,ne.height,0,re.RGBA,re.UNSIGNED_BYTE,ne.data)):callAndCheck(re,()=>re.texImage2D(re.TEXTURE_2D,0,re.RGBA,re.RGBA,re.UNSIGNED_BYTE,ne)),callAndCheck(re,()=>re.bindTexture(re.TEXTURE_2D,null))}function createBufferFromOutputTexture(re,ee,ne,ie){const oe=re.createBuffer();callAndCheck(re,()=>re.bindBuffer(re.PIXEL_PACK_BUFFER,oe));const le=4*4*ee*ne;return callAndCheck(re,()=>re.bufferData(re.PIXEL_PACK_BUFFER,le,re.STREAM_READ)),callAndCheck(re,()=>re.readPixels(0,0,ne,ee,re.RGBA,re.FLOAT,0)),callAndCheck(re,()=>re.bindBuffer(re.PIXEL_PACK_BUFFER,null)),oe}function downloadFloat32MatrixFromBuffer(re,ee,ne){const ie=re,oe=new Float32Array(ne);return ie.bindBuffer(ie.PIXEL_PACK_BUFFER,ee),ie.getBufferSubData(ie.PIXEL_PACK_BUFFER,0,oe),ie.bindBuffer(ie.PIXEL_PACK_BUFFER,null),oe}function downloadByteEncodedFloatMatrixFromOutputTexture(re,ee,ne,ie){const[oe,ae]=getUnpackedMatrixTextureShapeWidthHeight(ee,ne),ce=4,le=new Uint8Array(getUnpackedArraySizeFromMatrixSize(ee*ne,ce));return callAndCheck(re,()=>re.readPixels(0,0,oe,ae,ie.downloadTextureFormat,re.UNSIGNED_BYTE,le)),new Float32Array(le.buffer)}function downloadPackedMatrixFromBuffer(re,ee,ne,ie,oe,ae,ce,le){const ue=re,he=new Float32Array(getPackedRGBAArraySizeFromMatrixShape(ae,ce));return ue.bindBuffer(ue.PIXEL_PACK_BUFFER,ee),ue.getBufferSubData(ue.PIXEL_PACK_BUFFER,0,he),ue.bindBuffer(ue.PIXEL_PACK_BUFFER,null),he}function downloadMatrixFromPackedOutputTexture(re,ee,ne){const ie=new Float32Array(ee*ne*4);return callAndCheck(re,()=>re.readPixels(0,0,ne,ee,re.RGBA,re.FLOAT,ie)),ie}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GPGPUContext{constructor(ee){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];const ne=env().getNumber("WEBGL_VERSION");ee!=null?(this.gl=ee,setWebGLContext(ne,ee)):this.gl=getWebGLContext(ne);let ie="WEBGL_color_buffer_float";const oe="EXT_color_buffer_half_float";if(env().getNumber("WEBGL_VERSION")===1){const ae="OES_texture_float",ce="OES_texture_half_float";if(this.textureFloatExtension=getExtensionOrThrow(this.gl,ae),hasExtension(this.gl,ce))this.textureHalfFloatExtension=getExtensionOrThrow(this.gl,ce);else if(env().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(ie),hasExtension(this.gl,oe))this.colorBufferHalfFloatExtension=getExtensionOrThrow(this.gl,oe);else if(env().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(ie="EXT_color_buffer_float",hasExtension(this.gl,ie))this.colorBufferFloatExtension=this.gl.getExtension(ie);else if(hasExtension(this.gl,oe))this.colorBufferHalfFloatExtension=this.gl.getExtension(oe);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=createVertexBuffer(this.gl),this.indexBuffer=createIndexBuffer(this.gl),this.framebuffer=createFramebuffer(this.gl),this.textureConfig=getTextureConfig(this.gl,this.textureHalfFloatExtension)}get debug(){return env().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const ee=this.gl;callAndCheck(ee,()=>ee.finish()),callAndCheck(ee,()=>ee.bindFramebuffer(ee.FRAMEBUFFER,null)),callAndCheck(ee,()=>ee.deleteFramebuffer(this.framebuffer)),callAndCheck(ee,()=>ee.bindBuffer(ee.ARRAY_BUFFER,null)),callAndCheck(ee,()=>ee.bindBuffer(ee.ELEMENT_ARRAY_BUFFER,null)),callAndCheck(ee,()=>ee.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(ee,ne){return this.throwIfDisposed(),createFloat32MatrixTexture(this.gl,ee,ne,this.textureConfig)}createFloat16MatrixTexture(ee,ne){return this.throwIfDisposed(),createFloat16MatrixTexture(this.gl,ee,ne,this.textureConfig)}createUnsignedBytesMatrixTexture(ee,ne){return this.throwIfDisposed(),createUnsignedBytesMatrixTexture(this.gl,ee,ne,this.textureConfig)}uploadPixelDataToTexture(ee,ne){this.throwIfDisposed(),uploadPixelDataToTexture(this.gl,ee,ne)}uploadDenseMatrixToTexture(ee,ne,ie,oe){this.throwIfDisposed(),uploadDenseMatrixToTexture(this.gl,ee,ne,ie,oe,this.textureConfig)}createFloat16PackedMatrixTexture(ee,ne){return this.throwIfDisposed(),createFloat16PackedMatrixTexture(this.gl,ee,ne,this.textureConfig)}createPackedMatrixTexture(ee,ne){return this.throwIfDisposed(),createPackedMatrixTexture(this.gl,ee,ne,this.textureConfig)}deleteMatrixTexture(ee){this.throwIfDisposed(),this.outputTexture===ee&&(unbindColorTextureFromFramebuffer(this.gl,this.framebuffer),this.outputTexture=null),callAndCheck(this.gl,()=>this.gl.deleteTexture(ee))}downloadByteEncodedFloatMatrixFromOutputTexture(ee,ne,ie){return this.downloadMatrixDriver(ee,()=>downloadByteEncodedFloatMatrixFromOutputTexture(this.gl,ne,ie,this.textureConfig))}downloadPackedMatrixFromBuffer(ee,ne,ie,oe,ae,ce){return downloadPackedMatrixFromBuffer(this.gl,ee,ne,ie,oe,ae,ce,this.textureConfig)}downloadFloat32MatrixFromBuffer(ee,ne){return downloadFloat32MatrixFromBuffer(this.gl,ee,ne)}createBufferFromTexture(ee,ne,ie){this.bindTextureToFrameBuffer(ee);const oe=createBufferFromOutputTexture(this.gl,ne,ie,this.textureConfig);return this.unbindTextureToFrameBuffer(),oe}createAndWaitForFence(){const ee=this.createFence(this.gl);return this.pollFence(ee)}createFence(ee){let ne,ie;if(env().getBool("WEBGL_FENCE_API_ENABLED")){const oe=ee,ae=oe.fenceSync(oe.SYNC_GPU_COMMANDS_COMPLETE,0);ee.flush(),ie=()=>{const ce=oe.clientWaitSync(ae,0,0);return ce===oe.ALREADY_SIGNALED||ce===oe.CONDITION_SATISFIED},ne=ae}else env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(ne=this.beginQuery(),this.endQuery(),ie=()=>this.isQueryAvailable(ne,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):ie=()=>!0;return{query:ne,isFencePassed:ie}}downloadMatrixFromPackedTexture(ee,ne,ie){return this.downloadMatrixDriver(ee,()=>downloadMatrixFromPackedOutputTexture(this.gl,ne,ie))}createProgram(ee){this.throwIfDisposed();const ne=this.gl,ie=createFragmentShader(ne,ee),oe=createVertexShader(ne),ae=createProgram(ne);return callAndCheck(ne,()=>ne.attachShader(ae,oe)),callAndCheck(ne,()=>ne.attachShader(ae,ie)),linkProgram(ne,ae),this.debug&&validateProgram(ne,ae),this.vertexAttrsAreBound||(this.setProgram(ae),this.vertexAttrsAreBound=bindVertexProgramAttributeStreams(ne,this.program,this.vertexBuffer)),ae}deleteProgram(ee){this.throwIfDisposed(),ee===this.program&&(this.program=null),ee!=null&&callAndCheck(this.gl,()=>this.gl.deleteProgram(ee))}setProgram(ee){this.throwIfDisposed(),this.program=ee,this.program!=null&&this.debug&&validateProgram(this.gl,this.program),callAndCheck(this.gl,()=>this.gl.useProgram(ee))}getUniformLocation(ee,ne,ie=!0){return this.throwIfDisposed(),ie?getProgramUniformLocationOrThrow(this.gl,ee,ne):getProgramUniformLocation(this.gl,ee,ne)}getAttributeLocation(ee,ne){return this.throwIfDisposed(),callAndCheck(this.gl,()=>this.gl.getAttribLocation(ee,ne))}getUniformLocationNoThrow(ee,ne){return this.throwIfDisposed(),this.gl.getUniformLocation(ee,ne)}setInputMatrixTexture(ee,ne,ie){this.throwIfDisposed(),this.throwIfNoProgram(),bindTextureToProgramUniformSampler(this.gl,ee,ne,ie)}setOutputMatrixTexture(ee,ne,ie){this.setOutputMatrixTextureDriver(ee,ie,ne)}setOutputPackedMatrixTexture(ee,ne,ie){this.throwIfDisposed();const[oe,ae]=getPackedMatrixTextureShapeWidthHeight(ne,ie);this.setOutputMatrixTextureDriver(ee,oe,ae)}setOutputMatrixWriteRegion(ee,ne,ie,oe){this.setOutputMatrixWriteRegionDriver(ie,ee,oe,ne)}setOutputPackedMatrixWriteRegion(ee,ne,ie,oe){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&validateProgram(this.gl,this.program),validateFramebuffer(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const ee=this.gl;this.debug&&this.debugValidate(),callAndCheck(ee,()=>ee.drawElements(ee.TRIANGLES,6,ee.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),callAndCheck(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=getExtensionOrThrow(this.gl,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const ie=this.gl,oe=this.getQueryTimerExtensionWebGL2(),ae=ie.createQuery();return ie.beginQuery(oe.TIME_ELAPSED_EXT,ae),ae}const ee=this.getQueryTimerExtensionWebGL1(),ne=ee.createQueryEXT();return ee.beginQueryEXT(ee.TIME_ELAPSED_EXT,ne),ne}endQuery(){if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const ne=this.gl,ie=this.getQueryTimerExtensionWebGL2();ne.endQuery(ie.TIME_ELAPSED_EXT);return}const ee=this.getQueryTimerExtensionWebGL1();ee.endQueryEXT(ee.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(ee){return await repeatedTry(()=>this.disposed||this.isQueryAvailable(ee,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(ee,env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(ee,ne){if(ne===0)return null;if(ne===2){const ie=this.gl;return ie.getQueryParameter(ee,ie.QUERY_RESULT)/1e6}else{const ie=this.getQueryTimerExtensionWebGL1();return ie.getQueryObjectEXT(ee,ie.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(ee,ne){if(ne===0)return!0;if(ne===2){const ie=this.gl,oe=this.getQueryTimerExtensionWebGL2(),ae=ie.getQueryParameter(ee,ie.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(oe.GPU_DISJOINT_EXT)),ae&&!this.disjoint}else{const ie=this.getQueryTimerExtensionWebGL1(),oe=ie.getQueryObjectEXT(ee,ie.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(ie.GPU_DISJOINT_EXT)),oe&&!this.disjoint}}pollFence(ee){return new Promise(ne=>{this.addItemToPoll(()=>ee.isFencePassed(),()=>ne())})}pollItems(){const ee=linearSearchLastTrue(this.itemsToPoll.map(ne=>ne.isDoneFn));for(let ne=0;ne<=ee;++ne){const{resolveFn:ie}=this.itemsToPoll[ne];ie()}this.itemsToPoll=this.itemsToPoll.slice(ee+1)}addItemToPoll(ee,ne){this.itemsToPoll.push({isDoneFn:ee,resolveFn:ne}),!(this.itemsToPoll.length>1)&&repeatedTry(()=>(this.pollItems(),this.itemsToPoll.length===0))}bindTextureToFrameBuffer(ee){this.throwIfDisposed(),bindColorTextureToFramebuffer(this.gl,ee,this.framebuffer),this.debug&&validateFramebuffer(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(bindColorTextureToFramebuffer(this.gl,this.outputTexture,this.framebuffer),this.debug&&validateFramebuffer(this.gl)):unbindColorTextureFromFramebuffer(this.gl,this.framebuffer)}downloadMatrixDriver(ee,ne){this.bindTextureToFrameBuffer(ee);const ie=ne();return this.unbindTextureToFrameBuffer(),ie}setOutputMatrixTextureDriver(ee,ne,ie){this.throwIfDisposed();const oe=this.gl;bindColorTextureToFramebuffer(oe,ee,this.framebuffer),this.debug&&validateFramebuffer(oe),this.outputTexture=ee,callAndCheck(oe,()=>oe.viewport(0,0,ne,ie)),callAndCheck(oe,()=>oe.scissor(0,0,ne,ie))}setOutputMatrixWriteRegionDriver(ee,ne,ie,oe){this.throwIfDisposed(),callAndCheck(this.gl,()=>this.gl.scissor(ee,ne,ie,oe))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function linearSearchLastTrue(re){let ee=0;for(;ee<re.length&&re[ee]();++ee);return ee-1}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims}=backend_util;function makeShader(re,ee,ne,ie){const oe=[];re.forEach(ye=>{const be=sizeFromShape(ye.shapeInfo.logicalShape);ye.shapeInfo.isUniform?oe.push(`uniform float ${ye.name}${be>1?`[${be}]`:""};`):(oe.push(`uniform sampler2D ${ye.name};`),oe.push(`uniform int offset${ye.name};`))});const ae=oe.join(`
`),ce=re.map(ye=>getInputSamplingSnippet(ye,ee,ie)).join(`
`),le=ee.texShape,ue=getGlslDifferences(),he=getFloatTextureSampleSnippet(ue);let fe,me,ge=getShaderPrefix(ue);return ee.isPacked?(fe=getPackedOutputSamplingSnippet(ee.logicalShape,le),me=getFloatTextureSetRGBASnippet(ue)):(fe=getOutputSamplingSnippet(ee.logicalShape,le),me=getFloatTextureSetRSnippet(ue)),ie&&(ge+=SHADER_PACKED_PREFIX),[ge,he,me,ae,fe,ce,ne].join(`
`)}function getSamplerFromInInfo(re){const ee=re.shapeInfo.logicalShape;switch(ee.length){case 0:return getSamplerScalar(re);case 1:return getSampler1D(re);case 2:return getSampler2D(re);case 3:return getSampler3D(re);case 4:return getSampler4D(re);case 5:return getSampler5D(re);case 6:return getSampler6D(re);default:throw new Error(`${ee.length}-D input sampling is not yet supported`)}}function getPackedSamplerFromInInfo(re){switch(re.shapeInfo.logicalShape.length){case 0:return getPackedSamplerScalar(re);case 1:return getPackedSampler1D(re);case 2:return getPackedSampler2D(re);case 3:return getPackedSampler3D(re);default:return getPackedSamplerND(re)}}function getInputSamplingSnippet(re,ee,ne=!1){let ie="";ne?ie+=getPackedSamplerFromInInfo(re):ie+=getSamplerFromInInfo(re);const oe=re.shapeInfo.logicalShape,ae=ee.logicalShape;return oe.length<=ae.length&&(ne?ie+=getPackedSamplerAtOutputCoords(re,ee):ie+=getSamplerAtOutputCoords(re,ee)),ie}function getPackedOutputSamplingSnippet(re,ee){switch(re.length){case 0:return getOutputScalarCoords();case 1:return getOutputPacked1DCoords(re,ee);case 2:return getOutputPacked2DCoords(re,ee);case 3:return getOutputPacked3DCoords(re,ee);default:return getOutputPackedNDCoords(re,ee)}}function getOutputSamplingSnippet(re,ee){switch(re.length){case 0:return getOutputScalarCoords();case 1:return getOutput1DCoords(re,ee);case 2:return getOutput2DCoords(re,ee);case 3:return getOutput3DCoords(re,ee);case 4:return getOutput4DCoords(re,ee);case 5:return getOutput5DCoords(re,ee);case 6:return getOutput6DCoords(re,ee);default:throw new Error(`${re.length}-D output sampling is not yet supported`)}}function getFloatTextureSampleSnippet(re){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${re.texture2D}(textureSampler, uv).r;
    }
  `}function getFloatTextureSetRSnippet(re){return`
    void setOutput(float val) {
      ${re.output} = vec4(val, 0, 0, 0);
    }
  `}function getFloatTextureSetRGBASnippet(re){return`
    void setOutput(vec4 val) {
      ${re.output} = val;
    }
  `}function getShaderPrefix(re){return`${re.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${re.varyingFs} vec2 resultUV;
    ${re.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${re.defineSpecialNaN}
    ${re.defineSpecialInf}
    ${re.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${SAMPLE_1D_SNIPPET}
    ${SAMPLE_2D_SNIPPET}
    ${SAMPLE_3D_SNIPPET}
  `}const SAMPLE_1D_SNIPPET=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SAMPLE_2D_SNIPPET=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SAMPLE_3D_SNIPPET=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,SHADER_PACKED_PREFIX=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function getOutputScalarCoords(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function getOutputPacked1DCoords(re,ee){const ne=[Math.ceil(ee[0]/2),Math.ceil(ee[1]/2)];return ne[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${ne[1]}.0);
      }
    `:ne[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${ne[0]}.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ne[0]}, ${ne[1]}));
      return 2 * (resTexRC.x * ${ne[1]} + resTexRC.y);
    }
  `}function getOutput1DCoords(re,ee){return ee[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * ${ee[1]}.0);
      }
    `:ee[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * ${ee[0]}.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ee[0]}, ${ee[1]}));
      return resTexRC.x * ${ee[1]} + resTexRC.y;
    }
  `}function getOutputPacked3DCoords(re,ee){const ne=[Math.ceil(ee[0]/2),Math.ceil(ee[1]/2)],ie=Math.ceil(re[2]/2),oe=ie*Math.ceil(re[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ne[0]}, ${ne[1]}));
      int index = resTexRC.x * ${ne[1]} + resTexRC.y;

      int b = index / ${oe};
      index -= b * ${oe};

      int r = 2 * (index / ${ie});
      int c = imod(index, ${ie}) * 2;

      return ivec3(b, r, c);
    }
  `}function getOutput3DCoords(re,ee){const ne=getLogicalCoordinatesFromFlatIndex(["r","c","d"],re);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ee[0]}, ${ee[1]}));
      int index = resTexRC.x * ${ee[1]} + resTexRC.y;
      ${ne}
      return ivec3(r, c, d);
    }
  `}function getOutputPackedNDCoords(re,ee){const ne=[Math.ceil(ee[0]/2),Math.ceil(ee[1]/2)],ie=Math.ceil(re[re.length-1]/2),oe=ie*Math.ceil(re[re.length-2]/2);let ae=oe,ce="",le="b, r, c";for(let ue=2;ue<re.length-1;ue++)ae*=re[re.length-ue-1],ce=`
      int b${ue} = index / ${ae};
      index -= b${ue} * ${ae};
    `+ce,le=`b${ue}, `+le;return`
    ivec${re.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ne[0]}, ${ne[1]}));
      int index = resTexRC.x * ${ne[1]} + resTexRC.y;

      ${ce}

      int b = index / ${oe};
      index -= b * ${oe};

      int r = 2 * (index / ${ie});
      int c = imod(index, ${ie}) * 2;

      return ivec${re.length}(${le});
    }
  `}function getOutput4DCoords(re,ee){const ne=getLogicalCoordinatesFromFlatIndex(["r","c","d","d2"],re);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${ee[0]}, ${ee[1]}));
      int index = resTexRC.x * ${ee[1]} + resTexRC.y;
      ${ne}
      return ivec4(r, c, d, d2);
    }
  `}function getOutput5DCoords(re,ee){const ne=getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3"],re);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${ee[0]},
                             ${ee[1]}));

      int index = resTexRC.x * ${ee[1]} + resTexRC.y;

      ${ne}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function getOutput6DCoords(re,ee){const ne=getLogicalCoordinatesFromFlatIndex(["r","c","d","d2","d3","d4"],re);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${ee[0]}, ${ee[1]}));
      int index = resTexRC.x * ${ee[1]} + resTexRC.y;

      ${ne}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function getOutputPacked2DCoords(re,ee){const ne=[Math.ceil(ee[0]/2),Math.ceil(ee[1]/2)];if(arraysEqual(re,ee))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${ne[0]}, ${ne[1]}));
      }
    `;const ie=Math.ceil(re[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ne[0]}, ${ne[1]}));

      int index = resTexRC.x * ${ne[1]} + resTexRC.y;
      int r = 2 * (index / ${ie});
      int c = imod(index, ${ie}) * 2;

      return ivec2(r, c);
    }
  `}function getOutput2DCoords(re,ee){return arraysEqual(re,ee)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${ee[0]}, ${ee[1]}));
      }
    `:re[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${ee[0]}, ${ee[1]}));
        int index = resTexRC.x * ${ee[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:re[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${ee[0]}, ${ee[1]}));
        int index = resTexRC.x * ${ee[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${ee[0]}, ${ee[1]}));
      int index = resTexRC.x * ${ee[1]} + resTexRC.y;
      int r = index / ${re[1]};
      int c = index - r * ${re[1]};
      return ivec2(r, c);
    }
  `}function getFlatOffsetUniformName(re){return`offset${re}`}function getPackedSamplerScalar(re){const ee=re.name,ne="get"+ee.charAt(0).toUpperCase()+ee.slice(1),ie=getGlslDifferences();return`
    vec4 ${ne}() {
      return ${ie.texture2D}(${ee}, halfCR);
    }
  `}function getSamplerScalar(re){const ee=re.name,ne="get"+ee.charAt(0).toUpperCase()+ee.slice(1);if(re.shapeInfo.isUniform)return`float ${ne}() {return ${ee};}`;const[ie,oe]=re.shapeInfo.texShape;if(ie===1&&oe===1)return`
      float ${ne}() {
        return sampleTexture(${ee}, halfCR);
      }
    `;const[ae,ce]=re.shapeInfo.texShape,le=getFlatOffsetUniformName(ee);return`
    float ${ne}() {
      vec2 uv = uvFromFlat(${ae}, ${ce}, ${le});
      return sampleTexture(${ee}, uv);
    }
  `}function getPackedSampler1D(re){const ee=re.name,ne="get"+ee.charAt(0).toUpperCase()+ee.slice(1),ie=re.shapeInfo.texShape,oe=[Math.ceil(ie[0]/2),Math.ceil(ie[1]/2)],ae=getGlslDifferences();return`
    vec4 ${ne}(int index) {
      vec2 uv = packedUVfrom1D(
        ${oe[0]}, ${oe[1]}, index);
      return ${ae.texture2D}(${ee}, uv);
    }
  `}function getSampler1D(re){const ee=re.name,ne="get"+ee.charAt(0).toUpperCase()+ee.slice(1);if(re.shapeInfo.isUniform)return`
      float ${ne}(int index) {
        ${getUniformSampler(re)}
      }
    `;const ie=re.shapeInfo.texShape,oe=ie[0],ae=ie[1];if(ae===1&&oe===1)return`
      float ${ne}(int index) {
        return sampleTexture(${ee}, halfCR);
      }
    `;const ce=getFlatOffsetUniformName(ee);return ae===1?`
      float ${ne}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${ce}) + 0.5) / ${oe}.0);
        return sampleTexture(${ee}, uv);
      }
    `:oe===1?`
      float ${ne}(int index) {
        vec2 uv = vec2((float(index + ${ce}) + 0.5) / ${ae}.0, 0.5);
        return sampleTexture(${ee}, uv);
      }
    `:`
    float ${ne}(int index) {
      vec2 uv = uvFromFlat(${oe}, ${ae}, index + ${ce});
      return sampleTexture(${ee}, uv);
    }
  `}function getPackedSampler2D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ie="get"+ne.charAt(0).toUpperCase()+ne.slice(1),oe=re.shapeInfo.texShape,ae=oe[0],ce=oe[1],le=getGlslDifferences();if(oe!=null&&arraysEqual(ee,oe))return`
      vec4 ${ie}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${ce}.0, ${ae}.0);

        return ${le.texture2D}(${ne}, uv);
      }
    `;const ue=[Math.ceil(oe[0]/2),Math.ceil(oe[1]/2)],he=Math.ceil(ee[1]/2);return`
    vec4 ${ie}(int row, int col) {
      vec2 uv = packedUVfrom2D(${he}, ${ue[0]}, ${ue[1]}, row, col);
      return ${le.texture2D}(${ne}, uv);
    }
  `}function getSampler2D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ie="get"+ne.charAt(0).toUpperCase()+ne.slice(1),oe=re.shapeInfo.texShape;if(oe!=null&&arraysEqual(ee,oe)){const me=oe[0],ge=oe[1];return`
    float ${ie}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${ge}.0, ${me}.0);
      return sampleTexture(${ne}, uv);
    }
  `}const{newShape:ae,keptDims:ce}=squeezeShape(ee),le=ae;if(le.length<ee.length){const me=squeezeInputInfo(re,le),ge=["row","col"];return`
      ${getSamplerFromInInfo(me)}
      float ${ie}(int row, int col) {
        return ${ie}(${getSqueezedParams(ge,ce)});
      }
    `}if(re.shapeInfo.isUniform)return`
      float ${ie}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${ee[1]}, 1)));
        ${getUniformSampler(re)}
      }
    `;const ue=oe[0],he=oe[1],fe=getFlatOffsetUniformName(ne);return he===1?`
    float ${ie}(int row, int col) {
      float index = dot(vec3(row, col, ${fe}), vec3(${ee[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${ue}.0);
      return sampleTexture(${ne}, uv);
    }
  `:ue===1?`
    float ${ie}(int row, int col) {
      float index = dot(vec3(row, col, ${fe}), vec3(${ee[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${he}.0, 0.5);
      return sampleTexture(${ne}, uv);
    }
  `:`
  float ${ie}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${ee[1]} + col + ${fe};
    vec2 uv = uvFromFlat(${ue}, ${he}, index);
    return sampleTexture(${ne}, uv);
  }
`}function getPackedSampler3D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ie="get"+ne.charAt(0).toUpperCase()+ne.slice(1),oe=re.shapeInfo.texShape,ae=[Math.ceil(oe[0]/2),Math.ceil(oe[1]/2)];if(ee[0]===1){const me=ee.slice(1),ge=[1,2],ve=squeezeInputInfo(re,me),ye=["b","row","col"];return`
        ${getPackedSamplerFromInInfo(ve)}
        vec4 ${ie}(int b, int row, int col) {
          return ${ie}(${getSqueezedParams(ye,ge)});
        }
      `}const ce=ae[0],le=ae[1],ue=Math.ceil(ee[2]/2),he=ue*Math.ceil(ee[1]/2),fe=getGlslDifferences();return`
    vec4 ${ie}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${ce}, ${le}, ${he}, ${ue}, b, row, col);
      return ${fe.texture2D}(${ne}, uv);
    }
  `}function getSampler3D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ie="get"+ne.charAt(0).toUpperCase()+ne.slice(1),oe=ee[1]*ee[2],ae=ee[2],{newShape:ce,keptDims:le}=squeezeShape(ee),ue=ce;if(ue.length<ee.length){const ye=squeezeInputInfo(re,ue),be=["row","col","depth"];return`
        ${getSamplerFromInInfo(ye)}
        float ${ie}(int row, int col, int depth) {
          return ${ie}(${getSqueezedParams(be,le)});
        }
      `}if(re.shapeInfo.isUniform)return`
      float ${ie}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${oe}, ${ae}, 1)));
        ${getUniformSampler(re)}
      }
    `;const he=re.shapeInfo.texShape,fe=he[0],me=he[1],ge=re.shapeInfo.flatOffset;if(me===oe&&ge==null)return`
        float ${ie}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${ae}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${me}.0, ${fe}.0);
          return sampleTexture(${ne}, uv);
        }
      `;if(me===ae&&ge==null)return`
    float ${ie}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${ee[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${me}.0, ${fe}.0);
      return sampleTexture(${ne}, uv);
    }
  `;const ve=getFlatOffsetUniformName(ne);return`
      float ${ie}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${oe} + col * ${ae} + depth + ${ve};
        vec2 uv = uvFromFlat(${fe}, ${me}, index);
        return sampleTexture(${ne}, uv);
      }
  `}function getPackedSamplerND(re){const ee=re.shapeInfo.logicalShape,ne=ee.length,ie=re.name,oe="get"+ie.charAt(0).toUpperCase()+ie.slice(1),ae=re.shapeInfo.texShape,ce=[Math.ceil(ae[0]/2),Math.ceil(ae[1]/2)],le=ce[0],ue=ce[1],he=Math.ceil(ee[ne-1]/2);let fe=he*Math.ceil(ee[ne-2]/2),me="int b, int row, int col",ge=`b * ${fe} + (row / 2) * ${he} + (col / 2)`;for(let ye=2;ye<ne-1;ye++)me=`int b${ye}, `+me,fe*=ee[ne-ye-1],ge=`b${ye} * ${fe} + `+ge;const ve=getGlslDifferences();return`
    vec4 ${oe}(${me}) {
      int index = ${ge};
      int texR = index / ${ue};
      int texC = index - texR * ${ue};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${ue}, ${le});
      return ${ve.texture2D}(${ie}, uv);
    }
  `}function getSampler4D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ie="get"+ne.charAt(0).toUpperCase()+ne.slice(1),oe=ee[3],ae=ee[2]*oe,ce=ee[1]*ae,{newShape:le,keptDims:ue}=squeezeShape(ee);if(le.length<ee.length){const ye=squeezeInputInfo(re,le),be=["row","col","depth","depth2"];return`
      ${getSamplerFromInInfo(ye)}
      float ${ie}(int row, int col, int depth, int depth2) {
        return ${ie}(${getSqueezedParams(be,ue)});
      }
    `}if(re.shapeInfo.isUniform)return`
      float ${ie}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${ce}, ${ae}, ${oe}, 1)));
        ${getUniformSampler(re)}
      }
    `;const he=re.shapeInfo.flatOffset,fe=re.shapeInfo.texShape,me=fe[0],ge=fe[1];if(ge===ce&&he==null)return`
      float ${ie}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${ae}, ${oe}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${ge}.0, ${me}.0);
        return sampleTexture(${ne}, uv);
      }
    `;if(ge===oe&&he==null)return`
      float ${ie}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${ee[1]*ee[2]}, ${ee[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${ge}.0, ${me}.0);
        return sampleTexture(${ne}, uv);
      }
    `;const ve=getFlatOffsetUniformName(ne);return`
    float ${ie}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${ce} + col * ${ae} +
          depth * ${oe} + depth2;
      vec2 uv = uvFromFlat(${me}, ${ge}, index + ${ve});
      return sampleTexture(${ne}, uv);
    }
  `}function getSampler5D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ie="get"+ne.charAt(0).toUpperCase()+ne.slice(1),oe=ee[4],ae=ee[3]*oe,ce=ee[2]*ae,le=ee[1]*ce,{newShape:ue,keptDims:he}=squeezeShape(ee);if(ue.length<ee.length){const be=squeezeInputInfo(re,ue),Ce=["row","col","depth","depth2","depth3"];return`
      ${getSamplerFromInInfo(be)}
      float ${ie}(int row, int col, int depth, int depth2, int depth3) {
        return ${ie}(${getSqueezedParams(Ce,he)});
      }
    `}if(re.shapeInfo.isUniform)return`
      float ${ie}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${le}, ${ce}, ${ae}, ${oe})) +
          depth3;
        ${getUniformSampler(re)}
      }
    `;const fe=re.shapeInfo.flatOffset,me=re.shapeInfo.texShape,ge=me[0],ve=me[1];if(ve===le&&fe==null)return`
      float ${ie}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${ce}, ${ae}, ${oe}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${ve}.0, ${ge}.0);
        return sampleTexture(${ne}, uv);
      }
    `;if(ve===oe&&fe==null)return`
      float ${ie}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${ee[1]*ee[2]*ee[3]},
               ${ee[2]*ee[3]}, ${ee[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${ve}.0, ${ge}.0);
        return sampleTexture(${ne}, uv);
      }
    `;const ye=getFlatOffsetUniformName(ne);return`
    float ${ie}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${le} + col * ${ce} + depth * ${ae} +
          depth2 * ${oe} + depth3 + ${ye};
      vec2 uv = uvFromFlat(${ge}, ${ve}, index);
      return sampleTexture(${ne}, uv);
    }
  `}function getSampler6D(re){const ee=re.shapeInfo.logicalShape,ne=re.name,ie="get"+ne.charAt(0).toUpperCase()+ne.slice(1),{newShape:oe,keptDims:ae}=squeezeShape(ee);if(oe.length<ee.length){const Ce=squeezeInputInfo(re,oe),Se=["row","col","depth","depth2","depth3","depth4"];return`
      ${getSamplerFromInInfo(Ce)}
      float ${ie}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${ie}(${getSqueezedParams(Se,ae)});
      }
    `}const ce=ee[5],le=ee[4]*ce,ue=ee[3]*le,he=ee[2]*ue,fe=ee[1]*he;if(re.shapeInfo.isUniform)return`
      float ${ie}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${fe}, ${he}, ${ue}, ${le})) +
          dot(
            vec2(depth3, depth4),
            vec2(${ce}, 1)));
        ${getUniformSampler(re)}
      }
    `;const me=re.shapeInfo.flatOffset,ge=re.shapeInfo.texShape,ve=ge[0],ye=ge[1];if(ye===fe&&me==null)return`
      float ${ie}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${he}, ${ue}, ${le}, ${ce})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${ye}.0, ${ve}.0);
        return sampleTexture(${ne}, uv);
      }
    `;if(ye===ce&&me==null)return`
      float ${ie}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${ee[1]*ee[2]*ee[3]*ee[4]},
               ${ee[2]*ee[3]*ee[4]},
               ${ee[3]*ee[4]},
               ${ee[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${ye}.0, ${ve}.0);
        return sampleTexture(${ne}, uv);
      }
    `;const be=getFlatOffsetUniformName(ne);return`
    float ${ie}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${fe} + col * ${he} + depth * ${ue} +
          depth2 * ${le} + depth3 * ${ce} + depth4 + ${be};
      vec2 uv = uvFromFlat(${ve}, ${ye}, index);
      return sampleTexture(${ne}, uv);
    }
  `}function getUniformSampler(re){const ee=re.name,ne=sizeFromShape(re.shapeInfo.logicalShape);return ne<2?`return ${ee};`:`
    for (int i = 0; i < ${ne}; i++) {
      if (i == index) {
        return ${ee}[i];
      }
    }
  `}function getPackedSamplerAtOutputCoords(re,ee){const ne=re.name,ie=ne.charAt(0).toUpperCase()+ne.slice(1),oe="get"+ie+"AtOutCoords",ae=re.shapeInfo.logicalShape.length,ce=ee.logicalShape.length,le=getBroadcastDims(re.shapeInfo.logicalShape,ee.logicalShape),ue=getCoordsDataType(ce),he=ce-ae;let fe;const me=["x","y","z","w","u","v"];ae===0?fe="":ce<2&&le.length>=1?fe="coords = 0;":fe=le.map($e=>`coords.${me[$e+he]} = 0;`).join(`
`);let ge="";ce<2&&ae>0?ge="coords":ge=re.shapeInfo.logicalShape.map(($e,Te)=>`coords.${me[Te+he]}`).join(", ");let ve="return outputValue;";const be=sizeFromShape(re.shapeInfo.logicalShape)===1,Se=sizeFromShape(ee.logicalShape)===1;if(ae===1&&!be&&!Se)ve=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(be&&!Se)ce===1?ve=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:ve=`
        return vec4(outputValue.x);
      `;else if(le.length){const $e=ae-2,Te=ae-1;le.indexOf($e)>-1&&le.indexOf(Te)>-1?ve="return vec4(outputValue.x);":le.indexOf($e)>-1?ve="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":le.indexOf(Te)>-1&&(ve="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${oe}() {
      ${ue} coords = getOutputCoords();
      ${fe}
      vec4 outputValue = get${ie}(${ge});
      ${ve}
    }
  `}function getSamplerAtOutputCoords(re,ee){const ne=re.name,ie=ne.charAt(0).toUpperCase()+ne.slice(1),oe="get"+ie+"AtOutCoords",ae=ee.texShape,ce=re.shapeInfo.texShape,le=re.shapeInfo.logicalShape.length,ue=ee.logicalShape.length;if(!re.shapeInfo.isUniform&&le===ue&&re.shapeInfo.flatOffset==null&&arraysEqual(ce,ae))return`
      float ${oe}() {
        return sampleTexture(${ne}, resultUV);
      }
    `;const he=getCoordsDataType(ue),fe=getBroadcastDims(re.shapeInfo.logicalShape,ee.logicalShape),me=ue-le;let ge;const ve=["x","y","z","w","u","v"];le===0?ge="":ue<2&&fe.length>=1?ge="coords = 0;":ge=fe.map(be=>`coords.${ve[be+me]} = 0;`).join(`
`);let ye="";return ue<2&&le>0?ye="coords":ye=re.shapeInfo.logicalShape.map((be,Ce)=>`coords.${ve[Ce+me]}`).join(", "),`
    float ${oe}() {
      ${he} coords = getOutputCoords();
      ${ge}
      return get${ie}(${ye});
    }
  `}function getCoordsDataType(re){if(re<=1)return"int";if(re===2)return"ivec2";if(re===3)return"ivec3";if(re===4)return"ivec4";if(re===5)return"ivec5";if(re===6)return"ivec6";throw Error(`GPU for rank ${re} is not yet supported`)}function squeezeInputInfo(re,ee){const ne=JSON.parse(JSON.stringify(re));return ne.shapeInfo.logicalShape=ee,ne}function getSqueezedParams(re,ee){return ee.map(ne=>re[ne]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function compileProgram(re,ee,ne,ie){const oe=ee.userCode,ae=ne.map((ve,ye)=>{const be={logicalShape:ve.shape,texShape:ve.isUniform?null:ve.texData.texShape,isUniform:ve.isUniform,isPacked:ve.isUniform?!1:ve.texData.isPacked,flatOffset:null};return ve.texData!=null&&ve.texData.slice!=null&&ve.texData.slice.flatOffset>0&&(be.flatOffset=ve.texData.slice.flatOffset),{name:ee.variableNames[ye],shapeInfo:be}}),ce=ae.map(ve=>ve.shapeInfo),le={logicalShape:ie.shape,texShape:ie.texData.texShape,isUniform:!1,isPacked:ie.texData.isPacked,flatOffset:null},ue=makeShader(ae,le,oe,ee.packedInputs),he=re.createProgram(ue);let fe=null;const me=re.getUniformLocation(he,"NAN",!1);env().getNumber("WEBGL_VERSION")===1&&(fe=re.getUniformLocation(he,"INFINITY",!1));const ge={};for(let ve=0;ve<ee.variableNames.length;ve++){const ye=ee.variableNames[ve],be=!1;ge[ye]=re.getUniformLocation(he,ye,be),ge[`offset${ye}`]=re.getUniformLocation(he,`offset${ye}`,be)}return{program:ee,source:ue,webGLProgram:he,uniformLocations:ge,inShapeInfos:ce,outShapeInfo:le,infLoc:fe,nanLoc:me}}function validateBinaryAndProgram(re,ee){if(re.length!==ee.length)throw Error(`Binary was compiled with ${re.length} inputs, but was executed with ${ee.length} inputs`);re.forEach((ne,ie)=>{const oe=ne.logicalShape,ae=ee[ie],ce=ae.shape;if(!arraysEqual(oe,ce))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${oe} and ${ce} must match`);if(ne.isUniform&&ae.isUniform)return;const le=ne.texShape,ue=ae.isUniform?null:ae.texData.texShape;if(!arraysEqual(le,ue))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${le} and ${ue} must match`)})}function runProgram(re,ee,ne,ie,oe){validateBinaryAndProgram(ee.inShapeInfos,ne),validateBinaryAndProgram([ee.outShapeInfo],[ie]);const ae=ie.texData.texture,ce=ie.texData.texShape;ie.texData.isPacked?re.setOutputPackedMatrixTexture(ae,ce[0],ce[1]):re.setOutputMatrixTexture(ae,ce[0],ce[1]),re.setProgram(ee.webGLProgram),env().getNumber("WEBGL_VERSION")===1&&ee.infLoc!==null&&re.gl.uniform1f(ee.infLoc,1/0),ee.nanLoc!==null&&re.gl.uniform1f(ee.nanLoc,NaN),ne.forEach((le,ue)=>{const he=ee.program.variableNames[ue],fe=ee.uniformLocations[he],me=ee.uniformLocations[`offset${he}`];if(fe!=null){if(le.isUniform){if(sizeFromShape(le.shape)<2)re.gl.uniform1f(fe,le.uniformValues[0]);else{let ge=le.uniformValues;ge instanceof Float32Array||(ge=new Float32Array(ge)),re.gl.uniform1fv(fe,ge)}return}le.texData.slice!=null&&me!=null&&re.gl.uniform1i(me,le.texData.slice.flatOffset),re.setInputMatrixTexture(le.texData.texture,fe,ue)}}),oe!=null&&oe(re,ee.webGLProgram),re.executeProgram()}function makeShaderKey(re,ee,ne){let ie="";ee.concat(ne).forEach(ce=>{const le=ce.texData!=null&&ce.texData.slice!=null&&ce.texData.slice.flatOffset>0,ue=ce.isUniform?"uniform":ce.texData.texShape;ie+=`${ce.shape}_${ue}_${le}`});const oe=re.userCode;let ae=re.constructor.name;return ae+="_"+ie+"_"+oe,ae}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:addImplCPU,bincountImpl:bincountImplCPU,bincountReduceImpl:bincountReduceImplCPU,ceilImpl:ceilImplCPU,concatImpl:concatImplCPU,expImpl:expImplCPU,expm1Impl:expm1ImplCPU,floorImpl:floorImplCPU,gatherV2Impl:gatherV2ImplCPU,greaterImpl:greaterImplCPU,lessImpl:lessImplCPU,linSpaceImpl:linSpaceImplCPU,logImpl:logImplCPU,maxImpl:maxImplCPU,maximumImpl:maximumImplCPU,minimumImpl:minimumImplCPU,multiplyImpl:multiplyImplCPU,negImpl:negImplCPU,prodImpl:prodImplCPU,rangeImpl:rangeImplCPU,rsqrtImpl:rsqrtImplCPU,simpleAbsImpl:simpleAbsImplCPU,sliceImpl:sliceImplCPU,stridedSliceImpl:stridedSliceImplCPU,subImpl:subImplCPU,tileImpl:tileImplCPU,topKImpl:topKImplCPU,transposeImpl:transposeImplCPU,uniqueImpl:uniqueImplCPU}=shared;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getVecChannels(re,ee){return["x","y","z","w","u","v"].slice(0,ee).map(ne=>`${re}.${ne}`)}function getChannels(re,ee){return ee===1?[re]:getVecChannels(re,ee)}function getSourceCoords$2(re,ee){if(re===1)return"rc";let ne="";for(let ie=0;ie<re;ie++)ne+=ee[ie],ie<re-1&&(ne+=",");return ne}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PackProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=ee;const ne=ee.length;if(ne===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const ie=getChannels("rc",ne),oe=getCoordsDataType(ne),ae=getOutOfBoundsCondition(ne,ee,ie),ce=getSetup(ne,ee[ee.length-1],ee[ee.length-2],ie),le=getOutput(ee,ie);this.userCode=`
        void main() {
          ${oe} rc = getOutputCoords();

          if(${ae}) {
            setOutput(vec4(0));
          } else {
            ${ce}

            setOutput(vec4(${le}));
          }
        }
      `}}}function getSourceCoordsArr(re,ee){const ne=[];for(let ie=0;ie<=1;ie++)for(let oe=0;oe<=1;oe++){let ae=`${ie===0?"r":"rp1"}, ${oe===0?"c":"cp1"}`;for(let ce=2;ce<re;ce++)ae=`${ee[ee.length-1-ce]},`+ae;ne.push(ae)}return ne}function getOutOfBoundsCondition(re,ee,ne){if(re===1)return`rc > ${ee[0]}`;let ie="";for(let oe=re-2;oe<re;oe++)ie+=`${ne[oe]} >= ${ee[oe]}`,oe<re-1&&(ie+="||");return ie}function getSetup(re,ee,ne,ie){if(re===1)return"";const oe=ie.slice(-2);return`
    int r = ${oe[0]};
    int c = ${oe[1]};
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= ${ee};
    bool rEdge = rp1 >= ${ne};
  `}function getOutput(re,ee){const ne=re.length,ie=getSourceCoordsArr(ne,ee);return ne===1?`getA(rc),
            rc + 1 >= ${re[0]} ? 0. : getA(rc + 1),
            0, 0`:`getA(${ie[0]}),
          cEdge ? 0. : getA(${ie[1]}),
          rEdge ? 0. : getA(${ie[2]}),
          rEdge || cEdge ? 0. : getA(${ie[3]})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReshapePackedProgram{constructor(ee,ne){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee;let ie="";for(let oe=0;oe<4;oe++){let ae="thisRC = rc;";oe%2===1&&(ae+="thisRC.z += 1;"),oe>1&&(ae+="thisRC.y += 1;"),ie+=`
        ${ae}
        ${oe>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${oe}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${oe>0?"}":""}
      `}this.userCode=`
      ${getReshapedInputCoords(ne)}
      ${getFlatIndexFrom3D(ee)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${ee[1]};
        int cols = ${ee[2]};

        ${ie}

        setOutput(result);
      }
    `}}function getReshapedInputCoords(re){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${getLogicalCoordinatesFromFlatIndex(["r","c","d"],re)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TextureManager{constructor(ee){this.gpgpu=ee,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}acquireTexture(ee,ne,ie){const oe=getPhysicalFromLogicalTextureType(ne,ie),ae=getKeyFromTextureShape(ee,oe,ie);ae in this.freeTextures||(this.freeTextures[ae]=[]),ae in this.usedTextures||(this.usedTextures[ae]=[]);const ce=computeBytes(ee,oe,this.gpgpu.gl,this.gpgpu.textureConfig,ie);if(this.freeTextures[ae].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=ce,this.log();const ue=this.freeTextures[ae].shift();return this.usedTextures[ae].push(ue),ue}let le;return oe===PhysicalTextureType.PACKED_2X2_FLOAT32?le=this.gpgpu.createPackedMatrixTexture(ee[0],ee[1]):oe===PhysicalTextureType.PACKED_2X2_FLOAT16?le=this.gpgpu.createFloat16PackedMatrixTexture(ee[0],ee[1]):oe===PhysicalTextureType.UNPACKED_FLOAT32?le=this.gpgpu.createFloat32MatrixTexture(ee[0],ee[1]):oe===PhysicalTextureType.UNPACKED_FLOAT16?le=this.gpgpu.createFloat16MatrixTexture(ee[0],ee[1]):oe===PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE&&(le=this.gpgpu.createUnsignedBytesMatrixTexture(ee[0],ee[1])),this.usedTextures[ae].push(le),this.numUsedTextures++,this._numBytesAllocated+=ce,this.log(),le}releaseTexture(ee,ne,ie,oe){if(this.freeTextures==null)return;const ae=getPhysicalFromLogicalTextureType(ie,oe),ce=getKeyFromTextureShape(ne,ae,oe);ce in this.freeTextures||(this.freeTextures[ce]=[]);const le=computeBytes(ne,ae,this.gpgpu.gl,this.gpgpu.textureConfig,oe),ue=env().get("WEBGL_DELETE_TEXTURE_THRESHOLD");ue!==-1&&this._numBytesAllocated>ue?(this.gpgpu.deleteMatrixTexture(ee),this._numBytesAllocated-=le):(this.freeTextures[ce].push(ee),this.numFreeTextures++,this._numBytesFree+=le),this.numUsedTextures--;const he=this.usedTextures[ce],fe=he.indexOf(ee);if(fe<0)throw new Error("Cannot release a texture that was never provided by this texture manager");he.splice(fe,1),this.log()}log(){if(!this.logEnabled)return;const ee=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${ee})`);const ne=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*ne)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const ee in this.freeTextures)this.freeTextures[ee].forEach(ne=>{this.gpgpu.deleteMatrixTexture(ne)});for(const ee in this.usedTextures)this.usedTextures[ee].forEach(ne=>{this.gpgpu.deleteMatrixTexture(ne)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function numBytesForInternalFormat(re,ee){const ne=re;if(ee===ne.R32F)return 4;if(ee===ne.R16F)return 2;if(ee===ne.RGBA32F)return 16;if(ee===re.RGBA)return 16;if(ee===ne.RGBA16F)return 8;throw new Error(`Unknown internal format ${ee}`)}function computeBytes(re,ee,ne,ie,oe){const ae=internalFormatForPhysicalTexType(ee,ie);let ce;if(oe){const[ue,he]=getPackedMatrixTextureShapeWidthHeight(re[0],re[1]);ce=ue*he}else{const[ue,he]=getUnpackedMatrixTextureShapeWidthHeight(re[0],re[1]);ce=ue*he}const le=numBytesForInternalFormat(ne,ae);return ce*le}function internalFormatForPhysicalTexType(re,ee){switch(re){case PhysicalTextureType.PACKED_2X2_FLOAT32:return getInternalFormatForPackedMatrixTexture(ee);case PhysicalTextureType.PACKED_2X2_FLOAT16:return getInternalFormatForFloat16PackedMatrixTexture(ee);case PhysicalTextureType.UNPACKED_FLOAT32:return getInternalFormatForFloat32MatrixTexture(ee);case PhysicalTextureType.UNPACKED_FLOAT16:return getInternalFormatForFloat16MatrixTexture(ee);case PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE:return getInternalFormatForUnsignedBytesMatrixTexture(ee);default:throw new Error(`Unknown physical texture type ${re}`)}}function getPhysicalTextureForRendering(re){return env().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?re?PhysicalTextureType.PACKED_2X2_FLOAT32:PhysicalTextureType.UNPACKED_FLOAT32:re?PhysicalTextureType.PACKED_2X2_FLOAT16:PhysicalTextureType.UNPACKED_FLOAT16}function getPhysicalFromLogicalTextureType(re,ee){if(re===TextureUsage.UPLOAD)return PhysicalTextureType.PACKED_2X2_FLOAT32;if(re===TextureUsage.RENDER||re==null)return getPhysicalTextureForRendering(ee);if(re===TextureUsage.DOWNLOAD||re===TextureUsage.PIXELS)return PhysicalTextureType.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${re}`)}function getKeyFromTextureShape(re,ee,ne){return`${re[0]}_${re[1]}_${ee}_${ne}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UnaryOpProgram{constructor(ee,ne){this.variableNames=["A"],this.outputShape=ee,this.userCode=`
      float unaryOperation(float x) {
        ${ne}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const CHECK_NAN_SNIPPET$2="if (isnan(x)) return x;",LINEAR$1="return x;",ABS$1="return abs(x);",ELU$2="return (x >= 0.0) ? x : (exp(x) - 1.0);",RELU$2=CHECK_NAN_SNIPPET$2+`
  return (x < 0.0) ? 0.0 : x;
`,RELU6$2=CHECK_NAN_SNIPPET$2+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,CLONE="return x;";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LINEAR="return x;",ELU$1=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,RELU$1=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RELU6$1=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;class UnaryOpPackedProgram{constructor(ee,ne){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${ne}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class UnpackProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=ee;const ne=ee.length,ie=getChannels("rc",ne),oe=getCoordsDataType(ne),ae=getSourceCoords$2(ne,ie),ce=ie.slice(-2),le=ne<=1?"rc":`vec2(${ce.join(",")})`;this.userCode=`
      void main() {
        ${oe} rc = getOutputCoords();
        vec4 packedInput = getA(${ae});

        setOutput(getChannel(packedInput, ${le}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const whereImpl=whereImpl$2,EPSILON_FLOAT32=1e-7,EPSILON_FLOAT16=1e-4,binaryCaches={};function getBinaryCache(re){return re in binaryCaches||(binaryCaches[re]={}),binaryCaches[re]}const CPU_HANDOFF_SIZE_THRESHOLD=128,BEFORE_PAGING_CONSTANT=600;function numMBBeforeWarning(){return env().global.screen==null?1024:env().global.screen.height*env().global.screen.width*window.devicePixelRatio*BEFORE_PAGING_CONSTANT/1024/1024}class MathBackendWebGL extends KernelBackend{constructor(ee){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.warnedAboutCPUBackend=!1,this.pendingDeletes=0,this.disposed=!1,!env().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(ee==null){const ne=getWebGLContext(env().getNumber("WEBGL_VERSION"));this.binaryCache=getBinaryCache(env().getNumber("WEBGL_VERSION")),this.gpgpu=new GPGPUContext(ne),this.canvas=ne.canvas,this.gpgpuCreatedLocally=!0}else this.gpgpu=ee,this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=ee.gl.canvas;this.textureManager=new TextureManager(this.gpgpu),this.numMBBeforeWarning=numMBBeforeWarning(),this.texData=new DataStorage(this,engine())}numDataIds(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes}write(ee,ne,ie){if((env().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||env().getBool("DEBUG"))&&this.checkNumericalProblems(ee),ie==="complex64"&&ee!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const oe={};return this.texData.set(oe,{shape:ne,dtype:ie,values:ee,usage:TextureUsage.UPLOAD,refCount:1,complexParentRefCount:0}),oe}incRef(ee){const ne=this.texData.get(ee);ne.refCount++}decRef(ee){if(this.texData.has(ee)){const ne=this.texData.get(ee);ne.refCount--}}decComplexRef(ee){if(this.texData.has(ee)){const ne=this.texData.get(ee);ne.complexParentRefCount>0&&ne.refCount--}}move(ee,ne,ie,oe){if(env().getBool("DEBUG")&&this.checkNumericalProblems(ne),oe==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(ee,{shape:ie,dtype:oe,values:ne,usage:TextureUsage.UPLOAD,refCount:1,complexParentRefCount:0})}disposeIntermediateTensorInfo(ee){const ne=ee.dataId;if(this.texData.has(ne)){const ie=this.texData.get(ne);ie.refCount--,ie.refCount<1&&this.disposeData(ne)}}readSync(ee){const ne=this.texData.get(ee),{values:ie,dtype:oe,complexTensorInfos:ae,slice:ce,shape:le,isPacked:ue}=ne;if(ce!=null){let ge;ue?ge=new UnaryOpPackedProgram(le,CLONE):ge=new UnaryOpProgram(le,CLONE);const ve=this.runWebGLProgram(ge,[{dataId:ee,shape:le,dtype:oe}],oe),ye=this.readSync(ve.dataId);return this.disposeIntermediateTensorInfo(ve),ye}if(ie!=null)return this.convertAndCacheOnCPU(ee);if(oe==="string")return ie;const he=this.activeTimers!=null;let fe;he&&(fe=now$1());let me;if(oe==="complex64"){const ge=this.readSync(ae.real.dataId),ve=this.readSync(ae.imag.dataId);me=mergeRealAndImagArrays(ge,ve)}else me=this.getValuesFromTexture(ee);return he&&(this.downloadWaitMs+=now$1()-fe),this.convertAndCacheOnCPU(ee,me)}async read(ee){if(this.pendingRead.has(ee)){const ye=this.pendingRead.get(ee);return new Promise(be=>ye.push(be))}const ne=this.texData.get(ee),{values:ie,shape:oe,slice:ae,dtype:ce,complexTensorInfos:le,isPacked:ue}=ne;if(ae!=null){let ye;ue?ye=new UnaryOpPackedProgram(oe,CLONE):ye=new UnaryOpProgram(oe,CLONE);const be=this.runWebGLProgram(ye,[{dataId:ee,shape:oe,dtype:ce}],ce),Ce=this.read(be.dataId);return this.disposeIntermediateTensorInfo(be),Ce}if(ie!=null)return this.convertAndCacheOnCPU(ee);if(!env().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&env().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let he=null,fe;if(ce!=="complex64"&&env().get("WEBGL_BUFFER_SUPPORTED")){fe=this.decode(ee);const ye=this.texData.get(fe.dataId);he=this.gpgpu.createBufferFromTexture(ye.texture,...getDenseTexShape(oe))}this.pendingRead.set(ee,[]),ce!=="complex64"&&await this.gpgpu.createAndWaitForFence();let me;if(ce==="complex64"){const ye=await Promise.all([this.read(le.real.dataId),this.read(le.imag.dataId)]),be=ye[0],Ce=ye[1];me=mergeRealAndImagArrays(be,Ce)}else if(he==null)me=this.getValuesFromTexture(ee);else{const ye=sizeFromShape(oe);me=this.gpgpu.downloadFloat32MatrixFromBuffer(he,ye)}fe!=null&&this.disposeIntermediateTensorInfo(fe);const ge=this.convertAndCacheOnCPU(ee,me),ve=this.pendingRead.get(ee);return this.pendingRead.delete(ee),ve.forEach(ye=>ye(ge)),this.pendingDisposal.has(ee)&&(this.pendingDisposal.delete(ee),this.disposeData(ee),this.pendingDeletes--),ge}bufferSync(ee){const ne=this.readSync(ee.dataId);let ie=ne;if(ee.dtype==="string")try{ie=ne.map(oe=>decodeString(oe))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return buffer$1(ee.shape,ee.dtype,ie)}checkNumericalProblems(ee){if(ee!=null)for(let ne=0;ne<ee.length;ne++){const ie=ee[ne];if(!canBeRepresented(ie))throw env().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${ie} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${ie} cannot be represented on this device.`)}}getValuesFromTexture(ee){const{shape:ne,dtype:ie,isPacked:oe}=this.texData.get(ee),ae=sizeFromShape(ne);if(env().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const ge=this.decode(ee),ve=this.texData.get(ge.dataId),ye=this.gpgpu.downloadMatrixFromPackedTexture(ve.texture,...getDenseTexShape(ne)).subarray(0,ae);return this.disposeIntermediateTensorInfo(ge),ye}const ce=env().getBool("WEBGL_PACK")&&oe===!0,le=ce?getShapeAs3D(ne):ne,ue=ce?new EncodeFloatPackedProgram(le):new EncodeFloatProgram(le),he=this.runWebGLProgram(ue,[{shape:le,dtype:ie,dataId:ee}],"float32"),fe=this.texData.get(he.dataId),me=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(fe.texture,fe.texShape[0],fe.texShape[1]).subarray(0,ae);return this.disposeIntermediateTensorInfo(he),me}async time(ee){const ne=this.activeTimers,ie=[];let oe=!1;this.programTimersStack==null?(this.programTimersStack=ie,oe=!0):this.activeTimers.push(ie),this.activeTimers=ie,ee();const ae=flatten$2(this.activeTimers.map(ue=>ue.query)).filter(ue=>ue!=null),ce=flatten$2(this.activeTimers.map(ue=>ue.name)).filter(ue=>ue!=null);this.activeTimers=ne,oe&&(this.programTimersStack=null);const le={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const ue=await Promise.all(ae);le.kernelMs=sum$3(ue),le.getExtraProfileInfo=()=>ue.map((he,fe)=>({name:ce[fe],ms:he})).map(he=>`${he.name}: ${he.ms}`).join(", ")}else le.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,le}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:now$1(),endMs:null}}endTimer(ee){return env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),ee):(ee.endMs=now$1(),ee)}async getQueryTime(ee){if(env().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(ee);const ne=ee;return ne.endMs-ne.startMs}disposeData(ee){if(this.pendingDisposal.has(ee))return;if(this.pendingRead.has(ee)){this.pendingDisposal.add(ee),this.pendingDeletes++;return}if(!this.texData.has(ee))return;if(this.texData.get(ee).complexParentRefCount>0){this.texData.get(ee).refCount--;return}this.releaseGPUData(ee);const{complexTensorInfos:ne}=this.texData.get(ee);ne!=null&&(this.texData.get(ne.real.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(ne.real),this.texData.get(ne.imag.dataId).complexParentRefCount--,this.disposeIntermediateTensorInfo(ne.imag)),this.texData.delete(ee)}releaseGPUData(ee){const{texture:ne,dtype:ie,texShape:oe,usage:ae,isPacked:ce,slice:le}=this.texData.get(ee),ue=le&&le.origDataId||ee,he=this.dataRefCount.get(ue);he>1?this.dataRefCount.set(ue,he-1):(this.dataRefCount.delete(ue),ne!=null&&(this.numBytesInGPU-=this.computeBytes(oe,ie),this.textureManager.releaseTexture(ne,oe,ae,ce)));const fe=this.texData.get(ee);fe.texture=null,fe.texShape=null,fe.isPacked=!1,fe.slice=null}getTexture(ee){return this.uploadToGPU(ee),this.texData.get(ee).texture}getDataInfo(ee){return this.texData.get(ee)}getCPUBackend(){return env().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=engine().findBackend("cpu")),this.cpuBackend):null}shouldExecuteOnCPU(ee,ne=CPU_HANDOFF_SIZE_THRESHOLD){const ie=this.getCPUBackend();return!env().getBool("IS_TEST")&&!this.warnedAboutCPUBackend&&ie==null&&(console.warn("Your application contains ops that are small enough to be executed on the CPU backend, however the CPU backend cannot be found. Consider importing the CPU backend (@tensorflow/tfjs-backend-cpu) for better performance."),this.warnedAboutCPUBackend=!0),ie!=null&&ee.every(oe=>this.texData.get(oe.dataId).texture==null&&sizeFromShape(oe.shape)<ne)}getGPGPUContext(){return this.gpgpu}where(ee){warn$1("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const ne=ee.dataSync();return whereImpl(ee.shape,ne)}packedUnaryOp(ee,ne,ie){const oe=new UnaryOpPackedProgram(ee.shape,ne);return this.compileAndRun(oe,[ee],ie)}abs(ee){if(this.shouldExecuteOnCPU([ee])&&ee.dtype!=="complex64"){const ie=simpleAbsImplCPU(this.texData.get(ee.dataId).values);return this.makeOutput(ee.shape,ee.dtype,ie)}if(env().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(ee,ABS$1,ee.dtype);const ne=new UnaryOpProgram(ee.shape,ABS$1);return this.compileAndRun(ne,[ee])}makeTensorInfo(ee,ne,ie){let oe;if(ne==="string"&&ie!=null&&ie.length>0&&isString$2(ie[0])){const ae=ie.map(ce=>encodeString(ce));oe=this.write(ae,ee,ne)}else oe=this.write(ie,ee,ne);return this.texData.get(oe).usage=null,{dataId:oe,shape:ee,dtype:ne}}makeOutput(ee,ne,ie){const{dataId:oe}=this.makeTensorInfo(ee,ne,ie);return engine().makeTensorFromDataId(oe,ee,ne,this)}unpackTensor(ee){const ne=new UnpackProgram(ee.shape);return this.runWebGLProgram(ne,[ee],ee.dtype)}packTensor(ee){const ne=new PackProgram(ee.shape),ie=!0;return this.runWebGLProgram(ne,[ee],ee.dtype,null,ie)}packedReshape(ee,ne){const ie=[getBatchDim(ee.shape),...getRowsCols(ee.shape)],oe={dtype:ee.dtype,shape:ie,dataId:ee.dataId},ae=[getBatchDim(ne),...getRowsCols(ne)],ce=new ReshapePackedProgram(ae,ie),le=!0,ue=this.runWebGLProgram(ce,[oe],ee.dtype,null,le);return{dataId:ue.dataId,shape:ne,dtype:ue.dtype}}decode(ee){const ne=this.texData.get(ee),{isPacked:ie,shape:oe,dtype:ae}=ne,ce=getShapeAs3D(oe);let le;ie?le=new DecodeMatrixPackedProgram(ce):le=new DecodeMatrixProgram(ce);const ue=!0,he=this.runWebGLProgram(le,[{shape:ce,dtype:ae,dataId:ee}],ae,null,ue);return{dtype:ae,shape:oe,dataId:he.dataId}}runWebGLProgram(ee,ne,ie,oe,ae=!1){const ce=this.makeTensorInfo(ee.outputShape,ie),le=this.texData.get(ce.dataId);if(ee.packedOutput&&(le.isPacked=!0),ee.outPackingScheme===PackingScheme.DENSE){const be=getDenseTexShape(ee.outputShape);le.texShape=be.map(Ce=>Ce*2)}if(ee.outTexUsage!=null&&(le.usage=ee.outTexUsage),sizeFromShape(ce.shape)===0)return le.values=getTypedArrayFromDType(ce.dtype,0),ce;const ue=[],he=ne.map(be=>{if(be.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let Ce=this.texData.get(be.dataId);if(Ce.texture==null){if(!ee.packedInputs&&sizeFromShape(be.shape)<=env().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:be.shape,texData:null,isUniform:!0,uniformValues:Ce.values};ee.packedInputs&&(Ce.isPacked=!0,Ce.shape=be.shape)}else if(!!Ce.isPacked!=!!ee.packedInputs)be=Ce.isPacked?this.unpackTensor(be):this.packTensor(be),ue.push(be),Ce=this.texData.get(be.dataId);else if(Ce.isPacked&&!isReshapeFree(Ce.shape,be.shape)){const Se=be,$e=be.shape;be.shape=Ce.shape,be=this.packedReshape(be,$e),ue.push(be),Ce=this.texData.get(be.dataId),Se.shape=$e}return this.uploadToGPU(be.dataId),{shape:be.shape,texData:Ce,isUniform:!1}});this.uploadToGPU(ce.dataId);const fe={shape:ce.shape,texData:le,isUniform:!1},me=makeShaderKey(ee,he,fe),ge=this.getAndSaveBinary(me,()=>compileProgram(this.gpgpu,ee,he,fe)),ve=this.activeTimers!=null;let ye;if(ve&&(ye=this.startTimer()),runProgram(this.gpgpu,ge,he,fe,oe),ue.forEach(be=>this.disposeIntermediateTensorInfo(be)),ve&&(ye=this.endTimer(ye),this.activeTimers.push({name:ee.constructor.name,query:this.getQueryTime(ye)})),!env().getBool("WEBGL_LAZILY_UNPACK")&&le.isPacked&&ae===!1){const be=this.unpackTensor(ce);return this.disposeIntermediateTensorInfo(ce),be}return ce}compileAndRun(ee,ne,ie,oe,ae=!1){ie=ie||ne[0].dtype;const ce=this.runWebGLProgram(ee,ne,ie,oe,ae);return engine().makeTensorFromDataId(ce.dataId,ce.shape,ce.dtype)}getAndSaveBinary(ee,ne){return ee in this.binaryCache||(this.binaryCache[ee]=ne()),this.binaryCache[ee]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(env().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(ne=>{this.gpgpu.deleteProgram(this.binaryCache[ne].webGLProgram),delete this.binaryCache[ne]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=tidy(()=>{if(!env().get("WEBGL_RENDER_FLOAT32_ENABLED")){const ee=env().getBool("DEBUG");env().set("DEBUG",!1);const ne=this.abs(scalar(1e-8)).dataSync()[0];if(env().set("DEBUG",ee),ne>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?EPSILON_FLOAT32:EPSILON_FLOAT16}uploadToGPU(ee){const ne=this.texData.get(ee),{shape:ie,dtype:oe,values:ae,texture:ce,usage:le,isPacked:ue}=ne;if(ce!=null)return;const he=this.activeTimers!=null;let fe;he&&(fe=now$1());let me=ne.texShape;if(me==null&&(me=getTextureShapeFromLogicalShape(ie,ue),ne.texShape=me),ae!=null){const ge=getShapeAs3D(ie);let ve,ye=me[1],be=me[0];const Ce=ae instanceof Uint8Array;ue?([ye,be]=getPackedMatrixTextureShapeWidthHeight(me[0],me[1]),ve=new EncodeMatrixPackedProgram(ge,[be,ye],Ce)):ve=new EncodeMatrixProgram(ge,[be,ye],Ce);const Se=this.makeTensorInfo([be,ye],oe);Ce?this.texData.get(Se.dataId).usage=TextureUsage.PIXELS:this.texData.get(Se.dataId).usage=TextureUsage.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(Se.dataId),ye,be,ae);const $e=!0,Te=this.runWebGLProgram(ve,[Se],oe,null,$e),Ne=this.texData.get(Te.dataId);ne.texture=Ne.texture,ne.texShape=Ne.texShape,ne.isPacked=Ne.isPacked,ne.usage=Ne.usage,this.disposeIntermediateTensorInfo(Se),this.texData.delete(Te.dataId),ne.values=null,he&&(this.uploadWaitMs+=now$1()-fe)}else{const ge=this.acquireTexture(me,le,oe,ue);ne.texture=ge}}convertAndCacheOnCPU(ee,ne){const ie=this.texData.get(ee),{dtype:oe}=ie;return this.releaseGPUData(ee),ne!=null&&(ie.values=float32ToTypedArray(ne,oe)),ie.values}acquireTexture(ee,ne,ie,oe){if(this.numBytesInGPU+=this.computeBytes(ee,ie),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const ae=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${ae} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(ee,ne,oe)}computeBytes(ee,ne){return ee[0]*ee[1]*bytesPerElement(ne)}}function float32ToTypedArray(re,ee){if(ee==="float32"||ee==="complex64")return re;if(ee==="int32"||ee==="bool"){const ne=ee==="int32"?new Int32Array(re.length):new Uint8Array(re.length);for(let ie=0;ie<ne.length;++ie)ne[ie]=Math.round(re[ie]);return ne}else throw new Error(`Unknown dtype ${ee}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */isBrowser$2()&&registerBackend("webgl",()=>new MathBackendWebGL,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHECK_NAN_SNIPPET$1=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class BinaryOpProgram{constructor(ee,ne,ie){this.variableNames=["A","B"],this.outputShape=assertAndGetBroadcastShape(ne,ie),this.userCode=`
      float binaryOperation(float a, float b) {
        ${ee}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHECK_NAN_SNIPPET=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;class BinaryOpPackedProgram{constructor(ee,ne,ie,oe=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=assertAndGetBroadcastShape(ne,ie);const ae=this.outputShape.length;let ce="";if(oe)if(ae===0||sizeFromShape(this.outputShape)===1)ce=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(ce=`
          ${getCoordsDataType(ae)} coords = getOutputCoords();
        `,ae===1)ce+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const ue=getChannels("coords",ae);ce+=`
            bool nextRowOutOfBounds =
              (${ue[ae-2]} + 1) >= ${this.outputShape[ae-2]};
            bool nextColOutOfBounds =
              (${ue[ae-1]} + 1) >= ${this.outputShape[ae-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${ee}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${ce}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function identity$3(re){const{inputs:ee,backend:ne}=re,{x:ie}=ee;return ne.incRef(ie.dataId),{dataId:ie.dataId,shape:ie.shape,dtype:ie.dtype}}const identityConfig={kernelName:Identity$1,backendName:"webgl",kernelFunc:identity$3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function complex(re){const{inputs:ee,backend:ne}=re,{real:ie,imag:oe}=ee,ae=ne.makeTensorInfo(ie.shape,"complex64"),ce=ne.texData.get(ae.dataId),le=identity$3({inputs:{x:ie},backend:ne}),ue=ne.texData.get(le.dataId);ue.complexParentRefCount++;const he=identity$3({inputs:{x:oe},backend:ne}),fe=ne.texData.get(he.dataId);return fe.complexParentRefCount++,ce.complexTensorInfos={real:le,imag:he},ae}const complexConfig={kernelName:Complex,backendName:"webgl",kernelFunc:complex};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LEAKYRELU="return (a < 0.) ? b * a : a;",LEAKYRELU_PACKED=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function leakyRelu(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{alpha:ae}=ie,ce=ne.makeTensorInfo([],"float32",createScalarValue(ae,"float32")),le=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new BinaryOpPackedProgram(LEAKYRELU_PACKED,oe.shape,ce.shape):new BinaryOpProgram(LEAKYRELU,oe.shape,ce.shape),ue=ne.runWebGLProgram(le,[oe,ce],oe.dtype);return ne.disposeIntermediateTensorInfo(ce),ue}const leakyReluConfig={kernelName:LeakyRelu,backendName:"webgl",kernelFunc:leakyRelu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PRELU="return (a < 0.) ? b * a : a;",PRELU_PACKED=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function prelu(re){const{inputs:ee,backend:ne}=re,{x:ie,alpha:oe}=ee,ae=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new BinaryOpPackedProgram(PRELU_PACKED,ie.shape,oe.shape):new BinaryOpProgram(PRELU,ie.shape,oe.shape);return ne.runWebGLProgram(ae,[ie,oe],ie.dtype)}const preluConfig={kernelName:Prelu,backendName:"webgl",kernelFunc:prelu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CHECK_NAN_SNIPPET_UNARY="if (isnan(x)) return x;",CHECK_NAN_SNIPPET_BINARY=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`,CHECK_NAN_SNIPPET_BINARY_PACKED=`
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;
`;function unaryKernelFunc({opSnippet:re,packedOpSnippet:ee,cpuKernelImpl:ne,dtype:ie}){return({inputs:oe,backend:ae})=>{const{x:ce}=oe,le=ae,ue=ie||ce.dtype;if(le.shouldExecuteOnCPU([ce])&&ne!=null){const me=le.texData.get(ce.dataId),ge=ne(me.values,ue);return le.makeTensorInfo(ce.shape,ue,ge)}const he=env().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&ee!=null;let fe;return he?fe=new UnaryOpPackedProgram(ce.shape,ee):fe=new UnaryOpProgram(ce.shape,re),le.runWebGLProgram(fe,[ce],ue)}}function binaryKernelFunc({opSnippet:re,packedOpSnippet:ee,checkOutOfBounds:ne=!1,supportsComplex:ie=!1,cpuKernelImpl:oe,dtype:ae}){return({inputs:ce,backend:le})=>{const{a:ue,b:he}=ce,fe=le;if(ie&&ue.dtype==="complex64"){const ye=fe.texData.get(ue.dataId),be=fe.texData.get(he.dataId),[Ce,Se]=[[ye.complexTensorInfos.real,be.complexTensorInfos.real],[ye.complexTensorInfos.imag,be.complexTensorInfos.imag]].map(Te=>{const[Ne,Ie]=Te,ke={dataId:Ne.dataId,dtype:Ne.dtype,shape:ue.shape},De={dataId:Ie.dataId,dtype:Ie.dtype,shape:he.shape},Oe=new BinaryOpProgram(re,ue.shape,he.shape);return fe.runWebGLProgram(Oe,[ke,De],upcastType(Ne.dtype,Ie.dtype))}),$e=complex({inputs:{real:Ce,imag:Se},backend:fe});return fe.disposeIntermediateTensorInfo(Ce),fe.disposeIntermediateTensorInfo(Se),$e}const me=ae||upcastType(ue.dtype,he.dtype);if(fe.shouldExecuteOnCPU([ue,he])&&oe!=null){const ye=fe.texData.get(ue.dataId),be=fe.texData.get(he.dataId),[Ce,Se]=oe(ue.shape,he.shape,ye.values,be.values,me),$e=fe.makeTensorInfo(Se,me),Te=fe.texData.get($e.dataId);return Te.values=Ce,$e}const ge=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&ee!=null;let ve;return ge?ve=new BinaryOpPackedProgram(ee,ue.shape,he.shape,ne):ve=new BinaryOpProgram(re,ue.shape,he.shape),fe.runWebGLProgram(ve,[ue,he],me)}}function mapActivationToShaderProgram(re,ee=!1){if(re==="linear")return ee?LINEAR:LINEAR$1;if(re==="relu")return ee?RELU$1:RELU$2;if(re==="elu")return ee?ELU$1:ELU$2;if(re==="relu6")return ee?RELU6$1:RELU6$2;if(re==="prelu")return ee?PRELU_PACKED:PRELU;if(re==="leakyrelu")return ee?LEAKYRELU_PACKED:LEAKYRELU;throw new Error(`Activation ${re} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MatMulPackedProgram{constructor(ee,ne,ie,oe=!1,ae=!1,ce=!1,le=null,ue=!1,he=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ie;const fe=oe?ee[1]:ee[2],me=Math.ceil(fe/2),ge=oe?"i * 2, rc.y":"rc.y, i * 2",ve=ae?"rc.z, i * 2":"i * 2, rc.z",ye=oe?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],be=ae?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let Ce="",Se="";le&&(ue?Ce=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${le}
        }`:he?Ce=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${le}
        }`:Ce=`vec4 activation(vec4 x) {
          ${le}
        }`,Se="result = activation(result);");const $e=ce?"result += getBiasAtOutCoords();":"";ce&&this.variableNames.push("bias"),ue&&this.variableNames.push("preluActivationWeights"),he&&this.variableNames.push("leakyreluAlpha");let Te="rc.x",Ne="rc.x";ee[0]<ne[0]?Te=`int(min(float(rc.x), ${ee[0]-1}.))`:ne[0]<ee[0]&&(Ne=`int(min(float(rc.x), ${ne[0]-1}.))`),this.userCode=`
      ${Ce}

      const float sharedDimension = ${me}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < ${me}; i++) {
          int batchA = ${Te};
          int batchB = ${Ne};
          vec4 a = getMatrixA(batchA, ${ge});
          vec4 b = getMatrixB(batchB, ${ve});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${ye[0]} * ${be[0]});
          result += (${ye[1]} * ${be[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${$e}

        ${Se}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COMPLEX_MULTIPLY={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class BinaryOpComplexProgram{constructor(ee,ne,ie){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=assertAndGetBroadcastShape(ne,ie),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${ee}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MUL="return a * b;";function multiply$1(re){const{inputs:ee,backend:ne}=re,{a:ie,b:oe}=ee,ae=upcastType(ie.dtype,oe.dtype);if(ie.dtype==="complex64"){const le=ne.texData.get(ie.dataId),ue=ne.texData.get(oe.dataId),he=new BinaryOpComplexProgram(COMPLEX_MULTIPLY.REAL,ie.shape,oe.shape),fe=new BinaryOpComplexProgram(COMPLEX_MULTIPLY.IMAG,ie.shape,oe.shape),me=[{dataId:le.complexTensorInfos.real.dataId,dtype:le.complexTensorInfos.real.dtype,shape:ie.shape},{dataId:le.complexTensorInfos.imag.dataId,dtype:le.complexTensorInfos.imag.dtype,shape:ie.shape},{dataId:ue.complexTensorInfos.real.dataId,dtype:ue.complexTensorInfos.real.dtype,shape:oe.shape},{dataId:ue.complexTensorInfos.imag.dataId,dtype:ue.complexTensorInfos.imag.dtype,shape:oe.shape}],ge=ne.runWebGLProgram(he,me,"float32"),ve=ne.runWebGLProgram(fe,me,"float32"),ye=complex({inputs:{real:ge,imag:ve},backend:ne});return ne.disposeIntermediateTensorInfo(ge),ne.disposeIntermediateTensorInfo(ve),ye}if(ne.shouldExecuteOnCPU([ie,oe])){const le=ne.texData.get(ie.dataId),ue=ne.texData.get(oe.dataId),[he,fe]=multiplyImplCPU(ie.shape,oe.shape,le.values,ue.values,ae),me=ne.makeTensorInfo(fe,ae),ge=ne.texData.get(me.dataId);return ge.values=he,me}let ce;return env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?ce=new BinaryOpPackedProgram(MUL,ie.shape,oe.shape):ce=new BinaryOpProgram(MUL,ie.shape,oe.shape),ne.runWebGLProgram(ce,[ie,oe],ae)}const multiplyConfig={kernelName:Multiply$2,backendName:"webgl",kernelFunc:multiply$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function packedReshape(re,ee,ne){const ie=[getBatchDim(re.shape),...getRowsCols(re.shape)],oe={dtype:re.dtype,shape:ie,dataId:re.dataId},ae=[getBatchDim(ee),...getRowsCols(ee)],ce=new ReshapePackedProgram(ae,ie),le=!0,ue=ne.runWebGLProgram(ce,[oe],re.dtype,null,le);return{dataId:ue.dataId,shape:ee,dtype:ue.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reshape(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{shape:ae}=ie,ce=ne,le=sizeFromShape(oe.shape),ue=inferFromImplicitShape(ae,le),he=sizeFromShape(ue);assert$2(le===he,()=>`The new shape (${ue}) has ${he} elements and the old shape (${oe.shape}) has ${le} elements. The new shape and old shape must have the same number of elements.`);const fe=ce.texData.get(oe.dataId);return fe.isPacked&&!isReshapeFree(oe.shape,ue)&&!(fe.texture!==null&&isReshapeFree(fe.shape,ue))?packedReshape(oe,ue,ce):(ce.incRef(oe.dataId),{dataId:oe.dataId,shape:ue,dtype:oe.dtype})}const reshapeConfig={kernelName:Reshape$1,backendName:"webgl",kernelFunc:reshape};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MeanProgram{constructor(ee,ne){this.variableNames=["x"];const{windowSize:ie,batchSize:oe,inSize:ae,outSize:ce}=ee;this.outputShape=[oe,ce];const le=Math.floor(ie/4)*4,ue=ie%4;let he="sumValue += dot(values, ones);";if(ne!=null){const me=1/ne;he=`sumValue += dot(values * ${isInt(me)?me.toPrecision(2):me}, ones);`}let fe="";ae%ie>0&&(fe=`
        if (inIdx < 0 || inIdx >= ${ae}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${fe}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${ie};

        float sumValue = 0.0;

        for (int i = 0; i < ${le}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${he}
        }

        int inIdx = inOffset + ${le};
        if (${ue===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${he}
        } else if (${ue===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${he}
        } else if (${ue===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${he}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReduceProgram{constructor(ee,ne){this.variableNames=["x"];const{windowSize:ie,batchSize:oe,inSize:ae,outSize:ce}=ee;this.outputShape=[oe,ce];let le="0.0",ue="";ne==="prod"?le="1.0":ne==="min"?(le="1.0 / 1e-20",ue="min"):ne==="max"&&(le="-1.0 / 1e-20",ue="max");let he=`${ne}(${ne}(${ne}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;ne==="sum"?he="sumValue":ne==="prod"?he="prodValue":ne==="all"?he="allValue":ne==="any"&&(he="anyValue");const fe=Math.floor(ie/4)*4,me=ie%4;let ge=`
      if (${ne==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${ne==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${ue}(values, minMaxValue);
      }
    `,ve="vec4";ne==="all"?(le="1.0",ge=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,ve="bvec4"):ne==="any"&&(le="0.0",ge=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,ve="bvec4");let ye="";ae%ie>0&&(ye=`
        if (inIdx < 0 || inIdx >= ${ae}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${le};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${ye}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${ie};

        vec4 minMaxValue = vec4(${le});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${fe}; i += 4) {
          int inIdx = inOffset + i;
          ${ve} values = ${ve}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${ge}
        }

        int inIdx = inOffset + ${fe};
        if (${me===1}) {
          ${ve} values = ${ve}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${ge}
        } else if (${me===2}) {
          ${ve} values = ${ve}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${ge}
        } else if (${me===3}) {
          ${ve} values = ${ve}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${ge}
        }
        setOutput(${he});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function getReductionStages(re){const ee=[];for(;ee.length===0||ee[ee.length-1].outSize!==1;){const ne=ee.length?ee[ee.length-1].outSize:re[1],ie=computeOptimalWindowSize(ne);ee.push({inSize:ne,windowSize:ie,outSize:Math.ceil(ne/ie)})}return ee}function reduce(re,ee,ne,ie){const oe=getReductionStages(re.shape);let ae=re;for(let ce=0;ce<oe.length;ce++){const{inSize:le,windowSize:ue,outSize:he}=oe[ce];let fe,me;ne==="mean"?fe=ce===0?new MeanProgram({windowSize:ue,inSize:le,batchSize:re.shape[0],outSize:he},le):new MeanProgram({windowSize:ue,inSize:le,batchSize:re.shape[0],outSize:he}):fe=new ReduceProgram({windowSize:ue,inSize:le,batchSize:re.shape[0],outSize:he},ne),me=ae,ae=ie.runWebGLProgram(fe,[ae],ee),me.dataId!==re.dataId&&ie.disposeIntermediateTensorInfo(me)}return ae}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TransposeProgram{constructor(ee,ne){this.variableNames=["A"];const ie=new Array(ee.length);for(let ce=0;ce<ie.length;ce++)ie[ce]=ee[ne[ce]];this.outputShape=ie,this.rank=ie.length;const oe=getCoordsDataType(this.rank),ae=getSwitchedCoords(ne);this.userCode=`
    void main() {
      ${oe} resRC = getOutputCoords();
      setOutput(getA(${ae}));
    }
    `}}function getSwitchedCoords(re){const ee=re.length;if(ee>6)throw Error(`Transpose for rank ${ee} is not yet supported`);const ne=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],ie=new Array(ee);for(let oe=0;oe<re.length;oe++)ie[re[oe]]=ne[oe];return ie.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TransposePackedProgram{constructor(ee,ne){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const ie=new Array(ee.length);for(let fe=0;fe<ie.length;fe++)ie[fe]=ee[ne[fe]];if(this.outputShape=ie,this.rank=ie.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const oe=getCoordsDataType(this.rank),ae=getVecChannels("rc",this.rank),ce=new Array(this.rank);for(let fe=0;fe<ne.length;fe++)ce[ne[fe]]=ae[fe];const le=`vec2(${ce.slice(-2).join()})`,ue=`++${ae[this.rank-1]} < ${ie[this.rank-1]}`,he=`getChannel(getA(${ce.join()}), ${le})`;this.userCode=`
    void main() {
      ${oe} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${he};
      if(${ue}) {
        result[1] = ${he};
      }
      --${ae[this.rank-1]};
      if(++${ae[this.rank-2]} < ${ie[this.rank-2]}) {
        result[2] = ${he};
        if(${ue}) {
          result[3] = ${he};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transposeImpl(re,ee,ne){const ie=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new TransposePackedProgram(re.shape,ee):new TransposeProgram(re.shape,ee);return ne.runWebGLProgram(ie,[re],re.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sumImpl(re,ee,ne,ie){const oe=ee,ae=re.shape.length,ce=parseAxisParam(oe,re.shape);let le=ce;const ue=getAxesPermutation(le,ae),he=ue!=null;let fe=re;he&&(fe=transposeImpl(re,ue,ie),le=getInnerMostAxes(le.length,ae)),assertAxesAreInnerMostDims("sum",le,ae);const[me,ge]=computeOutAndReduceShapes(fe.shape,le);let ve=me;ne&&(ve=expandShapeToKeepDim(me,ce));const ye=sizeFromShape(ge),Ce=sizeFromShape(re.shape)/ye,Se=reshape({inputs:{x:fe},attrs:{shape:[Ce,ye]},backend:ie}),$e=sumOutType(re.dtype),Te=reduce(Se,$e,"sum",ie),Ne=reshape({inputs:{x:Te},attrs:{shape:ve},backend:ie});return ie.disposeIntermediateTensorInfo(Se),ie.disposeIntermediateTensorInfo(Te),he&&ie.disposeIntermediateTensorInfo(fe),Ne}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sum(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,keepDims:ce}=ie;return sumImpl(oe,ae,ce,ne)}const sumConfig={kernelName:Sum,backendName:"webgl",kernelFunc:sum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function transpose(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{perm:ae}=ie,ce=ne,le=oe.shape.length,ue=new Array(le);for(let fe=0;fe<ue.length;fe++)ue[fe]=oe.shape[ae[fe]];let he;if(ce.shouldExecuteOnCPU([oe])){const me=ce.texData.get(oe.dataId).values,ge=transposeImplCPU(me,oe.shape,oe.dtype,ae,ue);he=ce.makeTensorInfo(ue,oe.dtype);const ve=ce.texData.get(he.dataId);ve.values=ge}else he=transposeImpl(oe,ae,ce);return he}const transposeConfig={kernelName:Transpose,backendName:"webgl",kernelFunc:transpose};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MATMUL_SHARED_DIM_THRESHOLD=1e3;function batchMatMulImpl({a:re,b:ee,transposeA:ne,transposeB:ie,backend:oe,bias:ae=null,preluActivationWeights:ce=null,leakyreluAlpha:le=0,activation:ue=null}){const he=re.shape.length,fe=ee.shape.length,me=ne?re.shape[he-2]:re.shape[he-1],ge=ie?ee.shape[fe-1]:ee.shape[fe-2],ve=ne?re.shape[he-1]:re.shape[he-2],ye=ie?ee.shape[fe-2]:ee.shape[fe-1],be=re.shape.slice(0,-2),Ce=ee.shape.slice(0,-2),Se=sizeFromShape(be),$e=sizeFromShape(Ce),Te=Se===$e||Se===1||$e===1;assert$2(he>=2&&fe>=2&&Te,()=>`Error in matMul: the input batch dimensions must either be the same or at least one input batch dimension must be 1. Got input batch dimensions of (${be}) and (${Ce}).`);const Ie=(Se>$e?re.shape.slice(0,-2):ee.shape.slice(0,-2)).concat([ve,ye]);assert$2(me===ge,()=>`Error in matMul: inner shapes (${me}) and (${ge}) of Tensors with shapes ${re.shape} and ${ee.shape} and transposeA=${ne} and transposeB=${ie} must match.`);const ke=ne?[Se,me,ve]:[Se,ve,me],De=ie?[$e,ye,ge]:[$e,ge,ye],Oe=reshape({inputs:{x:re},backend:oe,attrs:{shape:ke}}),Be=reshape({inputs:{x:ee},backend:oe,attrs:{shape:De}}),Me=[Oe,Be],Le=Math.max(Se,$e),je=ne?Oe.shape[1]:Oe.shape[2],ze=ae!=null,Ve=ce!=null,He=ue==="leakyrelu",We=ue!=null?mapActivationToShaderProgram(ue,!0):null,Ye=ze||Ve||He||We!=null;let Ue;if((ve===1||ye===1)&&je>MATMUL_SHARED_DIM_THRESHOLD&&Ye===!1){let Xe=Oe,Vt=Be;ne&&(Xe=transpose({inputs:{x:Oe},backend:oe,attrs:{perm:[0,2,1]}}),Me.push(Xe)),ie&&(Vt=transpose({inputs:{x:Be},backend:oe,attrs:{perm:[0,2,1]}}),Me.push(Vt));const Wt=ye!==1,Kt=ye===1;let tn=Xe;Wt&&(tn=reshape({inputs:{x:Xe},backend:oe,attrs:{shape:[Le,je,1]}}),Me.push(tn));const Xt=ye===1?2:1;let dn=Vt;Kt&&(dn=reshape({inputs:{x:Vt},backend:oe,attrs:{shape:[Le,1,je]}}),Me.push(dn));const nn=multiply$1({inputs:{a:tn,b:dn},backend:oe});Ue=sum({inputs:{x:nn},backend:oe,attrs:{axis:Xt,keepDims:!0}}),Me.push(nn)}else{const Xe=upcastType(re.dtype,ee.dtype),Vt=new MatMulPackedProgram(ke,De,[Le,ve,ye],ne,ie,ze,We,Ve,He),Wt=[Oe,Be];if(ae!=null&&Wt.push(ae),Ve&&Wt.push(ce),He){const Kt=oe.makeTensorInfo([],"float32",createScalarValue(le,"float32"));Wt.push(Kt),Me.push(Kt)}Ue=oe.runWebGLProgram(Vt,Wt,Xe)}const Ke=reshape({inputs:{x:Ue},backend:oe,attrs:{shape:Ie}});Me.push(Ue);for(const Xe of Me)oe.disposeIntermediateTensorInfo(Xe);return Ke}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _fusedMatMul(re){const{inputs:ee,backend:ne,attrs:ie}=re,{a:oe,b:ae,bias:ce,preluActivationWeights:le}=ee,{transposeA:ue,transposeB:he,activation:fe,leakyreluAlpha:me}=ie;return batchMatMulImpl({a:oe,b:ae,transposeA:ue,transposeB:he,backend:ne,bias:ce,preluActivationWeights:le,leakyreluAlpha:me,activation:fe})}const _fusedMatMulConfig={kernelName:_FusedMatMul,backendName:"webgl",kernelFunc:_fusedMatMul};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ABS="return abs(x);";function abs$1(re){const{inputs:ee,backend:ne}=re,{x:ie}=ee;if(ne.shouldExecuteOnCPU([ie])&&ie.dtype!=="complex64"){const ae=ne.texData.get(ie.dataId),ce=simpleAbsImplCPU(ae.values);return ne.makeTensorInfo(ie.shape,ie.dtype,ce)}let oe;return env().getBool("WEBGL_PACK_UNARY_OPERATIONS")?oe=new UnaryOpPackedProgram(ie.shape,ABS):oe=new UnaryOpProgram(ie.shape,ABS),ne.runWebGLProgram(oe,[ie],ie.dtype)}const absConfig={kernelName:Abs$1,backendName:"webgl",kernelFunc:abs$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ACOS=CHECK_NAN_SNIPPET$2+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,acos=unaryKernelFunc({opSnippet:ACOS}),acosConfig={kernelName:Acos,backendName:"webgl",kernelFunc:acos};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ACOSH=CHECK_NAN_SNIPPET$2+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,acosh=unaryKernelFunc({opSnippet:ACOSH}),acoshConfig={kernelName:Acosh,backendName:"webgl",kernelFunc:acosh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ADD="return a + b;",addKernelFunc=binaryKernelFunc({opSnippet:ADD,packedOpSnippet:ADD,supportsComplex:!0,cpuKernelImpl:addImplCPU}),addConfig={kernelName:Add$2,backendName:"webgl",kernelFunc:addKernelFunc};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AddNProgram{constructor(ee,ne){this.outputShape=[],this.outputShape=ee,this.variableNames=ne.map((ae,ce)=>`T${ce}`);const ie=[];this.variableNames.forEach(ae=>{ie.push(`float v${ae} = get${ae}AtOutCoords();`)});const oe=this.variableNames.map(ae=>`v${ae}`).join(" + ");this.userCode=`
      void main() {
        ${ie.join(`
        `)}

        float result = ${oe};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AddNPackedProgram{constructor(ee,ne){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee,this.variableNames=ne.map((ae,ce)=>`T${ce}`);const ie=[];this.variableNames.forEach(ae=>{ie.push(`vec4 v${ae} = get${ae}AtOutCoords();`)});const oe=this.variableNames.map(ae=>`v${ae}`).join(" + ");this.userCode=`
      void main() {
        ${ie.join(`
        `)}

        vec4 result = ${oe};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function addN(re){const{inputs:ee,backend:ne}=re,ie=ee;if(ie.length===1)return identity$3({inputs:{x:ie[0]},backend:ne});if(ie.length>env().get("WEBGL_MAX_TEXTURES_IN_SHADER")){const ue=Math.floor(ie.length/2),he=addN({inputs:ie.slice(0,ue),backend:ne}),fe=addN({inputs:ie.slice(ue),backend:ne});return addN({inputs:[he,fe],backend:ne})}const oe=ie.map(ue=>ue.dtype).reduce((ue,he)=>upcastType(ue,he)),ae=ie.map(ue=>ue.shape),le=env().getBool("WEBGL_PACK")?new AddNPackedProgram(ie[0].shape,ae):new AddNProgram(ie[0].shape,ae);return ne.runWebGLProgram(le,ie,oe)}const addNConfig={kernelName:AddN,backendName:"webgl",kernelFunc:addN};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function all(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,keepDims:ce}=ie,le=oe.shape.length,ue=parseAxisParam(ae,oe.shape);let he=ue;const fe=getAxesPermutation(he,le);let me=oe;fe!=null&&(me=transpose({inputs:{x:oe},backend:ne,attrs:{perm:fe}}),he=getInnerMostAxes(he.length,le)),assertAxesAreInnerMostDims("all",he,le);const[ge,ve]=computeOutAndReduceShapes(me.shape,he),ye=sizeFromShape(ve),be=reshape({inputs:{x:me},backend:ne,attrs:{shape:[-1,ye]}}),Ce=reduce(be,be.dtype,"all",ne);let Se;if(ce){const $e=expandShapeToKeepDim(ge,ue);Se=reshape({inputs:{x:Ce},backend:ne,attrs:{shape:$e}})}else Se=reshape({inputs:{x:Ce},backend:ne,attrs:{shape:ge}});return ne.disposeIntermediateTensorInfo(be),ne.disposeIntermediateTensorInfo(Ce),fe!=null&&ne.disposeIntermediateTensorInfo(me),Se}const allConfig={kernelName:All,backendName:"webgl",kernelFunc:all};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function any(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,keepDims:ce}=ie,le=oe.shape.length,ue=parseAxisParam(ae,oe.shape);let he=ue;const fe=getAxesPermutation(he,le);let me=oe;fe!=null&&(me=transpose({inputs:{x:oe},backend:ne,attrs:{perm:fe}}),he=getInnerMostAxes(he.length,le)),assertAxesAreInnerMostDims("any",he,le);const[ge,ve]=computeOutAndReduceShapes(me.shape,he),ye=sizeFromShape(ve),be=reshape({inputs:{x:me},backend:ne,attrs:{shape:[-1,ye]}}),Ce=reduce(be,be.dtype,"any",ne);let Se;if(ce){const $e=expandShapeToKeepDim(ge,ue);Se=reshape({inputs:{x:Ce},backend:ne,attrs:{shape:$e}})}else Se=reshape({inputs:{x:Ce},backend:ne,attrs:{shape:ge}});return ne.disposeIntermediateTensorInfo(be),ne.disposeIntermediateTensorInfo(Ce),fe!=null&&ne.disposeIntermediateTensorInfo(me),Se}const anyConfig={kernelName:Any,backendName:"webgl",kernelFunc:any};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ArgMinMaxProgram{constructor(ee,ne,ie){this.variableNames=["A"];const{windowSize:oe,batchSize:ae,outSize:ce}=ee;ie||this.variableNames.push("bestIndicesA"),this.outputShape=[ae,ce];const le=ne==="max"?">":"<",ue=ie?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${oe};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${oe}; i++) {
          int inIdx = ${ue};
          float candidate = getA(batch, inIdx);
          if (candidate ${le} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ArgMinMaxPackedProgram{constructor(ee,ne,ie,oe){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,assert$2(ee.length>2,()=>`Packed arg${ie.charAt(0).toUpperCase()+ie.slice(1)} supports only inputs with rank above 2.`);const ae=ee[ee.length-1],ce=Math.ceil(ae/ne);this.outputShape=ee.slice(0,-1),ce>1&&this.outputShape.push(ce),oe||this.variableNames.push("bestIndicesA");const le=this.outputShape,ue=le.length,he=getCoordsDataType(ue),fe=getChannels("coords",ue);let me,ge;if(ce===1){ge=ue+1;const Oe=getCoordsDataType(ge);me=`
        ${Oe} sourceLocR = ${Oe}(${fe.join()}, 0);
        ++${fe[ue-1]};
        ${Oe} sourceLocG = ${Oe}(${fe.join()}, 0);
        ++${fe[ue-2]};
        ${Oe} sourceLocA = ${Oe}(${fe.join()}, 0);
        --${fe[ue-1]};
        ${Oe} sourceLocB = ${Oe}(${fe.join()}, 0);
        --${fe[ue-2]};`}else ge=ue,me=`
        ${he} sourceLocR = coords;
        ++${fe[ue-1]};
        ${he} sourceLocG = coords;
        ++${fe[ue-2]};
        ${he} sourceLocA = coords;
        --${fe[ue-1]};
        ${he} sourceLocB = coords;
        --${fe[ue-2]};`;const ve=["x","y","z","w","u","v"].slice(0,ge),ye="."+ve[ge-1],be=ve.map(Oe=>"int "+Oe),Ce=getChannels("sourceLocR",ge-1).concat("inIdx.r"),Se=getChannels("sourceLocG",ge-1).concat("inIdx.g"),$e=getChannels("sourceLocB",ge-1).concat("inIdx.b"),Te=getChannels("sourceLocA",ge-1).concat("inIdx.a"),Ne=ie==="max"?"greaterThan":"lessThan",Ie=oe?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${Ce.join()}),
                             getBestIndicesAChannel(${Se.join()}),
                             getBestIndicesAChannel(${$e.join()}),
                             getBestIndicesAChannel(${Te.join()})));`,ke=`vec4(
            getAChannel(${Ce.join()}),
            hasNextCol ? getAChannel(${Se.join()}) : 0.,
            hasNextRow ? getAChannel(${$e.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${Te.join()}) : 0.)`,De=oe?"":`
      float getBestIndicesAChannel(${be.join()}) {
        return getChannel(getBestIndicesA(${ve.join()}),
                                          vec2(${ve.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${be.join()}) {
        return getChannel(getA(${ve.join()}),
                               vec2(${ve.slice(-2).join()}));
      }
      ${De}
      void main() {
        ${he} coords = getOutputCoords();
        bool hasNextCol = ${fe[ue-1]} < ${le[ue-1]-1};
        bool hasNextRow = ${fe[ue-2]} < ${le[ue-2]-1};
        ${me}
        ivec4 srcIdx = ivec4(sourceLocR${ye}, sourceLocG${ye},
          sourceLocB${ye}, sourceLocA${ye}) * ${ne};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${ke};

        for (int i = 0; i < ${ne}; i++) {
          inIdx = srcIdx;
          ${Ie}
          vec4 candidate = ${ke};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${Ne}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argReduce(re,ee,ne,ie=null){let oe=ee.shape[0],ae=ee.shape[1];ie!=null&&(oe=ie.shape[0],ae=ie.shape[1]);const ce=computeOptimalWindowSize(ae),le={windowSize:ce,inSize:ae,batchSize:oe,outSize:Math.ceil(ae/ce)},ue=new ArgMinMaxProgram(le,ne,ie==null),he=[ee];ie!=null&&he.push(ie);const fe=re.runWebGLProgram(ue,he,"int32");if(fe.shape[1]===1)return fe;const me=argReduce(re,ee,ne,fe);return re.disposeIntermediateTensorInfo(fe),me}function argReducePacked(re,ee,ne,ie=null){const oe=ie!=null?ie.shape:ee.shape,ae=oe[oe.length-1],ce=computeOptimalWindowSize(ae),le=new ArgMinMaxPackedProgram(oe,ce,ne,ie==null),ue=ie==null?[ee]:[ee,ie],he=re.runWebGLProgram(le,ue,"int32");if(he.shape.length===ee.shape.length){const fe=argReducePacked(re,ee,ne,he);return re.disposeIntermediateTensorInfo(he),fe}return he}function argMinMaxReduce(re,ee,ne,ie){const oe=[ne];if(assertAxesAreInnerMostDims("arg"+ie.charAt(0).toUpperCase()+ie.slice(1),oe,ee.shape.length),!env().getBool("WEBGL_PACK_REDUCE")||ee.shape.length<=2){const ae=[],[ce,le]=computeOutAndReduceShapes(ee.shape,oe),ue=sizeFromShape(le),he=reshape({inputs:{x:ee},backend:re,attrs:{shape:[-1,ue]}});ae.push(he);const fe=argReduce(re,he,ie);ae.push(fe);const me=reshape({inputs:{x:fe},backend:re,attrs:{shape:ce}});return ae.forEach(ge=>re.disposeIntermediateTensorInfo(ge)),me}return argReducePacked(re,ee,ie)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMax(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae}=ie;let ce=parseAxisParam(ae,oe.shape);const le=getAxesPermutation(ce,oe.shape.length);let ue=oe;const he=[];le!=null&&(ue=transpose({inputs:{x:oe},backend:ne,attrs:{perm:le}}),he.push(ue),ce=getInnerMostAxes(ce.length,ue.shape.length)),assertAxesAreInnerMostDims("argMax",[ce[0]],ue.shape.length);const fe=argMinMaxReduce(ne,ue,ce[0],"max");return he.forEach(me=>ne.disposeIntermediateTensorInfo(me)),fe}const argMaxConfig={kernelName:ArgMax,backendName:"webgl",kernelFunc:argMax};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function argMin(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae}=ie;let ce=parseAxisParam(ae,oe.shape);const le=getAxesPermutation(ce,oe.shape.length);let ue=oe;const he=[];le!=null&&(ue=transpose({inputs:{x:oe},backend:ne,attrs:{perm:le}}),he.push(ue),ce=getInnerMostAxes(ce.length,ue.shape.length)),assertAxesAreInnerMostDims("argMin",[ce[0]],ue.shape.length);const fe=argMinMaxReduce(ne,ue,ce[0],"min");return he.forEach(me=>ne.disposeIntermediateTensorInfo(me)),fe}const argMinConfig={kernelName:ArgMin,backendName:"webgl",kernelFunc:argMin};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ASIN=CHECK_NAN_SNIPPET$2+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,asin=unaryKernelFunc({opSnippet:ASIN}),asinConfig={kernelName:Asin,backendName:"webgl",kernelFunc:asin};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ASINH=CHECK_NAN_SNIPPET$2+"return log(x + sqrt(x * x + 1.0));",asinh=unaryKernelFunc({opSnippet:ASINH}),asinhConfig={kernelName:Asinh,backendName:"webgl",kernelFunc:asinh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATAN=CHECK_NAN_SNIPPET$2+`
  return atan(x);
`,atan=unaryKernelFunc({opSnippet:ATAN}),atanConfig={kernelName:Atan,backendName:"webgl",kernelFunc:atan};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATAN2=CHECK_NAN_SNIPPET_BINARY+`
  return atan(a, b);
`,ATAN2_PACKED=`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+CHECK_NAN_SNIPPET_BINARY_PACKED+`
  return result;
`,atan2=binaryKernelFunc({opSnippet:ATAN2,packedOpSnippet:ATAN2_PACKED}),atan2Config={kernelName:Atan2,backendName:"webgl",kernelFunc:atan2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ATANH=CHECK_NAN_SNIPPET$2+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,atanh=unaryKernelFunc({opSnippet:ATANH}),atanhConfig={kernelName:Atanh,backendName:"webgl",kernelFunc:atanh};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Pool2DProgram{constructor(ee,ne,ie,oe=!1,ae=!1){if(this.variableNames=["x"],ne==="avg"&&ie)throw new Error("Cannot compute positions for average pool.");const ce=ee.filterWidth,le=ee.strideHeight,ue=ee.strideWidth,he=ee.dilationHeight,fe=ee.dilationWidth,me=ee.effectiveFilterHeight,ge=ee.effectiveFilterWidth,ve=ee.padInfo.top,ye=ee.padInfo.left;this.outputShape=ee.outShape;const be=ne==="avg",Ce=`((batch  * ${ee.inHeight} + xR) * ${ee.inWidth} + xC) * ${ee.inChannels} + d`,Se=`(xR * ${ee.inWidth} + xC) * ${ee.inChannels} + d`;let $e="0.0";if(be||($e="-1.0 / 1e-20"),ie){const Oe=">=";this.userCode=`
        const ivec2 strides = ivec2(${le}, ${ue});
        const ivec2 pads = ivec2(${ve}, ${ye});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${me};
              wR += ${he}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${ee.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${ge};
                wC += ${fe}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${ee.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${Oe} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${oe?ae?Ce:Se:`wR * ${ge} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const Te="max";let Ne=`${ne}(${ne}(${ne}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;ne==="avg"&&(Ne="avgValue / count");const Ie=Math.floor(ce/4)*4,ke=ce%4,De=`
      if (${be}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${Te}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${le}, ${ue});
      const ivec2 pads = ivec2(${ve}, ${ye});
      const float initializationValue = ${$e};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${ee.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${$e});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${me};
            wR += ${he}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${ee.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${Ie}; wC += 4) {
            int xC = xCCorner + wC * ${fe};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${fe}, d),
              getValue(batch, xR, xC + 2 * ${fe}, d),
              getValue(batch, xR, xC + 3 * ${fe}, d)
            );

            ${De}
          }

          int xC = xCCorner + ${Ie};
          if (${ke===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${De}
          } else if (${ke===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${fe}, d),
              initializationValue,
              initializationValue
            );

            ${De}
          } else if (${ke===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${fe}, d),
              getValue(batch, xR, xC + 2 * ${fe}, d),
              initializationValue
            );

            ${De}
          }
        }
        setOutput(${Ne});
      }
    `}}class Pool3DProgram{constructor(ee,ne,ie,oe=!1,ae=!1){if(this.variableNames=["x"],ne==="avg"&&ie)throw new Error("Cannot compute positions for average pool.");const ce=ee.filterWidth,le=ee.strideDepth,ue=ee.strideHeight,he=ee.strideWidth,fe=ee.dilationDepth,me=ee.dilationHeight,ge=ee.dilationWidth,ve=ee.effectiveFilterDepth,ye=ee.effectiveFilterHeight,be=ee.effectiveFilterWidth,Ce=ee.padInfo.front,Se=ee.padInfo.top,$e=ee.padInfo.left;this.outputShape=ee.outShape;const Te=ne==="avg";let Ne="0.0";if(Te||(Ne="-1.0 / 1e-20"),ie){const Me=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${le}, ${ue}, ${he});
        const ivec3 pads = ivec3(${Ce}, ${Se}, ${$e});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${ve};
              wD += ${fe}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${ee.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${ye};
                wR += ${me}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${ee.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${be};
                  wC += ${ge}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${ee.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${Me} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${oe?ae?`(((batch * ${ee.inDepth} + xD) * ${ee.inHeight} + xR) * ${ee.inWidth} + xC) * ${ee.inChannels} + ch`:`((xD * ${ee.inHeight} + xR) * ${ee.inWidth} + xC) * ${ee.inChannels} + ch`:`wD * ${ye} * ${be} +
                      wR * ${be} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const Ie="max";let ke=`${ne}(${ne}(${ne}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;ne==="avg"&&(ke="avgValue / count");const De=Math.floor(ce/4)*4,Oe=ce%4,Be=`
      if (${Te}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${Ie}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${le}, ${ue}, ${he});
      const ivec3 pads = ivec3(${Ce}, ${Se}, ${$e});
      const float initializationValue = ${Ne};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${ee.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${Ne});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${ve};
            wD += ${fe}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${ee.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${ye};
            wR += ${me}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${ee.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${De}; wC += 4) {
              int xC = xCCorner + wC * ${ge};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${ge}, ch),
                getValue(batch, xD, xR, xC + 2 * ${ge}, ch),
                getValue(batch, xD, xR, xC + 3 * ${ge}, ch)
              );

              ${Be}
            }

            int xC = xCCorner + ${De};
            if (${Oe===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${Be}
            } else if (${Oe===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${ge}, ch),
                initializationValue,
                initializationValue
              );

              ${Be}
            } else if (${Oe===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${ge}, ch),
                getValue(batch, xD, xR, xC + 2 * ${ge}, ch),
                initializationValue
              );

              ${Be}
            }
          }
          setOutput(${ke});
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee;assertNotComplex(oe,"avgPool");const{filterSize:ae,strides:ce,pad:le,dimRoundingMode:ue}=ie,he=1;assert$2(eitherStridesOrDilationsAreOne(ce,he),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${ce} and dilations '${he}'`);const fe=computePool2DInfo(oe.shape,ae,ce,he,le,ue);if(fe.filterWidth===1&&fe.filterHeight===1&&arraysEqual(fe.inShape,fe.outShape))return identity$3({inputs:{x:oe},backend:ne});const me=new Pool2DProgram(fe,"avg",!1);return ne.runWebGLProgram(me,[oe],"float32")}const avgPoolConfig={kernelName:AvgPool,backendName:"webgl",kernelFunc:avgPool};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3D(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{filterSize:ae,strides:ce,pad:le,dimRoundingMode:ue,dataFormat:he}=ie,fe=[1,1,1],me=computePool3DInfo(oe.shape,ae,ce,fe,le,ue,he),ge=new Pool3DProgram(me,"avg",!1);return ne.runWebGLProgram(ge,[oe],"float32")}const avgPool3DConfig={kernelName:AvgPool3D,backendName:"webgl",kernelFunc:avgPool3D};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AvgPool2DBackpropProgram{constructor(ee){this.variableNames=["dy"],this.outputShape=ee.inShape;const ne=ee.filterHeight,ie=ee.filterWidth,oe=ee.strideHeight,ae=ee.strideWidth,ce=ee.dilationHeight,le=ee.dilationWidth,ue=ee.effectiveFilterHeight,he=ee.effectiveFilterWidth,fe=ue-1-ee.padInfo.top,me=he-1-ee.padInfo.left,ge=1/(ne*ie);this.userCode=`
      const ivec2 pads = ivec2(${fe}, ${me});
      const float avgMultiplier = float(${ge});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${ue};
            wR += ${ce}) {
          float dyR = float(dyRCorner + wR) / ${oe}.0;

          if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${he};
            wC+= ${le}) {
            float dyC = float(dyCCorner + wC) / ${ae}.0;

            if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class AvgPool3DBackpropProgram{constructor(ee){this.variableNames=["dy"],this.outputShape=ee.inShape;const ne=ee.filterDepth,ie=ee.filterHeight,oe=ee.filterWidth,ae=ee.strideDepth,ce=ee.strideHeight,le=ee.strideWidth,ue=ee.dilationDepth,he=ee.dilationHeight,fe=ee.dilationWidth,me=ee.effectiveFilterDepth,ge=ee.effectiveFilterHeight,ve=ee.effectiveFilterWidth,ye=me-1-ee.padInfo.front,be=ge-1-ee.padInfo.top,Ce=ve-1-ee.padInfo.left,Se=1/(ne*ie*oe);this.userCode=`
      const ivec3 pads = ivec3(${ye}, ${be}, ${Ce});
      const float avgMultiplier = float(${Se});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${me};
            wD += ${ue}) {
          float dyD = float(dyDCorner + wD) / ${ae}.0;

          if (dyD < 0.0 || dyD >= ${ee.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${ge};
              wR += ${he}) {
            float dyR = float(dyRCorner + wR) / ${ce}.0;

            if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${ve};
                wC += ${fe}) {
              float dyC = float(dyCCorner + wC) / ${le}.0;

              if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPool3DGrad(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,input:ae}=ee,ce=ae,{filterSize:le,strides:ue,pad:he,dimRoundingMode:fe}=ie,me=[1,1,1],ge=computePool3DInfo(ce.shape,le,ue,me,he,fe),ve=new AvgPool3DBackpropProgram(ge);return ne.runWebGLProgram(ve,[oe],ce.dtype)}const avgPoolGrad3DConfig={kernelName:AvgPool3DGrad,backendName:"webgl",kernelFunc:avgPool3DGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function avgPoolGrad(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,input:ae}=ee,ce=ae;assertNotComplex([oe,ae],"avgPoolGrad");const{filterSize:le,strides:ue,pad:he}=ie,fe=computePool2DInfo(ce.shape,le,ue,1,he),me=new AvgPool2DBackpropProgram(fe);return ne.runWebGLProgram(me,[oe],ce.dtype)}const avgPoolGradConfig={kernelName:AvgPoolGrad,backendName:"webgl",kernelFunc:avgPoolGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function batchMatMul(re){const{inputs:ee,backend:ne,attrs:ie}=re,{a:oe,b:ae}=ee,{transposeA:ce,transposeB:le}=ie;return batchMatMulImpl({a:oe,b:ae,transposeA:ce,transposeB:le,backend:ne})}const batchMatMulConfig={kernelName:BatchMatMul,backendName:"webgl",kernelFunc:batchMatMul};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BatchNormProgram{constructor(ee,ne,ie,oe,ae,ce){this.outputShape=[],this.variableNames=["x","mean","variance"],assertAndGetBroadcastShape(ee,ne),assertAndGetBroadcastShape(ee,ie);let le="0.0";oe!=null&&(assertAndGetBroadcastShape(ee,oe),this.variableNames.push("offset"),le="getOffsetAtOutCoords()");let ue="1.0";ae!=null&&(assertAndGetBroadcastShape(ee,ae),this.variableNames.push("scale"),ue="getScaleAtOutCoords()"),this.outputShape=ee,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${le};
        float scale = ${ue};
        float inv = scale * inversesqrt(variance + float(${ce}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class BatchNormPackedProgram{constructor(ee,ne,ie,oe,ae,ce){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],assertAndGetBroadcastShape(ee,ne),assertAndGetBroadcastShape(ee,ie);let le="vec4(0.0)";oe!=null&&(assertAndGetBroadcastShape(ee,oe),this.variableNames.push("offset"),le="getOffsetAtOutCoords()");let ue="vec4(1.0)";ae!=null&&(assertAndGetBroadcastShape(ee,ae),this.variableNames.push("scale"),ue="getScaleAtOutCoords()"),this.outputShape=ee,this.userCode=`
      void main() {
        vec4 offset = ${le};
        vec4 scale = ${ue};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${ce}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchNorm=({inputs:re,backend:ee,attrs:ne})=>{const{x:ie,mean:oe,variance:ae,offset:ce,scale:le}=re;assert$2(oe.shape.length===ae.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),assert$2(ce==null||oe.shape.length===ce.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),assert$2(le==null||oe.shape.length===le.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:ue}=ne;ue==null&&(ue=.001);const he=[ie,oe,ae];let fe=null;ce!=null&&(fe=ce.shape,he.push(ce));let me=null;le!=null&&(me=le.shape,he.push(le));const ge=env().getBool("WEBGL_PACK_NORMALIZATION")?new BatchNormPackedProgram(ie.shape,oe.shape,ae.shape,fe,me,ue):new BatchNormProgram(ie.shape,oe.shape,ae.shape,fe,me,ue);return ee.runWebGLProgram(ge,he,he[0].dtype)},batchNormConfig={kernelName:FusedBatchNorm,backendName:"webgl",kernelFunc:batchNorm};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SliceProgram{constructor(ee){this.variableNames=["source"],this.outputShape=ee,this.rank=ee.length;const ne=getCoordsDataType(this.rank),ie=`uniform int start[${this.rank}];`,oe=getCoords$1(this.rank);let ae;const ce=ee.map((le,ue)=>`sourceLoc.${coords[ue]} = start[${ue}] + coords.${coords[ue]};`);ae=`
        ${ne} sourceLoc;
        ${ne} coords = getOutputCoords();
        ${ce.join(`
`)}
      `,this.userCode=`
      ${ie}
      void main() {
        ${ae}
        setOutput(getSource(${oe}));
      }
    `}getCustomSetupFunc(ee){if(ee.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${ee.length})`);return(ne,ie)=>{this.startLoc==null&&(this.startLoc=ne.getUniformLocationNoThrow(ie,"start"),this.startLoc==null)||ne.gl.uniform1iv(this.startLoc,ee)}}}const coords=["x","y","z","w","u","v"];function getCoords$1(re){if(re===1)return"sourceLoc";if(re<=6)return coords.slice(0,re).map(ee=>"sourceLoc."+ee).join(",");throw Error(`Slicing for rank ${re} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SlicePackedProgram{constructor(ee){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee,this.rank=ee.length;const ne=getCoordsDataType(this.rank),ie=getChannels("coords",this.rank),oe=getChannels("sourceLoc",this.rank),ae=this.rank===1?"sourceLoc":`vec2(${oe.slice(-2).join()})`,ce=`getChannel(getSource(${oe.join()}), ${ae})`,le=`
      result.x = ${ce};
      if (++${ie[this.rank-1]} < ${ee[this.rank-1]}) {
        ++${oe[this.rank-1]};
        result.y = ${ce};
        --${oe[this.rank-1]};
      }
    `,ue=this.rank===1?"":`
      --${ie[this.rank-1]};
      if (++${ie[this.rank-2]} < ${ee[this.rank-2]}) {
        ++${oe[this.rank-2]};
        result.z = ${ce};
        if (++${ie[this.rank-1]} < ${ee[this.rank-1]}) {
          ++${oe[this.rank-1]};
          result.w = ${ce};
        }
      }
    `,he=this.rank<=4?`sourceLoc = coords +
            ${ne}(${ee.map((fe,me)=>`start[${me}]`).join()});`:ee.map((fe,me)=>`${oe[me]} = ${ie[me]} + start[${me}];`).join(`
`);this.userCode=`
      uniform int start[${this.rank}];
      void main() {
        ${ne} coords = getOutputCoords();
        ${ne} sourceLoc;
        ${he}
        vec4 result = vec4(0.);
        ${le}
        ${ue}
        setOutput(result);
      }
    `}getCustomSetupFunc(ee){if(ee.length!==this.rank)throw Error(`The rank (${this.rank}) of the program must match the length of start (${ee.length})`);return(ne,ie)=>{this.startLoc==null&&(this.startLoc=ne.getUniformLocationNoThrow(ie,"start"),this.startLoc==null)||ne.gl.uniform1iv(this.startLoc,ee)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function shallowSlice(re,ee,ne,ie){const oe=ie.texData.get(re.dataId),ae=ie.makeTensorInfo(ne,re.dtype),ce=ie.texData.get(ae.dataId);Object.assign(ce,oe),ce.complexParentRefCount=0,ce.refCount=1,ce.shape=ne,ce.dtype=re.dtype;let le=computeFlatOffset(ee,computeStrides(re.shape));oe.slice&&(le+=oe.slice.flatOffset),ce.slice={flatOffset:le,origDataId:oe.slice&&oe.slice.origDataId||re.dataId};const ue=ie.dataRefCount.get(ce.slice.origDataId)||1;return ie.dataRefCount.set(ce.slice.origDataId,ue+1),ae}function slice$2(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{begin:ae,size:ce}=ie,[le,ue]=parseSliceParams(oe,ae,ce);if(assertParamsValid(oe,le,ue),sizeFromShape(ue)===0)return ne.makeTensorInfo(ue,oe.dtype,[]);if(ne.shouldExecuteOnCPU([oe])||oe.dtype==="string"){const me=ne.texData.get(oe.dataId),ge=sliceImplCPU(me.values,le,ue,oe.shape,oe.dtype);return ne.makeTensorInfo(ue,oe.dtype,ge)}const{isPacked:he}=ne.texData.get(oe.dataId),fe=isSliceContinous(oe.shape,le,ue);if(he||!fe){const me=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new SlicePackedProgram(ue):new SliceProgram(ue),ge=me.getCustomSetupFunc(le);return ne.runWebGLProgram(me,[oe],oe.dtype,ge)}return ne.uploadToGPU(oe.dataId),shallowSlice(oe,le,ue,ne)}const sliceConfig={kernelName:Slice,backendName:"webgl",kernelFunc:slice$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const batchToSpaceND=re=>{const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{blockShape:ae,crops:ce}=ie;assert$2(oe.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const le=ae.reduce(($e,Te)=>$e*Te),ue=getReshaped(oe.shape,ae,le),he=getPermuted(ue.length,ae.length),fe=getReshapedPermuted(oe.shape,ae,le),me=getSliceBeginCoords(ce,ae.length),ge=getSliceSize(fe,ce,ae.length),ve=[],ye=reshape({inputs:{x:oe},backend:ne,attrs:{shape:ue}}),be=transpose({inputs:{x:ye},backend:ne,attrs:{perm:he}}),Ce=reshape({inputs:{x:be},backend:ne,attrs:{shape:fe}}),Se=slice$2({inputs:{x:Ce},backend:ne,attrs:{begin:me,size:ge}});return ve.push(ye),ve.push(be),ve.push(Ce),ve.forEach($e=>ne.disposeIntermediateTensorInfo($e)),Se},batchToSpaceNDConfig={kernelName:BatchToSpaceND,backendName:"webgl",kernelFunc:batchToSpaceND};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bincount(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,weights:ae}=ee,{size:ce}=ie,le=ne.readSync(oe.dataId),ue=ne.readSync(ae.dataId),he=bincountImplCPU(le,ue,ae.dtype,ae.shape,ce);return ne.makeTensorInfo([ce],ae.dtype,he)}const bincountConfig={kernelName:Bincount,backendName:"webgl",kernelFunc:bincount};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NOT_EQUAL="return float(a != b);",notEqual=binaryKernelFunc({opSnippet:NOT_EQUAL,dtype:"bool"}),notEqualConfig={kernelName:NotEqual,backendName:"webgl",kernelFunc:notEqual};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function real(re){const{inputs:ee,backend:ne}=re,{input:ie}=ee,oe=ne.texData.get(ie.dataId);return identity$3({inputs:{x:oe.complexTensorInfos.real},backend:ne})}const realConfig={kernelName:Real,backendName:"webgl",kernelFunc:real};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TO_INT="return float(int(x));";function int(re,ee){const ne=new UnaryOpProgram(re.shape,TO_INT),ie=ee.runWebGLProgram(ne,[re],"int32");return{dataId:ie.dataId,shape:ie.shape,dtype:ie.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cast(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{dtype:ae}=ie;if(ae==="complex64"){if(oe.dtype==="complex64")return identity$3({inputs:{x:oe},backend:ne});const ce=zeros$1(oe.shape),le=cast({inputs:{x:oe},backend:ne,attrs:{dtype:"float32"}}),ue=complex({inputs:{real:le,imag:ce},backend:ne});return ce.dispose(),ne.disposeIntermediateTensorInfo(le),ue}if(oe.dtype==="complex64"){const ce=real({inputs:{input:oe},backend:ne}),le=cast({inputs:{x:ce},backend:ne,attrs:{dtype:ae}});return ne.disposeIntermediateTensorInfo(ce),le}if(!hasEncodingLoss(oe.dtype,ae)){const ce=identity$3({inputs:{x:oe},backend:ne});return{dataId:ce.dataId,shape:ce.shape,dtype:ae}}if(ae==="int32")return int(oe,ne);if(ae==="bool"){const ce=ne.makeTensorInfo([],"bool",getTypedArrayFromDType("bool",1)),ue=notEqual({inputs:{a:oe,b:ce},backend:ne});return ne.disposeIntermediateTensorInfo(ce),ue}throw new Error(`Error in Cast: failed to cast ${oe.dtype} to ${ae}`)}const castConfig={kernelName:Cast,backendName:"webgl",kernelFunc:cast};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CEIL="return ceil(x);",ceil=unaryKernelFunc({opSnippet:CEIL,packedOpSnippet:CEIL,cpuKernelImpl:ceilImplCPU}),ceilConfig={kernelName:Ceil,backendName:"webgl",kernelFunc:ceil};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ClipProgram{constructor(ee){this.variableNames=["A"],this.outputShape=ee,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}getCustomSetupFunc(ee,ne){return(ie,oe)=>{this.minLoc==null&&(this.minLoc=ie.getUniformLocationNoThrow(oe,"minVal"),this.maxLoc=ie.getUniformLocationNoThrow(oe,"maxVal")),ie.gl.uniform1f(this.minLoc,ee),ie.gl.uniform1f(this.maxLoc,ne)}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ClipPackedProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}getCustomSetupFunc(ee,ne){return(ie,oe)=>{this.minLoc==null&&(this.minLoc=ie.getUniformLocationNoThrow(oe,"minVal"),this.maxLoc=ie.getUniformLocationNoThrow(oe,"maxVal")),ie.gl.uniform1f(this.minLoc,ee),ie.gl.uniform1f(this.maxLoc,ne)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function clipByValue(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{clipValueMin:ae,clipValueMax:ce}=ie;let le;env().getBool("WEBGL_PACK_CLIP")?le=new ClipPackedProgram(oe.shape):le=new ClipProgram(oe.shape);const ue=le.getCustomSetupFunc(ae,ce);return ne.runWebGLProgram(le,[oe],oe.dtype,ue)}const clipByValueConfig={kernelName:ClipByValue,backendName:"webgl",kernelFunc:clipByValue};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ComplexAbsProgram{constructor(ee){this.variableNames=["real","imag"],this.outputShape=ee,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function makeComplexComponentTensorInfo(re,ee){return{dataId:ee.dataId,dtype:ee.dtype,shape:re.shape}}function complexAbs(re){const{inputs:ee,backend:ne}=re,{x:ie}=ee,oe=ne.texData.get(ie.dataId),ae=new ComplexAbsProgram(ie.shape),ce=[makeComplexComponentTensorInfo(ie,oe.complexTensorInfos.real),makeComplexComponentTensorInfo(ie,oe.complexTensorInfos.imag)];return ne.runWebGLProgram(ae,ce,ce[0].dtype)}const complexAbsConfig={kernelName:ComplexAbs,backendName:"webgl",kernelFunc:complexAbs};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ConcatProgram{constructor(ee){this.outputShape=[],this.outputShape=computeOutShape$1(ee,1),this.variableNames=ee.map((ce,le)=>`T${le}`);const ne=new Array(ee.length-1);ne[0]=ee[0][1];for(let ce=1;ce<ne.length;ce++)ne[ce]=ne[ce-1]+ee[ce][1];const ie=[`if (yC < ${ne[0]}) setOutput(getT0(yR, yC));`];for(let ce=1;ce<ne.length;ce++){const le=ne[ce-1];ie.push(`else if (yC < ${ne[ce]}) setOutput(getT${ce}(yR, yC-${le}));`)}const oe=ne.length,ae=ne[ne.length-1];ie.push(`else setOutput(getT${oe}(yR, yC-${ae}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${ie.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ConcatPackedProgram{constructor(ee,ne){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=computeOutShape$1(ee,ne);const ie=this.outputShape,oe=ie.length,ae=getCoordsDataType(oe),ce=getChannels("coords",oe),le=["x","y","z","w","u","v"].slice(0,oe);this.variableNames=ee.map((be,Ce)=>`T${Ce}`);const ue=new Array(ee.length-1);ue[0]=ee[0][ne];for(let be=1;be<ue.length;be++)ue[be]=ue[be-1]+ee[be][ne];const he=le[ne],fe=le.slice(-2),me=le.join();let ge=`if (${he} < ${ue[0]}) {
        return getChannel(
            getT0(${me}), vec2(${fe.join()}));
        }`;for(let be=1;be<ue.length;be++){const Ce=ue[be-1];ge+=`
        if (${he} < ${ue[be]}  && ${he} >= ${ue[be-1]}) {
          return getChannel(
            getT${be}(${shiftedChannels(le,he,Ce)}),
            vec2(${shiftedChannels(fe,he,Ce)}));
        }`}const ve=ue.length,ye=ue[ue.length-1];ge+=`
        return getChannel(
          getT${ve}(${shiftedChannels(le,he,ye)}),
          vec2(${shiftedChannels(fe,he,ye)}));`,this.userCode=`
      float getValue(${le.map(be=>"int "+be)}) {
        ${ge}
      }

      void main() {
        ${ae} coords = getOutputCoords();
        vec4 result = vec4(getValue(${ce}), 0., 0., 0.);

        ${ce[oe-1]} = ${ce[oe-1]} + 1;
        if (${ce[oe-1]} < ${ie[oe-1]}) {
          result.g = getValue(${ce});
        }

        ${ce[oe-2]} = ${ce[oe-2]} + 1;
        if (${ce[oe-2]} < ${ie[oe-2]}) {
          result.a = getValue(${ce});
        }

        ${ce[oe-1]} = ${ce[oe-1]} - 1;
        if (${ce[oe-2]} < ${ie[oe-2]} &&
            ${ce[oe-1]} < ${ie[oe-1]}) {
          result.b = getValue(${ce});
        }
        setOutput(result);
      }
    `}}function shiftedChannels(re,ee,ne){const ie=re.indexOf(ee);return re.map((ae,ce)=>ce===ie?`${ae} - ${ne}`:ae).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function imag(re){const{inputs:ee,backend:ne}=re,{input:ie}=ee,oe=ne.texData.get(ie.dataId);return identity$3({inputs:{x:oe.complexTensorInfos.imag},backend:ne})}const imagConfig={kernelName:Imag,backendName:"webgl",kernelFunc:imag};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concatImpl(re,ee,ne){const ie=re[0].dtype;if(ie==="complex64"){const he=re.map(ye=>real({inputs:{input:ye},backend:ne})),fe=re.map(ye=>imag({inputs:{input:ye},backend:ne})),me=concatImpl(he,ee,ne),ge=concatImpl(fe,ee,ne),ve=complex({inputs:{real:me,imag:ge},backend:ne});return he.forEach(ye=>ne.disposeIntermediateTensorInfo(ye)),fe.forEach(ye=>ne.disposeIntermediateTensorInfo(ye)),ne.disposeIntermediateTensorInfo(me),ne.disposeIntermediateTensorInfo(ge),ve}if(ie==="string"){const{tensors2D:he,outShape:fe}=computeTensors2D(re,ee,ne),me=he.map(Ce=>({vals:ne.readSync(Ce.dataId),shape:Ce.shape})),ge=he[0].shape[0]===1,ve=concatImplCPU(me,fe,ie,ge),ye=computeOutShape$1(re.map(Ce=>Ce.shape),ee),be=ne.makeTensorInfo(ye,ie,ve);return he.forEach(Ce=>ne.disposeIntermediateTensorInfo(Ce)),be}if(re.length>env().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const he=Math.floor(re.length/2),fe=concatImpl(re.slice(0,he),ee,ne),me=concatImpl(re.slice(he),ee,ne),ge=concatImpl([fe,me],ee,ne);return ne.disposeIntermediateTensorInfo(fe),ne.disposeIntermediateTensorInfo(me),ge}if(env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&re[0].shape.length>1){const he=new ConcatPackedProgram(re.map(fe=>fe.shape),ee);return ne.runWebGLProgram(he,re,ie)}const{tensors2D:oe,outShape:ae}=computeTensors2D(re,ee,ne),ce=new ConcatProgram(oe.map(he=>he.shape)),le=ne.runWebGLProgram(ce,oe,ie);oe.forEach(he=>ne.disposeIntermediateTensorInfo(he));const ue=reshape({inputs:{x:le},attrs:{shape:ae},backend:ne});return ne.disposeIntermediateTensorInfo(le),ue}function computeTensors2D(re,ee,ne){const ie=computeOutShape$1(re.map(ae=>ae.shape),ee);return{tensors2D:re.map(ae=>reshape({inputs:{x:ae},attrs:{shape:[-1,sizeFromShape(ae.shape.slice(ee))]},backend:ne})),outShape:ie}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function concat(re){const{inputs:ee,backend:ne,attrs:ie}=re,{axis:oe}=ie,ae=parseAxisParam(oe,ee[0].shape)[0],ce=computeOutShape$1(ee.map(he=>he.shape),ae);if(sizeFromShape(ce)===0)return ne.makeTensorInfo(ce,ee[0].dtype,[]);const le=ee.filter(he=>sizeFromShape(he.shape)>0);if(le.length===1)return identity$3({inputs:{x:le[0]},backend:ne});const ue=le.map(he=>he.shape);return assertParamsConsistent(ue,ae),concatImpl(le,ae,ne)}const concatConfig={kernelName:Concat,backendName:"webgl",kernelFunc:concat};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Conv2DProgram{constructor(ee,ne=!1,ie=null,oe=!1,ae=!1){this.variableNames=["x","W"],this.outputShape=ee.outShape;const ce=ee.padInfo.top,le=ee.padInfo.left,ue=ee.strideHeight,he=ee.strideWidth,fe=ee.dilationHeight,me=ee.dilationWidth,ge=ee.filterHeight,ve=ee.filterWidth,ye=Math.floor(ee.inChannels/4)*4,be=ee.inChannels%4,Ce=ee.dataFormat==="channelsLast",Se=Ce?1:2,$e=Ce?2:3,Te=Ce?3:1;let Ne="",Ie="";ie&&(oe?Ne=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${ie}
        }`:ae?Ne=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${ie}
        }`:Ne=`
          float activation(float x) {
            ${ie}
          }
        `,Ie="result = activation(result);");const ke=ne?"result += getBiasAtOutCoords();":"";ne&&this.variableNames.push("bias"),oe&&this.variableNames.push("preluActivationWeights"),ae&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${Ne}

      const ivec2 strides = ivec2(${ue}, ${he});
      const ivec2 pads = ivec2(${ce}, ${le});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${Te}];

        ivec2 xRCCorner =
            ivec2(coords[${Se}], coords[${$e}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${ge}; wR++) {
          int xR = xRCorner + wR * ${fe};

          if (xR < 0 || xR >= ${ee.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${ve}; wC++) {
            int xC = xCCorner + wC * ${me};

            if (xC < 0 || xC >= ${ee.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${ye}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${Ce}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${be===1}) {

              if (${Ce}) {
                dotProd +=
                    getX(batch, xR, xC, ${ye}) *
                    getW(wR, wC, ${ye}, d2);
              } else {
                dotProd +=
                    getX(batch, ${ye}, xR, xC) *
                    getW(wR, wC, ${ye}, d2);
              }

            } else if (${be===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${ye}, d2),
                getW(wR, wC, ${ye} + 1, d2)
              );

              if (${Ce}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${ye}),
                  getX(batch, xR, xC, ${ye} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${ye}, xR, xC),
                  getX(batch, ${ye} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${be===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${ye}, d2),
                getW(wR, wC, ${ye} + 1, d2),
                getW(wR, wC, ${ye} + 2, d2)
              );

              if (${Ce}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${ye}),
                  getX(batch, xR, xC, ${ye} + 1),
                  getX(batch, xR, xC, ${ye} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${ye}, xR, xC),
                  getX(batch, ${ye} + 1, xR, xC),
                  getX(batch, ${ye} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${ke}
        ${Ie}
        setOutput(result);
      }
    `}}class Conv3DProgram{constructor(ee){this.variableNames=["x","W"],this.outputShape=ee.outShape;const ne=ee.padInfo.front,ie=ee.padInfo.top,oe=ee.padInfo.left,ae=ee.strideDepth,ce=ee.strideHeight,le=ee.strideWidth,ue=ee.dilationDepth,he=ee.dilationHeight,fe=ee.dilationWidth,me=ee.filterDepth,ge=ee.filterHeight,ve=ee.filterWidth,ye=Math.floor(ee.inChannels/4)*4,be=ee.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${ae}, ${ce}, ${le});
      const ivec3 pads = ivec3(${ne}, ${ie}, ${oe});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${me}; wF++) {
          int xF = xFCorner + wF * ${ue};

          if (xF < 0 || xF >= ${ee.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${ge}; wR++) {
            int xR = xRCorner + wR * ${he};

            if (xR < 0 || xR >= ${ee.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${ve}; wC++) {
              int xC = xCCorner + wC * ${fe};

              if (xC < 0 || xC >= ${ee.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${ye}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${be===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${ye}) *
                  getW(wF, wR, wC, ${ye}, d2);
              } else if (${be===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${ye}),
                  getX(batch, xF, xR, xC, ${ye} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${ye}, d2),
                  getW(wF, wR, wC, ${ye} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${be===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${ye}),
                  getX(batch, xF, xR, xC, ${ye} + 1),
                  getX(batch, xF, xR, xC, ${ye} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${ye}, d2),
                  getW(wF, wR, wC, ${ye} + 1, d2),
                  getW(wF, wR, wC, ${ye} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Im2ColPackedProgram{constructor(ee,ne,ie){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee;const{filterWidth:oe,inChannels:ae,strideWidth:ce,strideHeight:le,padInfo:ue,outWidth:he,dilationWidth:fe,dilationHeight:me,dataFormat:ge}=ie,{left:ve,top:ye}=ue,be=ae*oe,Ce=getGlslDifferences(),Se=ge==="channelsLast",$e=Se?0:1,Te=Se?1:2;let Ne="";for(let Ie=0;Ie<=1;Ie++)for(let ke=0;ke<=1;ke++)Ne+=`
          blockIndex = rc.y + ${ke};
          pos = rc.x + ${Ie};

          if(blockIndex < ${ee[1]} && pos < ${ee[0]}) {
            offsetY = int(blockIndex / (${he})) * ${le} - ${ye};
            d0 = offsetY + ${me} * (pos / ${be});

            if(d0 < ${ne[$e]} && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), ${he}.) * ${ce}. - ${ve}.);
              d1 = offsetX + ${fe} * (int(mod(float(pos), ${be}.) / ${ae}.));

              if(d1 < ${ne[Te]} && d1 >= 0) {

                ch = int(mod(float(pos), ${ae}.));

                if (${Se}) {
                  innerDims = vec2(d1, ch);
                  result[${Ie*2+ke}] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${Ie*2+ke}] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${Ne}

        ${Ce.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2dByMatMul({x:re,filter:ee,convInfo:ne,backend:ie,bias:oe=null,preluActivationWeights:ae=null,leakyreluAlpha:ce=0,activation:le=null}){const ue=re.shape,he=ie.texData.get(re.dataId),fe=ne.inChannels,me=ue[0]*ue[1]*ue[2],ge=ne.outChannels,ve=ne.dataFormat==="channelsLast",ye=!1,be=!1;let Ce;const Se=[],$e=(me===1||ge===1)&&fe>MATMUL_SHARED_DIM_THRESHOLD,Te=ue[2]%2!==0&&!!he.isPacked;if($e||!env().getBool("WEBGL_LAZILY_UNPACK")||!env().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!Te){const Ne=ve?ue[0]*ue[1]*ue[2]:ue[0]*ue[2]*ue[3],Ie=reshape({inputs:{x:re},backend:ie,attrs:{shape:[1,Ne,ne.inChannels]}}),ke=reshape({inputs:{x:ee},backend:ie,attrs:{shape:[1,ne.inChannels,ne.outChannels]}}),De=batchMatMulImpl({a:Ie,b:ke,transposeA:ye,transposeB:be,backend:ie,bias:oe,activation:le,preluActivationWeights:ae,leakyreluAlpha:ce});Ce=reshape({inputs:{x:De},backend:ie,attrs:{shape:ne.outShape}}),Se.push(Ie),Se.push(ke),Se.push(De)}else{const Ne=ve?ue[0]*ue[1]*(ue[2]+1):ue[0]*ue[2]*(ue[3]+1),Ie={dataId:re.dataId,shape:[1,Ne,ne.inChannels],dtype:re.dtype},ke=he.shape;he.shape=he.shape.slice(),he.shape[he.shape.length-2]++,assert$2(isReshapeFree(he.shape,Ie.shape),()=>`packed reshape ${he.shape} to ${Ie.shape} isn't free`);const De=reshape({inputs:{x:ee},backend:ie,attrs:{shape:[1,ne.inChannels,ne.outChannels]}});Se.push(De);const Oe=batchMatMulImpl({a:Ie,b:De,backend:ie,transposeA:ye,transposeB:be,bias:oe,activation:le,preluActivationWeights:ae,leakyreluAlpha:ce}),Be=ie.texData.get(Oe.dataId);assert$2(Be.isPacked,()=>"batchMatMul result is expected to be packed"),he.shape=ke,Be.shape=ne.outShape,Ce=identity$3({inputs:{x:Oe},backend:ie}),Ce.shape=ne.outShape,Se.push(Oe)}for(const Ne of Se)ie.disposeIntermediateTensorInfo(Ne);return Ce}function conv2dWithIm2Row({x:re,filter:ee,convInfo:ne,backend:ie,bias:oe=null,preluActivationWeights:ae=null,leakyreluAlpha:ce=0,activation:le=null}){const{filterWidth:ue,filterHeight:he,inChannels:fe,outWidth:me,outHeight:ge,dataFormat:ve}=ne,ye=ve==="channelsLast",be=ue*he*fe,Ce=ge*me,Se=[be,Ce],$e=!0,Te=!1,Ne=[],Ie=reshape({inputs:{x:re},backend:ie,attrs:{shape:re.shape.slice(1)}}),ke=reshape({inputs:{x:ee},backend:ie,attrs:{shape:[1,be,sizeFromShape(ee.shape)/be]}});Ne.push(Ie),Ne.push(ke);const De=new Im2ColPackedProgram(Se,Ie.shape,ne),Oe=ie.runWebGLProgram(De,[Ie],"float32"),Be=reshape({inputs:{x:Oe},backend:ie,attrs:{shape:[1,Se[0],Se[1]]}});Ne.push(Oe),Ne.push(Be);const Me=oe!=null,Le=ae!=null,je=le==="leakyrelu",ze=le?mapActivationToShaderProgram(le,!0):null,Ve=new MatMulPackedProgram(Be.shape,ke.shape,[1,Ce,ne.outChannels],$e,Te,Me,ze,Le,je),He=[Be,ke];if(oe&&He.push(oe),Le&&He.push(ae),je){const Ke=ie.makeTensorInfo([],"float32",createScalarValue(ce,"float32"));He.push(Ke),Ne.push(Ke)}const We=ie.runWebGLProgram(Ve,He,"float32"),Ye=ye?[1,ge,me,ne.outChannels]:[1,ne.outChannels,ge,me],Ue=reshape({inputs:{x:We},backend:ie,attrs:{shape:Ye}});Ne.push(We);for(const Ke of Ne)ie.disposeIntermediateTensorInfo(Ke);return Ue}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2d(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,filter:ae}=ee,{strides:ce,pad:le,dataFormat:ue,dilations:he,dimRoundingMode:fe}=ie,me=convertConv2DDataFormat(ue),ge=computeConv2DInfo(oe.shape,ae.shape,ce,he,le,fe,!1,me);let ve;if(ge.filterHeight===1&&ge.filterWidth===1&&ge.dilationHeight===1&&ge.dilationWidth===1&&ge.strideHeight===1&&ge.strideWidth===1&&(ge.padInfo.type==="SAME"||ge.padInfo.type==="VALID"))ve=conv2dByMatMul({x:oe,filter:ae,convInfo:ge,backend:ne});else if(env().getBool("WEBGL_CONV_IM2COL")&&oe.shape[0]===1)ve=conv2dWithIm2Row({x:oe,filter:ae,convInfo:ge,backend:ne});else{const be=new Conv2DProgram(ge);ve=ne.runWebGLProgram(be,[oe,ae],"float32")}const ye=reshape({inputs:{x:ve},backend:ne,attrs:{shape:ge.outShape}});return ne.disposeIntermediateTensorInfo(ve),ye}const conv2DConfig={kernelName:Conv2D$1,backendName:"webgl",kernelFunc:conv2d};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Conv2DDerFilterProgram{constructor(ee){this.variableNames=["x","dy"],this.outputShape=ee.filterShape;const ne=ee.strideHeight,ie=ee.strideWidth,oe=ee.padInfo.top,ae=ee.padInfo.left,ce=ee.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${ee.batchSize}; b++) {
          for (int yR = 0; yR < ${ee.outHeight}; yR++) {
            int xR = wR + yR * ${ne} - ${oe};

            if (xR < 0 || xR >= ${ee.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${ee.outWidth}; yC++) {
              int xC = wC + yC * ${ie} - ${ae};

              if (xC < 0 || xC >= ${ee.inWidth}) {
                continue;
              }

              if (${ce}) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Conv2DDerInputProgram{constructor(ee){this.variableNames=["dy","W"],this.outputShape=ee.inShape;const ne=ee.filterHeight,ie=ee.filterWidth,oe=ee.strideHeight,ae=ee.strideWidth,ce=ee.dataFormat==="channelsLast",le=ne-1-ee.padInfo.top,ue=ie-1-ee.padInfo.left,he=ce?1:2,fe=ce?2:3,me=ce?3:1;this.userCode=`
      const ivec2 pads = ivec2(${le}, ${ue});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${me}];

        ivec2 dyCorner = ivec2(coords[${he}], coords[${fe}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${ne}; wR++) {
          float dyR = float(dyRCorner + wR) / ${oe}.0;

          if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${ne} - 1 - wR;

          for (int wC = 0; wC < ${ie}; wC++) {
            float dyC = float(dyCCorner + wC) / ${ae}.0;

            if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${ie} - 1 - wC;

            for (int d2 = 0; d2 < ${ee.outChannels}; d2++) {

              if (${ce}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Conv3DDerFilterProgram{constructor(ee){this.variableNames=["x","dy"],this.outputShape=ee.filterShape;const ne=ee.strideDepth,ie=ee.strideHeight,oe=ee.strideWidth,ae=ee.padInfo.front,ce=ee.padInfo.top,le=ee.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${ee.batchSize}; b++) {
          for (int yF = 0; yF < ${ee.outDepth}; yF++) {
            int xF = wF + yF * ${ne} - ${ae};

            if (xF < 0 || xF >= ${ee.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${ee.outHeight}; yR++) {
              int xR = wR + yR * ${ie} - ${ce};

              if (xR < 0 || xR >= ${ee.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${ee.outWidth}; yC++) {
                int xC = wC + yC * ${oe} - ${le};

                if (xC < 0 || xC >= ${ee.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Conv3DDerInputProgram{constructor(ee){this.variableNames=["dy","W"],this.outputShape=ee.inShape;const ne=ee.filterDepth,ie=ee.filterHeight,oe=ee.filterWidth,ae=ee.strideDepth,ce=ee.strideHeight,le=ee.strideWidth,ue=ne-1-ee.padInfo.front,he=ie-1-ee.padInfo.top,fe=oe-1-ee.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${ue}, ${he}, ${fe});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${ne}; wF++) {
          float dyF = float(dyFCorner + wF) / ${ae}.0;

          if (dyF < 0.0 || dyF >= ${ee.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${ne} - 1 - wF;

          for (int wR = 0; wR < ${ie}; wR++) {
            float dyR = float(dyRCorner + wR) / ${ce}.0;

            if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${ie} - 1 - wR;

            for (int wC = 0; wC < ${oe}; wC++) {
              float dyC = float(dyCCorner + wC) / ${le}.0;

              if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${oe} - 1 - wC;

              for (int d2 = 0; d2 < ${ee.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropFilter(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,dy:ae}=ee,{strides:ce,pad:le,dataFormat:ue,dimRoundingMode:he,filterShape:fe}=ie,me=convertConv2DDataFormat(ue),ge=computeConv2DInfo(oe.shape,fe,ce,1,le,he,!1,me),ve=new Conv2DDerFilterProgram(ge);return ne.runWebGLProgram(ve,[oe,ae],"float32")}const conv2DBackpropFilterConfig={kernelName:Conv2DBackpropFilter,backendName:"webgl",kernelFunc:conv2DBackpropFilter};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv2DBackpropInput(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,filter:ae}=ee,{inputShape:ce,strides:le,pad:ue,dataFormat:he,dimRoundingMode:fe}=ie,me=convertConv2DDataFormat(he),ge=computeConv2DInfo(ce,ae.shape,le,1,ue,fe,!1,me),ve=new Conv2DDerInputProgram(ge);return ne.runWebGLProgram(ve,[oe,ae],"float32")}const conv2DBackpropInputConfig={kernelName:Conv2DBackpropInput,backendName:"webgl",kernelFunc:conv2DBackpropInput};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3D(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,filter:ae}=ee,{strides:ce,pad:le,dilations:ue}=ie,he=computeConv3DInfo(oe.shape,ae.shape,ce,ue,le),fe=new Conv3DProgram(he);return ne.runWebGLProgram(fe,[oe,ae],"float32")}const conv3DConfig={kernelName:Conv3D$1,backendName:"webgl",kernelFunc:conv3D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropFilterV2(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,dy:ae}=ee,{strides:ce,pad:le,filterShape:ue}=ie,he=computeConv3DInfo(oe.shape,ue,ce,1,le),fe=new Conv3DDerFilterProgram(he);return ne.runWebGLProgram(fe,[oe,ae],"float32")}const conv3DBackpropFilterV2Config={kernelName:Conv3DBackpropFilterV2,backendName:"webgl",kernelFunc:conv3DBackpropFilterV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function conv3DBackpropInput(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,filter:ae}=ee,{pad:ce,strides:le,inputShape:ue}=ie,he=computeConv3DInfo(ue,ae.shape,le,1,ce),fe=new Conv3DDerInputProgram(he);return ne.runWebGLProgram(fe,[oe,ae],"float32")}const conv3DBackpropInputConfig={kernelName:Conv3DBackpropInputV2,backendName:"webgl",kernelFunc:conv3DBackpropInput};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COS=CHECK_NAN_SNIPPET_UNARY+`
  return cos(x);
`,cos=unaryKernelFunc({opSnippet:COS}),cosConfig={kernelName:Cos,backendName:"webgl",kernelFunc:cos};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const COSH=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,cosh=unaryKernelFunc({opSnippet:COSH}),coshConfig={kernelName:Cosh,backendName:"webgl",kernelFunc:cosh};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CropAndResizeProgram{constructor(ee,ne,ie,oe,ae){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[ce,le,ue,he]=ee,[fe]=ne,[me,ge]=ie;this.outputShape=[fe,me,ge,he];const ve=oe==="bilinear"?1:0,[ye,be]=[`${le-1}.0`,`${ue-1}.0`],[Ce,Se,$e]=me>1?[`${(le-1)/(me-1)}`,"(y2-y1) * height_ratio",`y1*${ye} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${ye}`],[Te,Ne,Ie]=ge>1?[`${(ue-1)/(ge-1)}`,"(x2-x1) * width_ratio",`x1*${be} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${be}`];this.userCode=`
      const float height_ratio = float(${Ce});
      const float width_ratio = float(${Te});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${ce}) {
          return;
        }

        float height_scale = ${Se};
        float width_scale = ${Ne};

        float in_y = ${$e};
        if( in_y < 0.0 || in_y > ${ye} ) {
          setOutput(float(${ae}));
          return;
        }
        float in_x = ${Ie};
        if( in_x < 0.0 || in_x > ${be} ) {
          setOutput(float(${ae}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${ve} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cropAndResize=re=>{const{inputs:ee,backend:ne,attrs:ie}=re,{image:oe,boxes:ae,boxInd:ce}=ee,{cropSize:le,method:ue,extrapolationValue:he}=ie,fe=new CropAndResizeProgram(oe.shape,ae.shape,le,ue,he);return ne.runWebGLProgram(fe,[oe,ae,ce],"float32")},cropAndResizeConfig={kernelName:CropAndResize,backendName:"webgl",kernelFunc:cropAndResize};class CumSumProgram{constructor(ee,ne,ie){this.variableNames=["x"],this.outputShape=ee;const oe=ee.length,ae=ne?"0.0":`getX(${getCoords(oe,"coords")})`,ce=ee[ee.length-1];let le="",ue="";ne?(le=ie?`end != ${ce-1}`:"end != 0",ue=ie?"end + 1":"end - 1"):(le=ie?`end + pow2 < ${ce}`:"end >= pow2",ue=ie?"end + pow2":"end - pow2"),this.userCode=`
      uniform float index;
      void main() {
        ${getCoordsDataType(oe)} coords = getOutputCoords();
        int end = ${getFinalCoord(oe,"coords")};
        float val = ${ae};
        int pow2 = int(pow(2.0, index));
        if (${le}) {
          int idx = ${ue};
          ${getFinalCoord(oe,"coords")} = idx;
          val += getX(${getCoords(oe,"coords")});
        }
        setOutput(val);
      }
    `}getCustomSetupFunc(ee){return(ne,ie)=>{this.index==null&&(this.index=ne.getUniformLocation(ie,"index")),ne.gl.uniform1f(this.index,ee)}}}function getCoords(re,ee){if(re===1)return`${ee}`;if(re===2)return`${ee}.x, ${ee}.y`;if(re===3)return`${ee}.x, ${ee}.y, ${ee}.z`;if(re===4)return`${ee}.x, ${ee}.y, ${ee}.z, ${ee}.w`;throw Error(`Cumulative sum for rank ${re} is not yet supported`)}function getFinalCoord(re,ee){if(re===1)return`${ee}`;if(re===2)return`${ee}.y`;if(re===3)return`${ee}.z`;if(re===4)return`${ee}.w`;throw Error(`Cumulative sum for rank ${re} is not yet supported`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cumsum(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,exclusive:ce,reverse:le}=ie,ue=oe.shape.length,he=getAxesPermutation([ae],ue);let fe=oe;he!=null&&(fe=transpose({inputs:{x:oe},backend:ne,attrs:{perm:he}}));const me=getInnerMostAxes(1,ue)[0];if(me!==ue-1)throw new Error(`WebGL cumsum shader expects an inner-most axis=${oe.shape.length-1} but got axis=${ae}`);const ge=fe.shape[me];let ve=identity$3({inputs:{x:fe},backend:ne});for(let ye=0;ye<=Math.ceil(Math.log2(ge))-1;ye++){const be=new CumSumProgram(fe.shape,!1,le),Ce=be.getCustomSetupFunc(ye),Se=ve;ve=ne.runWebGLProgram(be,[ve],ve.dtype,Ce),ne.disposeIntermediateTensorInfo(Se)}if(ce){const ye=new CumSumProgram(fe.shape,ce,le),be=ve;ve=ne.runWebGLProgram(ye,[ve],ve.dtype),ne.disposeIntermediateTensorInfo(be)}if(he!=null){const ye=getUndoAxesPermutation(he),be=transpose({inputs:{x:ve},backend:ne,attrs:{perm:ye}});return ne.disposeIntermediateTensorInfo(ve),ne.disposeIntermediateTensorInfo(fe),be}return ve}const cumsumConfig={kernelName:Cumsum,backendName:"webgl",kernelFunc:cumsum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function denseBincount(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,weights:ae}=ee,{size:ce,binaryOutput:le}=ie;if(oe.shape.length===1){const ue=ne.readSync(oe.dataId),he=ne.readSync(ae.dataId),fe=bincountImplCPU(ue,he,ae.dtype,ae.shape,ce);return ne.makeTensorInfo([ce],ae.dtype,fe)}else if(oe.shape.length===2){const ue=ne.bufferSync(oe),he=ne.bufferSync(ae),fe=bincountReduceImplCPU(ue,he,ce,le);return ne.makeTensorInfo(fe.shape,ae.dtype,fe.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${oe.shape.length}.`)}const denseBincountConfig={kernelName:DenseBincount,backendName:"webgl",kernelFunc:denseBincount};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthToSpaceProgram{constructor(ee,ne,ie){this.variableNames=["x"],this.outputShape=[],this.outputShape=ee,this.blockSize=ne,this.dataFormat=ie,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${ne};
      int offset_h = imod(h, ${ne});
      int in_w = w / ${ne};
      int offset_w = imod(w, ${ne});
      int offset_d = (offset_h * ${ne} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthToSpace(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{blockSize:ae,dataFormat:ce}=ie;assert$2(ae>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${ae}`);const le=oe.shape[0],ue=ce==="NHWC"?oe.shape[1]:oe.shape[2],he=ce==="NHWC"?oe.shape[2]:oe.shape[3],fe=ce==="NHWC"?oe.shape[3]:oe.shape[1],me=ue*ae,ge=he*ae,ve=fe/(ae*ae),ye=ce==="NHWC"?[le,me,ge,ve]:[le,ve,me,ge],be=new DepthToSpaceProgram(ye,ae,ce);return ne.runWebGLProgram(be,[oe],oe.dtype)}const depthToSpaceConfig={kernelName:DepthToSpace,backendName:"webgl",kernelFunc:depthToSpace};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthwiseConv2DProgram{constructor(ee,ne=!1,ie=null,oe=!1,ae=!1){this.variableNames=["x","W"],this.outputShape=ee.outShape;const ce=ee.inHeight,le=ee.inWidth,ue=ee.padInfo.top,he=ee.padInfo.left,fe=ee.strideHeight,me=ee.strideWidth,ge=ee.dilationHeight,ve=ee.dilationWidth,ye=ee.filterHeight,be=ee.filterWidth,Ce=ee.outChannels/ee.inChannels;let Se="",$e="";ie&&(oe?Se=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${ie}
        }`:ae?Se=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${ie}
        }`:Se=`
          float activation(float x) {
            ${ie}
          }
        `,$e="result = activation(result);");const Te=ne?"result += getBiasAtOutCoords();":"";ne&&this.variableNames.push("bias"),oe&&this.variableNames.push("preluActivationWeights"),ae&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${Se}

      const ivec2 strides = ivec2(${fe}, ${me});
      const ivec2 pads = ivec2(${ue}, ${he});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${Ce};
        int q = d2 - d1 * ${Ce};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${ye}; wR++) {
          int xR = xRCorner + wR * ${ge};

          if (xR < 0 || xR >= ${ce}) {
            continue;
          }

          for (int wC = 0; wC < ${be}; wC++) {
            int xC = xCCorner + wC * ${ve};

            if (xC < 0 || xC >= ${le}) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${Te}
        ${$e}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthwiseConvPacked2DProgram{constructor(ee,ne=!1,ie=null,oe=!1,ae=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ee.outShape;const ce=ee.inHeight,le=ee.inWidth,ue=ee.padInfo.top,he=ee.padInfo.left,fe=ee.strideHeight,me=ee.strideWidth,ge=ee.dilationHeight,ve=ee.dilationWidth,ye=ee.filterHeight,be=ee.filterWidth,Ce=be;let Se="int xR; int xC; int xCOffset;";for(let Ie=0;Ie<ye;Ie++)for(let ke=0;ke<be;ke++)Se+=`
          vec4 xTexelR${Ie}C${ke*2} = vec4(0.);
          vec4 wR${Ie}C${ke} = vec4(0.);
          vec4 xR${Ie}C${ke} = vec4(0.);`;for(let Ie=0;Ie<ye;Ie++)for(let ke=0;ke<Ce;ke++){const De=ke*2;if(Se+=`
          xR = xRCorner + ${Ie*ge};
          xC = xCCorner + ${De*ve};
        `,me===1){if(De<be&&(he%2===1?Se+=`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < ${ce} && xCOffset >= 0 && xCOffset < ${le}) {
                  xTexelR${Ie}C${De} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${le}) {
                    xTexelR${Ie}C${De}.zw = vec2(0.);
                  }
                } else {
                  xTexelR${Ie}C${De} = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < ${ce} && xCOffset >= 0 && xCOffset < ${le}) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= ${le}) {
                    previous.zw = vec2(0.);
                  }

                  xR${Ie}C${De} = vec4(previous.zw, xTexelR${Ie}C${De}.xy);
                } else {
                  xR${Ie}C${De} = vec4(0, 0, xTexelR${Ie}C${De}.xy);
                }
              `:Se+=`
                if(xR >= 0 && xR < ${ce} && xC >= 0 && xC < ${le}) {
                  xTexelR${Ie}C${De} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${Ie}C${De} = vec4(0.);
                }

                xR${Ie}C${De} = xTexelR${Ie}C${De};
              `,De+1<be)){const Oe=he%2===0?nearestLargerEven(ve):ve;ve%2===0&&he%2===1||ve%2!==0&&he%2!==1?(Se+=`
                  xCOffset = xC + ${he%2} + ${Oe};

                  if(xR >= 0 && xR < ${ce} &&
                    xCOffset >= 0 && xCOffset < ${le}) {
                    xTexelR${Ie}C${De+2} = getX(batch, xR, xCOffset, d1);
                  }
                `,ve>1&&(Se+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < ${ce} &&
                      xCOffset >= 0 && xCOffset < ${le}) {
                      xTexelR${Ie}C${De} = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR${Ie}C${De} = vec4(0.);
                    }
                  `),Se+=`
                  xR${Ie}C${De+1} = vec4(
                    xTexelR${Ie}C${De}.zw, xTexelR${Ie}C${De+2}.xy);
                `):Se+=`
                  xCOffset = xC + ${Oe};

                  if(xR >= 0 && xR < ${ce} &&
                    xCOffset >= 0 && xCOffset < ${le}) {
                    xTexelR${Ie}C${De+2} = getX(batch, xR, xCOffset, d1);
                  }

                  xR${Ie}C${De+1} = xTexelR${Ie}C${De+2};
                `}}else De<be&&(Se+=`
              if(xR >= 0 && xR < ${ce}) {
            `,he%2===1?(Se+=`
                xCOffset = xC + 1 - ${me};
                if(xCOffset >= 0 && xCOffset < ${le}) {
                  xTexelR${Ie}C${De} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${Ie}C${De} = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < ${le}) {
                  xTexelR${Ie}C${De+2} = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR${Ie}C${De+2} = vec4(0.);
                }

                xR${Ie}C${De} = vec4(
                  xTexelR${Ie}C${De}.zw, xTexelR${Ie}C${De+2}.zw);
              `,De+1<be&&(Se+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + ${me};
                  if(xCOffset >= 0 && xCOffset < ${le}) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR${Ie}C${De+1} = vec4(xTexelR${Ie}C${De+2}.xy, final.xy);
                `)):(Se+=`
                if(xC >= 0 && xC < ${le}) {
                  xTexelR${Ie}C${De} = getX(batch, xR, xC, d1);
                } else {
                  xTexelR${Ie}C${De} = vec4(0.);
                }

                xCOffset = xC + ${me};
                if(xCOffset >= 0 && xCOffset < ${le}) {
                  xTexelR${Ie}C${De+2} = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR${Ie}C${De+2} = vec4(0.);
                }

                xR${Ie}C${De} = vec4(
                  xTexelR${Ie}C${De}.xy, xTexelR${Ie}C${De+2}.xy);
              `,De+1<be&&(Se+=`
                  xR${Ie}C${De+1} = vec4(
                    xTexelR${Ie}C${De}.zw, xTexelR${Ie}C${De+2}.zw);
                `)),Se+="}");De<be&&(Se+=`
            vec4 wTexelR${Ie}C${De} = getW(${Ie}, ${De}, d1, q);
            wR${Ie}C${De} = vec4(wTexelR${Ie}C${De}.xz, wTexelR${Ie}C${De}.xz);
          `,De+1<be&&(Se+=`
              vec4 wTexelR${Ie}C${De+1} = getW(${Ie}, ${De+1}, d1, q);
              wR${Ie}C${De+1} =
                vec4(wTexelR${Ie}C${De+1}.xz, wTexelR${Ie}C${De+1}.xz);`))}for(let Ie=0;Ie<ye;Ie++)for(let ke=0;ke<be;ke++)Se+=`dotProd += xR${Ie}C${ke} * wR${Ie}C${ke};`;let $e="",Te="";ie&&(oe?$e=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${ie}
        }`:ae?$e=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${ie}
        }`:$e=`vec4 activation(vec4 x) {
          ${ie}
        }`,Te="result = activation(result);");const Ne=ne?"result += getBiasAtOutCoords();":"";ne&&this.variableNames.push("bias"),oe&&this.variableNames.push("preluActivationWeights"),ae&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${$e}

      const ivec2 strides = ivec2(${fe}, ${me});
      const ivec2 pads = ivec2(${ue}, ${he});

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        ${Se}

        vec4 result = dotProd;
        ${Ne}
        ${Te}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNative(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,filter:ae}=ee,{strides:ce,pad:le,dilations:ue,dimRoundingMode:he}=ie;let fe=ue;fe==null&&(fe=[1,1]),assert$2(eitherStridesOrDilationsAreOne(ce,fe),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${ce} and dilations '${fe}'`);const me=computeConv2DInfo(oe.shape,ae.shape,ce,fe,le,he,!0);let ge;return env().getBool("WEBGL_PACK_DEPTHWISECONV")&&me.strideWidth<=2&&me.outChannels/me.inChannels===1?ge=new DepthwiseConvPacked2DProgram(me):ge=new DepthwiseConv2DProgram(me),ne.runWebGLProgram(ge,[oe,ae],"float32")}const depthwiseConv2dNativeConfig={kernelName:DepthwiseConv2dNative,backendName:"webgl",kernelFunc:depthwiseConv2dNative};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DepthwiseConv2DDerFilterProgram{constructor(ee){this.variableNames=["x","dy"],this.outputShape=ee.filterShape;const ne=ee.strideHeight,ie=ee.strideWidth,oe=ee.padInfo.top,ae=ee.padInfo.left,ce=ee.outChannels/ee.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${ce} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${ee.batchSize}; b++) {
          for (int yR = 0; yR < ${ee.outHeight}; yR++) {
            int xR = wR + yR * ${ne} - ${oe};

            if (xR < 0 || xR >= ${ee.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${ee.outWidth}; yC++) {
              int xC = wC + yC * ${ie} - ${ae};

              if (xC < 0 || xC >= ${ee.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class DepthwiseConv2DDerInputProgram{constructor(ee){this.variableNames=["dy","W"],this.outputShape=ee.inShape;const ne=ee.filterHeight,ie=ee.filterWidth,oe=ee.strideHeight,ae=ee.strideWidth,ce=ne-1-ee.padInfo.top,le=ie-1-ee.padInfo.left,ue=ee.outChannels/ee.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${ce}, ${le});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${ne}; wR++) {
          float dyR = float(dyRCorner + wR) / ${oe}.0;

          if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${ne} - 1 - wR;

          for (int wC = 0; wC < ${ie}; wC++) {
            float dyC = float(dyCCorner + wC) / ${ae}.0;

            if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${ie} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${ue}; dm++) {
              int d2 = d1 * ${ue} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropFilter(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,dy:ae}=ee,{strides:ce,dilations:le,pad:ue,dimRoundingMode:he,filterShape:fe}=ie,me=computeConv2DInfo(oe.shape,fe,ce,le,ue,he,!0),ge=new DepthwiseConv2DDerFilterProgram(me);return ne.runWebGLProgram(ge,[oe,ae],"float32")}const depthwiseConv2dNativeBackpropFilterConfig={kernelName:DepthwiseConv2dNativeBackpropFilter,backendName:"webgl",kernelFunc:depthwiseConv2dNativeBackpropFilter};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function depthwiseConv2dNativeBackpropInput(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,filter:ae}=ee,{strides:ce,dilations:le,pad:ue,dimRoundingMode:he,inputShape:fe}=ie,me=computeConv2DInfo(fe,ae.shape,ce,le,ue,he,!0),ge=new DepthwiseConv2DDerInputProgram(me);return ne.runWebGLProgram(ge,[oe,ae],"float32")}const depthwiseConv2dNativeBackpropInputConfig={kernelName:DepthwiseConv2dNativeBackpropInput,backendName:"webgl",kernelFunc:depthwiseConv2dNativeBackpropInput};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DiagProgram{constructor(ee){this.variableNames=["X"],this.outputShape=[ee,ee],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function diag(re){const{inputs:ee,backend:ne}=re,{x:ie}=ee,oe=[...ie.shape,...ie.shape],ae=sizeFromShape(ie.shape),ce=reshape({inputs:{x:ie},backend:ne,attrs:{shape:[ae]}}),le=new DiagProgram(ae),ue=ne.runWebGLProgram(le,[ce],ce.dtype),he=reshape({inputs:{x:ue},backend:ne,attrs:{shape:oe}});return ne.disposeIntermediateTensorInfo(ce),ne.disposeIntermediateTensorInfo(ue),he}const diagConfig={kernelName:Diag,backendName:"webgl",kernelFunc:diag};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dilation2DProgram{constructor(ee){this.variableNames=["x","W"],this.outputShape=ee.outShape;const{inHeight:ne,inWidth:ie,padInfo:oe,strideHeight:ae,strideWidth:ce,filterHeight:le,filterWidth:ue,dilationHeight:he,dilationWidth:fe}=ee,{top:me,left:ge}=oe;this.userCode=`
      const ivec2 strides = ivec2(${ae}, ${ce});
      const ivec2 pads = ivec2(${me}, ${ge});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${le}; h++) {
          int hIn = hBeg + h * ${he};

          if (hIn >= 0 && hIn < ${ne}) {
            for (int w = 0; w < ${ue}; w++) {
              int wIn = wBeg + w * ${fe};

              if (wIn >= 0 && wIn < ${ie}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dilation2D(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,filter:ae}=ee,{strides:ce,pad:le,dilations:ue}=ie,he=computeDilation2DInfo(oe.shape,ae.shape,ce,le,"NHWC",ue);let fe;const me=new Dilation2DProgram(he);fe=ne.runWebGLProgram(me,[oe,ae],"float32");const ge=reshape({inputs:{x:fe},backend:ne,attrs:{shape:he.outShape}});return ne.disposeIntermediateTensorInfo(fe),ge}const dilation2DConfig={kernelName:Dilation2D,backendName:"webgl",kernelFunc:dilation2D};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELU="return (x >= 0.0) ? x : (exp(x) - 1.0);",ELU_PACKED=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,elu=unaryKernelFunc({opSnippet:ELU,packedOpSnippet:ELU_PACKED}),eluConfig={kernelName:Elu$1,backendName:"webgl",kernelFunc:elu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ELU_DER="return (b >= 1.0) ? a : a * (b + 1.0);",ELU_DER_PACKED=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,eluGrad=re=>{const{inputs:ee,backend:ne}=re,{dy:ie,y:oe}=ee,ae=env().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new BinaryOpPackedProgram(ELU_DER_PACKED,ie.shape,oe.shape):new BinaryOpProgram(ELU_DER,ie.shape,oe.shape);return ne.runWebGLProgram(ae,[ie,oe],ie.dtype)},eluGradConfig={kernelName:EluGrad,backendName:"webgl",kernelFunc:eluGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PACKED_EQUAL=`
  return vec4(equal(a, b));
`,EQUAL="return float(a == b);",equal=binaryKernelFunc({opSnippet:EQUAL,packedOpSnippet:PACKED_EQUAL,dtype:"bool"}),equalConfig={kernelName:Equal,backendName:"webgl",kernelFunc:equal};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ERF=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${ERF_P};
  float a1 = ${ERF_A1};
  float a2 = ${ERF_A2};
  float a3 = ${ERF_A3};
  float a4 = ${ERF_A4};
  float a5 = ${ERF_A5};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,erf=unaryKernelFunc({opSnippet:ERF}),erfConfig={kernelName:Erf,backendName:"webgl",kernelFunc:erf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EXP="return exp(x);",exp=unaryKernelFunc({opSnippet:EXP,packedOpSnippet:EXP,cpuKernelImpl:expImplCPU}),expConfig={kernelName:Exp,backendName:"webgl",kernelFunc:exp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function expandDims(re){const{inputs:ee,attrs:ne,backend:ie}=re,{dim:oe}=ne,{input:ae}=ee,ce=ae.shape.length,le=ae.shape.slice();let ue=oe;return oe<0&&(assert$2(-(ce+1)<=oe,()=>`Axis must be in the interval [${-(ce+1)}, ${ce}]`),ue=ce+oe+1),le.splice(ue,0,1),reshape({inputs:{x:ae},backend:ie,attrs:{shape:le}})}const expandDimsConfig={kernelName:ExpandDims,backendName:"webgl",kernelFunc:expandDims};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EXPM1="return exp(x) - 1.0;",expm1=unaryKernelFunc({opSnippet:EXPM1,packedOpSnippet:EXPM1,cpuKernelImpl:expm1ImplCPU}),expm1Config={kernelName:Expm1,backendName:"webgl",kernelFunc:expm1};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FFTProgram{constructor(ee,ne,ie){this.variableNames=["real","imag"];const oe=ne[1];this.outputShape=ne;const ae=ie?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,ce=ie?`${oe}.0`:"1.0";let le;if(ee==="real")le="return real * expR - imag * expI;";else if(ee==="imag")le="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${ee}.`);this.userCode=`
      const float exponentMultiplier = ${ae};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${le}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${oe});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${oe}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${ce};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fftImpl(re,ee,ne){const ie=ne.texData.get(re.dataId),oe=sizeFromShape(re.shape),ae=re.shape[re.shape.length-1],ce=oe/ae,le=reshape({inputs:{x:re},backend:ne,attrs:{shape:[ce,ae]}}),ue=le.shape,he=new FFTProgram("real",ue,ee),fe=new FFTProgram("imag",ue,ee),me=[{dataId:ie.complexTensorInfos.real.dataId,dtype:ie.complexTensorInfos.real.dtype,shape:ue},{dataId:ie.complexTensorInfos.imag.dataId,dtype:ie.complexTensorInfos.imag.dtype,shape:ue}],ge=ne.runWebGLProgram(he,me,"float32"),ve=ne.runWebGLProgram(fe,me,"float32"),ye=complex({inputs:{real:ge,imag:ve},backend:ne});ne.disposeIntermediateTensorInfo(ge),ne.disposeIntermediateTensorInfo(ve);const be=reshape({inputs:{x:ye},backend:ne,attrs:{shape:re.shape}});return ne.disposeIntermediateTensorInfo(le),ne.disposeIntermediateTensorInfo(ye),be}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fft$1(re){const{inputs:ee,backend:ne}=re,{input:ie}=ee;return fftImpl(ie,!1,ne)}const fftConfig={kernelName:FFT$2,backendName:"webgl",kernelFunc:fft$1};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FillProgram{constructor(ee,ne){this.outputShape=[],this.variableNames=["x"],this.outputShape=ee,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}getCustomSetupFunc(ee){return(ne,ie)=>{this.valueLoc==null&&(this.valueLoc=ne.getUniformLocationNoThrow(ie,"value")),ne.gl.uniform1f(this.valueLoc,ee)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fill$1(re){const{backend:ee,attrs:ne}=re,{shape:ie,value:oe}=ne;let{dtype:ae}=ne;if(ae=ae||inferDtype(oe),ae==="string"){const ce=getArrayFromDType(ae,sizeFromShape(ie));return ce.fill(oe),ee.makeTensorInfo(ie,ae,ce)}else{const ce=new FillProgram(ie,oe),le=ce.getCustomSetupFunc(oe);return ee.runWebGLProgram(ce,[],ae,le)}}const fillConfig={kernelName:Fill,backendName:"webgl",kernelFunc:fill$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FlipLeftRightProgram{constructor(ee){this.variableNames=["Image"],this.outputShape=[];const ne=ee[2];this.outputShape=ee,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${ne} - x;
          float outputValue;
          if(coordX >= 0 && coordX < ${ne}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const flipLeftRightConfig={kernelName:FlipLeftRight,backendName:"webgl",kernelFunc:({inputs:re,backend:ee})=>{const{image:ne}=re,ie=ee,oe=new FlipLeftRightProgram(ne.shape);return ie.runWebGLProgram(oe,[ne],ne.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FLOOR="return floor(x);",floor$1=unaryKernelFunc({opSnippet:FLOOR,packedOpSnippet:FLOOR,cpuKernelImpl:floorImplCPU}),floorConfig={kernelName:Floor,backendName:"webgl",kernelFunc:floor$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INT_DIV=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,INT_DIV_PACKED=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,floorDiv=binaryKernelFunc({opSnippet:INT_DIV,packedOpSnippet:INT_DIV_PACKED,dtype:"int32"}),floorDivConfig={kernelName:FloorDiv,backendName:"webgl",kernelFunc:floorDiv};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FromPixelsProgram{constructor(ee){this.variableNames=["A"];const ne=getGlslDifferences(),[ie,oe]=ee;this.outputShape=ee,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${oe}.0, ${ie}.0);

        vec4 values = ${ne.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class FromPixelsPackedProgram{constructor(ee){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const ne=getGlslDifferences(),[ie,oe]=ee;this.outputShape=ee,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${oe}.0, ${ie}.0);
            vec4 values = ${ne.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${ne.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fromPixelsConfig={kernelName:FromPixels,backendName:"webgl",kernelFunc:fromPixels};let fromPixels2DContext;function fromPixels(re){const{inputs:ee,backend:ne,attrs:ie}=re;let{pixels:oe}=ee;const{numChannels:ae}=ie,ce=typeof HTMLVideoElement<"u"&&oe instanceof HTMLVideoElement,le=typeof HTMLImageElement<"u"&&oe instanceof HTMLImageElement,ue=typeof ImageBitmap<"u"&&oe instanceof ImageBitmap,[he,fe]=ce?[oe.videoWidth,oe.videoHeight]:[oe.width,oe.height],me=[fe,he],ge=[fe,he,ae];(le||ce||ue)&&(fromPixels2DContext==null&&(fromPixels2DContext=document.createElement("canvas").getContext("2d")),fromPixels2DContext.canvas.width=he,fromPixels2DContext.canvas.height=fe,fromPixels2DContext.drawImage(oe,0,0,he,fe),oe=fromPixels2DContext.canvas);const ve=ne.makeTensorInfo(me,"int32");ne.texData.get(ve.dataId).usage=TextureUsage.PIXELS,ne.gpgpu.uploadPixelDataToTexture(ne.getTexture(ve.dataId),oe);const ye=env().getBool("WEBGL_PACK")?new FromPixelsPackedProgram(ge):new FromPixelsProgram(ge),be=ne.runWebGLProgram(ye,[ve],"int32");return ne.disposeData(ve.dataId),be}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedConv2d(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,filter:ae,bias:ce,preluActivationWeights:le}=ee,{strides:ue,pad:he,dataFormat:fe,dilations:me,dimRoundingMode:ge,activation:ve,leakyreluAlpha:ye}=ie,be=convertConv2DDataFormat(fe),Ce=computeConv2DInfo(oe.shape,ae.shape,ue,me,he,ge,!1,be);let Se;const $e=[];if(Ce.filterHeight===1&&Ce.filterWidth===1&&Ce.dilationHeight===1&&Ce.dilationWidth===1&&Ce.strideHeight===1&&Ce.strideWidth===1&&(Ce.padInfo.type==="SAME"||Ce.padInfo.type==="VALID"))Se=conv2dByMatMul({x:oe,filter:ae,convInfo:Ce,backend:ne,bias:ce,activation:ve,preluActivationWeights:le,leakyreluAlpha:ye});else if(env().getBool("WEBGL_CONV_IM2COL")&&oe.shape[0]===1)Se=conv2dWithIm2Row({x:oe,filter:ae,convInfo:Ce,backend:ne,bias:ce,activation:ve,preluActivationWeights:le,leakyreluAlpha:ye});else{const Ne=ce!=null,Ie=le!=null,ke=ve==="leakyrelu",De=ve?mapActivationToShaderProgram(ve,!1):null,Oe=new Conv2DProgram(Ce,Ne,De,Ie,ke),Be=[oe,ae];if(ce&&Be.push(ce),le&&Be.push(le),ke){const Me=ne.makeTensorInfo([],"float32",createScalarValue(ye,"float32"));Be.push(Me),$e.push(Me)}Se=ne.runWebGLProgram(Oe,Be,"float32")}const Te=reshape({inputs:{x:Se},backend:ne,attrs:{shape:Ce.outShape}});return $e.push(Se),$e.forEach(Ne=>ne.disposeIntermediateTensorInfo(Ne)),Te}const fusedConv2DConfig={kernelName:FusedConv2D,backendName:"webgl",kernelFunc:fusedConv2d};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fusedDepthwiseConv2D(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,filter:ae,bias:ce,preluActivationWeights:le}=ee,{strides:ue,pad:he,dilations:fe,dimRoundingMode:me,activation:ge,leakyreluAlpha:ve}=ie,ye=[];let be=fe;be==null&&(be=[1,1]),assert$2(eitherStridesOrDilationsAreOne(ue,be),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${ue} and dilations '${be}'`);const Ce=computeConv2DInfo(oe.shape,ae.shape,ue,be,he,me,!0),Se=env().getBool("WEBGL_PACK_DEPTHWISECONV")&&Ce.strideWidth<=2&&Ce.outChannels/Ce.inChannels===1,$e=ge?mapActivationToShaderProgram(ge,Se):null,Te=[oe,ae],Ne=ce!=null,Ie=le!=null,ke=ge==="leakyrelu";if(Ne&&Te.push(ce),Ie&&Te.push(le),ke){const Be=ne.makeTensorInfo([],"float32",createScalarValue(ve,"float32"));Te.push(Be),ye.push(Be)}let De;Se?De=new DepthwiseConvPacked2DProgram(Ce,Ne,$e,Ie,ke):De=new DepthwiseConv2DProgram(Ce,Ne,$e,Ie,ke);const Oe=ne.runWebGLProgram(De,Te,"float32");return ye.forEach(Be=>ne.disposeIntermediateTensorInfo(Be)),Oe}const fusedDepthwiseConv2DConfig={kernelName:FusedDepthwiseConv2D,backendName:"webgl",kernelFunc:fusedDepthwiseConv2D};class GatherNDProgram{constructor(ee,ne,ie){this.sliceDim=ee,this.strides=ne,this.variableNames=["x","indices"],this.outputShape=ie;const oe=getCoordsDataType(ne.length),ae=getCoordsDataType(ie.length),ce=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        ${oe} strides = ${oe}(${this.strides});
         void main() {
          ${ae} coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < ${this.sliceDim}; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * ${ce};
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherNd(re){const{inputs:ee,backend:ne}=re,{params:ie,indices:oe}=ee,ae=oe.shape,ce=ae[ae.length-1],[le,ue,he,fe]=prepareAndValidate(ie,oe),me=reshape({inputs:{x:oe},backend:ne,attrs:{shape:[ue,ce]}}),ge=reshape({inputs:{x:ie},backend:ne,attrs:{shape:[sizeFromShape(ie.shape)/he,he]}}),ve=new GatherNDProgram(ce,fe,[ue,he]),ye=ne.runWebGLProgram(ve,[ge,me],ge.dtype),be=reshape({inputs:{x:ye},backend:ne,attrs:{shape:le}});return ne.disposeIntermediateTensorInfo(me),ne.disposeIntermediateTensorInfo(ge),ne.disposeIntermediateTensorInfo(ye),be}const gatherNdConfig={kernelName:GatherNd,backendName:"webgl",kernelFunc:gatherNd};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GatherProgram{constructor(ee,ne){this.variableNames=["A","indices"],this.outputShape=ne,this.rank=ne.length;const ie=getCoordsDataType(this.rank),oe=getSourceCoords$1(ee);this.userCode=`
      void main() {
        ${ie} resRC = getOutputCoords();
        setOutput(getA(${oe}));
      }
    `}}function getSourceCoords$1(re,ee){const ne=["resRC.x","resRC.y","resRC.z","resRC.w"],ie=[];for(let oe=0;oe<re.length;oe++)oe===2?ie.push("int(getIndices(resRC.x, resRC.z))"):ie.push(`${ne[oe]}`);return ie.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gatherV2(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,indices:ae}=ee,{axis:ce,batchDims:le}=ie,ue=parseAxisParam(ce,oe.shape)[0],he=collectGatherOpShapeInfo(oe,ae,ue,le),fe=sizeFromShape(ae.shape),me=[],ge=reshape({inputs:{x:oe},backend:ne,attrs:{shape:[he.batchSize,he.outerSize,he.dimSize,he.sliceSize]}}),ve=reshape({inputs:{x:ae},backend:ne,attrs:{shape:[he.batchSize,fe/he.batchSize]}});me.push(ge),me.push(ve);const ye=[he.batchSize,he.outerSize,fe/he.batchSize,he.sliceSize];if(ne.shouldExecuteOnCPU([oe,ae])||oe.dtype==="string"){const $e=ne.bufferSync(ve),Te=ne.bufferSync(ge),Ne=gatherV2ImplCPU(Te,$e,ye);return me.forEach(Ie=>ne.disposeIntermediateTensorInfo(Ie)),ne.makeTensorInfo(he.outputShape,Ne.dtype,Ne.values)}const be=new GatherProgram(ge.shape,ye),Ce=ne.runWebGLProgram(be,[ge,ve],ge.dtype);me.push(Ce);const Se=reshape({inputs:{x:Ce},backend:ne,attrs:{shape:he.outputShape}});return me.forEach($e=>ne.disposeIntermediateTensorInfo($e)),Se}const gatherV2Config={kernelName:GatherV2,backendName:"webgl",kernelFunc:gatherV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GREATER="return float(a > b);",GREATER_PACKED=`
  return vec4(greaterThan(a, b));
`,greater=binaryKernelFunc({opSnippet:GREATER,packedOpSnippet:GREATER_PACKED,cpuKernelImpl:greaterImplCPU,dtype:"bool"}),greaterConfig={kernelName:Greater,backendName:"webgl",kernelFunc:greater};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const GREATER_EQUAL="return float(a >= b);",GREATER_EQUAL_PACKED=`
  return vec4(greaterThanEqual(a, b));
`,greaterEqual=binaryKernelFunc({opSnippet:GREATER_EQUAL,packedOpSnippet:GREATER_EQUAL_PACKED,dtype:"bool"}),greaterEqualConfig={kernelName:GreaterEqual,backendName:"webgl",kernelFunc:greaterEqual};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ifft(re){const{inputs:ee,backend:ne}=re,{input:ie}=ee;return fftImpl(ie,!0,ne)}const ifftConfig={kernelName:IFFT,backendName:"webgl",kernelFunc:ifft};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS_FINITE="return float(!isnan(x) && !isinf(x));",isFinite$1=unaryKernelFunc({opSnippet:IS_FINITE,dtype:"bool"}),isFiniteConfig={kernelName:IsFinite,backendName:"webgl",kernelFunc:isFinite$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS_INF="return float(isinf(x));",isInf=unaryKernelFunc({opSnippet:IS_INF,dtype:"bool"}),isInfConfig={kernelName:IsInf,backendName:"webgl",kernelFunc:isInf};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IS_NAN="return float(isnan(x));",isNaN$1=unaryKernelFunc({opSnippet:IS_NAN,dtype:"bool"}),isNaNConfig={kernelName:IsNan,backendName:"webgl",kernelFunc:isNaN$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LESS="return float(a < b);",LESS_PACKED=`
  return vec4(lessThan(a, b));
`,less=binaryKernelFunc({opSnippet:LESS,packedOpSnippet:LESS_PACKED,cpuKernelImpl:lessImplCPU,dtype:"bool"}),lessConfig={kernelName:Less,backendName:"webgl",kernelFunc:less};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LESS_EQUAL="return float(a <= b);",LESS_EQUAL_PACKED=`
  return vec4(lessThanEqual(a, b));
`,lessEqual=binaryKernelFunc({opSnippet:LESS_EQUAL,packedOpSnippet:LESS_EQUAL_PACKED,dtype:"bool"}),lessEqualConfig={kernelName:LessEqual,backendName:"webgl",kernelFunc:lessEqual};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function linSpace(re){const{backend:ee,attrs:ne}=re,{start:ie,stop:oe,num:ae}=ne,ce=linSpaceImplCPU(ie,oe,ae);return ee.makeTensorInfo([ce.length],"float32",ce)}const linSpaceConfig={kernelName:LinSpace,backendName:"webgl",kernelFunc:linSpace};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOG=`if (x < 0.0) return NAN;
  return log(x);`,LOG_PACKED=`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,log$2=unaryKernelFunc({opSnippet:LOG,packedOpSnippet:LOG_PACKED,cpuKernelImpl:logImplCPU}),logConfig={kernelName:Log,backendName:"webgl",kernelFunc:log$2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOG1P="return log(1.0 + x);",log1p=unaryKernelFunc({opSnippet:LOG1P}),log1pConfig={kernelName:Log1p,backendName:"webgl",kernelFunc:log1p};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOGICAL_AND="return float(a >= 1.0 && b >= 1.0);",LOGICAL_AND_PACKED=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,logicalAnd=binaryKernelFunc({opSnippet:LOGICAL_AND,packedOpSnippet:LOGICAL_AND_PACKED,dtype:"bool"}),logicalAndConfig={kernelName:LogicalAnd,backendName:"webgl",kernelFunc:logicalAnd};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOGICAL_NOT="return float(!(x >= 1.0));",logicalNot=unaryKernelFunc({opSnippet:LOGICAL_NOT}),logicalNotConfig={kernelName:LogicalNot,backendName:"webgl",kernelFunc:logicalNot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LOGICAL_OR="return float(a >= 1.0 || b >= 1.0);",LOGICAL_OR_PACKED=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,logicalOr=binaryKernelFunc({opSnippet:LOGICAL_OR,packedOpSnippet:LOGICAL_OR_PACKED,dtype:"bool"}),logicalOrConfig={kernelName:LogicalOr,backendName:"webgl",kernelFunc:logicalOr};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LRNProgram{constructor(ee,ne,ie,oe,ae){this.variableNames=["x"],this.outputShape=[];const ce=ne,le=ee[3]-1;this.outputShape=ee;let ue;const he=`float(${ie}) + float(${oe}) * sum`;ae===.5?ue=`inversesqrt(${he})`:ae===1?ue=`1.0/(${he})`:ue=`exp(log(${he}) * float(-${ae}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${ce}; j <= ${ce}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${le}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${ue};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LRNPackedProgram{constructor(ee,ne,ie,oe,ae){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const ce=ne,le=ee[3]-1;this.outputShape=ee;let ue;const he=`float(${ie}) + float(${oe}) * sum`;ae===.5?ue=`inversesqrt(${he})`:ae===1?ue=`1.0/(${he})`:ue=`exp(log(${he}) * float(-${ae}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${ce};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${ce}; j <= ${ce}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${le}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${ue};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrn=re=>{const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{depthRadius:ae,bias:ce,alpha:le,beta:ue}=ie,he=env().getBool("WEBGL_PACK_NORMALIZATION")?new LRNPackedProgram(oe.shape,ae,ce,le,ue):new LRNProgram(oe.shape,ae,ce,le,ue);return ne.runWebGLProgram(he,[oe],oe.dtype)},LRNConfig={kernelName:LRN,backendName:"webgl",kernelFunc:lrn};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LRNGradProgram{constructor(ee,ne,ie,oe,ae){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=ee,this.depth=ee[3],this.depthRadius=ne,this.bias=ie,this.alpha=oe,this.beta=ae,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${ne})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${ne} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${oe}) * norm + float(${ie});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${oe})
                * float(${ae})
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${ae});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lrnGrad=re=>{const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,y:ae,dy:ce}=ee,{depthRadius:le,bias:ue,alpha:he,beta:fe}=ie,me=new LRNGradProgram(oe.shape,le,ue,he,fe);return ne.runWebGLProgram(me,[oe,ae,ce],oe.dtype)},LRNGradConfig={kernelName:LRNGrad,backendName:"webgl",kernelFunc:lrnGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxImpl(re,ee,ne,ie){const oe=sizeFromShape(ee),ce=sizeFromShape(re.shape)/oe,le=reshape({inputs:{x:re},attrs:{shape:[ce,oe]},backend:ie}),ue=reduce(le,re.dtype,"max",ie),he=reshape({inputs:{x:ue},attrs:{shape:ne},backend:ie});return ie.disposeIntermediateTensorInfo(le),ie.disposeIntermediateTensorInfo(ue),he}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function max$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{reductionIndices:ae,keepDims:ce}=ie,le=oe.shape.length,ue=parseAxisParam(ae,oe.shape);let he=ue;const fe=getAxesPermutation(he,le),me=fe!=null,ge=ne.shouldExecuteOnCPU([oe]);let ve=oe;if(me){if(ge){const Te=ne.texData.get(ve.dataId).values,Ne=new Array(le);for(let De=0;De<Ne.length;De++)Ne[De]=oe.shape[fe[De]];const Ie=transposeImplCPU(Te,oe.shape,oe.dtype,fe,Ne);ve=ne.makeTensorInfo(Ne,oe.dtype);const ke=ne.texData.get(ve.dataId);ke.values=Ie}else ve=transposeImpl(oe,fe,ne);he=getInnerMostAxes(he.length,le)}assertAxesAreInnerMostDims("max",he,le);const[ye,be]=computeOutAndReduceShapes(ve.shape,he);let Ce=ye;ce&&(Ce=expandShapeToKeepDim(ye,ue));let Se;if(ge){const Te=ne.texData.get(ve.dataId).values,Ne=maxImplCPU(Te,sizeFromShape(be),Ce,oe.dtype);Se=ne.makeTensorInfo(Ce,oe.dtype);const Ie=ne.texData.get(Se.dataId);Ie.values=Ne}else Se=maxImpl(ve,be,Ce,ne);return me&&ne.disposeIntermediateTensorInfo(ve),Se}const maxConfig={kernelName:Max,backendName:"webgl",kernelFunc:max$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MAXIMUM=CHECK_NAN_SNIPPET$1+`
  return max(a, b);
`,MAXIMUM_PACKED=`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+CHECK_NAN_SNIPPET+`
  return result;
`,maximum=binaryKernelFunc({opSnippet:MAXIMUM,packedOpSnippet:MAXIMUM_PACKED,cpuKernelImpl:maximumImplCPU}),maximumConfig={kernelName:Maximum$1,backendName:"webgl",kernelFunc:maximum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee;assertNotComplex(oe,"maxPool");const{filterSize:ae,strides:ce,pad:le,dimRoundingMode:ue}=ie,he=1;assert$2(eitherStridesOrDilationsAreOne(ce,he),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${ce} and dilations '${he}'`);const fe=computePool2DInfo(oe.shape,ae,ce,he,le,ue);if(fe.filterWidth===1&&fe.filterHeight===1&&arraysEqual(fe.inShape,fe.outShape))return identity$3({inputs:{x:oe},backend:ne});const me=new Pool2DProgram(fe,"max",!1);return ne.runWebGLProgram(me,[oe],oe.dtype)}const maxPoolConfig={kernelName:MaxPool,backendName:"webgl",kernelFunc:maxPool};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3d(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{filterSize:ae,strides:ce,pad:le,dataFormat:ue,dimRoundingMode:he}=ie,fe=[1,1,1],me=computePool3DInfo(oe.shape,ae,ce,fe,le,he,ue),ge=new Pool3DProgram(me,"max",!1);return ne.runWebGLProgram(ge,[oe],oe.dtype)}const maxPool3DConfig={kernelName:MaxPool3D,backendName:"webgl",kernelFunc:maxPool3d};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MaxPool2DBackpropProgram{constructor(ee){this.variableNames=["dy","maxPos"],this.outputShape=ee.inShape;const ne=ee.strideHeight,ie=ee.strideWidth,oe=ee.dilationHeight,ae=ee.effectiveFilterHeight,ce=ee.effectiveFilterWidth,le=ae-1-ee.padInfo.top,ue=ce-1-ee.padInfo.left,he=ae*ce-1;this.userCode=`
      const ivec2 pads = ivec2(${le}, ${ue});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${ae};
          wR += ${oe}) {
          float dyR = float(dyRCorner + wR) / ${ne}.0;

          if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${ce}; wC++) {
            float dyC = float(dyCCorner + wC) / ${ie}.0;

            if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${he} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${ce} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class MaxPool3DBackpropProgram{constructor(ee){this.variableNames=["dy","maxPos"],this.outputShape=ee.inShape;const ne=ee.strideDepth,ie=ee.strideHeight,oe=ee.strideWidth,ae=ee.dilationDepth,ce=ee.dilationHeight,le=ee.dilationWidth,ue=ee.effectiveFilterDepth,he=ee.effectiveFilterHeight,fe=ee.effectiveFilterWidth,me=ue-1-ee.padInfo.front,ge=he-1-ee.padInfo.top,ve=fe-1-ee.padInfo.left,ye=ue*he*fe-1;this.userCode=`
      const ivec3 pads = ivec3(${me}, ${ge}, ${ve});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${ue};
           wD += ${ae}) {
          float dyD = float(dyDCorner + wD) / ${ne}.0;

          if (dyD < 0.0 || dyD >= ${ee.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${he};
              wR += ${ce}) {
            float dyR = float(dyRCorner + wR) / ${ie}.0;

            if (dyR < 0.0 || dyR >= ${ee.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${fe};
                wC += ${le}) {
              float dyC = float(dyCCorner + wC) / ${oe}.0;

              if (dyC < 0.0 || dyC >= ${ee.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${ye} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${he} * ${fe} +
                  wR * ${fe} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPool3DGrad(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,input:ae}=ee,ce=ae,{filterSize:le,strides:ue,pad:he,dimRoundingMode:fe}=ie,me=[1,1,1],ge=computePool3DInfo(ce.shape,le,ue,me,he,fe),ve=new Pool3DProgram(ge,"max",!0),ye=ne.runWebGLProgram(ve,[ce],ce.dtype),be=new MaxPool3DBackpropProgram(ge),Ce=ne.runWebGLProgram(be,[oe,ye],ce.dtype);return ne.disposeIntermediateTensorInfo(ye),Ce}const maxPoolGrad3DConfig={kernelName:MaxPool3DGrad,backendName:"webgl",kernelFunc:maxPool3DGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolGrad(re){const{inputs:ee,backend:ne,attrs:ie}=re,{dy:oe,input:ae,output:ce}=ee,le=ae;assertNotComplex([ae,ce],"maxPoolGrad");const{filterSize:ue,strides:he,pad:fe,dimRoundingMode:me}=ie,ge=computePool2DInfo(le.shape,ue,he,1,fe,me),ve=!0,ye=new Pool2DProgram(ge,"max",ve),be=ne.runWebGLProgram(ye,[le],le.dtype),Ce=new MaxPool2DBackpropProgram(ge),Se=ne.runWebGLProgram(Ce,[oe,be],le.dtype);return ne.disposeIntermediateTensorInfo(be),Se}const maxPoolGradConfig={kernelName:MaxPoolGrad,backendName:"webgl",kernelFunc:maxPoolGrad};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function maxPoolWithArgmaxImpl(re,ee,ne,ie){let oe=new Pool2DProgram(ne,"max",!1);const ae=ie.runWebGLProgram(oe,[re],"float32");oe=new Pool2DProgram(ne,"max",!0,!0,ee);const ce=ie.runWebGLProgram(oe,[re],"float32");return[ae,ce]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const maxPoolWithArgmaxConfig={kernelName:MaxPoolWithArgmax,backendName:"webgl",kernelFunc:({inputs:re,attrs:ee,backend:ne})=>{const{x:ie}=re,{filterSize:oe,strides:ae,pad:ce,includeBatchInIndex:le}=ee,ue=ne;assert$2(ie.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${ie.shape.length}.`);const he=[1,1];assert$2(eitherStridesOrDilationsAreOne(ae,he),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${ae} and dilations '${he}'`);const fe=computePool2DInfo(ie.shape,oe,ae,he,ce),[me,ge]=maxPoolWithArgmaxImpl(ie,le,fe,ue);return[me,ge]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function meanImpl(re,ee,ne,ie){const oe=sizeFromShape(ee),ce=sizeFromShape(re.shape)/oe,le=reshape({inputs:{x:re},attrs:{shape:[ce,oe]},backend:ie}),ue=reduce(le,"float32","mean",ie),he=reshape({inputs:{x:ue},attrs:{shape:ne},backend:ie});return ie.disposeIntermediateTensorInfo(le),ie.disposeIntermediateTensorInfo(ue),he}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const meanConfig={kernelName:Mean,backendName:"webgl",kernelFunc:({inputs:re,attrs:ee,backend:ne})=>{const{x:ie}=re,{keepDims:oe,axis:ae}=ee,ce=ne,le=ie.shape.length,ue=parseAxisParam(ae,ie.shape);let he=ue;const fe=getAxesPermutation(he,le),me=fe!=null,ge=ce.shouldExecuteOnCPU([ie]),ve=[];let ye=ie;if(me){if(ge){const Ne=ce.texData.get(ye.dataId).values,Ie=new Array(le);for(let Oe=0;Oe<Ie.length;Oe++)Ie[Oe]=ie.shape[fe[Oe]];const ke=transposeImplCPU(Ne,ie.shape,ie.dtype,fe,Ie);ye=ce.makeTensorInfo(Ie,ie.dtype);const De=ce.texData.get(ye.dataId);De.values=ke}else ye=transposeImpl(ie,fe,ce);ve.push(ye),he=getInnerMostAxes(he.length,le)}assertAxesAreInnerMostDims("sum",he,le);const[be,Ce]=computeOutAndReduceShapes(ye.shape,he);let Se=be;oe&&(Se=expandShapeToKeepDim(be,ue));const $e=meanImpl(ye,Ce,Se,ce);for(const Te of ve)ce.disposeIntermediateTensorInfo(Te);return $e}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function min$1(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,keepDims:ce}=ie,le=oe.shape.length,ue=parseAxisParam(ae,oe.shape);let he=ue;const fe=getAxesPermutation(he,le);let me=oe;fe!=null&&(me=transpose({inputs:{x:oe},backend:ne,attrs:{perm:fe}}),he=getInnerMostAxes(he.length,oe.shape.length)),assertAxesAreInnerMostDims("min",he,le);const[ge,ve]=computeOutAndReduceShapes(me.shape,he),ye=sizeFromShape(ve),be=reshape({inputs:{x:me},backend:ne,attrs:{shape:[-1,ye]}}),Ce=reduce(be,be.dtype,"min",ne);let Se;if(ce){const $e=expandShapeToKeepDim(ge,ue);Se=reshape({inputs:{x:Ce},backend:ne,attrs:{shape:$e}})}else Se=reshape({inputs:{x:Ce},backend:ne,attrs:{shape:ge}});return ne.disposeIntermediateTensorInfo(be),ne.disposeIntermediateTensorInfo(Ce),fe!=null&&ne.disposeIntermediateTensorInfo(me),Se}const minConfig={kernelName:Min,backendName:"webgl",kernelFunc:min$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MINIMUM=CHECK_NAN_SNIPPET$1+`
  return min(a, b);
`,MINIMUM_PACKED=`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  `+CHECK_NAN_SNIPPET+`
  return result;
`,minimum=binaryKernelFunc({opSnippet:MINIMUM,packedOpSnippet:MINIMUM_PACKED,cpuKernelImpl:minimumImplCPU}),minimumConfig={kernelName:Minimum$1,backendName:"webgl",kernelFunc:minimum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MirrorPadProgram{constructor(ee,ne,ie){this.variableNames=["x"],this.outputShape=ne.map((fe,me)=>fe[0]+ee[me]+fe[1]);const oe=ee.length,ae=getCoordsDataType(oe),ce=ne.map(fe=>fe[0]).join(","),le=ne.map((fe,me)=>fe[0]+ee[me]).join(","),ue=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,oe),he=ie==="reflect"?0:1;if(oe===1){this.userCode=`
        int start = ${ce};
        int end = ${le};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${he};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${he};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${ae} start = ${ae}(${ce});
      ${ae} end = ${ae}(${le});

      void main() {
        ${ae} outC = getOutputCoords();
        for (int i = 0; i < ${oe}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${he};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${he};
          }
        }
        ${ae} coords = outC - start;
        setOutput(getX(${ue}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MirrorPadPackedProgram{constructor(ee,ne,ie){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ne.map((ye,be)=>ye[0]+ee[be]+ye[1]);const oe=ee.length,ae=getCoordsDataType(oe),ce=ne.map(ye=>ye[0]).join(","),le=ne.map((ye,be)=>ye[0]+ee[be]).join(","),ue=getChannels("rc",oe),he=getChannels("source",oe),fe=`${ue[oe-1]} < ${this.outputShape[oe-1]}`,me=oe===1?"source":`vec2(${he.slice(-2).join()})`,ge=ie==="reflect"?0:1;let ve="";if(oe===1){const ye=`
        ${ae} source = rc;
        if (source < start) {
          source = start * 2 - source - ${ge};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${ge};
        }
        source -= start;
      `;ve=`
        ${ae} rc = outputLoc;
        ${ye}
        result[0] = getChannel(getX(${he.join()}), ${me});
        ${ue[oe-1]} += 1;
        if(${fe}) {
          ${ye}
          result[1] = getChannel(getX(${he.join()}), ${me});
        }
      `}else{const ye=`
        ${ae} source = rc;
        ${ae} lt = ${ae}(lessThan(source, start));
        ${ae} gte = ${ae}(greaterThanEqual(source, end));
        ${ae} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${ge}) +
                gte * ((end - 1) * 2 - source + ${ge});
        source -= start;
      `;ve=`
        ${ae} rc = outputLoc;
        ${ye}
        result[0] = getChannel(getX(${he.join()}), ${me});
        ${ue[oe-1]} += 1;
        if(${fe}) {
          ${ye}
          result[1] = getChannel(getX(${he.join()}), ${me});
        }
        rc = outputLoc;
        ${ue[oe-2]} += 1;
        if(${ue[oe-2]} < ${this.outputShape[oe-2]}) {
          ${ye}
          result[2] = getChannel(getX(${he.join()}), ${me});
          ${ue[oe-1]} += 1;
          if(${fe}) {
            ${ye}
            result[3] = getChannel(getX(${he.join()}), ${me});
          }
        }
      `}this.userCode=`
      const ${ae} start = ${ae}(${ce});
      const ${ae} end = ${ae}(${le});

      void main() {
        ${ae} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${ve}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mirrorPadKernelFunc=({inputs:re,backend:ee,attrs:ne})=>{const{x:ie}=re,{paddings:oe,mode:ae}=ne,ce=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new MirrorPadPackedProgram(ie.shape,oe,ae):new MirrorPadProgram(ie.shape,oe,ae);return ee.runWebGLProgram(ce,[ie],ie.dtype)},mirrorPadConfig={kernelName:MirrorPad,backendName:"webgl",kernelFunc:mirrorPadKernelFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MOD=`if (b == 0.0) return NAN;
  return mod(a, b);`,MOD_PACKED=`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  `+CHECK_NAN_SNIPPET+`
  return result;
`,mod=binaryKernelFunc({opSnippet:MOD,packedOpSnippet:MOD_PACKED}),modConfig={kernelName:Mod,backendName:"webgl",kernelFunc:mod};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MultinomialProgram{constructor(ee,ne,ie){this.variableNames=["probs"],this.outputShape=[ee,ie],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${ne-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${ne-1}));
      }
    `}getCustomSetupFunc(ee){return(ne,ie)=>{this.seedLoc==null&&(this.seedLoc=ne.getUniformLocation(ie,"seed")),ne.gl.uniform1f(this.seedLoc,ee)}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DIV=`
if (a == b) {
  return 1.0;
};
return a / b;`,DIV_PACKED=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,realDiv=binaryKernelFunc({opSnippet:DIV,packedOpSnippet:DIV_PACKED,checkOutOfBounds:!0}),realDivConfig={kernelName:RealDiv,backendName:"webgl",kernelFunc:realDiv};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SUB="return a - b;",sub=binaryKernelFunc({opSnippet:SUB,packedOpSnippet:SUB,supportsComplex:!0,cpuKernelImpl:subImplCPU}),subConfig={kernelName:Sub,backendName:"webgl",kernelFunc:sub};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function softmax(re){const{inputs:ee,backend:ne,attrs:ie}=re,{logits:oe}=ee,{dim:ae}=ie,ce=parseAxisParam([ae],oe.shape),le=max$1({inputs:{x:oe},backend:ne,attrs:{reductionIndices:ce,keepDims:!1}}),ue=expandShapeToKeepDim(le.shape,ce),he=reshape({inputs:{x:le},backend:ne,attrs:{shape:ue}}),fe=sub({inputs:{a:oe,b:he},backend:ne}),me=exp({inputs:{x:fe},backend:ne}),ge=sum({inputs:{x:me},backend:ne,attrs:{axis:ce,keepDims:!1}}),ve=reshape({inputs:{x:ge},backend:ne,attrs:{shape:ue}}),ye=realDiv({inputs:{a:me,b:ve},backend:ne});return ne.disposeIntermediateTensorInfo(le),ne.disposeIntermediateTensorInfo(he),ne.disposeIntermediateTensorInfo(fe),ne.disposeIntermediateTensorInfo(me),ne.disposeIntermediateTensorInfo(ge),ne.disposeIntermediateTensorInfo(ve),ye}const softmaxConfig={kernelName:Softmax$2,backendName:"webgl",kernelFunc:softmax};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function multinomial(re){const{inputs:ee,backend:ne,attrs:ie}=re,{logits:oe}=ee,{numSamples:ae,seed:ce,normalized:le}=ie,ue=le?oe:softmax({inputs:{logits:oe},backend:ne,attrs:{dim:oe.shape.length-1}}),he=ue.shape[0],fe=ue.shape[1],me=new MultinomialProgram(he,fe,ae),ge=me.getCustomSetupFunc(ce),ve=ne.runWebGLProgram(me,[ue],"int32",ge);return le||ne.disposeIntermediateTensorInfo(ue),ve}const multinomialConfig={kernelName:Multinomial,backendName:"webgl",kernelFunc:multinomial};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NEG="return -x;";function neg(re){const{inputs:ee,backend:ne}=re,{x:ie}=ee;if(ne.shouldExecuteOnCPU([ie])){const ae=ne.texData.get(ie.dataId),[ce,le]=negImplCPU(ae.values,ie.shape,ie.dtype);return ne.makeTensorInfo(le,ie.dtype,ce)}let oe;return env().getBool("WEBGL_PACK_UNARY_OPERATIONS")?oe=new UnaryOpPackedProgram(ie.shape,NEG):oe=new UnaryOpProgram(ie.shape,NEG),ne.runWebGLProgram(oe,[ie],ie.dtype)}const negConfig={kernelName:Neg,backendName:"webgl",kernelFunc:neg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV3Impl=nonMaxSuppressionV3Impl$2;function nonMaxSuppressionV3(re){warn$1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:ee,backend:ne,attrs:ie}=re,{boxes:oe,scores:ae}=ee,{maxOutputSize:ce,iouThreshold:le,scoreThreshold:ue}=ie,he=ne.readSync(oe.dataId),fe=ne.readSync(ae.dataId),{selectedIndices:me}=nonMaxSuppressionV3Impl(he,fe,ce,le,ue);return ne.makeTensorInfo([me.length],"int32",new Int32Array(me))}const nonMaxSuppressionV3Config={kernelName:NonMaxSuppressionV3,backendName:"webgl",kernelFunc:nonMaxSuppressionV3};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV4Impl=nonMaxSuppressionV4Impl$2;function nonMaxSuppressionV4(re){warn$1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:ee,backend:ne,attrs:ie}=re,{boxes:oe,scores:ae}=ee,{maxOutputSize:ce,iouThreshold:le,scoreThreshold:ue,padToMaxOutputSize:he}=ie,fe=ne.readSync(oe.dataId),me=ne.readSync(ae.dataId),{selectedIndices:ge,validOutputs:ve}=nonMaxSuppressionV4Impl(fe,me,ce,le,ue,he);return[ne.makeTensorInfo([ge.length],"int32",new Int32Array(ge)),ne.makeTensorInfo([],"int32",new Int32Array([ve]))]}const nonMaxSuppressionV4Config={kernelName:NonMaxSuppressionV4,backendName:"webgl",kernelFunc:nonMaxSuppressionV4};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nonMaxSuppressionV5Impl=nonMaxSuppressionV5Impl$2;function nonMaxSuppressionV5(re){warn$1("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:ee,backend:ne,attrs:ie}=re,{boxes:oe,scores:ae}=ee,{maxOutputSize:ce,iouThreshold:le,scoreThreshold:ue,softNmsSigma:he}=ie,fe=ne.readSync(oe.dataId),me=ne.readSync(ae.dataId),ge=ce,ve=le,ye=ue,be=he,{selectedIndices:Ce,selectedScores:Se}=nonMaxSuppressionV5Impl(fe,me,ge,ve,ye,be);return[ne.makeTensorInfo([Ce.length],"int32",new Int32Array(Ce)),ne.makeTensorInfo([Se.length],"float32",new Float32Array(Se))]}const nonMaxSuppressionV5Config={kernelName:NonMaxSuppressionV5,backendName:"webgl",kernelFunc:nonMaxSuppressionV5};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class OneHotProgram{constructor(ee,ne,ie,oe){this.variableNames=["indices"],this.outputShape=[ee,ne],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${oe}), float(${ie}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oneHot=re=>{const{inputs:ee,backend:ne,attrs:ie}=re,{indices:oe}=ee,{depth:ae,onValue:ce,offValue:le}=ie,ue=sizeFromShape(oe.shape),he=new OneHotProgram(ue,ae,ce,le),fe=reshape({inputs:{x:oe},backend:ne,attrs:{shape:[ue]}}),me=ne.runWebGLProgram(he,[fe],oe.dtype);ne.disposeIntermediateTensorInfo(fe);const ge=[...oe.shape,ae],ve=reshape({inputs:{x:me},backend:ne,attrs:{shape:ge}});return ne.disposeIntermediateTensorInfo(me),ve},oneHotConfig={kernelName:OneHot,backendName:"webgl",kernelFunc:oneHot};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zerosLike(re){const{inputs:ee,backend:ne}=re,{x:ie}=ee;if(ie.dtype==="complex64"){const oe=real({inputs:{input:ie},backend:ne}),ae=zerosLike({inputs:{x:oe},backend:ne}),ce=imag({inputs:{input:ie},backend:ne}),le=zerosLike({inputs:{x:ce},backend:ne}),ue=complex({inputs:{real:ae,imag:le},backend:ne});return ne.disposeIntermediateTensorInfo(oe),ne.disposeIntermediateTensorInfo(ae),ne.disposeIntermediateTensorInfo(ce),ne.disposeIntermediateTensorInfo(le),ue}else return fill$1({attrs:{shape:ie.shape,dtype:ie.dtype,value:ie.dtype==="string"?"":0},backend:ne})}const zerosLikeConfig={kernelName:ZerosLike,backendName:"webgl",kernelFunc:zerosLike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function onesLike(re){const{inputs:ee,backend:ne}=re,{x:ie}=ee;if(ie.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(ie.dtype==="complex64"){const oe=real({inputs:{input:ie},backend:ne}),ae=onesLike({inputs:{x:oe},backend:ne}),ce=imag({inputs:{input:ie},backend:ne}),le=zerosLike({inputs:{x:ce},backend:ne}),ue=complex({inputs:{real:ae,imag:le},backend:ne});return ne.disposeIntermediateTensorInfo(oe),ne.disposeIntermediateTensorInfo(ae),ne.disposeIntermediateTensorInfo(ce),ne.disposeIntermediateTensorInfo(le),ue}else return fill$1({attrs:{shape:ie.shape,dtype:ie.dtype,value:1},backend:ne})}const onesLikeConfig={kernelName:OnesLike,backendName:"webgl",kernelFunc:onesLike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pack(re){const{inputs:ee,backend:ne,attrs:ie}=re,{axis:oe}=ie;if(ee.length===1)return expandDims({inputs:{input:ee[0]},backend:ne,attrs:{dim:oe}});const ae=ee[0].shape,ce=ee[0].dtype;ee.forEach(fe=>{assertShapesMatch(ae,fe.shape,"All tensors passed to stack must have matching shapes"),assert$2(ce===fe.dtype,()=>"All tensors passed to stack must have matching dtypes")});const le=[],ue=ee.map(fe=>{const me=expandDims({inputs:{input:fe},backend:ne,attrs:{dim:oe}});return le.push(me),me}),he=concat({inputs:ue,backend:ne,attrs:{axis:oe}});return le.forEach(fe=>ne.disposeIntermediateTensorInfo(fe)),he}const packConfig={kernelName:Pack,backendName:"webgl",kernelFunc:pack};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PadProgram{constructor(ee,ne,ie){this.variableNames=["x"],this.outputShape=ne.map((he,fe)=>he[0]+ee[fe]+he[1]);const oe=ee.length,ae=getCoordsDataType(oe),ce=ne.map(he=>he[0]).join(","),le=ne.map((he,fe)=>he[0]+ee[fe]).join(","),ue=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,oe);if(oe===1){this.userCode=`
        int start = ${ce};
        int end = ${le};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(${ie}));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${ae} start = ${ae}(${ce});
      ${ae} end = ${ae}(${le});

      void main() {
        ${ae} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(${ie}));
        } else {
          ${ae} coords = outC - start;
          setOutput(getX(${ue}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PadPackedProgram{constructor(ee,ne,ie){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=ne.map((be,Ce)=>be[0]+ee[Ce]+be[1]);const oe=ee.length,ae=getCoordsDataType(oe),ce=ne.map(be=>be[0]).join(","),le=ne.map((be,Ce)=>be[0]+ee[Ce]).join(","),ue=getChannels("rc",oe),he=getChannels("source",oe),fe=`${ue[oe-1]} < ${this.outputShape[oe-1]}`,me=oe===1?"source":`vec2(${he.slice(-2).join()})`,ge=[`${ae} rc = outputLoc;`,`${ue[oe-1]} += 1;
       if(${fe}) {
      `,oe===1?"":`}
       rc = outputLoc;
       ${ue[oe-2]} += 1;
       if(${ue[oe-2]} < ${this.outputShape[oe-2]}) {`,oe===1?"":`  ${ue[oe-1]} += 1;
         if(${fe}) {`],ve=oe===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let ye="";for(let be=0,Ce=oe===1?2:4;be<Ce;be++)ye+=`
        ${ge[be]}
        if (${ve}) {
          result[${be}] = float(${ie});
        } else {
          ${ae} source = rc - start;
          result[${be}] = getChannel(getX(${he.join()}), ${me});
        }
      `;ye+=oe===1?"} ":"}}",this.userCode=`
      const ${ae} start = ${ae}(${ce});
      const ${ae} end = ${ae}(${le});

      void main() {
        ${ae} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${ye}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const padV2=re=>{const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{paddings:ae,constantValue:ce}=ie,le=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PadPackedProgram(oe.shape,ae,ce):new PadProgram(oe.shape,ae,ce);return ne.runWebGLProgram(le,[oe],oe.dtype)},padV2Config={kernelName:PadV2,backendName:"webgl",kernelFunc:padV2};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const POW=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,POW_PACKED=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  `+CHECK_NAN_SNIPPET+`
  return result;
`,pow=binaryKernelFunc({opSnippet:POW,packedOpSnippet:POW_PACKED}),powConfig={kernelName:Pow$1,backendName:"webgl",kernelFunc:pow};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function prod(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{axis:ae,keepDims:ce}=ie,le=oe.shape.length,ue=[],he=parseAxisParam(ae,oe.shape);let fe=he;const me=getAxesPermutation(fe,le);let ge=oe;me!=null&&(ge=transpose({inputs:{x:oe},backend:ne,attrs:{perm:me}}),fe=getInnerMostAxes(fe.length,le),ue.push(ge)),assertAxesAreInnerMostDims("prod",fe,le);let ve;if(ne.shouldExecuteOnCPU([ge])){const ye=ne.texData.get(ge.dataId).values,{outVals:be,outShape:Ce,outDtype:Se}=prodImplCPU(ge.shape,ge.dtype,ye,fe);ve=ne.makeTensorInfo(Ce,Se,be)}else{const[ye,be]=computeOutAndReduceShapes(ge.shape,fe),Ce=sizeFromShape(be),Se=reshape({inputs:{x:ge},backend:ne,attrs:{shape:[-1,Ce]}}),$e=sumOutType(oe.dtype),Te=reduce(Se,$e,"prod",ne);ve=reshape({inputs:{x:Te},backend:ne,attrs:{shape:ye}}),ue.push(Se),ue.push(Te)}if(ce){ue.push(ve);const ye=expandShapeToKeepDim(ve.shape,he);ve=reshape({inputs:{x:ve},backend:ne,attrs:{shape:ye}})}return ue.forEach(ye=>ne.disposeIntermediateTensorInfo(ye)),ve}const prodConfig={kernelName:Prod,backendName:"webgl",kernelFunc:prod};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const range$1=re=>{const{backend:ee,attrs:ne}=re,{start:ie,stop:oe,step:ae,dtype:ce}=ne,le=rangeImplCPU(ie,oe,ae,ce);return ee.makeTensorInfo([le.length],ce,le)},rangeConfig={kernelName:Range,backendName:"webgl",kernelFunc:range$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RECIPROCAL="return 1.0 / x;",reciprocal=unaryKernelFunc({opSnippet:RECIPROCAL}),reciprocalConfig={kernelName:Reciprocal,backendName:"webgl",kernelFunc:reciprocal};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RELU=CHECK_NAN_SNIPPET$2+`
  return (x < 0.0) ? 0.0 : x;
`,RELU_PACKED=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,relu=unaryKernelFunc({opSnippet:RELU,packedOpSnippet:RELU_PACKED}),reluConfig={kernelName:Relu$1,backendName:"webgl",kernelFunc:relu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RELU6=CHECK_NAN_SNIPPET$2+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,RELU6_PACKED=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,relu6=unaryKernelFunc({opSnippet:RELU6,packedOpSnippet:RELU6_PACKED}),relu6Config={kernelName:Relu6$1,backendName:"webgl",kernelFunc:relu6};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeBilinearProgram{constructor(ee,ne,ie,oe,ae){this.variableNames=["A"],this.outputShape=[];const[ce,le,ue,he]=ee;this.outputShape=[ce,ne,ie,he];const fe=[oe&&ne>1?le-1:le,oe&&ie>1?ue-1:ue],me=[oe&&ne>1?ne-1:ne,oe&&ie>1?ie-1:ie];let ge;ae?ge="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":ge="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${fe[0]/me[0]},
          ${fe[1]/me[1]});
      const vec2 inputShapeRC = vec2(${le}.0, ${ue}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${ge};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeBilinearPackedProgram{constructor(ee,ne,ie,oe,ae){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[ce,le,ue,he]=ee;this.outputShape=[ce,ne,ie,he];const fe=[oe&&ne>1?le-1:le,oe&&ie>1?ue-1:ue],me=[oe&&ne>1?ne-1:ne,oe&&ie>1?ie-1:ie];let ge;ae?ge="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":ge="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${fe[0]/me[0]},
          ${fe[1]/me[1]},
          ${fe[1]/me[1]});
      const vec3 inputShapeRC = vec3(${le}.0, ${ue}.0,
                                     ${ue}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${ge};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${he-1};
        bool hasNextRow = coords.z < ${ie-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinear(re){const{inputs:ee,backend:ne,attrs:ie}=re,{images:oe}=ee,{alignCorners:ae,halfPixelCenters:ce,size:le}=ie,[ue,he]=le,fe=env().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ResizeBilinearPackedProgram(oe.shape,ue,he,ae,ce):new ResizeBilinearProgram(oe.shape,ue,he,ae,ce);return ne.runWebGLProgram(fe,[oe],"float32")}const resizeBilinearConfig={kernelName:ResizeBilinear,backendName:"webgl",kernelFunc:resizeBilinear};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeBilinearBackpropProgram{constructor(ee,ne,ie){this.variableNames=["dy"],this.outputShape=[],this.outputShape=ne;const[,oe,ae]=ne,[,ce,le]=ee,ue=[ie&&ce>1?oe-1:oe,ie&&le>1?ae-1:ae],he=[ie&&ce>1?ce-1:ce,ie&&le>1?le-1:le],fe=ue[0]/he[0],me=ue[1]/he[1],ge=1/fe,ve=1/me,ye=Math.ceil(ge)*2+2,be=Math.ceil(ve)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${fe});
        const float widthScale = float(${me});

        const float invHeightScale = float(${ge});
        const float invWidthScale = float(${ve});

        const int winHeight = int(${ye});
        const int winWidth = int(${be});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${ce}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${le}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${oe-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${ae-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeBilinearGrad(re){const{inputs:ee,backend:ne,attrs:ie}=re,{images:oe,dy:ae}=ee,{alignCorners:ce}=ie,le=new ResizeBilinearBackpropProgram(ae.shape,oe.shape,ce);return ne.runWebGLProgram(le,[ae],ae.dtype)}const resizeBilinearGradConfig={kernelName:ResizeBilinearGrad,backendName:"webgl",kernelFunc:resizeBilinearGrad};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeNearestNeighborProgram{constructor(ee,ne,ie,oe,ae){this.variableNames=["A"],this.outputShape=[];const[ce,le,ue,he]=ee;this.outputShape=[ce,ne,ie,he];const fe=[oe&&ne>1?le-1:le,oe&&ie>1?ue-1:ue],me=[oe&&ne>1?ne-1:ne,oe&&ie>1?ie-1:ie],ge=oe?"0.5":"0.0";let ve;ae?ve="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":ve="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${fe[0]/me[0]},
          ${fe[1]/me[1]});
      const vec2 inputShapeRC = vec2(${le}.0, ${ue}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${ve};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${ge})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighbor(re){const{inputs:ee,backend:ne,attrs:ie}=re,{images:oe}=ee,{alignCorners:ae,halfPixelCenters:ce,size:le}=ie,[ue,he]=le,fe=new ResizeNearestNeighborProgram(oe.shape,ue,he,ae,ce);return ne.runWebGLProgram(fe,[oe],oe.dtype)}const resizeNearestNeighborConfig={kernelName:ResizeNearestNeighbor,backendName:"webgl",kernelFunc:resizeNearestNeighbor};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ResizeNearestNeigborBackpropProgram{constructor(ee,ne,ie){this.variableNames=["dy"],this.outputShape=[],this.outputShape=ne;const[,oe,ae]=ne,[,ce,le]=ee,ue=[ie&&ce>1?oe-1:oe,ie&&le>1?ae-1:ae],he=[ie&&ce>1?ce-1:ce,ie&&le>1?le-1:le],fe=ue[0]/he[0],me=ue[1]/he[1],ge=1/fe,ve=1/me,ye=Math.ceil(ge)*2+2,be=Math.ceil(ve)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${fe});
        const float widthScale = float(${me});

        const float invHeightScale = float(${ge});
        const float invWidthScale = float(${ve});

        const int winHeight = int(${ye});
        const int winWidth = int(${be});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${ce}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${le}) {
              continue;
            }

            float sourceFracRow =
              float(${ue[0]}) *
                (float(dyR) / float(${he[0]}));

            float sourceFracCol =
                float(${ue[1]}) *
                  (float(dyC) / float(${he[1]}));

            int sourceNearestRow = int(min(
                float(int(${oe}) - 1),
                ${ie} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${ae}) - 1),
                ${ie} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function resizeNearestNeighborGrad(re){const{inputs:ee,backend:ne,attrs:ie}=re,{images:oe,dy:ae}=ee,{alignCorners:ce}=ie,le=new ResizeNearestNeigborBackpropProgram(ae.shape,oe.shape,ce);return ne.runWebGLProgram(le,[ae],ae.dtype)}const resizeNearestNeighborGradConfig={kernelName:ResizeNearestNeighborGrad,backendName:"webgl",kernelFunc:resizeNearestNeighborGrad};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReverseProgram{constructor(ee,ne){this.variableNames=["x"];const ie=ee.length;if(ie>4)throw new Error(`WebGL backend: Reverse of rank-${ie} tensor is not yet supported`);if(this.outputShape=ee,ie===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${ee[0]} - coord - 1));
        }
      `;return}const oe=le=>ne.indexOf(le)!==-1&&ee[le]!==1?`${ee[le]} - coords[${le}] - 1`:`coords[${le}]`,ae=ee.map((le,ue)=>oe(ue)).join(","),ce=getCoordsDataType(ie);this.userCode=`
      void main() {
        ${ce} coords = getOutputCoords();
        setOutput(getX(${ae}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ReversePackedProgram{constructor(ee,ne){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const ie=ee.length;if(ie>4)throw new Error(`WebGL backend: Reverse of rank-${ie} tensor is not yet supported`);this.outputShape=ee;const oe=getChannels("rc",ie),ae=`${oe[ie-1]} + 1 < ${this.outputShape[ie-1]}`,ce=`${oe[ie-2]} + 1 < ${this.outputShape[ie-2]}`,le=getCoordsDataType(ie);ie===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${ee[0]} - rc - 1),
            ${ee[0]} - rc - 1);
          if(${ae}){
              result.g = getChannel(getX(${ee[0]} - (rc  + 1) - 1),
                ${ee[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${le} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${ue(oe.slice())};
          if(${ae}){
            result.g = ${he(oe.slice())};
          }
          if(${ce}) {
            result.b = ${fe(oe.slice())};
            if(${ae}) {
              result.a = ${me(oe.slice())};
            }
          }
          setOutput(result);
        }
    `;function ue(ye){return ge(ye)}function he(ye){return ye[ie-1]="("+ye[ie-1]+" + 1)",ge(ye)}function fe(ye){return ye[ie-2]="("+ye[ie-2]+" + 1)",ge(ye)}function me(ye){return ye[ie-1]="("+ye[ie-1]+" + 1)",ye[ie-2]="("+ye[ie-2]+" + 1)",ge(ye)}function ge(ye){const be=ee.map(($e,Te)=>ve(Te,ye)),Ce=be.join(","),Se=be.slice(-2).join(",");return`getChannel(getX(${Ce}), vec2(${Se}))`}function ve(ye,be){return ne.indexOf(ye)!==-1&&ee[ye]!==1?`${ee[ye]} - ${be[ye]} - 1`:`${be[ye]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function reverse(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{dims:ae}=ie,ce=oe.shape.length,le=parseAxisParam(ae,oe.shape);if(ce===0)return identity$3({inputs:{x:oe},backend:ne});const ue=env().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new ReversePackedProgram(oe.shape,le):new ReverseProgram(oe.shape,le);return ne.runWebGLProgram(ue,[oe],oe.dtype)}const reverseConfig={kernelName:Reverse,backendName:"webgl",kernelFunc:reverse};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RotateProgram{constructor(ee,ne,ie,oe){this.variableNames=["Image"],this.outputShape=[];const ae=ee[1],ce=ee[2],le=Math.sin(ne).toFixed(3),ue=Math.cos(ne).toFixed(3);this.outputShape=ee;const[he,fe]=getImageCenter(oe,ae,ce),me=he.toFixed(3),ge=fe.toFixed(3);let ve="";typeof ie=="number"?ve=`float outputValue = ${ie.toFixed(2)};`:ve=`
        vec3 fill = vec3(${ie.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - ${me}) * ${ue} - (float(y) - ${ge}) * ${le};
          float coordYFloat = (float(x) - ${me}) * ${le} + (float(y) - ${ge}) * ${ue};
          int coordX = int(round(coordXFloat + ${me}));
          int coordY = int(round(coordYFloat + ${ge}));
          ${ve}
          if(coordX >= 0 && coordX < ${ce} && coordY >= 0 && coordY < ${ae}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rotateWithOffsetConfig={kernelName:RotateWithOffset,backendName:"webgl",kernelFunc:({inputs:re,attrs:ee,backend:ne})=>{const{image:ie}=re,{radians:oe,fillValue:ae,center:ce}=ee,le=ne,ue=new RotateProgram(ie.shape,oe,ae,ce);return le.runWebGLProgram(ue,[ie],ie.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ROUND=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,round$1=unaryKernelFunc({opSnippet:ROUND}),roundConfig={kernelName:Round,backendName:"webgl",kernelFunc:round$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RSQRT="return inversesqrt(x);",rsqrt=unaryKernelFunc({opSnippet:RSQRT,cpuKernelImpl:rsqrtImplCPU}),rsqrtConfig={kernelName:Rsqrt,backendName:"webgl",kernelFunc:rsqrt};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ScatterProgram{constructor(ee,ne,ie,oe,ae,ce,le=!0){this.variableNames=["updates","indices","defaultValue"],this.outputShape=ce;const ue=getCoordsDataType(ae.length),he=getCoordsDataType(ce.length);let fe="";ie===1?fe="i":ie===2&&(fe="i, j");const me=`getIndices(${fe})`;let ge="";oe===1?ge="i":oe===2&&(ge="i, coords[1]");const ve=`getUpdates(${ge})`,ye=ne>1?"strides[j]":"strides";this.userCode=`
        ${ue} strides = ${ue}(${ae});

        void main() {
          ${he} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${ee}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${ne}; j++) {
              int index = round(${me});
              flattenedIndex += index * ${ye};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${ve};
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function scatterNd(re){const{inputs:ee,backend:ne,attrs:ie}=re,{indices:oe,updates:ae}=ee,{shape:ce}=ie,{sliceRank:le,numUpdates:ue,sliceSize:he,strides:fe,outputSize:me}=calculateShapes(ae,oe,ce),ge=[me/he,he];if(me===0)return ne.makeTensorInfo(ce,oe.dtype);const ve=reshape({inputs:{x:oe},backend:ne,attrs:{shape:[ue,le]}}),ye=reshape({inputs:{x:ae},backend:ne,attrs:{shape:[ue,he]}}),be=ne.makeTensorInfo([],"float32",new Float32Array([0])),Ce=new ScatterProgram(ue,le,ve.shape.length,ye.shape.length,fe,ge),Se=ne.runWebGLProgram(Ce,[ye,ve,be],ye.dtype),$e=reshape({inputs:{x:Se},backend:ne,attrs:{shape:ce}});return ne.disposeIntermediateTensorInfo(ve),ne.disposeIntermediateTensorInfo(ye),ne.disposeIntermediateTensorInfo(Se),ne.disposeIntermediateTensorInfo(be),$e}const scatterNdConfig={kernelName:ScatterNd,backendName:"webgl",kernelFunc:scatterNd};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SelectProgram{constructor(ee,ne,ie){this.variableNames=["c","a","b"],this.outputShape=ne;let oe,ae;if(ie>4)throw Error(`Where for rank ${ie} is not yet supported`);if(ie===1)ae="resRC",oe="resRC";else{const le=["resRC.x","resRC.y","resRC.z","resRC.w"],ue=[],he=[];for(let fe=0;fe<ne.length;fe++)he.push(`${le[fe]}`),fe<ee&&ue.push(`${le[fe]}`);oe=ue.join(),ae=he.join()}const ce=getCoordsDataType(ie);this.userCode=`
      void main() {
        ${ce} resRC = getOutputCoords();
        float cVal = getC(${oe});
        if (cVal >= 1.0) {
          setOutput(getA(${ae}));
        } else {
          setOutput(getB(${ae}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function select(re){const{inputs:ee,backend:ne}=re,{condition:ie,t:oe,e:ae}=ee,ce=new SelectProgram(ie.shape.length,oe.shape,oe.shape.length);return ne.runWebGLProgram(ce,[ie,oe,ae],upcastType(oe.dtype,ae.dtype))}const selectConfig={kernelName:Select$2,backendName:"webgl",kernelFunc:select};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SELU=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${SELU_SCALEALPHA};
  float scale = ${SELU_SCALE};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,selu=unaryKernelFunc({opSnippet:SELU}),seluConfig={kernelName:Selu$1,backendName:"webgl",kernelFunc:selu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIGMOID="return 1.0 / (1.0 + exp(-1.0 * x));",sigmoid=unaryKernelFunc({opSnippet:SIGMOID}),sigmoidConfig={kernelName:Sigmoid$1,backendName:"webgl",kernelFunc:sigmoid};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIGN=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,sign$1=unaryKernelFunc({opSnippet:SIGN}),signConfig={kernelName:Sign,backendName:"webgl",kernelFunc:sign$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SIN=CHECK_NAN_SNIPPET_UNARY+`
  return sin(x);
`,sin=unaryKernelFunc({opSnippet:SIN}),sinConfig={kernelName:Sin,backendName:"webgl",kernelFunc:sin};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SINH=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,sinh=unaryKernelFunc({opSnippet:SINH}),sinhConfig={kernelName:Sinh,backendName:"webgl",kernelFunc:sinh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SOFTPLUS=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,softplus=unaryKernelFunc({opSnippet:SOFTPLUS}),softplusConfig={kernelName:Softplus$1,backendName:"webgl",kernelFunc:softplus};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spaceToBatchND=re=>{const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{blockShape:ae,paddings:ce}=ie;assert$2(oe.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const le=ae.reduce((Se,$e)=>Se*$e),ue=[[0,0]];ue.push(...ce);for(let Se=1+ae.length;Se<oe.shape.length;++Se)ue.push([0,0]);const he=[],fe=padV2({inputs:{x:oe},backend:ne,attrs:{paddings:ue,constantValue:0}}),me=getReshaped(fe.shape,ae,le,!1),ge=getPermuted(me.length,ae.length,!1),ve=getReshapedPermuted(fe.shape,ae,le,!1),ye=reshape({inputs:{x:fe},backend:ne,attrs:{shape:me}}),be=transpose({inputs:{x:ye},backend:ne,attrs:{perm:ge}}),Ce=reshape({inputs:{x:be},backend:ne,attrs:{shape:ve}});return he.push(fe),he.push(ye),he.push(be),he.forEach(Se=>ne.disposeIntermediateTensorInfo(Se)),Ce},spaceToBatchNDConfig={kernelName:SpaceToBatchND,backendName:"webgl",kernelFunc:spaceToBatchND};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sparseToDense(re){const{inputs:ee,backend:ne,attrs:ie}=re,{sparseIndices:oe,sparseValues:ae,defaultValue:ce}=ee,{outputShape:le}=ie,{sliceRank:ue,numUpdates:he,strides:fe,outputSize:me}=calculateShapes(ae,oe,le),ge=!1,ve=new ScatterProgram(he,ue,oe.shape.length,ae.shape.length,fe,[me,1],ge),ye=ne.runWebGLProgram(ve,[ae,oe,ce],ae.dtype),be=reshape({inputs:{x:ye},backend:ne,attrs:{shape:le}});return ne.disposeIntermediateTensorInfo(ye),be}const sparseToDenseConfig={kernelName:SparseToDense,backendName:"webgl",kernelFunc:sparseToDense};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function splitV(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{numOrSizeSplits:ae,axis:ce}=ie,le=parseAxisParam(ce,oe.shape)[0],ue=prepareSplitSize(oe,ae,le),he=oe.shape.length,fe=new Array(he).fill(0),me=oe.shape.slice();return ue.map(ge=>{const ve=[...me];ve[le]=ge;const ye=slice$2({inputs:{x:oe},backend:ne,attrs:{begin:fe,size:ve}});return fe[le]+=ge,ye})}const splitVConfig={kernelName:SplitV,backendName:"webgl",kernelFunc:splitV};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQRT="return sqrt(x);",sqrt=unaryKernelFunc({opSnippet:SQRT}),sqrtConfig={kernelName:Sqrt,backendName:"webgl",kernelFunc:sqrt};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQUARE="return x * x;",square$1=unaryKernelFunc({opSnippet:SQUARE}),squareConfig={kernelName:Square,backendName:"webgl",kernelFunc:square$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SQUARED_DIFFERENCE="return (a - b) * (a - b);",squaredDifference=binaryKernelFunc({opSnippet:SQUARED_DIFFERENCE,packedOpSnippet:SQUARED_DIFFERENCE}),squaredDifferenceConfig={kernelName:SquaredDifference,backendName:"webgl",kernelFunc:squaredDifference};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function step({inputs:re,attrs:ee,backend:ne}){const{x:ie}=re,oe=CHECK_NAN_SNIPPET$2+`
    return x > 0.0 ? 1.0 : float(${ee.alpha});
  `,ae=new UnaryOpProgram(ie.shape,oe);return ne.runWebGLProgram(ae,[ie],ie.dtype)}const stepConfig={kernelName:Step,backendName:"webgl",kernelFunc:step};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class StridedSliceProgram{constructor(ee,ne,ie){this.variableNames=["x"],this.outputShape=ie;const oe=ie.length,ae=getCoordsDataType(ie.length),ce=getCoordsDataType(ie.length);let le="";if(oe===1)le="coords * strides + begin";else{let ue=0;le=ie.map((he,fe)=>(ue++,ie.length===1?`coords * strides[${fe}] + begin[${fe}]`:`coords[${ue-1}] * strides[${fe}] + begin[${fe}]`)).join(",")}this.userCode=`
      ${ae} begin = ${ae}(${ee});
      ${ae} strides = ${ae}(${ne});

      void main() {
        ${ce} coords = getOutputCoords();
        setOutput(getX(${le}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function stridedSlice(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{begin:ae,end:ce,strides:le,beginMask:ue,endMask:he,ellipsisMask:fe,newAxisMask:me,shrinkAxisMask:ge}=ie,{nonStrided:ve,$begin:ye,$strides:be,size:Ce,newShape:Se,outShape:$e}=sliceInfo(oe.shape,ae,ce,le,ue,he,fe,me,ge),Te=reshape({inputs:{x:oe},backend:ne,attrs:{shape:Se}});let Ne;if(ve){const ke=slice$2({inputs:{x:Te},backend:ne,attrs:{begin:ye,size:Ce}});Ne=reshape({inputs:{x:ke},backend:ne,attrs:{shape:$e}}),ne.disposeIntermediateTensorInfo(ke)}else if($e.some(ke=>ke===0))Ne=ne.makeTensorInfo($e,oe.dtype,[]);else if(ne.shouldExecuteOnCPU([Te])){const Oe=ne.texData.get(Te.dataId).values,Be=buffer$1(Te.shape,Te.dtype,Oe),Me=stridedSliceImplCPU($e,Be,be,ye);Ne=ne.makeTensorInfo($e,Te.dtype,Me.values)}else{const De=new StridedSliceProgram(ye,be,$e);Ne=ne.runWebGLProgram(De,[Te],Te.dtype)}const Ie=reshape({inputs:{x:Ne},backend:ne,attrs:{shape:$e}});return ne.disposeIntermediateTensorInfo(Te),ne.disposeIntermediateTensorInfo(Ne),Ie}const stridedSliceConfig={kernelName:StridedSlice,backendName:"webgl",kernelFunc:stridedSlice};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TAN="return tan(x);",tan=unaryKernelFunc({opSnippet:TAN}),tanConfig={kernelName:Tan,backendName:"webgl",kernelFunc:tan};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TANH=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,tanh=unaryKernelFunc({opSnippet:TANH}),tanhConfig={kernelName:Tanh$1,backendName:"webgl",kernelFunc:tanh};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TileProgram{constructor(ee,ne){this.variableNames=["A"];const ie=new Array(ee.length);for(let ce=0;ce<ie.length;ce++)ie[ce]=ee[ce]*ne[ce];this.outputShape=ie,this.rank=ie.length;const oe=getCoordsDataType(this.rank),ae=getSourceCoords(ee);this.userCode=`
      void main() {
        ${oe} resRC = getOutputCoords();
        setOutput(getA(${ae}));
      }
    `}}function getSourceCoords(re){const ee=re.length;if(ee>5)throw Error(`Tile for rank ${ee} is not yet supported`);if(ee===1)return`imod(resRC, ${re[0]})`;const ne=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],ie=[];for(let oe=0;oe<re.length;oe++)ie.push(`imod(${ne[oe]}, ${re[oe]})`);return ie.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tile(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{reps:ae}=ie;if(oe.dtype==="string"){const he=ne.readSync(oe.dataId).map(ge=>decodeString(ge)),fe=buffer$1(oe.shape,oe.dtype,he),me=tileImplCPU(fe,ae);return ne.makeTensorInfo(me.shape,me.dtype,me.values)}const ce=new TileProgram(oe.shape,ae);return ne.runWebGLProgram(ce,[oe],oe.dtype)}const tileConfig={kernelName:Tile,backendName:"webgl",kernelFunc:tile};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function topK(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe}=ee,{k:ae,sorted:ce}=ie,le=ne.readSync(oe.dataId),[ue,he]=topKImplCPU(le,oe.shape,oe.dtype,ae,ce);return[ne.makeTensorInfo(ue.shape,ue.dtype,ue.values),ne.makeTensorInfo(he.shape,he.dtype,he.values)]}const topKConfig={kernelName:TopK,backendName:"webgl",kernelFunc:topK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unique$1(re){const{inputs:ee,attrs:ne,backend:ie}=re,{axis:oe}=ne,{x:ae}=ee;assertNotComplex(ae,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const ce=ie.readSync(ae.dataId),{outputValues:le,outputShape:ue,indices:he}=uniqueImplCPU(ce,oe,ae.shape,ae.dtype);return[ie.makeTensorInfo(ue,ae.dtype,le),ie.makeTensorInfo([he.length],"int32",he)]}const uniqueConfig={kernelName:Unique,backendName:"webgl",kernelFunc:unique$1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unpack(re){const{inputs:ee,backend:ne,attrs:ie}=re,{value:oe}=ee;let{axis:ae}=ie;ae<0&&(ae+=oe.shape.length);const ce=oe,le=ce.shape.length,ue=oe.shape[ae],he=new Array(le-1);let fe=0;for(let be=0;be<le;be++)be!==ae&&(he[fe++]=ce.shape[be]);const me=[],ge=new Array(le).fill(0),ve=ce.shape.slice();ve[ae]=1;const ye=new Array(ue);for(let be=0;be<ye.length;be++){ge[ae]=be;const Ce=slice$2({inputs:{x:ce},backend:ne,attrs:{begin:ge,size:ve}}),Se=reshape({inputs:{x:Ce},backend:ne,attrs:{shape:he}});ye[be]=Se,me.push(Ce)}return me.forEach(be=>ne.disposeIntermediateTensorInfo(be)),ye}const unpackConfig={kernelName:Unpack,backendName:"webgl",kernelFunc:unpack};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SegmentOpProgram{constructor(ee,ne){this.variableNames=["x","segmentIds"];const ie=ee.windowSize,oe=ee.batchSize,ae=ee.inSize,ce=ee.numSegments,le=ce*Math.ceil(ae/ie);this.outputShape=[oe,le];const ue="0.0",he="sumValue",fe=Math.floor(ie/4)*4,me=ie%4,ge=`
        sumValue += dot(values, segFilter);
    `;let ve="";ae%ie>0&&(ve=`
        if (inIdx < 0 || inIdx >= ${ae}) {
          return initializationValue;
        }
      `);let ye="";ae%ie>0&&(ye=`
        if (inIdx < 0 || inIdx >= ${ae}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${ue};

      float getValue(int batch, int inIdx) {
        ${ve}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${ye}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${ce})) * float(${ie}));
        int currentSeg = int(mod(float(outIdx), float(${ce})));

        float sumValue = 0.0;

        for (int i = 0; i < ${fe}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${ge}
        }

        int inIdx = inOffset + ${fe};
        if (${me===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${ge}
        } else if (${me===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${ge}
        } else if (${me===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${ge}
        }
        setOutput(${he});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function unsortedSegmentSum(re){const{inputs:ee,backend:ne,attrs:ie}=re,{x:oe,segmentIds:ae}=ee,{numSegments:ce}=ie,le=oe.shape.length,ue=[];let he=0;const fe=getAxesPermutation([he],le);let me=oe;fe!=null&&(me=transpose({inputs:{x:oe},backend:ne,attrs:{perm:fe}}),ue.push(me),he=getInnerMostAxes(1,le)[0]);const ge=computeOutShape(me.shape,he,ce),ve=sizeFromShape([me.shape[he]]),ye=reshape({inputs:{x:me},backend:ne,attrs:{shape:[-1,ve]}});ue.push(ye);const be=sumOutType(oe.dtype),Ce=(Ne,Ie,ke,De,Oe)=>{const Be=Ne.shape[0],Me=Ne.shape[1],Le=segOpComputeOptimalWindowSize(Me,Oe),je={windowSize:Le,inSize:Me,batchSize:Be,numSegments:Oe},ze=new SegmentOpProgram(je,Ie),Ve=ne.compileAndRun(ze,[Ne,ke],De);if(ue.push(Ve),Ve.shape[1]===Oe)return Ve;const He=range$1({backend:ne,attrs:{start:0,stop:Oe,step:1,dtype:"float32"}}),We=tile({inputs:{x:He},backend:ne,attrs:{reps:[Me/Le]}});return ue.push(He),ue.push(We),Ce(Ve,Ie,We,De,Oe)},Se=Ce(ye,"unsortedSegmentSum",ae,be,ce),$e=reshape({inputs:{x:Se},backend:ne,attrs:{shape:ge}});let Te=$e;if(fe!=null){ue.push($e);const Ne=getUndoAxesPermutation(fe);Te=transpose({inputs:{x:Te},backend:ne,attrs:{perm:Ne}})}return ue.forEach(Ne=>ne.disposeIntermediateTensorInfo(Ne)),Te}const unsortedSegmentSumConfig={kernelName:UnsortedSegmentSum,backendName:"webgl",kernelFunc:unsortedSegmentSum};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kernelConfigs=[LRNConfig,LRNGradConfig,_fusedMatMulConfig,absConfig,acosConfig,acoshConfig,addConfig,addNConfig,allConfig,anyConfig,argMaxConfig,argMinConfig,asinConfig,asinhConfig,atan2Config,atanConfig,atanhConfig,avgPool3DConfig,avgPoolConfig,avgPoolGrad3DConfig,avgPoolGradConfig,batchMatMulConfig,batchNormConfig,batchToSpaceNDConfig,bincountConfig,castConfig,ceilConfig,clipByValueConfig,complexAbsConfig,complexConfig,concatConfig,conv2DBackpropFilterConfig,conv2DBackpropInputConfig,conv2DConfig,conv3DBackpropFilterV2Config,conv3DBackpropInputConfig,conv3DConfig,cosConfig,coshConfig,cropAndResizeConfig,cumsumConfig,denseBincountConfig,depthToSpaceConfig,depthwiseConv2dNativeBackpropFilterConfig,depthwiseConv2dNativeBackpropInputConfig,depthwiseConv2dNativeConfig,diagConfig,dilation2DConfig,eluConfig,eluGradConfig,equalConfig,erfConfig,expConfig,expandDimsConfig,expm1Config,fftConfig,fillConfig,flipLeftRightConfig,floorConfig,floorDivConfig,fromPixelsConfig,fusedConv2DConfig,fusedDepthwiseConv2DConfig,gatherNdConfig,gatherV2Config,greaterConfig,greaterEqualConfig,identityConfig,ifftConfig,imagConfig,isFiniteConfig,isInfConfig,isNaNConfig,leakyReluConfig,lessConfig,lessEqualConfig,linSpaceConfig,log1pConfig,logConfig,logicalAndConfig,logicalNotConfig,logicalOrConfig,maxConfig,maxPool3DConfig,maxPoolConfig,maxPoolGrad3DConfig,maxPoolGradConfig,maxPoolWithArgmaxConfig,maximumConfig,meanConfig,minConfig,minimumConfig,mirrorPadConfig,modConfig,multinomialConfig,multiplyConfig,negConfig,nonMaxSuppressionV3Config,nonMaxSuppressionV4Config,nonMaxSuppressionV5Config,notEqualConfig,oneHotConfig,onesLikeConfig,packConfig,padV2Config,powConfig,preluConfig,prodConfig,rangeConfig,realConfig,realDivConfig,reciprocalConfig,relu6Config,reluConfig,reshapeConfig,resizeBilinearConfig,resizeBilinearGradConfig,resizeNearestNeighborConfig,resizeNearestNeighborGradConfig,reverseConfig,rotateWithOffsetConfig,roundConfig,rsqrtConfig,scatterNdConfig,selectConfig,seluConfig,sigmoidConfig,signConfig,sinConfig,sinhConfig,sliceConfig,softmaxConfig,softplusConfig,spaceToBatchNDConfig,sparseToDenseConfig,splitVConfig,sqrtConfig,squareConfig,squaredDifferenceConfig,stepConfig,stridedSliceConfig,subConfig,sumConfig,tanConfig,tanhConfig,tileConfig,topKConfig,transposeConfig,uniqueConfig,unpackConfig,unsortedSegmentSumConfig,zerosLikeConfig];for(const re of kernelConfigs)registerKernel(re);var NAMES="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" "),names=function(re){return typeof re!="string"?NAMES.slice():NAMES.filter(function(ee){var ne=ee[1]||" ";return re.indexOf(ne)!==-1})};names(" #");names(" b");var REGEX$2=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenize$1(re){typeof re!="string"&&(re="");var ee=REGEX$2.exec(re);return[ee[1].toUpperCase(),ee[2].replace(/x/g,"##"),ee[3],ee[4]]}var NO_NOTE=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),SEMI=[0,2,4,5,7,9,11],properties$1=function(re){var ee=tokenize$1(re);if(ee[0]===""||ee[3]!=="")return NO_NOTE;var ne=ee[0],ie=ee[1],oe=ee[2],ae={letter:ne,acc:ie,octStr:oe,pc:ne+ie,name:ne+ie+oe,step:(ne.charCodeAt(0)+3)%7,alt:ie[0]==="b"?-ie.length:ie.length,oct:oe.length?+oe:null,chroma:0,midi:null,freq:null};return ae.chroma=(SEMI[ae.step]+ae.alt+120)%12,ae.midi=ae.oct!==null?SEMI[ae.step]+ae.alt+12*(ae.oct+1):null,ae.freq=midiToFreq(ae.midi),Object.freeze(ae)},memo=function(re,ee){return ee===void 0&&(ee={}),function(ne){return ee[ne]||(ee[ne]=re(ne))}},props$1=memo(properties$1),midiToFreq=function(re,ee){return ee===void 0&&(ee=440),typeof re=="number"?Math.pow(2,(re-69)/12)*ee:null},chroma$2=function(re){return props$1(re).chroma},IVL_TNL="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",IVL_STR="(AA|A|P|M|m|d|dd)([-+]?\\d+)",REGEX$1=new RegExp("^"+IVL_TNL+"|"+IVL_STR+"$"),SIZES=[0,2,4,5,7,9,11],TYPES="PMMPPMM",tokenize=function(re){var ee=REGEX$1.exec(""+re);return ee===null?null:ee[1]?[ee[1],ee[2]]:[ee[4],ee[3]]},NO_IVL=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null,oct:null}),qToAlt=function(re,ee){return ee==="M"&&re==="M"||ee==="P"&&re==="P"?0:ee==="m"&&re==="M"?-1:/^A+$/.test(ee)?ee.length:/^d+$/.test(ee)?re==="P"?-ee.length:-ee.length-1:null},numToStep=function(re){return(Math.abs(re)-1)%7},properties=function(re){var ee=tokenize(re);if(ee===null)return NO_IVL;var ne={num:0,q:"d",name:"",type:"M",step:0,dir:-1,simple:1,alt:0,oct:0,semitones:0,chroma:0,ic:0};return ne.num=+ee[0],ne.q=ee[1],ne.step=numToStep(ne.num),ne.type=TYPES[ne.step],ne.type==="M"&&ne.q==="P"?NO_IVL:(ne.name=""+ne.num+ne.q,ne.dir=ne.num<0?-1:1,ne.simple=ne.num===8||ne.num===-8?ne.num:ne.dir*(ne.step+1),ne.alt=qToAlt(ne.type,ne.q),ne.oct=Math.floor((Math.abs(ne.num)-1)/7),ne.semitones=ne.dir*(SIZES[ne.step]+ne.alt+12*ne.oct),ne.chroma=(ne.dir*(SIZES[ne.step]+ne.alt)%12+12)%12,Object.freeze(ne))},cache={};function props(re){return typeof re!="string"?NO_IVL:cache[re]||(cache[re]=properties(re))}var chroma$1=function(re){return props(re).chroma};const chromatic=["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],lydian=["1P 2M 3M 4A 5P 6M 7M"],major=["1P 2M 3M 4P 5P 6M 7M",["ionian"]],mixolydian=["1P 2M 3M 4P 5P 6M 7m",["dominant"]],dorian=["1P 2M 3m 4P 5P 6M 7m"],aeolian=["1P 2M 3m 4P 5P 6m 7m",["minor"]],phrygian=["1P 2m 3m 4P 5P 6m 7m"],locrian=["1P 2m 3m 4P 5d 6m 7m"],altered=["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],diminished=["1P 2M 3m 4P 5d 6m 6M 7M",["whole-half diminished"]],iwato=["1P 2m 4P 5d 7m"],hirajoshi=["1P 2M 3m 5P 6m"],kumoijoshi=["1P 2m 4P 5P 6m"],pelog=["1P 2m 3m 5P 6m"],prometheus=["1P 2M 3M 4A 6M 7m"],ritusen=["1P 2M 4P 5P 6M"],scriabin=["1P 2m 3M 5P 6M"],piongio=["1P 2M 4P 5P 6M 7m"],augmented=["1P 2A 3M 5P 5A 7M"],neopolitan=["1P 2m 3m 4P 5P 6m 7M"],egyptian=["1P 2M 4P 5P 7m"],oriental=["1P 2m 3M 4P 5d 6M 7m"],flamenco=["1P 2m 3m 3M 4A 5P 7m"],balinese=["1P 2m 3m 4P 5P 6m 7M"],persian=["1P 2m 3M 4P 5d 6m 7M"],bebop=["1P 2M 3M 4P 5P 6M 7m 7M"],enigmatic=["1P 2m 3M 5d 6m 7m 7M"],ichikosucho=["1P 2M 3M 4P 5d 5P 6M 7M"],sdata={chromatic,lydian,major,mixolydian,dorian,aeolian,phrygian,locrian,"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m",["half-diminished"]],altered,"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"phrygian dominant":["1P 2m 3M 4P 5P 6m 7m",["spanish","phrygian major"]],"half-whole diminished":["1P 2m 3m 3M 4A 5P 6M 7m",["dominant diminished"]],diminished,"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],iwato,hirajoshi,kumoijoshi,pelog,"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],prometheus,"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],ritusen,scriabin,piongio,"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],augmented,"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],neopolitan,"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],egyptian,"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],oriental,"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],flamenco,balinese,"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],persian,bebop,"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],enigmatic,"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],ichikosucho,"six tone symmetric":["1P 2m 3M 4P 5A 6M"]},M=["1P 3M 5P",["Major",""]],M13=["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],M6=["1P 3M 5P 13M",["6"]],M69=["1P 3M 5P 6M 9M",["69"]],M7add13=["1P 3M 5P 6M 7M 9M"],M7b5=["1P 3M 5d 7M"],M7b6=["1P 3M 6m 7M"],M7b9=["1P 3M 5P 7M 9m"],M7sus4=["1P 4P 5P 7M"],M9=["1P 3M 5P 7M 9M",["maj9","Maj9"]],M9b5=["1P 3M 5d 7M 9M"],M9sus4=["1P 4P 5P 7M 9M"],Madd9=["1P 3M 5P 9M",["2","add9","add2"]],Maj7=["1P 3M 5P 7M",["maj7","M7"]],Mb5=["1P 3M 5d"],Mb6=["1P 3M 13m"],Msus2=["1P 2M 5P",["add9no3","sus2"]],Msus4=["1P 4P 5P",["sus","sus4"]],Maddb9=["1P 3M 5P 9m"],m$2=["1P 3m 5P"],m11=["1P 3m 5P 7m 9M 11P",["_11"]],m11b5=["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],m13=["1P 3m 5P 7m 9M 11P 13M",["_13"]],m6=["1P 3m 4P 5P 13M",["_6"]],m69=["1P 3m 5P 6M 9M",["_69"]],m7=["1P 3m 5P 7m",["minor7","_","_7"]],m7add11=["1P 3m 5P 7m 11P",["m7add4"]],m7b5=["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],m9=["1P 3m 5P 7m 9M",["_9"]],m9b5=["1P 3m 7m 12d 2M",["h9","-9b5"]],mMaj7=["1P 3m 5P 7M",["mM7","_M7"]],mMaj7b6=["1P 3m 5P 6m 7M",["mM7b6"]],mM9=["1P 3m 5P 7M 9M",["mMaj9","-M9"]],mM9b6=["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],mb6M7=["1P 3m 6m 7M"],mb6b9=["1P 3m 6m 9m"],o=["1P 3m 5d",["mb5","dim"]],o7=["1P 3m 5d 13M",["diminished","m6b5","dim7"]],o7M7=["1P 3m 5d 6M 7M"],oM7=["1P 3m 5d 7M"],sus24=["1P 2M 4P 5P",["sus4add9"]],madd4=["1P 3m 4P 5P"],madd9=["1P 3m 5P 9M"],cdata={4:["1P 4P 7m 10m",["quartal"]],5:["1P 5P"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],64:["5P 8P 10M"],M,"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],M13,"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],M6,"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],M69,"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],M7add13,M7b5,M7b6,M7b9,M7sus4,M9,"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],M9b5,M9sus4,Madd9,Maj7,Mb5,Mb6,Msus2,Msus4,Maddb9,"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],m:m$2,"m#5":["1P 3m 5A",["m+","mb6"]],m11,"m11A 5":["1P 3m 6m 7m 9M 11P"],m11b5,m13,m6,m69,m7,"m7#5":["1P 3m 6m 7m"],m7add11,m7b5,m9,"m9#5":["1P 3m 6m 7m 9M"],m9b5,mMaj7,mMaj7b6,mM9,mM9b6,mb6M7,mb6b9,o,o7,o7M7,oM7,sus24,"+add#9":["1P 3M 5A 9A"],madd4,madd9};var chr=function(re){return chroma$2(re)||chroma$1(re)||0};function chroma(re){if(isChroma(re))return re;if(!Array.isArray(re))return"";var ee=[0,0,0,0,0,0,0,0,0,0,0,0];return re.map(chr).forEach(function(ne){ee[ne]=1}),ee.join("")}var REGEX=/^[01]{12}$/;function isChroma(re){return REGEX.test(re)}var dictionary=function(re){var ee=Object.keys(re).sort(),ne=[],ie=[],oe=function(le,ue,he){ne[le]=ue,ie[he]=ie[he]||[],ie[he].push(le)};ee.forEach(function(le){var ue=re[le][0].split(" "),he=re[le][1],fe=chroma(ue);oe(le,ue,fe),he&&he.forEach(function(me){return oe(me,ue,fe)})});var ae=Object.keys(ne).sort(),ce=function(le){return ne[le]};return ce.names=function(le){return typeof le=="string"?(ie[le]||[]).slice():(le===!0?ae:ee).slice()},ce},scale=dictionary(sdata),chord=dictionary(cdata);scale.names;chord.names;const DEFAULT_QUARTERS_PER_MINUTE=120,DEFAULT_VELOCITY=80,DEFAULT_DRUM_PITCH_CLASSES=[[36,35],[38,27,28,31,32,33,34,37,39,40,56,65,66,75,85],[42,44,54,68,69,70,71,73,78,80],[46,67,72,74,79,81],[45,29,41,61,64,84],[48,47,60,63,77,86,87],[50,30,43,62,76,83],[49,55,57,58],[51,52,53,59,82]],MIN_MIDI_VELOCITY=0,MAX_MIDI_VELOCITY=127,MIDI_VELOCITIES=MAX_MIDI_VELOCITY-MIN_MIDI_VELOCITY+1,MIN_MIDI_PITCH=0,MAX_MIDI_PITCH=127,MIN_PIANO_PITCH=21,MAX_PIANO_PITCH=108,MIN_DRUM_PITCH=35,MAX_DRUM_PITCH=81,LO_CLICK_PITCH=89,HI_CLICK_PITCH=90,LO_CLICK_CLASS=9,HI_CLICK_CLASS=10;var ChordQuality;(function(re){re[re.Major=0]="Major",re[re.Minor=1]="Minor",re[re.Augmented=2]="Augmented",re[re.Diminished=3]="Diminished",re[re.Other=4]="Other"})(ChordQuality||(ChordQuality={}));var indexMinimal={},minimal$1={},aspromise=asPromise;function asPromise(re,ee){for(var ne=new Array(arguments.length-1),ie=0,oe=2,ae=!0;oe<arguments.length;)ne[ie++]=arguments[oe++];return new Promise(function(le,ue){ne[ie]=function(fe){if(ae)if(ae=!1,fe)ue(fe);else{for(var me=new Array(arguments.length-1),ge=0;ge<me.length;)me[ge++]=arguments[ge];le.apply(null,me)}};try{re.apply(ee||null,ne)}catch(he){ae&&(ae=!1,ue(he))}})}var base64$1={};(function(re){var ee=re;ee.length=function(le){var ue=le.length;if(!ue)return 0;for(var he=0;--ue%4>1&&le.charAt(ue)==="=";)++he;return Math.ceil(le.length*3)/4-he};for(var ne=new Array(64),ie=new Array(123),oe=0;oe<64;)ie[ne[oe]=oe<26?oe+65:oe<52?oe+71:oe<62?oe-4:oe-59|43]=oe++;ee.encode=function(le,ue,he){for(var fe=null,me=[],ge=0,ve=0,ye;ue<he;){var be=le[ue++];switch(ve){case 0:me[ge++]=ne[be>>2],ye=(be&3)<<4,ve=1;break;case 1:me[ge++]=ne[ye|be>>4],ye=(be&15)<<2,ve=2;break;case 2:me[ge++]=ne[ye|be>>6],me[ge++]=ne[be&63],ve=0;break}ge>8191&&((fe||(fe=[])).push(String.fromCharCode.apply(String,me)),ge=0)}return ve&&(me[ge++]=ne[ye],me[ge++]=61,ve===1&&(me[ge++]=61)),fe?(ge&&fe.push(String.fromCharCode.apply(String,me.slice(0,ge))),fe.join("")):String.fromCharCode.apply(String,me.slice(0,ge))};var ae="invalid encoding";ee.decode=function(le,ue,he){for(var fe=he,me=0,ge,ve=0;ve<le.length;){var ye=le.charCodeAt(ve++);if(ye===61&&me>1)break;if((ye=ie[ye])===void 0)throw Error(ae);switch(me){case 0:ge=ye,me=1;break;case 1:ue[he++]=ge<<2|(ye&48)>>4,ge=ye,me=2;break;case 2:ue[he++]=(ge&15)<<4|(ye&60)>>2,ge=ye,me=3;break;case 3:ue[he++]=(ge&3)<<6|ye,me=0;break}}if(me===1)throw Error(ae);return he-fe},ee.test=function(le){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(le)}})(base64$1);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(ee,ne,ie){return(this._listeners[ee]||(this._listeners[ee]=[])).push({fn:ne,ctx:ie||this}),this};EventEmitter.prototype.off=function(ee,ne){if(ee===void 0)this._listeners={};else if(ne===void 0)this._listeners[ee]=[];else for(var ie=this._listeners[ee],oe=0;oe<ie.length;)ie[oe].fn===ne?ie.splice(oe,1):++oe;return this};EventEmitter.prototype.emit=function(ee){var ne=this._listeners[ee];if(ne){for(var ie=[],oe=1;oe<arguments.length;)ie.push(arguments[oe++]);for(oe=0;oe<ne.length;)ne[oe].fn.apply(ne[oe++].ctx,ie)}return this};var float=factory(factory);function factory(re){return typeof Float32Array<"u"?function(){var ee=new Float32Array([-0]),ne=new Uint8Array(ee.buffer),ie=ne[3]===128;function oe(ue,he,fe){ee[0]=ue,he[fe]=ne[0],he[fe+1]=ne[1],he[fe+2]=ne[2],he[fe+3]=ne[3]}function ae(ue,he,fe){ee[0]=ue,he[fe]=ne[3],he[fe+1]=ne[2],he[fe+2]=ne[1],he[fe+3]=ne[0]}re.writeFloatLE=ie?oe:ae,re.writeFloatBE=ie?ae:oe;function ce(ue,he){return ne[0]=ue[he],ne[1]=ue[he+1],ne[2]=ue[he+2],ne[3]=ue[he+3],ee[0]}function le(ue,he){return ne[3]=ue[he],ne[2]=ue[he+1],ne[1]=ue[he+2],ne[0]=ue[he+3],ee[0]}re.readFloatLE=ie?ce:le,re.readFloatBE=ie?le:ce}():function(){function ee(ie,oe,ae,ce){var le=oe<0?1:0;if(le&&(oe=-oe),oe===0)ie(1/oe>0?0:2147483648,ae,ce);else if(isNaN(oe))ie(2143289344,ae,ce);else if(oe>34028234663852886e22)ie((le<<31|2139095040)>>>0,ae,ce);else if(oe<11754943508222875e-54)ie((le<<31|Math.round(oe/1401298464324817e-60))>>>0,ae,ce);else{var ue=Math.floor(Math.log(oe)/Math.LN2),he=Math.round(oe*Math.pow(2,-ue)*8388608)&8388607;ie((le<<31|ue+127<<23|he)>>>0,ae,ce)}}re.writeFloatLE=ee.bind(null,writeUintLE),re.writeFloatBE=ee.bind(null,writeUintBE);function ne(ie,oe,ae){var ce=ie(oe,ae),le=(ce>>31)*2+1,ue=ce>>>23&255,he=ce&8388607;return ue===255?he?NaN:le*(1/0):ue===0?le*1401298464324817e-60*he:le*Math.pow(2,ue-150)*(he+8388608)}re.readFloatLE=ne.bind(null,readUintLE),re.readFloatBE=ne.bind(null,readUintBE)}(),typeof Float64Array<"u"?function(){var ee=new Float64Array([-0]),ne=new Uint8Array(ee.buffer),ie=ne[7]===128;function oe(ue,he,fe){ee[0]=ue,he[fe]=ne[0],he[fe+1]=ne[1],he[fe+2]=ne[2],he[fe+3]=ne[3],he[fe+4]=ne[4],he[fe+5]=ne[5],he[fe+6]=ne[6],he[fe+7]=ne[7]}function ae(ue,he,fe){ee[0]=ue,he[fe]=ne[7],he[fe+1]=ne[6],he[fe+2]=ne[5],he[fe+3]=ne[4],he[fe+4]=ne[3],he[fe+5]=ne[2],he[fe+6]=ne[1],he[fe+7]=ne[0]}re.writeDoubleLE=ie?oe:ae,re.writeDoubleBE=ie?ae:oe;function ce(ue,he){return ne[0]=ue[he],ne[1]=ue[he+1],ne[2]=ue[he+2],ne[3]=ue[he+3],ne[4]=ue[he+4],ne[5]=ue[he+5],ne[6]=ue[he+6],ne[7]=ue[he+7],ee[0]}function le(ue,he){return ne[7]=ue[he],ne[6]=ue[he+1],ne[5]=ue[he+2],ne[4]=ue[he+3],ne[3]=ue[he+4],ne[2]=ue[he+5],ne[1]=ue[he+6],ne[0]=ue[he+7],ee[0]}re.readDoubleLE=ie?ce:le,re.readDoubleBE=ie?le:ce}():function(){function ee(ie,oe,ae,ce,le,ue){var he=ce<0?1:0;if(he&&(ce=-ce),ce===0)ie(0,le,ue+oe),ie(1/ce>0?0:2147483648,le,ue+ae);else if(isNaN(ce))ie(0,le,ue+oe),ie(2146959360,le,ue+ae);else if(ce>17976931348623157e292)ie(0,le,ue+oe),ie((he<<31|2146435072)>>>0,le,ue+ae);else{var fe;if(ce<22250738585072014e-324)fe=ce/5e-324,ie(fe>>>0,le,ue+oe),ie((he<<31|fe/4294967296)>>>0,le,ue+ae);else{var me=Math.floor(Math.log(ce)/Math.LN2);me===1024&&(me=1023),fe=ce*Math.pow(2,-me),ie(fe*4503599627370496>>>0,le,ue+oe),ie((he<<31|me+1023<<20|fe*1048576&1048575)>>>0,le,ue+ae)}}}re.writeDoubleLE=ee.bind(null,writeUintLE,0,4),re.writeDoubleBE=ee.bind(null,writeUintBE,4,0);function ne(ie,oe,ae,ce,le){var ue=ie(ce,le+oe),he=ie(ce,le+ae),fe=(he>>31)*2+1,me=he>>>20&2047,ge=4294967296*(he&1048575)+ue;return me===2047?ge?NaN:fe*(1/0):me===0?fe*5e-324*ge:fe*Math.pow(2,me-1075)*(ge+4503599627370496)}re.readDoubleLE=ne.bind(null,readUintLE,0,4),re.readDoubleBE=ne.bind(null,readUintBE,4,0)}(),re}function writeUintLE(re,ee,ne){ee[ne]=re&255,ee[ne+1]=re>>>8&255,ee[ne+2]=re>>>16&255,ee[ne+3]=re>>>24}function writeUintBE(re,ee,ne){ee[ne]=re>>>24,ee[ne+1]=re>>>16&255,ee[ne+2]=re>>>8&255,ee[ne+3]=re&255}function readUintLE(re,ee){return(re[ee]|re[ee+1]<<8|re[ee+2]<<16|re[ee+3]<<24)>>>0}function readUintBE(re,ee){return(re[ee]<<24|re[ee+1]<<16|re[ee+2]<<8|re[ee+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(re){}return null}var utf8$2={};(function(re){var ee=re;ee.length=function(ie){for(var oe=0,ae=0,ce=0;ce<ie.length;++ce)ae=ie.charCodeAt(ce),ae<128?oe+=1:ae<2048?oe+=2:(ae&64512)===55296&&(ie.charCodeAt(ce+1)&64512)===56320?(++ce,oe+=4):oe+=3;return oe},ee.read=function(ie,oe,ae){var ce=ae-oe;if(ce<1)return"";for(var le=null,ue=[],he=0,fe;oe<ae;)fe=ie[oe++],fe<128?ue[he++]=fe:fe>191&&fe<224?ue[he++]=(fe&31)<<6|ie[oe++]&63:fe>239&&fe<365?(fe=((fe&7)<<18|(ie[oe++]&63)<<12|(ie[oe++]&63)<<6|ie[oe++]&63)-65536,ue[he++]=55296+(fe>>10),ue[he++]=56320+(fe&1023)):ue[he++]=(fe&15)<<12|(ie[oe++]&63)<<6|ie[oe++]&63,he>8191&&((le||(le=[])).push(String.fromCharCode.apply(String,ue)),he=0);return le?(he&&le.push(String.fromCharCode.apply(String,ue.slice(0,he))),le.join("")):String.fromCharCode.apply(String,ue.slice(0,he))},ee.write=function(ie,oe,ae){for(var ce=ae,le,ue,he=0;he<ie.length;++he)le=ie.charCodeAt(he),le<128?oe[ae++]=le:le<2048?(oe[ae++]=le>>6|192,oe[ae++]=le&63|128):(le&64512)===55296&&((ue=ie.charCodeAt(he+1))&64512)===56320?(le=65536+((le&1023)<<10)+(ue&1023),++he,oe[ae++]=le>>18|240,oe[ae++]=le>>12&63|128,oe[ae++]=le>>6&63|128,oe[ae++]=le&63|128):(oe[ae++]=le>>12|224,oe[ae++]=le>>6&63|128,oe[ae++]=le&63|128);return ae-ce}})(utf8$2);var pool_1=pool;function pool(re,ee,ne){var ie=ne||8192,oe=ie>>>1,ae=null,ce=ie;return function(ue){if(ue<1||ue>oe)return re(ue);ce+ue>ie&&(ae=re(ie),ce=0);var he=ee.call(ae,ce,ce+=ue);return ce&7&&(ce=(ce|7)+1),he}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=ee;var re=requireMinimal();function ee(ae,ce){this.lo=ae>>>0,this.hi=ce>>>0}var ne=ee.zero=new ee(0,0);ne.toNumber=function(){return 0},ne.zzEncode=ne.zzDecode=function(){return this},ne.length=function(){return 1};var ie=ee.zeroHash="\0\0\0\0\0\0\0\0";ee.fromNumber=function(ce){if(ce===0)return ne;var le=ce<0;le&&(ce=-ce);var ue=ce>>>0,he=(ce-ue)/4294967296>>>0;return le&&(he=~he>>>0,ue=~ue>>>0,++ue>4294967295&&(ue=0,++he>4294967295&&(he=0))),new ee(ue,he)},ee.from=function(ce){if(typeof ce=="number")return ee.fromNumber(ce);if(re.isString(ce))if(re.Long)ce=re.Long.fromString(ce);else return ee.fromNumber(parseInt(ce,10));return ce.low||ce.high?new ee(ce.low>>>0,ce.high>>>0):ne},ee.prototype.toNumber=function(ce){if(!ce&&this.hi>>>31){var le=~this.lo+1>>>0,ue=~this.hi>>>0;return le||(ue=ue+1>>>0),-(le+ue*4294967296)}return this.lo+this.hi*4294967296},ee.prototype.toLong=function(ce){return re.Long?new re.Long(this.lo|0,this.hi|0,!!ce):{low:this.lo|0,high:this.hi|0,unsigned:!!ce}};var oe=String.prototype.charCodeAt;return ee.fromHash=function(ce){return ce===ie?ne:new ee((oe.call(ce,0)|oe.call(ce,1)<<8|oe.call(ce,2)<<16|oe.call(ce,3)<<24)>>>0,(oe.call(ce,4)|oe.call(ce,5)<<8|oe.call(ce,6)<<16|oe.call(ce,7)<<24)>>>0)},ee.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},ee.prototype.zzEncode=function(){var ce=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^ce)>>>0,this.lo=(this.lo<<1^ce)>>>0,this},ee.prototype.zzDecode=function(){var ce=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^ce)>>>0,this.hi=(this.hi>>>1^ce)>>>0,this},ee.prototype.length=function(){var ce=this.lo,le=(this.lo>>>28|this.hi<<4)>>>0,ue=this.hi>>>24;return ue===0?le===0?ce<16384?ce<128?1:2:ce<2097152?3:4:le<16384?le<128?5:6:le<2097152?7:8:ue<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(re){var ee=re;ee.asPromise=aspromise,ee.base64=base64$1,ee.EventEmitter=eventemitter,ee.float=float,ee.inquire=inquire_1,ee.utf8=utf8$2,ee.pool=pool_1,ee.LongBits=requireLongbits(),ee.isNode=!!(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node),ee.global=ee.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,ee.emptyArray=Object.freeze?Object.freeze([]):[],ee.emptyObject=Object.freeze?Object.freeze({}):{},ee.isInteger=Number.isInteger||function(ae){return typeof ae=="number"&&isFinite(ae)&&Math.floor(ae)===ae},ee.isString=function(ae){return typeof ae=="string"||ae instanceof String},ee.isObject=function(ae){return ae&&typeof ae=="object"},ee.isset=ee.isSet=function(ae,ce){var le=ae[ce];return le!=null&&ae.hasOwnProperty(ce)?typeof le!="object"||(Array.isArray(le)?le.length:Object.keys(le).length)>0:!1},ee.Buffer=function(){try{var oe=ee.inquire("buffer").Buffer;return oe.prototype.utf8Write?oe:null}catch{return null}}(),ee._Buffer_from=null,ee._Buffer_allocUnsafe=null,ee.newBuffer=function(ae){return typeof ae=="number"?ee.Buffer?ee._Buffer_allocUnsafe(ae):new ee.Array(ae):ee.Buffer?ee._Buffer_from(ae):typeof Uint8Array>"u"?ae:new Uint8Array(ae)},ee.Array=typeof Uint8Array<"u"?Uint8Array:Array,ee.Long=ee.global.dcodeIO&&ee.global.dcodeIO.Long||ee.global.Long||ee.inquire("long"),ee.key2Re=/^true|false|0|1$/,ee.key32Re=/^-?(?:0|[1-9][0-9]*)$/,ee.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,ee.longToHash=function(ae){return ae?ee.LongBits.from(ae).toHash():ee.LongBits.zeroHash},ee.longFromHash=function(ae,ce){var le=ee.LongBits.fromHash(ae);return ee.Long?ee.Long.fromBits(le.lo,le.hi,ce):le.toNumber(!!ce)};function ne(oe,ae,ce){for(var le=Object.keys(ae),ue=0;ue<le.length;++ue)(oe[le[ue]]===void 0||!ce)&&(oe[le[ue]]=ae[le[ue]]);return oe}ee.merge=ne,ee.lcFirst=function(ae){return ae.charAt(0).toLowerCase()+ae.substring(1)};function ie(oe){function ae(ce,le){if(!(this instanceof ae))return new ae(ce,le);Object.defineProperty(this,"message",{get:function(){return ce}}),Error.captureStackTrace?Error.captureStackTrace(this,ae):Object.defineProperty(this,"stack",{value:new Error().stack||""}),le&&ne(this,le)}return(ae.prototype=Object.create(Error.prototype)).constructor=ae,Object.defineProperty(ae.prototype,"name",{get:function(){return oe}}),ae.prototype.toString=function(){return this.name+": "+this.message},ae}ee.newError=ie,ee.ProtocolError=ie("ProtocolError"),ee.oneOfGetter=function(ae){for(var ce={},le=0;le<ae.length;++le)ce[ae[le]]=1;return function(){for(var ue=Object.keys(this),he=ue.length-1;he>-1;--he)if(ce[ue[he]]===1&&this[ue[he]]!==void 0&&this[ue[he]]!==null)return ue[he]}},ee.oneOfSetter=function(ae){return function(ce){for(var le=0;le<ae.length;++le)ae[le]!==ce&&delete this[ae[le]]}},ee.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},ee._configure=function(){var oe=ee.Buffer;if(!oe){ee._Buffer_from=ee._Buffer_allocUnsafe=null;return}ee._Buffer_from=oe.from!==Uint8Array.from&&oe.from||function(ce,le){return new oe(ce,le)},ee._Buffer_allocUnsafe=oe.allocUnsafe||function(ce){return new oe(ce)}}}(minimal$1)),minimal$1}var writer=Writer$2,util$5=requireMinimal(),BufferWriter$1,LongBits$1=util$5.LongBits,base64=util$5.base64,utf8$1=util$5.utf8;function Op(re,ee,ne){this.fn=re,this.len=ee,this.next=void 0,this.val=ne}function noop$3(){}function State(re){this.head=re.head,this.tail=re.tail,this.len=re.len,this.next=re.states}function Writer$2(){this.len=0,this.head=new Op(noop$3,0,0),this.tail=this.head,this.states=null}var create$1=function re(){return util$5.Buffer?function(){return(Writer$2.create=function(){return new BufferWriter$1})()}:function(){return new Writer$2}};Writer$2.create=create$1();Writer$2.alloc=function re(ee){return new util$5.Array(ee)};util$5.Array!==Array&&(Writer$2.alloc=util$5.pool(Writer$2.alloc,util$5.Array.prototype.subarray));Writer$2.prototype._push=function re(ee,ne,ie){return this.tail=this.tail.next=new Op(ee,ne,ie),this.len+=ne,this};function writeByte(re,ee,ne){ee[ne]=re&255}function writeVarint32(re,ee,ne){for(;re>127;)ee[ne++]=re&127|128,re>>>=7;ee[ne]=re}function VarintOp(re,ee){this.len=re,this.next=void 0,this.val=ee}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$2.prototype.uint32=function re(ee){return this.len+=(this.tail=this.tail.next=new VarintOp((ee=ee>>>0)<128?1:ee<16384?2:ee<2097152?3:ee<268435456?4:5,ee)).len,this};Writer$2.prototype.int32=function re(ee){return ee<0?this._push(writeVarint64,10,LongBits$1.fromNumber(ee)):this.uint32(ee)};Writer$2.prototype.sint32=function re(ee){return this.uint32((ee<<1^ee>>31)>>>0)};function writeVarint64(re,ee,ne){for(;re.hi;)ee[ne++]=re.lo&127|128,re.lo=(re.lo>>>7|re.hi<<25)>>>0,re.hi>>>=7;for(;re.lo>127;)ee[ne++]=re.lo&127|128,re.lo=re.lo>>>7;ee[ne++]=re.lo}Writer$2.prototype.uint64=function re(ee){var ne=LongBits$1.from(ee);return this._push(writeVarint64,ne.length(),ne)};Writer$2.prototype.int64=Writer$2.prototype.uint64;Writer$2.prototype.sint64=function re(ee){var ne=LongBits$1.from(ee).zzEncode();return this._push(writeVarint64,ne.length(),ne)};Writer$2.prototype.bool=function re(ee){return this._push(writeByte,1,ee?1:0)};function writeFixed32(re,ee,ne){ee[ne]=re&255,ee[ne+1]=re>>>8&255,ee[ne+2]=re>>>16&255,ee[ne+3]=re>>>24}Writer$2.prototype.fixed32=function re(ee){return this._push(writeFixed32,4,ee>>>0)};Writer$2.prototype.sfixed32=Writer$2.prototype.fixed32;Writer$2.prototype.fixed64=function re(ee){var ne=LongBits$1.from(ee);return this._push(writeFixed32,4,ne.lo)._push(writeFixed32,4,ne.hi)};Writer$2.prototype.sfixed64=Writer$2.prototype.fixed64;Writer$2.prototype.float=function re(ee){return this._push(util$5.float.writeFloatLE,4,ee)};Writer$2.prototype.double=function re(ee){return this._push(util$5.float.writeDoubleLE,8,ee)};var writeBytes=util$5.Array.prototype.set?function re(ee,ne,ie){ne.set(ee,ie)}:function re(ee,ne,ie){for(var oe=0;oe<ee.length;++oe)ne[ie+oe]=ee[oe]};Writer$2.prototype.bytes=function re(ee){var ne=ee.length>>>0;if(!ne)return this._push(writeByte,1,0);if(util$5.isString(ee)){var ie=Writer$2.alloc(ne=base64.length(ee));base64.decode(ee,ie,0),ee=ie}return this.uint32(ne)._push(writeBytes,ne,ee)};Writer$2.prototype.string=function re(ee){var ne=utf8$1.length(ee);return ne?this.uint32(ne)._push(utf8$1.write,ne,ee):this._push(writeByte,1,0)};Writer$2.prototype.fork=function re(){return this.states=new State(this),this.head=this.tail=new Op(noop$3,0,0),this.len=0,this};Writer$2.prototype.reset=function re(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$3,0,0),this.len=0),this};Writer$2.prototype.ldelim=function re(){var ee=this.head,ne=this.tail,ie=this.len;return this.reset().uint32(ie),ie&&(this.tail.next=ee.next,this.tail=ne,this.len+=ie),this};Writer$2.prototype.finish=function re(){for(var ee=this.head.next,ne=this.constructor.alloc(this.len),ie=0;ee;)ee.fn(ee.val,ne,ie),ie+=ee.len,ee=ee.next;return ne};Writer$2._configure=function(re){BufferWriter$1=re,Writer$2.create=create$1(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer$1=writer;(BufferWriter.prototype=Object.create(Writer$1.prototype)).constructor=BufferWriter;var util$4=requireMinimal();function BufferWriter(){Writer$1.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$4._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$4.Buffer&&util$4.Buffer.prototype instanceof Uint8Array&&util$4.Buffer.prototype.set.name==="set"?function(ee,ne,ie){ne.set(ee,ie)}:function(ee,ne,ie){if(ee.copy)ee.copy(ne,ie,0,ee.length);else for(var oe=0;oe<ee.length;)ne[ie++]=ee[oe++]}};BufferWriter.prototype.bytes=function re(ee){util$4.isString(ee)&&(ee=util$4._Buffer_from(ee,"base64"));var ne=ee.length>>>0;return this.uint32(ne),ne&&this._push(BufferWriter.writeBytesBuffer,ne,ee),this};function writeStringBuffer(re,ee,ne){re.length<40?util$4.utf8.write(re,ee,ne):ee.utf8Write?ee.utf8Write(re,ne):ee.write(re,ne)}BufferWriter.prototype.string=function re(ee){var ne=util$4.Buffer.byteLength(ee);return this.uint32(ne),ne&&this._push(writeStringBuffer,ne,ee),this};BufferWriter._configure();var reader=Reader$1,util$3=requireMinimal(),BufferReader$1,LongBits=util$3.LongBits,utf8=util$3.utf8;function indexOutOfRange(re,ee){return RangeError("index out of range: "+re.pos+" + "+(ee||1)+" > "+re.len)}function Reader$1(re){this.buf=re,this.pos=0,this.len=re.length}var create_array=typeof Uint8Array<"u"?function re(ee){if(ee instanceof Uint8Array||Array.isArray(ee))return new Reader$1(ee);throw Error("illegal buffer")}:function re(ee){if(Array.isArray(ee))return new Reader$1(ee);throw Error("illegal buffer")},create=function re(){return util$3.Buffer?function(ne){return(Reader$1.create=function(oe){return util$3.Buffer.isBuffer(oe)?new BufferReader$1(oe):create_array(oe)})(ne)}:create_array};Reader$1.create=create();Reader$1.prototype._slice=util$3.Array.prototype.subarray||util$3.Array.prototype.slice;Reader$1.prototype.uint32=function re(){var ee=4294967295;return function(){if(ee=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(ee=(ee|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(ee=(ee|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(ee=(ee|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(ee=(ee|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return ee;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return ee}}();Reader$1.prototype.int32=function re(){return this.uint32()|0};Reader$1.prototype.sint32=function re(){var ee=this.uint32();return ee>>>1^-(ee&1)|0};function readLongVarint(){var re=new LongBits(0,0),ee=0;if(this.len-this.pos>4){for(;ee<4;++ee)if(re.lo=(re.lo|(this.buf[this.pos]&127)<<ee*7)>>>0,this.buf[this.pos++]<128)return re;if(re.lo=(re.lo|(this.buf[this.pos]&127)<<28)>>>0,re.hi=(re.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return re;ee=0}else{for(;ee<3;++ee){if(this.pos>=this.len)throw indexOutOfRange(this);if(re.lo=(re.lo|(this.buf[this.pos]&127)<<ee*7)>>>0,this.buf[this.pos++]<128)return re}return re.lo=(re.lo|(this.buf[this.pos++]&127)<<ee*7)>>>0,re}if(this.len-this.pos>4){for(;ee<5;++ee)if(re.hi=(re.hi|(this.buf[this.pos]&127)<<ee*7+3)>>>0,this.buf[this.pos++]<128)return re}else for(;ee<5;++ee){if(this.pos>=this.len)throw indexOutOfRange(this);if(re.hi=(re.hi|(this.buf[this.pos]&127)<<ee*7+3)>>>0,this.buf[this.pos++]<128)return re}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function re(){return this.uint32()!==0};function readFixed32_end(re,ee){return(re[ee-4]|re[ee-3]<<8|re[ee-2]<<16|re[ee-1]<<24)>>>0}Reader$1.prototype.fixed32=function re(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function re(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function re(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var ee=util$3.float.readFloatLE(this.buf,this.pos);return this.pos+=4,ee};Reader$1.prototype.double=function re(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var ee=util$3.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,ee};Reader$1.prototype.bytes=function re(){var ee=this.uint32(),ne=this.pos,ie=this.pos+ee;if(ie>this.len)throw indexOutOfRange(this,ee);return this.pos+=ee,Array.isArray(this.buf)?this.buf.slice(ne,ie):ne===ie?new this.buf.constructor(0):this._slice.call(this.buf,ne,ie)};Reader$1.prototype.string=function re(){var ee=this.bytes();return utf8.read(ee,0,ee.length)};Reader$1.prototype.skip=function re(ee){if(typeof ee=="number"){if(this.pos+ee>this.len)throw indexOutOfRange(this,ee);this.pos+=ee}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(re){switch(re){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(re=this.uint32()&7)!==4;)this.skipType(re);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+re+" at offset "+this.pos)}return this};Reader$1._configure=function(re){BufferReader$1=re,Reader$1.create=create(),BufferReader$1._configure();var ee=util$3.Long?"toLong":"toNumber";util$3.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[ee](!1)},uint64:function(){return readLongVarint.call(this)[ee](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[ee](!1)},fixed64:function(){return readFixed64.call(this)[ee](!0)},sfixed64:function(){return readFixed64.call(this)[ee](!1)}})};var reader_buffer=BufferReader,Reader=reader;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$2=requireMinimal();function BufferReader(re){Reader.call(this,re)}BufferReader._configure=function(){util$2.Buffer&&(BufferReader.prototype._slice=util$2.Buffer.prototype.slice)};BufferReader.prototype.string=function re(){var ee=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+ee,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+ee,this.len))};BufferReader._configure();var rpc={},service=Service,util$1=requireMinimal();(Service.prototype=Object.create(util$1.EventEmitter.prototype)).constructor=Service;function Service(re,ee,ne){if(typeof re!="function")throw TypeError("rpcImpl must be a function");util$1.EventEmitter.call(this),this.rpcImpl=re,this.requestDelimited=!!ee,this.responseDelimited=!!ne}Service.prototype.rpcCall=function re(ee,ne,ie,oe,ae){if(!oe)throw TypeError("request must be specified");var ce=this;if(!ae)return util$1.asPromise(re,ce,ee,ne,ie,oe);if(!ce.rpcImpl){setTimeout(function(){ae(Error("already ended"))},0);return}try{return ce.rpcImpl(ee,ne[ce.requestDelimited?"encodeDelimited":"encode"](oe).finish(),function(ue,he){if(ue)return ce.emit("error",ue,ee),ae(ue);if(he===null){ce.end(!0);return}if(!(he instanceof ie))try{he=ie[ce.responseDelimited?"decodeDelimited":"decode"](he)}catch(fe){return ce.emit("error",fe,ee),ae(fe)}return ce.emit("data",he,ee),ae(null,he)})}catch(le){ce.emit("error",le,ee),setTimeout(function(){ae(le)},0);return}};Service.prototype.end=function re(ee){return this.rpcImpl&&(ee||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};(function(re){var ee=re;ee.Service=service})(rpc);var roots={};(function(re){var ee=re;ee.build="minimal",ee.Writer=writer,ee.BufferWriter=writer_buffer,ee.Reader=reader,ee.BufferReader=reader_buffer,ee.util=requireMinimal(),ee.rpc=rpc,ee.roots=roots,ee.configure=ne;function ne(){ee.util._configure(),ee.Writer._configure(ee.BufferWriter),ee.Reader._configure(ee.BufferReader)}ne()})(indexMinimal);var minimal=indexMinimal,$protobuf=minimal,$Reader=$protobuf.Reader,$Writer=$protobuf.Writer,$util=$protobuf.util,$root=$protobuf.roots.default||($protobuf.roots.default={});$root.tensorflow=function(){var re={};return re.magenta=function(){var ee={};return ee.NoteSequence=function(){function ne(ie){if(this.timeSignatures=[],this.keySignatures=[],this.tempos=[],this.notes=[],this.pitchBends=[],this.controlChanges=[],this.partInfos=[],this.textAnnotations=[],this.sectionAnnotations=[],this.sectionGroups=[],ie)for(var oe=Object.keys(ie),ae=0;ae<oe.length;++ae)ie[oe[ae]]!=null&&(this[oe[ae]]=ie[oe[ae]])}return ne.prototype.id="",ne.prototype.filename="",ne.prototype.referenceNumber=$util.Long?$util.Long.fromBits(0,0,!1):0,ne.prototype.collectionName="",ne.prototype.ticksPerQuarter=0,ne.prototype.timeSignatures=$util.emptyArray,ne.prototype.keySignatures=$util.emptyArray,ne.prototype.tempos=$util.emptyArray,ne.prototype.notes=$util.emptyArray,ne.prototype.totalTime=0,ne.prototype.totalQuantizedSteps=$util.Long?$util.Long.fromBits(0,0,!1):0,ne.prototype.pitchBends=$util.emptyArray,ne.prototype.controlChanges=$util.emptyArray,ne.prototype.partInfos=$util.emptyArray,ne.prototype.sourceInfo=null,ne.prototype.textAnnotations=$util.emptyArray,ne.prototype.sectionAnnotations=$util.emptyArray,ne.prototype.sectionGroups=$util.emptyArray,ne.prototype.quantizationInfo=null,ne.prototype.subsequenceInfo=null,ne.prototype.sequenceMetadata=null,ne.create=function(oe){return new ne(oe)},ne.encode=function(oe,ae){if(ae||(ae=$Writer.create()),oe.id!=null&&oe.hasOwnProperty("id")&&ae.uint32(10).string(oe.id),oe.filename!=null&&oe.hasOwnProperty("filename")&&ae.uint32(18).string(oe.filename),oe.collectionName!=null&&oe.hasOwnProperty("collectionName")&&ae.uint32(26).string(oe.collectionName),oe.ticksPerQuarter!=null&&oe.hasOwnProperty("ticksPerQuarter")&&ae.uint32(32).int32(oe.ticksPerQuarter),oe.timeSignatures!=null&&oe.timeSignatures.length)for(var ce=0;ce<oe.timeSignatures.length;++ce)$root.tensorflow.magenta.NoteSequence.TimeSignature.encode(oe.timeSignatures[ce],ae.uint32(42).fork()).ldelim();if(oe.keySignatures!=null&&oe.keySignatures.length)for(var ce=0;ce<oe.keySignatures.length;++ce)$root.tensorflow.magenta.NoteSequence.KeySignature.encode(oe.keySignatures[ce],ae.uint32(50).fork()).ldelim();if(oe.tempos!=null&&oe.tempos.length)for(var ce=0;ce<oe.tempos.length;++ce)$root.tensorflow.magenta.NoteSequence.Tempo.encode(oe.tempos[ce],ae.uint32(58).fork()).ldelim();if(oe.notes!=null&&oe.notes.length)for(var ce=0;ce<oe.notes.length;++ce)$root.tensorflow.magenta.NoteSequence.Note.encode(oe.notes[ce],ae.uint32(66).fork()).ldelim();if(oe.totalTime!=null&&oe.hasOwnProperty("totalTime")&&ae.uint32(73).double(oe.totalTime),oe.pitchBends!=null&&oe.pitchBends.length)for(var ce=0;ce<oe.pitchBends.length;++ce)$root.tensorflow.magenta.NoteSequence.PitchBend.encode(oe.pitchBends[ce],ae.uint32(82).fork()).ldelim();if(oe.controlChanges!=null&&oe.controlChanges.length)for(var ce=0;ce<oe.controlChanges.length;++ce)$root.tensorflow.magenta.NoteSequence.ControlChange.encode(oe.controlChanges[ce],ae.uint32(90).fork()).ldelim();if(oe.partInfos!=null&&oe.partInfos.length)for(var ce=0;ce<oe.partInfos.length;++ce)$root.tensorflow.magenta.NoteSequence.PartInfo.encode(oe.partInfos[ce],ae.uint32(98).fork()).ldelim();if(oe.sourceInfo!=null&&oe.hasOwnProperty("sourceInfo")&&$root.tensorflow.magenta.NoteSequence.SourceInfo.encode(oe.sourceInfo,ae.uint32(106).fork()).ldelim(),oe.textAnnotations!=null&&oe.textAnnotations.length)for(var ce=0;ce<oe.textAnnotations.length;++ce)$root.tensorflow.magenta.NoteSequence.TextAnnotation.encode(oe.textAnnotations[ce],ae.uint32(114).fork()).ldelim();if(oe.quantizationInfo!=null&&oe.hasOwnProperty("quantizationInfo")&&$root.tensorflow.magenta.NoteSequence.QuantizationInfo.encode(oe.quantizationInfo,ae.uint32(122).fork()).ldelim(),oe.totalQuantizedSteps!=null&&oe.hasOwnProperty("totalQuantizedSteps")&&ae.uint32(128).int64(oe.totalQuantizedSteps),oe.subsequenceInfo!=null&&oe.hasOwnProperty("subsequenceInfo")&&$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.encode(oe.subsequenceInfo,ae.uint32(138).fork()).ldelim(),oe.referenceNumber!=null&&oe.hasOwnProperty("referenceNumber")&&ae.uint32(144).int64(oe.referenceNumber),oe.sequenceMetadata!=null&&oe.hasOwnProperty("sequenceMetadata")&&$root.tensorflow.magenta.SequenceMetadata.encode(oe.sequenceMetadata,ae.uint32(154).fork()).ldelim(),oe.sectionAnnotations!=null&&oe.sectionAnnotations.length)for(var ce=0;ce<oe.sectionAnnotations.length;++ce)$root.tensorflow.magenta.NoteSequence.SectionAnnotation.encode(oe.sectionAnnotations[ce],ae.uint32(162).fork()).ldelim();if(oe.sectionGroups!=null&&oe.sectionGroups.length)for(var ce=0;ce<oe.sectionGroups.length;++ce)$root.tensorflow.magenta.NoteSequence.SectionGroup.encode(oe.sectionGroups[ce],ae.uint32(170).fork()).ldelim();return ae},ne.encodeDelimited=function(oe,ae){return this.encode(oe,ae).ldelim()},ne.decode=function(oe,ae){oe instanceof $Reader||(oe=$Reader.create(oe));for(var ce=ae===void 0?oe.len:oe.pos+ae,le=new $root.tensorflow.magenta.NoteSequence;oe.pos<ce;){var ue=oe.uint32();switch(ue>>>3){case 1:le.id=oe.string();break;case 2:le.filename=oe.string();break;case 18:le.referenceNumber=$util.Long?oe.int64().toNumber():oe.int64();break;case 3:le.collectionName=oe.string();break;case 4:le.ticksPerQuarter=oe.int32();break;case 5:le.timeSignatures&&le.timeSignatures.length||(le.timeSignatures=[]),le.timeSignatures.push($root.tensorflow.magenta.NoteSequence.TimeSignature.decode(oe,oe.uint32()));break;case 6:le.keySignatures&&le.keySignatures.length||(le.keySignatures=[]),le.keySignatures.push($root.tensorflow.magenta.NoteSequence.KeySignature.decode(oe,oe.uint32()));break;case 7:le.tempos&&le.tempos.length||(le.tempos=[]),le.tempos.push($root.tensorflow.magenta.NoteSequence.Tempo.decode(oe,oe.uint32()));break;case 8:le.notes&&le.notes.length||(le.notes=[]),le.notes.push($root.tensorflow.magenta.NoteSequence.Note.decode(oe,oe.uint32()));break;case 9:le.totalTime=oe.double();break;case 16:le.totalQuantizedSteps=$util.Long?oe.int64().toNumber():oe.int64();break;case 10:le.pitchBends&&le.pitchBends.length||(le.pitchBends=[]),le.pitchBends.push($root.tensorflow.magenta.NoteSequence.PitchBend.decode(oe,oe.uint32()));break;case 11:le.controlChanges&&le.controlChanges.length||(le.controlChanges=[]),le.controlChanges.push($root.tensorflow.magenta.NoteSequence.ControlChange.decode(oe,oe.uint32()));break;case 12:le.partInfos&&le.partInfos.length||(le.partInfos=[]),le.partInfos.push($root.tensorflow.magenta.NoteSequence.PartInfo.decode(oe,oe.uint32()));break;case 13:le.sourceInfo=$root.tensorflow.magenta.NoteSequence.SourceInfo.decode(oe,oe.uint32());break;case 14:le.textAnnotations&&le.textAnnotations.length||(le.textAnnotations=[]),le.textAnnotations.push($root.tensorflow.magenta.NoteSequence.TextAnnotation.decode(oe,oe.uint32()));break;case 20:le.sectionAnnotations&&le.sectionAnnotations.length||(le.sectionAnnotations=[]),le.sectionAnnotations.push($root.tensorflow.magenta.NoteSequence.SectionAnnotation.decode(oe,oe.uint32()));break;case 21:le.sectionGroups&&le.sectionGroups.length||(le.sectionGroups=[]),le.sectionGroups.push($root.tensorflow.magenta.NoteSequence.SectionGroup.decode(oe,oe.uint32()));break;case 15:le.quantizationInfo=$root.tensorflow.magenta.NoteSequence.QuantizationInfo.decode(oe,oe.uint32());break;case 17:le.subsequenceInfo=$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.decode(oe,oe.uint32());break;case 19:le.sequenceMetadata=$root.tensorflow.magenta.SequenceMetadata.decode(oe,oe.uint32());break;default:oe.skipType(ue&7);break}}return le},ne.decodeDelimited=function(oe){return oe instanceof $Reader||(oe=new $Reader(oe)),this.decode(oe,oe.uint32())},ne.verify=function(oe){if(typeof oe!="object"||oe===null)return"object expected";if(oe.id!=null&&oe.hasOwnProperty("id")&&!$util.isString(oe.id))return"id: string expected";if(oe.filename!=null&&oe.hasOwnProperty("filename")&&!$util.isString(oe.filename))return"filename: string expected";if(oe.referenceNumber!=null&&oe.hasOwnProperty("referenceNumber")&&!$util.isInteger(oe.referenceNumber)&&!(oe.referenceNumber&&$util.isInteger(oe.referenceNumber.low)&&$util.isInteger(oe.referenceNumber.high)))return"referenceNumber: integer|Long expected";if(oe.collectionName!=null&&oe.hasOwnProperty("collectionName")&&!$util.isString(oe.collectionName))return"collectionName: string expected";if(oe.ticksPerQuarter!=null&&oe.hasOwnProperty("ticksPerQuarter")&&!$util.isInteger(oe.ticksPerQuarter))return"ticksPerQuarter: integer expected";if(oe.timeSignatures!=null&&oe.hasOwnProperty("timeSignatures")){if(!Array.isArray(oe.timeSignatures))return"timeSignatures: array expected";for(var ae=0;ae<oe.timeSignatures.length;++ae){var ce=$root.tensorflow.magenta.NoteSequence.TimeSignature.verify(oe.timeSignatures[ae]);if(ce)return"timeSignatures."+ce}}if(oe.keySignatures!=null&&oe.hasOwnProperty("keySignatures")){if(!Array.isArray(oe.keySignatures))return"keySignatures: array expected";for(var ae=0;ae<oe.keySignatures.length;++ae){var ce=$root.tensorflow.magenta.NoteSequence.KeySignature.verify(oe.keySignatures[ae]);if(ce)return"keySignatures."+ce}}if(oe.tempos!=null&&oe.hasOwnProperty("tempos")){if(!Array.isArray(oe.tempos))return"tempos: array expected";for(var ae=0;ae<oe.tempos.length;++ae){var ce=$root.tensorflow.magenta.NoteSequence.Tempo.verify(oe.tempos[ae]);if(ce)return"tempos."+ce}}if(oe.notes!=null&&oe.hasOwnProperty("notes")){if(!Array.isArray(oe.notes))return"notes: array expected";for(var ae=0;ae<oe.notes.length;++ae){var ce=$root.tensorflow.magenta.NoteSequence.Note.verify(oe.notes[ae]);if(ce)return"notes."+ce}}if(oe.totalTime!=null&&oe.hasOwnProperty("totalTime")&&typeof oe.totalTime!="number")return"totalTime: number expected";if(oe.totalQuantizedSteps!=null&&oe.hasOwnProperty("totalQuantizedSteps")&&!$util.isInteger(oe.totalQuantizedSteps)&&!(oe.totalQuantizedSteps&&$util.isInteger(oe.totalQuantizedSteps.low)&&$util.isInteger(oe.totalQuantizedSteps.high)))return"totalQuantizedSteps: integer|Long expected";if(oe.pitchBends!=null&&oe.hasOwnProperty("pitchBends")){if(!Array.isArray(oe.pitchBends))return"pitchBends: array expected";for(var ae=0;ae<oe.pitchBends.length;++ae){var ce=$root.tensorflow.magenta.NoteSequence.PitchBend.verify(oe.pitchBends[ae]);if(ce)return"pitchBends."+ce}}if(oe.controlChanges!=null&&oe.hasOwnProperty("controlChanges")){if(!Array.isArray(oe.controlChanges))return"controlChanges: array expected";for(var ae=0;ae<oe.controlChanges.length;++ae){var ce=$root.tensorflow.magenta.NoteSequence.ControlChange.verify(oe.controlChanges[ae]);if(ce)return"controlChanges."+ce}}if(oe.partInfos!=null&&oe.hasOwnProperty("partInfos")){if(!Array.isArray(oe.partInfos))return"partInfos: array expected";for(var ae=0;ae<oe.partInfos.length;++ae){var ce=$root.tensorflow.magenta.NoteSequence.PartInfo.verify(oe.partInfos[ae]);if(ce)return"partInfos."+ce}}if(oe.sourceInfo!=null&&oe.hasOwnProperty("sourceInfo")){var ce=$root.tensorflow.magenta.NoteSequence.SourceInfo.verify(oe.sourceInfo);if(ce)return"sourceInfo."+ce}if(oe.textAnnotations!=null&&oe.hasOwnProperty("textAnnotations")){if(!Array.isArray(oe.textAnnotations))return"textAnnotations: array expected";for(var ae=0;ae<oe.textAnnotations.length;++ae){var ce=$root.tensorflow.magenta.NoteSequence.TextAnnotation.verify(oe.textAnnotations[ae]);if(ce)return"textAnnotations."+ce}}if(oe.sectionAnnotations!=null&&oe.hasOwnProperty("sectionAnnotations")){if(!Array.isArray(oe.sectionAnnotations))return"sectionAnnotations: array expected";for(var ae=0;ae<oe.sectionAnnotations.length;++ae){var ce=$root.tensorflow.magenta.NoteSequence.SectionAnnotation.verify(oe.sectionAnnotations[ae]);if(ce)return"sectionAnnotations."+ce}}if(oe.sectionGroups!=null&&oe.hasOwnProperty("sectionGroups")){if(!Array.isArray(oe.sectionGroups))return"sectionGroups: array expected";for(var ae=0;ae<oe.sectionGroups.length;++ae){var ce=$root.tensorflow.magenta.NoteSequence.SectionGroup.verify(oe.sectionGroups[ae]);if(ce)return"sectionGroups."+ce}}if(oe.quantizationInfo!=null&&oe.hasOwnProperty("quantizationInfo")){var ce=$root.tensorflow.magenta.NoteSequence.QuantizationInfo.verify(oe.quantizationInfo);if(ce)return"quantizationInfo."+ce}if(oe.subsequenceInfo!=null&&oe.hasOwnProperty("subsequenceInfo")){var ce=$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.verify(oe.subsequenceInfo);if(ce)return"subsequenceInfo."+ce}if(oe.sequenceMetadata!=null&&oe.hasOwnProperty("sequenceMetadata")){var ce=$root.tensorflow.magenta.SequenceMetadata.verify(oe.sequenceMetadata);if(ce)return"sequenceMetadata."+ce}return null},ne.fromObject=function(oe){if(oe instanceof $root.tensorflow.magenta.NoteSequence)return oe;var ae=new $root.tensorflow.magenta.NoteSequence;if(oe.id!=null&&(ae.id=String(oe.id)),oe.filename!=null&&(ae.filename=String(oe.filename)),oe.referenceNumber!=null&&($util.Long?(ae.referenceNumber=$util.Long.fromValue(oe.referenceNumber)).unsigned=!1:typeof oe.referenceNumber=="string"?ae.referenceNumber=parseInt(oe.referenceNumber,10):typeof oe.referenceNumber=="number"?ae.referenceNumber=oe.referenceNumber:typeof oe.referenceNumber=="object"&&(ae.referenceNumber=new $util.LongBits(oe.referenceNumber.low>>>0,oe.referenceNumber.high>>>0).toNumber())),oe.collectionName!=null&&(ae.collectionName=String(oe.collectionName)),oe.ticksPerQuarter!=null&&(ae.ticksPerQuarter=oe.ticksPerQuarter|0),oe.timeSignatures){if(!Array.isArray(oe.timeSignatures))throw TypeError(".tensorflow.magenta.NoteSequence.timeSignatures: array expected");ae.timeSignatures=[];for(var ce=0;ce<oe.timeSignatures.length;++ce){if(typeof oe.timeSignatures[ce]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.timeSignatures: object expected");ae.timeSignatures[ce]=$root.tensorflow.magenta.NoteSequence.TimeSignature.fromObject(oe.timeSignatures[ce])}}if(oe.keySignatures){if(!Array.isArray(oe.keySignatures))throw TypeError(".tensorflow.magenta.NoteSequence.keySignatures: array expected");ae.keySignatures=[];for(var ce=0;ce<oe.keySignatures.length;++ce){if(typeof oe.keySignatures[ce]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.keySignatures: object expected");ae.keySignatures[ce]=$root.tensorflow.magenta.NoteSequence.KeySignature.fromObject(oe.keySignatures[ce])}}if(oe.tempos){if(!Array.isArray(oe.tempos))throw TypeError(".tensorflow.magenta.NoteSequence.tempos: array expected");ae.tempos=[];for(var ce=0;ce<oe.tempos.length;++ce){if(typeof oe.tempos[ce]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.tempos: object expected");ae.tempos[ce]=$root.tensorflow.magenta.NoteSequence.Tempo.fromObject(oe.tempos[ce])}}if(oe.notes){if(!Array.isArray(oe.notes))throw TypeError(".tensorflow.magenta.NoteSequence.notes: array expected");ae.notes=[];for(var ce=0;ce<oe.notes.length;++ce){if(typeof oe.notes[ce]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.notes: object expected");ae.notes[ce]=$root.tensorflow.magenta.NoteSequence.Note.fromObject(oe.notes[ce])}}if(oe.totalTime!=null&&(ae.totalTime=Number(oe.totalTime)),oe.totalQuantizedSteps!=null&&($util.Long?(ae.totalQuantizedSteps=$util.Long.fromValue(oe.totalQuantizedSteps)).unsigned=!1:typeof oe.totalQuantizedSteps=="string"?ae.totalQuantizedSteps=parseInt(oe.totalQuantizedSteps,10):typeof oe.totalQuantizedSteps=="number"?ae.totalQuantizedSteps=oe.totalQuantizedSteps:typeof oe.totalQuantizedSteps=="object"&&(ae.totalQuantizedSteps=new $util.LongBits(oe.totalQuantizedSteps.low>>>0,oe.totalQuantizedSteps.high>>>0).toNumber())),oe.pitchBends){if(!Array.isArray(oe.pitchBends))throw TypeError(".tensorflow.magenta.NoteSequence.pitchBends: array expected");ae.pitchBends=[];for(var ce=0;ce<oe.pitchBends.length;++ce){if(typeof oe.pitchBends[ce]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.pitchBends: object expected");ae.pitchBends[ce]=$root.tensorflow.magenta.NoteSequence.PitchBend.fromObject(oe.pitchBends[ce])}}if(oe.controlChanges){if(!Array.isArray(oe.controlChanges))throw TypeError(".tensorflow.magenta.NoteSequence.controlChanges: array expected");ae.controlChanges=[];for(var ce=0;ce<oe.controlChanges.length;++ce){if(typeof oe.controlChanges[ce]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.controlChanges: object expected");ae.controlChanges[ce]=$root.tensorflow.magenta.NoteSequence.ControlChange.fromObject(oe.controlChanges[ce])}}if(oe.partInfos){if(!Array.isArray(oe.partInfos))throw TypeError(".tensorflow.magenta.NoteSequence.partInfos: array expected");ae.partInfos=[];for(var ce=0;ce<oe.partInfos.length;++ce){if(typeof oe.partInfos[ce]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.partInfos: object expected");ae.partInfos[ce]=$root.tensorflow.magenta.NoteSequence.PartInfo.fromObject(oe.partInfos[ce])}}if(oe.sourceInfo!=null){if(typeof oe.sourceInfo!="object")throw TypeError(".tensorflow.magenta.NoteSequence.sourceInfo: object expected");ae.sourceInfo=$root.tensorflow.magenta.NoteSequence.SourceInfo.fromObject(oe.sourceInfo)}if(oe.textAnnotations){if(!Array.isArray(oe.textAnnotations))throw TypeError(".tensorflow.magenta.NoteSequence.textAnnotations: array expected");ae.textAnnotations=[];for(var ce=0;ce<oe.textAnnotations.length;++ce){if(typeof oe.textAnnotations[ce]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.textAnnotations: object expected");ae.textAnnotations[ce]=$root.tensorflow.magenta.NoteSequence.TextAnnotation.fromObject(oe.textAnnotations[ce])}}if(oe.sectionAnnotations){if(!Array.isArray(oe.sectionAnnotations))throw TypeError(".tensorflow.magenta.NoteSequence.sectionAnnotations: array expected");ae.sectionAnnotations=[];for(var ce=0;ce<oe.sectionAnnotations.length;++ce){if(typeof oe.sectionAnnotations[ce]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.sectionAnnotations: object expected");ae.sectionAnnotations[ce]=$root.tensorflow.magenta.NoteSequence.SectionAnnotation.fromObject(oe.sectionAnnotations[ce])}}if(oe.sectionGroups){if(!Array.isArray(oe.sectionGroups))throw TypeError(".tensorflow.magenta.NoteSequence.sectionGroups: array expected");ae.sectionGroups=[];for(var ce=0;ce<oe.sectionGroups.length;++ce){if(typeof oe.sectionGroups[ce]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.sectionGroups: object expected");ae.sectionGroups[ce]=$root.tensorflow.magenta.NoteSequence.SectionGroup.fromObject(oe.sectionGroups[ce])}}if(oe.quantizationInfo!=null){if(typeof oe.quantizationInfo!="object")throw TypeError(".tensorflow.magenta.NoteSequence.quantizationInfo: object expected");ae.quantizationInfo=$root.tensorflow.magenta.NoteSequence.QuantizationInfo.fromObject(oe.quantizationInfo)}if(oe.subsequenceInfo!=null){if(typeof oe.subsequenceInfo!="object")throw TypeError(".tensorflow.magenta.NoteSequence.subsequenceInfo: object expected");ae.subsequenceInfo=$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.fromObject(oe.subsequenceInfo)}if(oe.sequenceMetadata!=null){if(typeof oe.sequenceMetadata!="object")throw TypeError(".tensorflow.magenta.NoteSequence.sequenceMetadata: object expected");ae.sequenceMetadata=$root.tensorflow.magenta.SequenceMetadata.fromObject(oe.sequenceMetadata)}return ae},ne.toObject=function(oe,ae){ae||(ae={});var ce={};if((ae.arrays||ae.defaults)&&(ce.timeSignatures=[],ce.keySignatures=[],ce.tempos=[],ce.notes=[],ce.pitchBends=[],ce.controlChanges=[],ce.partInfos=[],ce.textAnnotations=[],ce.sectionAnnotations=[],ce.sectionGroups=[]),ae.defaults){if(ce.id="",ce.filename="",ce.collectionName="",ce.ticksPerQuarter=0,ce.totalTime=0,ce.sourceInfo=null,ce.quantizationInfo=null,$util.Long){var le=new $util.Long(0,0,!1);ce.totalQuantizedSteps=ae.longs===String?le.toString():ae.longs===Number?le.toNumber():le}else ce.totalQuantizedSteps=ae.longs===String?"0":0;if(ce.subsequenceInfo=null,$util.Long){var le=new $util.Long(0,0,!1);ce.referenceNumber=ae.longs===String?le.toString():ae.longs===Number?le.toNumber():le}else ce.referenceNumber=ae.longs===String?"0":0;ce.sequenceMetadata=null}if(oe.id!=null&&oe.hasOwnProperty("id")&&(ce.id=oe.id),oe.filename!=null&&oe.hasOwnProperty("filename")&&(ce.filename=oe.filename),oe.collectionName!=null&&oe.hasOwnProperty("collectionName")&&(ce.collectionName=oe.collectionName),oe.ticksPerQuarter!=null&&oe.hasOwnProperty("ticksPerQuarter")&&(ce.ticksPerQuarter=oe.ticksPerQuarter),oe.timeSignatures&&oe.timeSignatures.length){ce.timeSignatures=[];for(var ue=0;ue<oe.timeSignatures.length;++ue)ce.timeSignatures[ue]=$root.tensorflow.magenta.NoteSequence.TimeSignature.toObject(oe.timeSignatures[ue],ae)}if(oe.keySignatures&&oe.keySignatures.length){ce.keySignatures=[];for(var ue=0;ue<oe.keySignatures.length;++ue)ce.keySignatures[ue]=$root.tensorflow.magenta.NoteSequence.KeySignature.toObject(oe.keySignatures[ue],ae)}if(oe.tempos&&oe.tempos.length){ce.tempos=[];for(var ue=0;ue<oe.tempos.length;++ue)ce.tempos[ue]=$root.tensorflow.magenta.NoteSequence.Tempo.toObject(oe.tempos[ue],ae)}if(oe.notes&&oe.notes.length){ce.notes=[];for(var ue=0;ue<oe.notes.length;++ue)ce.notes[ue]=$root.tensorflow.magenta.NoteSequence.Note.toObject(oe.notes[ue],ae)}if(oe.totalTime!=null&&oe.hasOwnProperty("totalTime")&&(ce.totalTime=ae.json&&!isFinite(oe.totalTime)?String(oe.totalTime):oe.totalTime),oe.pitchBends&&oe.pitchBends.length){ce.pitchBends=[];for(var ue=0;ue<oe.pitchBends.length;++ue)ce.pitchBends[ue]=$root.tensorflow.magenta.NoteSequence.PitchBend.toObject(oe.pitchBends[ue],ae)}if(oe.controlChanges&&oe.controlChanges.length){ce.controlChanges=[];for(var ue=0;ue<oe.controlChanges.length;++ue)ce.controlChanges[ue]=$root.tensorflow.magenta.NoteSequence.ControlChange.toObject(oe.controlChanges[ue],ae)}if(oe.partInfos&&oe.partInfos.length){ce.partInfos=[];for(var ue=0;ue<oe.partInfos.length;++ue)ce.partInfos[ue]=$root.tensorflow.magenta.NoteSequence.PartInfo.toObject(oe.partInfos[ue],ae)}if(oe.sourceInfo!=null&&oe.hasOwnProperty("sourceInfo")&&(ce.sourceInfo=$root.tensorflow.magenta.NoteSequence.SourceInfo.toObject(oe.sourceInfo,ae)),oe.textAnnotations&&oe.textAnnotations.length){ce.textAnnotations=[];for(var ue=0;ue<oe.textAnnotations.length;++ue)ce.textAnnotations[ue]=$root.tensorflow.magenta.NoteSequence.TextAnnotation.toObject(oe.textAnnotations[ue],ae)}if(oe.quantizationInfo!=null&&oe.hasOwnProperty("quantizationInfo")&&(ce.quantizationInfo=$root.tensorflow.magenta.NoteSequence.QuantizationInfo.toObject(oe.quantizationInfo,ae)),oe.totalQuantizedSteps!=null&&oe.hasOwnProperty("totalQuantizedSteps")&&(typeof oe.totalQuantizedSteps=="number"?ce.totalQuantizedSteps=ae.longs===String?String(oe.totalQuantizedSteps):oe.totalQuantizedSteps:ce.totalQuantizedSteps=ae.longs===String?$util.Long.prototype.toString.call(oe.totalQuantizedSteps):ae.longs===Number?new $util.LongBits(oe.totalQuantizedSteps.low>>>0,oe.totalQuantizedSteps.high>>>0).toNumber():oe.totalQuantizedSteps),oe.subsequenceInfo!=null&&oe.hasOwnProperty("subsequenceInfo")&&(ce.subsequenceInfo=$root.tensorflow.magenta.NoteSequence.SubsequenceInfo.toObject(oe.subsequenceInfo,ae)),oe.referenceNumber!=null&&oe.hasOwnProperty("referenceNumber")&&(typeof oe.referenceNumber=="number"?ce.referenceNumber=ae.longs===String?String(oe.referenceNumber):oe.referenceNumber:ce.referenceNumber=ae.longs===String?$util.Long.prototype.toString.call(oe.referenceNumber):ae.longs===Number?new $util.LongBits(oe.referenceNumber.low>>>0,oe.referenceNumber.high>>>0).toNumber():oe.referenceNumber),oe.sequenceMetadata!=null&&oe.hasOwnProperty("sequenceMetadata")&&(ce.sequenceMetadata=$root.tensorflow.magenta.SequenceMetadata.toObject(oe.sequenceMetadata,ae)),oe.sectionAnnotations&&oe.sectionAnnotations.length){ce.sectionAnnotations=[];for(var ue=0;ue<oe.sectionAnnotations.length;++ue)ce.sectionAnnotations[ue]=$root.tensorflow.magenta.NoteSequence.SectionAnnotation.toObject(oe.sectionAnnotations[ue],ae)}if(oe.sectionGroups&&oe.sectionGroups.length){ce.sectionGroups=[];for(var ue=0;ue<oe.sectionGroups.length;++ue)ce.sectionGroups[ue]=$root.tensorflow.magenta.NoteSequence.SectionGroup.toObject(oe.sectionGroups[ue],ae)}return ce},ne.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ne.Note=function(){function ie(oe){if(oe)for(var ae=Object.keys(oe),ce=0;ce<ae.length;++ce)oe[ae[ce]]!=null&&(this[ae[ce]]=oe[ae[ce]])}return ie.prototype.pitch=0,ie.prototype.pitchName=0,ie.prototype.velocity=0,ie.prototype.startTime=0,ie.prototype.quantizedStartStep=$util.Long?$util.Long.fromBits(0,0,!1):0,ie.prototype.endTime=0,ie.prototype.quantizedEndStep=$util.Long?$util.Long.fromBits(0,0,!1):0,ie.prototype.numerator=0,ie.prototype.denominator=0,ie.prototype.instrument=0,ie.prototype.program=0,ie.prototype.isDrum=!1,ie.prototype.part=0,ie.prototype.voice=0,ie.create=function(ae){return new ie(ae)},ie.encode=function(ae,ce){return ce||(ce=$Writer.create()),ae.pitch!=null&&ae.hasOwnProperty("pitch")&&ce.uint32(8).int32(ae.pitch),ae.velocity!=null&&ae.hasOwnProperty("velocity")&&ce.uint32(16).int32(ae.velocity),ae.startTime!=null&&ae.hasOwnProperty("startTime")&&ce.uint32(25).double(ae.startTime),ae.endTime!=null&&ae.hasOwnProperty("endTime")&&ce.uint32(33).double(ae.endTime),ae.numerator!=null&&ae.hasOwnProperty("numerator")&&ce.uint32(40).int32(ae.numerator),ae.denominator!=null&&ae.hasOwnProperty("denominator")&&ce.uint32(48).int32(ae.denominator),ae.instrument!=null&&ae.hasOwnProperty("instrument")&&ce.uint32(56).int32(ae.instrument),ae.program!=null&&ae.hasOwnProperty("program")&&ce.uint32(64).int32(ae.program),ae.isDrum!=null&&ae.hasOwnProperty("isDrum")&&ce.uint32(72).bool(ae.isDrum),ae.part!=null&&ae.hasOwnProperty("part")&&ce.uint32(80).int32(ae.part),ae.pitchName!=null&&ae.hasOwnProperty("pitchName")&&ce.uint32(88).int32(ae.pitchName),ae.voice!=null&&ae.hasOwnProperty("voice")&&ce.uint32(96).int32(ae.voice),ae.quantizedStartStep!=null&&ae.hasOwnProperty("quantizedStartStep")&&ce.uint32(104).int64(ae.quantizedStartStep),ae.quantizedEndStep!=null&&ae.hasOwnProperty("quantizedEndStep")&&ce.uint32(112).int64(ae.quantizedEndStep),ce},ie.encodeDelimited=function(ae,ce){return this.encode(ae,ce).ldelim()},ie.decode=function(ae,ce){ae instanceof $Reader||(ae=$Reader.create(ae));for(var le=ce===void 0?ae.len:ae.pos+ce,ue=new $root.tensorflow.magenta.NoteSequence.Note;ae.pos<le;){var he=ae.uint32();switch(he>>>3){case 1:ue.pitch=ae.int32();break;case 11:ue.pitchName=ae.int32();break;case 2:ue.velocity=ae.int32();break;case 3:ue.startTime=ae.double();break;case 13:ue.quantizedStartStep=$util.Long?ae.int64().toNumber():ae.int64();break;case 4:ue.endTime=ae.double();break;case 14:ue.quantizedEndStep=$util.Long?ae.int64().toNumber():ae.int64();break;case 5:ue.numerator=ae.int32();break;case 6:ue.denominator=ae.int32();break;case 7:ue.instrument=ae.int32();break;case 8:ue.program=ae.int32();break;case 9:ue.isDrum=ae.bool();break;case 10:ue.part=ae.int32();break;case 12:ue.voice=ae.int32();break;default:ae.skipType(he&7);break}}return ue},ie.decodeDelimited=function(ae){return ae instanceof $Reader||(ae=new $Reader(ae)),this.decode(ae,ae.uint32())},ie.verify=function(ae){if(typeof ae!="object"||ae===null)return"object expected";if(ae.pitch!=null&&ae.hasOwnProperty("pitch")&&!$util.isInteger(ae.pitch))return"pitch: integer expected";if(ae.pitchName!=null&&ae.hasOwnProperty("pitchName"))switch(ae.pitchName){default:return"pitchName: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:case 16:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:case 34:case 35:break}return ae.velocity!=null&&ae.hasOwnProperty("velocity")&&!$util.isInteger(ae.velocity)?"velocity: integer expected":ae.startTime!=null&&ae.hasOwnProperty("startTime")&&typeof ae.startTime!="number"?"startTime: number expected":ae.quantizedStartStep!=null&&ae.hasOwnProperty("quantizedStartStep")&&!$util.isInteger(ae.quantizedStartStep)&&!(ae.quantizedStartStep&&$util.isInteger(ae.quantizedStartStep.low)&&$util.isInteger(ae.quantizedStartStep.high))?"quantizedStartStep: integer|Long expected":ae.endTime!=null&&ae.hasOwnProperty("endTime")&&typeof ae.endTime!="number"?"endTime: number expected":ae.quantizedEndStep!=null&&ae.hasOwnProperty("quantizedEndStep")&&!$util.isInteger(ae.quantizedEndStep)&&!(ae.quantizedEndStep&&$util.isInteger(ae.quantizedEndStep.low)&&$util.isInteger(ae.quantizedEndStep.high))?"quantizedEndStep: integer|Long expected":ae.numerator!=null&&ae.hasOwnProperty("numerator")&&!$util.isInteger(ae.numerator)?"numerator: integer expected":ae.denominator!=null&&ae.hasOwnProperty("denominator")&&!$util.isInteger(ae.denominator)?"denominator: integer expected":ae.instrument!=null&&ae.hasOwnProperty("instrument")&&!$util.isInteger(ae.instrument)?"instrument: integer expected":ae.program!=null&&ae.hasOwnProperty("program")&&!$util.isInteger(ae.program)?"program: integer expected":ae.isDrum!=null&&ae.hasOwnProperty("isDrum")&&typeof ae.isDrum!="boolean"?"isDrum: boolean expected":ae.part!=null&&ae.hasOwnProperty("part")&&!$util.isInteger(ae.part)?"part: integer expected":ae.voice!=null&&ae.hasOwnProperty("voice")&&!$util.isInteger(ae.voice)?"voice: integer expected":null},ie.fromObject=function(ae){if(ae instanceof $root.tensorflow.magenta.NoteSequence.Note)return ae;var ce=new $root.tensorflow.magenta.NoteSequence.Note;switch(ae.pitch!=null&&(ce.pitch=ae.pitch|0),ae.pitchName){case"UNKNOWN_PITCH_NAME":case 0:ce.pitchName=0;break;case"F_FLAT_FLAT":case 1:ce.pitchName=1;break;case"C_FLAT_FLAT":case 2:ce.pitchName=2;break;case"G_FLAT_FLAT":case 3:ce.pitchName=3;break;case"D_FLAT_FLAT":case 4:ce.pitchName=4;break;case"A_FLAT_FLAT":case 5:ce.pitchName=5;break;case"E_FLAT_FLAT":case 6:ce.pitchName=6;break;case"B_FLAT_FLAT":case 7:ce.pitchName=7;break;case"F_FLAT":case 8:ce.pitchName=8;break;case"C_FLAT":case 9:ce.pitchName=9;break;case"G_FLAT":case 10:ce.pitchName=10;break;case"D_FLAT":case 11:ce.pitchName=11;break;case"A_FLAT":case 12:ce.pitchName=12;break;case"E_FLAT":case 13:ce.pitchName=13;break;case"B_FLAT":case 14:ce.pitchName=14;break;case"F":case 15:ce.pitchName=15;break;case"C":case 16:ce.pitchName=16;break;case"G":case 17:ce.pitchName=17;break;case"D":case 18:ce.pitchName=18;break;case"A":case 19:ce.pitchName=19;break;case"E":case 20:ce.pitchName=20;break;case"B":case 21:ce.pitchName=21;break;case"F_SHARP":case 22:ce.pitchName=22;break;case"C_SHARP":case 23:ce.pitchName=23;break;case"G_SHARP":case 24:ce.pitchName=24;break;case"D_SHARP":case 25:ce.pitchName=25;break;case"A_SHARP":case 26:ce.pitchName=26;break;case"E_SHARP":case 27:ce.pitchName=27;break;case"B_SHARP":case 28:ce.pitchName=28;break;case"F_SHARP_SHARP":case 29:ce.pitchName=29;break;case"C_SHARP_SHARP":case 30:ce.pitchName=30;break;case"G_SHARP_SHARP":case 31:ce.pitchName=31;break;case"D_SHARP_SHARP":case 32:ce.pitchName=32;break;case"A_SHARP_SHARP":case 33:ce.pitchName=33;break;case"E_SHARP_SHARP":case 34:ce.pitchName=34;break;case"B_SHARP_SHARP":case 35:ce.pitchName=35;break}return ae.velocity!=null&&(ce.velocity=ae.velocity|0),ae.startTime!=null&&(ce.startTime=Number(ae.startTime)),ae.quantizedStartStep!=null&&($util.Long?(ce.quantizedStartStep=$util.Long.fromValue(ae.quantizedStartStep)).unsigned=!1:typeof ae.quantizedStartStep=="string"?ce.quantizedStartStep=parseInt(ae.quantizedStartStep,10):typeof ae.quantizedStartStep=="number"?ce.quantizedStartStep=ae.quantizedStartStep:typeof ae.quantizedStartStep=="object"&&(ce.quantizedStartStep=new $util.LongBits(ae.quantizedStartStep.low>>>0,ae.quantizedStartStep.high>>>0).toNumber())),ae.endTime!=null&&(ce.endTime=Number(ae.endTime)),ae.quantizedEndStep!=null&&($util.Long?(ce.quantizedEndStep=$util.Long.fromValue(ae.quantizedEndStep)).unsigned=!1:typeof ae.quantizedEndStep=="string"?ce.quantizedEndStep=parseInt(ae.quantizedEndStep,10):typeof ae.quantizedEndStep=="number"?ce.quantizedEndStep=ae.quantizedEndStep:typeof ae.quantizedEndStep=="object"&&(ce.quantizedEndStep=new $util.LongBits(ae.quantizedEndStep.low>>>0,ae.quantizedEndStep.high>>>0).toNumber())),ae.numerator!=null&&(ce.numerator=ae.numerator|0),ae.denominator!=null&&(ce.denominator=ae.denominator|0),ae.instrument!=null&&(ce.instrument=ae.instrument|0),ae.program!=null&&(ce.program=ae.program|0),ae.isDrum!=null&&(ce.isDrum=!!ae.isDrum),ae.part!=null&&(ce.part=ae.part|0),ae.voice!=null&&(ce.voice=ae.voice|0),ce},ie.toObject=function(ae,ce){ce||(ce={});var le={};if(ce.defaults){if(le.pitch=0,le.velocity=0,le.startTime=0,le.endTime=0,le.numerator=0,le.denominator=0,le.instrument=0,le.program=0,le.isDrum=!1,le.part=0,le.pitchName=ce.enums===String?"UNKNOWN_PITCH_NAME":0,le.voice=0,$util.Long){var ue=new $util.Long(0,0,!1);le.quantizedStartStep=ce.longs===String?ue.toString():ce.longs===Number?ue.toNumber():ue}else le.quantizedStartStep=ce.longs===String?"0":0;if($util.Long){var ue=new $util.Long(0,0,!1);le.quantizedEndStep=ce.longs===String?ue.toString():ce.longs===Number?ue.toNumber():ue}else le.quantizedEndStep=ce.longs===String?"0":0}return ae.pitch!=null&&ae.hasOwnProperty("pitch")&&(le.pitch=ae.pitch),ae.velocity!=null&&ae.hasOwnProperty("velocity")&&(le.velocity=ae.velocity),ae.startTime!=null&&ae.hasOwnProperty("startTime")&&(le.startTime=ce.json&&!isFinite(ae.startTime)?String(ae.startTime):ae.startTime),ae.endTime!=null&&ae.hasOwnProperty("endTime")&&(le.endTime=ce.json&&!isFinite(ae.endTime)?String(ae.endTime):ae.endTime),ae.numerator!=null&&ae.hasOwnProperty("numerator")&&(le.numerator=ae.numerator),ae.denominator!=null&&ae.hasOwnProperty("denominator")&&(le.denominator=ae.denominator),ae.instrument!=null&&ae.hasOwnProperty("instrument")&&(le.instrument=ae.instrument),ae.program!=null&&ae.hasOwnProperty("program")&&(le.program=ae.program),ae.isDrum!=null&&ae.hasOwnProperty("isDrum")&&(le.isDrum=ae.isDrum),ae.part!=null&&ae.hasOwnProperty("part")&&(le.part=ae.part),ae.pitchName!=null&&ae.hasOwnProperty("pitchName")&&(le.pitchName=ce.enums===String?$root.tensorflow.magenta.NoteSequence.PitchName[ae.pitchName]:ae.pitchName),ae.voice!=null&&ae.hasOwnProperty("voice")&&(le.voice=ae.voice),ae.quantizedStartStep!=null&&ae.hasOwnProperty("quantizedStartStep")&&(typeof ae.quantizedStartStep=="number"?le.quantizedStartStep=ce.longs===String?String(ae.quantizedStartStep):ae.quantizedStartStep:le.quantizedStartStep=ce.longs===String?$util.Long.prototype.toString.call(ae.quantizedStartStep):ce.longs===Number?new $util.LongBits(ae.quantizedStartStep.low>>>0,ae.quantizedStartStep.high>>>0).toNumber():ae.quantizedStartStep),ae.quantizedEndStep!=null&&ae.hasOwnProperty("quantizedEndStep")&&(typeof ae.quantizedEndStep=="number"?le.quantizedEndStep=ce.longs===String?String(ae.quantizedEndStep):ae.quantizedEndStep:le.quantizedEndStep=ce.longs===String?$util.Long.prototype.toString.call(ae.quantizedEndStep):ce.longs===Number?new $util.LongBits(ae.quantizedEndStep.low>>>0,ae.quantizedEndStep.high>>>0).toNumber():ae.quantizedEndStep),le},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie}(),ne.PitchName=function(){var ie={},oe=Object.create(ie);return oe[ie[0]="UNKNOWN_PITCH_NAME"]=0,oe[ie[1]="F_FLAT_FLAT"]=1,oe[ie[2]="C_FLAT_FLAT"]=2,oe[ie[3]="G_FLAT_FLAT"]=3,oe[ie[4]="D_FLAT_FLAT"]=4,oe[ie[5]="A_FLAT_FLAT"]=5,oe[ie[6]="E_FLAT_FLAT"]=6,oe[ie[7]="B_FLAT_FLAT"]=7,oe[ie[8]="F_FLAT"]=8,oe[ie[9]="C_FLAT"]=9,oe[ie[10]="G_FLAT"]=10,oe[ie[11]="D_FLAT"]=11,oe[ie[12]="A_FLAT"]=12,oe[ie[13]="E_FLAT"]=13,oe[ie[14]="B_FLAT"]=14,oe[ie[15]="F"]=15,oe[ie[16]="C"]=16,oe[ie[17]="G"]=17,oe[ie[18]="D"]=18,oe[ie[19]="A"]=19,oe[ie[20]="E"]=20,oe[ie[21]="B"]=21,oe[ie[22]="F_SHARP"]=22,oe[ie[23]="C_SHARP"]=23,oe[ie[24]="G_SHARP"]=24,oe[ie[25]="D_SHARP"]=25,oe[ie[26]="A_SHARP"]=26,oe[ie[27]="E_SHARP"]=27,oe[ie[28]="B_SHARP"]=28,oe[ie[29]="F_SHARP_SHARP"]=29,oe[ie[30]="C_SHARP_SHARP"]=30,oe[ie[31]="G_SHARP_SHARP"]=31,oe[ie[32]="D_SHARP_SHARP"]=32,oe[ie[33]="A_SHARP_SHARP"]=33,oe[ie[34]="E_SHARP_SHARP"]=34,oe[ie[35]="B_SHARP_SHARP"]=35,oe}(),ne.TimeSignature=function(){function ie(oe){if(oe)for(var ae=Object.keys(oe),ce=0;ce<ae.length;++ce)oe[ae[ce]]!=null&&(this[ae[ce]]=oe[ae[ce]])}return ie.prototype.time=0,ie.prototype.numerator=0,ie.prototype.denominator=0,ie.create=function(ae){return new ie(ae)},ie.encode=function(ae,ce){return ce||(ce=$Writer.create()),ae.time!=null&&ae.hasOwnProperty("time")&&ce.uint32(9).double(ae.time),ae.numerator!=null&&ae.hasOwnProperty("numerator")&&ce.uint32(16).int32(ae.numerator),ae.denominator!=null&&ae.hasOwnProperty("denominator")&&ce.uint32(24).int32(ae.denominator),ce},ie.encodeDelimited=function(ae,ce){return this.encode(ae,ce).ldelim()},ie.decode=function(ae,ce){ae instanceof $Reader||(ae=$Reader.create(ae));for(var le=ce===void 0?ae.len:ae.pos+ce,ue=new $root.tensorflow.magenta.NoteSequence.TimeSignature;ae.pos<le;){var he=ae.uint32();switch(he>>>3){case 1:ue.time=ae.double();break;case 2:ue.numerator=ae.int32();break;case 3:ue.denominator=ae.int32();break;default:ae.skipType(he&7);break}}return ue},ie.decodeDelimited=function(ae){return ae instanceof $Reader||(ae=new $Reader(ae)),this.decode(ae,ae.uint32())},ie.verify=function(ae){return typeof ae!="object"||ae===null?"object expected":ae.time!=null&&ae.hasOwnProperty("time")&&typeof ae.time!="number"?"time: number expected":ae.numerator!=null&&ae.hasOwnProperty("numerator")&&!$util.isInteger(ae.numerator)?"numerator: integer expected":ae.denominator!=null&&ae.hasOwnProperty("denominator")&&!$util.isInteger(ae.denominator)?"denominator: integer expected":null},ie.fromObject=function(ae){if(ae instanceof $root.tensorflow.magenta.NoteSequence.TimeSignature)return ae;var ce=new $root.tensorflow.magenta.NoteSequence.TimeSignature;return ae.time!=null&&(ce.time=Number(ae.time)),ae.numerator!=null&&(ce.numerator=ae.numerator|0),ae.denominator!=null&&(ce.denominator=ae.denominator|0),ce},ie.toObject=function(ae,ce){ce||(ce={});var le={};return ce.defaults&&(le.time=0,le.numerator=0,le.denominator=0),ae.time!=null&&ae.hasOwnProperty("time")&&(le.time=ce.json&&!isFinite(ae.time)?String(ae.time):ae.time),ae.numerator!=null&&ae.hasOwnProperty("numerator")&&(le.numerator=ae.numerator),ae.denominator!=null&&ae.hasOwnProperty("denominator")&&(le.denominator=ae.denominator),le},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie}(),ne.KeySignature=function(){function ie(oe){if(oe)for(var ae=Object.keys(oe),ce=0;ce<ae.length;++ce)oe[ae[ce]]!=null&&(this[ae[ce]]=oe[ae[ce]])}return ie.prototype.time=0,ie.prototype.key=0,ie.prototype.mode=0,ie.create=function(ae){return new ie(ae)},ie.encode=function(ae,ce){return ce||(ce=$Writer.create()),ae.time!=null&&ae.hasOwnProperty("time")&&ce.uint32(9).double(ae.time),ae.key!=null&&ae.hasOwnProperty("key")&&ce.uint32(16).int32(ae.key),ae.mode!=null&&ae.hasOwnProperty("mode")&&ce.uint32(24).int32(ae.mode),ce},ie.encodeDelimited=function(ae,ce){return this.encode(ae,ce).ldelim()},ie.decode=function(ae,ce){ae instanceof $Reader||(ae=$Reader.create(ae));for(var le=ce===void 0?ae.len:ae.pos+ce,ue=new $root.tensorflow.magenta.NoteSequence.KeySignature;ae.pos<le;){var he=ae.uint32();switch(he>>>3){case 1:ue.time=ae.double();break;case 2:ue.key=ae.int32();break;case 3:ue.mode=ae.int32();break;default:ae.skipType(he&7);break}}return ue},ie.decodeDelimited=function(ae){return ae instanceof $Reader||(ae=new $Reader(ae)),this.decode(ae,ae.uint32())},ie.verify=function(ae){if(typeof ae!="object"||ae===null)return"object expected";if(ae.time!=null&&ae.hasOwnProperty("time")&&typeof ae.time!="number")return"time: number expected";if(ae.key!=null&&ae.hasOwnProperty("key"))switch(ae.key){default:return"key: enum value expected";case 0:case 1:case 1:case 2:case 3:case 3:case 4:case 5:case 6:case 6:case 7:case 8:case 8:case 9:case 10:case 10:case 11:break}if(ae.mode!=null&&ae.hasOwnProperty("mode"))switch(ae.mode){default:return"mode: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:break}return null},ie.fromObject=function(ae){if(ae instanceof $root.tensorflow.magenta.NoteSequence.KeySignature)return ae;var ce=new $root.tensorflow.magenta.NoteSequence.KeySignature;switch(ae.time!=null&&(ce.time=Number(ae.time)),ae.key){case"C":case 0:ce.key=0;break;case"C_SHARP":case 1:ce.key=1;break;case"D_FLAT":case 1:ce.key=1;break;case"D":case 2:ce.key=2;break;case"D_SHARP":case 3:ce.key=3;break;case"E_FLAT":case 3:ce.key=3;break;case"E":case 4:ce.key=4;break;case"F":case 5:ce.key=5;break;case"F_SHARP":case 6:ce.key=6;break;case"G_FLAT":case 6:ce.key=6;break;case"G":case 7:ce.key=7;break;case"G_SHARP":case 8:ce.key=8;break;case"A_FLAT":case 8:ce.key=8;break;case"A":case 9:ce.key=9;break;case"A_SHARP":case 10:ce.key=10;break;case"B_FLAT":case 10:ce.key=10;break;case"B":case 11:ce.key=11;break}switch(ae.mode){case"MAJOR":case 0:ce.mode=0;break;case"MINOR":case 1:ce.mode=1;break;case"NOT_SPECIFIED":case 2:ce.mode=2;break;case"MIXOLYDIAN":case 3:ce.mode=3;break;case"DORIAN":case 4:ce.mode=4;break;case"PHRYGIAN":case 5:ce.mode=5;break;case"LYDIAN":case 6:ce.mode=6;break;case"LOCRIAN":case 7:ce.mode=7;break}return ce},ie.toObject=function(ae,ce){ce||(ce={});var le={};return ce.defaults&&(le.time=0,le.key=ce.enums===String?"C":0,le.mode=ce.enums===String?"MAJOR":0),ae.time!=null&&ae.hasOwnProperty("time")&&(le.time=ce.json&&!isFinite(ae.time)?String(ae.time):ae.time),ae.key!=null&&ae.hasOwnProperty("key")&&(le.key=ce.enums===String?$root.tensorflow.magenta.NoteSequence.KeySignature.Key[ae.key]:ae.key),ae.mode!=null&&ae.hasOwnProperty("mode")&&(le.mode=ce.enums===String?$root.tensorflow.magenta.NoteSequence.KeySignature.Mode[ae.mode]:ae.mode),le},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie.Key=function(){var oe={},ae=Object.create(oe);return ae[oe[0]="C"]=0,ae[oe[1]="C_SHARP"]=1,ae.D_FLAT=1,ae[oe[2]="D"]=2,ae[oe[3]="D_SHARP"]=3,ae.E_FLAT=3,ae[oe[4]="E"]=4,ae[oe[5]="F"]=5,ae[oe[6]="F_SHARP"]=6,ae.G_FLAT=6,ae[oe[7]="G"]=7,ae[oe[8]="G_SHARP"]=8,ae.A_FLAT=8,ae[oe[9]="A"]=9,ae[oe[10]="A_SHARP"]=10,ae.B_FLAT=10,ae[oe[11]="B"]=11,ae}(),ie.Mode=function(){var oe={},ae=Object.create(oe);return ae[oe[0]="MAJOR"]=0,ae[oe[1]="MINOR"]=1,ae[oe[2]="NOT_SPECIFIED"]=2,ae[oe[3]="MIXOLYDIAN"]=3,ae[oe[4]="DORIAN"]=4,ae[oe[5]="PHRYGIAN"]=5,ae[oe[6]="LYDIAN"]=6,ae[oe[7]="LOCRIAN"]=7,ae}(),ie}(),ne.Tempo=function(){function ie(oe){if(oe)for(var ae=Object.keys(oe),ce=0;ce<ae.length;++ce)oe[ae[ce]]!=null&&(this[ae[ce]]=oe[ae[ce]])}return ie.prototype.time=0,ie.prototype.qpm=0,ie.create=function(ae){return new ie(ae)},ie.encode=function(ae,ce){return ce||(ce=$Writer.create()),ae.time!=null&&ae.hasOwnProperty("time")&&ce.uint32(9).double(ae.time),ae.qpm!=null&&ae.hasOwnProperty("qpm")&&ce.uint32(17).double(ae.qpm),ce},ie.encodeDelimited=function(ae,ce){return this.encode(ae,ce).ldelim()},ie.decode=function(ae,ce){ae instanceof $Reader||(ae=$Reader.create(ae));for(var le=ce===void 0?ae.len:ae.pos+ce,ue=new $root.tensorflow.magenta.NoteSequence.Tempo;ae.pos<le;){var he=ae.uint32();switch(he>>>3){case 1:ue.time=ae.double();break;case 2:ue.qpm=ae.double();break;default:ae.skipType(he&7);break}}return ue},ie.decodeDelimited=function(ae){return ae instanceof $Reader||(ae=new $Reader(ae)),this.decode(ae,ae.uint32())},ie.verify=function(ae){return typeof ae!="object"||ae===null?"object expected":ae.time!=null&&ae.hasOwnProperty("time")&&typeof ae.time!="number"?"time: number expected":ae.qpm!=null&&ae.hasOwnProperty("qpm")&&typeof ae.qpm!="number"?"qpm: number expected":null},ie.fromObject=function(ae){if(ae instanceof $root.tensorflow.magenta.NoteSequence.Tempo)return ae;var ce=new $root.tensorflow.magenta.NoteSequence.Tempo;return ae.time!=null&&(ce.time=Number(ae.time)),ae.qpm!=null&&(ce.qpm=Number(ae.qpm)),ce},ie.toObject=function(ae,ce){ce||(ce={});var le={};return ce.defaults&&(le.time=0,le.qpm=0),ae.time!=null&&ae.hasOwnProperty("time")&&(le.time=ce.json&&!isFinite(ae.time)?String(ae.time):ae.time),ae.qpm!=null&&ae.hasOwnProperty("qpm")&&(le.qpm=ce.json&&!isFinite(ae.qpm)?String(ae.qpm):ae.qpm),le},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie}(),ne.PitchBend=function(){function ie(oe){if(oe)for(var ae=Object.keys(oe),ce=0;ce<ae.length;++ce)oe[ae[ce]]!=null&&(this[ae[ce]]=oe[ae[ce]])}return ie.prototype.time=0,ie.prototype.bend=0,ie.prototype.instrument=0,ie.prototype.program=0,ie.prototype.isDrum=!1,ie.create=function(ae){return new ie(ae)},ie.encode=function(ae,ce){return ce||(ce=$Writer.create()),ae.time!=null&&ae.hasOwnProperty("time")&&ce.uint32(9).double(ae.time),ae.bend!=null&&ae.hasOwnProperty("bend")&&ce.uint32(16).int32(ae.bend),ae.instrument!=null&&ae.hasOwnProperty("instrument")&&ce.uint32(24).int32(ae.instrument),ae.program!=null&&ae.hasOwnProperty("program")&&ce.uint32(32).int32(ae.program),ae.isDrum!=null&&ae.hasOwnProperty("isDrum")&&ce.uint32(40).bool(ae.isDrum),ce},ie.encodeDelimited=function(ae,ce){return this.encode(ae,ce).ldelim()},ie.decode=function(ae,ce){ae instanceof $Reader||(ae=$Reader.create(ae));for(var le=ce===void 0?ae.len:ae.pos+ce,ue=new $root.tensorflow.magenta.NoteSequence.PitchBend;ae.pos<le;){var he=ae.uint32();switch(he>>>3){case 1:ue.time=ae.double();break;case 2:ue.bend=ae.int32();break;case 3:ue.instrument=ae.int32();break;case 4:ue.program=ae.int32();break;case 5:ue.isDrum=ae.bool();break;default:ae.skipType(he&7);break}}return ue},ie.decodeDelimited=function(ae){return ae instanceof $Reader||(ae=new $Reader(ae)),this.decode(ae,ae.uint32())},ie.verify=function(ae){return typeof ae!="object"||ae===null?"object expected":ae.time!=null&&ae.hasOwnProperty("time")&&typeof ae.time!="number"?"time: number expected":ae.bend!=null&&ae.hasOwnProperty("bend")&&!$util.isInteger(ae.bend)?"bend: integer expected":ae.instrument!=null&&ae.hasOwnProperty("instrument")&&!$util.isInteger(ae.instrument)?"instrument: integer expected":ae.program!=null&&ae.hasOwnProperty("program")&&!$util.isInteger(ae.program)?"program: integer expected":ae.isDrum!=null&&ae.hasOwnProperty("isDrum")&&typeof ae.isDrum!="boolean"?"isDrum: boolean expected":null},ie.fromObject=function(ae){if(ae instanceof $root.tensorflow.magenta.NoteSequence.PitchBend)return ae;var ce=new $root.tensorflow.magenta.NoteSequence.PitchBend;return ae.time!=null&&(ce.time=Number(ae.time)),ae.bend!=null&&(ce.bend=ae.bend|0),ae.instrument!=null&&(ce.instrument=ae.instrument|0),ae.program!=null&&(ce.program=ae.program|0),ae.isDrum!=null&&(ce.isDrum=!!ae.isDrum),ce},ie.toObject=function(ae,ce){ce||(ce={});var le={};return ce.defaults&&(le.time=0,le.bend=0,le.instrument=0,le.program=0,le.isDrum=!1),ae.time!=null&&ae.hasOwnProperty("time")&&(le.time=ce.json&&!isFinite(ae.time)?String(ae.time):ae.time),ae.bend!=null&&ae.hasOwnProperty("bend")&&(le.bend=ae.bend),ae.instrument!=null&&ae.hasOwnProperty("instrument")&&(le.instrument=ae.instrument),ae.program!=null&&ae.hasOwnProperty("program")&&(le.program=ae.program),ae.isDrum!=null&&ae.hasOwnProperty("isDrum")&&(le.isDrum=ae.isDrum),le},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie}(),ne.ControlChange=function(){function ie(oe){if(oe)for(var ae=Object.keys(oe),ce=0;ce<ae.length;++ce)oe[ae[ce]]!=null&&(this[ae[ce]]=oe[ae[ce]])}return ie.prototype.time=0,ie.prototype.quantizedStep=$util.Long?$util.Long.fromBits(0,0,!1):0,ie.prototype.controlNumber=0,ie.prototype.controlValue=0,ie.prototype.instrument=0,ie.prototype.program=0,ie.prototype.isDrum=!1,ie.create=function(ae){return new ie(ae)},ie.encode=function(ae,ce){return ce||(ce=$Writer.create()),ae.time!=null&&ae.hasOwnProperty("time")&&ce.uint32(9).double(ae.time),ae.controlNumber!=null&&ae.hasOwnProperty("controlNumber")&&ce.uint32(16).int32(ae.controlNumber),ae.controlValue!=null&&ae.hasOwnProperty("controlValue")&&ce.uint32(24).int32(ae.controlValue),ae.instrument!=null&&ae.hasOwnProperty("instrument")&&ce.uint32(32).int32(ae.instrument),ae.program!=null&&ae.hasOwnProperty("program")&&ce.uint32(40).int32(ae.program),ae.isDrum!=null&&ae.hasOwnProperty("isDrum")&&ce.uint32(48).bool(ae.isDrum),ae.quantizedStep!=null&&ae.hasOwnProperty("quantizedStep")&&ce.uint32(56).int64(ae.quantizedStep),ce},ie.encodeDelimited=function(ae,ce){return this.encode(ae,ce).ldelim()},ie.decode=function(ae,ce){ae instanceof $Reader||(ae=$Reader.create(ae));for(var le=ce===void 0?ae.len:ae.pos+ce,ue=new $root.tensorflow.magenta.NoteSequence.ControlChange;ae.pos<le;){var he=ae.uint32();switch(he>>>3){case 1:ue.time=ae.double();break;case 7:ue.quantizedStep=$util.Long?ae.int64().toNumber():ae.int64();break;case 2:ue.controlNumber=ae.int32();break;case 3:ue.controlValue=ae.int32();break;case 4:ue.instrument=ae.int32();break;case 5:ue.program=ae.int32();break;case 6:ue.isDrum=ae.bool();break;default:ae.skipType(he&7);break}}return ue},ie.decodeDelimited=function(ae){return ae instanceof $Reader||(ae=new $Reader(ae)),this.decode(ae,ae.uint32())},ie.verify=function(ae){return typeof ae!="object"||ae===null?"object expected":ae.time!=null&&ae.hasOwnProperty("time")&&typeof ae.time!="number"?"time: number expected":ae.quantizedStep!=null&&ae.hasOwnProperty("quantizedStep")&&!$util.isInteger(ae.quantizedStep)&&!(ae.quantizedStep&&$util.isInteger(ae.quantizedStep.low)&&$util.isInteger(ae.quantizedStep.high))?"quantizedStep: integer|Long expected":ae.controlNumber!=null&&ae.hasOwnProperty("controlNumber")&&!$util.isInteger(ae.controlNumber)?"controlNumber: integer expected":ae.controlValue!=null&&ae.hasOwnProperty("controlValue")&&!$util.isInteger(ae.controlValue)?"controlValue: integer expected":ae.instrument!=null&&ae.hasOwnProperty("instrument")&&!$util.isInteger(ae.instrument)?"instrument: integer expected":ae.program!=null&&ae.hasOwnProperty("program")&&!$util.isInteger(ae.program)?"program: integer expected":ae.isDrum!=null&&ae.hasOwnProperty("isDrum")&&typeof ae.isDrum!="boolean"?"isDrum: boolean expected":null},ie.fromObject=function(ae){if(ae instanceof $root.tensorflow.magenta.NoteSequence.ControlChange)return ae;var ce=new $root.tensorflow.magenta.NoteSequence.ControlChange;return ae.time!=null&&(ce.time=Number(ae.time)),ae.quantizedStep!=null&&($util.Long?(ce.quantizedStep=$util.Long.fromValue(ae.quantizedStep)).unsigned=!1:typeof ae.quantizedStep=="string"?ce.quantizedStep=parseInt(ae.quantizedStep,10):typeof ae.quantizedStep=="number"?ce.quantizedStep=ae.quantizedStep:typeof ae.quantizedStep=="object"&&(ce.quantizedStep=new $util.LongBits(ae.quantizedStep.low>>>0,ae.quantizedStep.high>>>0).toNumber())),ae.controlNumber!=null&&(ce.controlNumber=ae.controlNumber|0),ae.controlValue!=null&&(ce.controlValue=ae.controlValue|0),ae.instrument!=null&&(ce.instrument=ae.instrument|0),ae.program!=null&&(ce.program=ae.program|0),ae.isDrum!=null&&(ce.isDrum=!!ae.isDrum),ce},ie.toObject=function(ae,ce){ce||(ce={});var le={};if(ce.defaults)if(le.time=0,le.controlNumber=0,le.controlValue=0,le.instrument=0,le.program=0,le.isDrum=!1,$util.Long){var ue=new $util.Long(0,0,!1);le.quantizedStep=ce.longs===String?ue.toString():ce.longs===Number?ue.toNumber():ue}else le.quantizedStep=ce.longs===String?"0":0;return ae.time!=null&&ae.hasOwnProperty("time")&&(le.time=ce.json&&!isFinite(ae.time)?String(ae.time):ae.time),ae.controlNumber!=null&&ae.hasOwnProperty("controlNumber")&&(le.controlNumber=ae.controlNumber),ae.controlValue!=null&&ae.hasOwnProperty("controlValue")&&(le.controlValue=ae.controlValue),ae.instrument!=null&&ae.hasOwnProperty("instrument")&&(le.instrument=ae.instrument),ae.program!=null&&ae.hasOwnProperty("program")&&(le.program=ae.program),ae.isDrum!=null&&ae.hasOwnProperty("isDrum")&&(le.isDrum=ae.isDrum),ae.quantizedStep!=null&&ae.hasOwnProperty("quantizedStep")&&(typeof ae.quantizedStep=="number"?le.quantizedStep=ce.longs===String?String(ae.quantizedStep):ae.quantizedStep:le.quantizedStep=ce.longs===String?$util.Long.prototype.toString.call(ae.quantizedStep):ce.longs===Number?new $util.LongBits(ae.quantizedStep.low>>>0,ae.quantizedStep.high>>>0).toNumber():ae.quantizedStep),le},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie}(),ne.PartInfo=function(){function ie(oe){if(oe)for(var ae=Object.keys(oe),ce=0;ce<ae.length;++ce)oe[ae[ce]]!=null&&(this[ae[ce]]=oe[ae[ce]])}return ie.prototype.part=0,ie.prototype.name="",ie.create=function(ae){return new ie(ae)},ie.encode=function(ae,ce){return ce||(ce=$Writer.create()),ae.part!=null&&ae.hasOwnProperty("part")&&ce.uint32(8).int32(ae.part),ae.name!=null&&ae.hasOwnProperty("name")&&ce.uint32(18).string(ae.name),ce},ie.encodeDelimited=function(ae,ce){return this.encode(ae,ce).ldelim()},ie.decode=function(ae,ce){ae instanceof $Reader||(ae=$Reader.create(ae));for(var le=ce===void 0?ae.len:ae.pos+ce,ue=new $root.tensorflow.magenta.NoteSequence.PartInfo;ae.pos<le;){var he=ae.uint32();switch(he>>>3){case 1:ue.part=ae.int32();break;case 2:ue.name=ae.string();break;default:ae.skipType(he&7);break}}return ue},ie.decodeDelimited=function(ae){return ae instanceof $Reader||(ae=new $Reader(ae)),this.decode(ae,ae.uint32())},ie.verify=function(ae){return typeof ae!="object"||ae===null?"object expected":ae.part!=null&&ae.hasOwnProperty("part")&&!$util.isInteger(ae.part)?"part: integer expected":ae.name!=null&&ae.hasOwnProperty("name")&&!$util.isString(ae.name)?"name: string expected":null},ie.fromObject=function(ae){if(ae instanceof $root.tensorflow.magenta.NoteSequence.PartInfo)return ae;var ce=new $root.tensorflow.magenta.NoteSequence.PartInfo;return ae.part!=null&&(ce.part=ae.part|0),ae.name!=null&&(ce.name=String(ae.name)),ce},ie.toObject=function(ae,ce){ce||(ce={});var le={};return ce.defaults&&(le.part=0,le.name=""),ae.part!=null&&ae.hasOwnProperty("part")&&(le.part=ae.part),ae.name!=null&&ae.hasOwnProperty("name")&&(le.name=ae.name),le},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie}(),ne.SourceInfo=function(){function ie(oe){if(oe)for(var ae=Object.keys(oe),ce=0;ce<ae.length;++ce)oe[ae[ce]]!=null&&(this[ae[ce]]=oe[ae[ce]])}return ie.prototype.sourceType=0,ie.prototype.encodingType=0,ie.prototype.parser=0,ie.create=function(ae){return new ie(ae)},ie.encode=function(ae,ce){return ce||(ce=$Writer.create()),ae.sourceType!=null&&ae.hasOwnProperty("sourceType")&&ce.uint32(8).int32(ae.sourceType),ae.encodingType!=null&&ae.hasOwnProperty("encodingType")&&ce.uint32(16).int32(ae.encodingType),ae.parser!=null&&ae.hasOwnProperty("parser")&&ce.uint32(24).int32(ae.parser),ce},ie.encodeDelimited=function(ae,ce){return this.encode(ae,ce).ldelim()},ie.decode=function(ae,ce){ae instanceof $Reader||(ae=$Reader.create(ae));for(var le=ce===void 0?ae.len:ae.pos+ce,ue=new $root.tensorflow.magenta.NoteSequence.SourceInfo;ae.pos<le;){var he=ae.uint32();switch(he>>>3){case 1:ue.sourceType=ae.int32();break;case 2:ue.encodingType=ae.int32();break;case 3:ue.parser=ae.int32();break;default:ae.skipType(he&7);break}}return ue},ie.decodeDelimited=function(ae){return ae instanceof $Reader||(ae=new $Reader(ae)),this.decode(ae,ae.uint32())},ie.verify=function(ae){if(typeof ae!="object"||ae===null)return"object expected";if(ae.sourceType!=null&&ae.hasOwnProperty("sourceType"))switch(ae.sourceType){default:return"sourceType: enum value expected";case 0:case 1:case 2:break}if(ae.encodingType!=null&&ae.hasOwnProperty("encodingType"))switch(ae.encodingType){default:return"encodingType: enum value expected";case 0:case 1:case 2:case 3:case 4:break}if(ae.parser!=null&&ae.hasOwnProperty("parser"))switch(ae.parser){default:return"parser: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 6:break}return null},ie.fromObject=function(ae){if(ae instanceof $root.tensorflow.magenta.NoteSequence.SourceInfo)return ae;var ce=new $root.tensorflow.magenta.NoteSequence.SourceInfo;switch(ae.sourceType){case"UNKNOWN_SOURCE_TYPE":case 0:ce.sourceType=0;break;case"SCORE_BASED":case 1:ce.sourceType=1;break;case"PERFORMANCE_BASED":case 2:ce.sourceType=2;break}switch(ae.encodingType){case"UNKNOWN_ENCODING_TYPE":case 0:ce.encodingType=0;break;case"MUSIC_XML":case 1:ce.encodingType=1;break;case"ABC":case 2:ce.encodingType=2;break;case"MIDI":case 3:ce.encodingType=3;break;case"MUSICNET":case 4:ce.encodingType=4;break}switch(ae.parser){case"UNKNOWN_PARSER":case 0:ce.parser=0;break;case"MUSIC21":case 1:ce.parser=1;break;case"PRETTY_MIDI":case 2:ce.parser=2;break;case"MAGENTA_MUSIC_XML":case 3:ce.parser=3;break;case"MAGENTA_MUSICNET":case 4:ce.parser=4;break;case"MAGENTA_ABC":case 5:ce.parser=5;break;case"TONEJS_MIDI_CONVERT":case 6:ce.parser=6;break}return ce},ie.toObject=function(ae,ce){ce||(ce={});var le={};return ce.defaults&&(le.sourceType=ce.enums===String?"UNKNOWN_SOURCE_TYPE":0,le.encodingType=ce.enums===String?"UNKNOWN_ENCODING_TYPE":0,le.parser=ce.enums===String?"UNKNOWN_PARSER":0),ae.sourceType!=null&&ae.hasOwnProperty("sourceType")&&(le.sourceType=ce.enums===String?$root.tensorflow.magenta.NoteSequence.SourceInfo.SourceType[ae.sourceType]:ae.sourceType),ae.encodingType!=null&&ae.hasOwnProperty("encodingType")&&(le.encodingType=ce.enums===String?$root.tensorflow.magenta.NoteSequence.SourceInfo.EncodingType[ae.encodingType]:ae.encodingType),ae.parser!=null&&ae.hasOwnProperty("parser")&&(le.parser=ce.enums===String?$root.tensorflow.magenta.NoteSequence.SourceInfo.Parser[ae.parser]:ae.parser),le},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie.SourceType=function(){var oe={},ae=Object.create(oe);return ae[oe[0]="UNKNOWN_SOURCE_TYPE"]=0,ae[oe[1]="SCORE_BASED"]=1,ae[oe[2]="PERFORMANCE_BASED"]=2,ae}(),ie.EncodingType=function(){var oe={},ae=Object.create(oe);return ae[oe[0]="UNKNOWN_ENCODING_TYPE"]=0,ae[oe[1]="MUSIC_XML"]=1,ae[oe[2]="ABC"]=2,ae[oe[3]="MIDI"]=3,ae[oe[4]="MUSICNET"]=4,ae}(),ie.Parser=function(){var oe={},ae=Object.create(oe);return ae[oe[0]="UNKNOWN_PARSER"]=0,ae[oe[1]="MUSIC21"]=1,ae[oe[2]="PRETTY_MIDI"]=2,ae[oe[3]="MAGENTA_MUSIC_XML"]=3,ae[oe[4]="MAGENTA_MUSICNET"]=4,ae[oe[5]="MAGENTA_ABC"]=5,ae[oe[6]="TONEJS_MIDI_CONVERT"]=6,ae}(),ie}(),ne.TextAnnotation=function(){function ie(oe){if(oe)for(var ae=Object.keys(oe),ce=0;ce<ae.length;++ce)oe[ae[ce]]!=null&&(this[ae[ce]]=oe[ae[ce]])}return ie.prototype.time=0,ie.prototype.quantizedStep=$util.Long?$util.Long.fromBits(0,0,!1):0,ie.prototype.text="",ie.prototype.annotationType=0,ie.create=function(ae){return new ie(ae)},ie.encode=function(ae,ce){return ce||(ce=$Writer.create()),ae.time!=null&&ae.hasOwnProperty("time")&&ce.uint32(9).double(ae.time),ae.text!=null&&ae.hasOwnProperty("text")&&ce.uint32(18).string(ae.text),ae.annotationType!=null&&ae.hasOwnProperty("annotationType")&&ce.uint32(24).int32(ae.annotationType),ae.quantizedStep!=null&&ae.hasOwnProperty("quantizedStep")&&ce.uint32(32).int64(ae.quantizedStep),ce},ie.encodeDelimited=function(ae,ce){return this.encode(ae,ce).ldelim()},ie.decode=function(ae,ce){ae instanceof $Reader||(ae=$Reader.create(ae));for(var le=ce===void 0?ae.len:ae.pos+ce,ue=new $root.tensorflow.magenta.NoteSequence.TextAnnotation;ae.pos<le;){var he=ae.uint32();switch(he>>>3){case 1:ue.time=ae.double();break;case 4:ue.quantizedStep=$util.Long?ae.int64().toNumber():ae.int64();break;case 2:ue.text=ae.string();break;case 3:ue.annotationType=ae.int32();break;default:ae.skipType(he&7);break}}return ue},ie.decodeDelimited=function(ae){return ae instanceof $Reader||(ae=new $Reader(ae)),this.decode(ae,ae.uint32())},ie.verify=function(ae){if(typeof ae!="object"||ae===null)return"object expected";if(ae.time!=null&&ae.hasOwnProperty("time")&&typeof ae.time!="number")return"time: number expected";if(ae.quantizedStep!=null&&ae.hasOwnProperty("quantizedStep")&&!$util.isInteger(ae.quantizedStep)&&!(ae.quantizedStep&&$util.isInteger(ae.quantizedStep.low)&&$util.isInteger(ae.quantizedStep.high)))return"quantizedStep: integer|Long expected";if(ae.text!=null&&ae.hasOwnProperty("text")&&!$util.isString(ae.text))return"text: string expected";if(ae.annotationType!=null&&ae.hasOwnProperty("annotationType"))switch(ae.annotationType){default:return"annotationType: enum value expected";case 0:case 1:case 2:break}return null},ie.fromObject=function(ae){if(ae instanceof $root.tensorflow.magenta.NoteSequence.TextAnnotation)return ae;var ce=new $root.tensorflow.magenta.NoteSequence.TextAnnotation;switch(ae.time!=null&&(ce.time=Number(ae.time)),ae.quantizedStep!=null&&($util.Long?(ce.quantizedStep=$util.Long.fromValue(ae.quantizedStep)).unsigned=!1:typeof ae.quantizedStep=="string"?ce.quantizedStep=parseInt(ae.quantizedStep,10):typeof ae.quantizedStep=="number"?ce.quantizedStep=ae.quantizedStep:typeof ae.quantizedStep=="object"&&(ce.quantizedStep=new $util.LongBits(ae.quantizedStep.low>>>0,ae.quantizedStep.high>>>0).toNumber())),ae.text!=null&&(ce.text=String(ae.text)),ae.annotationType){case"UNKNOWN":case 0:ce.annotationType=0;break;case"CHORD_SYMBOL":case 1:ce.annotationType=1;break;case"BEAT":case 2:ce.annotationType=2;break}return ce},ie.toObject=function(ae,ce){ce||(ce={});var le={};if(ce.defaults)if(le.time=0,le.text="",le.annotationType=ce.enums===String?"UNKNOWN":0,$util.Long){var ue=new $util.Long(0,0,!1);le.quantizedStep=ce.longs===String?ue.toString():ce.longs===Number?ue.toNumber():ue}else le.quantizedStep=ce.longs===String?"0":0;return ae.time!=null&&ae.hasOwnProperty("time")&&(le.time=ce.json&&!isFinite(ae.time)?String(ae.time):ae.time),ae.text!=null&&ae.hasOwnProperty("text")&&(le.text=ae.text),ae.annotationType!=null&&ae.hasOwnProperty("annotationType")&&(le.annotationType=ce.enums===String?$root.tensorflow.magenta.NoteSequence.TextAnnotation.TextAnnotationType[ae.annotationType]:ae.annotationType),ae.quantizedStep!=null&&ae.hasOwnProperty("quantizedStep")&&(typeof ae.quantizedStep=="number"?le.quantizedStep=ce.longs===String?String(ae.quantizedStep):ae.quantizedStep:le.quantizedStep=ce.longs===String?$util.Long.prototype.toString.call(ae.quantizedStep):ce.longs===Number?new $util.LongBits(ae.quantizedStep.low>>>0,ae.quantizedStep.high>>>0).toNumber():ae.quantizedStep),le},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie.TextAnnotationType=function(){var oe={},ae=Object.create(oe);return ae[oe[0]="UNKNOWN"]=0,ae[oe[1]="CHORD_SYMBOL"]=1,ae[oe[2]="BEAT"]=2,ae}(),ie}(),ne.QuantizationInfo=function(){function ie(ae){if(ae)for(var ce=Object.keys(ae),le=0;le<ce.length;++le)ae[ce[le]]!=null&&(this[ce[le]]=ae[ce[le]])}ie.prototype.stepsPerQuarter=0,ie.prototype.stepsPerSecond=0;var oe;return Object.defineProperty(ie.prototype,"resolution",{get:$util.oneOfGetter(oe=["stepsPerQuarter","stepsPerSecond"]),set:$util.oneOfSetter(oe)}),ie.create=function(ce){return new ie(ce)},ie.encode=function(ce,le){return le||(le=$Writer.create()),ce.stepsPerQuarter!=null&&ce.hasOwnProperty("stepsPerQuarter")&&le.uint32(8).int32(ce.stepsPerQuarter),ce.stepsPerSecond!=null&&ce.hasOwnProperty("stepsPerSecond")&&le.uint32(16).int32(ce.stepsPerSecond),le},ie.encodeDelimited=function(ce,le){return this.encode(ce,le).ldelim()},ie.decode=function(ce,le){ce instanceof $Reader||(ce=$Reader.create(ce));for(var ue=le===void 0?ce.len:ce.pos+le,he=new $root.tensorflow.magenta.NoteSequence.QuantizationInfo;ce.pos<ue;){var fe=ce.uint32();switch(fe>>>3){case 1:he.stepsPerQuarter=ce.int32();break;case 2:he.stepsPerSecond=ce.int32();break;default:ce.skipType(fe&7);break}}return he},ie.decodeDelimited=function(ce){return ce instanceof $Reader||(ce=new $Reader(ce)),this.decode(ce,ce.uint32())},ie.verify=function(ce){if(typeof ce!="object"||ce===null)return"object expected";var le={};if(ce.stepsPerQuarter!=null&&ce.hasOwnProperty("stepsPerQuarter")&&(le.resolution=1,!$util.isInteger(ce.stepsPerQuarter)))return"stepsPerQuarter: integer expected";if(ce.stepsPerSecond!=null&&ce.hasOwnProperty("stepsPerSecond")){if(le.resolution===1)return"resolution: multiple values";if(le.resolution=1,!$util.isInteger(ce.stepsPerSecond))return"stepsPerSecond: integer expected"}return null},ie.fromObject=function(ce){if(ce instanceof $root.tensorflow.magenta.NoteSequence.QuantizationInfo)return ce;var le=new $root.tensorflow.magenta.NoteSequence.QuantizationInfo;return ce.stepsPerQuarter!=null&&(le.stepsPerQuarter=ce.stepsPerQuarter|0),ce.stepsPerSecond!=null&&(le.stepsPerSecond=ce.stepsPerSecond|0),le},ie.toObject=function(ce,le){le||(le={});var ue={};return ce.stepsPerQuarter!=null&&ce.hasOwnProperty("stepsPerQuarter")&&(ue.stepsPerQuarter=ce.stepsPerQuarter,le.oneofs&&(ue.resolution="stepsPerQuarter")),ce.stepsPerSecond!=null&&ce.hasOwnProperty("stepsPerSecond")&&(ue.stepsPerSecond=ce.stepsPerSecond,le.oneofs&&(ue.resolution="stepsPerSecond")),ue},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie}(),ne.SubsequenceInfo=function(){function ie(oe){if(oe)for(var ae=Object.keys(oe),ce=0;ce<ae.length;++ce)oe[ae[ce]]!=null&&(this[ae[ce]]=oe[ae[ce]])}return ie.prototype.startTimeOffset=0,ie.prototype.endTimeOffset=0,ie.create=function(ae){return new ie(ae)},ie.encode=function(ae,ce){return ce||(ce=$Writer.create()),ae.startTimeOffset!=null&&ae.hasOwnProperty("startTimeOffset")&&ce.uint32(9).double(ae.startTimeOffset),ae.endTimeOffset!=null&&ae.hasOwnProperty("endTimeOffset")&&ce.uint32(17).double(ae.endTimeOffset),ce},ie.encodeDelimited=function(ae,ce){return this.encode(ae,ce).ldelim()},ie.decode=function(ae,ce){ae instanceof $Reader||(ae=$Reader.create(ae));for(var le=ce===void 0?ae.len:ae.pos+ce,ue=new $root.tensorflow.magenta.NoteSequence.SubsequenceInfo;ae.pos<le;){var he=ae.uint32();switch(he>>>3){case 1:ue.startTimeOffset=ae.double();break;case 2:ue.endTimeOffset=ae.double();break;default:ae.skipType(he&7);break}}return ue},ie.decodeDelimited=function(ae){return ae instanceof $Reader||(ae=new $Reader(ae)),this.decode(ae,ae.uint32())},ie.verify=function(ae){return typeof ae!="object"||ae===null?"object expected":ae.startTimeOffset!=null&&ae.hasOwnProperty("startTimeOffset")&&typeof ae.startTimeOffset!="number"?"startTimeOffset: number expected":ae.endTimeOffset!=null&&ae.hasOwnProperty("endTimeOffset")&&typeof ae.endTimeOffset!="number"?"endTimeOffset: number expected":null},ie.fromObject=function(ae){if(ae instanceof $root.tensorflow.magenta.NoteSequence.SubsequenceInfo)return ae;var ce=new $root.tensorflow.magenta.NoteSequence.SubsequenceInfo;return ae.startTimeOffset!=null&&(ce.startTimeOffset=Number(ae.startTimeOffset)),ae.endTimeOffset!=null&&(ce.endTimeOffset=Number(ae.endTimeOffset)),ce},ie.toObject=function(ae,ce){ce||(ce={});var le={};return ce.defaults&&(le.startTimeOffset=0,le.endTimeOffset=0),ae.startTimeOffset!=null&&ae.hasOwnProperty("startTimeOffset")&&(le.startTimeOffset=ce.json&&!isFinite(ae.startTimeOffset)?String(ae.startTimeOffset):ae.startTimeOffset),ae.endTimeOffset!=null&&ae.hasOwnProperty("endTimeOffset")&&(le.endTimeOffset=ce.json&&!isFinite(ae.endTimeOffset)?String(ae.endTimeOffset):ae.endTimeOffset),le},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie}(),ne.SectionAnnotation=function(){function ie(oe){if(oe)for(var ae=Object.keys(oe),ce=0;ce<ae.length;++ce)oe[ae[ce]]!=null&&(this[ae[ce]]=oe[ae[ce]])}return ie.prototype.time=0,ie.prototype.sectionId=$util.Long?$util.Long.fromBits(0,0,!1):0,ie.create=function(ae){return new ie(ae)},ie.encode=function(ae,ce){return ce||(ce=$Writer.create()),ae.time!=null&&ae.hasOwnProperty("time")&&ce.uint32(9).double(ae.time),ae.sectionId!=null&&ae.hasOwnProperty("sectionId")&&ce.uint32(32).int64(ae.sectionId),ce},ie.encodeDelimited=function(ae,ce){return this.encode(ae,ce).ldelim()},ie.decode=function(ae,ce){ae instanceof $Reader||(ae=$Reader.create(ae));for(var le=ce===void 0?ae.len:ae.pos+ce,ue=new $root.tensorflow.magenta.NoteSequence.SectionAnnotation;ae.pos<le;){var he=ae.uint32();switch(he>>>3){case 1:ue.time=ae.double();break;case 4:ue.sectionId=$util.Long?ae.int64().toNumber():ae.int64();break;default:ae.skipType(he&7);break}}return ue},ie.decodeDelimited=function(ae){return ae instanceof $Reader||(ae=new $Reader(ae)),this.decode(ae,ae.uint32())},ie.verify=function(ae){return typeof ae!="object"||ae===null?"object expected":ae.time!=null&&ae.hasOwnProperty("time")&&typeof ae.time!="number"?"time: number expected":ae.sectionId!=null&&ae.hasOwnProperty("sectionId")&&!$util.isInteger(ae.sectionId)&&!(ae.sectionId&&$util.isInteger(ae.sectionId.low)&&$util.isInteger(ae.sectionId.high))?"sectionId: integer|Long expected":null},ie.fromObject=function(ae){if(ae instanceof $root.tensorflow.magenta.NoteSequence.SectionAnnotation)return ae;var ce=new $root.tensorflow.magenta.NoteSequence.SectionAnnotation;return ae.time!=null&&(ce.time=Number(ae.time)),ae.sectionId!=null&&($util.Long?(ce.sectionId=$util.Long.fromValue(ae.sectionId)).unsigned=!1:typeof ae.sectionId=="string"?ce.sectionId=parseInt(ae.sectionId,10):typeof ae.sectionId=="number"?ce.sectionId=ae.sectionId:typeof ae.sectionId=="object"&&(ce.sectionId=new $util.LongBits(ae.sectionId.low>>>0,ae.sectionId.high>>>0).toNumber())),ce},ie.toObject=function(ae,ce){ce||(ce={});var le={};if(ce.defaults)if(le.time=0,$util.Long){var ue=new $util.Long(0,0,!1);le.sectionId=ce.longs===String?ue.toString():ce.longs===Number?ue.toNumber():ue}else le.sectionId=ce.longs===String?"0":0;return ae.time!=null&&ae.hasOwnProperty("time")&&(le.time=ce.json&&!isFinite(ae.time)?String(ae.time):ae.time),ae.sectionId!=null&&ae.hasOwnProperty("sectionId")&&(typeof ae.sectionId=="number"?le.sectionId=ce.longs===String?String(ae.sectionId):ae.sectionId:le.sectionId=ce.longs===String?$util.Long.prototype.toString.call(ae.sectionId):ce.longs===Number?new $util.LongBits(ae.sectionId.low>>>0,ae.sectionId.high>>>0).toNumber():ae.sectionId),le},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie}(),ne.Section=function(){function ie(ae){if(ae)for(var ce=Object.keys(ae),le=0;le<ce.length;++le)ae[ce[le]]!=null&&(this[ce[le]]=ae[ce[le]])}ie.prototype.sectionId=$util.Long?$util.Long.fromBits(0,0,!1):0,ie.prototype.sectionGroup=null;var oe;return Object.defineProperty(ie.prototype,"sectionType",{get:$util.oneOfGetter(oe=["sectionId","sectionGroup"]),set:$util.oneOfSetter(oe)}),ie.create=function(ce){return new ie(ce)},ie.encode=function(ce,le){return le||(le=$Writer.create()),ce.sectionId!=null&&ce.hasOwnProperty("sectionId")&&le.uint32(8).int64(ce.sectionId),ce.sectionGroup!=null&&ce.hasOwnProperty("sectionGroup")&&$root.tensorflow.magenta.NoteSequence.SectionGroup.encode(ce.sectionGroup,le.uint32(18).fork()).ldelim(),le},ie.encodeDelimited=function(ce,le){return this.encode(ce,le).ldelim()},ie.decode=function(ce,le){ce instanceof $Reader||(ce=$Reader.create(ce));for(var ue=le===void 0?ce.len:ce.pos+le,he=new $root.tensorflow.magenta.NoteSequence.Section;ce.pos<ue;){var fe=ce.uint32();switch(fe>>>3){case 1:he.sectionId=$util.Long?ce.int64().toNumber():ce.int64();break;case 2:he.sectionGroup=$root.tensorflow.magenta.NoteSequence.SectionGroup.decode(ce,ce.uint32());break;default:ce.skipType(fe&7);break}}return he},ie.decodeDelimited=function(ce){return ce instanceof $Reader||(ce=new $Reader(ce)),this.decode(ce,ce.uint32())},ie.verify=function(ce){if(typeof ce!="object"||ce===null)return"object expected";var le={};if(ce.sectionId!=null&&ce.hasOwnProperty("sectionId")&&(le.sectionType=1,!$util.isInteger(ce.sectionId)&&!(ce.sectionId&&$util.isInteger(ce.sectionId.low)&&$util.isInteger(ce.sectionId.high))))return"sectionId: integer|Long expected";if(ce.sectionGroup!=null&&ce.hasOwnProperty("sectionGroup")){if(le.sectionType===1)return"sectionType: multiple values";le.sectionType=1;{var ue=$root.tensorflow.magenta.NoteSequence.SectionGroup.verify(ce.sectionGroup);if(ue)return"sectionGroup."+ue}}return null},ie.fromObject=function(ce){if(ce instanceof $root.tensorflow.magenta.NoteSequence.Section)return ce;var le=new $root.tensorflow.magenta.NoteSequence.Section;if(ce.sectionId!=null&&($util.Long?(le.sectionId=$util.Long.fromValue(ce.sectionId)).unsigned=!1:typeof ce.sectionId=="string"?le.sectionId=parseInt(ce.sectionId,10):typeof ce.sectionId=="number"?le.sectionId=ce.sectionId:typeof ce.sectionId=="object"&&(le.sectionId=new $util.LongBits(ce.sectionId.low>>>0,ce.sectionId.high>>>0).toNumber())),ce.sectionGroup!=null){if(typeof ce.sectionGroup!="object")throw TypeError(".tensorflow.magenta.NoteSequence.Section.sectionGroup: object expected");le.sectionGroup=$root.tensorflow.magenta.NoteSequence.SectionGroup.fromObject(ce.sectionGroup)}return le},ie.toObject=function(ce,le){le||(le={});var ue={};return ce.sectionId!=null&&ce.hasOwnProperty("sectionId")&&(typeof ce.sectionId=="number"?ue.sectionId=le.longs===String?String(ce.sectionId):ce.sectionId:ue.sectionId=le.longs===String?$util.Long.prototype.toString.call(ce.sectionId):le.longs===Number?new $util.LongBits(ce.sectionId.low>>>0,ce.sectionId.high>>>0).toNumber():ce.sectionId,le.oneofs&&(ue.sectionType="sectionId")),ce.sectionGroup!=null&&ce.hasOwnProperty("sectionGroup")&&(ue.sectionGroup=$root.tensorflow.magenta.NoteSequence.SectionGroup.toObject(ce.sectionGroup,le),le.oneofs&&(ue.sectionType="sectionGroup")),ue},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie}(),ne.SectionGroup=function(){function ie(oe){if(this.sections=[],oe)for(var ae=Object.keys(oe),ce=0;ce<ae.length;++ce)oe[ae[ce]]!=null&&(this[ae[ce]]=oe[ae[ce]])}return ie.prototype.sections=$util.emptyArray,ie.prototype.numTimes=0,ie.create=function(ae){return new ie(ae)},ie.encode=function(ae,ce){if(ce||(ce=$Writer.create()),ae.sections!=null&&ae.sections.length)for(var le=0;le<ae.sections.length;++le)$root.tensorflow.magenta.NoteSequence.Section.encode(ae.sections[le],ce.uint32(10).fork()).ldelim();return ae.numTimes!=null&&ae.hasOwnProperty("numTimes")&&ce.uint32(16).int32(ae.numTimes),ce},ie.encodeDelimited=function(ae,ce){return this.encode(ae,ce).ldelim()},ie.decode=function(ae,ce){ae instanceof $Reader||(ae=$Reader.create(ae));for(var le=ce===void 0?ae.len:ae.pos+ce,ue=new $root.tensorflow.magenta.NoteSequence.SectionGroup;ae.pos<le;){var he=ae.uint32();switch(he>>>3){case 1:ue.sections&&ue.sections.length||(ue.sections=[]),ue.sections.push($root.tensorflow.magenta.NoteSequence.Section.decode(ae,ae.uint32()));break;case 2:ue.numTimes=ae.int32();break;default:ae.skipType(he&7);break}}return ue},ie.decodeDelimited=function(ae){return ae instanceof $Reader||(ae=new $Reader(ae)),this.decode(ae,ae.uint32())},ie.verify=function(ae){if(typeof ae!="object"||ae===null)return"object expected";if(ae.sections!=null&&ae.hasOwnProperty("sections")){if(!Array.isArray(ae.sections))return"sections: array expected";for(var ce=0;ce<ae.sections.length;++ce){var le=$root.tensorflow.magenta.NoteSequence.Section.verify(ae.sections[ce]);if(le)return"sections."+le}}return ae.numTimes!=null&&ae.hasOwnProperty("numTimes")&&!$util.isInteger(ae.numTimes)?"numTimes: integer expected":null},ie.fromObject=function(ae){if(ae instanceof $root.tensorflow.magenta.NoteSequence.SectionGroup)return ae;var ce=new $root.tensorflow.magenta.NoteSequence.SectionGroup;if(ae.sections){if(!Array.isArray(ae.sections))throw TypeError(".tensorflow.magenta.NoteSequence.SectionGroup.sections: array expected");ce.sections=[];for(var le=0;le<ae.sections.length;++le){if(typeof ae.sections[le]!="object")throw TypeError(".tensorflow.magenta.NoteSequence.SectionGroup.sections: object expected");ce.sections[le]=$root.tensorflow.magenta.NoteSequence.Section.fromObject(ae.sections[le])}}return ae.numTimes!=null&&(ce.numTimes=ae.numTimes|0),ce},ie.toObject=function(ae,ce){ce||(ce={});var le={};if((ce.arrays||ce.defaults)&&(le.sections=[]),ce.defaults&&(le.numTimes=0),ae.sections&&ae.sections.length){le.sections=[];for(var ue=0;ue<ae.sections.length;++ue)le.sections[ue]=$root.tensorflow.magenta.NoteSequence.Section.toObject(ae.sections[ue],ce)}return ae.numTimes!=null&&ae.hasOwnProperty("numTimes")&&(le.numTimes=ae.numTimes),le},ie.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ie}(),ne}(),ee.SequenceMetadata=function(){function ne(ie){if(this.genre=[],this.composers=[],ie)for(var oe=Object.keys(ie),ae=0;ae<oe.length;++ae)ie[oe[ae]]!=null&&(this[oe[ae]]=ie[oe[ae]])}return ne.prototype.title="",ne.prototype.artist="",ne.prototype.genre=$util.emptyArray,ne.prototype.composers=$util.emptyArray,ne.create=function(oe){return new ne(oe)},ne.encode=function(oe,ae){if(ae||(ae=$Writer.create()),oe.title!=null&&oe.hasOwnProperty("title")&&ae.uint32(10).string(oe.title),oe.artist!=null&&oe.hasOwnProperty("artist")&&ae.uint32(18).string(oe.artist),oe.genre!=null&&oe.genre.length)for(var ce=0;ce<oe.genre.length;++ce)ae.uint32(26).string(oe.genre[ce]);if(oe.composers!=null&&oe.composers.length)for(var ce=0;ce<oe.composers.length;++ce)ae.uint32(34).string(oe.composers[ce]);return ae},ne.encodeDelimited=function(oe,ae){return this.encode(oe,ae).ldelim()},ne.decode=function(oe,ae){oe instanceof $Reader||(oe=$Reader.create(oe));for(var ce=ae===void 0?oe.len:oe.pos+ae,le=new $root.tensorflow.magenta.SequenceMetadata;oe.pos<ce;){var ue=oe.uint32();switch(ue>>>3){case 1:le.title=oe.string();break;case 2:le.artist=oe.string();break;case 3:le.genre&&le.genre.length||(le.genre=[]),le.genre.push(oe.string());break;case 4:le.composers&&le.composers.length||(le.composers=[]),le.composers.push(oe.string());break;default:oe.skipType(ue&7);break}}return le},ne.decodeDelimited=function(oe){return oe instanceof $Reader||(oe=new $Reader(oe)),this.decode(oe,oe.uint32())},ne.verify=function(oe){if(typeof oe!="object"||oe===null)return"object expected";if(oe.title!=null&&oe.hasOwnProperty("title")&&!$util.isString(oe.title))return"title: string expected";if(oe.artist!=null&&oe.hasOwnProperty("artist")&&!$util.isString(oe.artist))return"artist: string expected";if(oe.genre!=null&&oe.hasOwnProperty("genre")){if(!Array.isArray(oe.genre))return"genre: array expected";for(var ae=0;ae<oe.genre.length;++ae)if(!$util.isString(oe.genre[ae]))return"genre: string[] expected"}if(oe.composers!=null&&oe.hasOwnProperty("composers")){if(!Array.isArray(oe.composers))return"composers: array expected";for(var ae=0;ae<oe.composers.length;++ae)if(!$util.isString(oe.composers[ae]))return"composers: string[] expected"}return null},ne.fromObject=function(oe){if(oe instanceof $root.tensorflow.magenta.SequenceMetadata)return oe;var ae=new $root.tensorflow.magenta.SequenceMetadata;if(oe.title!=null&&(ae.title=String(oe.title)),oe.artist!=null&&(ae.artist=String(oe.artist)),oe.genre){if(!Array.isArray(oe.genre))throw TypeError(".tensorflow.magenta.SequenceMetadata.genre: array expected");ae.genre=[];for(var ce=0;ce<oe.genre.length;++ce)ae.genre[ce]=String(oe.genre[ce])}if(oe.composers){if(!Array.isArray(oe.composers))throw TypeError(".tensorflow.magenta.SequenceMetadata.composers: array expected");ae.composers=[];for(var ce=0;ce<oe.composers.length;++ce)ae.composers[ce]=String(oe.composers[ce])}return ae},ne.toObject=function(oe,ae){ae||(ae={});var ce={};if((ae.arrays||ae.defaults)&&(ce.genre=[],ce.composers=[]),ae.defaults&&(ce.title="",ce.artist=""),oe.title!=null&&oe.hasOwnProperty("title")&&(ce.title=oe.title),oe.artist!=null&&oe.hasOwnProperty("artist")&&(ce.artist=oe.artist),oe.genre&&oe.genre.length){ce.genre=[];for(var le=0;le<oe.genre.length;++le)ce.genre[le]=oe.genre[le]}if(oe.composers&&oe.composers.length){ce.composers=[];for(var le=0;le<oe.composers.length;++le)ce.composers[le]=oe.composers[le]}return ce},ne.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ne}(),ee.VelocityRange=function(){function ne(ie){if(ie)for(var oe=Object.keys(ie),ae=0;ae<oe.length;++ae)ie[oe[ae]]!=null&&(this[oe[ae]]=ie[oe[ae]])}return ne.prototype.min=0,ne.prototype.max=0,ne.create=function(oe){return new ne(oe)},ne.encode=function(oe,ae){return ae||(ae=$Writer.create()),oe.min!=null&&oe.hasOwnProperty("min")&&ae.uint32(8).int32(oe.min),oe.max!=null&&oe.hasOwnProperty("max")&&ae.uint32(16).int32(oe.max),ae},ne.encodeDelimited=function(oe,ae){return this.encode(oe,ae).ldelim()},ne.decode=function(oe,ae){oe instanceof $Reader||(oe=$Reader.create(oe));for(var ce=ae===void 0?oe.len:oe.pos+ae,le=new $root.tensorflow.magenta.VelocityRange;oe.pos<ce;){var ue=oe.uint32();switch(ue>>>3){case 1:le.min=oe.int32();break;case 2:le.max=oe.int32();break;default:oe.skipType(ue&7);break}}return le},ne.decodeDelimited=function(oe){return oe instanceof $Reader||(oe=new $Reader(oe)),this.decode(oe,oe.uint32())},ne.verify=function(oe){return typeof oe!="object"||oe===null?"object expected":oe.min!=null&&oe.hasOwnProperty("min")&&!$util.isInteger(oe.min)?"min: integer expected":oe.max!=null&&oe.hasOwnProperty("max")&&!$util.isInteger(oe.max)?"max: integer expected":null},ne.fromObject=function(oe){if(oe instanceof $root.tensorflow.magenta.VelocityRange)return oe;var ae=new $root.tensorflow.magenta.VelocityRange;return oe.min!=null&&(ae.min=oe.min|0),oe.max!=null&&(ae.max=oe.max|0),ae},ne.toObject=function(oe,ae){ae||(ae={});var ce={};return ae.defaults&&(ce.min=0,ce.max=0),oe.min!=null&&oe.hasOwnProperty("min")&&(ce.min=oe.min),oe.max!=null&&oe.hasOwnProperty("max")&&(ce.max=oe.max),ce},ne.prototype.toJSON=function(){return this.constructor.toObject(this,$protobuf.util.toJSONOptions)},ne}(),ee}(),re}();var proto=$root,NoteSequence=proto.tensorflow.magenta.NoteSequence,browser={exports:{}},hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(re,ee){var ne=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")};ne(),re.exports=ee=globalThis.fetch,globalThis.fetch&&(ee.default=globalThis.fetch.bind(globalThis)),ee.Headers=globalThis.Headers,ee.Request=globalThis.Request,ee.Response=globalThis.Response}(browser,browser.exports)),browser.exports}globalThis.process.hrtime();function getGlobalObject(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("cannot find the globalThis object")}const globalObject=getGlobalObject();globalObject.fetch.bind(globalObject);globalObject.performance;globalObject.navigator;const isSafari=!!globalObject.webkitOfflineAudioContext,isWorker=typeof globalObject.WorkerGlobalScope<"u";function getOfflineAudioContext(re){if(re=isSafari?44100:re,isWorker)throw new Error("Cannot use offline audio context in a web worker.");const ne=globalObject.webkitOfflineAudioContext;return isSafari?new ne(1,re,re):new globalObject.OfflineAudioContext(1,re,re)}const isNode$1=typeof globalThis<"u"&&typeof globalThis.process<"u",fetch$1=isNode$1?requireBrowser():window.fetch.bind(window);var Level;(function(re){re[re.NONE=0]="NONE",re[re.WARN=5]="WARN",re[re.INFO=10]="INFO",re[re.DEBUG=20]="DEBUG"})(Level||(Level={}));let verbosity=10;function log$1(re,ee="Magenta.js",ne=10){if(ne===0)throw Error("Logging level cannot be NONE.");verbosity>=ne&&(ne===5?console.warn:console.log)(`%c ${ee} `,"background:magenta; color:white",re)}class MultipleTempoException extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}class QuantizationStatusException extends Error{constructor(ee){super(ee),Object.setPrototypeOf(this,new.target.prototype)}}function clone(re){return NoteSequence.decode(NoteSequence.encode(re).finish())}function getQuantizedTimeEvents(re){return re.controlChanges.concat(re.textAnnotations)}function assertSingleTempo(re){if(!(!re.tempos||re.tempos.length===0)){if(re.tempos.sort((ee,ne)=>ee.time-ne.time),re.tempos[0].time!==0&&re.tempos[0].qpm!==DEFAULT_QUARTERS_PER_MINUTE)throw new MultipleTempoException(`NoteSequence has an implicit tempo change from initial ${DEFAULT_QUARTERS_PER_MINUTE} qpm to ${re.tempos[0].qpm} qpm at ${re.tempos[0].time} seconds.`);for(let ee=1;ee<re.tempos.length;ee++)if(re.tempos[ee].qpm!==re.tempos[0].qpm)throw new MultipleTempoException(`NoteSequence has at least one tempo change from ${re.tempos[0].qpm} qpm to ${re.tempos[ee].qpm}qpm at ${re.tempos[ee].time} seconds.`)}}function isQuantizedSequence(re){return re.quantizationInfo&&(re.quantizationInfo.stepsPerQuarter>0||re.quantizationInfo.stepsPerSecond>0)}function isRelativeQuantizedSequence(re){return re.quantizationInfo&&re.quantizationInfo.stepsPerQuarter>0}function assertIsRelativeQuantizedSequence(re){if(!isRelativeQuantizedSequence(re))throw new QuantizationStatusException(`NoteSequence ${re.id} is not quantized or is quantized based on absolute timing`)}function unquantizeSequence(re,ee){assertIsRelativeQuantizedSequence(re),assertSingleTempo(re);const ne=clone(re);ee?ne.tempos&&ne.tempos.length>0?ne.tempos[0].qpm=ee:ne.tempos.push(NoteSequence.Tempo.create({time:0,qpm:ee})):ee=re.tempos&&re.tempos.length>0?ne.tempos[0].qpm:DEFAULT_QUARTERS_PER_MINUTE;const ie=oe=>oe/ne.quantizationInfo.stepsPerQuarter*(60/ee);return ne.totalTime=ie(ne.totalQuantizedSteps),ne.notes.forEach(oe=>{oe.startTime=ie(oe.quantizedStartStep),oe.endTime=ie(oe.quantizedEndStep),ne.totalTime=Math.max(ne.totalTime,oe.endTime),delete oe.quantizedStartStep,delete oe.quantizedEndStep}),getQuantizedTimeEvents(ne).forEach(oe=>{oe.time=ie(oe.time)}),delete ne.totalQuantizedSteps,delete ne.quantizationInfo,ne}const version="14.7.77",createExtendedExponentialRampToValueAutomationEvent=(re,ee,ne)=>({endTime:ee,insertTime:ne,type:"exponentialRampToValue",value:re}),createExtendedLinearRampToValueAutomationEvent=(re,ee,ne)=>({endTime:ee,insertTime:ne,type:"linearRampToValue",value:re}),createSetValueAutomationEvent=(re,ee)=>({startTime:ee,type:"setValue",value:re}),createSetValueCurveAutomationEvent=(re,ee,ne)=>({duration:ne,startTime:ee,type:"setValueCurve",values:re}),getTargetValueAtTime=(re,ee,{startTime:ne,target:ie,timeConstant:oe})=>ie+(ee-ie)*Math.exp((ne-re)/oe),isExponentialRampToValueAutomationEvent=re=>re.type==="exponentialRampToValue",isLinearRampToValueAutomationEvent=re=>re.type==="linearRampToValue",isAnyRampToValueAutomationEvent=re=>isExponentialRampToValueAutomationEvent(re)||isLinearRampToValueAutomationEvent(re),isSetValueAutomationEvent=re=>re.type==="setValue",isSetValueCurveAutomationEvent=re=>re.type==="setValueCurve",getValueOfAutomationEventAtIndexAtTime=(re,ee,ne,ie)=>{const oe=re[ee];return oe===void 0?ie:isAnyRampToValueAutomationEvent(oe)||isSetValueAutomationEvent(oe)?oe.value:isSetValueCurveAutomationEvent(oe)?oe.values[oe.values.length-1]:getTargetValueAtTime(ne,getValueOfAutomationEventAtIndexAtTime(re,ee-1,oe.startTime,ie),oe)},getEndTimeAndValueOfPreviousAutomationEvent=(re,ee,ne,ie,oe)=>ne===void 0?[ie.insertTime,oe]:isAnyRampToValueAutomationEvent(ne)?[ne.endTime,ne.value]:isSetValueAutomationEvent(ne)?[ne.startTime,ne.value]:isSetValueCurveAutomationEvent(ne)?[ne.startTime+ne.duration,ne.values[ne.values.length-1]]:[ne.startTime,getValueOfAutomationEventAtIndexAtTime(re,ee-1,ne.startTime,oe)],isCancelAndHoldAutomationEvent=re=>re.type==="cancelAndHold",isCancelScheduledValuesAutomationEvent=re=>re.type==="cancelScheduledValues",getEventTime=re=>isCancelAndHoldAutomationEvent(re)||isCancelScheduledValuesAutomationEvent(re)?re.cancelTime:isExponentialRampToValueAutomationEvent(re)||isLinearRampToValueAutomationEvent(re)?re.endTime:re.startTime,getExponentialRampValueAtTime=(re,ee,ne,{endTime:ie,value:oe})=>ne===oe?oe:0<ne&&0<oe||ne<0&&oe<0?ne*(oe/ne)**((re-ee)/(ie-ee)):0,getLinearRampValueAtTime=(re,ee,ne,{endTime:ie,value:oe})=>ne+(re-ee)/(ie-ee)*(oe-ne),interpolateValue=(re,ee)=>{const ne=Math.floor(ee),ie=Math.ceil(ee);return ne===ie?re[ne]:(1-(ee-ne))*re[ne]+(1-(ie-ee))*re[ie]},getValueCurveValueAtTime=(re,{duration:ee,startTime:ne,values:ie})=>{const oe=(re-ne)/ee*(ie.length-1);return interpolateValue(ie,oe)},isSetTargetAutomationEvent=re=>re.type==="setTarget";class AutomationEventList{constructor(ee){this._automationEvents=[],this._currenTime=0,this._defaultValue=ee}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(ee){const ne=getEventTime(ee);if(isCancelAndHoldAutomationEvent(ee)||isCancelScheduledValuesAutomationEvent(ee)){const ie=this._automationEvents.findIndex(ae=>isCancelScheduledValuesAutomationEvent(ee)&&isSetValueCurveAutomationEvent(ae)?ae.startTime+ae.duration>=ne:getEventTime(ae)>=ne),oe=this._automationEvents[ie];if(ie!==-1&&(this._automationEvents=this._automationEvents.slice(0,ie)),isCancelAndHoldAutomationEvent(ee)){const ae=this._automationEvents[this._automationEvents.length-1];if(oe!==void 0&&isAnyRampToValueAutomationEvent(oe)){if(ae!==void 0&&isSetTargetAutomationEvent(ae))throw new Error("The internal list is malformed.");const ce=ae===void 0?oe.insertTime:isSetValueCurveAutomationEvent(ae)?ae.startTime+ae.duration:getEventTime(ae),le=ae===void 0?this._defaultValue:isSetValueCurveAutomationEvent(ae)?ae.values[ae.values.length-1]:ae.value,ue=isExponentialRampToValueAutomationEvent(oe)?getExponentialRampValueAtTime(ne,ce,le,oe):getLinearRampValueAtTime(ne,ce,le,oe),he=isExponentialRampToValueAutomationEvent(oe)?createExtendedExponentialRampToValueAutomationEvent(ue,ne,this._currenTime):createExtendedLinearRampToValueAutomationEvent(ue,ne,this._currenTime);this._automationEvents.push(he)}if(ae!==void 0&&isSetTargetAutomationEvent(ae)&&this._automationEvents.push(createSetValueAutomationEvent(this.getValue(ne),ne)),ae!==void 0&&isSetValueCurveAutomationEvent(ae)&&ae.startTime+ae.duration>ne){const ce=ne-ae.startTime,le=(ae.values.length-1)/ae.duration,ue=Math.max(2,1+Math.ceil(ce*le)),he=ce/(ue-1)*le,fe=ae.values.slice(0,ue);if(he<1)for(let me=1;me<ue;me+=1){const ge=he*me%1;fe[me]=ae.values[me-1]*(1-ge)+ae.values[me]*ge}this._automationEvents[this._automationEvents.length-1]=createSetValueCurveAutomationEvent(fe,ae.startTime,ce)}}}else{const ie=this._automationEvents.findIndex(ce=>getEventTime(ce)>ne),oe=ie===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[ie-1];if(oe!==void 0&&isSetValueCurveAutomationEvent(oe)&&getEventTime(oe)+oe.duration>ne)return!1;const ae=isExponentialRampToValueAutomationEvent(ee)?createExtendedExponentialRampToValueAutomationEvent(ee.value,ee.endTime,this._currenTime):isLinearRampToValueAutomationEvent(ee)?createExtendedLinearRampToValueAutomationEvent(ee.value,ne,this._currenTime):ee;if(ie===-1)this._automationEvents.push(ae);else{if(isSetValueCurveAutomationEvent(ee)&&ne+ee.duration>getEventTime(this._automationEvents[ie]))return!1;this._automationEvents.splice(ie,0,ae)}}return!0}flush(ee){const ne=this._automationEvents.findIndex(ie=>getEventTime(ie)>ee);if(ne>1){const ie=this._automationEvents.slice(ne-1),oe=ie[0];isSetTargetAutomationEvent(oe)&&ie.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents,ne-2,oe.startTime,this._defaultValue),oe.startTime)),this._automationEvents=ie}}getValue(ee){if(this._automationEvents.length===0)return this._defaultValue;const ne=this._automationEvents.findIndex(ce=>getEventTime(ce)>ee),ie=this._automationEvents[ne],oe=(ne===-1?this._automationEvents.length:ne)-1,ae=this._automationEvents[oe];if(ae!==void 0&&isSetTargetAutomationEvent(ae)&&(ie===void 0||!isAnyRampToValueAutomationEvent(ie)||ie.insertTime>ee))return getTargetValueAtTime(ee,getValueOfAutomationEventAtIndexAtTime(this._automationEvents,oe-1,ae.startTime,this._defaultValue),ae);if(ae!==void 0&&isSetValueAutomationEvent(ae)&&(ie===void 0||!isAnyRampToValueAutomationEvent(ie)))return ae.value;if(ae!==void 0&&isSetValueCurveAutomationEvent(ae)&&(ie===void 0||!isAnyRampToValueAutomationEvent(ie)||ae.startTime+ae.duration>ee))return ee<ae.startTime+ae.duration?getValueCurveValueAtTime(ee,ae):ae.values[ae.values.length-1];if(ae!==void 0&&isAnyRampToValueAutomationEvent(ae)&&(ie===void 0||!isAnyRampToValueAutomationEvent(ie)))return ae.value;if(ie!==void 0&&isExponentialRampToValueAutomationEvent(ie)){const[ce,le]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,oe,ae,ie,this._defaultValue);return getExponentialRampValueAtTime(ee,ce,le,ie)}if(ie!==void 0&&isLinearRampToValueAutomationEvent(ie)){const[ce,le]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,oe,ae,ie,this._defaultValue);return getLinearRampValueAtTime(ee,ce,le,ie)}return this._defaultValue}}const createCancelAndHoldAutomationEvent=re=>({cancelTime:re,type:"cancelAndHold"}),createCancelScheduledValuesAutomationEvent=re=>({cancelTime:re,type:"cancelScheduledValues"}),createExponentialRampToValueAutomationEvent=(re,ee)=>({endTime:ee,type:"exponentialRampToValue",value:re}),createLinearRampToValueAutomationEvent=(re,ee)=>({endTime:ee,type:"linearRampToValue",value:re}),createSetTargetAutomationEvent=(re,ee,ne)=>({startTime:ee,target:re,timeConstant:ne,type:"setTarget"}),createAbortError=()=>new DOMException("","AbortError"),createAddActiveInputConnectionToAudioNode=re=>(ee,ne,[ie,oe,ae],ce)=>{re(ee[oe],[ne,ie,ae],le=>le[0]===ne&&le[1]===ie,ce)},createAddAudioNodeConnections=re=>(ee,ne,ie)=>{const oe=[];for(let ae=0;ae<ie.numberOfInputs;ae+=1)oe.push(new Set);re.set(ee,{activeInputs:oe,outputs:new Set,passiveInputs:new WeakMap,renderer:ne})},createAddAudioParamConnections=re=>(ee,ne)=>{re.set(ee,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:ne})},ACTIVE_AUDIO_NODE_STORE=new WeakSet,AUDIO_NODE_CONNECTIONS_STORE=new WeakMap,AUDIO_NODE_STORE=new WeakMap,AUDIO_PARAM_CONNECTIONS_STORE=new WeakMap,AUDIO_PARAM_STORE=new WeakMap,CONTEXT_STORE=new WeakMap,EVENT_LISTENERS=new WeakMap,CYCLE_COUNTERS=new WeakMap,NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=new WeakMap,NODE_TO_PROCESSOR_MAPS=new WeakMap,handler={construct(){return handler}},isConstructible=re=>{try{const ee=new Proxy(re,handler);new ee}catch{return!1}return!0},IMPORT_STATEMENT_REGEX=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,splitImportStatements=(re,ee)=>{const ne=[];let ie=re.replace(/^[\s]+/,""),oe=ie.match(IMPORT_STATEMENT_REGEX);for(;oe!==null;){const ae=oe[1].slice(1,-1),ce=oe[0].replace(/([\s]+)?;?$/,"").replace(ae,new URL(ae,ee).toString());ne.push(ce),ie=ie.slice(oe[0].length).replace(/^[\s]+/,""),oe=ie.match(IMPORT_STATEMENT_REGEX)}return[ne.join(";"),ie]},verifyParameterDescriptors=re=>{if(re!==void 0&&!Array.isArray(re))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},verifyProcessorCtor=re=>{if(!isConstructible(re))throw new TypeError("The given value for processorCtor should be a constructor.");if(re.prototype===null||typeof re.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},createAddAudioWorkletModule=(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe,me,ge)=>{let ve=0;return(ye,be,Ce={credentials:"omit"})=>{const Se=fe.get(ye);if(Se!==void 0&&Se.has(be))return Promise.resolve();const $e=he.get(ye);if($e!==void 0){const Ie=$e.get(be);if(Ie!==void 0)return Ie}const Te=ae(ye),Ne=Te.audioWorklet===void 0?oe(be).then(([Ie,ke])=>{const[De,Oe]=splitImportStatements(Ie,ke),Be=`${De};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,globalThis,registerProcessor,sampleRate,self,window)=>{${Oe}
})})(window,'_AWGS')`;return ne(Be)}).then(()=>{const Ie=ge._AWGS.pop();if(Ie===void 0)throw new SyntaxError;ie(Te.currentTime,Te.sampleRate,()=>Ie(class{},void 0,(ke,De)=>{if(ke.trim()==="")throw ee();const Oe=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(Te);if(Oe!==void 0){if(Oe.has(ke))throw ee();verifyProcessorCtor(De),verifyParameterDescriptors(De.parameterDescriptors),Oe.set(ke,De)}else verifyProcessorCtor(De),verifyParameterDescriptors(De.parameterDescriptors),NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(Te,new Map([[ke,De]]))},Te.sampleRate,void 0,void 0))}):Promise.all([oe(be),Promise.resolve(re(me,me))]).then(([[Ie,ke],De])=>{const Oe=ve+1;ve=Oe;const[Be,Me]=splitImportStatements(Ie,ke),Ve=`${Be};((AudioWorkletProcessor,registerProcessor)=>{${Me}
})(${De?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${De?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${De?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${Oe}',class extends AudioWorkletProcessor{process(){return !1}})`,He=new Blob([Ve],{type:"application/javascript; charset=utf-8"}),We=URL.createObjectURL(He);return Te.audioWorklet.addModule(We,Ce).then(()=>{if(le(Te))return Te;const Ye=ce(Te);return Ye.audioWorklet.addModule(We,Ce).then(()=>Ye)}).then(Ye=>{if(ue===null)throw new SyntaxError;try{new ue(Ye,`__sac${Oe}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(We))});return $e===void 0?he.set(ye,new Map([[be,Ne]])):$e.set(be,Ne),Ne.then(()=>{const Ie=fe.get(ye);Ie===void 0?fe.set(ye,new Set([be])):Ie.add(be)}).finally(()=>{const Ie=he.get(ye);Ie!==void 0&&Ie.delete(be)}),Ne}},getValueForKey=(re,ee)=>{const ne=re.get(ee);if(ne===void 0)throw new Error("A value with the given key could not be found.");return ne},pickElementFromSet=(re,ee)=>{const ne=Array.from(re).filter(ee);if(ne.length>1)throw Error("More than one element was found.");if(ne.length===0)throw Error("No element was found.");const[ie]=ne;return re.delete(ie),ie},deletePassiveInputConnectionToAudioNode=(re,ee,ne,ie)=>{const oe=getValueForKey(re,ee),ae=pickElementFromSet(oe,ce=>ce[0]===ne&&ce[1]===ie);return oe.size===0&&re.delete(ee),ae},getEventListenersOfAudioNode=re=>getValueForKey(EVENT_LISTENERS,re),setInternalStateToActive=re=>{if(ACTIVE_AUDIO_NODE_STORE.has(re))throw new Error("The AudioNode is already stored.");ACTIVE_AUDIO_NODE_STORE.add(re),getEventListenersOfAudioNode(re).forEach(ee=>ee(!0))},isAudioWorkletNode=re=>"port"in re,setInternalStateToPassive=re=>{if(!ACTIVE_AUDIO_NODE_STORE.has(re))throw new Error("The AudioNode is not stored.");ACTIVE_AUDIO_NODE_STORE.delete(re),getEventListenersOfAudioNode(re).forEach(ee=>ee(!1))},setInternalStateToPassiveWhenNecessary=(re,ee)=>{!isAudioWorkletNode(re)&&ee.every(ne=>ne.size===0)&&setInternalStateToPassive(re)},createAddConnectionToAudioNode=(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe,me,ge)=>{const ve=new WeakMap;return(ye,be,Ce,Se,$e)=>{const{activeInputs:Te,passiveInputs:Ne}=ae(be),{outputs:Ie}=ae(ye),ke=le(ye),De=Oe=>{const Be=ue(be),Me=ue(ye);if(Oe){const Le=deletePassiveInputConnectionToAudioNode(Ne,ye,Ce,Se);re(Te,ye,Le,!1),!$e&&!me(ye)&&ne(Me,Be,Ce,Se),ge(be)&&setInternalStateToActive(be)}else{const Le=ie(Te,ye,Ce,Se);ee(Ne,Se,Le,!1),!$e&&!me(ye)&&oe(Me,Be,Ce,Se);const je=ce(be);if(je===0)fe(be)&&setInternalStateToPassiveWhenNecessary(be,Te);else{const ze=ve.get(be);ze!==void 0&&clearTimeout(ze),ve.set(be,setTimeout(()=>{fe(be)&&setInternalStateToPassiveWhenNecessary(be,Te)},je*1e3))}}};return he(Ie,[be,Ce,Se],Oe=>Oe[0]===be&&Oe[1]===Ce&&Oe[2]===Se,!0)?(ke.add(De),fe(ye)?re(Te,ye,[Ce,Se,De],!0):ee(Ne,Se,[ye,Ce,De],!0),!0):!1}},createAddPassiveInputConnectionToAudioNode=re=>(ee,ne,[ie,oe,ae],ce)=>{const le=ee.get(ie);le===void 0?ee.set(ie,new Set([[oe,ne,ae]])):re(le,[oe,ne,ae],ue=>ue[0]===oe&&ue[1]===ne,ce)},createAddSilentConnection=re=>(ee,ne)=>{const ie=re(ee,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});ne.connect(ie).connect(ee.destination);const oe=()=>{ne.removeEventListener("ended",oe),ne.disconnect(ie),ie.disconnect()};ne.addEventListener("ended",oe)},createAddUnrenderedAudioWorkletNode=re=>(ee,ne)=>{re(ee).add(ne)},DEFAULT_OPTIONS$j={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},createAnalyserNodeConstructor=(re,ee,ne,ie,oe,ae)=>class extends re{constructor(le,ue){const he=oe(le),fe={...DEFAULT_OPTIONS$j,...ue},me=ie(he,fe),ge=ae(he)?ee():null;super(le,!1,me,ge),this._nativeAnalyserNode=me}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(le){this._nativeAnalyserNode.fftSize=le}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(le){const ue=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=le,!(le>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=ue,ne()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(le){const ue=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=le,!(this._nativeAnalyserNode.maxDecibels>le))throw this._nativeAnalyserNode.minDecibels=ue,ne()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(le){this._nativeAnalyserNode.smoothingTimeConstant=le}getByteFrequencyData(le){this._nativeAnalyserNode.getByteFrequencyData(le)}getByteTimeDomainData(le){this._nativeAnalyserNode.getByteTimeDomainData(le)}getFloatFrequencyData(le){this._nativeAnalyserNode.getFloatFrequencyData(le)}getFloatTimeDomainData(le){this._nativeAnalyserNode.getFloatTimeDomainData(le)}},isOwnedByContext=(re,ee)=>re.context===ee,createAnalyserNodeRendererFactory=(re,ee,ne)=>()=>{const ie=new WeakMap,oe=async(ae,ce)=>{let le=ee(ae);if(!isOwnedByContext(le,ce)){const he={channelCount:le.channelCount,channelCountMode:le.channelCountMode,channelInterpretation:le.channelInterpretation,fftSize:le.fftSize,maxDecibels:le.maxDecibels,minDecibels:le.minDecibels,smoothingTimeConstant:le.smoothingTimeConstant};le=re(ce,he)}return ie.set(ce,le),await ne(ae,ce,le),le};return{render(ae,ce){const le=ie.get(ce);return le!==void 0?Promise.resolve(le):oe(ae,ce)}}},testAudioBufferCopyChannelMethodsOutOfBoundsSupport=re=>{try{re.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},createIndexSizeError=()=>new DOMException("","IndexSizeError"),wrapAudioBufferGetChannelDataMethod=re=>{re.getChannelData=(ee=>ne=>{try{return ee.call(re,ne)}catch(ie){throw ie.code===12?createIndexSizeError():ie}})(re.getChannelData)},DEFAULT_OPTIONS$i={numberOfChannels:1},createAudioBufferConstructor=(re,ee,ne,ie,oe,ae,ce,le)=>{let ue=null;return class $u{constructor(fe){if(oe===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:me,numberOfChannels:ge,sampleRate:ve}={...DEFAULT_OPTIONS$i,...fe};ue===null&&(ue=new oe(1,1,44100));const ye=ie!==null&&ee(ae,ae)?new ie({length:me,numberOfChannels:ge,sampleRate:ve}):ue.createBuffer(ge,me,ve);if(ye.numberOfChannels===0)throw ne();return typeof ye.copyFromChannel!="function"?(ce(ye),wrapAudioBufferGetChannelDataMethod(ye)):ee(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(ye))||le(ye),re.add(ye),ye}static[Symbol.hasInstance](fe){return fe!==null&&typeof fe=="object"&&Object.getPrototypeOf(fe)===$u.prototype||re.has(fe)}}},MOST_NEGATIVE_SINGLE_FLOAT=-34028234663852886e22,MOST_POSITIVE_SINGLE_FLOAT=-MOST_NEGATIVE_SINGLE_FLOAT,isActiveAudioNode=re=>ACTIVE_AUDIO_NODE_STORE.has(re),DEFAULT_OPTIONS$h={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},createAudioBufferSourceNodeConstructor=(re,ee,ne,ie,oe,ae,ce,le)=>class extends re{constructor(he,fe){const me=ae(he),ge={...DEFAULT_OPTIONS$h,...fe},ve=oe(me,ge),ye=ce(me),be=ye?ee():null;super(he,!1,ve,be),this._audioBufferSourceNodeRenderer=be,this._isBufferNullified=!1,this._isBufferSet=ge.buffer!==null,this._nativeAudioBufferSourceNode=ve,this._onended=null,this._playbackRate=ne(this,ye,ve.playbackRate,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(he){if(this._nativeAudioBufferSourceNode.buffer=he,he!==null){if(this._isBufferSet)throw ie();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(he){this._nativeAudioBufferSourceNode.loop=he}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(he){this._nativeAudioBufferSourceNode.loopEnd=he}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(he){this._nativeAudioBufferSourceNode.loopStart=he}get onended(){return this._onended}set onended(he){const fe=typeof he=="function"?le(this,he):null;this._nativeAudioBufferSourceNode.onended=fe;const me=this._nativeAudioBufferSourceNode.onended;this._onended=me!==null&&me===fe?he:me}get playbackRate(){return this._playbackRate}start(he=0,fe=0,me){if(this._nativeAudioBufferSourceNode.start(he,fe,me),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=me===void 0?[he,fe]:[he,fe,me]),this.context.state!=="closed"){setInternalStateToActive(this);const ge=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",ge),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",ge)}}stop(he=0){this._nativeAudioBufferSourceNode.stop(he),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=he)}},createAudioBufferSourceNodeRendererFactory=(re,ee,ne,ie,oe)=>()=>{const ae=new WeakMap;let ce=null,le=null;const ue=async(he,fe)=>{let me=ne(he);const ge=isOwnedByContext(me,fe);if(!ge){const ve={buffer:me.buffer,channelCount:me.channelCount,channelCountMode:me.channelCountMode,channelInterpretation:me.channelInterpretation,loop:me.loop,loopEnd:me.loopEnd,loopStart:me.loopStart,playbackRate:me.playbackRate.value};me=ee(fe,ve),ce!==null&&me.start(...ce),le!==null&&me.stop(le)}return ae.set(fe,me),ge?await re(fe,he.playbackRate,me.playbackRate):await ie(fe,he.playbackRate,me.playbackRate),await oe(he,fe,me),me};return{set start(he){ce=he},set stop(he){le=he},render(he,fe){const me=ae.get(fe);return me!==void 0?Promise.resolve(me):ue(he,fe)}}},isAudioBufferSourceNode=re=>"playbackRate"in re,isBiquadFilterNode=re=>"frequency"in re&&"gain"in re,isConstantSourceNode=re=>"offset"in re,isGainNode=re=>!("frequency"in re)&&"gain"in re,isOscillatorNode=re=>"detune"in re&&"frequency"in re,isStereoPannerNode=re=>"pan"in re,getAudioNodeConnections=re=>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE,re),getAudioParamConnections=re=>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE,re),deactivateActiveAudioNodeInputConnections=(re,ee)=>{const{activeInputs:ne}=getAudioNodeConnections(re);ne.forEach(oe=>oe.forEach(([ae])=>{ee.includes(re)||deactivateActiveAudioNodeInputConnections(ae,[...ee,re])}));const ie=isAudioBufferSourceNode(re)?[re.playbackRate]:isAudioWorkletNode(re)?Array.from(re.parameters.values()):isBiquadFilterNode(re)?[re.Q,re.detune,re.frequency,re.gain]:isConstantSourceNode(re)?[re.offset]:isGainNode(re)?[re.gain]:isOscillatorNode(re)?[re.detune,re.frequency]:isStereoPannerNode(re)?[re.pan]:[];for(const oe of ie){const ae=getAudioParamConnections(oe);ae!==void 0&&ae.activeInputs.forEach(([ce])=>deactivateActiveAudioNodeInputConnections(ce,ee))}isActiveAudioNode(re)&&setInternalStateToPassive(re)},deactivateAudioGraph=re=>{deactivateActiveAudioNodeInputConnections(re.destination,[])},isValidLatencyHint=re=>re===void 0||typeof re=="number"||typeof re=="string"&&(re==="balanced"||re==="interactive"||re==="playback"),createAudioContextConstructor=(re,ee,ne,ie,oe,ae,ce,le,ue)=>class extends re{constructor(fe={}){if(ue===null)throw new Error("Missing the native AudioContext constructor.");let me;try{me=new ue(fe)}catch(ye){throw ye.code===12&&ye.message==="sampleRate is not in range"?ne():ye}if(me===null)throw ie();if(!isValidLatencyHint(fe.latencyHint))throw new TypeError(`The provided value '${fe.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(fe.sampleRate!==void 0&&me.sampleRate!==fe.sampleRate)throw ne();super(me,2);const{latencyHint:ge}=fe,{sampleRate:ve}=me;if(this._baseLatency=typeof me.baseLatency=="number"?me.baseLatency:ge==="balanced"?512/ve:ge==="interactive"||ge===void 0?256/ve:ge==="playback"?1024/ve:Math.max(2,Math.min(128,Math.round(ge*ve/128)))*128/ve,this._nativeAudioContext=me,ue.name==="webkitAudioContext"?(this._nativeGainNode=me.createGain(),this._nativeOscillatorNode=me.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(me.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,me.state==="running"){this._state="suspended";const ye=()=>{this._state==="suspended"&&(this._state=null),me.removeEventListener("statechange",ye)};me.addEventListener("statechange",ye)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw ee()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),deactivateAudioGraph(this)}))}createMediaElementSource(fe){return new oe(this,{mediaElement:fe})}createMediaStreamDestination(){return new ae(this)}createMediaStreamSource(fe){return new ce(this,{mediaStream:fe})}createMediaStreamTrackSource(fe){return new le(this,{mediaStreamTrack:fe})}resume(){return this._state==="suspended"?new Promise((fe,me)=>{const ge=()=>{this._nativeAudioContext.removeEventListener("statechange",ge),this._nativeAudioContext.state==="running"?fe():this.resume().then(fe,me)};this._nativeAudioContext.addEventListener("statechange",ge)}):this._nativeAudioContext.resume().catch(fe=>{throw fe===void 0||fe.code===15?ee():fe})}suspend(){return this._nativeAudioContext.suspend().catch(fe=>{throw fe===void 0?ee():fe})}},createAudioDestinationNodeConstructor=(re,ee,ne,ie,oe,ae,ce,le)=>class extends re{constructor(he,fe){const me=ae(he),ge=ce(me),ve=oe(me,fe,ge),ye=ge?ee(le):null;super(he,!1,ve,ye),this._isNodeOfNativeOfflineAudioContext=ge,this._nativeAudioDestinationNode=ve}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(he){if(this._isNodeOfNativeOfflineAudioContext)throw ie();if(he>this._nativeAudioDestinationNode.maxChannelCount)throw ne();this._nativeAudioDestinationNode.channelCount=he}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(he){if(this._isNodeOfNativeOfflineAudioContext)throw ie();this._nativeAudioDestinationNode.channelCountMode=he}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},createAudioDestinationNodeRenderer=re=>{const ee=new WeakMap,ne=async(ie,oe)=>{const ae=oe.destination;return ee.set(oe,ae),await re(ie,oe,ae),ae};return{render(ie,oe){const ae=ee.get(oe);return ae!==void 0?Promise.resolve(ae):ne(ie,oe)}}},createAudioListenerFactory=(re,ee,ne,ie,oe,ae,ce,le)=>(ue,he)=>{const fe=he.listener,me=()=>{const Ie=new Float32Array(1),ke=ee(he,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),De=ce(he);let Oe=!1,Be=[0,0,-1,0,1,0],Me=[0,0,0];const Le=()=>{if(Oe)return;Oe=!0;const He=ie(he,256,9,0);He.onaudioprocess=({inputBuffer:We})=>{const Ye=[ae(We,Ie,0),ae(We,Ie,1),ae(We,Ie,2),ae(We,Ie,3),ae(We,Ie,4),ae(We,Ie,5)];Ye.some((Ke,Xe)=>Ke!==Be[Xe])&&(fe.setOrientation(...Ye),Be=Ye);const Ue=[ae(We,Ie,6),ae(We,Ie,7),ae(We,Ie,8)];Ue.some((Ke,Xe)=>Ke!==Me[Xe])&&(fe.setPosition(...Ue),Me=Ue)},ke.connect(He)},je=He=>We=>{We!==Be[He]&&(Be[He]=We,fe.setOrientation(...Be))},ze=He=>We=>{We!==Me[He]&&(Me[He]=We,fe.setPosition(...Me))},Ve=(He,We,Ye)=>{const Ue=ne(he,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:We});Ue.connect(ke,0,He),Ue.start(),Object.defineProperty(Ue.offset,"defaultValue",{get(){return We}});const Ke=re({context:ue},De,Ue.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT);return le(Ke,"value",Xe=>()=>Xe.call(Ke),Xe=>Vt=>{try{Xe.call(Ke,Vt)}catch(Wt){if(Wt.code!==9)throw Wt}Le(),De&&Ye(Vt)}),Ke.cancelAndHoldAtTime=(Xe=>De?()=>{throw oe()}:(...Vt)=>{const Wt=Xe.apply(Ke,Vt);return Le(),Wt})(Ke.cancelAndHoldAtTime),Ke.cancelScheduledValues=(Xe=>De?()=>{throw oe()}:(...Vt)=>{const Wt=Xe.apply(Ke,Vt);return Le(),Wt})(Ke.cancelScheduledValues),Ke.exponentialRampToValueAtTime=(Xe=>De?()=>{throw oe()}:(...Vt)=>{const Wt=Xe.apply(Ke,Vt);return Le(),Wt})(Ke.exponentialRampToValueAtTime),Ke.linearRampToValueAtTime=(Xe=>De?()=>{throw oe()}:(...Vt)=>{const Wt=Xe.apply(Ke,Vt);return Le(),Wt})(Ke.linearRampToValueAtTime),Ke.setTargetAtTime=(Xe=>De?()=>{throw oe()}:(...Vt)=>{const Wt=Xe.apply(Ke,Vt);return Le(),Wt})(Ke.setTargetAtTime),Ke.setValueAtTime=(Xe=>De?()=>{throw oe()}:(...Vt)=>{const Wt=Xe.apply(Ke,Vt);return Le(),Wt})(Ke.setValueAtTime),Ke.setValueCurveAtTime=(Xe=>De?()=>{throw oe()}:(...Vt)=>{const Wt=Xe.apply(Ke,Vt);return Le(),Wt})(Ke.setValueCurveAtTime),Ke};return{forwardX:Ve(0,0,je(0)),forwardY:Ve(1,0,je(1)),forwardZ:Ve(2,-1,je(2)),positionX:Ve(6,0,ze(0)),positionY:Ve(7,0,ze(1)),positionZ:Ve(8,0,ze(2)),upX:Ve(3,0,je(3)),upY:Ve(4,1,je(4)),upZ:Ve(5,0,je(5))}},{forwardX:ge,forwardY:ve,forwardZ:ye,positionX:be,positionY:Ce,positionZ:Se,upX:$e,upY:Te,upZ:Ne}=fe.forwardX===void 0?me():fe;return{get forwardX(){return ge},get forwardY(){return ve},get forwardZ(){return ye},get positionX(){return be},get positionY(){return Ce},get positionZ(){return Se},get upX(){return $e},get upY(){return Te},get upZ(){return Ne}}},isAudioNode$1=re=>"context"in re,isAudioNodeOutputConnection=re=>isAudioNode$1(re[0]),insertElementInSet=(re,ee,ne,ie)=>{for(const oe of re)if(ne(oe)){if(ie)return!1;throw Error("The set contains at least one similar element.")}return re.add(ee),!0},addActiveInputConnectionToAudioParam=(re,ee,[ne,ie],oe)=>{insertElementInSet(re,[ee,ne,ie],ae=>ae[0]===ee&&ae[1]===ne,oe)},addPassiveInputConnectionToAudioParam=(re,[ee,ne,ie],oe)=>{const ae=re.get(ee);ae===void 0?re.set(ee,new Set([[ne,ie]])):insertElementInSet(ae,[ne,ie],ce=>ce[0]===ne,oe)},isNativeAudioNodeFaker=re=>"inputs"in re,connectNativeAudioNodeToNativeAudioNode=(re,ee,ne,ie)=>{if(isNativeAudioNodeFaker(ee)){const oe=ee.inputs[ie];return re.connect(oe,ne,0),[oe,ne,0]}return re.connect(ee,ne,ie),[ee,ne,ie]},deleteActiveInputConnection=(re,ee,ne)=>{for(const ie of re)if(ie[0]===ee&&ie[1]===ne)return re.delete(ie),ie;return null},deleteActiveInputConnectionToAudioParam=(re,ee,ne)=>pickElementFromSet(re,ie=>ie[0]===ee&&ie[1]===ne),deleteEventListenerOfAudioNode=(re,ee)=>{if(!getEventListenersOfAudioNode(re).delete(ee))throw new Error("Missing the expected event listener.")},deletePassiveInputConnectionToAudioParam=(re,ee,ne)=>{const ie=getValueForKey(re,ee),oe=pickElementFromSet(ie,ae=>ae[0]===ne);return ie.size===0&&re.delete(ee),oe},disconnectNativeAudioNodeFromNativeAudioNode=(re,ee,ne,ie)=>{isNativeAudioNodeFaker(ee)?re.disconnect(ee.inputs[ie],ne,0):re.disconnect(ee,ne,ie)},getNativeAudioNode=re=>getValueForKey(AUDIO_NODE_STORE,re),getNativeAudioParam=re=>getValueForKey(AUDIO_PARAM_STORE,re),isPartOfACycle=re=>CYCLE_COUNTERS.has(re),isPassiveAudioNode=re=>!ACTIVE_AUDIO_NODE_STORE.has(re),testAudioNodeDisconnectMethodSupport=(re,ee)=>new Promise(ne=>{if(ee!==null)ne(!0);else{const ie=re.createScriptProcessor(256,1,1),oe=re.createGain(),ae=re.createBuffer(1,2,44100),ce=ae.getChannelData(0);ce[0]=1,ce[1]=1;const le=re.createBufferSource();le.buffer=ae,le.loop=!0,le.connect(ie).connect(re.destination),le.connect(oe),le.disconnect(oe),ie.onaudioprocess=ue=>{const he=ue.inputBuffer.getChannelData(0);Array.prototype.some.call(he,fe=>fe===1)?ne(!0):ne(!1),le.stop(),ie.onaudioprocess=null,le.disconnect(ie),ie.disconnect(re.destination)},le.start()}}),visitEachAudioNodeOnce=(re,ee)=>{const ne=new Map;for(const ie of re)for(const oe of ie){const ae=ne.get(oe);ne.set(oe,ae===void 0?1:ae+1)}ne.forEach((ie,oe)=>ee(oe,ie))},isNativeAudioNode$1=re=>"context"in re,wrapAudioNodeDisconnectMethod=re=>{const ee=new Map;re.connect=(ne=>(ie,oe=0,ae=0)=>{const ce=isNativeAudioNode$1(ie)?ne(ie,oe,ae):ne(ie,oe),le=ee.get(ie);return le===void 0?ee.set(ie,[{input:ae,output:oe}]):le.every(ue=>ue.input!==ae||ue.output!==oe)&&le.push({input:ae,output:oe}),ce})(re.connect.bind(re)),re.disconnect=(ne=>(ie,oe,ae)=>{if(ne.apply(re),ie===void 0)ee.clear();else if(typeof ie=="number")for(const[ce,le]of ee){const ue=le.filter(he=>he.output!==ie);ue.length===0?ee.delete(ce):ee.set(ce,ue)}else if(ee.has(ie))if(oe===void 0)ee.delete(ie);else{const ce=ee.get(ie);if(ce!==void 0){const le=ce.filter(ue=>ue.output!==oe&&(ue.input!==ae||ae===void 0));le.length===0?ee.delete(ie):ee.set(ie,le)}}for(const[ce,le]of ee)le.forEach(ue=>{isNativeAudioNode$1(ce)?re.connect(ce,ue.output,ue.input):re.connect(ce,ue.output)})})(re.disconnect)},addConnectionToAudioParamOfAudioContext=(re,ee,ne,ie)=>{const{activeInputs:oe,passiveInputs:ae}=getAudioParamConnections(ee),{outputs:ce}=getAudioNodeConnections(re),le=getEventListenersOfAudioNode(re),ue=he=>{const fe=getNativeAudioNode(re),me=getNativeAudioParam(ee);if(he){const ge=deletePassiveInputConnectionToAudioParam(ae,re,ne);addActiveInputConnectionToAudioParam(oe,re,ge,!1),!ie&&!isPartOfACycle(re)&&fe.connect(me,ne)}else{const ge=deleteActiveInputConnectionToAudioParam(oe,re,ne);addPassiveInputConnectionToAudioParam(ae,ge,!1),!ie&&!isPartOfACycle(re)&&fe.disconnect(me,ne)}};return insertElementInSet(ce,[ee,ne],he=>he[0]===ee&&he[1]===ne,!0)?(le.add(ue),isActiveAudioNode(re)?addActiveInputConnectionToAudioParam(oe,re,[ne,ue],!0):addPassiveInputConnectionToAudioParam(ae,[re,ne,ue],!0),!0):!1},deleteInputConnectionOfAudioNode=(re,ee,ne,ie)=>{const{activeInputs:oe,passiveInputs:ae}=getAudioNodeConnections(ee),ce=deleteActiveInputConnection(oe[ie],re,ne);return ce===null?[deletePassiveInputConnectionToAudioNode(ae,re,ne,ie)[2],!1]:[ce[2],!0]},deleteInputConnectionOfAudioParam=(re,ee,ne)=>{const{activeInputs:ie,passiveInputs:oe}=getAudioParamConnections(ee),ae=deleteActiveInputConnection(ie,re,ne);return ae===null?[deletePassiveInputConnectionToAudioParam(oe,re,ne)[1],!1]:[ae[2],!0]},deleteInputsOfAudioNode=(re,ee,ne,ie,oe)=>{const[ae,ce]=deleteInputConnectionOfAudioNode(re,ne,ie,oe);if(ae!==null&&(deleteEventListenerOfAudioNode(re,ae),ce&&!ee&&!isPartOfACycle(re)&&disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(re),getNativeAudioNode(ne),ie,oe)),isActiveAudioNode(ne)){const{activeInputs:le}=getAudioNodeConnections(ne);setInternalStateToPassiveWhenNecessary(ne,le)}},deleteInputsOfAudioParam=(re,ee,ne,ie)=>{const[oe,ae]=deleteInputConnectionOfAudioParam(re,ne,ie);oe!==null&&(deleteEventListenerOfAudioNode(re,oe),ae&&!ee&&!isPartOfACycle(re)&&getNativeAudioNode(re).disconnect(getNativeAudioParam(ne),ie))},deleteAnyConnection=(re,ee)=>{const ne=getAudioNodeConnections(re),ie=[];for(const oe of ne.outputs)isAudioNodeOutputConnection(oe)?deleteInputsOfAudioNode(re,ee,...oe):deleteInputsOfAudioParam(re,ee,...oe),ie.push(oe[0]);return ne.outputs.clear(),ie},deleteConnectionAtOutput=(re,ee,ne)=>{const ie=getAudioNodeConnections(re),oe=[];for(const ae of ie.outputs)ae[1]===ne&&(isAudioNodeOutputConnection(ae)?deleteInputsOfAudioNode(re,ee,...ae):deleteInputsOfAudioParam(re,ee,...ae),oe.push(ae[0]),ie.outputs.delete(ae));return oe},deleteConnectionToDestination=(re,ee,ne,ie,oe)=>{const ae=getAudioNodeConnections(re);return Array.from(ae.outputs).filter(ce=>ce[0]===ne&&(ie===void 0||ce[1]===ie)&&(oe===void 0||ce[2]===oe)).map(ce=>(isAudioNodeOutputConnection(ce)?deleteInputsOfAudioNode(re,ee,...ce):deleteInputsOfAudioParam(re,ee,...ce),ae.outputs.delete(ce),ce[0]))},createAudioNodeConstructor=(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe,me,ge,ve,ye,be)=>class extends he{constructor(Se,$e,Te,Ne){super(Te),this._context=Se,this._nativeAudioNode=Te;const Ie=fe(Se);me(Ie)&&ne(testAudioNodeDisconnectMethodSupport,()=>testAudioNodeDisconnectMethodSupport(Ie,be))!==!0&&wrapAudioNodeDisconnectMethod(Te),AUDIO_NODE_STORE.set(this,Te),EVENT_LISTENERS.set(this,new Set),Se.state!=="closed"&&$e&&setInternalStateToActive(this),re(this,Ne,Te)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(Se){this._nativeAudioNode.channelCount=Se}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(Se){this._nativeAudioNode.channelCountMode=Se}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(Se){this._nativeAudioNode.channelInterpretation=Se}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(Se,$e=0,Te=0){if($e<0||$e>=this._nativeAudioNode.numberOfOutputs)throw oe();const Ne=fe(this._context),Ie=ye(Ne);if(ge(Se)||ve(Se))throw ae();if(isAudioNode$1(Se)){const Oe=getNativeAudioNode(Se);try{const Me=connectNativeAudioNodeToNativeAudioNode(this._nativeAudioNode,Oe,$e,Te),Le=isPassiveAudioNode(this);(Ie||Le)&&this._nativeAudioNode.disconnect(...Me),this.context.state!=="closed"&&!Le&&isPassiveAudioNode(Se)&&setInternalStateToActive(Se)}catch(Me){throw Me.code===12?ae():Me}if(ee(this,Se,$e,Te,Ie)){const Me=ue([this],Se);visitEachAudioNodeOnce(Me,ie(Ie))}return Se}const ke=getNativeAudioParam(Se);if(ke.name==="playbackRate"&&ke.maxValue===1024)throw ce();try{this._nativeAudioNode.connect(ke,$e),(Ie||isPassiveAudioNode(this))&&this._nativeAudioNode.disconnect(ke,$e)}catch(Oe){throw Oe.code===12?ae():Oe}if(addConnectionToAudioParamOfAudioContext(this,Se,$e,Ie)){const Oe=ue([this],Se);visitEachAudioNodeOnce(Oe,ie(Ie))}}disconnect(Se,$e,Te){let Ne;const Ie=fe(this._context),ke=ye(Ie);if(Se===void 0)Ne=deleteAnyConnection(this,ke);else if(typeof Se=="number"){if(Se<0||Se>=this.numberOfOutputs)throw oe();Ne=deleteConnectionAtOutput(this,ke,Se)}else{if($e!==void 0&&($e<0||$e>=this.numberOfOutputs)||isAudioNode$1(Se)&&Te!==void 0&&(Te<0||Te>=Se.numberOfInputs))throw oe();if(Ne=deleteConnectionToDestination(this,ke,Se,$e,Te),Ne.length===0)throw ae()}for(const De of Ne){const Oe=ue([this],De);visitEachAudioNodeOnce(Oe,le)}}},createAudioParamFactory=(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe,me,ge)=>(ve,ye,be,Ce=null,Se=null)=>{const $e=be.value,Te=new AutomationEventList($e),Ne=ye?ie(Te):null,Ie={get defaultValue(){return $e},get maxValue(){return Ce===null?be.maxValue:Ce},get minValue(){return Se===null?be.minValue:Se},get value(){return be.value},set value(ke){be.value=ke,Ie.setValueAtTime(ke,ve.context.currentTime)},cancelAndHoldAtTime(ke){if(typeof be.cancelAndHoldAtTime=="function")Ne===null&&Te.flush(ve.context.currentTime),Te.add(oe(ke)),be.cancelAndHoldAtTime(ke);else{const De=Array.from(Te).pop();Ne===null&&Te.flush(ve.context.currentTime),Te.add(oe(ke));const Oe=Array.from(Te).pop();be.cancelScheduledValues(ke),De!==Oe&&Oe!==void 0&&(Oe.type==="exponentialRampToValue"?be.exponentialRampToValueAtTime(Oe.value,Oe.endTime):Oe.type==="linearRampToValue"?be.linearRampToValueAtTime(Oe.value,Oe.endTime):Oe.type==="setValue"?be.setValueAtTime(Oe.value,Oe.startTime):Oe.type==="setValueCurve"&&be.setValueCurveAtTime(Oe.values,Oe.startTime,Oe.duration))}return Ie},cancelScheduledValues(ke){return Ne===null&&Te.flush(ve.context.currentTime),Te.add(ae(ke)),be.cancelScheduledValues(ke),Ie},exponentialRampToValueAtTime(ke,De){if(ke===0)throw new RangeError;if(!Number.isFinite(De)||De<0)throw new RangeError;const Oe=ve.context.currentTime;return Ne===null&&Te.flush(Oe),Array.from(Te).length===0&&(Te.add(he($e,Oe)),be.setValueAtTime($e,Oe)),Te.add(ce(ke,De)),be.exponentialRampToValueAtTime(ke,De),Ie},linearRampToValueAtTime(ke,De){const Oe=ve.context.currentTime;return Ne===null&&Te.flush(Oe),Array.from(Te).length===0&&(Te.add(he($e,Oe)),be.setValueAtTime($e,Oe)),Te.add(le(ke,De)),be.linearRampToValueAtTime(ke,De),Ie},setTargetAtTime(ke,De,Oe){return Ne===null&&Te.flush(ve.context.currentTime),Te.add(ue(ke,De,Oe)),be.setTargetAtTime(ke,De,Oe),Ie},setValueAtTime(ke,De){return Ne===null&&Te.flush(ve.context.currentTime),Te.add(he(ke,De)),be.setValueAtTime(ke,De),Ie},setValueCurveAtTime(ke,De,Oe){const Be=ke instanceof Float32Array?ke:new Float32Array(ke);if(me!==null&&me.name==="webkitAudioContext"){const Me=De+Oe,Le=ve.context.sampleRate,je=Math.ceil(De*Le),ze=Math.floor(Me*Le),Ve=ze-je,He=new Float32Array(Ve);for(let Ye=0;Ye<Ve;Ye+=1){const Ue=(Be.length-1)/Oe*((je+Ye)/Le-De),Ke=Math.floor(Ue),Xe=Math.ceil(Ue);He[Ye]=Ke===Xe?Be[Ke]:(1-(Ue-Ke))*Be[Ke]+(1-(Xe-Ue))*Be[Xe]}Ne===null&&Te.flush(ve.context.currentTime),Te.add(fe(He,De,Oe)),be.setValueCurveAtTime(He,De,Oe);const We=ze/Le;We<Me&&ge(Ie,He[He.length-1],We),ge(Ie,Be[Be.length-1],Me)}else Ne===null&&Te.flush(ve.context.currentTime),Te.add(fe(Be,De,Oe)),be.setValueCurveAtTime(Be,De,Oe);return Ie}};return ne.set(Ie,be),ee.set(Ie,ve),re(Ie,Ne),Ie},createAudioParamRenderer=re=>({replay(ee){for(const ne of re)if(ne.type==="exponentialRampToValue"){const{endTime:ie,value:oe}=ne;ee.exponentialRampToValueAtTime(oe,ie)}else if(ne.type==="linearRampToValue"){const{endTime:ie,value:oe}=ne;ee.linearRampToValueAtTime(oe,ie)}else if(ne.type==="setTarget"){const{startTime:ie,target:oe,timeConstant:ae}=ne;ee.setTargetAtTime(oe,ie,ae)}else if(ne.type==="setValue"){const{startTime:ie,value:oe}=ne;ee.setValueAtTime(oe,ie)}else if(ne.type==="setValueCurve"){const{duration:ie,startTime:oe,values:ae}=ne;ee.setValueCurveAtTime(ae,oe,ie)}else throw new Error("Can't apply an unknown automation.")}});class ReadOnlyMap{constructor(ee){this._map=new Map(ee)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(ee,ne=null){return this._map.forEach((ie,oe)=>ee.call(ne,ie,oe,this))}get(ee){return this._map.get(ee)}has(ee){return this._map.has(ee)}keys(){return this._map.keys()}values(){return this._map.values()}}const DEFAULT_OPTIONS$g={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},createAudioWorkletNodeConstructor=(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe,me,ge,ve)=>class extends ee{constructor(be,Ce,Se){var $e;const Te=le(be),Ne=ue(Te),Ie=fe({...DEFAULT_OPTIONS$g,...Se});ge(Ie);const ke=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(Te),De=ke==null?void 0:ke.get(Ce),Oe=Ne||Te.state!=="closed"?Te:($e=ce(Te))!==null&&$e!==void 0?$e:Te,Be=oe(Oe,Ne?null:be.baseLatency,he,Ce,De,Ie),Me=Ne?ie(Ce,Ie,De):null;super(be,!0,Be,Me);const Le=[];Be.parameters.forEach((ze,Ve)=>{const He=ne(this,Ne,ze);Le.push([Ve,He])}),this._nativeAudioWorkletNode=Be,this._onprocessorerror=null,this._parameters=new ReadOnlyMap(Le),Ne&&re(Te,this);const{activeInputs:je}=ae(this);me(Be,je)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(be){const Ce=typeof be=="function"?ve(this,be):null;this._nativeAudioWorkletNode.onprocessorerror=Ce;const Se=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=Se!==null&&Se===Ce?be:Se}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function copyFromChannel(re,ee,ne,ie,oe){if(typeof re.copyFromChannel=="function")ee[ne].byteLength===0&&(ee[ne]=new Float32Array(128)),re.copyFromChannel(ee[ne],ie,oe);else{const ae=re.getChannelData(ie);if(ee[ne].byteLength===0)ee[ne]=ae.slice(oe,oe+128);else{const ce=new Float32Array(ae.buffer,oe*Float32Array.BYTES_PER_ELEMENT,128);ee[ne].set(ce)}}}const copyToChannel=(re,ee,ne,ie,oe)=>{typeof re.copyToChannel=="function"?ee[ne].byteLength!==0&&re.copyToChannel(ee[ne],ie,oe):ee[ne].byteLength!==0&&re.getChannelData(ie).set(ee[ne],oe)},createNestedArrays=(re,ee)=>{const ne=[];for(let ie=0;ie<re;ie+=1){const oe=[],ae=typeof ee=="number"?ee:ee[ie];for(let ce=0;ce<ae;ce+=1)oe.push(new Float32Array(128));ne.push(oe)}return ne},getAudioWorkletProcessor=(re,ee)=>{const ne=getValueForKey(NODE_TO_PROCESSOR_MAPS,re),ie=getNativeAudioNode(ee);return getValueForKey(ne,ie)},processBuffer=async(re,ee,ne,ie,oe,ae,ce)=>{const le=ee===null?Math.ceil(re.context.length/128)*128:ee.length,ue=ie.channelCount*ie.numberOfInputs,he=oe.reduce((Ce,Se)=>Ce+Se,0),fe=he===0?null:ne.createBuffer(he,le,ne.sampleRate);if(ae===void 0)throw new Error("Missing the processor constructor.");const me=getAudioNodeConnections(re),ge=await getAudioWorkletProcessor(ne,re),ve=createNestedArrays(ie.numberOfInputs,ie.channelCount),ye=createNestedArrays(ie.numberOfOutputs,oe),be=Array.from(re.parameters.keys()).reduce((Ce,Se)=>({...Ce,[Se]:new Float32Array(128)}),{});for(let Ce=0;Ce<le;Ce+=128){if(ie.numberOfInputs>0&&ee!==null)for(let Se=0;Se<ie.numberOfInputs;Se+=1)for(let $e=0;$e<ie.channelCount;$e+=1)copyFromChannel(ee,ve[Se],$e,$e,Ce);ae.parameterDescriptors!==void 0&&ee!==null&&ae.parameterDescriptors.forEach(({name:Se},$e)=>{copyFromChannel(ee,be,Se,ue+$e,Ce)});for(let Se=0;Se<ie.numberOfInputs;Se+=1)for(let $e=0;$e<oe[Se];$e+=1)ye[Se][$e].byteLength===0&&(ye[Se][$e]=new Float32Array(128));try{const Se=ve.map((Te,Ne)=>me.activeInputs[Ne].size===0?[]:Te),$e=ce(Ce/ne.sampleRate,ne.sampleRate,()=>ge.process(Se,ye,be));if(fe!==null)for(let Te=0,Ne=0;Te<ie.numberOfOutputs;Te+=1){for(let Ie=0;Ie<oe[Te];Ie+=1)copyToChannel(fe,ye[Te],Ie,Ne+Ie,Ce);Ne+=oe[Te]}if(!$e)break}catch(Se){re.dispatchEvent(new ErrorEvent("processorerror",{colno:Se.colno,filename:Se.filename,lineno:Se.lineno,message:Se.message}));break}}return fe},createAudioWorkletNodeRendererFactory=(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe,me,ge,ve,ye,be)=>(Ce,Se,$e)=>{const Te=new WeakMap;let Ne=null;const Ie=async(ke,De)=>{let Oe=fe(ke),Be=null;const Me=isOwnedByContext(Oe,De),Le=Array.isArray(Se.outputChannelCount)?Se.outputChannelCount:Array.from(Se.outputChannelCount);if(me===null){const je=Le.reduce((We,Ye)=>We+Ye,0),ze=oe(De,{channelCount:Math.max(1,je),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,je)}),Ve=[];for(let We=0;We<ke.numberOfOutputs;We+=1)Ve.push(ie(De,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Le[We]}));const He=ce(De,{channelCount:Se.channelCount,channelCountMode:Se.channelCountMode,channelInterpretation:Se.channelInterpretation,gain:1});He.connect=ee.bind(null,Ve),He.disconnect=ue.bind(null,Ve),Be=[ze,Ve,He]}else Me||(Oe=new me(De,Ce));if(Te.set(De,Be===null?Oe:Be[2]),Be!==null){if(Ne===null){if($e===void 0)throw new Error("Missing the processor constructor.");if(ge===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Ye=ke.channelCount*ke.numberOfInputs,Ue=$e.parameterDescriptors===void 0?0:$e.parameterDescriptors.length,Ke=Ye+Ue;Ne=processBuffer(ke,Ke===0?null:await(async()=>{const Vt=new ge(Ke,Math.ceil(ke.context.length/128)*128,De.sampleRate),Wt=[],Kt=[];for(let dn=0;dn<Se.numberOfInputs;dn+=1)Wt.push(ce(Vt,{channelCount:Se.channelCount,channelCountMode:Se.channelCountMode,channelInterpretation:Se.channelInterpretation,gain:1})),Kt.push(oe(Vt,{channelCount:Se.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Se.channelCount}));const tn=await Promise.all(Array.from(ke.parameters.values()).map(async dn=>{const nn=ae(Vt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:dn.value});return await ve(Vt,dn,nn.offset),nn})),Xt=ie(Vt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,Ye+Ue)});for(let dn=0;dn<Se.numberOfInputs;dn+=1){Wt[dn].connect(Kt[dn]);for(let nn=0;nn<Se.channelCount;nn+=1)Kt[dn].connect(Xt,nn,dn*Se.channelCount+nn)}for(const[dn,nn]of tn.entries())nn.connect(Xt,0,Ye+dn),nn.start(0);return Xt.connect(Vt.destination),await Promise.all(Wt.map(dn=>ye(ke,Vt,dn))),be(Vt)})(),De,Se,Le,$e,he)}const je=await Ne,ze=ne(De,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[Ve,He,We]=Be;je!==null&&(ze.buffer=je,ze.start(0)),ze.connect(Ve);for(let Ye=0,Ue=0;Ye<ke.numberOfOutputs;Ye+=1){const Ke=He[Ye];for(let Xe=0;Xe<Le[Ye];Xe+=1)Ve.connect(Ke,Ue+Xe,Xe);Ue+=Le[Ye]}return We}if(Me)for(const[je,ze]of ke.parameters.entries())await re(De,ze,Oe.parameters.get(je));else for(const[je,ze]of ke.parameters.entries())await ve(De,ze,Oe.parameters.get(je));return await ye(ke,De,Oe),Oe};return{render(ke,De){le(De,ke);const Oe=Te.get(De);return Oe!==void 0?Promise.resolve(Oe):Ie(ke,De)}}},createBaseAudioContextConstructor=(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ce,Se,$e,Te)=>class extends ye{constructor(Ie,ke){super(Ie,ke),this._nativeContext=Ie,this._audioWorklet=re===void 0?void 0:{addModule:(De,Oe)=>re(this,De,Oe)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new ee(this)}createBiquadFilter(){return new oe(this)}createBuffer(Ie,ke,De){return new ne({length:ke,numberOfChannels:Ie,sampleRate:De})}createBufferSource(){return new ie(this)}createChannelMerger(Ie=6){return new ae(this,{numberOfInputs:Ie})}createChannelSplitter(Ie=6){return new ce(this,{numberOfOutputs:Ie})}createConstantSource(){return new le(this)}createConvolver(){return new ue(this)}createDelay(Ie=1){return new fe(this,{maxDelayTime:Ie})}createDynamicsCompressor(){return new me(this)}createGain(){return new ge(this)}createIIRFilter(Ie,ke){return new ve(this,{feedback:ke,feedforward:Ie})}createOscillator(){return new be(this)}createPanner(){return new Ce(this)}createPeriodicWave(Ie,ke,De={disableNormalization:!1}){return new Se(this,{...De,imag:ke,real:Ie})}createStereoPanner(){return new $e(this)}createWaveShaper(){return new Te(this)}decodeAudioData(Ie,ke,De){return he(this._nativeContext,Ie).then(Oe=>(typeof ke=="function"&&ke(Oe),Oe),Oe=>{throw typeof De=="function"&&De(Oe),Oe})}},DEFAULT_OPTIONS$f={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},createBiquadFilterNodeConstructor=(re,ee,ne,ie,oe,ae,ce,le)=>class extends re{constructor(he,fe){const me=ae(he),ge={...DEFAULT_OPTIONS$f,...fe},ve=oe(me,ge),ye=ce(me),be=ye?ne():null;super(he,!1,ve,be),this._Q=ee(this,ye,ve.Q,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._detune=ee(this,ye,ve.detune,1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=ee(this,ye,ve.frequency,he.sampleRate/2,0),this._gain=ee(this,ye,ve.gain,40*Math.log10(MOST_POSITIVE_SINGLE_FLOAT),MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=ve,le(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(he){this._nativeBiquadFilterNode.type=he}getFrequencyResponse(he,fe,me){try{this._nativeBiquadFilterNode.getFrequencyResponse(he,fe,me)}catch(ge){throw ge.code===11?ie():ge}if(he.length!==fe.length||fe.length!==me.length)throw ie()}},createBiquadFilterNodeRendererFactory=(re,ee,ne,ie,oe)=>()=>{const ae=new WeakMap,ce=async(le,ue)=>{let he=ne(le);const fe=isOwnedByContext(he,ue);if(!fe){const me={Q:he.Q.value,channelCount:he.channelCount,channelCountMode:he.channelCountMode,channelInterpretation:he.channelInterpretation,detune:he.detune.value,frequency:he.frequency.value,gain:he.gain.value,type:he.type};he=ee(ue,me)}return ae.set(ue,he),fe?(await re(ue,le.Q,he.Q),await re(ue,le.detune,he.detune),await re(ue,le.frequency,he.frequency),await re(ue,le.gain,he.gain)):(await ie(ue,le.Q,he.Q),await ie(ue,le.detune,he.detune),await ie(ue,le.frequency,he.frequency),await ie(ue,le.gain,he.gain)),await oe(le,ue,he),he};return{render(le,ue){const he=ae.get(ue);return he!==void 0?Promise.resolve(he):ce(le,ue)}}},createCacheTestResult=(re,ee)=>(ne,ie)=>{const oe=ee.get(ne);if(oe!==void 0)return oe;const ae=re.get(ne);if(ae!==void 0)return ae;try{const ce=ie();return ce instanceof Promise?(re.set(ne,ce),ce.catch(()=>!1).then(le=>(re.delete(ne),ee.set(ne,le),le))):(ee.set(ne,ce),ce)}catch{return ee.set(ne,!1),!1}},DEFAULT_OPTIONS$e={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},createChannelMergerNodeConstructor=(re,ee,ne,ie,oe)=>class extends re{constructor(ce,le){const ue=ie(ce),he={...DEFAULT_OPTIONS$e,...le},fe=ne(ue,he),me=oe(ue)?ee():null;super(ce,!1,fe,me)}},createChannelMergerNodeRendererFactory=(re,ee,ne)=>()=>{const ie=new WeakMap,oe=async(ae,ce)=>{let le=ee(ae);if(!isOwnedByContext(le,ce)){const he={channelCount:le.channelCount,channelCountMode:le.channelCountMode,channelInterpretation:le.channelInterpretation,numberOfInputs:le.numberOfInputs};le=re(ce,he)}return ie.set(ce,le),await ne(ae,ce,le),le};return{render(ae,ce){const le=ie.get(ce);return le!==void 0?Promise.resolve(le):oe(ae,ce)}}},DEFAULT_OPTIONS$d={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},createChannelSplitterNodeConstructor=(re,ee,ne,ie,oe,ae)=>class extends re{constructor(le,ue){const he=ie(le),fe=ae({...DEFAULT_OPTIONS$d,...ue}),me=ne(he,fe),ge=oe(he)?ee():null;super(le,!1,me,ge)}},createChannelSplitterNodeRendererFactory=(re,ee,ne)=>()=>{const ie=new WeakMap,oe=async(ae,ce)=>{let le=ee(ae);if(!isOwnedByContext(le,ce)){const he={channelCount:le.channelCount,channelCountMode:le.channelCountMode,channelInterpretation:le.channelInterpretation,numberOfOutputs:le.numberOfOutputs};le=re(ce,he)}return ie.set(ce,le),await ne(ae,ce,le),le};return{render(ae,ce){const le=ie.get(ce);return le!==void 0?Promise.resolve(le):oe(ae,ce)}}},createConnectAudioParam=re=>(ee,ne,ie)=>re(ne,ee,ie),createConnectMultipleOutputs=re=>(ee,ne,ie=0,oe=0)=>{const ae=ee[ie];if(ae===void 0)throw re();return isNativeAudioNode$1(ne)?ae.connect(ne,0,oe):ae.connect(ne,0)},createConnectedNativeAudioBufferSourceNodeFactory=re=>(ee,ne)=>{const ie=re(ee,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),oe=ee.createBuffer(1,2,44100);return ie.buffer=oe,ie.loop=!0,ie.connect(ne),ie.start(),()=>{ie.stop(),ie.disconnect(ne)}},DEFAULT_OPTIONS$c={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},createConstantSourceNodeConstructor=(re,ee,ne,ie,oe,ae,ce)=>class extends re{constructor(ue,he){const fe=oe(ue),me={...DEFAULT_OPTIONS$c,...he},ge=ie(fe,me),ve=ae(fe),ye=ve?ne():null;super(ue,!1,ge,ye),this._constantSourceNodeRenderer=ye,this._nativeConstantSourceNode=ge,this._offset=ee(this,ve,ge.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(ue){const he=typeof ue=="function"?ce(this,ue):null;this._nativeConstantSourceNode.onended=he;const fe=this._nativeConstantSourceNode.onended;this._onended=fe!==null&&fe===he?ue:fe}start(ue=0){if(this._nativeConstantSourceNode.start(ue),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=ue),this.context.state!=="closed"){setInternalStateToActive(this);const he=()=>{this._nativeConstantSourceNode.removeEventListener("ended",he),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeConstantSourceNode.addEventListener("ended",he)}}stop(ue=0){this._nativeConstantSourceNode.stop(ue),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=ue)}},createConstantSourceNodeRendererFactory=(re,ee,ne,ie,oe)=>()=>{const ae=new WeakMap;let ce=null,le=null;const ue=async(he,fe)=>{let me=ne(he);const ge=isOwnedByContext(me,fe);if(!ge){const ve={channelCount:me.channelCount,channelCountMode:me.channelCountMode,channelInterpretation:me.channelInterpretation,offset:me.offset.value};me=ee(fe,ve),ce!==null&&me.start(ce),le!==null&&me.stop(le)}return ae.set(fe,me),ge?await re(fe,he.offset,me.offset):await ie(fe,he.offset,me.offset),await oe(he,fe,me),me};return{set start(he){ce=he},set stop(he){le=he},render(he,fe){const me=ae.get(fe);return me!==void 0?Promise.resolve(me):ue(he,fe)}}},createConvertNumberToUnsignedLong=re=>ee=>(re[0]=ee,re[0]),DEFAULT_OPTIONS$b={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},createConvolverNodeConstructor=(re,ee,ne,ie,oe,ae)=>class extends re{constructor(le,ue){const he=ie(le),fe={...DEFAULT_OPTIONS$b,...ue},me=ne(he,fe),ve=oe(he)?ee():null;super(le,!1,me,ve),this._isBufferNullified=!1,this._nativeConvolverNode=me,fe.buffer!==null&&ae(this,fe.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(le){if(this._nativeConvolverNode.buffer=le,le===null&&this._nativeConvolverNode.buffer!==null){const ue=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=ue.createBuffer(1,1,ue.sampleRate),this._isBufferNullified=!0,ae(this,0)}else this._isBufferNullified=!1,ae(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(le){this._nativeConvolverNode.normalize=le}},createConvolverNodeRendererFactory=(re,ee,ne)=>()=>{const ie=new WeakMap,oe=async(ae,ce)=>{let le=ee(ae);if(!isOwnedByContext(le,ce)){const he={buffer:le.buffer,channelCount:le.channelCount,channelCountMode:le.channelCountMode,channelInterpretation:le.channelInterpretation,disableNormalization:!le.normalize};le=re(ce,he)}return ie.set(ce,le),isNativeAudioNodeFaker(le)?await ne(ae,ce,le.inputs[0]):await ne(ae,ce,le),le};return{render(ae,ce){const le=ie.get(ce);return le!==void 0?Promise.resolve(le):oe(ae,ce)}}},createCreateNativeOfflineAudioContext=(re,ee)=>(ne,ie,oe)=>{if(ee===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new ee(ne,ie,oe)}catch(ae){throw ae.name==="SyntaxError"?re():ae}},createDataCloneError=()=>new DOMException("","DataCloneError"),detachArrayBuffer=re=>{const{port1:ee,port2:ne}=new MessageChannel;return new Promise(ie=>{const oe=()=>{ne.onmessage=null,ee.close(),ne.close(),ie()};ne.onmessage=()=>oe();try{ee.postMessage(re,[re])}catch{}finally{oe()}})},createDecodeAudioData=(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe)=>(me,ge)=>{const ve=ce(me)?me:ae(me);if(oe.has(ge)){const ye=ne();return Promise.reject(ye)}try{oe.add(ge)}catch{}return ee(ue,()=>ue(ve))?ve.decodeAudioData(ge).then(ye=>(detachArrayBuffer(ge).catch(()=>{}),ee(le,()=>le(ye))||fe(ye),re.add(ye),ye)):new Promise((ye,be)=>{const Ce=async()=>{try{await detachArrayBuffer(ge)}catch{}},Se=$e=>{be($e),Ce()};try{ve.decodeAudioData(ge,$e=>{typeof $e.copyFromChannel!="function"&&(he($e),wrapAudioBufferGetChannelDataMethod($e)),re.add($e),Ce().then(()=>ye($e))},$e=>{Se($e===null?ie():$e)})}catch($e){Se($e)}})},createDecrementCycleCounter=(re,ee,ne,ie,oe,ae,ce,le)=>(ue,he)=>{const fe=ee.get(ue);if(fe===void 0)throw new Error("Missing the expected cycle count.");const me=ae(ue.context),ge=le(me);if(fe===he){if(ee.delete(ue),!ge&&ce(ue)){const ve=ie(ue),{outputs:ye}=ne(ue);for(const be of ye)if(isAudioNodeOutputConnection(be)){const Ce=ie(be[0]);re(ve,Ce,be[1],be[2])}else{const Ce=oe(be[0]);ve.connect(Ce,be[1])}}}else ee.set(ue,fe-he)},DEFAULT_OPTIONS$a={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},createDelayNodeConstructor=(re,ee,ne,ie,oe,ae,ce)=>class extends re{constructor(ue,he){const fe=oe(ue),me={...DEFAULT_OPTIONS$a,...he},ge=ie(fe,me),ve=ae(fe),ye=ve?ne(me.maxDelayTime):null;super(ue,!1,ge,ye),this._delayTime=ee(this,ve,ge.delayTime),ce(this,me.maxDelayTime)}get delayTime(){return this._delayTime}},createDelayNodeRendererFactory=(re,ee,ne,ie,oe)=>ae=>{const ce=new WeakMap,le=async(ue,he)=>{let fe=ne(ue);const me=isOwnedByContext(fe,he);if(!me){const ge={channelCount:fe.channelCount,channelCountMode:fe.channelCountMode,channelInterpretation:fe.channelInterpretation,delayTime:fe.delayTime.value,maxDelayTime:ae};fe=ee(he,ge)}return ce.set(he,fe),me?await re(he,ue.delayTime,fe.delayTime):await ie(he,ue.delayTime,fe.delayTime),await oe(ue,he,fe),fe};return{render(ue,he){const fe=ce.get(he);return fe!==void 0?Promise.resolve(fe):le(ue,he)}}},createDeleteActiveInputConnectionToAudioNode=re=>(ee,ne,ie,oe)=>re(ee[oe],ae=>ae[0]===ne&&ae[1]===ie),createDeleteUnrenderedAudioWorkletNode=re=>(ee,ne)=>{re(ee).delete(ne)},isDelayNode=re=>"delayTime"in re,createDetectCycles=(re,ee,ne)=>function ie(oe,ae){const ce=isAudioNode$1(ae)?ae:ne(re,ae);if(isDelayNode(ce))return[];if(oe[0]===ce)return[oe];if(oe.includes(ce))return[];const{outputs:le}=ee(ce);return Array.from(le).map(ue=>ie([...oe,ce],ue[0])).reduce((ue,he)=>ue.concat(he),[])},getOutputAudioNodeAtIndex=(re,ee,ne)=>{const ie=ee[ne];if(ie===void 0)throw re();return ie},createDisconnectMultipleOutputs=re=>(ee,ne=void 0,ie=void 0,oe=0)=>ne===void 0?ee.forEach(ae=>ae.disconnect()):typeof ne=="number"?getOutputAudioNodeAtIndex(re,ee,ne).disconnect():isNativeAudioNode$1(ne)?ie===void 0?ee.forEach(ae=>ae.disconnect(ne)):oe===void 0?getOutputAudioNodeAtIndex(re,ee,ie).disconnect(ne,0):getOutputAudioNodeAtIndex(re,ee,ie).disconnect(ne,0,oe):ie===void 0?ee.forEach(ae=>ae.disconnect(ne)):getOutputAudioNodeAtIndex(re,ee,ie).disconnect(ne,0),DEFAULT_OPTIONS$9={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},createDynamicsCompressorNodeConstructor=(re,ee,ne,ie,oe,ae,ce,le)=>class extends re{constructor(he,fe){const me=ae(he),ge={...DEFAULT_OPTIONS$9,...fe},ve=ie(me,ge),ye=ce(me),be=ye?ne():null;super(he,!1,ve,be),this._attack=ee(this,ye,ve.attack),this._knee=ee(this,ye,ve.knee),this._nativeDynamicsCompressorNode=ve,this._ratio=ee(this,ye,ve.ratio),this._release=ee(this,ye,ve.release),this._threshold=ee(this,ye,ve.threshold),le(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(he){const fe=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=he,he>2)throw this._nativeDynamicsCompressorNode.channelCount=fe,oe()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(he){const fe=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=he,he==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=fe,oe()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},createDynamicsCompressorNodeRendererFactory=(re,ee,ne,ie,oe)=>()=>{const ae=new WeakMap,ce=async(le,ue)=>{let he=ne(le);const fe=isOwnedByContext(he,ue);if(!fe){const me={attack:he.attack.value,channelCount:he.channelCount,channelCountMode:he.channelCountMode,channelInterpretation:he.channelInterpretation,knee:he.knee.value,ratio:he.ratio.value,release:he.release.value,threshold:he.threshold.value};he=ee(ue,me)}return ae.set(ue,he),fe?(await re(ue,le.attack,he.attack),await re(ue,le.knee,he.knee),await re(ue,le.ratio,he.ratio),await re(ue,le.release,he.release),await re(ue,le.threshold,he.threshold)):(await ie(ue,le.attack,he.attack),await ie(ue,le.knee,he.knee),await ie(ue,le.ratio,he.ratio),await ie(ue,le.release,he.release),await ie(ue,le.threshold,he.threshold)),await oe(le,ue,he),he};return{render(le,ue){const he=ae.get(ue);return he!==void 0?Promise.resolve(he):ce(le,ue)}}},createEncodingError=()=>new DOMException("","EncodingError"),createEvaluateSource=re=>ee=>new Promise((ne,ie)=>{if(re===null){ie(new SyntaxError);return}const oe=re.document.head;if(oe===null)ie(new SyntaxError);else{const ae=re.document.createElement("script"),ce=new Blob([ee],{type:"application/javascript"}),le=URL.createObjectURL(ce),ue=re.onerror,he=()=>{re.onerror=ue,URL.revokeObjectURL(le)};re.onerror=(fe,me,ge,ve,ye)=>{if(me===le||me===re.location.href&&ge===1&&ve===1)return he(),ie(ye),!1;if(ue!==null)return ue(fe,me,ge,ve,ye)},ae.onerror=()=>{he(),ie(new SyntaxError)},ae.onload=()=>{he(),ne()},ae.src=le,ae.type="module",oe.appendChild(ae)}}),createEventTargetConstructor=re=>class{constructor(ne){this._nativeEventTarget=ne,this._listeners=new WeakMap}addEventListener(ne,ie,oe){if(ie!==null){let ae=this._listeners.get(ie);ae===void 0&&(ae=re(this,ie),typeof ie=="function"&&this._listeners.set(ie,ae)),this._nativeEventTarget.addEventListener(ne,ae,oe)}}dispatchEvent(ne){return this._nativeEventTarget.dispatchEvent(ne)}removeEventListener(ne,ie,oe){const ae=ie===null?void 0:this._listeners.get(ie);this._nativeEventTarget.removeEventListener(ne,ae===void 0?null:ae,oe)}},createExposeCurrentFrameAndCurrentTime=re=>(ee,ne,ie)=>{Object.defineProperties(re,{currentFrame:{configurable:!0,get(){return Math.round(ee*ne)}},currentTime:{configurable:!0,get(){return ee}}});try{return ie()}finally{re!==null&&(delete re.currentFrame,delete re.currentTime)}},createFetchSource=re=>async ee=>{try{const ne=await fetch(ee);if(ne.ok)return[await ne.text(),ne.url]}catch{}throw re()},DEFAULT_OPTIONS$8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},createGainNodeConstructor=(re,ee,ne,ie,oe,ae)=>class extends re{constructor(le,ue){const he=oe(le),fe={...DEFAULT_OPTIONS$8,...ue},me=ie(he,fe),ge=ae(he),ve=ge?ne():null;super(le,!1,me,ve),this._gain=ee(this,ge,me.gain,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}},createGainNodeRendererFactory=(re,ee,ne,ie,oe)=>()=>{const ae=new WeakMap,ce=async(le,ue)=>{let he=ne(le);const fe=isOwnedByContext(he,ue);if(!fe){const me={channelCount:he.channelCount,channelCountMode:he.channelCountMode,channelInterpretation:he.channelInterpretation,gain:he.gain.value};he=ee(ue,me)}return ae.set(ue,he),fe?await re(ue,le.gain,he.gain):await ie(ue,le.gain,he.gain),await oe(le,ue,he),he};return{render(le,ue){const he=ae.get(ue);return he!==void 0?Promise.resolve(he):ce(le,ue)}}},createGetActiveAudioWorkletNodeInputs=(re,ee)=>ne=>ee(re,ne),createGetAudioNodeRenderer=re=>ee=>{const ne=re(ee);if(ne.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return ne.renderer},createGetAudioNodeTailTime=re=>ee=>{var ne;return(ne=re.get(ee))!==null&&ne!==void 0?ne:0},createGetAudioParamRenderer=re=>ee=>{const ne=re(ee);if(ne.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return ne.renderer},createGetBackupOfflineAudioContext=re=>ee=>re.get(ee),createInvalidStateError=()=>new DOMException("","InvalidStateError"),createGetNativeContext=re=>ee=>{const ne=re.get(ee);if(ne===void 0)throw createInvalidStateError();return ne},createGetOrCreateBackupOfflineAudioContext=(re,ee)=>ne=>{let ie=re.get(ne);if(ie!==void 0)return ie;if(ee===null)throw new Error("Missing the native OfflineAudioContext constructor.");return ie=new ee(1,1,44100),re.set(ne,ie),ie},createGetUnrenderedAudioWorkletNodes=re=>ee=>{const ne=re.get(ee);if(ne===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return ne},createInvalidAccessError=()=>new DOMException("","InvalidAccessError"),wrapIIRFilterNodeGetFrequencyResponseMethod=re=>{re.getFrequencyResponse=(ee=>(ne,ie,oe)=>{if(ne.length!==ie.length||ie.length!==oe.length)throw createInvalidAccessError();return ee.call(re,ne,ie,oe)})(re.getFrequencyResponse)},DEFAULT_OPTIONS$7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},createIIRFilterNodeConstructor=(re,ee,ne,ie,oe,ae)=>class extends re{constructor(le,ue){const he=ie(le),fe=oe(he),me={...DEFAULT_OPTIONS$7,...ue},ge=ee(he,fe?null:le.baseLatency,me),ve=fe?ne(me.feedback,me.feedforward):null;super(le,!1,ge,ve),wrapIIRFilterNodeGetFrequencyResponseMethod(ge),this._nativeIIRFilterNode=ge,ae(this,1)}getFrequencyResponse(le,ue,he){return this._nativeIIRFilterNode.getFrequencyResponse(le,ue,he)}},filterBuffer=(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe)=>{const me=he.length;let ge=le;for(let ve=0;ve<me;ve+=1){let ye=ne[0]*he[ve];for(let be=1;be<oe;be+=1){const Ce=ge-be&ue-1;ye+=ne[be]*ae[Ce],ye-=re[be]*ce[Ce]}for(let be=oe;be<ie;be+=1)ye+=ne[be]*ae[ge-be&ue-1];for(let be=oe;be<ee;be+=1)ye-=re[be]*ce[ge-be&ue-1];ae[ge]=he[ve],ce[ge]=ye,ge=ge+1&ue-1,fe[ve]=ye}return ge},filterFullBuffer=(re,ee,ne,ie)=>{const oe=ne instanceof Float64Array?ne:new Float64Array(ne),ae=ie instanceof Float64Array?ie:new Float64Array(ie),ce=oe.length,le=ae.length,ue=Math.min(ce,le);if(oe[0]!==1){for(let ye=0;ye<ce;ye+=1)ae[ye]/=oe[0];for(let ye=1;ye<le;ye+=1)oe[ye]/=oe[0]}const he=32,fe=new Float32Array(he),me=new Float32Array(he),ge=ee.createBuffer(re.numberOfChannels,re.length,re.sampleRate),ve=re.numberOfChannels;for(let ye=0;ye<ve;ye+=1){const be=re.getChannelData(ye),Ce=ge.getChannelData(ye);fe.fill(0),me.fill(0),filterBuffer(oe,ce,ae,le,ue,fe,me,0,he,be,Ce)}return ge},createIIRFilterNodeRendererFactory=(re,ee,ne,ie,oe)=>(ae,ce)=>{const le=new WeakMap;let ue=null;const he=async(fe,me)=>{let ge=null,ve=ee(fe);const ye=isOwnedByContext(ve,me);if(me.createIIRFilter===void 0?ge=re(me,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):ye||(ve=me.createIIRFilter(ce,ae)),le.set(me,ge===null?ve:ge),ge!==null){if(ue===null){if(ne===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Ce=new ne(fe.context.destination.channelCount,fe.context.length,me.sampleRate);ue=(async()=>{await ie(fe,Ce,Ce.destination);const Se=await oe(Ce);return filterFullBuffer(Se,me,ae,ce)})()}const be=await ue;return ge.buffer=be,ge.start(0),ge}return await ie(fe,me,ve),ve};return{render(fe,me){const ge=le.get(me);return ge!==void 0?Promise.resolve(ge):he(fe,me)}}},createIncrementCycleCounterFactory=(re,ee,ne,ie,oe,ae)=>ce=>(le,ue)=>{const he=re.get(le);if(he===void 0){if(!ce&&ae(le)){const fe=ie(le),{outputs:me}=ne(le);for(const ge of me)if(isAudioNodeOutputConnection(ge)){const ve=ie(ge[0]);ee(fe,ve,ge[1],ge[2])}else{const ve=oe(ge[0]);fe.disconnect(ve,ge[1])}}re.set(le,ue)}else re.set(le,he+ue)},createIsAnyAudioContext=(re,ee)=>ne=>{const ie=re.get(ne);return ee(ie)||ee(ne)},createIsAnyAudioNode=(re,ee)=>ne=>re.has(ne)||ee(ne),createIsAnyAudioParam=(re,ee)=>ne=>re.has(ne)||ee(ne),createIsAnyOfflineAudioContext=(re,ee)=>ne=>{const ie=re.get(ne);return ee(ie)||ee(ne)},createIsNativeAudioContext=re=>ee=>re!==null&&ee instanceof re,createIsNativeAudioNode=re=>ee=>re!==null&&typeof re.AudioNode=="function"&&ee instanceof re.AudioNode,createIsNativeAudioParam=re=>ee=>re!==null&&typeof re.AudioParam=="function"&&ee instanceof re.AudioParam,createIsNativeContext=(re,ee)=>ne=>re(ne)||ee(ne),createIsNativeOfflineAudioContext=re=>ee=>re!==null&&ee instanceof re,createIsSecureContext=re=>re!==null&&re.isSecureContext,createIsSupportedPromise=async(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe,me,ge,ve,ye,be)=>re(ee,ee)&&re(ne,ne)&&re(oe,oe)&&re(ae,ae)&&re(le,le)&&re(ue,ue)&&re(he,he)&&re(fe,fe)&&re(me,me)&&re(ge,ge)&&re(ve,ve)?(await Promise.all([re(ie,ie),re(ce,ce),re(ye,ye),re(be,be)])).every(Se=>Se):!1,createMediaElementAudioSourceNodeConstructor=(re,ee,ne,ie)=>class extends re{constructor(ae,ce){const le=ne(ae),ue=ee(le,ce);if(ie(le))throw TypeError();super(ae,!0,ue,null),this._nativeMediaElementAudioSourceNode=ue}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},DEFAULT_OPTIONS$6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},createMediaStreamAudioDestinationNodeConstructor=(re,ee,ne,ie)=>class extends re{constructor(ae,ce){const le=ne(ae);if(ie(le))throw new TypeError;const ue={...DEFAULT_OPTIONS$6,...ce},he=ee(le,ue);super(ae,!1,he,null),this._nativeMediaStreamAudioDestinationNode=he}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},createMediaStreamAudioSourceNodeConstructor=(re,ee,ne,ie)=>class extends re{constructor(ae,ce){const le=ne(ae),ue=ee(le,ce);if(ie(le))throw new TypeError;super(ae,!0,ue,null),this._nativeMediaStreamAudioSourceNode=ue}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},createMediaStreamTrackAudioSourceNodeConstructor=(re,ee,ne)=>class extends re{constructor(oe,ae){const ce=ne(oe),le=ee(ce,ae);super(oe,!0,le,null)}},createMinimalBaseAudioContextConstructor=(re,ee,ne,ie,oe,ae)=>class extends ne{constructor(le,ue){super(le),this._nativeContext=le,CONTEXT_STORE.set(this,le),ie(le)&&oe.set(le,new Set),this._destination=new re(this,ue),this._listener=ee(this,le),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(le){const ue=typeof le=="function"?ae(this,le):null;this._nativeContext.onstatechange=ue;const he=this._nativeContext.onstatechange;this._onstatechange=he!==null&&he===ue?le:he}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},testPromiseSupport=re=>{const ee=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const ne=re.decodeAudioData(ee.buffer,()=>{});return ne===void 0?!1:(ne.catch(()=>{}),!0)}catch{}return!1},createMonitorConnections=(re,ee)=>(ne,ie,oe)=>{const ae=new Set;return ne.connect=(ce=>(le,ue=0,he=0)=>{const fe=ae.size===0;if(ee(le))return ce.call(ne,le,ue,he),re(ae,[le,ue,he],me=>me[0]===le&&me[1]===ue&&me[2]===he,!0),fe&&ie(),le;ce.call(ne,le,ue),re(ae,[le,ue],me=>me[0]===le&&me[1]===ue,!0),fe&&ie()})(ne.connect),ne.disconnect=(ce=>(le,ue,he)=>{const fe=ae.size>0;if(le===void 0)ce.apply(ne),ae.clear();else if(typeof le=="number"){ce.call(ne,le);for(const ge of ae)ge[1]===le&&ae.delete(ge)}else{ee(le)?ce.call(ne,le,ue,he):ce.call(ne,le,ue);for(const ge of ae)ge[0]===le&&(ue===void 0||ge[1]===ue)&&(he===void 0||ge[2]===he)&&ae.delete(ge)}const me=ae.size===0;fe&&me&&oe()})(ne.disconnect),ne},assignNativeAudioNodeOption=(re,ee,ne)=>{const ie=ee[ne];ie!==void 0&&ie!==re[ne]&&(re[ne]=ie)},assignNativeAudioNodeOptions=(re,ee)=>{assignNativeAudioNodeOption(re,ee,"channelCount"),assignNativeAudioNodeOption(re,ee,"channelCountMode"),assignNativeAudioNodeOption(re,ee,"channelInterpretation")},testAnalyserNodeGetFloatTimeDomainDataMethodSupport=re=>typeof re.getFloatTimeDomainData=="function",wrapAnalyserNodeGetFloatTimeDomainDataMethod=re=>{re.getFloatTimeDomainData=ee=>{const ne=new Uint8Array(ee.length);re.getByteTimeDomainData(ne);const ie=Math.max(ne.length,re.fftSize);for(let oe=0;oe<ie;oe+=1)ee[oe]=(ne[oe]-128)*.0078125;return ee}},createNativeAnalyserNodeFactory=(re,ee)=>(ne,ie)=>{const oe=ne.createAnalyser();if(assignNativeAudioNodeOptions(oe,ie),!(ie.maxDecibels>ie.minDecibels))throw ee();return assignNativeAudioNodeOption(oe,ie,"fftSize"),assignNativeAudioNodeOption(oe,ie,"maxDecibels"),assignNativeAudioNodeOption(oe,ie,"minDecibels"),assignNativeAudioNodeOption(oe,ie,"smoothingTimeConstant"),re(testAnalyserNodeGetFloatTimeDomainDataMethodSupport,()=>testAnalyserNodeGetFloatTimeDomainDataMethodSupport(oe))||wrapAnalyserNodeGetFloatTimeDomainDataMethod(oe),oe},createNativeAudioBufferConstructor=re=>re===null?null:re.hasOwnProperty("AudioBuffer")?re.AudioBuffer:null,assignNativeAudioNodeAudioParamValue=(re,ee,ne)=>{const ie=ee[ne];ie!==void 0&&ie!==re[ne].value&&(re[ne].value=ie)},wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=re=>{re.start=(ee=>{let ne=!1;return(ie=0,oe=0,ae)=>{if(ne)throw createInvalidStateError();ee.call(re,ie,oe,ae),ne=!0}})(re.start)},wrapAudioScheduledSourceNodeStartMethodNegativeParameters=re=>{re.start=(ee=>(ne=0,ie=0,oe)=>{if(typeof oe=="number"&&oe<0||ie<0||ne<0)throw new RangeError("The parameters can't be negative.");ee.call(re,ne,ie,oe)})(re.start)},wrapAudioScheduledSourceNodeStopMethodNegativeParameters=re=>{re.stop=(ee=>(ne=0)=>{if(ne<0)throw new RangeError("The parameter can't be negative.");ee.call(re,ne)})(re.stop)},createNativeAudioBufferSourceNodeFactory=(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe)=>(me,ge)=>{const ve=me.createBufferSource();return assignNativeAudioNodeOptions(ve,ge),assignNativeAudioNodeAudioParamValue(ve,ge,"playbackRate"),assignNativeAudioNodeOption(ve,ge,"buffer"),assignNativeAudioNodeOption(ve,ge,"loop"),assignNativeAudioNodeOption(ve,ge,"loopEnd"),assignNativeAudioNodeOption(ve,ge,"loopStart"),ee(ne,()=>ne(me))||wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(ve),ee(ie,()=>ie(me))||ue(ve),ee(oe,()=>oe(me))||he(ve,me),ee(ae,()=>ae(me))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(ve),ee(ce,()=>ce(me))||fe(ve,me),ee(le,()=>le(me))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(ve),re(me,ve),ve},createNativeAudioContextConstructor=re=>re===null?null:re.hasOwnProperty("AudioContext")?re.AudioContext:re.hasOwnProperty("webkitAudioContext")?re.webkitAudioContext:null,createNativeAudioDestinationNodeFactory=(re,ee)=>(ne,ie,oe)=>{const ae=ne.destination;if(ae.channelCount!==ie)try{ae.channelCount=ie}catch{}oe&&ae.channelCountMode!=="explicit"&&(ae.channelCountMode="explicit"),ae.maxChannelCount===0&&Object.defineProperty(ae,"maxChannelCount",{value:ie});const ce=re(ne,{channelCount:ie,channelCountMode:ae.channelCountMode,channelInterpretation:ae.channelInterpretation,gain:1});return ee(ce,"channelCount",le=>()=>le.call(ce),le=>ue=>{le.call(ce,ue);try{ae.channelCount=ue}catch(he){if(ue>ae.maxChannelCount)throw he}}),ee(ce,"channelCountMode",le=>()=>le.call(ce),le=>ue=>{le.call(ce,ue),ae.channelCountMode=ue}),ee(ce,"channelInterpretation",le=>()=>le.call(ce),le=>ue=>{le.call(ce,ue),ae.channelInterpretation=ue}),Object.defineProperty(ce,"maxChannelCount",{get:()=>ae.maxChannelCount}),ce.connect(ae),ce},createNativeAudioWorkletNodeConstructor=re=>re===null?null:re.hasOwnProperty("AudioWorkletNode")?re.AudioWorkletNode:null,testClonabilityOfAudioWorkletNodeOptions=re=>{const{port1:ee}=new MessageChannel;try{ee.postMessage(re)}finally{ee.close()}},createNativeAudioWorkletNodeFactory=(re,ee,ne,ie,oe)=>(ae,ce,le,ue,he,fe)=>{if(le!==null)try{const me=new le(ae,ue,fe),ge=new Map;let ve=null;if(Object.defineProperties(me,{channelCount:{get:()=>fe.channelCount,set:()=>{throw re()}},channelCountMode:{get:()=>"explicit",set:()=>{throw re()}},onprocessorerror:{get:()=>ve,set:ye=>{typeof ve=="function"&&me.removeEventListener("processorerror",ve),ve=typeof ye=="function"?ye:null,typeof ve=="function"&&me.addEventListener("processorerror",ve)}}}),me.addEventListener=(ye=>(...be)=>{if(be[0]==="processorerror"){const Ce=typeof be[1]=="function"?be[1]:typeof be[1]=="object"&&be[1]!==null&&typeof be[1].handleEvent=="function"?be[1].handleEvent:null;if(Ce!==null){const Se=ge.get(be[1]);Se!==void 0?be[1]=Se:(be[1]=$e=>{$e.type==="error"?(Object.defineProperties($e,{type:{value:"processorerror"}}),Ce($e)):Ce(new ErrorEvent(be[0],{...$e}))},ge.set(Ce,be[1]))}}return ye.call(me,"error",be[1],be[2]),ye.call(me,...be)})(me.addEventListener),me.removeEventListener=(ye=>(...be)=>{if(be[0]==="processorerror"){const Ce=ge.get(be[1]);Ce!==void 0&&(ge.delete(be[1]),be[1]=Ce)}return ye.call(me,"error",be[1],be[2]),ye.call(me,be[0],be[1],be[2])})(me.removeEventListener),fe.numberOfOutputs!==0){const ye=ne(ae,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return me.connect(ye).connect(ae.destination),oe(me,()=>ye.disconnect(),()=>ye.connect(ae.destination))}return me}catch(me){throw me.code===11?ie():me}if(he===void 0)throw ie();return testClonabilityOfAudioWorkletNodeOptions(fe),ee(ae,ce,he,fe)},computeBufferSize=(re,ee)=>re===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(re*ee))))),cloneAudioWorkletNodeOptions=re=>new Promise((ee,ne)=>{const{port1:ie,port2:oe}=new MessageChannel;ie.onmessage=({data:ae})=>{ie.close(),oe.close(),ee(ae)},ie.onmessageerror=({data:ae})=>{ie.close(),oe.close(),ne(ae)},oe.postMessage(re)}),createAudioWorkletProcessorPromise=async(re,ee)=>{const ne=await cloneAudioWorkletNodeOptions(ee);return new re(ne)},createAudioWorkletProcessor=(re,ee,ne,ie)=>{let oe=NODE_TO_PROCESSOR_MAPS.get(re);oe===void 0&&(oe=new WeakMap,NODE_TO_PROCESSOR_MAPS.set(re,oe));const ae=createAudioWorkletProcessorPromise(ne,ie);return oe.set(ee,ae),ae},createNativeAudioWorkletNodeFakerFactory=(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe,me,ge)=>(ve,ye,be,Ce)=>{if(Ce.numberOfInputs===0&&Ce.numberOfOutputs===0)throw ue();const Se=Array.isArray(Ce.outputChannelCount)?Ce.outputChannelCount:Array.from(Ce.outputChannelCount);if(Se.some(Je=>Je<1))throw ue();if(Se.length!==Ce.numberOfOutputs)throw ee();if(Ce.channelCountMode!=="explicit")throw ue();const $e=Ce.channelCount*Ce.numberOfInputs,Te=Se.reduce((Je,Yt)=>Je+Yt,0),Ne=be.parameterDescriptors===void 0?0:be.parameterDescriptors.length;if($e+Ne>6||Te>6)throw ue();const Ie=new MessageChannel,ke=[],De=[];for(let Je=0;Je<Ce.numberOfInputs;Je+=1)ke.push(ce(ve,{channelCount:Ce.channelCount,channelCountMode:Ce.channelCountMode,channelInterpretation:Ce.channelInterpretation,gain:1})),De.push(oe(ve,{channelCount:Ce.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Ce.channelCount}));const Oe=[];if(be.parameterDescriptors!==void 0)for(const{defaultValue:Je,maxValue:Yt,minValue:an,name:An}of be.parameterDescriptors){const fn=ae(ve,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Ce.parameterData[An]!==void 0?Ce.parameterData[An]:Je===void 0?0:Je});Object.defineProperties(fn.offset,{defaultValue:{get:()=>Je===void 0?0:Je},maxValue:{get:()=>Yt===void 0?MOST_POSITIVE_SINGLE_FLOAT:Yt},minValue:{get:()=>an===void 0?MOST_NEGATIVE_SINGLE_FLOAT:an}}),Oe.push(fn)}const Be=ie(ve,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,$e+Ne)}),Me=computeBufferSize(ye,ve.sampleRate),Le=le(ve,Me,$e+Ne,Math.max(1,Te)),je=oe(ve,{channelCount:Math.max(1,Te),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,Te)}),ze=[];for(let Je=0;Je<Ce.numberOfOutputs;Je+=1)ze.push(ie(ve,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Se[Je]}));for(let Je=0;Je<Ce.numberOfInputs;Je+=1){ke[Je].connect(De[Je]);for(let Yt=0;Yt<Ce.channelCount;Yt+=1)De[Je].connect(Be,Yt,Je*Ce.channelCount+Yt)}const Ve=new ReadOnlyMap(be.parameterDescriptors===void 0?[]:be.parameterDescriptors.map(({name:Je},Yt)=>{const an=Oe[Yt];return an.connect(Be,0,$e+Yt),an.start(0),[Je,an.offset]}));Be.connect(Le);let He=Ce.channelInterpretation,We=null;const Ye=Ce.numberOfOutputs===0?[Le]:ze,Ue={get bufferSize(){return Me},get channelCount(){return Ce.channelCount},set channelCount(Je){throw ne()},get channelCountMode(){return Ce.channelCountMode},set channelCountMode(Je){throw ne()},get channelInterpretation(){return He},set channelInterpretation(Je){for(const Yt of ke)Yt.channelInterpretation=Je;He=Je},get context(){return Le.context},get inputs(){return ke},get numberOfInputs(){return Ce.numberOfInputs},get numberOfOutputs(){return Ce.numberOfOutputs},get onprocessorerror(){return We},set onprocessorerror(Je){typeof We=="function"&&Ue.removeEventListener("processorerror",We),We=typeof Je=="function"?Je:null,typeof We=="function"&&Ue.addEventListener("processorerror",We)},get parameters(){return Ve},get port(){return Ie.port2},addEventListener(...Je){return Le.addEventListener(Je[0],Je[1],Je[2])},connect:re.bind(null,Ye),disconnect:he.bind(null,Ye),dispatchEvent(...Je){return Le.dispatchEvent(Je[0])},removeEventListener(...Je){return Le.removeEventListener(Je[0],Je[1],Je[2])}},Ke=new Map;Ie.port1.addEventListener=(Je=>(...Yt)=>{if(Yt[0]==="message"){const an=typeof Yt[1]=="function"?Yt[1]:typeof Yt[1]=="object"&&Yt[1]!==null&&typeof Yt[1].handleEvent=="function"?Yt[1].handleEvent:null;if(an!==null){const An=Ke.get(Yt[1]);An!==void 0?Yt[1]=An:(Yt[1]=fn=>{fe(ve.currentTime,ve.sampleRate,()=>an(fn))},Ke.set(an,Yt[1]))}}return Je.call(Ie.port1,Yt[0],Yt[1],Yt[2])})(Ie.port1.addEventListener),Ie.port1.removeEventListener=(Je=>(...Yt)=>{if(Yt[0]==="message"){const an=Ke.get(Yt[1]);an!==void 0&&(Ke.delete(Yt[1]),Yt[1]=an)}return Je.call(Ie.port1,Yt[0],Yt[1],Yt[2])})(Ie.port1.removeEventListener);let Xe=null;Object.defineProperty(Ie.port1,"onmessage",{get:()=>Xe,set:Je=>{typeof Xe=="function"&&Ie.port1.removeEventListener("message",Xe),Xe=typeof Je=="function"?Je:null,typeof Xe=="function"&&(Ie.port1.addEventListener("message",Xe),Ie.port1.start())}}),be.prototype.port=Ie.port1;let Vt=null;createAudioWorkletProcessor(ve,Ue,be,Ce).then(Je=>Vt=Je);const Kt=createNestedArrays(Ce.numberOfInputs,Ce.channelCount),tn=createNestedArrays(Ce.numberOfOutputs,Se),Xt=be.parameterDescriptors===void 0?[]:be.parameterDescriptors.reduce((Je,{name:Yt})=>({...Je,[Yt]:new Float32Array(128)}),{});let dn=!0;const nn=()=>{Ce.numberOfOutputs>0&&Le.disconnect(je);for(let Je=0,Yt=0;Je<Ce.numberOfOutputs;Je+=1){const an=ze[Je];for(let An=0;An<Se[Je];An+=1)je.disconnect(an,Yt+An,An);Yt+=Se[Je]}},rn=new Map;Le.onaudioprocess=({inputBuffer:Je,outputBuffer:Yt})=>{if(Vt!==null){const an=me(Ue);for(let An=0;An<Me;An+=128){for(let fn=0;fn<Ce.numberOfInputs;fn+=1)for(let mn=0;mn<Ce.channelCount;mn+=1)copyFromChannel(Je,Kt[fn],mn,mn,An);be.parameterDescriptors!==void 0&&be.parameterDescriptors.forEach(({name:fn},mn)=>{copyFromChannel(Je,Xt,fn,$e+mn,An)});for(let fn=0;fn<Ce.numberOfInputs;fn+=1)for(let mn=0;mn<Se[fn];mn+=1)tn[fn][mn].byteLength===0&&(tn[fn][mn]=new Float32Array(128));try{const fn=Kt.map((Tn,Vn)=>{if(an[Vn].size>0)return rn.set(Vn,Me/128),Tn;const Pn=rn.get(Vn);return Pn===void 0?[]:(Tn.every(Un=>Un.every(ls=>ls===0))&&(Pn===1?rn.delete(Vn):rn.set(Vn,Pn-1)),Tn)});dn=fe(ve.currentTime+An/ve.sampleRate,ve.sampleRate,()=>Vt.process(fn,tn,Xt));for(let Tn=0,Vn=0;Tn<Ce.numberOfOutputs;Tn+=1){for(let Gn=0;Gn<Se[Tn];Gn+=1)copyToChannel(Yt,tn[Tn],Gn,Vn+Gn,An);Vn+=Se[Tn]}}catch(fn){dn=!1,Ue.dispatchEvent(new ErrorEvent("processorerror",{colno:fn.colno,filename:fn.filename,lineno:fn.lineno,message:fn.message}))}if(!dn){for(let fn=0;fn<Ce.numberOfInputs;fn+=1){ke[fn].disconnect(De[fn]);for(let mn=0;mn<Ce.channelCount;mn+=1)De[An].disconnect(Be,mn,fn*Ce.channelCount+mn)}if(be.parameterDescriptors!==void 0){const fn=be.parameterDescriptors.length;for(let mn=0;mn<fn;mn+=1){const Tn=Oe[mn];Tn.disconnect(Be,0,$e+mn),Tn.stop()}}Be.disconnect(Le),Le.onaudioprocess=null,vn?nn():kn();break}}}};let vn=!1;const yn=ce(ve,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Sn=()=>Le.connect(yn).connect(ve.destination),kn=()=>{Le.disconnect(yn),yn.disconnect()},Bn=()=>{if(dn){kn(),Ce.numberOfOutputs>0&&Le.connect(je);for(let Je=0,Yt=0;Je<Ce.numberOfOutputs;Je+=1){const an=ze[Je];for(let An=0;An<Se[Je];An+=1)je.connect(an,Yt+An,An);Yt+=Se[Je]}}vn=!0},Dn=()=>{dn&&(Sn(),nn()),vn=!1};return Sn(),ge(Ue,Bn,Dn)},createNativeBiquadFilterNode=(re,ee)=>{const ne=re.createBiquadFilter();return assignNativeAudioNodeOptions(ne,ee),assignNativeAudioNodeAudioParamValue(ne,ee,"Q"),assignNativeAudioNodeAudioParamValue(ne,ee,"detune"),assignNativeAudioNodeAudioParamValue(ne,ee,"frequency"),assignNativeAudioNodeAudioParamValue(ne,ee,"gain"),assignNativeAudioNodeOption(ne,ee,"type"),ne},createNativeChannelMergerNodeFactory=(re,ee)=>(ne,ie)=>{const oe=ne.createChannelMerger(ie.numberOfInputs);return re!==null&&re.name==="webkitAudioContext"&&ee(ne,oe),assignNativeAudioNodeOptions(oe,ie),oe},wrapChannelSplitterNode=re=>{const ee=re.numberOfOutputs;Object.defineProperty(re,"channelCount",{get:()=>ee,set:ne=>{if(ne!==ee)throw createInvalidStateError()}}),Object.defineProperty(re,"channelCountMode",{get:()=>"explicit",set:ne=>{if(ne!=="explicit")throw createInvalidStateError()}}),Object.defineProperty(re,"channelInterpretation",{get:()=>"discrete",set:ne=>{if(ne!=="discrete")throw createInvalidStateError()}})},createNativeChannelSplitterNode=(re,ee)=>{const ne=re.createChannelSplitter(ee.numberOfOutputs);return assignNativeAudioNodeOptions(ne,ee),wrapChannelSplitterNode(ne),ne},createNativeConstantSourceNodeFactory=(re,ee,ne,ie,oe)=>(ae,ce)=>{if(ae.createConstantSource===void 0)return ne(ae,ce);const le=ae.createConstantSource();return assignNativeAudioNodeOptions(le,ce),assignNativeAudioNodeAudioParamValue(le,ce,"offset"),ee(ie,()=>ie(ae))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(le),ee(oe,()=>oe(ae))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(le),re(ae,le),le},interceptConnections=(re,ee)=>(re.connect=ee.connect.bind(ee),re.disconnect=ee.disconnect.bind(ee),re),createNativeConstantSourceNodeFakerFactory=(re,ee,ne,ie)=>(oe,{offset:ae,...ce})=>{const le=oe.createBuffer(1,2,44100),ue=ee(oe,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),he=ne(oe,{...ce,gain:ae}),fe=le.getChannelData(0);fe[0]=1,fe[1]=1,ue.buffer=le,ue.loop=!0;const me={get bufferSize(){},get channelCount(){return he.channelCount},set channelCount(ye){he.channelCount=ye},get channelCountMode(){return he.channelCountMode},set channelCountMode(ye){he.channelCountMode=ye},get channelInterpretation(){return he.channelInterpretation},set channelInterpretation(ye){he.channelInterpretation=ye},get context(){return he.context},get inputs(){return[]},get numberOfInputs(){return ue.numberOfInputs},get numberOfOutputs(){return he.numberOfOutputs},get offset(){return he.gain},get onended(){return ue.onended},set onended(ye){ue.onended=ye},addEventListener(...ye){return ue.addEventListener(ye[0],ye[1],ye[2])},dispatchEvent(...ye){return ue.dispatchEvent(ye[0])},removeEventListener(...ye){return ue.removeEventListener(ye[0],ye[1],ye[2])},start(ye=0){ue.start.call(ue,ye)},stop(ye=0){ue.stop.call(ue,ye)}},ge=()=>ue.connect(he),ve=()=>ue.disconnect(he);return re(oe,ue),ie(interceptConnections(me,he),ge,ve)},createNativeConvolverNodeFactory=(re,ee)=>(ne,ie)=>{const oe=ne.createConvolver();if(assignNativeAudioNodeOptions(oe,ie),ie.disableNormalization===oe.normalize&&(oe.normalize=!ie.disableNormalization),assignNativeAudioNodeOption(oe,ie,"buffer"),ie.channelCount>2||(ee(oe,"channelCount",ae=>()=>ae.call(oe),ae=>ce=>{if(ce>2)throw re();return ae.call(oe,ce)}),ie.channelCountMode==="max"))throw re();return ee(oe,"channelCountMode",ae=>()=>ae.call(oe),ae=>ce=>{if(ce==="max")throw re();return ae.call(oe,ce)}),oe},createNativeDelayNode=(re,ee)=>{const ne=re.createDelay(ee.maxDelayTime);return assignNativeAudioNodeOptions(ne,ee),assignNativeAudioNodeAudioParamValue(ne,ee,"delayTime"),ne},createNativeDynamicsCompressorNodeFactory=re=>(ee,ne)=>{const ie=ee.createDynamicsCompressor();if(assignNativeAudioNodeOptions(ie,ne),ne.channelCount>2||ne.channelCountMode==="max")throw re();return assignNativeAudioNodeAudioParamValue(ie,ne,"attack"),assignNativeAudioNodeAudioParamValue(ie,ne,"knee"),assignNativeAudioNodeAudioParamValue(ie,ne,"ratio"),assignNativeAudioNodeAudioParamValue(ie,ne,"release"),assignNativeAudioNodeAudioParamValue(ie,ne,"threshold"),ie},createNativeGainNode=(re,ee)=>{const ne=re.createGain();return assignNativeAudioNodeOptions(ne,ee),assignNativeAudioNodeAudioParamValue(ne,ee,"gain"),ne},createNativeIIRFilterNodeFactory=re=>(ee,ne,ie)=>{if(ee.createIIRFilter===void 0)return re(ee,ne,ie);const oe=ee.createIIRFilter(ie.feedforward,ie.feedback);return assignNativeAudioNodeOptions(oe,ie),oe};function divide(re,ee){const ne=ee[0]*ee[0]+ee[1]*ee[1];return[(re[0]*ee[0]+re[1]*ee[1])/ne,(re[1]*ee[0]-re[0]*ee[1])/ne]}function multiply(re,ee){return[re[0]*ee[0]-re[1]*ee[1],re[0]*ee[1]+re[1]*ee[0]]}function evaluatePolynomial(re,ee){let ne=[0,0];for(let ie=re.length-1;ie>=0;ie-=1)ne=multiply(ne,ee),ne[0]+=re[ie];return ne}const createNativeIIRFilterNodeFakerFactory=(re,ee,ne,ie)=>(oe,ae,{channelCount:ce,channelCountMode:le,channelInterpretation:ue,feedback:he,feedforward:fe})=>{const me=computeBufferSize(ae,oe.sampleRate),ge=he instanceof Float64Array?he:new Float64Array(he),ve=fe instanceof Float64Array?fe:new Float64Array(fe),ye=ge.length,be=ve.length,Ce=Math.min(ye,be);if(ye===0||ye>20)throw ie();if(ge[0]===0)throw ee();if(be===0||be>20)throw ie();if(ve[0]===0)throw ee();if(ge[0]!==1){for(let Oe=0;Oe<be;Oe+=1)ve[Oe]/=ge[0];for(let Oe=1;Oe<ye;Oe+=1)ge[Oe]/=ge[0]}const Se=ne(oe,me,ce,ce);Se.channelCount=ce,Se.channelCountMode=le,Se.channelInterpretation=ue;const $e=32,Te=[],Ne=[],Ie=[];for(let Oe=0;Oe<ce;Oe+=1){Te.push(0);const Be=new Float32Array($e),Me=new Float32Array($e);Be.fill(0),Me.fill(0),Ne.push(Be),Ie.push(Me)}Se.onaudioprocess=Oe=>{const Be=Oe.inputBuffer,Me=Oe.outputBuffer,Le=Be.numberOfChannels;for(let je=0;je<Le;je+=1){const ze=Be.getChannelData(je),Ve=Me.getChannelData(je);Te[je]=filterBuffer(ge,ye,ve,be,Ce,Ne[je],Ie[je],Te[je],$e,ze,Ve)}};const ke=oe.sampleRate/2;return interceptConnections({get bufferSize(){return me},get channelCount(){return Se.channelCount},set channelCount(Oe){Se.channelCount=Oe},get channelCountMode(){return Se.channelCountMode},set channelCountMode(Oe){Se.channelCountMode=Oe},get channelInterpretation(){return Se.channelInterpretation},set channelInterpretation(Oe){Se.channelInterpretation=Oe},get context(){return Se.context},get inputs(){return[Se]},get numberOfInputs(){return Se.numberOfInputs},get numberOfOutputs(){return Se.numberOfOutputs},addEventListener(...Oe){return Se.addEventListener(Oe[0],Oe[1],Oe[2])},dispatchEvent(...Oe){return Se.dispatchEvent(Oe[0])},getFrequencyResponse(Oe,Be,Me){if(Oe.length!==Be.length||Be.length!==Me.length)throw re();const Le=Oe.length;for(let je=0;je<Le;je+=1){const ze=-Math.PI*(Oe[je]/ke),Ve=[Math.cos(ze),Math.sin(ze)],He=evaluatePolynomial(ve,Ve),We=evaluatePolynomial(ge,Ve),Ye=divide(He,We);Be[je]=Math.sqrt(Ye[0]*Ye[0]+Ye[1]*Ye[1]),Me[je]=Math.atan2(Ye[1],Ye[0])}},removeEventListener(...Oe){return Se.removeEventListener(Oe[0],Oe[1],Oe[2])}},Se)},createNativeMediaElementAudioSourceNode=(re,ee)=>re.createMediaElementSource(ee.mediaElement),createNativeMediaStreamAudioDestinationNode=(re,ee)=>{const ne=re.createMediaStreamDestination();return assignNativeAudioNodeOptions(ne,ee),ne.numberOfOutputs===1&&Object.defineProperty(ne,"numberOfOutputs",{get:()=>0}),ne},createNativeMediaStreamAudioSourceNode=(re,{mediaStream:ee})=>{const ne=ee.getAudioTracks();ne.sort((ae,ce)=>ae.id<ce.id?-1:ae.id>ce.id?1:0);const ie=ne.slice(0,1),oe=re.createMediaStreamSource(new MediaStream(ie));return Object.defineProperty(oe,"mediaStream",{value:ee}),oe},createNativeMediaStreamTrackAudioSourceNodeFactory=(re,ee)=>(ne,{mediaStreamTrack:ie})=>{if(typeof ne.createMediaStreamTrackSource=="function")return ne.createMediaStreamTrackSource(ie);const oe=new MediaStream([ie]),ae=ne.createMediaStreamSource(oe);if(ie.kind!=="audio")throw re();if(ee(ne))throw new TypeError;return ae},createNativeOfflineAudioContextConstructor=re=>re===null?null:re.hasOwnProperty("OfflineAudioContext")?re.OfflineAudioContext:re.hasOwnProperty("webkitOfflineAudioContext")?re.webkitOfflineAudioContext:null,createNativeOscillatorNodeFactory=(re,ee,ne,ie,oe,ae)=>(ce,le)=>{const ue=ce.createOscillator();return assignNativeAudioNodeOptions(ue,le),assignNativeAudioNodeAudioParamValue(ue,le,"detune"),assignNativeAudioNodeAudioParamValue(ue,le,"frequency"),le.periodicWave!==void 0?ue.setPeriodicWave(le.periodicWave):assignNativeAudioNodeOption(ue,le,"type"),ee(ne,()=>ne(ce))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(ue),ee(ie,()=>ie(ce))||ae(ue,ce),ee(oe,()=>oe(ce))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(ue),re(ce,ue),ue},createNativePannerNodeFactory=re=>(ee,ne)=>{const ie=ee.createPanner();return ie.orientationX===void 0?re(ee,ne):(assignNativeAudioNodeOptions(ie,ne),assignNativeAudioNodeAudioParamValue(ie,ne,"orientationX"),assignNativeAudioNodeAudioParamValue(ie,ne,"orientationY"),assignNativeAudioNodeAudioParamValue(ie,ne,"orientationZ"),assignNativeAudioNodeAudioParamValue(ie,ne,"positionX"),assignNativeAudioNodeAudioParamValue(ie,ne,"positionY"),assignNativeAudioNodeAudioParamValue(ie,ne,"positionZ"),assignNativeAudioNodeOption(ie,ne,"coneInnerAngle"),assignNativeAudioNodeOption(ie,ne,"coneOuterAngle"),assignNativeAudioNodeOption(ie,ne,"coneOuterGain"),assignNativeAudioNodeOption(ie,ne,"distanceModel"),assignNativeAudioNodeOption(ie,ne,"maxDistance"),assignNativeAudioNodeOption(ie,ne,"panningModel"),assignNativeAudioNodeOption(ie,ne,"refDistance"),assignNativeAudioNodeOption(ie,ne,"rolloffFactor"),ie)},createNativePannerNodeFakerFactory=(re,ee,ne,ie,oe,ae,ce,le,ue,he)=>(fe,{coneInnerAngle:me,coneOuterAngle:ge,coneOuterGain:ve,distanceModel:ye,maxDistance:be,orientationX:Ce,orientationY:Se,orientationZ:$e,panningModel:Te,positionX:Ne,positionY:Ie,positionZ:ke,refDistance:De,rolloffFactor:Oe,...Be})=>{const Me=fe.createPanner();if(Be.channelCount>2||Be.channelCountMode==="max")throw ce();assignNativeAudioNodeOptions(Me,Be);const Le={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},je=ne(fe,{...Le,channelInterpretation:"speakers",numberOfInputs:6}),ze=ie(fe,{...Be,gain:1}),Ve=ie(fe,{...Le,gain:1}),He=ie(fe,{...Le,gain:0}),We=ie(fe,{...Le,gain:0}),Ye=ie(fe,{...Le,gain:0}),Ue=ie(fe,{...Le,gain:0}),Ke=ie(fe,{...Le,gain:0}),Xe=oe(fe,256,6,1),Vt=ae(fe,{...Le,curve:new Float32Array([1,1]),oversample:"none"});let Wt=[Ce,Se,$e],Kt=[Ne,Ie,ke];const tn=new Float32Array(1);Xe.onaudioprocess=({inputBuffer:rn})=>{const vn=[ue(rn,tn,0),ue(rn,tn,1),ue(rn,tn,2)];vn.some((Sn,kn)=>Sn!==Wt[kn])&&(Me.setOrientation(...vn),Wt=vn);const yn=[ue(rn,tn,3),ue(rn,tn,4),ue(rn,tn,5)];yn.some((Sn,kn)=>Sn!==Kt[kn])&&(Me.setPosition(...yn),Kt=yn)},Object.defineProperty(He.gain,"defaultValue",{get:()=>0}),Object.defineProperty(We.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Ye.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Ue.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Ke.gain,"defaultValue",{get:()=>0});const Xt={get bufferSize(){},get channelCount(){return Me.channelCount},set channelCount(rn){if(rn>2)throw ce();ze.channelCount=rn,Me.channelCount=rn},get channelCountMode(){return Me.channelCountMode},set channelCountMode(rn){if(rn==="max")throw ce();ze.channelCountMode=rn,Me.channelCountMode=rn},get channelInterpretation(){return Me.channelInterpretation},set channelInterpretation(rn){ze.channelInterpretation=rn,Me.channelInterpretation=rn},get coneInnerAngle(){return Me.coneInnerAngle},set coneInnerAngle(rn){Me.coneInnerAngle=rn},get coneOuterAngle(){return Me.coneOuterAngle},set coneOuterAngle(rn){Me.coneOuterAngle=rn},get coneOuterGain(){return Me.coneOuterGain},set coneOuterGain(rn){if(rn<0||rn>1)throw ee();Me.coneOuterGain=rn},get context(){return Me.context},get distanceModel(){return Me.distanceModel},set distanceModel(rn){Me.distanceModel=rn},get inputs(){return[ze]},get maxDistance(){return Me.maxDistance},set maxDistance(rn){if(rn<0)throw new RangeError;Me.maxDistance=rn},get numberOfInputs(){return Me.numberOfInputs},get numberOfOutputs(){return Me.numberOfOutputs},get orientationX(){return Ve.gain},get orientationY(){return He.gain},get orientationZ(){return We.gain},get panningModel(){return Me.panningModel},set panningModel(rn){Me.panningModel=rn},get positionX(){return Ye.gain},get positionY(){return Ue.gain},get positionZ(){return Ke.gain},get refDistance(){return Me.refDistance},set refDistance(rn){if(rn<0)throw new RangeError;Me.refDistance=rn},get rolloffFactor(){return Me.rolloffFactor},set rolloffFactor(rn){if(rn<0)throw new RangeError;Me.rolloffFactor=rn},addEventListener(...rn){return ze.addEventListener(rn[0],rn[1],rn[2])},dispatchEvent(...rn){return ze.dispatchEvent(rn[0])},removeEventListener(...rn){return ze.removeEventListener(rn[0],rn[1],rn[2])}};me!==Xt.coneInnerAngle&&(Xt.coneInnerAngle=me),ge!==Xt.coneOuterAngle&&(Xt.coneOuterAngle=ge),ve!==Xt.coneOuterGain&&(Xt.coneOuterGain=ve),ye!==Xt.distanceModel&&(Xt.distanceModel=ye),be!==Xt.maxDistance&&(Xt.maxDistance=be),Ce!==Xt.orientationX.value&&(Xt.orientationX.value=Ce),Se!==Xt.orientationY.value&&(Xt.orientationY.value=Se),$e!==Xt.orientationZ.value&&(Xt.orientationZ.value=$e),Te!==Xt.panningModel&&(Xt.panningModel=Te),Ne!==Xt.positionX.value&&(Xt.positionX.value=Ne),Ie!==Xt.positionY.value&&(Xt.positionY.value=Ie),ke!==Xt.positionZ.value&&(Xt.positionZ.value=ke),De!==Xt.refDistance&&(Xt.refDistance=De),Oe!==Xt.rolloffFactor&&(Xt.rolloffFactor=Oe),(Wt[0]!==1||Wt[1]!==0||Wt[2]!==0)&&Me.setOrientation(...Wt),(Kt[0]!==0||Kt[1]!==0||Kt[2]!==0)&&Me.setPosition(...Kt);const dn=()=>{ze.connect(Me),re(ze,Vt,0,0),Vt.connect(Ve).connect(je,0,0),Vt.connect(He).connect(je,0,1),Vt.connect(We).connect(je,0,2),Vt.connect(Ye).connect(je,0,3),Vt.connect(Ue).connect(je,0,4),Vt.connect(Ke).connect(je,0,5),je.connect(Xe).connect(fe.destination)},nn=()=>{ze.disconnect(Me),le(ze,Vt,0,0),Vt.disconnect(Ve),Ve.disconnect(je),Vt.disconnect(He),He.disconnect(je),Vt.disconnect(We),We.disconnect(je),Vt.disconnect(Ye),Ye.disconnect(je),Vt.disconnect(Ue),Ue.disconnect(je),Vt.disconnect(Ke),Ke.disconnect(je),je.disconnect(Xe),Xe.disconnect(fe.destination)};return he(interceptConnections(Xt,Me),dn,nn)},createNativePeriodicWaveFactory=re=>(ee,{disableNormalization:ne,imag:ie,real:oe})=>{const ae=ie instanceof Float32Array?ie:new Float32Array(ie),ce=oe instanceof Float32Array?oe:new Float32Array(oe),le=ee.createPeriodicWave(ce,ae,{disableNormalization:ne});if(Array.from(ie).length<2)throw re();return le},createNativeScriptProcessorNode=(re,ee,ne,ie)=>re.createScriptProcessor(ee,ne,ie),createNativeStereoPannerNodeFactory=(re,ee)=>(ne,ie)=>{const oe=ie.channelCountMode;if(oe==="clamped-max")throw ee();if(ne.createStereoPanner===void 0)return re(ne,ie);const ae=ne.createStereoPanner();return assignNativeAudioNodeOptions(ae,ie),assignNativeAudioNodeAudioParamValue(ae,ie,"pan"),Object.defineProperty(ae,"channelCountMode",{get:()=>oe,set:ce=>{if(ce!==oe)throw ee()}}),ae},createNativeStereoPannerNodeFakerFactory=(re,ee,ne,ie,oe,ae)=>{const le=new Float32Array([1,1]),ue=Math.PI/2,he={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},fe={...he,oversample:"none"},me=(ye,be,Ce,Se)=>{const $e=new Float32Array(16385),Te=new Float32Array(16385);for(let Be=0;Be<16385;Be+=1){const Me=Be/16384*ue;$e[Be]=Math.cos(Me),Te[Be]=Math.sin(Me)}const Ne=ne(ye,{...he,gain:0}),Ie=ie(ye,{...fe,curve:$e}),ke=ie(ye,{...fe,curve:le}),De=ne(ye,{...he,gain:0}),Oe=ie(ye,{...fe,curve:Te});return{connectGraph(){be.connect(Ne),be.connect(ke.inputs===void 0?ke:ke.inputs[0]),be.connect(De),ke.connect(Ce),Ce.connect(Ie.inputs===void 0?Ie:Ie.inputs[0]),Ce.connect(Oe.inputs===void 0?Oe:Oe.inputs[0]),Ie.connect(Ne.gain),Oe.connect(De.gain),Ne.connect(Se,0,0),De.connect(Se,0,1)},disconnectGraph(){be.disconnect(Ne),be.disconnect(ke.inputs===void 0?ke:ke.inputs[0]),be.disconnect(De),ke.disconnect(Ce),Ce.disconnect(Ie.inputs===void 0?Ie:Ie.inputs[0]),Ce.disconnect(Oe.inputs===void 0?Oe:Oe.inputs[0]),Ie.disconnect(Ne.gain),Oe.disconnect(De.gain),Ne.disconnect(Se,0,0),De.disconnect(Se,0,1)}}},ge=(ye,be,Ce,Se)=>{const $e=new Float32Array(16385),Te=new Float32Array(16385),Ne=new Float32Array(16385),Ie=new Float32Array(16385),ke=Math.floor(16385/2);for(let Ye=0;Ye<16385;Ye+=1)if(Ye>ke){const Ue=(Ye-ke)/(16384-ke)*ue;$e[Ye]=Math.cos(Ue),Te[Ye]=Math.sin(Ue),Ne[Ye]=0,Ie[Ye]=1}else{const Ue=Ye/(16384-ke)*ue;$e[Ye]=1,Te[Ye]=0,Ne[Ye]=Math.cos(Ue),Ie[Ye]=Math.sin(Ue)}const De=ee(ye,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),Oe=ne(ye,{...he,gain:0}),Be=ie(ye,{...fe,curve:$e}),Me=ne(ye,{...he,gain:0}),Le=ie(ye,{...fe,curve:Te}),je=ie(ye,{...fe,curve:le}),ze=ne(ye,{...he,gain:0}),Ve=ie(ye,{...fe,curve:Ne}),He=ne(ye,{...he,gain:0}),We=ie(ye,{...fe,curve:Ie});return{connectGraph(){be.connect(De),be.connect(je.inputs===void 0?je:je.inputs[0]),De.connect(Oe,0),De.connect(Me,0),De.connect(ze,1),De.connect(He,1),je.connect(Ce),Ce.connect(Be.inputs===void 0?Be:Be.inputs[0]),Ce.connect(Le.inputs===void 0?Le:Le.inputs[0]),Ce.connect(Ve.inputs===void 0?Ve:Ve.inputs[0]),Ce.connect(We.inputs===void 0?We:We.inputs[0]),Be.connect(Oe.gain),Le.connect(Me.gain),Ve.connect(ze.gain),We.connect(He.gain),Oe.connect(Se,0,0),ze.connect(Se,0,0),Me.connect(Se,0,1),He.connect(Se,0,1)},disconnectGraph(){be.disconnect(De),be.disconnect(je.inputs===void 0?je:je.inputs[0]),De.disconnect(Oe,0),De.disconnect(Me,0),De.disconnect(ze,1),De.disconnect(He,1),je.disconnect(Ce),Ce.disconnect(Be.inputs===void 0?Be:Be.inputs[0]),Ce.disconnect(Le.inputs===void 0?Le:Le.inputs[0]),Ce.disconnect(Ve.inputs===void 0?Ve:Ve.inputs[0]),Ce.disconnect(We.inputs===void 0?We:We.inputs[0]),Be.disconnect(Oe.gain),Le.disconnect(Me.gain),Ve.disconnect(ze.gain),We.disconnect(He.gain),Oe.disconnect(Se,0,0),ze.disconnect(Se,0,0),Me.disconnect(Se,0,1),He.disconnect(Se,0,1)}}},ve=(ye,be,Ce,Se,$e)=>{if(be===1)return me(ye,Ce,Se,$e);if(be===2)return ge(ye,Ce,Se,$e);throw oe()};return(ye,{channelCount:be,channelCountMode:Ce,pan:Se,...$e})=>{if(Ce==="max")throw oe();const Te=re(ye,{...$e,channelCount:1,channelCountMode:Ce,numberOfInputs:2}),Ne=ne(ye,{...$e,channelCount:be,channelCountMode:Ce,gain:1}),Ie=ne(ye,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:Se});let{connectGraph:ke,disconnectGraph:De}=ve(ye,be,Ne,Ie,Te);Object.defineProperty(Ie.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Ie.gain,"maxValue",{get:()=>1}),Object.defineProperty(Ie.gain,"minValue",{get:()=>-1});const Oe={get bufferSize(){},get channelCount(){return Ne.channelCount},set channelCount(je){Ne.channelCount!==je&&(Be&&De(),{connectGraph:ke,disconnectGraph:De}=ve(ye,je,Ne,Ie,Te),Be&&ke()),Ne.channelCount=je},get channelCountMode(){return Ne.channelCountMode},set channelCountMode(je){if(je==="clamped-max"||je==="max")throw oe();Ne.channelCountMode=je},get channelInterpretation(){return Ne.channelInterpretation},set channelInterpretation(je){Ne.channelInterpretation=je},get context(){return Ne.context},get inputs(){return[Ne]},get numberOfInputs(){return Ne.numberOfInputs},get numberOfOutputs(){return Ne.numberOfOutputs},get pan(){return Ie.gain},addEventListener(...je){return Ne.addEventListener(je[0],je[1],je[2])},dispatchEvent(...je){return Ne.dispatchEvent(je[0])},removeEventListener(...je){return Ne.removeEventListener(je[0],je[1],je[2])}};let Be=!1;const Me=()=>{ke(),Be=!0},Le=()=>{De(),Be=!1};return ae(interceptConnections(Oe,Te),Me,Le)}},createNativeWaveShaperNodeFactory=(re,ee,ne,ie,oe,ae,ce)=>(le,ue)=>{const he=le.createWaveShaper();if(ae!==null&&ae.name==="webkitAudioContext"&&le.createGain().gain.automationRate===void 0)return ne(le,ue);assignNativeAudioNodeOptions(he,ue);const fe=ue.curve===null||ue.curve instanceof Float32Array?ue.curve:new Float32Array(ue.curve);if(fe!==null&&fe.length<2)throw ee();assignNativeAudioNodeOption(he,{curve:fe},"curve"),assignNativeAudioNodeOption(he,ue,"oversample");let me=null,ge=!1;return ce(he,"curve",be=>()=>be.call(he),be=>Ce=>(be.call(he,Ce),ge&&(ie(Ce)&&me===null?me=re(le,he):!ie(Ce)&&me!==null&&(me(),me=null)),Ce)),oe(he,()=>{ge=!0,ie(he.curve)&&(me=re(le,he))},()=>{ge=!1,me!==null&&(me(),me=null)})},createNativeWaveShaperNodeFakerFactory=(re,ee,ne,ie,oe)=>(ae,{curve:ce,oversample:le,...ue})=>{const he=ae.createWaveShaper(),fe=ae.createWaveShaper();assignNativeAudioNodeOptions(he,ue),assignNativeAudioNodeOptions(fe,ue);const me=ne(ae,{...ue,gain:1}),ge=ne(ae,{...ue,gain:-1}),ve=ne(ae,{...ue,gain:1}),ye=ne(ae,{...ue,gain:-1});let be=null,Ce=!1,Se=null;const $e={get bufferSize(){},get channelCount(){return he.channelCount},set channelCount(Ie){me.channelCount=Ie,ge.channelCount=Ie,he.channelCount=Ie,ve.channelCount=Ie,fe.channelCount=Ie,ye.channelCount=Ie},get channelCountMode(){return he.channelCountMode},set channelCountMode(Ie){me.channelCountMode=Ie,ge.channelCountMode=Ie,he.channelCountMode=Ie,ve.channelCountMode=Ie,fe.channelCountMode=Ie,ye.channelCountMode=Ie},get channelInterpretation(){return he.channelInterpretation},set channelInterpretation(Ie){me.channelInterpretation=Ie,ge.channelInterpretation=Ie,he.channelInterpretation=Ie,ve.channelInterpretation=Ie,fe.channelInterpretation=Ie,ye.channelInterpretation=Ie},get context(){return he.context},get curve(){return Se},set curve(Ie){if(Ie!==null&&Ie.length<2)throw ee();if(Ie===null)he.curve=Ie,fe.curve=Ie;else{const ke=Ie.length,De=new Float32Array(ke+2-ke%2),Oe=new Float32Array(ke+2-ke%2);De[0]=Ie[0],Oe[0]=-Ie[ke-1];const Be=Math.ceil((ke+1)/2),Me=(ke+1)/2-1;for(let Le=1;Le<Be;Le+=1){const je=Le/Be*Me,ze=Math.floor(je),Ve=Math.ceil(je);De[Le]=ze===Ve?Ie[ze]:(1-(je-ze))*Ie[ze]+(1-(Ve-je))*Ie[Ve],Oe[Le]=ze===Ve?-Ie[ke-1-ze]:-((1-(je-ze))*Ie[ke-1-ze])-(1-(Ve-je))*Ie[ke-1-Ve]}De[Be]=ke%2===1?Ie[Be-1]:(Ie[Be-2]+Ie[Be-1])/2,he.curve=De,fe.curve=Oe}Se=Ie,Ce&&(ie(Se)&&be===null?be=re(ae,me):be!==null&&(be(),be=null))},get inputs(){return[me]},get numberOfInputs(){return he.numberOfInputs},get numberOfOutputs(){return he.numberOfOutputs},get oversample(){return he.oversample},set oversample(Ie){he.oversample=Ie,fe.oversample=Ie},addEventListener(...Ie){return me.addEventListener(Ie[0],Ie[1],Ie[2])},dispatchEvent(...Ie){return me.dispatchEvent(Ie[0])},removeEventListener(...Ie){return me.removeEventListener(Ie[0],Ie[1],Ie[2])}};ce!==null&&($e.curve=ce instanceof Float32Array?ce:new Float32Array(ce)),le!==$e.oversample&&($e.oversample=le);const Te=()=>{me.connect(he).connect(ve),me.connect(ge).connect(fe).connect(ye).connect(ve),Ce=!0,ie(Se)&&(be=re(ae,me))},Ne=()=>{me.disconnect(he),he.disconnect(ve),me.disconnect(ge),ge.disconnect(fe),fe.disconnect(ye),ye.disconnect(ve),Ce=!1,be!==null&&(be(),be=null)};return oe(interceptConnections($e,ve),Te,Ne)},createNotSupportedError=()=>new DOMException("","NotSupportedError"),DEFAULT_OPTIONS$5={numberOfChannels:1},createOfflineAudioContextConstructor=(re,ee,ne,ie,oe)=>class extends re{constructor(ce,le,ue){let he;if(typeof ce=="number"&&le!==void 0&&ue!==void 0)he={length:le,numberOfChannels:ce,sampleRate:ue};else if(typeof ce=="object")he=ce;else throw new Error("The given parameters are not valid.");const{length:fe,numberOfChannels:me,sampleRate:ge}={...DEFAULT_OPTIONS$5,...he},ve=ie(me,fe,ge);ee(testPromiseSupport,()=>testPromiseSupport(ve))||ve.addEventListener("statechange",(()=>{let ye=0;const be=Ce=>{this._state==="running"&&(ye>0?(ve.removeEventListener("statechange",be),Ce.stopImmediatePropagation(),this._waitForThePromiseToSettle(Ce)):ye+=1)};return be})()),super(ve,me),this._length=fe,this._nativeOfflineAudioContext=ve,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(ne()):(this._state="running",oe(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,deactivateAudioGraph(this)}))}_waitForThePromiseToSettle(ce){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(ce):setTimeout(()=>this._waitForThePromiseToSettle(ce))}},DEFAULT_OPTIONS$4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},createOscillatorNodeConstructor=(re,ee,ne,ie,oe,ae,ce)=>class extends re{constructor(ue,he){const fe=oe(ue),me={...DEFAULT_OPTIONS$4,...he},ge=ne(fe,me),ve=ae(fe),ye=ve?ie():null,be=ue.sampleRate/2;super(ue,!1,ge,ye),this._detune=ee(this,ve,ge.detune,153600,-153600),this._frequency=ee(this,ve,ge.frequency,be,-be),this._nativeOscillatorNode=ge,this._onended=null,this._oscillatorNodeRenderer=ye,this._oscillatorNodeRenderer!==null&&me.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=me.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(ue){const he=typeof ue=="function"?ce(this,ue):null;this._nativeOscillatorNode.onended=he;const fe=this._nativeOscillatorNode.onended;this._onended=fe!==null&&fe===he?ue:fe}get type(){return this._nativeOscillatorNode.type}set type(ue){this._nativeOscillatorNode.type=ue,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(ue){this._nativeOscillatorNode.setPeriodicWave(ue),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=ue)}start(ue=0){if(this._nativeOscillatorNode.start(ue),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=ue),this.context.state!=="closed"){setInternalStateToActive(this);const he=()=>{this._nativeOscillatorNode.removeEventListener("ended",he),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeOscillatorNode.addEventListener("ended",he)}}stop(ue=0){this._nativeOscillatorNode.stop(ue),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=ue)}},createOscillatorNodeRendererFactory=(re,ee,ne,ie,oe)=>()=>{const ae=new WeakMap;let ce=null,le=null,ue=null;const he=async(fe,me)=>{let ge=ne(fe);const ve=isOwnedByContext(ge,me);if(!ve){const ye={channelCount:ge.channelCount,channelCountMode:ge.channelCountMode,channelInterpretation:ge.channelInterpretation,detune:ge.detune.value,frequency:ge.frequency.value,periodicWave:ce===null?void 0:ce,type:ge.type};ge=ee(me,ye),le!==null&&ge.start(le),ue!==null&&ge.stop(ue)}return ae.set(me,ge),ve?(await re(me,fe.detune,ge.detune),await re(me,fe.frequency,ge.frequency)):(await ie(me,fe.detune,ge.detune),await ie(me,fe.frequency,ge.frequency)),await oe(fe,me,ge),ge};return{set periodicWave(fe){ce=fe},set start(fe){le=fe},set stop(fe){ue=fe},render(fe,me){const ge=ae.get(me);return ge!==void 0?Promise.resolve(ge):he(fe,me)}}},DEFAULT_OPTIONS$3={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},createPannerNodeConstructor=(re,ee,ne,ie,oe,ae,ce)=>class extends re{constructor(ue,he){const fe=oe(ue),me={...DEFAULT_OPTIONS$3,...he},ge=ne(fe,me),ve=ae(fe),ye=ve?ie():null;super(ue,!1,ge,ye),this._nativePannerNode=ge,this._orientationX=ee(this,ve,ge.orientationX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=ee(this,ve,ge.orientationY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=ee(this,ve,ge.orientationZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=ee(this,ve,ge.positionX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=ee(this,ve,ge.positionY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=ee(this,ve,ge.positionZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),ce(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(ue){this._nativePannerNode.coneInnerAngle=ue}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(ue){this._nativePannerNode.coneOuterAngle=ue}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(ue){this._nativePannerNode.coneOuterGain=ue}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(ue){this._nativePannerNode.distanceModel=ue}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(ue){this._nativePannerNode.maxDistance=ue}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(ue){this._nativePannerNode.panningModel=ue}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(ue){this._nativePannerNode.refDistance=ue}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(ue){this._nativePannerNode.rolloffFactor=ue}},createPannerNodeRendererFactory=(re,ee,ne,ie,oe,ae,ce,le,ue,he)=>()=>{const fe=new WeakMap;let me=null;const ge=async(ve,ye)=>{let be=null,Ce=ae(ve);const Se={channelCount:Ce.channelCount,channelCountMode:Ce.channelCountMode,channelInterpretation:Ce.channelInterpretation},$e={...Se,coneInnerAngle:Ce.coneInnerAngle,coneOuterAngle:Ce.coneOuterAngle,coneOuterGain:Ce.coneOuterGain,distanceModel:Ce.distanceModel,maxDistance:Ce.maxDistance,panningModel:Ce.panningModel,refDistance:Ce.refDistance,rolloffFactor:Ce.rolloffFactor},Te=isOwnedByContext(Ce,ye);if("bufferSize"in Ce)be=ie(ye,{...Se,gain:1});else if(!Te){const Ne={...$e,orientationX:Ce.orientationX.value,orientationY:Ce.orientationY.value,orientationZ:Ce.orientationZ.value,positionX:Ce.positionX.value,positionY:Ce.positionY.value,positionZ:Ce.positionZ.value};Ce=oe(ye,Ne)}if(fe.set(ye,be===null?Ce:be),be!==null){if(me===null){if(ce===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Le=new ce(6,ve.context.length,ye.sampleRate),je=ee(Le,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});je.connect(Le.destination),me=(async()=>{const ze=await Promise.all([ve.orientationX,ve.orientationY,ve.orientationZ,ve.positionX,ve.positionY,ve.positionZ].map(async(Ve,He)=>{const We=ne(Le,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:He===0?1:0});return await le(Le,Ve,We.offset),We}));for(let Ve=0;Ve<6;Ve+=1)ze[Ve].connect(je,0,Ve),ze[Ve].start(0);return he(Le)})()}const Ne=await me,Ie=ie(ye,{...Se,gain:1});await ue(ve,ye,Ie);const ke=[];for(let Le=0;Le<Ne.numberOfChannels;Le+=1)ke.push(Ne.getChannelData(Le));let De=[ke[0][0],ke[1][0],ke[2][0]],Oe=[ke[3][0],ke[4][0],ke[5][0]],Be=ie(ye,{...Se,gain:1}),Me=oe(ye,{...$e,orientationX:De[0],orientationY:De[1],orientationZ:De[2],positionX:Oe[0],positionY:Oe[1],positionZ:Oe[2]});Ie.connect(Be).connect(Me.inputs[0]),Me.connect(be);for(let Le=128;Le<Ne.length;Le+=128){const je=[ke[0][Le],ke[1][Le],ke[2][Le]],ze=[ke[3][Le],ke[4][Le],ke[5][Le]];if(je.some((Ve,He)=>Ve!==De[He])||ze.some((Ve,He)=>Ve!==Oe[He])){De=je,Oe=ze;const Ve=Le/ye.sampleRate;Be.gain.setValueAtTime(0,Ve),Be=ie(ye,{...Se,gain:0}),Me=oe(ye,{...$e,orientationX:De[0],orientationY:De[1],orientationZ:De[2],positionX:Oe[0],positionY:Oe[1],positionZ:Oe[2]}),Be.gain.setValueAtTime(1,Ve),Ie.connect(Be).connect(Me.inputs[0]),Me.connect(be)}}return be}return Te?(await re(ye,ve.orientationX,Ce.orientationX),await re(ye,ve.orientationY,Ce.orientationY),await re(ye,ve.orientationZ,Ce.orientationZ),await re(ye,ve.positionX,Ce.positionX),await re(ye,ve.positionY,Ce.positionY),await re(ye,ve.positionZ,Ce.positionZ)):(await le(ye,ve.orientationX,Ce.orientationX),await le(ye,ve.orientationY,Ce.orientationY),await le(ye,ve.orientationZ,Ce.orientationZ),await le(ye,ve.positionX,Ce.positionX),await le(ye,ve.positionY,Ce.positionY),await le(ye,ve.positionZ,Ce.positionZ)),isNativeAudioNodeFaker(Ce)?await ue(ve,ye,Ce.inputs[0]):await ue(ve,ye,Ce),Ce};return{render(ve,ye){const be=fe.get(ye);return be!==void 0?Promise.resolve(be):ge(ve,ye)}}},DEFAULT_OPTIONS$2={disableNormalization:!1},createPeriodicWaveConstructor=(re,ee,ne,ie)=>class Tu{constructor(ae,ce){const le=ee(ae),ue=ie({...DEFAULT_OPTIONS$2,...ce}),he=re(le,ue);return ne.add(he),he}static[Symbol.hasInstance](ae){return ae!==null&&typeof ae=="object"&&Object.getPrototypeOf(ae)===Tu.prototype||ne.has(ae)}},createRenderAutomation=(re,ee)=>(ne,ie,oe)=>(re(ie).replay(oe),ee(ie,ne,oe)),createRenderInputsOfAudioNode=(re,ee,ne)=>async(ie,oe,ae)=>{const ce=re(ie);await Promise.all(ce.activeInputs.map((le,ue)=>Array.from(le).map(async([he,fe])=>{const ge=await ee(he).render(he,oe),ve=ie.context.destination;!ne(he)&&(ie!==ve||!ne(ie))&&ge.connect(ae,fe,ue)})).reduce((le,ue)=>[...le,...ue],[]))},createRenderInputsOfAudioParam=(re,ee,ne)=>async(ie,oe,ae)=>{const ce=ee(ie);await Promise.all(Array.from(ce.activeInputs).map(async([le,ue])=>{const fe=await re(le).render(le,oe);ne(le)||fe.connect(ae,ue)}))},createRenderNativeOfflineAudioContext=(re,ee,ne,ie)=>oe=>re(testPromiseSupport,()=>testPromiseSupport(oe))?Promise.resolve(re(ie,ie)).then(ae=>{if(!ae){const ce=ne(oe,512,0,1);oe.oncomplete=()=>{ce.onaudioprocess=null,ce.disconnect()},ce.onaudioprocess=()=>oe.currentTime,ce.connect(oe.destination)}return oe.startRendering()}):new Promise(ae=>{const ce=ee(oe,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});oe.oncomplete=le=>{ce.disconnect(),ae(le.renderedBuffer)},ce.connect(oe.destination),oe.startRendering()}),createSetActiveAudioWorkletNodeInputs=re=>(ee,ne)=>{re.set(ee,ne)},createSetAudioNodeTailTime=re=>(ee,ne)=>re.set(ee,ne),createStartRendering=(re,ee,ne,ie,oe,ae,ce,le)=>(ue,he)=>ne(ue).render(ue,he).then(()=>Promise.all(Array.from(ie(he)).map(fe=>ne(fe).render(fe,he)))).then(()=>oe(he)).then(fe=>(typeof fe.copyFromChannel!="function"?(ce(fe),wrapAudioBufferGetChannelDataMethod(fe)):ee(ae,()=>ae(fe))||le(fe),re.add(fe),fe)),DEFAULT_OPTIONS$1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},createStereoPannerNodeConstructor=(re,ee,ne,ie,oe,ae)=>class extends re{constructor(le,ue){const he=oe(le),fe={...DEFAULT_OPTIONS$1,...ue},me=ne(he,fe),ge=ae(he),ve=ge?ie():null;super(le,!1,me,ve),this._pan=ee(this,ge,me.pan)}get pan(){return this._pan}},createStereoPannerNodeRendererFactory=(re,ee,ne,ie,oe)=>()=>{const ae=new WeakMap,ce=async(le,ue)=>{let he=ne(le);const fe=isOwnedByContext(he,ue);if(!fe){const me={channelCount:he.channelCount,channelCountMode:he.channelCountMode,channelInterpretation:he.channelInterpretation,pan:he.pan.value};he=ee(ue,me)}return ae.set(ue,he),fe?await re(ue,le.pan,he.pan):await ie(ue,le.pan,he.pan),isNativeAudioNodeFaker(he)?await oe(le,ue,he.inputs[0]):await oe(le,ue,he),he};return{render(le,ue){const he=ae.get(ue);return he!==void 0?Promise.resolve(he):ce(le,ue)}}},createTestAudioBufferConstructorSupport=re=>()=>{if(re===null)return!1;try{new re({length:1,sampleRate:44100})}catch{return!1}return!0},createTestAudioBufferCopyChannelMethodsSubarraySupport=re=>()=>{if(re===null)return!1;const ne=new re(1,1,44100).createBuffer(1,1,44100);if(ne.copyToChannel===void 0)return!0;const ie=new Float32Array(2);try{ne.copyFromChannel(ie,0,0)}catch{return!1}return!0},createTestAudioContextCloseMethodSupport=re=>()=>{if(re===null)return!1;if(re.prototype!==void 0&&re.prototype.close!==void 0)return!0;const ee=new re,ne=ee.close!==void 0;try{ee.close()}catch{}return ne},createTestAudioContextDecodeAudioDataMethodTypeErrorSupport=re=>()=>{if(re===null)return Promise.resolve(!1);const ee=new re(1,1,44100);return new Promise(ne=>{let ie=!0;const oe=ce=>{ie&&(ie=!1,ee.startRendering(),ne(ce instanceof TypeError))};let ae;try{ae=ee.decodeAudioData(null,()=>{},oe)}catch(ce){oe(ce)}ae!==void 0&&ae.catch(oe)})},createTestAudioContextOptionsSupport=re=>()=>{if(re===null)return!1;let ee;try{ee=new re({latencyHint:"balanced"})}catch{return!1}return ee.close(),!0},createTestAudioNodeConnectMethodSupport=re=>()=>{if(re===null)return!1;const ne=new re(1,1,44100).createGain(),ie=ne.connect(ne)===ne;return ne.disconnect(ne),ie},createTestAudioWorkletProcessorNoOutputsSupport=(re,ee)=>async()=>{if(re===null)return!0;if(ee===null)return!1;const ne=new Blob(['let c,p;class A extends AudioWorkletProcessor{constructor(){super();this.port.onmessage=(e)=>{p=e.data;p.onmessage=()=>{p.postMessage(c);p.close()};this.port.postMessage(0)}}process(){c=1}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),ie=new MessageChannel,oe=new ee(1,128,44100),ae=URL.createObjectURL(ne);let ce=!1;try{await oe.audioWorklet.addModule(ae);const le=new re(oe,"a",{numberOfOutputs:0}),ue=oe.createOscillator();await new Promise(he=>{le.port.onmessage=()=>he(),le.port.postMessage(ie.port2,[ie.port2])}),le.port.onmessage=()=>ce=!0,ue.connect(le),ue.start(0),await oe.startRendering(),ce=await new Promise(he=>{ie.port1.onmessage=({data:fe})=>he(fe===1),ie.port1.postMessage(0)})}catch{}finally{ie.port1.close(),URL.revokeObjectURL(ae)}return ce},createTestAudioWorkletProcessorPostMessageSupport=(re,ee)=>async()=>{if(re===null)return!0;if(ee===null)return!1;const ne=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),ie=new ee(1,128,44100),oe=URL.createObjectURL(ne);let ae=!1,ce=!1;try{await ie.audioWorklet.addModule(oe);const le=new re(ie,"a",{numberOfOutputs:0}),ue=ie.createOscillator();le.port.onmessage=()=>ae=!0,le.onprocessorerror=()=>ce=!0,ue.connect(le),ue.start(0),await ie.startRendering(),await new Promise(he=>setTimeout(he))}catch{}finally{URL.revokeObjectURL(oe)}return ae&&!ce},createTestChannelMergerNodeChannelCountSupport=re=>()=>{if(re===null)return!1;const ne=new re(1,1,44100).createChannelMerger();if(ne.channelCountMode==="max")return!0;try{ne.channelCount=2}catch{return!0}return!1},createTestConstantSourceNodeAccurateSchedulingSupport=re=>()=>{if(re===null)return!1;const ee=new re(1,1,44100);return ee.createConstantSource===void 0?!0:ee.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY},createTestConvolverNodeBufferReassignabilitySupport=re=>()=>{if(re===null)return!1;const ee=new re(1,1,44100),ne=ee.createConvolver();ne.buffer=ee.createBuffer(1,1,ee.sampleRate);try{ne.buffer=ee.createBuffer(1,1,ee.sampleRate)}catch{return!1}return!0},createTestConvolverNodeChannelCountSupport=re=>()=>{if(re===null)return!1;const ne=new re(1,1,44100).createConvolver();try{ne.channelCount=1}catch{return!1}return!0},createTestIsSecureContextSupport=re=>()=>re!==null&&re.hasOwnProperty("isSecureContext"),createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport=re=>()=>{if(re===null)return!1;const ee=new re;try{return ee.createMediaStreamSource(new MediaStream),!1}catch{return!0}finally{ee.close()}},createTestOfflineAudioContextCurrentTimeSupport=(re,ee)=>()=>{if(ee===null)return Promise.resolve(!1);const ne=new ee(1,1,44100),ie=re(ne,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(oe=>{ne.oncomplete=()=>{ie.disconnect(),oe(ne.currentTime!==0)},ne.startRendering()})},createTestStereoPannerNodeDefaultValueSupport=re=>()=>{if(re===null)return Promise.resolve(!1);const ee=new re(1,1,44100);if(ee.createStereoPanner===void 0||ee.createConstantSource===void 0)return Promise.resolve(!0);const ne=ee.createConstantSource(),ie=ee.createStereoPanner();return ne.channelCount=1,ne.offset.value=1,ie.channelCount=1,ne.start(),ne.connect(ie).connect(ee.destination),ee.startRendering().then(oe=>oe.getChannelData(0)[0]!==1)},createUnknownError=()=>new DOMException("","UnknownError"),DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},createWaveShaperNodeConstructor=(re,ee,ne,ie,oe,ae,ce)=>class extends re{constructor(ue,he){const fe=oe(ue),me={...DEFAULT_OPTIONS,...he},ge=ne(fe,me),ye=ae(fe)?ie():null;super(ue,!0,ge,ye),this._isCurveNullified=!1,this._nativeWaveShaperNode=ge,ce(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(ue){if(ue===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(ue.length<2)throw ee();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=ue}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(ue){this._nativeWaveShaperNode.oversample=ue}},createWaveShaperNodeRendererFactory=(re,ee,ne)=>()=>{const ie=new WeakMap,oe=async(ae,ce)=>{let le=ee(ae);if(!isOwnedByContext(le,ce)){const he={channelCount:le.channelCount,channelCountMode:le.channelCountMode,channelInterpretation:le.channelInterpretation,curve:le.curve,oversample:le.oversample};le=re(ce,he)}return ie.set(ce,le),isNativeAudioNodeFaker(le)?await ne(ae,ce,le.inputs[0]):await ne(ae,ce,le),le};return{render(ae,ce){const le=ie.get(ce);return le!==void 0?Promise.resolve(le):oe(ae,ce)}}},createWindow=()=>typeof window>"u"?null:window,createWrapAudioBufferCopyChannelMethods=(re,ee)=>ne=>{ne.copyFromChannel=(ie,oe,ae=0)=>{const ce=re(ae),le=re(oe);if(le>=ne.numberOfChannels)throw ee();const ue=ne.length,he=ne.getChannelData(le),fe=ie.length;for(let me=ce<0?-ce:0;me+ce<ue&&me<fe;me+=1)ie[me]=he[me+ce]},ne.copyToChannel=(ie,oe,ae=0)=>{const ce=re(ae),le=re(oe);if(le>=ne.numberOfChannels)throw ee();const ue=ne.length,he=ne.getChannelData(le),fe=ie.length;for(let me=ce<0?-ce:0;me+ce<ue&&me<fe;me+=1)he[me+ce]=ie[me]}},createWrapAudioBufferCopyChannelMethodsOutOfBounds=re=>ee=>{ee.copyFromChannel=(ne=>(ie,oe,ae=0)=>{const ce=re(ae),le=re(oe);if(ce<ee.length)return ne.call(ee,ie,le,ce)})(ee.copyFromChannel),ee.copyToChannel=(ne=>(ie,oe,ae=0)=>{const ce=re(ae),le=re(oe);if(ce<ee.length)return ne.call(ee,ie,le,ce)})(ee.copyToChannel)},createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=re=>(ee,ne)=>{const ie=ne.createBuffer(1,1,44100);ee.buffer===null&&(ee.buffer=ie),re(ee,"buffer",oe=>()=>{const ae=oe.call(ee);return ae===ie?null:ae},oe=>ae=>oe.call(ee,ae===null?ie:ae))},createWrapChannelMergerNode=(re,ee)=>(ne,ie)=>{ie.channelCount=1,ie.channelCountMode="explicit",Object.defineProperty(ie,"channelCount",{get:()=>1,set:()=>{throw re()}}),Object.defineProperty(ie,"channelCountMode",{get:()=>"explicit",set:()=>{throw re()}});const oe=ne.createBufferSource();ee(ie,()=>{const le=ie.numberOfInputs;for(let ue=0;ue<le;ue+=1)oe.connect(ie,0,ue)},()=>oe.disconnect(ie))},getFirstSample=(re,ee,ne)=>re.copyFromChannel===void 0?re.getChannelData(ne)[0]:(re.copyFromChannel(ee,ne),ee[0]),isDCCurve=re=>{if(re===null)return!1;const ee=re.length;return ee%2!==0?re[Math.floor(ee/2)]!==0:re[ee/2-1]+re[ee/2]!==0},overwriteAccessors=(re,ee,ne,ie)=>{let oe=re;for(;!oe.hasOwnProperty(ee);)oe=Object.getPrototypeOf(oe);const{get:ae,set:ce}=Object.getOwnPropertyDescriptor(oe,ee);Object.defineProperty(re,ee,{get:ne(ae),set:ie(ce)})},sanitizeAudioWorkletNodeOptions=re=>({...re,outputChannelCount:re.outputChannelCount!==void 0?re.outputChannelCount:re.numberOfInputs===1&&re.numberOfOutputs===1?[re.channelCount]:Array.from({length:re.numberOfOutputs},()=>1)}),sanitizeChannelSplitterOptions=re=>({...re,channelCount:re.numberOfOutputs}),sanitizePeriodicWaveOptions=re=>{const{imag:ee,real:ne}=re;return ee===void 0?ne===void 0?{...re,imag:[0,0],real:[0,0]}:{...re,imag:Array.from(ne,()=>0),real:ne}:ne===void 0?{...re,imag:ee,real:Array.from(ee,()=>0)}:{...re,imag:ee,real:ne}},setValueAtTimeUntilPossible=(re,ee,ne)=>{try{re.setValueAtTime(ee,ne)}catch(ie){if(ie.code!==9)throw ie;setValueAtTimeUntilPossible(re,ee,ne+1e-7)}},testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=re=>{const ee=re.createBufferSource();ee.start();try{ee.start()}catch{return!0}return!1},testAudioBufferSourceNodeStartMethodOffsetClampingSupport=re=>{const ee=re.createBufferSource(),ne=re.createBuffer(1,1,44100);ee.buffer=ne;try{ee.start(0,1)}catch{return!1}return!0},testAudioBufferSourceNodeStopMethodNullifiedBufferSupport=re=>{const ee=re.createBufferSource();ee.start();try{ee.stop()}catch{return!1}return!0},testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=re=>{const ee=re.createOscillator();try{ee.start(-1)}catch(ne){return ne instanceof RangeError}return!1},testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=re=>{const ee=re.createBuffer(1,1,44100),ne=re.createBufferSource();ne.buffer=ee,ne.start(),ne.stop();try{return ne.stop(),!0}catch{return!1}},testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=re=>{const ee=re.createOscillator();try{ee.stop(-1)}catch(ne){return ne instanceof RangeError}return!1},testAudioWorkletNodeOptionsClonability=re=>{const{port1:ee,port2:ne}=new MessageChannel;try{ee.postMessage(re)}finally{ee.close(),ne.close()}},testDomExceptionConstructorSupport=()=>{try{new DOMException}catch{return!1}return!0},testTransferablesSupport=()=>new Promise(re=>{const ee=new ArrayBuffer(0),{port1:ne,port2:ie}=new MessageChannel;ne.onmessage=({data:oe})=>re(oe!==null),ie.postMessage(ee,[ee])}),wrapAudioBufferSourceNodeStartMethodOffsetClamping=re=>{re.start=(ee=>(ne=0,ie=0,oe)=>{const ae=re.buffer,ce=ae===null?ie:Math.min(ae.duration,ie);ae!==null&&ce>ae.duration-.5/re.context.sampleRate?ee.call(re,ne,0,0):ee.call(re,ne,ce,oe)})(re.start)},wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=(re,ee)=>{const ne=ee.createGain();re.connect(ne);const ie=(oe=>()=>{oe.call(re,ne),re.removeEventListener("ended",ie)})(re.disconnect);re.addEventListener("ended",ie),interceptConnections(re,ne),re.stop=(oe=>{let ae=!1;return(ce=0)=>{if(ae)try{oe.call(re,ce)}catch{ne.gain.setValueAtTime(0,ce)}else oe.call(re,ce),ae=!0}})(re.stop)},wrapEventListener=(re,ee)=>ne=>{const ie={value:re};return Object.defineProperties(ne,{currentTarget:ie,target:ie}),typeof ee=="function"?ee.call(re,ne):ee.handleEvent.call(re,ne)},addActiveInputConnectionToAudioNode=createAddActiveInputConnectionToAudioNode(insertElementInSet),addPassiveInputConnectionToAudioNode=createAddPassiveInputConnectionToAudioNode(insertElementInSet),deleteActiveInputConnectionToAudioNode=createDeleteActiveInputConnectionToAudioNode(pickElementFromSet),audioNodeTailTimeStore=new WeakMap,getAudioNodeTailTime=createGetAudioNodeTailTime(audioNodeTailTimeStore),cacheTestResult=createCacheTestResult(new Map,new WeakMap),window$1=createWindow(),createNativeAnalyserNode=createNativeAnalyserNodeFactory(cacheTestResult,createIndexSizeError),getAudioNodeRenderer=createGetAudioNodeRenderer(getAudioNodeConnections),renderInputsOfAudioNode=createRenderInputsOfAudioNode(getAudioNodeConnections,getAudioNodeRenderer,isPartOfACycle),createAnalyserNodeRenderer=createAnalyserNodeRendererFactory(createNativeAnalyserNode,getNativeAudioNode,renderInputsOfAudioNode),getNativeContext=createGetNativeContext(CONTEXT_STORE),nativeOfflineAudioContextConstructor=createNativeOfflineAudioContextConstructor(window$1),isNativeOfflineAudioContext=createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor),audioParamAudioNodeStore=new WeakMap,eventTargetConstructor=createEventTargetConstructor(wrapEventListener),nativeAudioContextConstructor=createNativeAudioContextConstructor(window$1),isNativeAudioContext=createIsNativeAudioContext(nativeAudioContextConstructor),isNativeAudioNode=createIsNativeAudioNode(window$1),isNativeAudioParam=createIsNativeAudioParam(window$1),nativeAudioWorkletNodeConstructor=createNativeAudioWorkletNodeConstructor(window$1),audioNodeConstructor=createAudioNodeConstructor(createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),createAddConnectionToAudioNode(addActiveInputConnectionToAudioNode,addPassiveInputConnectionToAudioNode,connectNativeAudioNodeToNativeAudioNode,deleteActiveInputConnectionToAudioNode,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getAudioNodeTailTime,getEventListenersOfAudioNode,getNativeAudioNode,insertElementInSet,isActiveAudioNode,isPartOfACycle,isPassiveAudioNode),cacheTestResult,createIncrementCycleCounterFactory(CYCLE_COUNTERS,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,isActiveAudioNode),createIndexSizeError,createInvalidAccessError,createNotSupportedError,createDecrementCycleCounter(connectNativeAudioNodeToNativeAudioNode,CYCLE_COUNTERS,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,getNativeContext,isActiveAudioNode,isNativeOfflineAudioContext),createDetectCycles(audioParamAudioNodeStore,getAudioNodeConnections,getValueForKey),eventTargetConstructor,getNativeContext,isNativeAudioContext,isNativeAudioNode,isNativeAudioParam,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor),analyserNodeConstructor=createAnalyserNodeConstructor(audioNodeConstructor,createAnalyserNodeRenderer,createIndexSizeError,createNativeAnalyserNode,getNativeContext,isNativeOfflineAudioContext),audioBufferStore=new WeakSet,nativeAudioBufferConstructor=createNativeAudioBufferConstructor(window$1),convertNumberToUnsignedLong=createConvertNumberToUnsignedLong(new Uint32Array(1)),wrapAudioBufferCopyChannelMethods=createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong,createIndexSizeError),wrapAudioBufferCopyChannelMethodsOutOfBounds=createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong),audioBufferConstructor=createAudioBufferConstructor(audioBufferStore,cacheTestResult,createNotSupportedError,nativeAudioBufferConstructor,nativeOfflineAudioContextConstructor,createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),addSilentConnection=createAddSilentConnection(createNativeGainNode),renderInputsOfAudioParam=createRenderInputsOfAudioParam(getAudioNodeRenderer,getAudioParamConnections,isPartOfACycle),connectAudioParam=createConnectAudioParam(renderInputsOfAudioParam),createNativeAudioBufferSourceNode=createNativeAudioBufferSourceNodeFactory(addSilentConnection,cacheTestResult,testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,testAudioBufferSourceNodeStartMethodOffsetClampingSupport,testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioBufferSourceNodeStartMethodOffsetClamping,createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),renderAutomation=createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections),renderInputsOfAudioParam),createAudioBufferSourceNodeRenderer=createAudioBufferSourceNodeRendererFactory(connectAudioParam,createNativeAudioBufferSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),createAudioParam=createAudioParamFactory(createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),audioParamAudioNodeStore,AUDIO_PARAM_STORE,createAudioParamRenderer,createCancelAndHoldAutomationEvent,createCancelScheduledValuesAutomationEvent,createExponentialRampToValueAutomationEvent,createLinearRampToValueAutomationEvent,createSetTargetAutomationEvent,createSetValueAutomationEvent,createSetValueCurveAutomationEvent,nativeAudioContextConstructor,setValueAtTimeUntilPossible),audioBufferSourceNodeConstructor=createAudioBufferSourceNodeConstructor(audioNodeConstructor,createAudioBufferSourceNodeRenderer,createAudioParam,createInvalidStateError,createNativeAudioBufferSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),audioDestinationNodeConstructor=createAudioDestinationNodeConstructor(audioNodeConstructor,createAudioDestinationNodeRenderer,createIndexSizeError,createInvalidStateError,createNativeAudioDestinationNodeFactory(createNativeGainNode,overwriteAccessors),getNativeContext,isNativeOfflineAudioContext,renderInputsOfAudioNode),createBiquadFilterNodeRenderer=createBiquadFilterNodeRendererFactory(connectAudioParam,createNativeBiquadFilterNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),setAudioNodeTailTime=createSetAudioNodeTailTime(audioNodeTailTimeStore),biquadFilterNodeConstructor=createBiquadFilterNodeConstructor(audioNodeConstructor,createAudioParam,createBiquadFilterNodeRenderer,createInvalidAccessError,createNativeBiquadFilterNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),monitorConnections=createMonitorConnections(insertElementInSet,isNativeAudioNode),wrapChannelMergerNode=createWrapChannelMergerNode(createInvalidStateError,monitorConnections),createNativeChannelMergerNode=createNativeChannelMergerNodeFactory(nativeAudioContextConstructor,wrapChannelMergerNode),createChannelMergerNodeRenderer=createChannelMergerNodeRendererFactory(createNativeChannelMergerNode,getNativeAudioNode,renderInputsOfAudioNode),channelMergerNodeConstructor=createChannelMergerNodeConstructor(audioNodeConstructor,createChannelMergerNodeRenderer,createNativeChannelMergerNode,getNativeContext,isNativeOfflineAudioContext),createChannelSplitterNodeRenderer=createChannelSplitterNodeRendererFactory(createNativeChannelSplitterNode,getNativeAudioNode,renderInputsOfAudioNode),channelSplitterNodeConstructor=createChannelSplitterNodeConstructor(audioNodeConstructor,createChannelSplitterNodeRenderer,createNativeChannelSplitterNode,getNativeContext,isNativeOfflineAudioContext,sanitizeChannelSplitterOptions),createNativeConstantSourceNodeFaker=createNativeConstantSourceNodeFakerFactory(addSilentConnection,createNativeAudioBufferSourceNode,createNativeGainNode,monitorConnections),createNativeConstantSourceNode=createNativeConstantSourceNodeFactory(addSilentConnection,cacheTestResult,createNativeConstantSourceNodeFaker,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport),createConstantSourceNodeRenderer=createConstantSourceNodeRendererFactory(connectAudioParam,createNativeConstantSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),constantSourceNodeConstructor=createConstantSourceNodeConstructor(audioNodeConstructor,createAudioParam,createConstantSourceNodeRenderer,createNativeConstantSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createNativeConvolverNode=createNativeConvolverNodeFactory(createNotSupportedError,overwriteAccessors),createConvolverNodeRenderer=createConvolverNodeRendererFactory(createNativeConvolverNode,getNativeAudioNode,renderInputsOfAudioNode),convolverNodeConstructor=createConvolverNodeConstructor(audioNodeConstructor,createConvolverNodeRenderer,createNativeConvolverNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createDelayNodeRenderer=createDelayNodeRendererFactory(connectAudioParam,createNativeDelayNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),delayNodeConstructor=createDelayNodeConstructor(audioNodeConstructor,createAudioParam,createDelayNodeRenderer,createNativeDelayNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativeDynamicsCompressorNode=createNativeDynamicsCompressorNodeFactory(createNotSupportedError),createDynamicsCompressorNodeRenderer=createDynamicsCompressorNodeRendererFactory(connectAudioParam,createNativeDynamicsCompressorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),dynamicsCompressorNodeConstructor=createDynamicsCompressorNodeConstructor(audioNodeConstructor,createAudioParam,createDynamicsCompressorNodeRenderer,createNativeDynamicsCompressorNode,createNotSupportedError,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createGainNodeRenderer=createGainNodeRendererFactory(connectAudioParam,createNativeGainNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),gainNodeConstructor=createGainNodeConstructor(audioNodeConstructor,createAudioParam,createGainNodeRenderer,createNativeGainNode,getNativeContext,isNativeOfflineAudioContext),createNativeIIRFilterNodeFaker=createNativeIIRFilterNodeFakerFactory(createInvalidAccessError,createInvalidStateError,createNativeScriptProcessorNode,createNotSupportedError),renderNativeOfflineAudioContext=createRenderNativeOfflineAudioContext(cacheTestResult,createNativeGainNode,createNativeScriptProcessorNode,createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode,nativeOfflineAudioContextConstructor)),createIIRFilterNodeRenderer=createIIRFilterNodeRendererFactory(createNativeAudioBufferSourceNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderInputsOfAudioNode,renderNativeOfflineAudioContext),createNativeIIRFilterNode=createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker),iIRFilterNodeConstructor=createIIRFilterNodeConstructor(audioNodeConstructor,createNativeIIRFilterNode,createIIRFilterNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createAudioListener=createAudioListenerFactory(createAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeScriptProcessorNode,createNotSupportedError,getFirstSample,isNativeOfflineAudioContext,overwriteAccessors),unrenderedAudioWorkletNodeStore=new WeakMap,minimalBaseAudioContextConstructor=createMinimalBaseAudioContextConstructor(audioDestinationNodeConstructor,createAudioListener,eventTargetConstructor,isNativeOfflineAudioContext,unrenderedAudioWorkletNodeStore,wrapEventListener),createNativeOscillatorNode=createNativeOscillatorNodeFactory(addSilentConnection,cacheTestResult,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),createOscillatorNodeRenderer=createOscillatorNodeRendererFactory(connectAudioParam,createNativeOscillatorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),oscillatorNodeConstructor=createOscillatorNodeConstructor(audioNodeConstructor,createAudioParam,createNativeOscillatorNode,createOscillatorNodeRenderer,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createConnectedNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode),createNativeWaveShaperNodeFaker=createNativeWaveShaperNodeFakerFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeGainNode,isDCCurve,monitorConnections),createNativeWaveShaperNode=createNativeWaveShaperNodeFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeWaveShaperNodeFaker,isDCCurve,monitorConnections,nativeAudioContextConstructor,overwriteAccessors),createNativePannerNodeFaker=createNativePannerNodeFakerFactory(connectNativeAudioNodeToNativeAudioNode,createInvalidStateError,createNativeChannelMergerNode,createNativeGainNode,createNativeScriptProcessorNode,createNativeWaveShaperNode,createNotSupportedError,disconnectNativeAudioNodeFromNativeAudioNode,getFirstSample,monitorConnections),createNativePannerNode=createNativePannerNodeFactory(createNativePannerNodeFaker),createPannerNodeRenderer=createPannerNodeRendererFactory(connectAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeGainNode,createNativePannerNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),pannerNodeConstructor=createPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativePannerNode,createPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativePeriodicWave=createNativePeriodicWaveFactory(createIndexSizeError),periodicWaveConstructor=createPeriodicWaveConstructor(createNativePeriodicWave,getNativeContext,new WeakSet,sanitizePeriodicWaveOptions),nativeStereoPannerNodeFakerFactory=createNativeStereoPannerNodeFakerFactory(createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeGainNode,createNativeWaveShaperNode,createNotSupportedError,monitorConnections),createNativeStereoPannerNode=createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory,createNotSupportedError),createStereoPannerNodeRenderer=createStereoPannerNodeRendererFactory(connectAudioParam,createNativeStereoPannerNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),stereoPannerNodeConstructor=createStereoPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativeStereoPannerNode,createStereoPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext),createWaveShaperNodeRenderer=createWaveShaperNodeRendererFactory(createNativeWaveShaperNode,getNativeAudioNode,renderInputsOfAudioNode),waveShaperNodeConstructor=createWaveShaperNodeConstructor(audioNodeConstructor,createInvalidStateError,createNativeWaveShaperNode,createWaveShaperNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),isSecureContext=createIsSecureContext(window$1),exposeCurrentFrameAndCurrentTime=createExposeCurrentFrameAndCurrentTime(window$1),backupOfflineAudioContextStore=new WeakMap,getOrCreateBackupOfflineAudioContext=createGetOrCreateBackupOfflineAudioContext(backupOfflineAudioContextStore,nativeOfflineAudioContextConstructor),addAudioWorkletModule=isSecureContext?createAddAudioWorkletModule(cacheTestResult,createNotSupportedError,createEvaluateSource(window$1),exposeCurrentFrameAndCurrentTime,createFetchSource(createAbortError),getNativeContext,getOrCreateBackupOfflineAudioContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,new WeakMap,new WeakMap,createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),window$1):void 0,isNativeContext=createIsNativeContext(isNativeAudioContext,isNativeOfflineAudioContext),decodeAudioData=createDecodeAudioData(audioBufferStore,cacheTestResult,createDataCloneError,createEncodingError,new WeakSet,getNativeContext,isNativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,testPromiseSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),baseAudioContextConstructor=createBaseAudioContextConstructor(addAudioWorkletModule,analyserNodeConstructor,audioBufferConstructor,audioBufferSourceNodeConstructor,biquadFilterNodeConstructor,channelMergerNodeConstructor,channelSplitterNodeConstructor,constantSourceNodeConstructor,convolverNodeConstructor,decodeAudioData,delayNodeConstructor,dynamicsCompressorNodeConstructor,gainNodeConstructor,iIRFilterNodeConstructor,minimalBaseAudioContextConstructor,oscillatorNodeConstructor,pannerNodeConstructor,periodicWaveConstructor,stereoPannerNodeConstructor,waveShaperNodeConstructor),mediaElementAudioSourceNodeConstructor=createMediaElementAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaElementAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioDestinationNodeConstructor=createMediaStreamAudioDestinationNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioDestinationNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioSourceNodeConstructor=createMediaStreamAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),createNativeMediaStreamTrackAudioSourceNode=createNativeMediaStreamTrackAudioSourceNodeFactory(createInvalidStateError,isNativeOfflineAudioContext),mediaStreamTrackAudioSourceNodeConstructor=createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamTrackAudioSourceNode,getNativeContext),audioContextConstructor=createAudioContextConstructor(baseAudioContextConstructor,createInvalidStateError,createNotSupportedError,createUnknownError,mediaElementAudioSourceNodeConstructor,mediaStreamAudioDestinationNodeConstructor,mediaStreamAudioSourceNodeConstructor,mediaStreamTrackAudioSourceNodeConstructor,nativeAudioContextConstructor),getUnrenderedAudioWorkletNodes=createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore),addUnrenderedAudioWorkletNode=createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),connectMultipleOutputs=createConnectMultipleOutputs(createIndexSizeError),deleteUnrenderedAudioWorkletNode=createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),disconnectMultipleOutputs=createDisconnectMultipleOutputs(createIndexSizeError),activeAudioWorkletNodeInputsStore=new WeakMap,getActiveAudioWorkletNodeInputs=createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore,getValueForKey),createNativeAudioWorkletNodeFaker=createNativeAudioWorkletNodeFakerFactory(connectMultipleOutputs,createIndexSizeError,createInvalidStateError,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,createNativeScriptProcessorNode,createNotSupportedError,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getActiveAudioWorkletNodeInputs,monitorConnections),createNativeAudioWorkletNode=createNativeAudioWorkletNodeFactory(createInvalidStateError,createNativeAudioWorkletNodeFaker,createNativeGainNode,createNotSupportedError,monitorConnections),createAudioWorkletNodeRenderer=createAudioWorkletNodeRendererFactory(connectAudioParam,connectMultipleOutputs,createNativeAudioBufferSourceNode,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,deleteUnrenderedAudioWorkletNode,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getNativeAudioNode,nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),getBackupOfflineAudioContext=createGetBackupOfflineAudioContext(backupOfflineAudioContextStore),setActiveAudioWorkletNodeInputs=createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore),audioWorkletNodeConstructor=isSecureContext?createAudioWorkletNodeConstructor(addUnrenderedAudioWorkletNode,audioNodeConstructor,createAudioParam,createAudioWorkletNodeRenderer,createNativeAudioWorkletNode,getAudioNodeConnections,getBackupOfflineAudioContext,getNativeContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,sanitizeAudioWorkletNodeOptions,setActiveAudioWorkletNodeInputs,testAudioWorkletNodeOptionsClonability,wrapEventListener):void 0,createNativeOfflineAudioContext=createCreateNativeOfflineAudioContext(createNotSupportedError,nativeOfflineAudioContextConstructor),startRendering=createStartRendering(audioBufferStore,cacheTestResult,getAudioNodeRenderer,getUnrenderedAudioWorkletNodes,renderNativeOfflineAudioContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),offlineAudioContextConstructor=createOfflineAudioContextConstructor(baseAudioContextConstructor,cacheTestResult,createInvalidStateError,createNativeOfflineAudioContext,startRendering),isAnyAudioContext=createIsAnyAudioContext(CONTEXT_STORE,isNativeAudioContext),isAnyAudioNode=createIsAnyAudioNode(AUDIO_NODE_STORE,isNativeAudioNode),isAnyAudioParam=createIsAnyAudioParam(AUDIO_PARAM_STORE,isNativeAudioParam),isAnyOfflineAudioContext=createIsAnyOfflineAudioContext(CONTEXT_STORE,isNativeOfflineAudioContext),isSupported=()=>createIsSupportedPromise(cacheTestResult,createTestAudioBufferCopyChannelMethodsSubarraySupport(nativeOfflineAudioContextConstructor),createTestAudioContextCloseMethodSupport(nativeAudioContextConstructor),createTestAudioContextDecodeAudioDataMethodTypeErrorSupport(nativeOfflineAudioContextConstructor),createTestAudioContextOptionsSupport(nativeAudioContextConstructor),createTestAudioNodeConnectMethodSupport(nativeOfflineAudioContextConstructor),createTestAudioWorkletProcessorNoOutputsSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),createTestChannelMergerNodeChannelCountSupport(nativeOfflineAudioContextConstructor),createTestConstantSourceNodeAccurateSchedulingSupport(nativeOfflineAudioContextConstructor),createTestConvolverNodeBufferReassignabilitySupport(nativeOfflineAudioContextConstructor),createTestConvolverNodeChannelCountSupport(nativeOfflineAudioContextConstructor),testDomExceptionConstructorSupport,createTestIsSecureContextSupport(window$1),createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport(nativeAudioContextConstructor),createTestStereoPannerNodeDefaultValueSupport(nativeOfflineAudioContextConstructor),testTransferablesSupport);function assert(re,ee){if(!re)throw new Error(ee)}function assertRange(re,ee,ne=1/0){if(!(ee<=re&&re<=ne))throw new RangeError(`Value must be within [${ee}, ${ne}], got: ${re}`)}function assertContextRunning(re){!re.isOffline&&re.state!=="running"&&warn('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let defaultLogger=console;function setLogger(re){defaultLogger=re}function log(...re){defaultLogger.log(...re)}function warn(...re){defaultLogger.warn(...re)}const Debug=Object.freeze(Object.defineProperty({__proto__:null,assert,assertContextRunning,assertRange,log,setLogger,warn},Symbol.toStringTag,{value:"Module"}));function isUndef(re){return typeof re>"u"}function isDefined(re){return!isUndef(re)}function isFunction$2(re){return typeof re=="function"}function isNumber$2(re){return typeof re=="number"}function isObject$4(re){return Object.prototype.toString.call(re)==="[object Object]"&&re.constructor===Object}function isBoolean$1(re){return typeof re=="boolean"}function isArray$8(re){return Array.isArray(re)}function isString$1(re){return typeof re=="string"}function isNote(re){return isString$1(re)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(re)}function createAudioContext(re){return new audioContextConstructor(re)}function createOfflineAudioContext(re,ee,ne){return new offlineAudioContextConstructor(re,ee,ne)}const theWindow=typeof self=="object"?self:null,hasAudioContext=theWindow&&(theWindow.hasOwnProperty("AudioContext")||theWindow.hasOwnProperty("webkitAudioContext"));function createAudioWorkletNode(re,ee,ne){return assert(isDefined(audioWorkletNodeConstructor),"This node only works in a secure context (https or localhost)"),new audioWorkletNodeConstructor(re,ee,ne)}class Ticker{constructor(ee,ne,ie){this._callback=ee,this._type=ne,this._updateInterval=ie,this._createClock()}_createWorker(){const ee=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),ne=URL.createObjectURL(ee),ie=new Worker(ne);ie.onmessage=this._callback.bind(this),this._worker=ie}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(ee){this._updateInterval=Math.max(ee,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(ee*1e3,1))}get type(){return this._type}set type(ee){this._disposeClock(),this._type=ee,this._createClock()}dispose(){this._disposeClock()}}function isAudioParam(re){return isAnyAudioParam(re)}function isAudioNode(re){return isAnyAudioNode(re)}function isOfflineAudioContext(re){return isAnyOfflineAudioContext(re)}function isAudioContext(re){return isAnyAudioContext(re)}function isAudioBuffer(re){return re instanceof AudioBuffer}function noCopy(re,ee){return re==="value"||isAudioParam(ee)||isAudioNode(ee)||isAudioBuffer(ee)}function deepMerge(re,...ee){if(!ee.length)return re;const ne=ee.shift();if(isObject$4(re)&&isObject$4(ne))for(const ie in ne)noCopy(ie,ne[ie])?re[ie]=ne[ie]:isObject$4(ne[ie])?(re[ie]||Object.assign(re,{[ie]:{}}),deepMerge(re[ie],ne[ie])):Object.assign(re,{[ie]:ne[ie]});return deepMerge(re,...ee)}function deepEquals(re,ee){return re.length===ee.length&&re.every((ne,ie)=>ee[ie]===ne)}function optionsFromArguments(re,ee,ne=[],ie){const oe={},ae=Array.from(ee);if(isObject$4(ae[0])&&ie&&!Reflect.has(ae[0],ie)&&(Object.keys(ae[0]).some(le=>Reflect.has(re,le))||(deepMerge(oe,{[ie]:ae[0]}),ne.splice(ne.indexOf(ie),1),ae.shift())),ae.length===1&&isObject$4(ae[0]))deepMerge(oe,ae[0]);else for(let ce=0;ce<ne.length;ce++)isDefined(ae[ce])&&(oe[ne[ce]]=ae[ce]);return deepMerge(re,oe)}function getDefaultsFromInstance(re){return re.constructor.getDefaults()}function defaultArg(re,ee){return isUndef(re)?ee:re}function omitFromObject(re,ee){return ee.forEach(ne=>{Reflect.has(re,ne)&&delete re[ne]}),re}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2019 Yotam Mann
 */let Tone$1=class{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...ee){(this.debug||theWindow&&this.toString()===theWindow.TONE_DEBUG_CLASS)&&log(this,...ee)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}};Tone$1.version=version;const EPSILON=1e-6;function GT(re,ee){return re>ee+EPSILON}function GTE(re,ee){return GT(re,ee)||EQ(re,ee)}function LT(re,ee){return re+EPSILON<ee}function EQ(re,ee){return Math.abs(re-ee)<EPSILON}function clamp(re,ee,ne){return Math.max(Math.min(re,ne),ee)}class Timeline extends Tone$1{constructor(){super(),this.name="Timeline",this._timeline=[];const ee=optionsFromArguments(Timeline.getDefaults(),arguments,["memory"]);this.memory=ee.memory,this.increasing=ee.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(ee){if(assert(Reflect.has(ee,"time"),"Timeline: events must have a time attribute"),ee.time=ee.time.valueOf(),this.increasing&&this.length){const ne=this._timeline[this.length-1];assert(GTE(ee.time,ne.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(ee)}else{const ne=this._search(ee.time);this._timeline.splice(ne+1,0,ee)}if(this.length>this.memory){const ne=this.length-this.memory;this._timeline.splice(0,ne)}return this}remove(ee){const ne=this._timeline.indexOf(ee);return ne!==-1&&this._timeline.splice(ne,1),this}get(ee,ne="time"){const ie=this._search(ee,ne);return ie!==-1?this._timeline[ie]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(ee,ne="time"){const ie=this._search(ee,ne);return ie+1<this._timeline.length?this._timeline[ie+1]:null}getBefore(ee){const ne=this._timeline.length;if(ne>0&&this._timeline[ne-1].time<ee)return this._timeline[ne-1];const ie=this._search(ee);return ie-1>=0?this._timeline[ie-1]:null}cancel(ee){if(this._timeline.length>1){let ne=this._search(ee);if(ne>=0)if(EQ(this._timeline[ne].time,ee)){for(let ie=ne;ie>=0&&EQ(this._timeline[ie].time,ee);ie--)ne=ie;this._timeline=this._timeline.slice(0,ne)}else this._timeline=this._timeline.slice(0,ne+1);else this._timeline=[]}else this._timeline.length===1&&GTE(this._timeline[0].time,ee)&&(this._timeline=[]);return this}cancelBefore(ee){const ne=this._search(ee);return ne>=0&&(this._timeline=this._timeline.slice(ne+1)),this}previousEvent(ee){const ne=this._timeline.indexOf(ee);return ne>0?this._timeline[ne-1]:null}_search(ee,ne="time"){if(this._timeline.length===0)return-1;let ie=0;const oe=this._timeline.length;let ae=oe;if(oe>0&&this._timeline[oe-1][ne]<=ee)return oe-1;for(;ie<ae;){let ce=Math.floor(ie+(ae-ie)/2);const le=this._timeline[ce],ue=this._timeline[ce+1];if(EQ(le[ne],ee)){for(let he=ce;he<this._timeline.length;he++){const fe=this._timeline[he];if(EQ(fe[ne],ee))ce=he;else break}return ce}else{if(LT(le[ne],ee)&&GT(ue[ne],ee))return ce;GT(le[ne],ee)?ae=ce:ie=ce+1}}return-1}_iterate(ee,ne=0,ie=this._timeline.length-1){this._timeline.slice(ne,ie+1).forEach(ee)}forEach(ee){return this._iterate(ee),this}forEachBefore(ee,ne){const ie=this._search(ee);return ie!==-1&&this._iterate(ne,0,ie),this}forEachAfter(ee,ne){const ie=this._search(ee);return this._iterate(ne,ie+1),this}forEachBetween(ee,ne,ie){let oe=this._search(ee),ae=this._search(ne);return oe!==-1&&ae!==-1?(this._timeline[oe].time!==ee&&(oe+=1),this._timeline[ae].time===ne&&(ae-=1),this._iterate(ie,oe,ae)):oe===-1&&this._iterate(ie,0,ae),this}forEachFrom(ee,ne){let ie=this._search(ee);for(;ie>=0&&this._timeline[ie].time>=ee;)ie--;return this._iterate(ne,ie+1),this}forEachAtTime(ee,ne){const ie=this._search(ee);if(ie!==-1&&EQ(this._timeline[ie].time,ee)){let oe=ie;for(let ae=ie;ae>=0&&EQ(this._timeline[ae].time,ee);ae--)oe=ae;this._iterate(ae=>{ne(ae)},oe,ie)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const notifyNewContext=[];function onContextInit(re){notifyNewContext.push(re)}function initializeContext(re){notifyNewContext.forEach(ee=>ee(re))}const notifyCloseContext=[];function onContextClose(re){notifyCloseContext.push(re)}function closeContext(re){notifyCloseContext.forEach(ee=>ee(re))}class Emitter extends Tone$1{constructor(){super(...arguments),this.name="Emitter"}on(ee,ne){return ee.split(/\W+/).forEach(oe=>{isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(oe)||(this._events[oe]=[]),this._events[oe].push(ne)}),this}once(ee,ne){const ie=(...oe)=>{ne(...oe),this.off(ee,ie)};return this.on(ee,ie),this}off(ee,ne){return ee.split(/\W+/).forEach(oe=>{if(isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(ee))if(isUndef(ne))this._events[ee]=[];else{const ae=this._events[ee];for(let ce=ae.length-1;ce>=0;ce--)ae[ce]===ne&&ae.splice(ce,1)}}),this}emit(ee,...ne){if(this._events&&this._events.hasOwnProperty(ee)){const ie=this._events[ee].slice(0);for(let oe=0,ae=ie.length;oe<ae;oe++)ie[oe].apply(this,ne)}return this}static mixin(ee){["on","once","off","emit"].forEach(ne=>{const ie=Object.getOwnPropertyDescriptor(Emitter.prototype,ne);Object.defineProperty(ee.prototype,ne,ie)})}dispose(){return super.dispose(),this._events=void 0,this}}class BaseContext extends Emitter{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Context extends BaseContext{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Timeline,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const ee=optionsFromArguments(Context.getDefaults(),arguments,["context"]);ee.context?this._context=ee.context:this._context=createAudioContext({latencyHint:ee.latencyHint}),this._ticker=new Ticker(this.emit.bind(this,"tick"),ee.clockSource,ee.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(ee.latencyHint),this.lookAhead=ee.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(initializeContext(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(ee,ne,ie){return this._context.createBuffer(ee,ne,ie)}createChannelMerger(ee){return this._context.createChannelMerger(ee)}createChannelSplitter(ee){return this._context.createChannelSplitter(ee)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(ee){return this._context.createDelay(ee)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(ee,ne){return this._context.createIIRFilter(ee,ne)}createPanner(){return this._context.createPanner()}createPeriodicWave(ee,ne,ie){return this._context.createPeriodicWave(ee,ne,ie)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(ee){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(ee)}createMediaElementSource(ee){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(ee)}createMediaStreamDestination(){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(ee){return this._context.decodeAudioData(ee)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(ee){assert(!this._initialized,"The listener cannot be set after initialization."),this._listener=ee}get transport(){return this.initialize(),this._transport}set transport(ee){assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=ee}get draw(){return this.initialize(),this._draw}set draw(ee){assert(!this._initialized,"Draw cannot be set after initialization."),this._draw=ee}get destination(){return this.initialize(),this._destination}set destination(ee){assert(!this._initialized,"The destination cannot be set after initialization."),this._destination=ee}createAudioWorkletNode(ee,ne){return createAudioWorkletNode(this.rawContext,ee,ne)}addAudioWorkletModule(ee,ne){return __awaiter$1(this,void 0,void 0,function*(){assert(isDefined(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(ne)||this._workletModules.set(ne,this.rawContext.audioWorklet.addModule(ee)),yield this._workletModules.get(ne)})}workletsAreReady(){return __awaiter$1(this,void 0,void 0,function*(){const ee=[];this._workletModules.forEach(ne=>ee.push(ne)),yield Promise.all(ee)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(ee){this._ticker.updateInterval=ee}get clockSource(){return this._ticker.type}set clockSource(ee){this._ticker.type=ee}get latencyHint(){return this._latencyHint}_setLatencyHint(ee){let ne=0;if(this._latencyHint=ee,isString$1(ee))switch(ee){case"interactive":ne=.1;break;case"playback":ne=.5;break;case"balanced":ne=.25;break}this.lookAhead=ne,this.updateInterval=ne/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return isAudioContext(this._context)?this._context.resume():Promise.resolve()}close(){return __awaiter$1(this,void 0,void 0,function*(){isAudioContext(this._context)&&(yield this._context.close()),this._initialized&&closeContext(this)})}getConstant(ee){if(this._constants.has(ee))return this._constants.get(ee);{const ne=this._context.createBuffer(1,128,this._context.sampleRate),ie=ne.getChannelData(0);for(let ae=0;ae<ie.length;ae++)ie[ae]=ee;const oe=this._context.createBufferSource();return oe.channelCount=1,oe.channelCountMode="explicit",oe.buffer=ne,oe.loop=!0,oe.start(0),this._constants.set(ee,oe),oe}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(ee=>this._constants[ee].disconnect()),this}_timeoutLoop(){const ee=this.now();let ne=this._timeouts.peek();for(;this._timeouts.length&&ne&&ne.time<=ee;)ne.callback(),this._timeouts.shift(),ne=this._timeouts.peek()}setTimeout(ee,ne){this._timeoutIds++;const ie=this.now();return this._timeouts.add({callback:ee,id:this._timeoutIds,time:ie+ne}),this._timeoutIds}clearTimeout(ee){return this._timeouts.forEach(ne=>{ne.id===ee&&this._timeouts.remove(ne)}),this}clearInterval(ee){return this.clearTimeout(ee)}setInterval(ee,ne){const ie=++this._timeoutIds,oe=()=>{const ae=this.now();this._timeouts.add({callback:()=>{ee(),oe()},id:ie,time:ae+ne})};return oe(),ie}}class DummyContext extends BaseContext{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(ee,ne,ie){return{}}createChannelMerger(ee){return{}}createChannelSplitter(ee){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(ee){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(ee,ne){return{}}createPanner(){return{}}createPeriodicWave(ee,ne,ie){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(ee){return{}}createMediaElementSource(ee){return{}}createMediaStreamDestination(){return{}}decodeAudioData(ee){return Promise.resolve({})}createAudioWorkletNode(ee,ne){return{}}get rawContext(){return{}}addAudioWorkletModule(ee,ne){return __awaiter$1(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(ee,ne){return 0}clearTimeout(ee){return this}setInterval(ee,ne){return 0}clearInterval(ee){return this}getConstant(ee){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(ee){}get destination(){return{}}set destination(ee){}now(){return 0}immediate(){return 0}}function readOnly(re,ee){isArray$8(ee)?ee.forEach(ne=>readOnly(re,ne)):Object.defineProperty(re,ee,{enumerable:!0,writable:!1})}function writable(re,ee){isArray$8(ee)?ee.forEach(ne=>writable(re,ne)):Object.defineProperty(re,ee,{writable:!0})}const noOp=()=>{};class ToneAudioBuffer extends Tone$1{constructor(){super(),this.name="ToneAudioBuffer",this.onload=noOp;const ee=optionsFromArguments(ToneAudioBuffer.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=ee.reverse,this.onload=ee.onload,ee.url&&isAudioBuffer(ee.url)||ee.url instanceof ToneAudioBuffer?this.set(ee.url):isString$1(ee.url)&&this.load(ee.url).catch(ee.onerror)}static getDefaults(){return{onerror:noOp,onload:noOp,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:getContext().sampleRate}set(ee){return ee instanceof ToneAudioBuffer?ee.loaded?this._buffer=ee.get():ee.onload=()=>{this.set(ee),this.onload(this)}:this._buffer=ee,this._reversed&&this._reverse(),this}get(){return this._buffer}load(ee){return __awaiter$1(this,void 0,void 0,function*(){const ne=ToneAudioBuffer.load(ee).then(ie=>{this.set(ie),this.onload(this)});ToneAudioBuffer.downloads.push(ne);try{yield ne}finally{const ie=ToneAudioBuffer.downloads.indexOf(ne);ToneAudioBuffer.downloads.splice(ie,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(ee){const ne=isArray$8(ee)&&ee[0].length>0,ie=ne?ee.length:1,oe=ne?ee[0].length:ee.length,ae=getContext(),ce=ae.createBuffer(ie,oe,ae.sampleRate),le=!ne&&ie===1?[ee]:ee;for(let ue=0;ue<ie;ue++)ce.copyToChannel(le[ue],ue);return this._buffer=ce,this}toMono(ee){if(isNumber$2(ee))this.fromArray(this.toArray(ee));else{let ne=new Float32Array(this.length);const ie=this.numberOfChannels;for(let oe=0;oe<ie;oe++){const ae=this.toArray(oe);for(let ce=0;ce<ae.length;ce++)ne[ce]+=ae[ce]}ne=ne.map(oe=>oe/ie),this.fromArray(ne)}return this}toArray(ee){if(isNumber$2(ee))return this.getChannelData(ee);if(this.numberOfChannels===1)return this.toArray(0);{const ne=[];for(let ie=0;ie<this.numberOfChannels;ie++)ne[ie]=this.getChannelData(ie);return ne}}getChannelData(ee){return this._buffer?this._buffer.getChannelData(ee):new Float32Array(0)}slice(ee,ne=this.duration){const ie=Math.floor(ee*this.sampleRate),oe=Math.floor(ne*this.sampleRate);assert(ie<oe,"The start time must be less than the end time");const ae=oe-ie,ce=getContext().createBuffer(this.numberOfChannels,ae,this.sampleRate);for(let le=0;le<this.numberOfChannels;le++)ce.copyToChannel(this.getChannelData(le).subarray(ie,oe),le);return new ToneAudioBuffer(ce)}_reverse(){if(this.loaded)for(let ee=0;ee<this.numberOfChannels;ee++)this.getChannelData(ee).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(ee){this._reversed!==ee&&(this._reversed=ee,this._reverse())}static fromArray(ee){return new ToneAudioBuffer().fromArray(ee)}static fromUrl(ee){return __awaiter$1(this,void 0,void 0,function*(){return yield new ToneAudioBuffer().load(ee)})}static load(ee){return __awaiter$1(this,void 0,void 0,function*(){const ne=ee.match(/\[([^\]\[]+\|.+)\]$/);if(ne){const le=ne[1].split("|");let ue=le[0];for(const he of le)if(ToneAudioBuffer.supportsType(he)){ue=he;break}ee=ee.replace(ne[0],ue)}const ie=ToneAudioBuffer.baseUrl===""||ToneAudioBuffer.baseUrl.endsWith("/")?ToneAudioBuffer.baseUrl:ToneAudioBuffer.baseUrl+"/",oe=yield fetch(ie+ee);if(!oe.ok)throw new Error(`could not load url: ${ee}`);const ae=yield oe.arrayBuffer();return yield getContext().decodeAudioData(ae)})}static supportsType(ee){const ne=ee.split("."),ie=ne[ne.length-1];return document.createElement("audio").canPlayType("audio/"+ie)!==""}static loaded(){return __awaiter$1(this,void 0,void 0,function*(){for(yield Promise.resolve();ToneAudioBuffer.downloads.length;)yield ToneAudioBuffer.downloads[0]})}}ToneAudioBuffer.baseUrl="";ToneAudioBuffer.downloads=[];class OfflineContext extends Context{constructor(){super({clockSource:"offline",context:isOfflineAudioContext(arguments[0])?arguments[0]:createOfflineAudioContext(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:isOfflineAudioContext(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=isOfflineAudioContext(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(ee){return __awaiter$1(this,void 0,void 0,function*(){let ne=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,ne++;const ie=Math.floor(this.sampleRate/128);ee&&ne%ie===0&&(yield new Promise(oe=>setTimeout(oe,1)))}})}render(ee=!0){return __awaiter$1(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(ee);const ne=yield this._context.startRendering();return new ToneAudioBuffer(ne)})}close(){return Promise.resolve()}}const dummyContext=new DummyContext;let globalContext=dummyContext;function getContext(){return globalContext===dummyContext&&hasAudioContext&&setContext(new Context),globalContext}function setContext(re){isAudioContext(re)?globalContext=new Context(re):isOfflineAudioContext(re)?globalContext=new OfflineContext(re):globalContext=re}function start(){return globalContext.resume()}if(theWindow&&!theWindow.TONE_SILENCE_LOGGING){const ee=` * Tone.js v${version} * `;console.log(`%c${ee}`,"background: #000; color: #fff")}function dbToGain(re){return Math.pow(10,re/20)}function gainToDb(re){return 20*(Math.log(re)/Math.LN10)}function intervalToFrequencyRatio(re){return Math.pow(2,re/12)}let A4=440;function getA4(){return A4}function setA4(re){A4=re}function ftom(re){return Math.round(ftomf(re))}function ftomf(re){return 69+12*Math.log2(re/A4)}function mtof(re){return A4*Math.pow(2,(re-69)/12)}class TimeBaseClass extends Tone$1{constructor(ee,ne,ie){super(),this.defaultUnits="s",this._val=ne,this._units=ie,this.context=ee,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:ee=>this._frequencyToUnits(parseFloat(ee)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:ee=>this._ticksToUnits(parseInt(ee,10)),regexp:/^(\d+)i$/i},m:{method:ee=>this._beatsToUnits(parseInt(ee,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(ee,ne)=>{const ie=parseInt(ee,10),oe=ne==="."?1.5:1;return ie===1?this._beatsToUnits(this._getTimeSignature())*oe:this._beatsToUnits(4/ie)*oe},regexp:/^(\d+)n(\.?)$/i},number:{method:ee=>this._expressions[this.defaultUnits].method.call(this,ee),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:ee=>this._secondsToUnits(parseFloat(ee)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:ee=>parseInt(ee,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:ee=>{const ne=parseInt(ee,10);return this._beatsToUnits(8/(Math.floor(ne)*3))},regexp:/^(\d+)t$/i},tr:{method:(ee,ne,ie)=>{let oe=0;return ee&&ee!=="0"&&(oe+=this._beatsToUnits(this._getTimeSignature()*parseFloat(ee))),ne&&ne!=="0"&&(oe+=this._beatsToUnits(parseFloat(ne))),ie&&ie!=="0"&&(oe+=this._beatsToUnits(parseFloat(ie)/4)),oe},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof TimeBaseClass&&this.fromType(this._val),isUndef(this._val))return this._noArg();if(isString$1(this._val)&&isUndef(this._units)){for(const ee in this._expressions)if(this._expressions[ee].regexp.test(this._val.trim())){this._units=ee;break}}else if(isObject$4(this._val)){let ee=0;for(const ne in this._val)if(isDefined(this._val[ne])){const ie=this._val[ne],oe=new this.constructor(this.context,ne).valueOf()*ie;ee+=oe}return ee}if(isDefined(this._units)){const ee=this._expressions[this._units],ne=this._val.toString().trim().match(ee.regexp);return ne?ee.method.apply(this,ne.slice(1)):ee.method.call(this,this._val)}else return isString$1(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(ee){return 1/ee}_beatsToUnits(ee){return 60/this._getBpm()*ee}_secondsToUnits(ee){return ee}_ticksToUnits(ee){return ee*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(ee){switch(this._units=void 0,this.defaultUnits){case"s":this._val=ee.toSeconds();break;case"i":this._val=ee.toTicks();break;case"hz":this._val=ee.toFrequency();break;case"midi":this._val=ee.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class TimeClass extends TimeBaseClass{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:ee=>this._now()+new this.constructor(this.context,ee).valueOf(),regexp:/^\+(.+)/},quantize:{method:ee=>{const ne=new TimeClass(this.context,ee).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(ne))},regexp:/^@(.+)/}})}quantize(ee,ne=1){const ie=new this.constructor(this.context,ee).valueOf(),oe=this.valueOf(),le=Math.round(oe/ie)*ie-oe;return oe+le*ne}toNotation(){const ee=this.toSeconds(),ne=["1m"];for(let ae=1;ae<9;ae++){const ce=Math.pow(2,ae);ne.push(ce+"n."),ne.push(ce+"n"),ne.push(ce+"t")}ne.push("0");let ie=ne[0],oe=new TimeClass(this.context,ne[0]).toSeconds();return ne.forEach(ae=>{const ce=new TimeClass(this.context,ae).toSeconds();Math.abs(ce-ee)<Math.abs(oe-ee)&&(ie=ae,oe=ce)}),ie}toBarsBeatsSixteenths(){const ee=this._beatsToUnits(1);let ne=this.valueOf()/ee;ne=parseFloat(ne.toFixed(4));const ie=Math.floor(ne/this._getTimeSignature());let oe=ne%1*4;ne=Math.floor(ne)%this._getTimeSignature();const ae=oe.toString();return ae.length>3&&(oe=parseFloat(parseFloat(ae).toFixed(3))),[ie,ne,oe].join(":")}toTicks(){const ee=this._beatsToUnits(1),ne=this.valueOf()/ee;return Math.round(ne*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return ftom(this.toFrequency())}_now(){return this.context.now()}}function Time(re,ee){return new TimeClass(getContext(),re,ee)}class FrequencyClass extends TimeClass{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return getA4()}static set A4(ee){setA4(ee)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(ee){return this.defaultUnits==="midi"?ee:FrequencyClass.mtof(ee)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(ee,ne){const oe=noteToScaleIndex[ee.toLowerCase()]+(parseInt(ne,10)+1)*12;return this.defaultUnits==="midi"?oe:FrequencyClass.mtof(oe)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(ee,ne,ie){let oe=1;return ee&&ee!=="0"&&(oe*=this._beatsToUnits(this._getTimeSignature()*parseFloat(ee))),ne&&ne!=="0"&&(oe*=this._beatsToUnits(parseFloat(ne))),ie&&ie!=="0"&&(oe*=this._beatsToUnits(parseFloat(ie)/4)),oe}}})}transpose(ee){return new FrequencyClass(this.context,this.valueOf()*intervalToFrequencyRatio(ee))}harmonize(ee){return ee.map(ne=>this.transpose(ne))}toMidi(){return ftom(this.valueOf())}toNote(){const ee=this.toFrequency(),ne=Math.log2(ee/FrequencyClass.A4);let ie=Math.round(12*ne)+57;const oe=Math.floor(ie/12);return oe<0&&(ie+=-12*oe),scaleIndexToNote[ie%12]+oe.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const ee=this._beatsToUnits(1),ne=this.valueOf()/ee;return Math.floor(ne*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(ee){return ee}_ticksToUnits(ee){return 1/(ee*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(ee){return 1/super._beatsToUnits(ee)}_secondsToUnits(ee){return 1/ee}static mtof(ee){return mtof(ee)}static ftom(ee){return ftom(ee)}}const noteToScaleIndex={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function Frequency(re,ee){return new FrequencyClass(getContext(),re,ee)}class TransportTimeClass extends TimeClass{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function TransportTime(re,ee){return new TransportTimeClass(getContext(),re,ee)}class ToneWithContext extends Tone$1{constructor(){super();const ee=optionsFromArguments(ToneWithContext.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=ee.context}static getDefaults(){return{context:getContext()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(ee){return new TimeClass(this.context,ee).toSeconds()}toFrequency(ee){return new FrequencyClass(this.context,ee).toFrequency()}toTicks(ee){return new TransportTimeClass(this.context,ee).toTicks()}_getPartialProperties(ee){const ne=this.get();return Object.keys(ne).forEach(ie=>{isUndef(ee[ie])&&delete ne[ie]}),ne}get(){const ee=getDefaultsFromInstance(this);return Object.keys(ee).forEach(ne=>{if(Reflect.has(this,ne)){const ie=this[ne];isDefined(ie)&&isDefined(ie.value)&&isDefined(ie.setValueAtTime)?ee[ne]=ie.value:ie instanceof ToneWithContext?ee[ne]=ie._getPartialProperties(ee[ne]):isArray$8(ie)||isNumber$2(ie)||isString$1(ie)||isBoolean$1(ie)?ee[ne]=ie:delete ee[ne]}}),ee}set(ee){return Object.keys(ee).forEach(ne=>{Reflect.has(this,ne)&&isDefined(this[ne])&&(this[ne]&&isDefined(this[ne].value)&&isDefined(this[ne].setValueAtTime)?this[ne].value!==ee[ne]&&(this[ne].value=ee[ne]):this[ne]instanceof ToneWithContext?this[ne].set(ee[ne]):this[ne]=ee[ne])}),this}}class StateTimeline extends Timeline{constructor(ee="stopped"){super(),this.name="StateTimeline",this._initial=ee,this.setStateAtTime(this._initial,0)}getValueAtTime(ee){const ne=this.get(ee);return ne!==null?ne.state:this._initial}setStateAtTime(ee,ne,ie){return assertRange(ne,0),this.add(Object.assign({},ie,{state:ee,time:ne})),this}getLastState(ee,ne){const ie=this._search(ne);for(let oe=ie;oe>=0;oe--){const ae=this._timeline[oe];if(ae.state===ee)return ae}}getNextState(ee,ne){const ie=this._search(ne);if(ie!==-1)for(let oe=ie;oe<this._timeline.length;oe++){const ae=this._timeline[oe];if(ae.state===ee)return ae}}}class Param extends ToneWithContext{constructor(){super(optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const ee=optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"]);for(assert(isDefined(ee.param)&&(isAudioParam(ee.param)||ee.param instanceof Param),"param must be an AudioParam");!isAudioParam(ee.param);)ee.param=ee.param._param;this._swappable=isDefined(ee.swappable)?ee.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=ee.param,this.input.connect(this._param)):this._param=this.input=ee.param,this._events=new Timeline(1e3),this._initialValue=this._param.defaultValue,this.units=ee.units,this.convert=ee.convert,this._minValue=ee.minValue,this._maxValue=ee.maxValue,isDefined(ee.value)&&ee.value!==this._toType(this._initialValue)&&this.setValueAtTime(ee.value,0)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{convert:!0,units:"number"})}get value(){const ee=this.now();return this.getValueAtTime(ee)}set value(ee){this.cancelScheduledValues(this.now()),this.setValueAtTime(ee,this.now())}get minValue(){return isDefined(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return isDefined(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(ee,ne){return this.units===ne}_assertRange(ee){return isDefined(this.maxValue)&&isDefined(this.minValue)&&assertRange(ee,this._fromType(this.minValue),this._fromType(this.maxValue)),ee}_fromType(ee){return this.convert&&!this.overridden?this._is(ee,"time")?this.toSeconds(ee):this._is(ee,"decibels")?dbToGain(ee):this._is(ee,"frequency")?this.toFrequency(ee):ee:this.overridden?0:ee}_toType(ee){return this.convert&&this.units==="decibels"?gainToDb(ee):ee}setValueAtTime(ee,ne){const ie=this.toSeconds(ne),oe=this._fromType(ee);return assert(isFinite(oe)&&isFinite(ie),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(ee)}, ${JSON.stringify(ne)}`),this._assertRange(oe),this.log(this.units,"setValueAtTime",ee,ie),this._events.add({time:ie,type:"setValueAtTime",value:oe}),this._param.setValueAtTime(oe,ie),this}getValueAtTime(ee){const ne=Math.max(this.toSeconds(ee),0),ie=this._events.getAfter(ne),oe=this._events.get(ne);let ae=this._initialValue;if(oe===null)ae=this._initialValue;else if(oe.type==="setTargetAtTime"&&(ie===null||ie.type==="setValueAtTime")){const ce=this._events.getBefore(oe.time);let le;ce===null?le=this._initialValue:le=ce.value,oe.type==="setTargetAtTime"&&(ae=this._exponentialApproach(oe.time,le,oe.value,oe.constant,ne))}else if(ie===null)ae=oe.value;else if(ie.type==="linearRampToValueAtTime"||ie.type==="exponentialRampToValueAtTime"){let ce=oe.value;if(oe.type==="setTargetAtTime"){const le=this._events.getBefore(oe.time);le===null?ce=this._initialValue:ce=le.value}ie.type==="linearRampToValueAtTime"?ae=this._linearInterpolate(oe.time,ce,ie.time,ie.value,ne):ae=this._exponentialInterpolate(oe.time,ce,ie.time,ie.value,ne)}else ae=oe.value;return this._toType(ae)}setRampPoint(ee){ee=this.toSeconds(ee);let ne=this.getValueAtTime(ee);return this.cancelAndHoldAtTime(ee),this._fromType(ne)===0&&(ne=this._toType(this._minOutput)),this.setValueAtTime(ne,ee),this}linearRampToValueAtTime(ee,ne){const ie=this._fromType(ee),oe=this.toSeconds(ne);return assert(isFinite(ie)&&isFinite(oe),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(ee)}, ${JSON.stringify(ne)}`),this._assertRange(ie),this._events.add({time:oe,type:"linearRampToValueAtTime",value:ie}),this.log(this.units,"linearRampToValueAtTime",ee,oe),this._param.linearRampToValueAtTime(ie,oe),this}exponentialRampToValueAtTime(ee,ne){let ie=this._fromType(ee);ie=EQ(ie,0)?this._minOutput:ie,this._assertRange(ie);const oe=this.toSeconds(ne);return assert(isFinite(ie)&&isFinite(oe),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(ee)}, ${JSON.stringify(ne)}`),this._events.add({time:oe,type:"exponentialRampToValueAtTime",value:ie}),this.log(this.units,"exponentialRampToValueAtTime",ee,oe),this._param.exponentialRampToValueAtTime(ie,oe),this}exponentialRampTo(ee,ne,ie){return ie=this.toSeconds(ie),this.setRampPoint(ie),this.exponentialRampToValueAtTime(ee,ie+this.toSeconds(ne)),this}linearRampTo(ee,ne,ie){return ie=this.toSeconds(ie),this.setRampPoint(ie),this.linearRampToValueAtTime(ee,ie+this.toSeconds(ne)),this}targetRampTo(ee,ne,ie){return ie=this.toSeconds(ie),this.setRampPoint(ie),this.exponentialApproachValueAtTime(ee,ie,ne),this}exponentialApproachValueAtTime(ee,ne,ie){ne=this.toSeconds(ne),ie=this.toSeconds(ie);const oe=Math.log(ie+1)/Math.log(200);return this.setTargetAtTime(ee,ne,oe),this.cancelAndHoldAtTime(ne+ie*.9),this.linearRampToValueAtTime(ee,ne+ie),this}setTargetAtTime(ee,ne,ie){const oe=this._fromType(ee);assert(isFinite(ie)&&ie>0,"timeConstant must be a number greater than 0");const ae=this.toSeconds(ne);return this._assertRange(oe),assert(isFinite(oe)&&isFinite(ae),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(ee)}, ${JSON.stringify(ne)}`),this._events.add({constant:ie,time:ae,type:"setTargetAtTime",value:oe}),this.log(this.units,"setTargetAtTime",ee,ae,ie),this._param.setTargetAtTime(oe,ae,ie),this}setValueCurveAtTime(ee,ne,ie,oe=1){ie=this.toSeconds(ie),ne=this.toSeconds(ne);const ae=this._fromType(ee[0])*oe;this.setValueAtTime(this._toType(ae),ne);const ce=ie/(ee.length-1);for(let le=1;le<ee.length;le++){const ue=this._fromType(ee[le])*oe;this.linearRampToValueAtTime(this._toType(ue),ne+le*ce)}return this}cancelScheduledValues(ee){const ne=this.toSeconds(ee);return assert(isFinite(ne),`Invalid argument to cancelScheduledValues: ${JSON.stringify(ee)}`),this._events.cancel(ne),this._param.cancelScheduledValues(ne),this.log(this.units,"cancelScheduledValues",ne),this}cancelAndHoldAtTime(ee){const ne=this.toSeconds(ee),ie=this._fromType(this.getValueAtTime(ne));assert(isFinite(ne),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(ee)}`),this.log(this.units,"cancelAndHoldAtTime",ne,"value="+ie);const oe=this._events.get(ne),ae=this._events.getAfter(ne);return oe&&EQ(oe.time,ne)?ae?(this._param.cancelScheduledValues(ae.time),this._events.cancel(ae.time)):(this._param.cancelAndHoldAtTime(ne),this._events.cancel(ne+this.sampleTime)):ae&&(this._param.cancelScheduledValues(ae.time),this._events.cancel(ae.time),ae.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(ie),ne):ae.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(ie),ne)),this._events.add({time:ne,type:"setValueAtTime",value:ie}),this._param.setValueAtTime(ie,ne),this}rampTo(ee,ne=.1,ie){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(ee,ne,ie):this.linearRampTo(ee,ne,ie),this}apply(ee){const ne=this.context.currentTime;ee.setValueAtTime(this.getValueAtTime(ne),ne);const ie=this._events.get(ne);if(ie&&ie.type==="setTargetAtTime"){const oe=this._events.getAfter(ie.time),ae=oe?oe.time:ne+2,ce=(ae-ne)/10;for(let le=ne;le<ae;le+=ce)ee.linearRampToValueAtTime(this.getValueAtTime(le),le)}return this._events.forEachAfter(this.context.currentTime,oe=>{oe.type==="cancelScheduledValues"?ee.cancelScheduledValues(oe.time):oe.type==="setTargetAtTime"?ee.setTargetAtTime(oe.value,oe.time,oe.constant):ee[oe.type](oe.value,oe.time)}),this}setParam(ee){assert(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const ne=this.input;return ne.disconnect(this._param),this.apply(ee),this._param=ee,ne.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(ee,ne,ie,oe,ae){return ie+(ne-ie)*Math.exp(-(ae-ee)/oe)}_linearInterpolate(ee,ne,ie,oe,ae){return ne+(oe-ne)*((ae-ee)/(ie-ee))}_exponentialInterpolate(ee,ne,ie,oe,ae){return ne*Math.pow(oe/ne,(ae-ee)/(ie-ee))}}class ToneAudioNode extends ToneWithContext{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return isDefined(this.input)?isAudioParam(this.input)||this.input instanceof Param?1:this.input.numberOfInputs:0}get numberOfOutputs(){return isDefined(this.output)?this.output.numberOfOutputs:0}_isAudioNode(ee){return isDefined(ee)&&(ee instanceof ToneAudioNode||isAudioNode(ee))}_getInternalNodes(){const ee=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&ee.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&ee.push(this.output),ee}_setChannelProperties(ee){this._getInternalNodes().forEach(ie=>{ie.channelCount=ee.channelCount,ie.channelCountMode=ee.channelCountMode,ie.channelInterpretation=ee.channelInterpretation})}_getChannelProperties(){const ee=this._getInternalNodes();assert(ee.length>0,"ToneAudioNode does not have any internal nodes");const ne=ee[0];return{channelCount:ne.channelCount,channelCountMode:ne.channelCountMode,channelInterpretation:ne.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(ee){const ne=this._getChannelProperties();this._setChannelProperties(Object.assign(ne,{channelCount:ee}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(ee){const ne=this._getChannelProperties();this._setChannelProperties(Object.assign(ne,{channelCountMode:ee}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(ee){const ne=this._getChannelProperties();this._setChannelProperties(Object.assign(ne,{channelInterpretation:ee}))}connect(ee,ne=0,ie=0){return connect(this,ee,ne,ie),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return warn("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(ee,ne=0,ie=0){return disconnect(this,ee,ne,ie),this}chain(...ee){return connectSeries(this,...ee),this}fan(...ee){return ee.forEach(ne=>this.connect(ne)),this}dispose(){return super.dispose(),isDefined(this.input)&&(this.input instanceof ToneAudioNode?this.input.dispose():isAudioNode(this.input)&&this.input.disconnect()),isDefined(this.output)&&(this.output instanceof ToneAudioNode?this.output.dispose():isAudioNode(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function connectSeries(...re){const ee=re.shift();re.reduce((ne,ie)=>(ne instanceof ToneAudioNode?ne.connect(ie):isAudioNode(ne)&&connect(ne,ie),ie),ee)}function connect(re,ee,ne=0,ie=0){for(assert(isDefined(re),"Cannot connect from undefined node"),assert(isDefined(ee),"Cannot connect to undefined node"),(ee instanceof ToneAudioNode||isAudioNode(ee))&&assert(ee.numberOfInputs>0,"Cannot connect to node with no inputs"),assert(re.numberOfOutputs>0,"Cannot connect from node with no outputs");ee instanceof ToneAudioNode||ee instanceof Param;)isDefined(ee.input)&&(ee=ee.input);for(;re instanceof ToneAudioNode;)isDefined(re.output)&&(re=re.output);isAudioParam(ee)?re.connect(ee,ne):re.connect(ee,ne,ie)}function disconnect(re,ee,ne=0,ie=0){if(isDefined(ee))for(;ee instanceof ToneAudioNode;)ee=ee.input;for(;!isAudioNode(re);)isDefined(re.output)&&(re=re.output);isAudioParam(ee)?re.disconnect(ee,ne):isAudioNode(ee)?re.disconnect(ee,ne,ie):re.disconnect()}class Gain extends ToneAudioNode{constructor(){super(optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const ee=optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"]);this.gain=new Param({context:this.context,convert:ee.convert,param:this._gainNode.gain,units:ee.units,value:ee.gain,minValue:ee.minValue,maxValue:ee.maxValue}),readOnly(this,"gain")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class OneShotSource extends ToneAudioNode{constructor(ee){super(ee),this.onended=noOp,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Gain({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(ne){const ie=this.toSeconds(ne);return this._startTime!==-1&&ie>=this._startTime&&(this._stopTime===-1||ie<=this._stopTime)?"started":"stopped"},this._fadeIn=ee.fadeIn,this._fadeOut=ee.fadeOut,this._curve=ee.curve,this.onended=ee.onended}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:noOp})}_startGain(ee,ne=1){assert(this._startTime===-1,"Source cannot be started more than once");const ie=this.toSeconds(this._fadeIn);return this._startTime=ee+ie,this._startTime=Math.max(this._startTime,this.context.currentTime),ie>0?(this._gainNode.gain.setValueAtTime(0,ee),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(ne,ee+ie):this._gainNode.gain.exponentialApproachValueAtTime(ne,ee,ie)):this._gainNode.gain.setValueAtTime(ne,ee),this}stop(ee){return this.log("stop",ee),this._stopGain(this.toSeconds(ee)),this}_stopGain(ee){assert(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const ne=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(ee)+ne,this._stopTime=Math.max(this._stopTime,this.context.currentTime),ne>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,ne,ee):this._gainNode.gain.targetRampTo(0,ne,ee):(this._gainNode.gain.cancelAndHoldAtTime(ee),this._gainNode.gain.setValueAtTime(0,ee)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const ie=this._curve==="exponential"?ne*2:0;this._stopSource(this.now()+ie),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==noOp&&(this.onended(this),this.onended=noOp,!this.context.isOffline)){const ee=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(ee):setTimeout(ee,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),assert(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class ToneConstantSource extends OneShotSource{constructor(){super(optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const ee=optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"]);connect(this._source,this._gainNode),this.offset=new Param({context:this.context,convert:ee.convert,param:this._source.offset,units:ee.units,value:ee.offset,minValue:ee.minValue,maxValue:ee.maxValue})}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{convert:!0,offset:1,units:"number"})}start(ee){const ne=this.toSeconds(ee);return this.log("start",ne),this._startGain(ne),this._source.start(ne),this}_stopSource(ee){this._source.stop(ee)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Signal extends ToneAudioNode{constructor(){super(optionsFromArguments(Signal.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const ee=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new ToneConstantSource({context:this.context,convert:ee.convert,offset:ee.value,units:ee.units,minValue:ee.minValue,maxValue:ee.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,units:"number",value:0})}connect(ee,ne=0,ie=0){return connectSignal(this,ee,ne,ie),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(ee,ne){return this._param.setValueAtTime(ee,ne),this}getValueAtTime(ee){return this._param.getValueAtTime(ee)}setRampPoint(ee){return this._param.setRampPoint(ee),this}linearRampToValueAtTime(ee,ne){return this._param.linearRampToValueAtTime(ee,ne),this}exponentialRampToValueAtTime(ee,ne){return this._param.exponentialRampToValueAtTime(ee,ne),this}exponentialRampTo(ee,ne,ie){return this._param.exponentialRampTo(ee,ne,ie),this}linearRampTo(ee,ne,ie){return this._param.linearRampTo(ee,ne,ie),this}targetRampTo(ee,ne,ie){return this._param.targetRampTo(ee,ne,ie),this}exponentialApproachValueAtTime(ee,ne,ie){return this._param.exponentialApproachValueAtTime(ee,ne,ie),this}setTargetAtTime(ee,ne,ie){return this._param.setTargetAtTime(ee,ne,ie),this}setValueCurveAtTime(ee,ne,ie,oe){return this._param.setValueCurveAtTime(ee,ne,ie,oe),this}cancelScheduledValues(ee){return this._param.cancelScheduledValues(ee),this}cancelAndHoldAtTime(ee){return this._param.cancelAndHoldAtTime(ee),this}rampTo(ee,ne,ie){return this._param.rampTo(ee,ne,ie),this}get value(){return this._param.value}set value(ee){this._param.value=ee}get convert(){return this._param.convert}set convert(ee){this._param.convert=ee}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(ee){this._param.overridden=ee}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(ee){return this._param.apply(ee),this}}function connectSignal(re,ee,ne,ie){(ee instanceof Param||isAudioParam(ee)||ee instanceof Signal&&ee.override)&&(ee.cancelScheduledValues(0),ee.setValueAtTime(0,0),ee instanceof Signal&&(ee.overridden=!0)),connect(re,ee,ne,ie)}class TickParam extends Param{constructor(){super(optionsFromArguments(TickParam.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Timeline(1/0),this._multiplier=1;const ee=optionsFromArguments(TickParam.getDefaults(),arguments,["value"]);this._multiplier=ee.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(ee.value)}),this.setValueAtTime(ee.value,0)}static getDefaults(){return Object.assign(Param.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(ee,ne,ie){ne=this.toSeconds(ne),this.setRampPoint(ne);const oe=this._fromType(ee),ae=this._events.get(ne),ce=Math.round(Math.max(1/ie,1));for(let le=0;le<=ce;le++){const ue=ie*le+ne,he=this._exponentialApproach(ae.time,ae.value,oe,ie,ue);this.linearRampToValueAtTime(this._toType(he),ue)}return this}setValueAtTime(ee,ne){const ie=this.toSeconds(ne);super.setValueAtTime(ee,ne);const oe=this._events.get(ie),ae=this._events.previousEvent(oe),ce=this._getTicksUntilEvent(ae,ie);return oe.ticks=Math.max(ce,0),this}linearRampToValueAtTime(ee,ne){const ie=this.toSeconds(ne);super.linearRampToValueAtTime(ee,ne);const oe=this._events.get(ie),ae=this._events.previousEvent(oe),ce=this._getTicksUntilEvent(ae,ie);return oe.ticks=Math.max(ce,0),this}exponentialRampToValueAtTime(ee,ne){ne=this.toSeconds(ne);const ie=this._fromType(ee),oe=this._events.get(ne),ae=Math.round(Math.max((ne-oe.time)*10,1)),ce=(ne-oe.time)/ae;for(let le=0;le<=ae;le++){const ue=ce*le+oe.time,he=this._exponentialInterpolate(oe.time,oe.value,ne,ie,ue);this.linearRampToValueAtTime(this._toType(he),ue)}return this}_getTicksUntilEvent(ee,ne){if(ee===null)ee={ticks:0,time:0,type:"setValueAtTime",value:0};else if(isUndef(ee.ticks)){const ce=this._events.previousEvent(ee);ee.ticks=this._getTicksUntilEvent(ce,ee.time)}const ie=this._fromType(this.getValueAtTime(ee.time));let oe=this._fromType(this.getValueAtTime(ne));const ae=this._events.get(ne);return ae&&ae.time===ne&&ae.type==="setValueAtTime"&&(oe=this._fromType(this.getValueAtTime(ne-this.sampleTime))),.5*(ne-ee.time)*(ie+oe)+ee.ticks}getTicksAtTime(ee){const ne=this.toSeconds(ee),ie=this._events.get(ne);return Math.max(this._getTicksUntilEvent(ie,ne),0)}getDurationOfTicks(ee,ne){const ie=this.toSeconds(ne),oe=this.getTicksAtTime(ne);return this.getTimeOfTick(oe+ee)-ie}getTimeOfTick(ee){const ne=this._events.get(ee,"ticks"),ie=this._events.getAfter(ee,"ticks");if(ne&&ne.ticks===ee)return ne.time;if(ne&&ie&&ie.type==="linearRampToValueAtTime"&&ne.value!==ie.value){const oe=this._fromType(this.getValueAtTime(ne.time)),ce=(this._fromType(this.getValueAtTime(ie.time))-oe)/(ie.time-ne.time),le=Math.sqrt(Math.pow(oe,2)-2*ce*(ne.ticks-ee)),ue=(-oe+le)/ce,he=(-oe-le)/ce;return(ue>0?ue:he)+ne.time}else return ne?ne.value===0?1/0:ne.time+(ee-ne.ticks)/ne.value:ee/this._initialValue}ticksToTime(ee,ne){return this.getDurationOfTicks(ee,ne)}timeToTicks(ee,ne){const ie=this.toSeconds(ne),oe=this.toSeconds(ee),ae=this.getTicksAtTime(ie);return this.getTicksAtTime(ie+oe)-ae}_fromType(ee){return this.units==="bpm"&&this.multiplier?1/(60/ee/this.multiplier):super._fromType(ee)}_toType(ee){return this.units==="bpm"&&this.multiplier?ee/this.multiplier*60:super._toType(ee)}get multiplier(){return this._multiplier}set multiplier(ee){const ne=this.value;this._multiplier=ee,this.cancelScheduledValues(0),this.setValueAtTime(ne,0)}}class TickSignal extends Signal{constructor(){super(optionsFromArguments(TickSignal.getDefaults(),arguments,["value"])),this.name="TickSignal";const ee=optionsFromArguments(TickSignal.getDefaults(),arguments,["value"]);this.input=this._param=new TickParam({context:this.context,convert:ee.convert,multiplier:ee.multiplier,param:this._constantSource.offset,units:ee.units,value:ee.value})}static getDefaults(){return Object.assign(Signal.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(ee,ne){return this._param.ticksToTime(ee,ne)}timeToTicks(ee,ne){return this._param.timeToTicks(ee,ne)}getTimeOfTick(ee){return this._param.getTimeOfTick(ee)}getDurationOfTicks(ee,ne){return this._param.getDurationOfTicks(ee,ne)}getTicksAtTime(ee){return this._param.getTicksAtTime(ee)}get multiplier(){return this._param.multiplier}set multiplier(ee){this._param.multiplier=ee}dispose(){return super.dispose(),this._param.dispose(),this}}class TickSource extends ToneWithContext{constructor(){super(optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new StateTimeline,this._tickOffset=new Timeline;const ee=optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"]);this.frequency=new TickSignal({context:this.context,units:ee.units,value:ee.frequency}),readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ToneWithContext.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(ee,ne){const ie=this.toSeconds(ee);return this._state.getValueAtTime(ie)!=="started"&&(this._state.setStateAtTime("started",ie),isDefined(ne)&&this.setTicksAtTime(ne,ie)),this}stop(ee){const ne=this.toSeconds(ee);if(this._state.getValueAtTime(ne)==="stopped"){const ie=this._state.get(ne);ie&&ie.time>0&&(this._tickOffset.cancel(ie.time),this._state.cancel(ie.time))}return this._state.cancel(ne),this._state.setStateAtTime("stopped",ne),this.setTicksAtTime(0,ne),this}pause(ee){const ne=this.toSeconds(ee);return this._state.getValueAtTime(ne)==="started"&&this._state.setStateAtTime("paused",ne),this}cancel(ee){return ee=this.toSeconds(ee),this._state.cancel(ee),this._tickOffset.cancel(ee),this}getTicksAtTime(ee){const ne=this.toSeconds(ee),ie=this._state.getLastState("stopped",ne),oe={state:"paused",time:ne};this._state.add(oe);let ae=ie,ce=0;return this._state.forEachBetween(ie.time,ne+this.sampleTime,le=>{let ue=ae.time;const he=this._tickOffset.get(le.time);he&&he.time>=ae.time&&(ce=he.ticks,ue=he.time),ae.state==="started"&&le.state!=="started"&&(ce+=this.frequency.getTicksAtTime(le.time)-this.frequency.getTicksAtTime(ue)),ae=le}),this._state.remove(oe),ce}get ticks(){return this.getTicksAtTime(this.now())}set ticks(ee){this.setTicksAtTime(ee,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(ee){const ne=this.now(),ie=this.frequency.timeToTicks(ee,ne);this.setTicksAtTime(ie,ne)}getSecondsAtTime(ee){ee=this.toSeconds(ee);const ne=this._state.getLastState("stopped",ee),ie={state:"paused",time:ee};this._state.add(ie);let oe=ne,ae=0;return this._state.forEachBetween(ne.time,ee+this.sampleTime,ce=>{let le=oe.time;const ue=this._tickOffset.get(ce.time);ue&&ue.time>=oe.time&&(ae=ue.seconds,le=ue.time),oe.state==="started"&&ce.state!=="started"&&(ae+=ce.time-le),oe=ce}),this._state.remove(ie),ae}setTicksAtTime(ee,ne){return ne=this.toSeconds(ne),this._tickOffset.cancel(ne),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(ee,ne),ticks:ee,time:ne}),this}getStateAtTime(ee){return ee=this.toSeconds(ee),this._state.getValueAtTime(ee)}getTimeOfTick(ee,ne=this.now()){const ie=this._tickOffset.get(ne),oe=this._state.get(ne),ae=Math.max(ie.time,oe.time),ce=this.frequency.getTicksAtTime(ae)+ee-ie.ticks;return this.frequency.getTimeOfTick(ce)}forEachTickBetween(ee,ne,ie){let oe=this._state.get(ee);this._state.forEachBetween(ee,ne,ce=>{oe&&oe.state==="started"&&ce.state!=="started"&&this.forEachTickBetween(Math.max(oe.time,ee),ce.time-this.sampleTime,ie),oe=ce});let ae=null;if(oe&&oe.state==="started"){const ce=Math.max(oe.time,ee),le=this.frequency.getTicksAtTime(ce),ue=this.frequency.getTicksAtTime(oe.time),he=le-ue;let fe=Math.ceil(he)-he;fe=EQ(fe,1)?0:fe;let me=this.frequency.getTimeOfTick(le+fe);for(;me<ne;){try{ie(me,Math.round(this.getTicksAtTime(me)))}catch(ge){ae=ge;break}me+=this.frequency.getDurationOfTicks(1,me)}}if(ae)throw ae;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class Clock extends ToneWithContext{constructor(){super(optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=noOp,this._lastUpdate=0,this._state=new StateTimeline("stopped"),this._boundLoop=this._loop.bind(this);const ee=optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"]);this.callback=ee.callback,this._tickSource=new TickSource({context:this.context,frequency:ee.frequency,units:ee.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(ee,ne){assertContextRunning(this.context);const ie=this.toSeconds(ee);return this.log("start",ie),this._state.getValueAtTime(ie)!=="started"&&(this._state.setStateAtTime("started",ie),this._tickSource.start(ie,ne),ie<this._lastUpdate&&this.emit("start",ie,ne)),this}stop(ee){const ne=this.toSeconds(ee);return this.log("stop",ne),this._state.cancel(ne),this._state.setStateAtTime("stopped",ne),this._tickSource.stop(ne),ne<this._lastUpdate&&this.emit("stop",ne),this}pause(ee){const ne=this.toSeconds(ee);return this._state.getValueAtTime(ne)==="started"&&(this._state.setStateAtTime("paused",ne),this._tickSource.pause(ne),ne<this._lastUpdate&&this.emit("pause",ne)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(ee){this._tickSource.ticks=ee}get seconds(){return this._tickSource.seconds}set seconds(ee){this._tickSource.seconds=ee}getSecondsAtTime(ee){return this._tickSource.getSecondsAtTime(ee)}setTicksAtTime(ee,ne){return this._tickSource.setTicksAtTime(ee,ne),this}getTimeOfTick(ee,ne=this.now()){return this._tickSource.getTimeOfTick(ee,ne)}getTicksAtTime(ee){return this._tickSource.getTicksAtTime(ee)}nextTickTime(ee,ne){const ie=this.toSeconds(ne),oe=this.getTicksAtTime(ie);return this._tickSource.getTimeOfTick(oe+ee,ie)}_loop(){const ee=this._lastUpdate,ne=this.now();this._lastUpdate=ne,this.log("loop",ee,ne),ee!==ne&&(this._state.forEachBetween(ee,ne,ie=>{switch(ie.state){case"started":const oe=this._tickSource.getTicksAtTime(ie.time);this.emit("start",ie.time,oe);break;case"stopped":ie.time!==0&&this.emit("stop",ie.time);break;case"paused":this.emit("pause",ie.time);break}}),this._tickSource.forEachTickBetween(ee,ne,(ie,oe)=>{this.callback(ie,oe)}))}getStateAtTime(ee){const ne=this.toSeconds(ee);return this._state.getValueAtTime(ne)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Emitter.mixin(Clock);class Delay extends ToneAudioNode{constructor(){super(optionsFromArguments(Delay.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const ee=optionsFromArguments(Delay.getDefaults(),arguments,["delayTime","maxDelay"]),ne=this.toSeconds(ee.maxDelay);this._maxDelay=Math.max(ne,this.toSeconds(ee.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(ne),this.delayTime=new Param({context:this.context,param:this._delayNode.delayTime,units:"time",value:ee.delayTime,minValue:0,maxValue:this.maxDelay}),readOnly(this,"delayTime")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}function Offline(re,ee,ne=2,ie=getContext().sampleRate){return __awaiter$1(this,void 0,void 0,function*(){const oe=getContext(),ae=new OfflineContext(ne,ee,ie);setContext(ae),yield re(ae);const ce=ae.render();setContext(oe);const le=yield ce;return new ToneAudioBuffer(le)})}class ToneAudioBuffers extends Tone$1{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const ee=optionsFromArguments(ToneAudioBuffers.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=ee.baseUrl,Object.keys(ee.urls).forEach(ne=>{this._loadingCount++;const ie=ee.urls[ne];this.add(ne,ie,this._bufferLoaded.bind(this,ee.onload),ee.onerror)})}static getDefaults(){return{baseUrl:"",onerror:noOp,onload:noOp,urls:{}}}has(ee){return this._buffers.has(ee.toString())}get(ee){return assert(this.has(ee),`ToneAudioBuffers has no buffer named: ${ee}`),this._buffers.get(ee.toString())}_bufferLoaded(ee){this._loadingCount--,this._loadingCount===0&&ee&&ee()}get loaded(){return Array.from(this._buffers).every(([ee,ne])=>ne.loaded)}add(ee,ne,ie=noOp,oe=noOp){return isString$1(ne)?this._buffers.set(ee.toString(),new ToneAudioBuffer(this.baseUrl+ne,ie,oe)):this._buffers.set(ee.toString(),new ToneAudioBuffer(ne,ie,oe)),this}dispose(){return super.dispose(),this._buffers.forEach(ee=>ee.dispose()),this._buffers.clear(),this}}class MidiClass extends FrequencyClass{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(ee){return ftom(super._frequencyToUnits(ee))}_ticksToUnits(ee){return ftom(super._ticksToUnits(ee))}_beatsToUnits(ee){return ftom(super._beatsToUnits(ee))}_secondsToUnits(ee){return ftom(super._secondsToUnits(ee))}toMidi(){return this.valueOf()}toFrequency(){return mtof(this.toMidi())}transpose(ee){return new MidiClass(this.context,this.toMidi()+ee)}}function Midi$1(re,ee){return new MidiClass(getContext(),re,ee)}class TicksClass extends TransportTimeClass{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(ee){return this._getPPQ()*ee}_secondsToUnits(ee){return Math.floor(ee/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(ee){return ee}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function Ticks(re,ee){return new TicksClass(getContext(),re,ee)}let Draw$1=class extends ToneWithContext{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Timeline,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(ee,ne){return this._events.add({callback:ee,time:this.toSeconds(ne)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(ee){return this._events.cancel(this.toSeconds(ee)),this}_drawLoop(){const ee=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=ee;){const ne=this._events.shift();ne&&ee-ne.time<=this.expiration&&ne.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}};onContextInit(re=>{re.draw=new Draw$1({context:re})});onContextClose(re=>{re.draw.dispose()});class IntervalTimeline extends Tone$1{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(ee){assert(isDefined(ee.time),"Events must have a time property"),assert(isDefined(ee.duration),"Events must have a duration parameter"),ee.time=ee.time.valueOf();let ne=new IntervalNode(ee.time,ee.time+ee.duration,ee);for(this._root===null?this._root=ne:this._root.insert(ne),this._length++;ne!==null;)ne.updateHeight(),ne.updateMax(),this._rebalance(ne),ne=ne.parent;return this}remove(ee){if(this._root!==null){const ne=[];this._root.search(ee.time,ne);for(const ie of ne)if(ie.event===ee){this._removeNode(ie),this._length--;break}}return this}get length(){return this._length}cancel(ee){return this.forEachFrom(ee,ne=>this.remove(ne)),this}_setRoot(ee){this._root=ee,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(ee,ne){ee.parent!==null?(ee.isLeftChild()?ee.parent.left=ne:ee.parent.right=ne,this._rebalance(ee.parent)):this._setRoot(ne)}_removeNode(ee){if(ee.left===null&&ee.right===null)this._replaceNodeInParent(ee,null);else if(ee.right===null)this._replaceNodeInParent(ee,ee.left);else if(ee.left===null)this._replaceNodeInParent(ee,ee.right);else{const ne=ee.getBalance();let ie,oe=null;if(ne>0)if(ee.left.right===null)ie=ee.left,ie.right=ee.right,oe=ie;else{for(ie=ee.left.right;ie.right!==null;)ie=ie.right;ie.parent&&(ie.parent.right=ie.left,oe=ie.parent,ie.left=ee.left,ie.right=ee.right)}else if(ee.right.left===null)ie=ee.right,ie.left=ee.left,oe=ie;else{for(ie=ee.right.left;ie.left!==null;)ie=ie.left;ie.parent&&(ie.parent.left=ie.right,oe=ie.parent,ie.left=ee.left,ie.right=ee.right)}ee.parent!==null?ee.isLeftChild()?ee.parent.left=ie:ee.parent.right=ie:this._setRoot(ie),oe&&this._rebalance(oe)}ee.dispose()}_rotateLeft(ee){const ne=ee.parent,ie=ee.isLeftChild(),oe=ee.right;oe&&(ee.right=oe.left,oe.left=ee),ne!==null?ie?ne.left=oe:ne.right=oe:this._setRoot(oe)}_rotateRight(ee){const ne=ee.parent,ie=ee.isLeftChild(),oe=ee.left;oe&&(ee.left=oe.right,oe.right=ee),ne!==null?ie?ne.left=oe:ne.right=oe:this._setRoot(oe)}_rebalance(ee){const ne=ee.getBalance();ne>1&&ee.left?ee.left.getBalance()<0?this._rotateLeft(ee.left):this._rotateRight(ee):ne<-1&&ee.right&&(ee.right.getBalance()>0?this._rotateRight(ee.right):this._rotateLeft(ee))}get(ee){if(this._root!==null){const ne=[];if(this._root.search(ee,ne),ne.length>0){let ie=ne[0];for(let oe=1;oe<ne.length;oe++)ne[oe].low>ie.low&&(ie=ne[oe]);return ie.event}}return null}forEach(ee){if(this._root!==null){const ne=[];this._root.traverse(ie=>ne.push(ie)),ne.forEach(ie=>{ie.event&&ee(ie.event)})}return this}forEachAtTime(ee,ne){if(this._root!==null){const ie=[];this._root.search(ee,ie),ie.forEach(oe=>{oe.event&&ne(oe.event)})}return this}forEachFrom(ee,ne){if(this._root!==null){const ie=[];this._root.searchAfter(ee,ie),ie.forEach(oe=>{oe.event&&ne(oe.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(ee=>ee.dispose()),this._root=null,this}}class IntervalNode{constructor(ee,ne,ie){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=ie,this.low=ee,this.high=ne,this.max=this.high}insert(ee){ee.low<=this.low?this.left===null?this.left=ee:this.left.insert(ee):this.right===null?this.right=ee:this.right.insert(ee)}search(ee,ne){ee>this.max||(this.left!==null&&this.left.search(ee,ne),this.low<=ee&&this.high>ee&&ne.push(this),!(this.low>ee)&&this.right!==null&&this.right.search(ee,ne))}searchAfter(ee,ne){this.low>=ee&&(ne.push(this),this.left!==null&&this.left.searchAfter(ee,ne)),this.right!==null&&this.right.searchAfter(ee,ne)}traverse(ee){ee(this),this.left!==null&&this.left.traverse(ee),this.right!==null&&this.right.traverse(ee)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let ee=0;return this.left!==null&&this.right!==null?ee=this.left.height-this.right.height:this.left!==null?ee=this.left.height+1:this.right!==null&&(ee=-(this.right.height+1)),ee}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(ee){this._left=ee,ee!==null&&(ee.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(ee){this._right=ee,ee!==null&&(ee.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}const Units=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class Volume extends ToneAudioNode{constructor(){super(optionsFromArguments(Volume.getDefaults(),arguments,["volume"])),this.name="Volume";const ee=optionsFromArguments(Volume.getDefaults(),arguments,["volume"]);this.input=this.output=new Gain({context:this.context,gain:ee.volume,units:"decibels"}),this.volume=this.output.gain,readOnly(this,"volume"),this._unmutedVolume=ee.volume,this.mute=ee.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(ee){!this.mute&&ee?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!ee&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}let Destination$1=class sc extends ToneAudioNode{constructor(){super(optionsFromArguments(sc.getDefaults(),arguments)),this.name="Destination",this.input=new Volume({context:this.context}),this.output=new Gain({context:this.context}),this.volume=this.input.volume;const ee=optionsFromArguments(sc.getDefaults(),arguments);connectSeries(this.input,this.output,this.context.rawContext.destination),this.mute=ee.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(ee){this.input.mute=ee}chain(...ee){return this.input.disconnect(),ee.unshift(this.input),ee.push(this.output),connectSeries(...ee),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};onContextInit(re=>{re.destination=new Destination$1({context:re})});onContextClose(re=>{re.destination.dispose()});class TimelineValue extends Tone$1{constructor(ee){super(),this.name="TimelineValue",this._timeline=new Timeline({memory:10}),this._initialValue=ee}set(ee,ne){return this._timeline.add({value:ee,time:ne}),this}get(ee){const ne=this._timeline.get(ee);return ne?ne.value:this._initialValue}}class TransportEvent{constructor(ee,ne){this.id=TransportEvent._eventId++;const ie=Object.assign(TransportEvent.getDefaults(),ne);this.transport=ee,this.callback=ie.callback,this._once=ie.once,this.time=ie.time}static getDefaults(){return{callback:noOp,once:!1,time:0}}invoke(ee){this.callback&&(this.callback(ee),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}TransportEvent._eventId=0;class TransportRepeatEvent extends TransportEvent{constructor(ee,ne){super(ee,ne),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const ie=Object.assign(TransportRepeatEvent.getDefaults(),ne);this.duration=new TicksClass(ee.context,ie.duration).valueOf(),this._interval=new TicksClass(ee.context,ie.interval).valueOf(),this._nextTick=ie.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(ee){this._createEvents(ee),super.invoke(ee)}_createEvents(ee){const ne=this.transport.getTicksAtTime(ee);ne>=this.time&&ne>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()))}_restart(ee){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const ne=this.transport.getTicksAtTime(ee);ne>this.time&&(this._nextTick=this.time+Math.ceil((ne-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}let Transport$1=class rc extends ToneWithContext{constructor(){super(optionsFromArguments(rc.getDefaults(),arguments)),this.name="Transport",this._loop=new TimelineValue(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Timeline,this._repeatedEvents=new IntervalTimeline,this._syncedSignals=[],this._swingAmount=0;const ee=optionsFromArguments(rc.getDefaults(),arguments);this._ppq=ee.ppq,this._clock=new Clock({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=ee.ppq,this.bpm.setValueAtTime(ee.bpm,0),readOnly(this,"bpm"),this._timeSignature=ee.timeSignature,this._swingTicks=ee.ppq/2}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(ee,ne){if(this._loop.get(ee)&&ne>=this._loopEnd&&(this.emit("loopEnd",ee),this._clock.setTicksAtTime(this._loopStart,ee),ne=this._loopStart,this.emit("loopStart",ee,this._clock.getSecondsAtTime(ee)),this.emit("loop",ee)),this._swingAmount>0&&ne%this._ppq!==0&&ne%(this._swingTicks*2)!==0){const ie=ne%(this._swingTicks*2)/(this._swingTicks*2),oe=Math.sin(ie*Math.PI)*this._swingAmount;ee+=new TicksClass(this.context,this._swingTicks*2/3).toSeconds()*oe}this._timeline.forEachAtTime(ne,ie=>ie.invoke(ee))}schedule(ee,ne){const ie=new TransportEvent(this,{callback:ee,time:new TransportTimeClass(this.context,ne).toTicks()});return this._addEvent(ie,this._timeline)}scheduleRepeat(ee,ne,ie,oe=1/0){const ae=new TransportRepeatEvent(this,{callback:ee,duration:new TimeClass(this.context,oe).toTicks(),interval:new TimeClass(this.context,ne).toTicks(),time:new TransportTimeClass(this.context,ie).toTicks()});return this._addEvent(ae,this._repeatedEvents)}scheduleOnce(ee,ne){const ie=new TransportEvent(this,{callback:ee,once:!0,time:new TransportTimeClass(this.context,ne).toTicks()});return this._addEvent(ie,this._timeline)}clear(ee){if(this._scheduledEvents.hasOwnProperty(ee)){const ne=this._scheduledEvents[ee.toString()];ne.timeline.remove(ne.event),ne.event.dispose(),delete this._scheduledEvents[ee.toString()]}return this}_addEvent(ee,ne){return this._scheduledEvents[ee.id.toString()]={event:ee,timeline:ne},ne.add(ee),ee.id}cancel(ee=0){const ne=this.toTicks(ee);return this._timeline.forEachFrom(ne,ie=>this.clear(ie.id)),this._repeatedEvents.forEachFrom(ne,ie=>this.clear(ie.id)),this}_bindClockEvents(){this._clock.on("start",(ee,ne)=>{ne=new TicksClass(this.context,ne).toSeconds(),this.emit("start",ee,ne)}),this._clock.on("stop",ee=>{this.emit("stop",ee)}),this._clock.on("pause",ee=>{this.emit("pause",ee)})}get state(){return this._clock.getStateAtTime(this.now())}start(ee,ne){let ie;return isDefined(ne)&&(ie=this.toTicks(ne)),this._clock.start(ee,ie),this}stop(ee){return this._clock.stop(ee),this}pause(ee){return this._clock.pause(ee),this}toggle(ee){return ee=this.toSeconds(ee),this._clock.getStateAtTime(ee)!=="started"?this.start(ee):this.stop(ee),this}get timeSignature(){return this._timeSignature}set timeSignature(ee){isArray$8(ee)&&(ee=ee[0]/ee[1]*4),this._timeSignature=ee}get loopStart(){return new TimeClass(this.context,this._loopStart,"i").toSeconds()}set loopStart(ee){this._loopStart=this.toTicks(ee)}get loopEnd(){return new TimeClass(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(ee){this._loopEnd=this.toTicks(ee)}get loop(){return this._loop.get(this.now())}set loop(ee){this._loop.set(ee,this.now())}setLoopPoints(ee,ne){return this.loopStart=ee,this.loopEnd=ne,this}get swing(){return this._swingAmount}set swing(ee){this._swingAmount=ee}get swingSubdivision(){return new TicksClass(this.context,this._swingTicks).toNotation()}set swingSubdivision(ee){this._swingTicks=this.toTicks(ee)}get position(){const ee=this.now(),ne=this._clock.getTicksAtTime(ee);return new TicksClass(this.context,ne).toBarsBeatsSixteenths()}set position(ee){const ne=this.toTicks(ee);this.ticks=ne}get seconds(){return this._clock.seconds}set seconds(ee){const ne=this.now(),ie=this._clock.frequency.timeToTicks(ee,ne);this.ticks=ie}get progress(){if(this.loop){const ee=this.now();return(this._clock.getTicksAtTime(ee)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(ee){if(this._clock.ticks!==ee){const ne=this.now();if(this.state==="started"){const ie=this._clock.getTicksAtTime(ne),oe=this._clock.frequency.getDurationOfTicks(Math.ceil(ie)-ie,ne),ae=ne+oe;this.emit("stop",ae),this._clock.setTicksAtTime(ee,ae),this.emit("start",ae,this._clock.getSecondsAtTime(ae))}else this._clock.setTicksAtTime(ee,ne)}}getTicksAtTime(ee){return Math.round(this._clock.getTicksAtTime(ee))}getSecondsAtTime(ee){return this._clock.getSecondsAtTime(ee)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(ee){this._clock.frequency.multiplier=ee}nextSubdivision(ee){if(ee=this.toTicks(ee),this.state!=="started")return 0;{const ne=this.now(),ie=this.getTicksAtTime(ne),oe=ee-ie%ee;return this._clock.nextTickTime(oe,ne)}}syncSignal(ee,ne){if(!ne){const oe=this.now();if(ee.getValueAtTime(oe)!==0){const ce=1/(60/this.bpm.getValueAtTime(oe)/this.PPQ);ne=ee.getValueAtTime(oe)/ce}else ne=0}const ie=new Gain(ne);return this.bpm.connect(ie),ie.connect(ee._param),this._syncedSignals.push({initial:ee.value,ratio:ie,signal:ee}),ee.value=0,this}unsyncSignal(ee){for(let ne=this._syncedSignals.length-1;ne>=0;ne--){const ie=this._syncedSignals[ne];ie.signal===ee&&(ie.ratio.dispose(),ie.signal.value=ie.initial,this._syncedSignals.splice(ne,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),writable(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};Emitter.mixin(Transport$1);onContextInit(re=>{re.transport=new Transport$1({context:re})});onContextClose(re=>{re.transport.dispose()});class Source extends ToneAudioNode{constructor(ee){super(ee),this.input=void 0,this._state=new StateTimeline("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=noOp,this._syncedStop=noOp,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Volume({context:this.context,mute:ee.mute,volume:ee.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.onstop=ee.onstop}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,onstop:noOp,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(ee){this._volume.mute=ee}_clampToCurrentTime(ee){return this._synced?ee:Math.max(ee,this.context.currentTime)}start(ee,ne,ie){let oe=isUndef(ee)&&this._synced?this.context.transport.seconds:this.toSeconds(ee);if(oe=this._clampToCurrentTime(oe),!this._synced&&this._state.getValueAtTime(oe)==="started")assert(GT(oe,this._state.get(oe).time),"Start time must be strictly greater than previous start time"),this._state.cancel(oe),this._state.setStateAtTime("started",oe),this.log("restart",oe),this.restart(oe,ne,ie);else if(this.log("start",oe),this._state.setStateAtTime("started",oe),this._synced){const ae=this._state.get(oe);ae&&(ae.offset=this.toSeconds(defaultArg(ne,0)),ae.duration=ie?this.toSeconds(ie):void 0);const ce=this.context.transport.schedule(le=>{this._start(le,ne,ie)},oe);this._scheduled.push(ce),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>oe&&this._syncedStart(this.now(),this.context.transport.seconds)}else assertContextRunning(this.context),this._start(oe,ne,ie);return this}stop(ee){let ne=isUndef(ee)&&this._synced?this.context.transport.seconds:this.toSeconds(ee);if(ne=this._clampToCurrentTime(ne),this._state.getValueAtTime(ne)==="started"||isDefined(this._state.getNextState("started",ne))){if(this.log("stop",ne),!this._synced)this._stop(ne);else{const ie=this.context.transport.schedule(this._stop.bind(this),ne);this._scheduled.push(ie)}this._state.cancel(ne),this._state.setStateAtTime("stopped",ne)}return this}restart(ee,ne,ie){return ee=this.toSeconds(ee),this._state.getValueAtTime(ee)==="started"&&(this._state.cancel(ee),this._restart(ee,ne,ie)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(ee,ne)=>{if(ne>0){const ie=this._state.get(ne);if(ie&&ie.state==="started"&&ie.time!==ne){const oe=ne-this.toSeconds(ie.time);let ae;ie.duration&&(ae=this.toSeconds(ie.duration)-oe),this._start(ee,this.toSeconds(ie.offset)+oe,ae)}}},this._syncedStop=ee=>{const ne=this.context.transport.getSecondsAtTime(Math.max(ee-this.sampleTime,0));this._state.getValueAtTime(ne)==="started"&&this._stop(ee)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(ee=>this.context.transport.clear(ee)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=noOp,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ToneBufferSource extends OneShotSource{constructor(){super(optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const ee=optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"]);connect(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Param({context:this.context,param:this._source.playbackRate,units:"positive",value:ee.playbackRate}),this.loop=ee.loop,this.loopStart=ee.loopStart,this.loopEnd=ee.loopEnd,this._buffer=new ToneAudioBuffer(ee.url,ee.onload,ee.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{url:new ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(ee){this._fadeIn=ee}get fadeOut(){return this._fadeOut}set fadeOut(ee){this._fadeOut=ee}get curve(){return this._curve}set curve(ee){this._curve=ee}start(ee,ne,ie,oe=1){assert(this.buffer.loaded,"buffer is either not set or not loaded");const ae=this.toSeconds(ee);this._startGain(ae,oe),this.loop?ne=defaultArg(ne,this.loopStart):ne=defaultArg(ne,0);let ce=Math.max(this.toSeconds(ne),0);if(this.loop){const le=this.toSeconds(this.loopEnd)||this.buffer.duration,ue=this.toSeconds(this.loopStart),he=le-ue;GTE(ce,le)&&(ce=(ce-ue)%he+ue),EQ(ce,this.buffer.duration)&&(ce=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,LT(ce,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(ae,ce)),isDefined(ie)){let le=this.toSeconds(ie);le=Math.max(le,0),this.stop(ae+le)}return this}_stopSource(ee){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(ee)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(ee){this._source.loopStart=this.toSeconds(ee)}get loopEnd(){return this._source.loopEnd}set loopEnd(ee){this._source.loopEnd=this.toSeconds(ee)}get buffer(){return this._buffer}set buffer(ee){this._buffer.set(ee)}get loop(){return this._source.loop}set loop(ee){this._source.loop=ee,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Noise extends Source{constructor(){super(optionsFromArguments(Noise.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const ee=optionsFromArguments(Noise.getDefaults(),arguments,["type"]);this._playbackRate=ee.playbackRate,this.type=ee.type,this._fadeIn=ee.fadeIn,this._fadeOut=ee.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(ee){if(assert(ee in _noiseBuffers,"Noise: invalid type: "+ee),this._type!==ee&&(this._type=ee,this.state==="started")){const ne=this.now();this._stop(ne),this._start(ne)}}get playbackRate(){return this._playbackRate}set playbackRate(ee){this._playbackRate=ee,this._source&&(this._source.playbackRate.value=ee)}_start(ee){const ne=_noiseBuffers[this._type];this._source=new ToneBufferSource({url:ne,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(ee),Math.random()*(ne.duration-.001))}_stop(ee){this._source&&(this._source.stop(this.toSeconds(ee)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(ee){this._fadeIn=ee,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(ee){this._fadeOut=ee,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(ee){this._stop(ee),this._start(ee)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const BUFFER_LENGTH=44100*5,NUM_CHANNELS=2,_noiseCache={brown:null,pink:null,white:null},_noiseBuffers={get brown(){if(!_noiseCache.brown){const re=[];for(let ee=0;ee<NUM_CHANNELS;ee++){const ne=new Float32Array(BUFFER_LENGTH);re[ee]=ne;let ie=0;for(let oe=0;oe<BUFFER_LENGTH;oe++){const ae=Math.random()*2-1;ne[oe]=(ie+.02*ae)/1.02,ie=ne[oe],ne[oe]*=3.5}}_noiseCache.brown=new ToneAudioBuffer().fromArray(re)}return _noiseCache.brown},get pink(){if(!_noiseCache.pink){const re=[];for(let ee=0;ee<NUM_CHANNELS;ee++){const ne=new Float32Array(BUFFER_LENGTH);re[ee]=ne;let ie,oe,ae,ce,le,ue,he;ie=oe=ae=ce=le=ue=he=0;for(let fe=0;fe<BUFFER_LENGTH;fe++){const me=Math.random()*2-1;ie=.99886*ie+me*.0555179,oe=.99332*oe+me*.0750759,ae=.969*ae+me*.153852,ce=.8665*ce+me*.3104856,le=.55*le+me*.5329522,ue=-.7616*ue-me*.016898,ne[fe]=ie+oe+ae+ce+le+ue+he+me*.5362,ne[fe]*=.11,he=me*.115926}}_noiseCache.pink=new ToneAudioBuffer().fromArray(re)}return _noiseCache.pink},get white(){if(!_noiseCache.white){const re=[];for(let ee=0;ee<NUM_CHANNELS;ee++){const ne=new Float32Array(BUFFER_LENGTH);re[ee]=ne;for(let ie=0;ie<BUFFER_LENGTH;ie++)ne[ie]=Math.random()*2-1}_noiseCache.white=new ToneAudioBuffer().fromArray(re)}return _noiseCache.white}};class UserMedia extends ToneAudioNode{constructor(){super(optionsFromArguments(UserMedia.getDefaults(),arguments,["volume"])),this.name="UserMedia";const ee=optionsFromArguments(UserMedia.getDefaults(),arguments,["volume"]);this._volume=this.output=new Volume({context:this.context,volume:ee.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.mute=ee.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}open(ee){return __awaiter$1(this,void 0,void 0,function*(){assert(UserMedia.supported,"UserMedia is not supported"),this.state==="started"&&this.close();const ne=yield UserMedia.enumerateDevices();isNumber$2(ee)?this._device=ne[ee]:(this._device=ne.find(ae=>ae.label===ee||ae.deviceId===ee),!this._device&&ne.length>0&&(this._device=ne[0]),assert(isDefined(this._device),`No matching device ${ee}`));const ie={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(ie.audio.deviceId=this._device.deviceId);const oe=yield navigator.mediaDevices.getUserMedia(ie);if(!this._stream){this._stream=oe;const ae=this.context.createMediaStreamSource(oe);connect(ae,this.output),this._mediaStream=ae}return this})}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(ee=>{ee.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return __awaiter$1(this,void 0,void 0,function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter(ne=>ne.kind==="audioinput")})}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){if(this._device)return this._device.deviceId}get groupId(){if(this._device)return this._device.groupId}get label(){if(this._device)return this._device.label}get mute(){return this._volume.mute}set mute(ee){this._volume.mute=ee}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return isDefined(navigator.mediaDevices)&&isDefined(navigator.mediaDevices.getUserMedia)}}function generateWaveform(re,ee){return __awaiter$1(this,void 0,void 0,function*(){const ne=ee/re.context.sampleRate,ie=new OfflineContext(1,ne,re.context.sampleRate);return new re.constructor(Object.assign(re.get(),{frequency:2/ne,detune:0,context:ie})).toDestination().start(0),(yield ie.render()).getChannelData(0)})}class ToneOscillatorNode extends OneShotSource{constructor(){super(optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const ee=optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"]);connect(this._oscillator,this._gainNode),this.type=ee.type,this.frequency=new Param({context:this.context,param:this._oscillator.frequency,units:"frequency",value:ee.frequency}),this.detune=new Param({context:this.context,param:this._oscillator.detune,units:"cents",value:ee.detune}),readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(ee){const ne=this.toSeconds(ee);return this.log("start",ne),this._startGain(ne),this._oscillator.start(ne),this}_stopSource(ee){this._oscillator.stop(ee)}setPeriodicWave(ee){return this._oscillator.setPeriodicWave(ee),this}get type(){return this._oscillator.type}set type(ee){this._oscillator.type=ee}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Oscillator extends Source{constructor(){super(optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const ee=optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"]);this.frequency=new Signal({context:this.context,units:"frequency",value:ee.frequency}),readOnly(this,"frequency"),this.detune=new Signal({context:this.context,units:"cents",value:ee.detune}),readOnly(this,"detune"),this._partials=ee.partials,this._partialCount=ee.partialCount,this._type=ee.type,ee.partialCount&&ee.type!=="custom"&&(this._type=this.baseType+ee.partialCount.toString()),this.phase=ee.phase}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(ee){const ne=this.toSeconds(ee),ie=new ToneOscillatorNode({context:this.context,onended:()=>this.onstop(this)});this._oscillator=ie,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(ne)}_stop(ee){const ne=this.toSeconds(ee);this._oscillator&&this._oscillator.stop(ne)}_restart(ee){const ne=this.toSeconds(ee);return this.log("restart",ne),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(ne),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Oscillator._periodicWaveCache.find(ne=>ne.phase===this._phase&&deepEquals(ne.partials,this._partials));{const ee=Oscillator._periodicWaveCache.find(ne=>ne.type===this._type&&ne.phase===this._phase);return this._partialCount=ee?ee.partialCount:this._partialCount,ee}}get type(){return this._type}set type(ee){this._type=ee;const ne=["sine","square","sawtooth","triangle"].indexOf(ee)!==-1;if(this._phase===0&&ne)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=ee);else{const ie=this._getCachedPeriodicWave();if(isDefined(ie)){const{partials:oe,wave:ae}=ie;this._wave=ae,this._partials=oe,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[oe,ae]=this._getRealImaginary(ee,this._phase),ce=this.context.createPeriodicWave(oe,ae);this._wave=ce,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Oscillator._periodicWaveCache.push({imag:ae,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:oe,type:this._type,wave:this._wave}),Oscillator._periodicWaveCache.length>100&&Oscillator._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(ee){this.partialCount&&this._type!=="custom"&&ee!=="custom"?this.type=ee+this.partialCount:this.type=ee}get partialCount(){return this._partialCount}set partialCount(ee){assertRange(ee,0);let ne=this._type;const ie=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(ie&&(ne=ie[1]),this._type!=="custom")ee===0?this.type=ne:this.type=ne+ee.toString();else{const oe=new Float32Array(ee);this._partials.forEach((ae,ce)=>oe[ce]=ae),this._partials=Array.from(oe),this.type=this._type}}_getRealImaginary(ee,ne){let oe=2048;const ae=new Float32Array(oe),ce=new Float32Array(oe);let le=1;if(ee==="custom"){if(le=this._partials.length+1,this._partialCount=this._partials.length,oe=le,this._partials.length===0)return[ae,ce]}else{const ue=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(ee);ue?(le=parseInt(ue[2],10)+1,this._partialCount=parseInt(ue[2],10),ee=ue[1],le=Math.max(le,2),oe=le):this._partialCount=0,this._partials=[]}for(let ue=1;ue<oe;++ue){const he=2/(ue*Math.PI);let fe;switch(ee){case"sine":fe=ue<=le?1:0,this._partials[ue-1]=fe;break;case"square":fe=ue&1?2*he:0,this._partials[ue-1]=fe;break;case"sawtooth":fe=he*(ue&1?1:-1),this._partials[ue-1]=fe;break;case"triangle":ue&1?fe=2*(he*he)*(ue-1>>1&1?-1:1):fe=0,this._partials[ue-1]=fe;break;case"custom":fe=this._partials[ue-1];break;default:throw new TypeError("Oscillator: invalid type: "+ee)}fe!==0?(ae[ue]=-fe*Math.sin(ne*ue),ce[ue]=fe*Math.cos(ne*ue)):(ae[ue]=0,ce[ue]=0)}return[ae,ce]}_inverseFFT(ee,ne,ie){let oe=0;const ae=ee.length;for(let ce=0;ce<ae;ce++)oe+=ee[ce]*Math.cos(ce*ie)+ne[ce]*Math.sin(ce*ie);return oe}getInitialValue(){const[ee,ne]=this._getRealImaginary(this._type,0);let ie=0;const oe=Math.PI*2,ae=32;for(let ce=0;ce<ae;ce++)ie=Math.max(this._inverseFFT(ee,ne,ce/ae*oe),ie);return clamp(-this._inverseFFT(ee,ne,this._phase)/ie,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(ee){this._partials=ee,this._partialCount=this._partials.length,ee.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(ee){this._phase=ee*Math.PI/180,this.type=this._type}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Oscillator._periodicWaveCache=[];class SignalOperator extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(SignalOperator.getDefaults(),arguments,["context"])))}connect(ee,ne=0,ie=0){return connectSignal(this,ee,ne,ie),this}}class WaveShaper extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const ee=optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]);isArray$8(ee.mapping)||ee.mapping instanceof Float32Array?this.curve=Float32Array.from(ee.mapping):isFunction$2(ee.mapping)&&this.setMap(ee.mapping,ee.length)}static getDefaults(){return Object.assign(Signal.getDefaults(),{length:1024})}setMap(ee,ne=1024){const ie=new Float32Array(ne);for(let oe=0,ae=ne;oe<ae;oe++){const ce=oe/(ae-1)*2-1;ie[oe]=ee(ce,oe)}return this.curve=ie,this}get curve(){return this._shaper.curve}set curve(ee){this._shaper.curve=ee}get oversample(){return this._shaper.oversample}set oversample(ee){const ne=["none","2x","4x"].some(ie=>ie.includes(ee));assert(ne,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=ee}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class AudioToGain extends SignalOperator{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new WaveShaper({context:this.context,mapping:ee=>(ee+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Multiply extends Signal{constructor(){super(Object.assign(optionsFromArguments(Multiply.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const ee=optionsFromArguments(Multiply.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Gain({context:this.context,minValue:ee.minValue,maxValue:ee.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(ee.value,0)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class AMOscillator extends Source{constructor(){super(optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new AudioToGain({context:this.context}),this._modulationNode=new Gain({context:this.context});const ee=optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Oscillator({context:this.context,detune:ee.detune,frequency:ee.frequency,onstop:()=>this.onstop(this),phase:ee.phase,type:ee.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Oscillator({context:this.context,phase:ee.phase,type:ee.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:ee.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),readOnly(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(ee){this._modulator.start(ee),this._carrier.start(ee)}_stop(ee){this._modulator.stop(ee),this._carrier.stop(ee)}_restart(ee){this._modulator.restart(ee),this._carrier.restart(ee)}get type(){return this._carrier.type}set type(ee){this._carrier.type=ee}get baseType(){return this._carrier.baseType}set baseType(ee){this._carrier.baseType=ee}get partialCount(){return this._carrier.partialCount}set partialCount(ee){this._carrier.partialCount=ee}get modulationType(){return this._modulator.type}set modulationType(ee){this._modulator.type=ee}get phase(){return this._carrier.phase}set phase(ee){this._carrier.phase=ee,this._modulator.phase=ee}get partials(){return this._carrier.partials}set partials(ee){this._carrier.partials=ee}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class FMOscillator extends Source{constructor(){super(optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Gain({context:this.context,gain:0});const ee=optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Oscillator({context:this.context,detune:ee.detune,frequency:0,onstop:()=>this.onstop(this),phase:ee.phase,type:ee.type}),this.detune=this._carrier.detune,this.frequency=new Signal({context:this.context,units:"frequency",value:ee.frequency}),this._modulator=new Oscillator({context:this.context,phase:ee.phase,type:ee.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:ee.harmonicity}),this.modulationIndex=new Multiply({context:this.context,units:"positive",value:ee.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),readOnly(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(ee){this._modulator.start(ee),this._carrier.start(ee)}_stop(ee){this._modulator.stop(ee),this._carrier.stop(ee)}_restart(ee){return this._modulator.restart(ee),this._carrier.restart(ee),this}get type(){return this._carrier.type}set type(ee){this._carrier.type=ee}get baseType(){return this._carrier.baseType}set baseType(ee){this._carrier.baseType=ee}get partialCount(){return this._carrier.partialCount}set partialCount(ee){this._carrier.partialCount=ee}get modulationType(){return this._modulator.type}set modulationType(ee){this._modulator.type=ee}get phase(){return this._carrier.phase}set phase(ee){this._carrier.phase=ee,this._modulator.phase=ee}get partials(){return this._carrier.partials}set partials(ee){this._carrier.partials=ee}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class PulseOscillator extends Source{constructor(){super(optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Gain({context:this.context,gain:0}),this._thresh=new WaveShaper({context:this.context,mapping:ne=>ne<=0?-1:1});const ee=optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"]);this.width=new Signal({context:this.context,units:"audioRange",value:ee.width}),this._triangle=new Oscillator({context:this.context,detune:ee.detune,frequency:ee.frequency,onstop:()=>this.onstop(this),phase:ee.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),readOnly(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(ee){ee=this.toSeconds(ee),this._triangle.start(ee),this._widthGate.gain.setValueAtTime(1,ee)}_stop(ee){ee=this.toSeconds(ee),this._triangle.stop(ee),this._widthGate.gain.cancelScheduledValues(ee),this._widthGate.gain.setValueAtTime(0,ee)}_restart(ee){this._triangle.restart(ee),this._widthGate.gain.cancelScheduledValues(ee),this._widthGate.gain.setValueAtTime(1,ee)}get phase(){return this._triangle.phase}set phase(ee){this._triangle.phase=ee}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(ee){this._triangle.type=ee}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class FatOscillator extends Source{constructor(){super(optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const ee=optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new Signal({context:this.context,units:"frequency",value:ee.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:ee.detune}),this._spread=ee.spread,this._type=ee.type,this._phase=ee.phase,this._partials=ee.partials,this._partialCount=ee.partialCount,this.count=ee.count,readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(ee){ee=this.toSeconds(ee),this._forEach(ne=>ne.start(ee))}_stop(ee){ee=this.toSeconds(ee),this._forEach(ne=>ne.stop(ee))}_restart(ee){this._forEach(ne=>ne.restart(ee))}_forEach(ee){for(let ne=0;ne<this._oscillators.length;ne++)ee(this._oscillators[ne],ne)}get type(){return this._type}set type(ee){this._type=ee,this._forEach(ne=>ne.type=ee)}get spread(){return this._spread}set spread(ee){if(this._spread=ee,this._oscillators.length>1){const ne=-ee/2,ie=ee/(this._oscillators.length-1);this._forEach((oe,ae)=>oe.detune.value=ne+ie*ae)}}get count(){return this._oscillators.length}set count(ee){if(assertRange(ee,1),this._oscillators.length!==ee){this._forEach(ne=>ne.dispose()),this._oscillators=[];for(let ne=0;ne<ee;ne++){const ie=new Oscillator({context:this.context,volume:-6-ee*1.1,type:this._type,phase:this._phase+ne/ee*360,partialCount:this._partialCount,onstop:ne===0?()=>this.onstop(this):noOp});this.type==="custom"&&(ie.partials=this._partials),this.frequency.connect(ie.frequency),this.detune.connect(ie.detune),ie.detune.overridden=!1,ie.connect(this.output),this._oscillators[ne]=ie}this.spread=this._spread,this.state==="started"&&this._forEach(ne=>ne.start())}}get phase(){return this._phase}set phase(ee){this._phase=ee,this._forEach((ne,ie)=>ne.phase=this._phase+ie/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(ee){this._forEach(ne=>ne.baseType=ee),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(ee){this._partials=ee,this._partialCount=this._partials.length,ee.length&&(this._type="custom",this._forEach(ne=>ne.partials=ee))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(ee){this._partialCount=ee,this._forEach(ne=>ne.partialCount=ee),this._type=this._oscillators[0].type}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(ee=>ee.dispose()),this}}class PWMOscillator extends Source{constructor(){super(optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Multiply({context:this.context,value:2});const ee=optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new PulseOscillator({context:this.context,frequency:ee.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Oscillator({context:this.context,detune:ee.detune,frequency:ee.frequency,onstop:()=>this.onstop(this),phase:ee.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),readOnly(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(ee){ee=this.toSeconds(ee),this._modulator.start(ee),this._pulse.start(ee)}_stop(ee){ee=this.toSeconds(ee),this._modulator.stop(ee),this._pulse.stop(ee)}_restart(ee){this._modulator.restart(ee),this._pulse.restart(ee)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(ee){this._modulator.phase=ee}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const OmniOscillatorSourceMap={am:AMOscillator,fat:FatOscillator,fm:FMOscillator,oscillator:Oscillator,pulse:PulseOscillator,pwm:PWMOscillator};class OmniOscillator extends Source{constructor(){super(optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const ee=optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"]);this.frequency=new Signal({context:this.context,units:"frequency",value:ee.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:ee.detune}),readOnly(this,["frequency","detune"]),this.set(ee)}static getDefaults(){return Object.assign(Oscillator.getDefaults(),FMOscillator.getDefaults(),AMOscillator.getDefaults(),FatOscillator.getDefaults(),PulseOscillator.getDefaults(),PWMOscillator.getDefaults())}_start(ee){this._oscillator.start(ee)}_stop(ee){this._oscillator.stop(ee)}_restart(ee){return this._oscillator.restart(ee),this}get type(){let ee="";return["am","fm","fat"].some(ne=>this._sourceType===ne)&&(ee=this._sourceType),ee+this._oscillator.type}set type(ee){ee.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=ee.substr(2)):ee.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=ee.substr(2)):ee.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=ee.substr(3)):ee==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):ee==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=ee)}get partials(){return this._oscillator.partials}set partials(ee){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=ee)}get partialCount(){return this._oscillator.partialCount}set partialCount(ee){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=ee)}set(ee){return Reflect.has(ee,"type")&&ee.type&&(this.type=ee.type),super.set(ee),this}_createNewOscillator(ee){if(ee!==this._sourceType){this._sourceType=ee;const ne=OmniOscillatorSourceMap[ee],ie=this.now();if(this._oscillator){const oe=this._oscillator;oe.stop(ie),this.context.setTimeout(()=>oe.dispose(),this.blockTime)}this._oscillator=new ne({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(ie)}}get phase(){return this._oscillator.phase}set phase(ee){this._oscillator.phase=ee}get sourceType(){return this._sourceType}set sourceType(ee){let ne="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(ne=this._oscillator.type),ee==="fm"?this.type="fm"+ne:ee==="am"?this.type="am"+ne:ee==="fat"?this.type="fat"+ne:ee==="oscillator"?this.type=ne:ee==="pulse"?this.type="pulse":ee==="pwm"&&(this.type="pwm")}_getOscType(ee,ne){return ee instanceof OmniOscillatorSourceMap[ne]}get baseType(){return this._oscillator.baseType}set baseType(ee){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&ee!=="pulse"&&ee!=="pwm"&&(this._oscillator.baseType=ee)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(ee){this._getOscType(this._oscillator,"fat")&&isNumber$2(ee)&&(this._oscillator.count=ee)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(ee){this._getOscType(this._oscillator,"fat")&&isNumber$2(ee)&&(this._oscillator.spread=ee)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(ee){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&isString$1(ee)&&(this._oscillator.modulationType=ee)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){return generateWaveform(this,ee)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Add extends Signal{constructor(){super(Object.assign(optionsFromArguments(Add.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,connectSeries(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Scale extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(Scale.getDefaults(),arguments,["min","max"]))),this.name="Scale";const ee=optionsFromArguments(Scale.getDefaults(),arguments,["min","max"]);this._mult=this.input=new Multiply({context:this.context,value:ee.max-ee.min}),this._add=this.output=new Add({context:this.context,value:ee.min}),this._min=ee.min,this._max=ee.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(ee){this._min=ee,this._setRange()}get max(){return this._max}set max(ee){this._max=ee,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Zero extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(Zero.getDefaults(),arguments))),this.name="Zero",this._gain=new Gain({context:this.context}),this.output=this._gain,this.input=void 0,connect(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),disconnect(this.context.getConstant(0),this._gain),this}}class LFO extends ToneAudioNode{constructor(){super(optionsFromArguments(LFO.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Param.prototype._fromType,this._toType=Param.prototype._toType,this._is=Param.prototype._is,this._clampValue=Param.prototype._clampValue;const ee=optionsFromArguments(LFO.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Oscillator(ee),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Gain({context:this.context,gain:ee.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Signal({context:this.context,units:"audioRange",value:0}),this._zeros=new Zero({context:this.context}),this._a2g=new AudioToGain({context:this.context}),this._scaler=this.output=new Scale({context:this.context,max:ee.max,min:ee.min}),this.units=ee.units,this.min=ee.min,this.max=ee.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),readOnly(this,["amplitude","frequency"]),this.phase=ee.phase}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(ee){return ee=this.toSeconds(ee),this._stoppedSignal.setValueAtTime(0,ee),this._oscillator.start(ee),this}stop(ee){return ee=this.toSeconds(ee),this._stoppedSignal.setValueAtTime(this._stoppedValue,ee),this._oscillator.stop(ee),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(ee){ee=this._fromType(ee),this._scaler.min=ee}get max(){return this._toType(this._scaler.max)}set max(ee){ee=this._fromType(ee),this._scaler.max=ee}get type(){return this._oscillator.type}set type(ee){this._oscillator.type=ee,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(ee){this._oscillator.partials=ee,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(ee){this._oscillator.phase=ee,this._setStoppedValue()}get units(){return this._units}set units(ee){const ne=this.min,ie=this.max;this._units=ee,this.min=ne,this.max=ie}get state(){return this._oscillator.state}connect(ee,ne,ie){return(ee instanceof Param||ee instanceof Signal)&&(this.convert=ee.convert,this.units=ee.units),connectSignal(this,ee,ne,ie),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function range(re,ee=1/0){const ne=new WeakMap;return function(ie,oe){Reflect.defineProperty(ie,oe,{configurable:!0,enumerable:!0,get:function(){return ne.get(this)},set:function(ae){assertRange(ae,re,ee),ne.set(this,ae)}})}}function timeRange(re,ee=1/0){const ne=new WeakMap;return function(ie,oe){Reflect.defineProperty(ie,oe,{configurable:!0,enumerable:!0,get:function(){return ne.get(this)},set:function(ae){assertRange(this.toSeconds(ae),re,ee),ne.set(this,ae)}})}}let Player$1=class ic extends Source{constructor(){super(optionsFromArguments(ic.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const ee=optionsFromArguments(ic.getDefaults(),arguments,["url","onload"]);this._buffer=new ToneAudioBuffer({onload:this._onload.bind(this,ee.onload),onerror:ee.onerror,reverse:ee.reverse,url:ee.url}),this.autostart=ee.autostart,this._loop=ee.loop,this._loopStart=ee.loopStart,this._loopEnd=ee.loopEnd,this._playbackRate=ee.playbackRate,this.fadeIn=ee.fadeIn,this.fadeOut=ee.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1,reverse:!1})}load(ee){return __awaiter$1(this,void 0,void 0,function*(){return yield this._buffer.load(ee),this._onload(),this})}_onload(ee=noOp){ee(),this.autostart&&this.start()}_onSourceEnd(ee){this.onstop(this),this._activeSources.delete(ee),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(ee,ne,ie){return super.start(ee,ne,ie),this}_start(ee,ne,ie){this._loop?ne=defaultArg(ne,this._loopStart):ne=defaultArg(ne,0);const oe=this.toSeconds(ne),ae=ie;ie=defaultArg(ie,Math.max(this._buffer.duration-oe,0));let ce=this.toSeconds(ie);ce=ce/this._playbackRate,ee=this.toSeconds(ee);const le=new ToneBufferSource({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(ee+ce),this._state.setStateAtTime("stopped",ee+ce,{implicitEnd:!0})),this._activeSources.add(le),this._loop&&isUndef(ae)?le.start(ee,oe):le.start(ee,oe,ce-this.toSeconds(this.fadeOut))}_stop(ee){const ne=this.toSeconds(ee);this._activeSources.forEach(ie=>ie.stop(ne))}restart(ee,ne,ie){return super.restart(ee,ne,ie),this}_restart(ee,ne,ie){this._stop(ee),this._start(ee,ne,ie)}seek(ee,ne){const ie=this.toSeconds(ne);if(this._state.getValueAtTime(ie)==="started"){const oe=this.toSeconds(ee);this._stop(ie),this._start(ie,oe)}return this}setLoopPoints(ee,ne){return this.loopStart=ee,this.loopEnd=ne,this}get loopStart(){return this._loopStart}set loopStart(ee){this._loopStart=ee,this.buffer.loaded&&assertRange(this.toSeconds(ee),0,this.buffer.duration),this._activeSources.forEach(ne=>{ne.loopStart=ee})}get loopEnd(){return this._loopEnd}set loopEnd(ee){this._loopEnd=ee,this.buffer.loaded&&assertRange(this.toSeconds(ee),0,this.buffer.duration),this._activeSources.forEach(ne=>{ne.loopEnd=ee})}get buffer(){return this._buffer}set buffer(ee){this._buffer.set(ee)}get loop(){return this._loop}set loop(ee){if(this._loop!==ee&&(this._loop=ee,this._activeSources.forEach(ne=>{ne.loop=ee}),ee)){const ne=this._state.getNextState("stopped",this.now());ne&&this._state.cancel(ne.time)}}get playbackRate(){return this._playbackRate}set playbackRate(ee){this._playbackRate=ee;const ne=this.now(),ie=this._state.getNextState("stopped",ne);ie&&ie.implicitEnd&&(this._state.cancel(ie.time),this._activeSources.forEach(oe=>oe.cancelStop())),this._activeSources.forEach(oe=>{oe.playbackRate.setValueAtTime(ee,ne)})}get reverse(){return this._buffer.reverse}set reverse(ee){this._buffer.reverse=ee}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(ee=>ee.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};__decorate$8([timeRange(0)],Player$1.prototype,"fadeIn",void 0);__decorate$8([timeRange(0)],Player$1.prototype,"fadeOut",void 0);class Players extends ToneAudioNode{constructor(){super(optionsFromArguments(Players.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const ee=optionsFromArguments(Players.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new Volume({context:this.context,volume:ee.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this._buffers=new ToneAudioBuffers({urls:ee.urls,onload:ee.onload,baseUrl:ee.baseUrl,onerror:ee.onerror}),this.mute=ee.mute,this._fadeIn=ee.fadeIn,this._fadeOut=ee.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:noOp,onerror:noOp,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(ee){this._volume.mute=ee}get fadeIn(){return this._fadeIn}set fadeIn(ee){this._fadeIn=ee,this._players.forEach(ne=>{ne.fadeIn=ee})}get fadeOut(){return this._fadeOut}set fadeOut(ee){this._fadeOut=ee,this._players.forEach(ne=>{ne.fadeOut=ee})}get state(){return Array.from(this._players).some(([ne,ie])=>ie.state==="started")?"started":"stopped"}has(ee){return this._buffers.has(ee)}player(ee){if(assert(this.has(ee),`No Player with the name ${ee} exists on this object`),!this._players.has(ee)){const ne=new Player$1({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(ee)}).connect(this.output);this._players.set(ee,ne)}return this._players.get(ee)}get loaded(){return this._buffers.loaded}add(ee,ne,ie){return assert(!this._buffers.has(ee),"A buffer with that name already exists on this object"),this._buffers.add(ee,ne,ie),this}stopAll(ee){return this._players.forEach(ne=>ne.stop(ee)),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach(ee=>ee.dispose()),this._buffers.dispose(),this}}class GrainPlayer extends Source{constructor(){super(optionsFromArguments(GrainPlayer.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];const ee=optionsFromArguments(GrainPlayer.getDefaults(),arguments,["url","onload"]);this.buffer=new ToneAudioBuffer({onload:ee.onload,onerror:ee.onerror,reverse:ee.reverse,url:ee.url}),this._clock=new Clock({context:this.context,callback:this._tick.bind(this),frequency:1/ee.grainSize}),this._playbackRate=ee.playbackRate,this._grainSize=ee.grainSize,this._overlap=ee.overlap,this.detune=ee.detune,this.overlap=ee.overlap,this.loop=ee.loop,this.playbackRate=ee.playbackRate,this.grainSize=ee.grainSize,this.loopStart=ee.loopStart,this.loopEnd=ee.loopEnd,this.reverse=ee.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Source.getDefaults(),{onload:noOp,onerror:noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(ee,ne,ie){ne=defaultArg(ne,0),ne=this.toSeconds(ne),ee=this.toSeconds(ee);const oe=1/this._clock.frequency.getValueAtTime(ee);this._clock.start(ee,ne/oe),ie&&this.stop(ee+this.toSeconds(ie))}restart(ee,ne,ie){return super.restart(ee,ne,ie),this}_restart(ee,ne,ie){this._stop(ee),this._start(ee,ne,ie)}_stop(ee){this._clock.stop(ee)}_onstop(ee){this._activeSources.forEach(ne=>{ne.fadeOut=0,ne.stop(ee)}),this.onstop(this)}_tick(ee){const ne=this._clock.getTicksAtTime(ee),ie=ne*this._grainSize;if(this.log("offset",ie),!this.loop&&ie>this.buffer.duration){this.stop(ee);return}const oe=ie<this._overlap?0:this._overlap,ae=new ToneBufferSource({context:this.context,url:this.buffer,fadeIn:oe,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:intervalToFrequencyRatio(this.detune/100)}).connect(this.output);ae.start(ee,this._grainSize*ne),ae.stop(ee+this._grainSize/this.playbackRate),this._activeSources.push(ae),ae.onended=()=>{const ce=this._activeSources.indexOf(ae);ce!==-1&&this._activeSources.splice(ce,1)}}get playbackRate(){return this._playbackRate}set playbackRate(ee){assertRange(ee,.001),this._playbackRate=ee,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(ee){this.buffer.loaded&&assertRange(this.toSeconds(ee),0,this.buffer.duration),this._loopStart=this.toSeconds(ee)}get loopEnd(){return this._loopEnd}set loopEnd(ee){this.buffer.loaded&&assertRange(this.toSeconds(ee),0,this.buffer.duration),this._loopEnd=this.toSeconds(ee)}get reverse(){return this.buffer.reverse}set reverse(ee){this.buffer.reverse=ee}get grainSize(){return this._grainSize}set grainSize(ee){this._grainSize=this.toSeconds(ee),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(ee){const ne=this.toSeconds(ee);assertRange(ne,0),this._overlap=ne}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(ee=>ee.dispose()),this}}class Abs extends SignalOperator{constructor(){super(...arguments),this.name="Abs",this._abs=new WaveShaper({context:this.context,mapping:ee=>Math.abs(ee)<.001?0:Math.abs(ee)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class GainToAudio extends SignalOperator{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new WaveShaper({context:this.context,mapping:ee=>Math.abs(ee)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Negate extends SignalOperator{constructor(){super(...arguments),this.name="Negate",this._multiply=new Multiply({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class Subtract extends Signal{constructor(){super(Object.assign(optionsFromArguments(Subtract.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new Negate({context:this.context}),this.subtrahend=this._param,connectSeries(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class GreaterThanZero extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(GreaterThanZero.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new WaveShaper({context:this.context,length:127,mapping:ee=>ee<=0?0:1}),this._scale=this.input=new Multiply({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class GreaterThan extends Signal{constructor(){super(Object.assign(optionsFromArguments(GreaterThan.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;const ee=optionsFromArguments(GreaterThan.getDefaults(),arguments,["value"]);this._subtract=this.input=new Subtract({context:this.context,value:ee.value}),this._gtz=this.output=new GreaterThanZero({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,readOnly(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class Pow extends SignalOperator{constructor(){super(Object.assign(optionsFromArguments(Pow.getDefaults(),arguments,["value"]))),this.name="Pow";const ee=optionsFromArguments(Pow.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new WaveShaper({context:this.context,mapping:this._expFunc(ee.value),length:8192}),this._exponent=ee.value}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{value:1})}_expFunc(ee){return ne=>Math.pow(Math.abs(ne),ee)}get value(){return this._exponent}set value(ee){this._exponent=ee,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class ScaleExp extends Scale{constructor(){super(Object.assign(optionsFromArguments(ScaleExp.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";const ee=optionsFromArguments(ScaleExp.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new Pow({context:this.context,value:ee.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(Scale.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(ee){this._exp.value=ee}dispose(){return super.dispose(),this._exp.dispose(),this}}class SyncedSignal extends Signal{constructor(){super(optionsFromArguments(Signal.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;const ee=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);this._lastVal=ee.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new ToneConstantSource({context:this.context,offset:ee.value,units:ee.units}).start(0),this.setValueAtTime(ee.value,0)}_onTick(ee){const ne=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==ne&&(this._lastVal=ne,this._constantSource.offset.setValueAtTime(ne,ee))}_anchorValue(ee){const ne=super.getValueAtTime(this.context.transport.seconds);this._lastVal=ne,this._constantSource.offset.cancelAndHoldAtTime(ee),this._constantSource.offset.setValueAtTime(ne,ee)}getValueAtTime(ee){const ne=new TransportTimeClass(this.context,ee).toSeconds();return super.getValueAtTime(ne)}setValueAtTime(ee,ne){const ie=new TransportTimeClass(this.context,ne).toSeconds();return super.setValueAtTime(ee,ie),this}linearRampToValueAtTime(ee,ne){const ie=new TransportTimeClass(this.context,ne).toSeconds();return super.linearRampToValueAtTime(ee,ie),this}exponentialRampToValueAtTime(ee,ne){const ie=new TransportTimeClass(this.context,ne).toSeconds();return super.exponentialRampToValueAtTime(ee,ie),this}setTargetAtTime(ee,ne,ie){const oe=new TransportTimeClass(this.context,ne).toSeconds();return super.setTargetAtTime(ee,oe,ie),this}cancelScheduledValues(ee){const ne=new TransportTimeClass(this.context,ee).toSeconds();return super.cancelScheduledValues(ne),this}setValueCurveAtTime(ee,ne,ie,oe){const ae=new TransportTimeClass(this.context,ne).toSeconds();return ie=this.toSeconds(ie),super.setValueCurveAtTime(ee,ae,ie,oe),this}cancelAndHoldAtTime(ee){const ne=new TransportTimeClass(this.context,ee).toSeconds();return super.cancelAndHoldAtTime(ne),this}setRampPoint(ee){const ne=new TransportTimeClass(this.context,ee).toSeconds();return super.setRampPoint(ne),this}exponentialRampTo(ee,ne,ie){const oe=new TransportTimeClass(this.context,ie).toSeconds();return super.exponentialRampTo(ee,ne,oe),this}linearRampTo(ee,ne,ie){const oe=new TransportTimeClass(this.context,ie).toSeconds();return super.linearRampTo(ee,ne,oe),this}targetRampTo(ee,ne,ie){const oe=new TransportTimeClass(this.context,ie).toSeconds();return super.targetRampTo(ee,ne,oe),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class Envelope extends ToneAudioNode{constructor(){super(optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new Signal({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const ee=optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=ee.attack,this.decay=ee.decay,this.sustain=ee.sustain,this.release=ee.release,this.attackCurve=ee.attackCurve,this.releaseCurve=ee.releaseCurve,this.decayCurve=ee.decayCurve}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(ee,ne){if(isString$1(ee))return ee;{let ie;for(ie in EnvelopeCurves)if(EnvelopeCurves[ie][ne]===ee)return ie;return ee}}_setCurve(ee,ne,ie){if(isString$1(ie)&&Reflect.has(EnvelopeCurves,ie)){const oe=EnvelopeCurves[ie];isObject$4(oe)?ee!=="_decayCurve"&&(this[ee]=oe[ne]):this[ee]=oe}else if(isArray$8(ie)&&ee!=="_decayCurve")this[ee]=ie;else throw new Error("Envelope: invalid curve: "+ie)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(ee){this._setCurve("_attackCurve","In",ee)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(ee){this._setCurve("_releaseCurve","Out",ee)}get decayCurve(){return this._decayCurve}set decayCurve(ee){assert(["linear","exponential"].some(ne=>ne===ee),`Invalid envelope curve: ${ee}`),this._decayCurve=ee}triggerAttack(ee,ne=1){this.log("triggerAttack",ee,ne),ee=this.toSeconds(ee);let oe=this.toSeconds(this.attack);const ae=this.toSeconds(this.decay),ce=this.getValueAtTime(ee);if(ce>0){const le=1/oe;oe=(1-ce)/le}if(oe<this.sampleTime)this._sig.cancelScheduledValues(ee),this._sig.setValueAtTime(ne,ee);else if(this._attackCurve==="linear")this._sig.linearRampTo(ne,oe,ee);else if(this._attackCurve==="exponential")this._sig.targetRampTo(ne,oe,ee);else{this._sig.cancelAndHoldAtTime(ee);let le=this._attackCurve;for(let ue=1;ue<le.length;ue++)if(le[ue-1]<=ce&&ce<=le[ue]){le=this._attackCurve.slice(ue),le[0]=ce;break}this._sig.setValueCurveAtTime(le,ee,oe,ne)}if(ae&&this.sustain<1){const le=ne*this.sustain,ue=ee+oe;this.log("decay",ue),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(le,ae+ue):this._sig.exponentialApproachValueAtTime(le,ue,ae)}return this}triggerRelease(ee){this.log("triggerRelease",ee),ee=this.toSeconds(ee);const ne=this.getValueAtTime(ee);if(ne>0){const ie=this.toSeconds(this.release);ie<this.sampleTime?this._sig.setValueAtTime(0,ee):this._releaseCurve==="linear"?this._sig.linearRampTo(0,ie,ee):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,ie,ee):(assert(isArray$8(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(ee),this._sig.setValueCurveAtTime(this._releaseCurve,ee,ie,ne))}return this}getValueAtTime(ee){return this._sig.getValueAtTime(ee)}triggerAttackRelease(ee,ne,ie=1){return ne=this.toSeconds(ne),this.triggerAttack(ne,ie),this.triggerRelease(ne+this.toSeconds(ee)),this}cancel(ee){return this._sig.cancelScheduledValues(this.toSeconds(ee)),this}connect(ee,ne=0,ie=0){return connectSignal(this,ee,ne,ie),this}asArray(ee=1024){return __awaiter$1(this,void 0,void 0,function*(){const ne=ee/this.context.sampleRate,ie=new OfflineContext(1,ne,this.context.sampleRate),oe=this.toSeconds(this.attack)+this.toSeconds(this.decay),ae=oe+this.toSeconds(this.release),ce=ae*.1,le=ae+ce,ue=new this.constructor(Object.assign(this.get(),{attack:ne*this.toSeconds(this.attack)/le,decay:ne*this.toSeconds(this.decay)/le,release:ne*this.toSeconds(this.release)/le,context:ie}));return ue._sig.toDestination(),ue.triggerAttackRelease(ne*(oe+ce)/le,0),(yield ie.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}__decorate$8([timeRange(0)],Envelope.prototype,"attack",void 0);__decorate$8([timeRange(0)],Envelope.prototype,"decay",void 0);__decorate$8([range(0,1)],Envelope.prototype,"sustain",void 0);__decorate$8([timeRange(0)],Envelope.prototype,"release",void 0);const EnvelopeCurves=(()=>{let ee,ne;const ie=[];for(ee=0;ee<128;ee++)ie[ee]=Math.sin(ee/(128-1)*(Math.PI/2));const oe=[],ae=6.4;for(ee=0;ee<128-1;ee++){ne=ee/(128-1);const ge=Math.sin(ne*(Math.PI*2)*ae-Math.PI/2)+1;oe[ee]=ge/10+ne*.83}oe[128-1]=1;const ce=[],le=5;for(ee=0;ee<128;ee++)ce[ee]=Math.ceil(ee/(128-1)*le)/le;const ue=[];for(ee=0;ee<128;ee++)ne=ee/(128-1),ue[ee]=.5*(1-Math.cos(Math.PI*ne));const he=[];for(ee=0;ee<128;ee++){ne=ee/(128-1);const ge=Math.pow(ne,3)*4+.2,ve=Math.cos(ge*Math.PI*2*ne);he[ee]=Math.abs(ve*(1-ne))}function fe(ge){const ve=new Array(ge.length);for(let ye=0;ye<ge.length;ye++)ve[ye]=1-ge[ye];return ve}function me(ge){return ge.slice(0).reverse()}return{bounce:{In:fe(he),Out:he},cosine:{In:ie,Out:me(ie)},exponential:"exponential",linear:"linear",ripple:{In:oe,Out:fe(oe)},sine:{In:ue,Out:fe(ue)},step:{In:ce,Out:fe(ce)}}})();let Instrument$3=class oc extends ToneAudioNode{constructor(){super(optionsFromArguments(oc.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const ee=optionsFromArguments(oc.getDefaults(),arguments);this._volume=this.output=new Volume({context:this.context,volume:ee.volume}),this.volume=this._volume.volume,readOnly(this,"volume")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let ee=!1;return this._synced||(this._synced=!0,ee=!0),ee}_syncMethod(ee,ne){const ie=this["_original_"+ee]=this[ee];this[ee]=(...oe)=>{const ae=oe[ne],ce=this.context.transport.schedule(le=>{oe[ne]=le,ie.apply(this,oe)},ae);this._scheduledEvents.push(ce)}}unsync(){return this._scheduledEvents.forEach(ee=>this.context.transport.clear(ee)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(ee,ne,ie,oe){const ae=this.toSeconds(ie),ce=this.toSeconds(ne);return this.triggerAttack(ee,ae,oe),this.triggerRelease(ae+ce),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};class Monophonic extends Instrument$3{constructor(){super(optionsFromArguments(Monophonic.getDefaults(),arguments));const ee=optionsFromArguments(Monophonic.getDefaults(),arguments);this.portamento=ee.portamento,this.onsilence=ee.onsilence}static getDefaults(){return Object.assign(Instrument$3.getDefaults(),{detune:0,onsilence:noOp,portamento:0})}triggerAttack(ee,ne,ie=1){this.log("triggerAttack",ee,ne,ie);const oe=this.toSeconds(ne);return this._triggerEnvelopeAttack(oe,ie),this.setNote(ee,oe),this}triggerRelease(ee){this.log("triggerRelease",ee);const ne=this.toSeconds(ee);return this._triggerEnvelopeRelease(ne),this}setNote(ee,ne){const ie=this.toSeconds(ne),oe=ee instanceof FrequencyClass?ee.toFrequency():ee;if(this.portamento>0&&this.getLevelAtTime(ie)>.05){const ae=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(oe,ae,ie)}else this.frequency.setValueAtTime(oe,ie);return this}}__decorate$8([timeRange(0)],Monophonic.prototype,"portamento",void 0);class AmplitudeEnvelope extends Envelope{constructor(){super(optionsFromArguments(AmplitudeEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Gain({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Synth extends Monophonic{constructor(){super(optionsFromArguments(Synth.getDefaults(),arguments)),this.name="Synth";const ee=optionsFromArguments(Synth.getDefaults(),arguments);this.oscillator=new OmniOscillator(Object.assign({context:this.context,detune:ee.detune,onstop:()=>this.onsilence(this)},ee.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},ee.envelope)),this.oscillator.chain(this.envelope,this.output),readOnly(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(ee,ne){if(this.envelope.triggerAttack(ee,ne),this.oscillator.start(ee),this.envelope.sustain===0){const ie=this.toSeconds(this.envelope.attack),oe=this.toSeconds(this.envelope.decay);this.oscillator.stop(ee+ie+oe)}}_triggerEnvelopeRelease(ee){this.envelope.triggerRelease(ee),this.oscillator.stop(ee+this.toSeconds(this.envelope.release))}getLevelAtTime(ee){return ee=this.toSeconds(ee),this.envelope.getValueAtTime(ee)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class ModulationSynth extends Monophonic{constructor(){super(optionsFromArguments(ModulationSynth.getDefaults(),arguments)),this.name="ModulationSynth";const ee=optionsFromArguments(ModulationSynth.getDefaults(),arguments);this._carrier=new Synth({context:this.context,oscillator:ee.oscillator,envelope:ee.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Synth({context:this.context,oscillator:ee.modulation,envelope:ee.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Signal({context:this.context,units:"frequency"}),this.detune=new Signal({context:this.context,value:ee.detune,units:"cents"}),this.harmonicity=new Multiply({context:this.context,value:ee.harmonicity,minValue:0}),this._modulationNode=new Gain({context:this.context,gain:0}),readOnly(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{harmonicity:3,oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(ee,ne){this._carrier._triggerEnvelopeAttack(ee,ne),this._modulator._triggerEnvelopeAttack(ee,ne)}_triggerEnvelopeRelease(ee){return this._carrier._triggerEnvelopeRelease(ee),this._modulator._triggerEnvelopeRelease(ee),this}getLevelAtTime(ee){return ee=this.toSeconds(ee),this.envelope.getValueAtTime(ee)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class AMSynth extends ModulationSynth{constructor(){super(optionsFromArguments(AMSynth.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new AudioToGain({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class BiquadFilter extends ToneAudioNode{constructor(){super(optionsFromArguments(BiquadFilter.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const ee=optionsFromArguments(BiquadFilter.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Param({context:this.context,units:"number",value:ee.Q,param:this._filter.Q}),this.frequency=new Param({context:this.context,units:"frequency",value:ee.frequency,param:this._filter.frequency}),this.detune=new Param({context:this.context,units:"cents",value:ee.detune,param:this._filter.detune}),this.gain=new Param({context:this.context,units:"decibels",convert:!1,value:ee.gain,param:this._filter.gain}),this.type=ee.type}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(ee){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(ee)!==-1,`Invalid filter type: ${ee}`),this._filter.type=ee}getFrequencyResponse(ee=128){const ne=new Float32Array(ee);for(let ce=0;ce<ee;ce++){const ue=Math.pow(ce/ee,2)*(2e4-20)+20;ne[ce]=ue}const ie=new Float32Array(ee),oe=new Float32Array(ee),ae=this.context.createBiquadFilter();return ae.type=this.type,ae.Q.value=this.Q.value,ae.frequency.value=this.frequency.value,ae.gain.value=this.gain.value,ae.getFrequencyResponse(ne,ie,oe),ie}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Filter extends ToneAudioNode{constructor(){super(optionsFromArguments(Filter.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._filters=[];const ee=optionsFromArguments(Filter.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new Signal({context:this.context,units:"positive",value:ee.Q}),this.frequency=new Signal({context:this.context,units:"frequency",value:ee.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:ee.detune}),this.gain=new Signal({context:this.context,units:"decibels",convert:!1,value:ee.gain}),this._type=ee.type,this.rolloff=ee.rolloff,readOnly(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(ee){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(ee)!==-1,`Invalid filter type: ${ee}`),this._type=ee,this._filters.forEach(ie=>ie.type=ee)}get rolloff(){return this._rolloff}set rolloff(ee){const ne=isNumber$2(ee)?ee:parseInt(ee,10),ie=[-12,-24,-48,-96];let oe=ie.indexOf(ne);assert(oe!==-1,`rolloff can only be ${ie.join(", ")}`),oe+=1,this._rolloff=ne,this.input.disconnect(),this._filters.forEach(ae=>ae.disconnect()),this._filters=new Array(oe);for(let ae=0;ae<oe;ae++){const ce=new BiquadFilter({context:this.context});ce.type=this._type,this.frequency.connect(ce.frequency),this.detune.connect(ce.detune),this.Q.connect(ce.Q),this.gain.connect(ce.gain),this._filters[ae]=ce}this._internalChannels=this._filters,connectSeries(this.input,...this._internalChannels,this.output)}getFrequencyResponse(ee=128){const ne=new BiquadFilter({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),ie=new Float32Array(ee).map(()=>1);return this._filters.forEach(()=>{ne.getFrequencyResponse(ee).forEach((ae,ce)=>ie[ce]*=ae)}),ne.dispose(),ie}dispose(){return super.dispose(),this._filters.forEach(ee=>{ee.dispose()}),writable(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class FrequencyEnvelope extends Envelope{constructor(){super(optionsFromArguments(FrequencyEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const ee=optionsFromArguments(FrequencyEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=ee.octaves,this._baseFrequency=this.toFrequency(ee.baseFrequency),this._exponent=this.input=new Pow({context:this.context,value:ee.exponent}),this._scale=this.output=new Scale({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Envelope.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(ee){const ne=this.toFrequency(ee);assertRange(ne,0),this._baseFrequency=ne,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(ee){this._octaves=ee,this._scale.max=this._baseFrequency*Math.pow(2,ee)}get exponent(){return this._exponent.value}set exponent(ee){this._exponent.value=ee}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class MonoSynth extends Monophonic{constructor(){super(optionsFromArguments(MonoSynth.getDefaults(),arguments)),this.name="MonoSynth";const ee=optionsFromArguments(MonoSynth.getDefaults(),arguments);this.oscillator=new OmniOscillator(Object.assign(ee.oscillator,{context:this.context,detune:ee.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Filter(Object.assign(ee.filter,{context:this.context})),this.filterEnvelope=new FrequencyEnvelope(Object.assign(ee.filterEnvelope,{context:this.context})),this.envelope=new AmplitudeEnvelope(Object.assign(ee.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),readOnly(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(omitFromObject(Filter.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(omitFromObject(FrequencyEnvelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),Object.keys(Source.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(ee,ne=1){if(this.envelope.triggerAttack(ee,ne),this.filterEnvelope.triggerAttack(ee),this.oscillator.start(ee),this.envelope.sustain===0){const ie=this.toSeconds(this.envelope.attack),oe=this.toSeconds(this.envelope.decay);this.oscillator.stop(ee+ie+oe)}}_triggerEnvelopeRelease(ee){this.envelope.triggerRelease(ee),this.filterEnvelope.triggerRelease(ee),this.oscillator.stop(ee+this.toSeconds(this.envelope.release))}getLevelAtTime(ee){return ee=this.toSeconds(ee),this.envelope.getValueAtTime(ee)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class DuoSynth extends Monophonic{constructor(){super(optionsFromArguments(DuoSynth.getDefaults(),arguments)),this.name="DuoSynth";const ee=optionsFromArguments(DuoSynth.getDefaults(),arguments);this.voice0=new MonoSynth(Object.assign(ee.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new MonoSynth(Object.assign(ee.voice1,{context:this.context})),this.harmonicity=new Multiply({context:this.context,units:"positive",value:ee.harmonicity}),this._vibrato=new LFO({frequency:ee.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new Gain({context:this.context,units:"normalRange",gain:ee.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Signal({context:this.context,units:"frequency",value:440}),this.detune=new Signal({context:this.context,units:"cents",value:ee.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),readOnly(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(ee){return ee=this.toSeconds(ee),this.voice0.envelope.getValueAtTime(ee)+this.voice1.envelope.getValueAtTime(ee)}static getDefaults(){return deepMerge(Monophonic.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:deepMerge(omitFromObject(MonoSynth.getDefaults(),Object.keys(Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:deepMerge(omitFromObject(MonoSynth.getDefaults(),Object.keys(Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(ee,ne){this.voice0._triggerEnvelopeAttack(ee,ne),this.voice1._triggerEnvelopeAttack(ee,ne)}_triggerEnvelopeRelease(ee){return this.voice0._triggerEnvelopeRelease(ee),this.voice1._triggerEnvelopeRelease(ee),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class FMSynth extends ModulationSynth{constructor(){super(optionsFromArguments(FMSynth.getDefaults(),arguments)),this.name="FMSynth";const ee=optionsFromArguments(FMSynth.getDefaults(),arguments);this.modulationIndex=new Multiply({context:this.context,value:ee.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(ModulationSynth.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const inharmRatios=[1,1.483,1.932,2.546,2.63,3.897];class MetalSynth extends Monophonic{constructor(){super(optionsFromArguments(MetalSynth.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const ee=optionsFromArguments(MetalSynth.getDefaults(),arguments);this.detune=new Signal({context:this.context,units:"cents",value:ee.detune}),this.frequency=new Signal({context:this.context,units:"frequency"}),this._amplitude=new Gain({context:this.context,gain:0}).connect(this.output),this._highpass=new Filter({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let ne=0;ne<inharmRatios.length;ne++){const ie=new FMOscillator({context:this.context,harmonicity:ee.harmonicity,modulationIndex:ee.modulationIndex,modulationType:"square",onstop:ne===0?()=>this.onsilence(this):noOp,type:"square"});ie.connect(this._highpass),this._oscillators[ne]=ie;const oe=new Multiply({context:this.context,value:inharmRatios[ne]});this._freqMultipliers[ne]=oe,this.frequency.chain(oe,ie.frequency),this.detune.connect(ie.detune)}this._filterFreqScaler=new Scale({context:this.context,max:7e3,min:this.toFrequency(ee.resonance)}),this.envelope=new Envelope({attack:ee.envelope.attack,attackCurve:"linear",context:this.context,decay:ee.envelope.decay,release:ee.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=ee.octaves,this.octaves=ee.octaves}static getDefaults(){return deepMerge(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(ee,ne=1){return this.envelope.triggerAttack(ee,ne),this._oscillators.forEach(ie=>ie.start(ee)),this.envelope.sustain===0&&this._oscillators.forEach(ie=>{ie.stop(ee+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))}),this}_triggerEnvelopeRelease(ee){return this.envelope.triggerRelease(ee),this._oscillators.forEach(ne=>ne.stop(ee+this.toSeconds(this.envelope.release))),this}getLevelAtTime(ee){return ee=this.toSeconds(ee),this.envelope.getValueAtTime(ee)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(ee){this._oscillators.forEach(ne=>ne.modulationIndex.value=ee)}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(ee){this._oscillators.forEach(ne=>ne.harmonicity.value=ee)}get resonance(){return this._filterFreqScaler.min}set resonance(ee){this._filterFreqScaler.min=this.toFrequency(ee),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(ee){this._octaves=ee,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,ee)}dispose(){return super.dispose(),this._oscillators.forEach(ee=>ee.dispose()),this._freqMultipliers.forEach(ee=>ee.dispose()),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class MembraneSynth extends Synth{constructor(){super(optionsFromArguments(MembraneSynth.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const ee=optionsFromArguments(MembraneSynth.getDefaults(),arguments);this.pitchDecay=ee.pitchDecay,this.octaves=ee.octaves,readOnly(this,["oscillator","envelope"])}static getDefaults(){return deepMerge(Monophonic.getDefaults(),Synth.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(ee,ne){const ie=this.toSeconds(ne),oe=this.toFrequency(ee instanceof FrequencyClass?ee.toFrequency():ee),ae=oe*this.octaves;return this.oscillator.frequency.setValueAtTime(ae,ie),this.oscillator.frequency.exponentialRampToValueAtTime(oe,ie+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}__decorate$8([range(0)],MembraneSynth.prototype,"octaves",void 0);__decorate$8([timeRange(0)],MembraneSynth.prototype,"pitchDecay",void 0);class NoiseSynth extends Instrument$3{constructor(){super(optionsFromArguments(NoiseSynth.getDefaults(),arguments)),this.name="NoiseSynth";const ee=optionsFromArguments(NoiseSynth.getDefaults(),arguments);this.noise=new Noise(Object.assign({context:this.context},ee.noise)),this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},ee.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Instrument$3.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(omitFromObject(Noise.getDefaults(),Object.keys(Source.getDefaults())),{type:"white"})})}triggerAttack(ee,ne=1){return ee=this.toSeconds(ee),this.envelope.triggerAttack(ee,ne),this.noise.start(ee),this.envelope.sustain===0&&this.noise.stop(ee+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(ee){return ee=this.toSeconds(ee),this.envelope.triggerRelease(ee),this.noise.stop(ee+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(ee,ne,ie=1){return ne=this.toSeconds(ne),ee=this.toSeconds(ee),this.triggerAttack(ne,ie),this.triggerRelease(ne+ee),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const workletContext=new Set;function addToWorklet(re){workletContext.add(re)}function registerProcessor(re,ee){const ne=`registerProcessor("${re}", ${ee})`;workletContext.add(ne)}function getWorkletGlobalScope(){return Array.from(workletContext).join(`
`)}class ToneAudioWorklet extends ToneAudioNode{constructor(ee){super(ee),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=noOp;const ne=URL.createObjectURL(new Blob([getWorkletGlobalScope()],{type:"text/javascript"})),ie=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(ne,ie).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(ie,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const toneAudioWorkletProcessor=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;addToWorklet(toneAudioWorkletProcessor);const singleIOProcess=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;addToWorklet(singleIOProcess);const delayLine=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;addToWorklet(delayLine);const workletName$1="feedback-comb-filter",feedbackCombFilter=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;registerProcessor(workletName$1,feedbackCombFilter);class FeedbackCombFilter extends ToneAudioWorklet{constructor(){super(optionsFromArguments(FeedbackCombFilter.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const ee=optionsFromArguments(FeedbackCombFilter.getDefaults(),arguments,["delayTime","resonance"]);this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.delayTime=new Param({context:this.context,value:ee.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new Param({context:this.context,value:ee.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),readOnly(this,["resonance","delayTime"])}_audioWorkletName(){return workletName$1}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{delayTime:.1,resonance:.5})}onReady(ee){connectSeries(this.input,ee,this.output);const ne=ee.parameters.get("delayTime");this.delayTime.setParam(ne);const ie=ee.parameters.get("feedback");this.resonance.setParam(ie)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class OnePoleFilter extends ToneAudioNode{constructor(){super(optionsFromArguments(OnePoleFilter.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const ee=optionsFromArguments(OnePoleFilter.getDefaults(),arguments,["frequency","type"]);this._frequency=ee.frequency,this._type=ee.type,this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const ee=this._filter,ne=this.toFrequency(this._frequency),ie=1/(2*Math.PI*ne);if(this._type==="lowpass"){const oe=1/(ie*this.context.sampleRate),ae=oe-1;this._filter=this.context.createIIRFilter([oe,0],[1,ae])}else{const oe=1/(ie*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,oe])}this.input.chain(this._filter,this.output),ee&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(ee),ee.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(ee){this._frequency=ee,this._createFilter()}get type(){return this._type}set type(ee){this._type=ee,this._createFilter()}getFrequencyResponse(ee=128){const ne=new Float32Array(ee);for(let ae=0;ae<ee;ae++){const le=Math.pow(ae/ee,2)*(2e4-20)+20;ne[ae]=le}const ie=new Float32Array(ee),oe=new Float32Array(ee);return this._filter.getFrequencyResponse(ne,ie,oe),ie}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class LowpassCombFilter extends ToneAudioNode{constructor(){super(optionsFromArguments(LowpassCombFilter.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const ee=optionsFromArguments(LowpassCombFilter.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new FeedbackCombFilter({context:this.context,delayTime:ee.delayTime,resonance:ee.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new OnePoleFilter({context:this.context,frequency:ee.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(ee){this._lowpass.frequency=ee}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class PluckSynth extends Instrument$3{constructor(){super(optionsFromArguments(PluckSynth.getDefaults(),arguments)),this.name="PluckSynth";const ee=optionsFromArguments(PluckSynth.getDefaults(),arguments);this._noise=new Noise({context:this.context,type:"pink"}),this.attackNoise=ee.attackNoise,this._lfcf=new LowpassCombFilter({context:this.context,dampening:ee.dampening,resonance:ee.resonance}),this.resonance=ee.resonance,this.release=ee.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return deepMerge(Instrument$3.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(ee){this._lfcf.dampening=ee}triggerAttack(ee,ne){const ie=this.toFrequency(ee);ne=this.toSeconds(ne);const oe=1/ie;return this._lfcf.delayTime.setValueAtTime(oe,ne),this._noise.start(ne),this._noise.stop(ne+oe*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(ne),this._lfcf.resonance.setValueAtTime(this.resonance,ne),this}triggerRelease(ee){return this._lfcf.resonance.linearRampTo(0,this.release,ee),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class PolySynth extends Instrument$3{constructor(){super(optionsFromArguments(PolySynth.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const ee=optionsFromArguments(PolySynth.getDefaults(),arguments,["voice","options"]);assert(!isNumber$2(ee.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const ne=ee.voice.getDefaults();this.options=Object.assign(ne,ee.options),this.voice=ee.voice,this.maxPolyphony=ee.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const ie=this._voices.indexOf(this._dummyVoice);this._voices.splice(ie,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Instrument$3.getDefaults(),{maxPolyphony:32,options:{},voice:Synth})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(ee){this._availableVoices.push(ee);const ne=this._activeVoices.findIndex(ie=>ie.voice===ee);this._activeVoices.splice(ne,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const ee=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return ee.connect(this.output),this._voices.push(ee),ee}else warn("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const ee=this._availableVoices.shift(),ne=this._voices.indexOf(ee);this._voices.splice(ne,1),this.context.isOffline||ee.dispose()}}_triggerAttack(ee,ne,ie){ee.forEach(oe=>{const ae=new MidiClass(this.context,oe).toMidi(),ce=this._getNextAvailableVoice();ce&&(ce.triggerAttack(oe,ne,ie),this._activeVoices.push({midi:ae,voice:ce,released:!1}),this.log("triggerAttack",oe,ne))})}_triggerRelease(ee,ne){ee.forEach(ie=>{const oe=new MidiClass(this.context,ie).toMidi(),ae=this._activeVoices.find(({midi:ce,released:le})=>ce===oe&&!le);ae&&(ae.voice.triggerRelease(ne),ae.released=!0,this.log("triggerRelease",ie,ne))})}_scheduleEvent(ee,ne,ie,oe){assert(!this.disposed,"Synth was already disposed"),ie<=this.now()?ee==="attack"?this._triggerAttack(ne,ie,oe):this._triggerRelease(ne,ie):this.context.setTimeout(()=>{this._scheduleEvent(ee,ne,ie,oe)},ie-this.now())}triggerAttack(ee,ne,ie){Array.isArray(ee)||(ee=[ee]);const oe=this.toSeconds(ne);return this._scheduleEvent("attack",ee,oe,ie),this}triggerRelease(ee,ne){Array.isArray(ee)||(ee=[ee]);const ie=this.toSeconds(ne);return this._scheduleEvent("release",ee,ie),this}triggerAttackRelease(ee,ne,ie,oe){const ae=this.toSeconds(ie);if(this.triggerAttack(ee,ae,oe),isArray$8(ne)){assert(isArray$8(ee),"If the duration is an array, the notes must also be an array"),ee=ee;for(let ce=0;ce<ee.length;ce++){const le=ne[Math.min(ce,ne.length-1)],ue=this.toSeconds(le);assert(ue>0,"The duration must be greater than 0"),this.triggerRelease(ee[ce],ae+ue)}}else{const ce=this.toSeconds(ne);assert(ce>0,"The duration must be greater than 0"),this.triggerRelease(ee,ae+ce)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(ee){const ne=omitFromObject(ee,["onsilence","context"]);return this.options=deepMerge(this.options,ne),this._voices.forEach(ie=>ie.set(ne)),this._dummyVoice.set(ne),this}get(){return this._dummyVoice.get()}releaseAll(ee){const ne=this.toSeconds(ee);return this._activeVoices.forEach(({voice:ie})=>{ie.triggerRelease(ne)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(ee=>ee.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Sampler extends Instrument$3{constructor(){super(optionsFromArguments(Sampler.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const ee=optionsFromArguments(Sampler.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),ne={};Object.keys(ee.urls).forEach(ie=>{const oe=parseInt(ie,10);if(assert(isNote(ie)||isNumber$2(oe)&&isFinite(oe),`url key is neither a note or midi pitch: ${ie}`),isNote(ie)){const ae=new FrequencyClass(this.context,ie).toMidi();ne[ae]=ee.urls[ie]}else isNumber$2(oe)&&isFinite(oe)&&(ne[oe]=ee.urls[oe])}),this._buffers=new ToneAudioBuffers({urls:ne,onload:ee.onload,baseUrl:ee.baseUrl,onerror:ee.onerror}),this.attack=ee.attack,this.release=ee.release,this.curve=ee.curve,this._buffers.loaded&&Promise.resolve().then(ee.onload)}static getDefaults(){return Object.assign(Instrument$3.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:noOp,onerror:noOp,release:.1,urls:{}})}_findClosest(ee){let ie=0;for(;ie<96;){if(this._buffers.has(ee+ie))return-ie;if(this._buffers.has(ee-ie))return ie;ie++}throw new Error(`No available buffers for note: ${ee}`)}triggerAttack(ee,ne,ie=1){return this.log("triggerAttack",ee,ne,ie),Array.isArray(ee)||(ee=[ee]),ee.forEach(oe=>{const ae=ftomf(new FrequencyClass(this.context,oe).toFrequency()),ce=Math.round(ae),le=ae-ce,ue=this._findClosest(ce),he=ce-ue,fe=this._buffers.get(he),me=intervalToFrequencyRatio(ue+le),ge=new ToneBufferSource({url:fe,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:me}).connect(this.output);ge.start(ne,0,fe.duration/me,ie),isArray$8(this._activeSources.get(ce))||this._activeSources.set(ce,[]),this._activeSources.get(ce).push(ge),ge.onended=()=>{if(this._activeSources&&this._activeSources.has(ce)){const ve=this._activeSources.get(ce),ye=ve.indexOf(ge);ye!==-1&&ve.splice(ye,1)}}}),this}triggerRelease(ee,ne){return this.log("triggerRelease",ee,ne),Array.isArray(ee)||(ee=[ee]),ee.forEach(ie=>{const oe=new FrequencyClass(this.context,ie).toMidi();if(this._activeSources.has(oe)&&this._activeSources.get(oe).length){const ae=this._activeSources.get(oe);ne=this.toSeconds(ne),ae.forEach(ce=>{ce.stop(ne)}),this._activeSources.set(oe,[])}}),this}releaseAll(ee){const ne=this.toSeconds(ee);return this._activeSources.forEach(ie=>{for(;ie.length;)ie.shift().stop(ne)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(ee,ne,ie,oe=1){const ae=this.toSeconds(ie);return this.triggerAttack(ee,ae,oe),isArray$8(ne)?(assert(isArray$8(ee),"notes must be an array when duration is array"),ee.forEach((ce,le)=>{const ue=ne[Math.min(le,ne.length-1)];this.triggerRelease(ce,ae+this.toSeconds(ue))})):this.triggerRelease(ee,ae+this.toSeconds(ne)),this}add(ee,ne,ie){if(assert(isNote(ee)||isFinite(ee),`note must be a pitch or midi: ${ee}`),isNote(ee)){const oe=new FrequencyClass(this.context,ee).toMidi();this._buffers.add(oe,ne,ie)}else this._buffers.add(ee,ne,ie);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(ee=>{ee.forEach(ne=>ne.dispose())}),this._activeSources.clear(),this}}__decorate$8([timeRange(0)],Sampler.prototype,"attack",void 0);__decorate$8([timeRange(0)],Sampler.prototype,"release",void 0);class ToneEvent extends ToneWithContext{constructor(){super(optionsFromArguments(ToneEvent.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new StateTimeline("stopped"),this._startOffset=0;const ee=optionsFromArguments(ToneEvent.getDefaults(),arguments,["callback","value"]);this._loop=ee.loop,this.callback=ee.callback,this.value=ee.value,this._loopStart=this.toTicks(ee.loopStart),this._loopEnd=this.toTicks(ee.loopEnd),this._playbackRate=ee.playbackRate,this._probability=ee.probability,this._humanize=ee.humanize,this.mute=ee.mute,this._playbackRate=ee.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(ee=-1){this._state.forEachFrom(ee,ne=>{let ie;if(ne.state==="started"){ne.id!==-1&&this.context.transport.clear(ne.id);const oe=ne.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||isNumber$2(this._loop)&&this._loop>1){ie=1/0,isNumber$2(this._loop)&&(ie=this._loop*this._getLoopDuration());const ae=this._state.getAfter(oe);ae!==null&&(ie=Math.min(ie,ae.time-oe)),ie!==1/0&&(this._state.setStateAtTime("stopped",oe+ie+1,{id:-1}),ie=new TicksClass(this.context,ie));const ce=new TicksClass(this.context,this._getLoopDuration());ne.id=this.context.transport.scheduleRepeat(this._tick.bind(this),ce,new TicksClass(this.context,oe),ie)}else ne.id=this.context.transport.schedule(this._tick.bind(this),new TicksClass(this.context,oe))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(ee){this._startOffset=ee}get probability(){return this._probability}set probability(ee){this._probability=ee}get humanize(){return this._humanize}set humanize(ee){this._humanize=ee}start(ee){const ne=this.toTicks(ee);return this._state.getValueAtTime(ne)==="stopped"&&(this._state.add({id:-1,state:"started",time:ne}),this._rescheduleEvents(ne)),this}stop(ee){this.cancel(ee);const ne=this.toTicks(ee);if(this._state.getValueAtTime(ne)==="started"){this._state.setStateAtTime("stopped",ne,{id:-1});const ie=this._state.getBefore(ne);let oe=ne;ie!==null&&(oe=ie.time),this._rescheduleEvents(oe)}return this}cancel(ee){ee=defaultArg(ee,-1/0);const ne=this.toTicks(ee);return this._state.forEachFrom(ne,ie=>{this.context.transport.clear(ie.id)}),this._state.cancel(ne),this}_tick(ee){const ne=this.context.transport.getTicksAtTime(ee);if(!this.mute&&this._state.getValueAtTime(ne)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let ie=.02;isBoolean$1(this.humanize)||(ie=this.toSeconds(this.humanize)),ee+=(Math.random()*2-1)*ie}this.callback(ee,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(ee){this._loop=ee,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(ee){this._playbackRate=ee,this._rescheduleEvents()}get loopEnd(){return new TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(ee){this._loopEnd=this.toTicks(ee),this._loop&&this._rescheduleEvents()}get loopStart(){return new TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(ee){this._loopStart=this.toTicks(ee),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const ee=this.context.transport.ticks,ne=this._state.get(ee);if(ne!==null&&ne.state==="started"){const ie=this._getLoopDuration();return(ee-ne.time)%ie/ie}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Loop extends ToneWithContext{constructor(){super(optionsFromArguments(Loop.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const ee=optionsFromArguments(Loop.getDefaults(),arguments,["callback","interval"]);this._event=new ToneEvent({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:ee.interval,playbackRate:ee.playbackRate,probability:ee.probability}),this.callback=ee.callback,this.iterations=ee.iterations}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{interval:"4n",callback:noOp,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(ee){return this._event.start(ee),this}stop(ee){return this._event.stop(ee),this}cancel(ee){return this._event.cancel(ee),this}_tick(ee){this.callback(ee)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(ee){this._event.loopEnd=ee}get playbackRate(){return this._event.playbackRate}set playbackRate(ee){this._event.playbackRate=ee}get humanize(){return this._event.humanize}set humanize(ee){this._event.humanize=ee}get probability(){return this._event.probability}set probability(ee){this._event.probability=ee}get mute(){return this._event.mute}set mute(ee){this._event.mute=ee}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(ee){ee===1/0?this._event.loop=!0:this._event.loop=ee}dispose(){return super.dispose(),this._event.dispose(),this}}class Part extends ToneEvent{constructor(){super(optionsFromArguments(Part.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new StateTimeline("stopped"),this._events=new Set;const ee=optionsFromArguments(Part.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,ee.events.forEach(ne=>{isArray$8(ne)?this.add(ne[0],ne[1]):this.add(ne)})}static getDefaults(){return Object.assign(ToneEvent.getDefaults(),{events:[]})}start(ee,ne){const ie=this.toTicks(ee);if(this._state.getValueAtTime(ie)!=="started"){ne=defaultArg(ne,this._loop?this._loopStart:0),this._loop?ne=defaultArg(ne,this._loopStart):ne=defaultArg(ne,0);const oe=this.toTicks(ne);this._state.add({id:-1,offset:oe,state:"started",time:ie}),this._forEach(ae=>{this._startNote(ae,ie,oe)})}return this}_startNote(ee,ne,ie){ne-=ie,this._loop?ee.startOffset>=this._loopStart&&ee.startOffset<this._loopEnd?(ee.startOffset<ie&&(ne+=this._getLoopDuration()),ee.start(new TicksClass(this.context,ne))):ee.startOffset<this._loopStart&&ee.startOffset>=ie&&(ee.loop=!1,ee.start(new TicksClass(this.context,ne))):ee.startOffset>=ie&&ee.start(new TicksClass(this.context,ne))}get startOffset(){return this._startOffset}set startOffset(ee){this._startOffset=ee,this._forEach(ne=>{ne.startOffset+=this._startOffset})}stop(ee){const ne=this.toTicks(ee);return this._state.cancel(ne),this._state.setStateAtTime("stopped",ne),this._forEach(ie=>{ie.stop(ee)}),this}at(ee,ne){const ie=new TransportTimeClass(this.context,ee).toTicks(),oe=new TicksClass(this.context,1).toSeconds(),ae=this._events.values();let ce=ae.next();for(;!ce.done;){const le=ce.value;if(Math.abs(ie-le.startOffset)<oe)return isDefined(ne)&&(le.value=ne),le;ce=ae.next()}return isDefined(ne)?(this.add(ee,ne),this.at(ee)):null}add(ee,ne){ee instanceof Object&&Reflect.has(ee,"time")&&(ne=ee,ee=ne.time);const ie=this.toTicks(ee);let oe;return ne instanceof ToneEvent?(oe=ne,oe.callback=this._tick.bind(this)):oe=new ToneEvent({callback:this._tick.bind(this),context:this.context,value:ne}),oe.startOffset=ie,oe.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(oe),this._restartEvent(oe),this}_restartEvent(ee){this._state.forEach(ne=>{ne.state==="started"?this._startNote(ee,ne.time,ne.offset):ee.stop(new TicksClass(this.context,ne.time))})}remove(ee,ne){return isObject$4(ee)&&ee.hasOwnProperty("time")&&(ne=ee,ee=ne.time),ee=this.toTicks(ee),this._events.forEach(ie=>{ie.startOffset===ee&&(isUndef(ne)||isDefined(ne)&&ie.value===ne)&&(this._events.delete(ie),ie.dispose())}),this}clear(){return this._forEach(ee=>ee.dispose()),this._events.clear(),this}cancel(ee){return this._forEach(ne=>ne.cancel(ee)),this._state.cancel(this.toTicks(ee)),this}_forEach(ee){return this._events&&this._events.forEach(ne=>{ne instanceof Part?ne._forEach(ee):ee(ne)}),this}_setAll(ee,ne){this._forEach(ie=>{ie[ee]=ne})}_tick(ee,ne){this.mute||this.callback(ee,ne)}_testLoopBoundries(ee){this._loop&&(ee.startOffset<this._loopStart||ee.startOffset>=this._loopEnd)?ee.cancel(0):ee.state==="stopped"&&this._restartEvent(ee)}get probability(){return this._probability}set probability(ee){this._probability=ee,this._setAll("probability",ee)}get humanize(){return this._humanize}set humanize(ee){this._humanize=ee,this._setAll("humanize",ee)}get loop(){return this._loop}set loop(ee){this._loop=ee,this._forEach(ne=>{ne.loopStart=this.loopStart,ne.loopEnd=this.loopEnd,ne.loop=ee,this._testLoopBoundries(ne)})}get loopEnd(){return new TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(ee){this._loopEnd=this.toTicks(ee),this._loop&&this._forEach(ne=>{ne.loopEnd=ee,this._testLoopBoundries(ne)})}get loopStart(){return new TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(ee){this._loopStart=this.toTicks(ee),this._loop&&this._forEach(ne=>{ne.loopStart=this.loopStart,this._testLoopBoundries(ne)})}get playbackRate(){return this._playbackRate}set playbackRate(ee){this._playbackRate=ee,this._setAll("playbackRate",ee)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*upPatternGen(re){let ee=0;for(;ee<re.length;)ee=clampToArraySize(ee,re),yield re[ee],ee++}function*downPatternGen(re){let ee=re.length-1;for(;ee>=0;)ee=clampToArraySize(ee,re),yield re[ee],ee--}function*infiniteGen(re,ee){for(;;)yield*ee(re)}function clampToArraySize(re,ee){return clamp(re,0,ee.length-1)}function*alternatingGenerator(re,ee){let ne=ee?0:re.length-1;for(;;)ne=clampToArraySize(ne,re),yield re[ne],ee?(ne++,ne>=re.length-1&&(ee=!1)):(ne--,ne<=0&&(ee=!0))}function*jumpUp(re){let ee=0,ne=0;for(;ee<re.length;)ee=clampToArraySize(ee,re),yield re[ee],ne++,ee+=ne%2?2:-1}function*jumpDown(re){let ee=re.length-1,ne=0;for(;ee>=0;)ee=clampToArraySize(ee,re),yield re[ee],ne++,ee+=ne%2?-2:1}function*randomGen(re){for(;;){const ee=Math.floor(Math.random()*re.length);yield re[ee]}}function*randomOnce(re){const ee=[];for(let ne=0;ne<re.length;ne++)ee.push(ne);for(;ee.length>0;){const ne=ee.splice(Math.floor(ee.length*Math.random()),1),ie=clampToArraySize(ne[0],re);yield re[ie]}}function*randomWalk(re){let ee=Math.floor(Math.random()*re.length);for(;;)ee===0?ee++:ee===re.length-1||Math.random()<.5?ee--:ee++,yield re[ee]}function*PatternGenerator(re,ee="up",ne=0){switch(assert(re.length>0,"The array must have more than one value in it"),ee){case"up":yield*infiniteGen(re,upPatternGen);case"down":yield*infiniteGen(re,downPatternGen);case"upDown":yield*alternatingGenerator(re,!0);case"downUp":yield*alternatingGenerator(re,!1);case"alternateUp":yield*infiniteGen(re,jumpUp);case"alternateDown":yield*infiniteGen(re,jumpDown);case"random":yield*randomGen(re);case"randomOnce":yield*infiniteGen(re,randomOnce);case"randomWalk":yield*randomWalk(re)}}class Pattern extends Loop{constructor(){super(optionsFromArguments(Pattern.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const ee=optionsFromArguments(Pattern.getDefaults(),arguments,["callback","values","pattern"]);this.callback=ee.callback,this._values=ee.values,this._pattern=PatternGenerator(ee.values,ee.pattern),this._type=ee.pattern}static getDefaults(){return Object.assign(Loop.getDefaults(),{pattern:"up",values:[],callback:noOp})}_tick(ee){const ne=this._pattern.next();this._value=ne.value,this.callback(ee,this._value)}get values(){return this._values}set values(ee){this._values=ee,this.pattern=this._type}get value(){return this._value}get pattern(){return this._type}set pattern(ee){this._type=ee,this._pattern=PatternGenerator(this._values,this._type)}}class Sequence extends ToneEvent{constructor(){super(optionsFromArguments(Sequence.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new Part({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];const ee=optionsFromArguments(Sequence.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(ee.subdivision),this.events=ee.events,this.loop=ee.loop,this.loopStart=ee.loopStart,this.loopEnd=ee.loopEnd,this.playbackRate=ee.playbackRate,this.probability=ee.probability,this.humanize=ee.humanize,this.mute=ee.mute,this.playbackRate=ee.playbackRate}static getDefaults(){return Object.assign(omitFromObject(ToneEvent.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(ee,ne){ne!==null&&this.callback(ee,ne)}get events(){return this._events}set events(ee){this.clear(),this._eventsArray=ee,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(ee,ne){return this._part.start(ee,ne&&this._indexTime(ne)),this}stop(ee){return this._part.stop(ee),this}get subdivision(){return new TicksClass(this.context,this._subdivision).toSeconds()}_createSequence(ee){return new Proxy(ee,{get:(ne,ie)=>ne[ie],set:(ne,ie,oe)=>(isString$1(ie)&&isFinite(parseInt(ie,10))&&isArray$8(oe)?ne[ie]=this._createSequence(oe):ne[ie]=oe,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(ee,ne,ie){ee.forEach((oe,ae)=>{const ce=ae*ne+ie;if(isArray$8(oe))this._rescheduleSequence(oe,ne/oe.length,ce);else{const le=new TicksClass(this.context,ce,"i").toSeconds();this._part.add(le,oe)}})}_indexTime(ee){return new TicksClass(this.context,ee*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(ee){this._part.loop=ee}get loopStart(){return this._loopStart}set loopStart(ee){this._loopStart=ee,this._part.loopStart=this._indexTime(ee)}get loopEnd(){return this._loopEnd}set loopEnd(ee){this._loopEnd=ee,ee===0?this._part.loopEnd=this._indexTime(this._eventsArray.length):this._part.loopEnd=this._indexTime(ee)}get startOffset(){return this._part.startOffset}set startOffset(ee){this._part.startOffset=ee}get playbackRate(){return this._part.playbackRate}set playbackRate(ee){this._part.playbackRate=ee}get probability(){return this._part.probability}set probability(ee){this._part.probability=ee}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(ee){this._part.humanize=ee}get length(){return this._part.length}}class CrossFade extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new GainToAudio({context:this.context}),this.a=new Gain({context:this.context,gain:0}),this.b=new Gain({context:this.context,gain:0}),this.output=new Gain({context:this.context}),this._internalChannels=[this.a,this.b];const ee=optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]);this.fade=new Signal({context:this.context,units:"normalRange",value:ee.fade}),readOnly(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",connect(this._split,this.a.gain,0),connect(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Effect extends ToneAudioNode{constructor(ee){super(ee),this.name="Effect",this._dryWet=new CrossFade({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Gain({context:this.context}),this.effectReturn=new Gain({context:this.context}),this.input=new Gain({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(ee.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],readOnly(this,"wet")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}connectEffect(ee){return this._internalChannels.push(ee),this.effectSend.chain(ee,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class LFOEffect extends Effect{constructor(ee){super(ee),this.name="LFOEffect",this._lfo=new LFO({context:this.context,frequency:ee.frequency,amplitude:ee.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=ee.type,readOnly(this,["frequency","depth"])}static getDefaults(){return Object.assign(Effect.getDefaults(),{frequency:1,type:"sine",depth:1})}start(ee){return this._lfo.start(ee),this}stop(ee){return this._lfo.stop(ee),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(ee){this._lfo.type=ee}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class AutoFilter extends LFOEffect{constructor(){super(optionsFromArguments(AutoFilter.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const ee=optionsFromArguments(AutoFilter.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new Filter(Object.assign(ee.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=ee.octaves,this.baseFrequency=ee.baseFrequency}static getDefaults(){return Object.assign(LFOEffect.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(ee){this._lfo.min=this.toFrequency(ee),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(ee){this._octaves=ee,this._lfo.max=this._lfo.min*Math.pow(2,ee)}dispose(){return super.dispose(),this.filter.dispose(),this}}class Panner extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Panner.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const ee=optionsFromArguments(Panner.getDefaults(),arguments,["pan"]);this.pan=new Param({context:this.context,param:this._panner.pan,value:ee.pan,minValue:-1,maxValue:1}),this._panner.channelCount=ee.channelCount,this._panner.channelCountMode="explicit",readOnly(this,"pan")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class AutoPanner extends LFOEffect{constructor(){super(optionsFromArguments(AutoPanner.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const ee=optionsFromArguments(AutoPanner.getDefaults(),arguments,["frequency"]);this._panner=new Panner({context:this.context,channelCount:ee.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(LFOEffect.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class Follower extends ToneAudioNode{constructor(){super(optionsFromArguments(Follower.getDefaults(),arguments,["smoothing"])),this.name="Follower";const ee=optionsFromArguments(Follower.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new Abs({context:this.context}),this._lowpass=this.output=new OnePoleFilter({context:this.context,frequency:1/this.toSeconds(ee.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=ee.smoothing}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(ee){this._smoothing=ee,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class AutoWah extends Effect{constructor(){super(optionsFromArguments(AutoWah.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";const ee=optionsFromArguments(AutoWah.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new Follower({context:this.context,smoothing:ee.follower}),this._sweepRange=new ScaleExp({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(ee.baseFrequency),this._octaves=ee.octaves,this._inputBoost=new Gain({context:this.context}),this._bandpass=new Filter({context:this.context,rolloff:-48,frequency:0,Q:ee.Q}),this._peaking=new Filter({context:this.context,type:"peaking"}),this._peaking.gain.value=ee.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=ee.sensitivity,readOnly(this,["gain","Q"])}static getDefaults(){return Object.assign(Effect.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(ee){this._octaves=ee,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(ee){this._follower.smoothing=ee}get baseFrequency(){return this._baseFrequency}set baseFrequency(ee){this._baseFrequency=this.toFrequency(ee),this._setSweepRange()}get sensitivity(){return gainToDb(1/this._inputBoost.gain.value)}set sensitivity(ee){this._inputBoost.gain.value=1/dbToGain(ee)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const workletName="bit-crusher",bitCrusherWorklet=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;registerProcessor(workletName,bitCrusherWorklet);class BitCrusher extends Effect{constructor(){super(optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const ee=optionsFromArguments(BitCrusher.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new BitCrusherWorklet({context:this.context,bits:ee.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(Effect.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class BitCrusherWorklet extends ToneAudioWorklet{constructor(){super(optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments)),this.name="BitCrusherWorklet";const ee=optionsFromArguments(BitCrusherWorklet.getDefaults(),arguments);this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.bits=new Param({context:this.context,value:ee.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(ToneAudioWorklet.getDefaults(),{bits:12})}_audioWorkletName(){return workletName}onReady(ee){connectSeries(this.input,ee,this.output);const ne=ee.parameters.get("bits");this.bits.setParam(ne)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Chebyshev extends Effect{constructor(){super(optionsFromArguments(Chebyshev.getDefaults(),arguments,["order"])),this.name="Chebyshev";const ee=optionsFromArguments(Chebyshev.getDefaults(),arguments,["order"]);this._shaper=new WaveShaper({context:this.context,length:4096}),this._order=ee.order,this.connectEffect(this._shaper),this.order=ee.order,this.oversample=ee.oversample}static getDefaults(){return Object.assign(Effect.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(ee,ne,ie){return ie.has(ne)||(ne===0?ie.set(ne,0):ne===1?ie.set(ne,ee):ie.set(ne,2*ee*this._getCoefficient(ee,ne-1,ie)-this._getCoefficient(ee,ne-2,ie))),ie.get(ne)}get order(){return this._order}set order(ee){this._order=ee,this._shaper.setMap(ne=>this._getCoefficient(ne,ee,new Map))}get oversample(){return this._shaper.oversample}set oversample(ee){this._shaper.oversample=ee}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Split extends ToneAudioNode{constructor(){super(optionsFromArguments(Split.getDefaults(),arguments,["channels"])),this.name="Split";const ee=optionsFromArguments(Split.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(ee.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Merge extends ToneAudioNode{constructor(){super(optionsFromArguments(Merge.getDefaults(),arguments,["channels"])),this.name="Merge";const ee=optionsFromArguments(Merge.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(ee.channels)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class StereoEffect extends ToneAudioNode{constructor(ee){super(ee),this.name="StereoEffect",this.input=new Gain({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new CrossFade({context:this.context,fade:ee.wet}),this.wet=this._dryWet.fade,this._split=new Split({context:this.context,channels:2}),this._merge=new Merge({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),readOnly(this,["wet"])}connectEffectLeft(...ee){this._split.connect(ee[0],0,0),connectSeries(...ee),connect(ee[ee.length-1],this._merge,0,0)}connectEffectRight(...ee){this._split.connect(ee[0],1,0),connectSeries(...ee),connect(ee[ee.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class StereoFeedbackEffect extends StereoEffect{constructor(ee){super(ee),this.feedback=new Signal({context:this.context,value:ee.feedback,units:"normalRange"}),this._feedbackL=new Gain({context:this.context}),this._feedbackR=new Gain({context:this.context}),this._feedbackSplit=new Split({context:this.context,channels:2}),this._feedbackMerge=new Merge({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),readOnly(this,["feedback"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Chorus extends StereoFeedbackEffect{constructor(){super(optionsFromArguments(Chorus.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const ee=optionsFromArguments(Chorus.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=ee.depth,this._delayTime=ee.delayTime/1e3,this._lfoL=new LFO({context:this.context,frequency:ee.frequency,min:0,max:1}),this._lfoR=new LFO({context:this.context,frequency:ee.frequency,min:0,max:1,phase:180}),this._delayNodeL=new Delay({context:this.context}),this._delayNodeR=new Delay({context:this.context}),this.frequency=this._lfoL.frequency,readOnly(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=ee.type,this.spread=ee.spread}static getDefaults(){return Object.assign(StereoFeedbackEffect.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(ee){this._depth=ee;const ne=this._delayTime*ee;this._lfoL.min=Math.max(this._delayTime-ne,0),this._lfoL.max=this._delayTime+ne,this._lfoR.min=Math.max(this._delayTime-ne,0),this._lfoR.max=this._delayTime+ne}get delayTime(){return this._delayTime*1e3}set delayTime(ee){this._delayTime=ee/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(ee){this._lfoL.type=ee,this._lfoR.type=ee}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(ee){this._lfoL.phase=90-ee/2,this._lfoR.phase=ee/2+90}start(ee){return this._lfoL.start(ee),this._lfoR.start(ee),this}stop(ee){return this._lfoL.stop(ee),this._lfoR.stop(ee),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Distortion extends Effect{constructor(){super(optionsFromArguments(Distortion.getDefaults(),arguments,["distortion"])),this.name="Distortion";const ee=optionsFromArguments(Distortion.getDefaults(),arguments,["distortion"]);this._shaper=new WaveShaper({context:this.context,length:4096}),this._distortion=ee.distortion,this.connectEffect(this._shaper),this.distortion=ee.distortion,this.oversample=ee.oversample}static getDefaults(){return Object.assign(Effect.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(ee){this._distortion=ee;const ne=ee*100,ie=Math.PI/180;this._shaper.setMap(oe=>Math.abs(oe)<.001?0:(3+ne)*oe*20*ie/(Math.PI+ne*Math.abs(oe)))}get oversample(){return this._shaper.oversample}set oversample(ee){this._shaper.oversample=ee}dispose(){return super.dispose(),this._shaper.dispose(),this}}class FeedbackEffect extends Effect{constructor(ee){super(ee),this.name="FeedbackEffect",this._feedbackGain=new Gain({context:this.context,gain:ee.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,readOnly(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Effect.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class FeedbackDelay extends FeedbackEffect{constructor(){super(optionsFromArguments(FeedbackDelay.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const ee=optionsFromArguments(FeedbackDelay.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new Delay({context:this.context,delayTime:ee.delayTime,maxDelay:ee.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),readOnly(this,"delayTime")}static getDefaults(){return Object.assign(FeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class PhaseShiftAllpass extends ToneAudioNode{constructor(ee){super(ee),this.name="PhaseShiftAllpass",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this.offset90=new Gain({context:this.context});const ne=[.6923878,.9360654322959,.988229522686,.9987488452737],ie=[.4021921162426,.856171088242,.9722909545651,.9952884791278];this._bank0=this._createAllPassFilterBank(ne),this._bank1=this._createAllPassFilterBank(ie),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),connectSeries(this.input,...this._bank0,this._oneSampleDelay,this.output),connectSeries(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(ee){return ee.map(ie=>{const oe=[[ie*ie,0,-1],[1,0,-(ie*ie)]];return this.context.createIIRFilter(oe[0],oe[1])})}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(ee=>ee.disconnect()),this._bank1.forEach(ee=>ee.disconnect()),this._oneSampleDelay.disconnect(),this}}class FrequencyShifter extends Effect{constructor(){super(optionsFromArguments(FrequencyShifter.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";const ee=optionsFromArguments(FrequencyShifter.getDefaults(),arguments,["frequency"]);this.frequency=new Signal({context:this.context,units:"frequency",value:ee.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new ToneOscillatorNode({context:this.context,type:"sine"}),this._cosine=new Oscillator({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new Multiply({context:this.context}),this._cosineMultiply=new Multiply({context:this.context}),this._negate=new Negate({context:this.context}),this._add=new Add({context:this.context}),this._phaseShifter=new PhaseShiftAllpass({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const ne=this.immediate();this._sine.start(ne),this._cosine.start(ne)}static getDefaults(){return Object.assign(Effect.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const combFilterTunings=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],allpassFilterFrequencies=[225,556,441,341];class Freeverb extends StereoEffect{constructor(){super(optionsFromArguments(Freeverb.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];const ee=optionsFromArguments(Freeverb.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new Signal({context:this.context,value:ee.roomSize,units:"normalRange"}),this._allpassFiltersL=allpassFilterFrequencies.map(ne=>{const ie=this.context.createBiquadFilter();return ie.type="allpass",ie.frequency.value=ne,ie}),this._allpassFiltersR=allpassFilterFrequencies.map(ne=>{const ie=this.context.createBiquadFilter();return ie.type="allpass",ie.frequency.value=ne,ie}),this._combFilters=combFilterTunings.map((ne,ie)=>{const oe=new LowpassCombFilter({context:this.context,dampening:ee.dampening,delayTime:ne});return ie<combFilterTunings.length/2?this.connectEffectLeft(oe,...this._allpassFiltersL):this.connectEffectRight(oe,...this._allpassFiltersR),this.roomSize.connect(oe.resonance),oe}),readOnly(this,["roomSize"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(ee){this._combFilters.forEach(ne=>ne.dampening=ee)}dispose(){return super.dispose(),this._allpassFiltersL.forEach(ee=>ee.disconnect()),this._allpassFiltersR.forEach(ee=>ee.disconnect()),this._combFilters.forEach(ee=>ee.dispose()),this.roomSize.dispose(),this}}const combFilterDelayTimes=[1687/25e3,1601/25e3,2053/25e3,2251/25e3],combFilterResonances=[.773,.802,.753,.733],allpassFilterFreqs=[347,113,37];class JCReverb extends StereoEffect{constructor(){super(optionsFromArguments(JCReverb.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const ee=optionsFromArguments(JCReverb.getDefaults(),arguments,["roomSize"]);this.roomSize=new Signal({context:this.context,value:ee.roomSize,units:"normalRange"}),this._scaleRoomSize=new Scale({context:this.context,min:-.733,max:.197}),this._allpassFilters=allpassFilterFreqs.map(ne=>{const ie=this.context.createBiquadFilter();return ie.type="allpass",ie.frequency.value=ne,ie}),this._feedbackCombFilters=combFilterDelayTimes.map((ne,ie)=>{const oe=new FeedbackCombFilter({context:this.context,delayTime:ne});return this._scaleRoomSize.connect(oe.resonance),oe.resonance.value=combFilterResonances[ie],ie<combFilterDelayTimes.length/2?this.connectEffectLeft(...this._allpassFilters,oe):this.connectEffectRight(...this._allpassFilters,oe),oe}),this.roomSize.connect(this._scaleRoomSize),readOnly(this,["roomSize"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach(ee=>ee.disconnect()),this._feedbackCombFilters.forEach(ee=>ee.dispose()),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class StereoXFeedbackEffect extends StereoFeedbackEffect{constructor(ee){super(ee),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),readOnly(this,["feedback"])}}class PingPongDelay extends StereoXFeedbackEffect{constructor(){super(optionsFromArguments(PingPongDelay.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const ee=optionsFromArguments(PingPongDelay.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new Delay({context:this.context,maxDelay:ee.maxDelay}),this._rightDelay=new Delay({context:this.context,maxDelay:ee.maxDelay}),this._rightPreDelay=new Delay({context:this.context,maxDelay:ee.maxDelay}),this.delayTime=new Signal({context:this.context,units:"time",value:ee.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),readOnly(this,["delayTime"])}static getDefaults(){return Object.assign(StereoXFeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class PitchShift extends FeedbackEffect{constructor(){super(optionsFromArguments(PitchShift.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const ee=optionsFromArguments(PitchShift.getDefaults(),arguments,["pitch"]);this._frequency=new Signal({context:this.context}),this._delayA=new Delay({maxDelay:1,context:this.context}),this._lfoA=new LFO({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new Delay({maxDelay:1,context:this.context}),this._lfoB=new LFO({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new CrossFade({context:this.context}),this._crossFadeLFO=new LFO({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new Delay({delayTime:ee.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,readOnly(this,"delayTime"),this._pitch=ee.pitch,this._windowSize=ee.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const ne=this.now();this._lfoA.start(ne),this._lfoB.start(ne),this._crossFadeLFO.start(ne),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(FeedbackEffect.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(ee){this._pitch=ee;let ne=0;ee<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,ne=intervalToFrequencyRatio(ee-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,ne=intervalToFrequencyRatio(ee)-1),this._frequency.value=ne*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(ee){this._windowSize=this.toSeconds(ee),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Phaser extends StereoEffect{constructor(){super(optionsFromArguments(Phaser.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const ee=optionsFromArguments(Phaser.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new LFO({context:this.context,frequency:ee.frequency,min:0,max:1}),this._lfoR=new LFO({context:this.context,frequency:ee.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(ee.baseFrequency),this._octaves=ee.octaves,this.Q=new Signal({context:this.context,value:ee.Q,units:"positive"}),this._filtersL=this._makeFilters(ee.stages,this._lfoL),this._filtersR=this._makeFilters(ee.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=ee.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=ee.baseFrequency,this.octaves=ee.octaves,this._lfoL.start(),this._lfoR.start(),readOnly(this,["frequency","Q"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(ee,ne){const ie=[];for(let oe=0;oe<ee;oe++){const ae=this.context.createBiquadFilter();ae.type="allpass",this.Q.connect(ae.Q),ne.connect(ae.frequency),ie.push(ae)}return ie}get octaves(){return this._octaves}set octaves(ee){this._octaves=ee;const ne=this._baseFrequency*Math.pow(2,ee);this._lfoL.max=ne,this._lfoR.max=ne}get baseFrequency(){return this._baseFrequency}set baseFrequency(ee){this._baseFrequency=this.toFrequency(ee),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(ee=>ee.disconnect()),this._filtersR.forEach(ee=>ee.disconnect()),this.frequency.dispose(),this}}class Reverb extends Effect{constructor(){super(optionsFromArguments(Reverb.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const ee=optionsFromArguments(Reverb.getDefaults(),arguments,["decay"]);this._decay=ee.decay,this._preDelay=ee.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Effect.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(ee){ee=this.toSeconds(ee),assertRange(ee,.001),this._decay=ee,this.generate()}get preDelay(){return this._preDelay}set preDelay(ee){ee=this.toSeconds(ee),assertRange(ee,0),this._preDelay=ee,this.generate()}generate(){return __awaiter$1(this,void 0,void 0,function*(){const ee=this.ready,ne=new OfflineContext(2,this._decay+this._preDelay,this.context.sampleRate),ie=new Noise({context:ne}),oe=new Noise({context:ne}),ae=new Merge({context:ne});ie.connect(ae,0,0),oe.connect(ae,0,1);const ce=new Gain({context:ne}).toDestination();ae.connect(ce),ie.start(0),oe.start(0),ce.gain.setValueAtTime(0,0),ce.gain.setValueAtTime(1,this._preDelay),ce.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const le=ne.render();return this.ready=le.then(noOp),yield ee,this._convolver.buffer=(yield le).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class MidSideSplit extends ToneAudioNode{constructor(){super(optionsFromArguments(MidSideSplit.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new Split({channels:2,context:this.context}),this._midAdd=new Add({context:this.context}),this.mid=new Multiply({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new Subtract({context:this.context}),this.side=new Multiply({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class MidSideMerge extends ToneAudioNode{constructor(){super(optionsFromArguments(MidSideMerge.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new Gain({context:this.context}),this.side=new Gain({context:this.context}),this._left=new Add({context:this.context}),this._leftMult=new Multiply({context:this.context,value:Math.SQRT1_2}),this._right=new Subtract({context:this.context}),this._rightMult=new Multiply({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new Merge({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class MidSideEffect extends Effect{constructor(ee){super(ee),this.name="MidSideEffect",this._midSideMerge=new MidSideMerge({context:this.context}),this._midSideSplit=new MidSideSplit({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...ee){this._midSend.chain(...ee,this._midReturn)}connectEffectSide(...ee){this._sideSend.chain(...ee,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class StereoWidener extends MidSideEffect{constructor(){super(optionsFromArguments(StereoWidener.getDefaults(),arguments,["width"])),this.name="StereoWidener";const ee=optionsFromArguments(StereoWidener.getDefaults(),arguments,["width"]);this.width=new Signal({context:this.context,value:ee.width,units:"normalRange"}),readOnly(this,["width"]),this._twoTimesWidthMid=new Multiply({context:this.context,value:2}),this._twoTimesWidthSide=new Multiply({context:this.context,value:2}),this._midMult=new Multiply({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new Subtract({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),connect(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new Multiply({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(MidSideEffect.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class Tremolo extends StereoEffect{constructor(){super(optionsFromArguments(Tremolo.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const ee=optionsFromArguments(Tremolo.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new LFO({context:this.context,type:ee.type,min:1,max:0}),this._lfoR=new LFO({context:this.context,type:ee.type,min:1,max:0}),this._amplitudeL=new Gain({context:this.context}),this._amplitudeR=new Gain({context:this.context}),this.frequency=new Signal({context:this.context,value:ee.frequency,units:"frequency"}),this.depth=new Signal({context:this.context,value:ee.depth,units:"normalRange"}),readOnly(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=ee.spread}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(ee){return this._lfoL.start(ee),this._lfoR.start(ee),this}stop(ee){return this._lfoL.stop(ee),this._lfoR.stop(ee),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(ee){this._lfoL.type=ee,this._lfoR.type=ee}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(ee){this._lfoL.phase=90-ee/2,this._lfoR.phase=ee/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Vibrato extends Effect{constructor(){super(optionsFromArguments(Vibrato.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";const ee=optionsFromArguments(Vibrato.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new Delay({context:this.context,delayTime:0,maxDelay:ee.maxDelay}),this._lfo=new LFO({context:this.context,type:ee.type,min:0,max:ee.maxDelay,frequency:ee.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=ee.depth,readOnly(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(Effect.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(ee){this._lfo.type=ee}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Analyser extends ToneAudioNode{constructor(){super(optionsFromArguments(Analyser.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const ee=optionsFromArguments(Analyser.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new Gain({context:this.context}),this._split=new Split({context:this.context,channels:ee.channels}),this.input.connect(this._split),assertRange(ee.channels,1);for(let ne=0;ne<ee.channels;ne++)this._analysers[ne]=this.context.createAnalyser(),this._split.connect(this._analysers[ne],ne,0);this.size=ee.size,this.type=ee.type}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach((ee,ne)=>{const ie=this._buffers[ne];this._type==="fft"?ee.getFloatFrequencyData(ie):this._type==="waveform"&&ee.getFloatTimeDomainData(ie)}),this.channels===1?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(ee){this._analysers.forEach((ne,ie)=>{ne.fftSize=ee*2,this._buffers[ie]=new Float32Array(ee)})}get channels(){return this._analysers.length}get type(){return this._type}set type(ee){assert(ee==="waveform"||ee==="fft",`Analyser: invalid type: ${ee}`),this._type=ee}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(ee){this._analysers.forEach(ne=>ne.smoothingTimeConstant=ee)}dispose(){return super.dispose(),this._analysers.forEach(ee=>ee.disconnect()),this._split.dispose(),this._gain.dispose(),this}}class MeterBase extends ToneAudioNode{constructor(){super(optionsFromArguments(MeterBase.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Analyser({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class Meter extends MeterBase{constructor(){super(optionsFromArguments(Meter.getDefaults(),arguments,["smoothing"])),this.name="Meter",this._rms=0;const ee=optionsFromArguments(Meter.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new Analyser({context:this.context,size:256,type:"waveform",channels:ee.channels}),this.smoothing=ee.smoothing,this.normalRange=ee.normalRange}static getDefaults(){return Object.assign(MeterBase.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return warn("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const ee=this._analyser.getValue(),ie=(this.channels===1?[ee]:ee).map(oe=>{const ae=oe.reduce((le,ue)=>le+ue*ue,0),ce=Math.sqrt(ae/oe.length);return this._rms=Math.max(ce,this._rms*this.smoothing),this.normalRange?this._rms:gainToDb(this._rms)});return this.channels===1?ie[0]:ie}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}let FFT$1=class ac extends MeterBase{constructor(){super(optionsFromArguments(ac.getDefaults(),arguments,["size"])),this.name="FFT";const ee=optionsFromArguments(ac.getDefaults(),arguments,["size"]);this.normalRange=ee.normalRange,this._analyser.type="fft",this.size=ee.size}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map(ne=>this.normalRange?dbToGain(ne):ne)}get size(){return this._analyser.size}set size(ee){this._analyser.size=ee}get smoothing(){return this._analyser.smoothing}set smoothing(ee){this._analyser.smoothing=ee}getFrequencyOfIndex(ee){return assert(0<=ee&&ee<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),ee*this.context.sampleRate/(this.size*2)}};class DCMeter extends MeterBase{constructor(){super(optionsFromArguments(DCMeter.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class Waveform extends MeterBase{constructor(){super(optionsFromArguments(Waveform.getDefaults(),arguments,["size"])),this.name="Waveform";const ee=optionsFromArguments(Waveform.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=ee.size}static getDefaults(){return Object.assign(MeterBase.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(ee){this._analyser.size=ee}}class Solo extends ToneAudioNode{constructor(){super(optionsFromArguments(Solo.getDefaults(),arguments,["solo"])),this.name="Solo";const ee=optionsFromArguments(Solo.getDefaults(),arguments,["solo"]);this.input=this.output=new Gain({context:this.context}),Solo._allSolos.has(this.context)||Solo._allSolos.set(this.context,new Set),Solo._allSolos.get(this.context).add(this),this.solo=ee.solo}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(ee){ee?this._addSolo():this._removeSolo(),Solo._allSolos.get(this.context).forEach(ne=>ne._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Solo._soloed.has(this.context)||Solo._soloed.set(this.context,new Set),Solo._soloed.get(this.context).add(this)}_removeSolo(){Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).delete(this)}_isSoloed(){return Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).has(this)}_noSolos(){return!Solo._soloed.has(this.context)||Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Solo._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Solo._allSolos=new Map;Solo._soloed=new Map;class PanVol extends ToneAudioNode{constructor(){super(optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const ee=optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Panner({context:this.context,pan:ee.pan,channelCount:ee.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Volume({context:this.context,volume:ee.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=ee.mute,readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(ee){this._volume.mute=ee}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Channel extends ToneAudioNode{constructor(){super(optionsFromArguments(Channel.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const ee=optionsFromArguments(Channel.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Solo({solo:ee.solo,context:this.context}),this._panVol=this.output=new PanVol({context:this.context,pan:ee.pan,volume:ee.volume,mute:ee.mute,channelCount:ee.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(ee){this._solo.solo=ee}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(ee){this._panVol.mute=ee}_getBus(ee){return Channel.buses.has(ee)||Channel.buses.set(ee,new Gain({context:this.context})),Channel.buses.get(ee)}send(ee,ne=0){const ie=this._getBus(ee),oe=new Gain({context:this.context,units:"decibels",gain:ne});return this.connect(oe),oe.connect(ie),oe}receive(ee){return this._getBus(ee).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Channel.buses=new Map;class Mono extends ToneAudioNode{constructor(){super(optionsFromArguments(Mono.getDefaults(),arguments)),this.name="Mono",this.input=new Gain({context:this.context}),this._merge=this.output=new Merge({channels:2,context:this.context}),this.input.connect(this._merge,0,0),this.input.connect(this._merge,0,1)}dispose(){return super.dispose(),this._merge.dispose(),this.input.dispose(),this}}class MultibandSplit extends ToneAudioNode{constructor(){super(optionsFromArguments(MultibandSplit.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new Gain({context:this.context}),this.output=void 0,this.low=new Filter({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Filter({context:this.context,frequency:0,type:"highpass"}),this.mid=new Filter({context:this.context,frequency:0,type:"lowpass"}),this.high=new Filter({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];const ee=optionsFromArguments(MultibandSplit.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new Signal({context:this.context,units:"frequency",value:ee.lowFrequency}),this.highFrequency=new Signal({context:this.context,units:"frequency",value:ee.highFrequency}),this.Q=new Signal({context:this.context,units:"positive",value:ee.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),readOnly(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),writable(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}let Listener$1=class extends ToneAudioNode{constructor(){super(...arguments),this.name="Listener",this.positionX=new Param({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Param({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Param({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Param({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Param({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Param({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Param({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Param({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Param({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}};onContextInit(re=>{re.listener=new Listener$1({context:re})});onContextClose(re=>{re.listener.dispose()});class Panner3D extends ToneAudioNode{constructor(){super(optionsFromArguments(Panner3D.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const ee=optionsFromArguments(Panner3D.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=ee.panningModel,this.maxDistance=ee.maxDistance,this.distanceModel=ee.distanceModel,this.coneOuterGain=ee.coneOuterGain,this.coneOuterAngle=ee.coneOuterAngle,this.coneInnerAngle=ee.coneInnerAngle,this.refDistance=ee.refDistance,this.rolloffFactor=ee.rolloffFactor,this.positionX=new Param({context:this.context,param:this._panner.positionX,value:ee.positionX}),this.positionY=new Param({context:this.context,param:this._panner.positionY,value:ee.positionY}),this.positionZ=new Param({context:this.context,param:this._panner.positionZ,value:ee.positionZ}),this.orientationX=new Param({context:this.context,param:this._panner.orientationX,value:ee.orientationX}),this.orientationY=new Param({context:this.context,param:this._panner.orientationY,value:ee.orientationY}),this.orientationZ=new Param({context:this.context,param:this._panner.orientationZ,value:ee.orientationZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(ee,ne,ie){return this.positionX.value=ee,this.positionY.value=ne,this.positionZ.value=ie,this}setOrientation(ee,ne,ie){return this.orientationX.value=ee,this.orientationY.value=ne,this.orientationZ.value=ie,this}get panningModel(){return this._panner.panningModel}set panningModel(ee){this._panner.panningModel=ee}get refDistance(){return this._panner.refDistance}set refDistance(ee){this._panner.refDistance=ee}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(ee){this._panner.rolloffFactor=ee}get distanceModel(){return this._panner.distanceModel}set distanceModel(ee){this._panner.distanceModel=ee}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(ee){this._panner.coneInnerAngle=ee}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(ee){this._panner.coneOuterAngle=ee}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(ee){this._panner.coneOuterGain=ee}get maxDistance(){return this._panner.maxDistance}set maxDistance(ee){this._panner.maxDistance=ee}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class Recorder extends ToneAudioNode{constructor(){super(optionsFromArguments(Recorder.getDefaults(),arguments)),this.name="Recorder";const ee=optionsFromArguments(Recorder.getDefaults(),arguments);this.input=new Gain({context:this.context}),assert(Recorder.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:ee.mimeType})}static getDefaults(){return ToneAudioNode.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return theWindow!==null&&Reflect.has(theWindow,"MediaRecorder")}get state(){return this._recorder.state==="inactive"?"stopped":this._recorder.state==="paused"?"paused":"started"}start(){return __awaiter$1(this,void 0,void 0,function*(){assert(this.state!=="started","Recorder is already started");const ee=new Promise(ne=>{const ie=()=>{this._recorder.removeEventListener("start",ie,!1),ne()};this._recorder.addEventListener("start",ie,!1)});return this._recorder.start(),yield ee})}stop(){return __awaiter$1(this,void 0,void 0,function*(){assert(this.state!=="stopped","Recorder is not started");const ee=new Promise(ne=>{const ie=oe=>{this._recorder.removeEventListener("dataavailable",ie,!1),ne(oe.data)};this._recorder.addEventListener("dataavailable",ie,!1)});return this._recorder.stop(),yield ee})}pause(){return assert(this.state==="started","Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}let Compressor$1=class cc extends ToneAudioNode{constructor(){super(optionsFromArguments(cc.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const ee=optionsFromArguments(cc.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new Param({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:ee.threshold}),this.attack=new Param({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:ee.attack}),this.release=new Param({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:ee.release}),this.knee=new Param({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:ee.knee}),this.ratio=new Param({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:ee.ratio}),readOnly(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}};class Gate extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Gate.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";const ee=optionsFromArguments(Gate.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new Follower({context:this.context,smoothing:ee.smoothing}),this._gt=new GreaterThan({context:this.context,value:dbToGain(ee.threshold)}),this.input=new Gain({context:this.context}),this._gate=this.output=new Gain({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return gainToDb(this._gt.value)}set threshold(ee){this._gt.value=dbToGain(ee)}get smoothing(){return this._follower.smoothing}set smoothing(ee){this._follower.smoothing=ee}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class Limiter extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const ee=optionsFromArguments(Limiter.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new Compressor$1({context:this.context,ratio:20,attack:.003,release:.01,threshold:ee.threshold}),this.threshold=this._compressor.threshold,readOnly(this,"threshold")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class MidSideCompressor extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(MidSideCompressor.getDefaults(),arguments))),this.name="MidSideCompressor";const ee=optionsFromArguments(MidSideCompressor.getDefaults(),arguments);this._midSideSplit=this.input=new MidSideSplit({context:this.context}),this._midSideMerge=this.output=new MidSideMerge({context:this.context}),this.mid=new Compressor$1(Object.assign(ee.mid,{context:this.context})),this.side=new Compressor$1(Object.assign(ee.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),readOnly(this,["mid","side"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class MultibandCompressor extends ToneAudioNode{constructor(){super(Object.assign(optionsFromArguments(MultibandCompressor.getDefaults(),arguments))),this.name="MultibandCompressor";const ee=optionsFromArguments(MultibandCompressor.getDefaults(),arguments);this._splitter=this.input=new MultibandSplit({context:this.context,lowFrequency:ee.lowFrequency,highFrequency:ee.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new Gain({context:this.context}),this.low=new Compressor$1(Object.assign(ee.low,{context:this.context})),this.mid=new Compressor$1(Object.assign(ee.mid,{context:this.context})),this.high=new Compressor$1(Object.assign(ee.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),readOnly(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class EQ3 extends ToneAudioNode{constructor(){super(optionsFromArguments(EQ3.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new Gain({context:this.context}),this._internalChannels=[];const ee=optionsFromArguments(EQ3.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new MultibandSplit({context:this.context,highFrequency:ee.highFrequency,lowFrequency:ee.lowFrequency}),this._lowGain=new Gain({context:this.context,gain:ee.low,units:"decibels"}),this._midGain=new Gain({context:this.context,gain:ee.mid,units:"decibels"}),this._highGain=new Gain({context:this.context,gain:ee.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),readOnly(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),writable(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class Convolver extends ToneAudioNode{constructor(){super(optionsFromArguments(Convolver.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();const ee=optionsFromArguments(Convolver.getDefaults(),arguments,["url","onload"]);this._buffer=new ToneAudioBuffer(ee.url,ne=>{this.buffer=ne,ee.onload()}),this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=ee.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{normalize:!0,onload:noOp})}load(ee){return __awaiter$1(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(ee)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(ee){ee&&this._buffer.set(ee),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const ne=this._buffer.get();this._convolver.buffer=ne||null}get normalize(){return this._convolver.normalize}set normalize(ee){this._convolver.normalize=ee}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function now(){return getContext().now()}function immediate(){return getContext().immediate()}const Transport=getContext().transport;function getTransport(){return getContext().transport}const Destination=getContext().destination,Master=getContext().destination;function getDestination(){return getContext().destination}const Listener=getContext().listener;function getListener(){return getContext().listener}const Draw=getContext().draw;function getDraw(){return getContext().draw}const context=getContext();function loaded(){return ToneAudioBuffer.loaded()}const Buffer$1=ToneAudioBuffer,Buffers=ToneAudioBuffers,BufferSource=ToneBufferSource,Tone=Object.freeze(Object.defineProperty({__proto__:null,AMOscillator,AMSynth,Abs,Add,AmplitudeEnvelope,Analyser,AudioToGain,AutoFilter,AutoPanner,AutoWah,BaseContext,BiquadFilter,BitCrusher,Buffer:Buffer$1,BufferSource,Buffers,Channel,Chebyshev,Chorus,Clock,Compressor:Compressor$1,Context,Convolver,CrossFade,DCMeter,Delay,Destination,Distortion,Draw,DuoSynth,EQ3,Emitter,Envelope,FFT:FFT$1,FMOscillator,FMSynth,FatOscillator,FeedbackCombFilter,FeedbackDelay,Filter,Follower,Freeverb,Frequency,FrequencyClass,FrequencyEnvelope,FrequencyShifter,Gain,GainToAudio,Gate,GrainPlayer,GreaterThan,GreaterThanZero,IntervalTimeline,JCReverb,LFO,Limiter,Listener,Loop,LowpassCombFilter,Master,MembraneSynth,Merge,MetalSynth,Meter,MidSideCompressor,MidSideMerge,MidSideSplit,Midi:Midi$1,MidiClass,Mono,MonoSynth,MultibandCompressor,MultibandSplit,Multiply,Negate,Noise,NoiseSynth,Offline,OfflineContext,OmniOscillator,OnePoleFilter,Oscillator,PWMOscillator,PanVol,Panner,Panner3D,Param,Part,Pattern,Phaser,PingPongDelay,PitchShift,Player:Player$1,Players,PluckSynth,PolySynth,Pow,PulseOscillator,Recorder,Reverb,Sampler,Scale,ScaleExp,Sequence,Signal,Solo,Split,StateTimeline,StereoWidener,Subtract,SyncedSignal,Synth,Ticks,TicksClass,Time,TimeClass,Timeline,ToneAudioBuffer,ToneAudioBuffers,ToneAudioNode,ToneBufferSource,ToneEvent,ToneOscillatorNode,Transport,TransportTime,TransportTimeClass,Tremolo,Unit:Units,UserMedia,Vibrato,Volume,WaveShaper,Waveform,Zero,connect,connectSeries,connectSignal,context,dbToGain,debug:Debug,defaultArg,disconnect,ftom,gainToDb,getContext,getDestination,getDraw,getListener,getTransport,immediate,intervalToFrequencyRatio,isArray:isArray$8,isBoolean:isBoolean$1,isDefined,isFunction:isFunction$2,isNote,isNumber:isNumber$2,isObject:isObject$4,isString:isString$1,isUndef,loaded,mtof,now,optionsFromArguments,setContext,start,supported:isSupported,version},Symbol.toStringTag,{value:"Module"}));var Midi={},midiFile={};function parseMidi(re){var ee=new Parser(re),ne=ee.readChunk();if(ne.id!="MThd")throw"Bad MIDI file.  Expected 'MHdr', got: '"+ne.id+"'";for(var ie=parseHeader(ne.data),oe=[],ae=0;!ee.eof()&&ae<ie.numTracks;ae++){var ce=ee.readChunk();if(ce.id!="MTrk")throw"Bad MIDI file.  Expected 'MTrk', got: '"+ce.id+"'";var le=parseTrack(ce.data);oe.push(le)}return{header:ie,tracks:oe}}function parseHeader(re){var ee=new Parser(re),ne=ee.readUInt16(),ie=ee.readUInt16(),oe={format:ne,numTracks:ie},ae=ee.readUInt16();return ae&32768?(oe.framesPerSecond=256-(ae>>8),oe.ticksPerFrame=ae&255):oe.ticksPerBeat=ae,oe}function parseTrack(re){for(var ee=new Parser(re),ne=[];!ee.eof();){var ie=ae();ne.push(ie)}return ne;var oe;function ae(){var ce={};ce.deltaTime=ee.readVarInt();var le=ee.readUInt8();if((le&240)===240)if(le===255){ce.meta=!0;var ue=ee.readUInt8(),he=ee.readVarInt();switch(ue){case 0:if(ce.type="sequenceNumber",he!==2)throw"Expected length for sequenceNumber event is 2, got "+he;return ce.number=ee.readUInt16(),ce;case 1:return ce.type="text",ce.text=ee.readString(he),ce;case 2:return ce.type="copyrightNotice",ce.text=ee.readString(he),ce;case 3:return ce.type="trackName",ce.text=ee.readString(he),ce;case 4:return ce.type="instrumentName",ce.text=ee.readString(he),ce;case 5:return ce.type="lyrics",ce.text=ee.readString(he),ce;case 6:return ce.type="marker",ce.text=ee.readString(he),ce;case 7:return ce.type="cuePoint",ce.text=ee.readString(he),ce;case 32:if(ce.type="channelPrefix",he!=1)throw"Expected length for channelPrefix event is 1, got "+he;return ce.channel=ee.readUInt8(),ce;case 33:if(ce.type="portPrefix",he!=1)throw"Expected length for portPrefix event is 1, got "+he;return ce.port=ee.readUInt8(),ce;case 47:if(ce.type="endOfTrack",he!=0)throw"Expected length for endOfTrack event is 0, got "+he;return ce;case 81:if(ce.type="setTempo",he!=3)throw"Expected length for setTempo event is 3, got "+he;return ce.microsecondsPerBeat=ee.readUInt24(),ce;case 84:if(ce.type="smpteOffset",he!=5)throw"Expected length for smpteOffset event is 5, got "+he;var fe=ee.readUInt8(),me={0:24,32:25,64:29,96:30};return ce.frameRate=me[fe&96],ce.hour=fe&31,ce.min=ee.readUInt8(),ce.sec=ee.readUInt8(),ce.frame=ee.readUInt8(),ce.subFrame=ee.readUInt8(),ce;case 88:if(ce.type="timeSignature",he!=2&&he!=4)throw"Expected length for timeSignature event is 4 or 2, got "+he;return ce.numerator=ee.readUInt8(),ce.denominator=1<<ee.readUInt8(),he===4?(ce.metronome=ee.readUInt8(),ce.thirtyseconds=ee.readUInt8()):(ce.metronome=36,ce.thirtyseconds=8),ce;case 89:if(ce.type="keySignature",he!=2)throw"Expected length for keySignature event is 2, got "+he;return ce.key=ee.readInt8(),ce.scale=ee.readUInt8(),ce;case 127:return ce.type="sequencerSpecific",ce.data=ee.readBytes(he),ce;default:return ce.type="unknownMeta",ce.data=ee.readBytes(he),ce.metatypeByte=ue,ce}}else if(le==240){ce.type="sysEx";var he=ee.readVarInt();return ce.data=ee.readBytes(he),ce}else if(le==247){ce.type="endSysEx";var he=ee.readVarInt();return ce.data=ee.readBytes(he),ce}else throw"Unrecognised MIDI event type byte: "+le;else{var ge;if(le&128)ge=ee.readUInt8(),oe=le;else{if(oe===null)throw"Running status byte encountered before status byte";ge=le,le=oe,ce.running=!0}var ve=le>>4;switch(ce.channel=le&15,ve){case 8:return ce.type="noteOff",ce.noteNumber=ge,ce.velocity=ee.readUInt8(),ce;case 9:var ye=ee.readUInt8();return ce.type=ye===0?"noteOff":"noteOn",ce.noteNumber=ge,ce.velocity=ye,ye===0&&(ce.byte9=!0),ce;case 10:return ce.type="noteAftertouch",ce.noteNumber=ge,ce.amount=ee.readUInt8(),ce;case 11:return ce.type="controller",ce.controllerType=ge,ce.value=ee.readUInt8(),ce;case 12:return ce.type="programChange",ce.programNumber=ge,ce;case 13:return ce.type="channelAftertouch",ce.amount=ge,ce;case 14:return ce.type="pitchBend",ce.value=ge+(ee.readUInt8()<<7)-8192,ce;default:throw"Unrecognised MIDI event type: "+ve}}}}function Parser(re){this.buffer=re,this.bufferLen=this.buffer.length,this.pos=0}Parser.prototype.eof=function(){return this.pos>=this.bufferLen};Parser.prototype.readUInt8=function(){var re=this.buffer[this.pos];return this.pos+=1,re};Parser.prototype.readInt8=function(){var re=this.readUInt8();return re&128?re-256:re};Parser.prototype.readUInt16=function(){var re=this.readUInt8(),ee=this.readUInt8();return(re<<8)+ee};Parser.prototype.readInt16=function(){var re=this.readUInt16();return re&32768?re-65536:re};Parser.prototype.readUInt24=function(){var re=this.readUInt8(),ee=this.readUInt8(),ne=this.readUInt8();return(re<<16)+(ee<<8)+ne};Parser.prototype.readInt24=function(){var re=this.readUInt24();return re&8388608?re-16777216:re};Parser.prototype.readUInt32=function(){var re=this.readUInt8(),ee=this.readUInt8(),ne=this.readUInt8(),ie=this.readUInt8();return(re<<24)+(ee<<16)+(ne<<8)+ie};Parser.prototype.readBytes=function(re){var ee=this.buffer.slice(this.pos,this.pos+re);return this.pos+=re,ee};Parser.prototype.readString=function(re){var ee=this.readBytes(re);return String.fromCharCode.apply(null,ee)};Parser.prototype.readVarInt=function(){for(var re=0;!this.eof();){var ee=this.readUInt8();if(ee&128)re+=ee&127,re<<=7;else return re+ee}return re};Parser.prototype.readChunk=function(){var re=this.readString(4),ee=this.readUInt32(),ne=this.readBytes(ee);return{id:re,length:ee,data:ne}};var midiParser=parseMidi;function writeMidi(re,ee){if(typeof re!="object")throw"Invalid MIDI data";ee=ee||{};var ne=re.header||{},ie=re.tracks||[],oe,ae=ie.length,ce=new Writer;for(writeHeader(ce,ne,ae),oe=0;oe<ae;oe++)writeTrack(ce,ie[oe],ee);return ce.buffer}function writeHeader(re,ee,ne){var ie=ee.format==null?1:ee.format,oe=128;ee.timeDivision?oe=ee.timeDivision:ee.ticksPerFrame&&ee.framesPerSecond?oe=-(ee.framesPerSecond&255)<<8|ee.ticksPerFrame&255:ee.ticksPerBeat&&(oe=ee.ticksPerBeat&32767);var ae=new Writer;ae.writeUInt16(ie),ae.writeUInt16(ne),ae.writeUInt16(oe),re.writeChunk("MThd",ae.buffer)}function writeTrack(re,ee,ne){var ie=new Writer,oe,ae=ee.length,ce=null;for(oe=0;oe<ae;oe++)(ne.running===!1||!ne.running&&!ee[oe].running)&&(ce=null),ce=writeEvent(ie,ee[oe],ce,ne.useByte9ForNoteOff);re.writeChunk("MTrk",ie.buffer)}function writeEvent(re,ee,ne,ie){var oe=ee.type,ae=ee.deltaTime,ce=ee.text||"",le=ee.data||[],ue=null;switch(re.writeVarInt(ae),oe){case"sequenceNumber":re.writeUInt8(255),re.writeUInt8(0),re.writeVarInt(2),re.writeUInt16(ee.number);break;case"text":re.writeUInt8(255),re.writeUInt8(1),re.writeVarInt(ce.length),re.writeString(ce);break;case"copyrightNotice":re.writeUInt8(255),re.writeUInt8(2),re.writeVarInt(ce.length),re.writeString(ce);break;case"trackName":re.writeUInt8(255),re.writeUInt8(3),re.writeVarInt(ce.length),re.writeString(ce);break;case"instrumentName":re.writeUInt8(255),re.writeUInt8(4),re.writeVarInt(ce.length),re.writeString(ce);break;case"lyrics":re.writeUInt8(255),re.writeUInt8(5),re.writeVarInt(ce.length),re.writeString(ce);break;case"marker":re.writeUInt8(255),re.writeUInt8(6),re.writeVarInt(ce.length),re.writeString(ce);break;case"cuePoint":re.writeUInt8(255),re.writeUInt8(7),re.writeVarInt(ce.length),re.writeString(ce);break;case"channelPrefix":re.writeUInt8(255),re.writeUInt8(32),re.writeVarInt(1),re.writeUInt8(ee.channel);break;case"portPrefix":re.writeUInt8(255),re.writeUInt8(33),re.writeVarInt(1),re.writeUInt8(ee.port);break;case"endOfTrack":re.writeUInt8(255),re.writeUInt8(47),re.writeVarInt(0);break;case"setTempo":re.writeUInt8(255),re.writeUInt8(81),re.writeVarInt(3),re.writeUInt24(ee.microsecondsPerBeat);break;case"smpteOffset":re.writeUInt8(255),re.writeUInt8(84),re.writeVarInt(5);var he={24:0,25:32,29:64,30:96},fe=ee.hour&31|he[ee.frameRate];re.writeUInt8(fe),re.writeUInt8(ee.min),re.writeUInt8(ee.sec),re.writeUInt8(ee.frame),re.writeUInt8(ee.subFrame);break;case"timeSignature":re.writeUInt8(255),re.writeUInt8(88),re.writeVarInt(4),re.writeUInt8(ee.numerator);var me=Math.floor(Math.log(ee.denominator)/Math.LN2)&255;re.writeUInt8(me),re.writeUInt8(ee.metronome),re.writeUInt8(ee.thirtyseconds||8);break;case"keySignature":re.writeUInt8(255),re.writeUInt8(89),re.writeVarInt(2),re.writeInt8(ee.key),re.writeUInt8(ee.scale);break;case"sequencerSpecific":re.writeUInt8(255),re.writeUInt8(127),re.writeVarInt(le.length),re.writeBytes(le);break;case"unknownMeta":ee.metatypeByte!=null&&(re.writeUInt8(255),re.writeUInt8(ee.metatypeByte),re.writeVarInt(le.length),re.writeBytes(le));break;case"sysEx":re.writeUInt8(240),re.writeVarInt(le.length),re.writeBytes(le);break;case"endSysEx":re.writeUInt8(247),re.writeVarInt(le.length),re.writeBytes(le);break;case"noteOff":var ge=ie!==!1&&ee.byte9||ie&&ee.velocity==0?144:128;ue=ge|ee.channel,ue!==ne&&re.writeUInt8(ue),re.writeUInt8(ee.noteNumber),re.writeUInt8(ee.velocity);break;case"noteOn":ue=144|ee.channel,ue!==ne&&re.writeUInt8(ue),re.writeUInt8(ee.noteNumber),re.writeUInt8(ee.velocity);break;case"noteAftertouch":ue=160|ee.channel,ue!==ne&&re.writeUInt8(ue),re.writeUInt8(ee.noteNumber),re.writeUInt8(ee.amount);break;case"controller":ue=176|ee.channel,ue!==ne&&re.writeUInt8(ue),re.writeUInt8(ee.controllerType),re.writeUInt8(ee.value);break;case"programChange":ue=192|ee.channel,ue!==ne&&re.writeUInt8(ue),re.writeUInt8(ee.programNumber);break;case"channelAftertouch":ue=208|ee.channel,ue!==ne&&re.writeUInt8(ue),re.writeUInt8(ee.amount);break;case"pitchBend":ue=224|ee.channel,ue!==ne&&re.writeUInt8(ue);var ve=8192+ee.value,ye=ve&127,be=ve>>7&127;re.writeUInt8(ye),re.writeUInt8(be);break;default:throw"Unrecognized event type: "+oe}return ue}function Writer(){this.buffer=[]}Writer.prototype.writeUInt8=function(re){this.buffer.push(re&255)};Writer.prototype.writeInt8=Writer.prototype.writeUInt8;Writer.prototype.writeUInt16=function(re){var ee=re>>8&255,ne=re&255;this.writeUInt8(ee),this.writeUInt8(ne)};Writer.prototype.writeInt16=Writer.prototype.writeUInt16;Writer.prototype.writeUInt24=function(re){var ee=re>>16&255,ne=re>>8&255,ie=re&255;this.writeUInt8(ee),this.writeUInt8(ne),this.writeUInt8(ie)};Writer.prototype.writeInt24=Writer.prototype.writeUInt24;Writer.prototype.writeUInt32=function(re){var ee=re>>24&255,ne=re>>16&255,ie=re>>8&255,oe=re&255;this.writeUInt8(ee),this.writeUInt8(ne),this.writeUInt8(ie),this.writeUInt8(oe)};Writer.prototype.writeInt32=Writer.prototype.writeUInt32;Writer.prototype.writeBytes=function(re){this.buffer=this.buffer.concat(Array.prototype.slice.call(re,0))};Writer.prototype.writeString=function(re){var ee,ne=re.length,ie=[];for(ee=0;ee<ne;ee++)ie.push(re.codePointAt(ee));this.writeBytes(ie)};Writer.prototype.writeVarInt=function(re){if(re<0)throw"Cannot write negative variable-length integer";if(re<=127)this.writeUInt8(re);else{var ee=re,ne=[];for(ne.push(ee&127),ee>>=7;ee;){var ie=ee&127|128;ne.push(ie),ee>>=7}this.writeBytes(ne.reverse())}};Writer.prototype.writeChunk=function(re,ee){this.writeString(re),this.writeUInt32(ee.length),this.writeBytes(ee)};var midiWriter=writeMidi;midiFile.parseMidi=midiParser;midiFile.writeMidi=midiWriter;var Header$1={},BinarySearch={};Object.defineProperty(BinarySearch,"__esModule",{value:!0});BinarySearch.insert=BinarySearch.search=void 0;function search(re,ee,ne){ne===void 0&&(ne="ticks");var ie=0,oe=re.length,ae=oe;if(oe>0&&re[oe-1][ne]<=ee)return oe-1;for(;ie<ae;){var ce=Math.floor(ie+(ae-ie)/2),le=re[ce],ue=re[ce+1];if(le[ne]===ee){for(var he=ce;he<re.length;he++){var fe=re[he];fe[ne]===ee&&(ce=he)}return ce}else{if(le[ne]<ee&&ue[ne]>ee)return ce;le[ne]>ee?ae=ce:le[ne]<ee&&(ie=ce+1)}}return-1}BinarySearch.search=search;function insert(re,ee,ne){if(ne===void 0&&(ne="ticks"),re.length){var ie=search(re,ee[ne],ne);re.splice(ie+1,0,ee)}else re.push(ee)}BinarySearch.insert=insert;(function(re){Object.defineProperty(re,"__esModule",{value:!0}),re.Header=re.keySignatureKeys=void 0;var ee=BinarySearch,ne=new WeakMap;re.keySignatureKeys=["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#"];var ie=function(){function oe(ae){var ce=this;if(this.tempos=[],this.timeSignatures=[],this.keySignatures=[],this.meta=[],this.name="",ne.set(this,480),ae){ne.set(this,ae.header.ticksPerBeat),ae.tracks.forEach(function(ue){ue.forEach(function(he){he.meta&&(he.type==="timeSignature"?ce.timeSignatures.push({ticks:he.absoluteTime,timeSignature:[he.numerator,he.denominator]}):he.type==="setTempo"?ce.tempos.push({bpm:6e7/he.microsecondsPerBeat,ticks:he.absoluteTime}):he.type==="keySignature"&&ce.keySignatures.push({key:re.keySignatureKeys[he.key+7],scale:he.scale===0?"major":"minor",ticks:he.absoluteTime}))})});var le=0;ae.tracks[0].forEach(function(ue){le+=ue.deltaTime,ue.meta&&(ue.type==="trackName"?ce.name=ue.text:(ue.type==="text"||ue.type==="cuePoint"||ue.type==="marker"||ue.type==="lyrics")&&ce.meta.push({text:ue.text,ticks:le,type:ue.type}))}),this.update()}}return oe.prototype.update=function(){var ae=this,ce=0,le=0;this.tempos.sort(function(ue,he){return ue.ticks-he.ticks}),this.tempos.forEach(function(ue,he){var fe=he>0?ae.tempos[he-1].bpm:ae.tempos[0].bpm,me=ue.ticks/ae.ppq-le,ge=60/fe*me;ue.time=ge+ce,ce=ue.time,le+=me}),this.timeSignatures.sort(function(ue,he){return ue.ticks-he.ticks}),this.timeSignatures.forEach(function(ue,he){var fe=he>0?ae.timeSignatures[he-1]:ae.timeSignatures[0],me=(ue.ticks-fe.ticks)/ae.ppq,ge=me/fe.timeSignature[0]/(fe.timeSignature[1]/4);fe.measures=fe.measures||0,ue.measures=ge+fe.measures})},oe.prototype.ticksToSeconds=function(ae){var ce=(0,ee.search)(this.tempos,ae);if(ce!==-1){var le=this.tempos[ce],ue=le.time,he=(ae-le.ticks)/this.ppq;return ue+60/le.bpm*he}else{var fe=ae/this.ppq;return 60/120*fe}},oe.prototype.ticksToMeasures=function(ae){var ce=(0,ee.search)(this.timeSignatures,ae);if(ce!==-1){var le=this.timeSignatures[ce],ue=(ae-le.ticks)/this.ppq;return le.measures+ue/(le.timeSignature[0]/le.timeSignature[1])/4}else return ae/this.ppq/4},Object.defineProperty(oe.prototype,"ppq",{get:function(){return ne.get(this)},enumerable:!1,configurable:!0}),oe.prototype.secondsToTicks=function(ae){var ce=(0,ee.search)(this.tempos,ae,"time");if(ce!==-1){var le=this.tempos[ce],ue=le.time,he=ae-ue,fe=he/(60/le.bpm);return Math.round(le.ticks+fe*this.ppq)}else{var me=ae/.5;return Math.round(me*this.ppq)}},oe.prototype.toJSON=function(){return{keySignatures:this.keySignatures,meta:this.meta,name:this.name,ppq:this.ppq,tempos:this.tempos.map(function(ae){return{bpm:ae.bpm,ticks:ae.ticks}}),timeSignatures:this.timeSignatures}},oe.prototype.fromJSON=function(ae){this.name=ae.name,this.tempos=ae.tempos.map(function(ce){return Object.assign({},ce)}),this.timeSignatures=ae.timeSignatures.map(function(ce){return Object.assign({},ce)}),this.keySignatures=ae.keySignatures.map(function(ce){return Object.assign({},ce)}),this.meta=ae.meta.map(function(ce){return Object.assign({},ce)}),ne.set(this,ae.ppq),this.update()},oe.prototype.setTempo=function(ae){this.tempos=[{bpm:ae,ticks:0}],this.update()},oe}();re.Header=ie})(Header$1);var Track$1={},ControlChange={};(function(re){Object.defineProperty(re,"__esModule",{value:!0}),re.ControlChange=re.controlChangeIds=re.controlChangeNames=void 0,re.controlChangeNames={1:"modulationWheel",2:"breath",4:"footController",5:"portamentoTime",7:"volume",8:"balance",10:"pan",64:"sustain",65:"portamentoTime",66:"sostenuto",67:"softPedal",68:"legatoFootswitch",84:"portamentoControl"},re.controlChangeIds=Object.keys(re.controlChangeNames).reduce(function(oe,ae){return oe[re.controlChangeNames[ae]]=ae,oe},{});var ee=new WeakMap,ne=new WeakMap,ie=function(){function oe(ae,ce){ee.set(this,ce),ne.set(this,ae.controllerType),this.ticks=ae.absoluteTime,this.value=ae.value}return Object.defineProperty(oe.prototype,"number",{get:function(){return ne.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"name",{get:function(){return re.controlChangeNames[this.number]?re.controlChangeNames[this.number]:null},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"time",{get:function(){var ae=ee.get(this);return ae.ticksToSeconds(this.ticks)},set:function(ae){var ce=ee.get(this);this.ticks=ce.secondsToTicks(ae)},enumerable:!1,configurable:!0}),oe.prototype.toJSON=function(){return{number:this.number,ticks:this.ticks,time:this.time,value:this.value}},oe}();re.ControlChange=ie})(ControlChange);var ControlChanges={};Object.defineProperty(ControlChanges,"__esModule",{value:!0});ControlChanges.createControlChanges=void 0;var ControlChange_1$1=ControlChange;function createControlChanges(){return new Proxy({},{get:function(re,ee){if(re[ee])return re[ee];if(ControlChange_1$1.controlChangeIds.hasOwnProperty(ee))return re[ControlChange_1$1.controlChangeIds[ee]]},set:function(re,ee,ne){return ControlChange_1$1.controlChangeIds.hasOwnProperty(ee)?re[ControlChange_1$1.controlChangeIds[ee]]=ne:re[ee]=ne,!0}})}ControlChanges.createControlChanges=createControlChanges;var PitchBend$1={};Object.defineProperty(PitchBend$1,"__esModule",{value:!0});PitchBend$1.PitchBend=void 0;var privateHeaderMap$2=new WeakMap,PitchBend=function(){function re(ee,ne){privateHeaderMap$2.set(this,ne),this.ticks=ee.absoluteTime,this.value=ee.value}return Object.defineProperty(re.prototype,"time",{get:function(){var ee=privateHeaderMap$2.get(this);return ee.ticksToSeconds(this.ticks)},set:function(ee){var ne=privateHeaderMap$2.get(this);this.ticks=ne.secondsToTicks(ee)},enumerable:!1,configurable:!0}),re.prototype.toJSON=function(){return{ticks:this.ticks,time:this.time,value:this.value}},re}();PitchBend$1.PitchBend=PitchBend;var Instrument$2={},InstrumentMaps={};Object.defineProperty(InstrumentMaps,"__esModule",{value:!0});InstrumentMaps.DrumKitByPatchID=InstrumentMaps.InstrumentFamilyByID=InstrumentMaps.instrumentByPatchID=void 0;InstrumentMaps.instrumentByPatchID=["acoustic grand piano","bright acoustic piano","electric grand piano","honky-tonk piano","electric piano 1","electric piano 2","harpsichord","clavi","celesta","glockenspiel","music box","vibraphone","marimba","xylophone","tubular bells","dulcimer","drawbar organ","percussive organ","rock organ","church organ","reed organ","accordion","harmonica","tango accordion","acoustic guitar (nylon)","acoustic guitar (steel)","electric guitar (jazz)","electric guitar (clean)","electric guitar (muted)","overdriven guitar","distortion guitar","guitar harmonics","acoustic bass","electric bass (finger)","electric bass (pick)","fretless bass","slap bass 1","slap bass 2","synth bass 1","synth bass 2","violin","viola","cello","contrabass","tremolo strings","pizzicato strings","orchestral harp","timpani","string ensemble 1","string ensemble 2","synthstrings 1","synthstrings 2","choir aahs","voice oohs","synth voice","orchestra hit","trumpet","trombone","tuba","muted trumpet","french horn","brass section","synthbrass 1","synthbrass 2","soprano sax","alto sax","tenor sax","baritone sax","oboe","english horn","bassoon","clarinet","piccolo","flute","recorder","pan flute","blown bottle","shakuhachi","whistle","ocarina","lead 1 (square)","lead 2 (sawtooth)","lead 3 (calliope)","lead 4 (chiff)","lead 5 (charang)","lead 6 (voice)","lead 7 (fifths)","lead 8 (bass + lead)","pad 1 (new age)","pad 2 (warm)","pad 3 (polysynth)","pad 4 (choir)","pad 5 (bowed)","pad 6 (metallic)","pad 7 (halo)","pad 8 (sweep)","fx 1 (rain)","fx 2 (soundtrack)","fx 3 (crystal)","fx 4 (atmosphere)","fx 5 (brightness)","fx 6 (goblins)","fx 7 (echoes)","fx 8 (sci-fi)","sitar","banjo","shamisen","koto","kalimba","bag pipe","fiddle","shanai","tinkle bell","agogo","steel drums","woodblock","taiko drum","melodic tom","synth drum","reverse cymbal","guitar fret noise","breath noise","seashore","bird tweet","telephone ring","helicopter","applause","gunshot"];InstrumentMaps.InstrumentFamilyByID=["piano","chromatic percussion","organ","guitar","bass","strings","ensemble","brass","reed","pipe","synth lead","synth pad","synth effects","world","percussive","sound effects"];InstrumentMaps.DrumKitByPatchID={0:"standard kit",8:"room kit",16:"power kit",24:"electronic kit",25:"tr-808 kit",32:"jazz kit",40:"brush kit",48:"orchestra kit",56:"sound fx kit"};Object.defineProperty(Instrument$2,"__esModule",{value:!0});Instrument$2.Instrument=void 0;var InstrumentMaps_1=InstrumentMaps,privateTrackMap=new WeakMap,Instrument$1=function(){function re(ee,ne){if(this.number=0,privateTrackMap.set(this,ne),this.number=0,ee){var ie=ee.find(function(oe){return oe.type==="programChange"});ie&&(this.number=ie.programNumber)}}return Object.defineProperty(re.prototype,"name",{get:function(){return this.percussion?InstrumentMaps_1.DrumKitByPatchID[this.number]:InstrumentMaps_1.instrumentByPatchID[this.number]},set:function(ee){var ne=InstrumentMaps_1.instrumentByPatchID.indexOf(ee);ne!==-1&&(this.number=ne)},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"family",{get:function(){return this.percussion?"drums":InstrumentMaps_1.InstrumentFamilyByID[Math.floor(this.number/8)]},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"percussion",{get:function(){var ee=privateTrackMap.get(this);return ee.channel===9},enumerable:!1,configurable:!0}),re.prototype.toJSON=function(){return{family:this.family,number:this.number,name:this.name}},re.prototype.fromJSON=function(ee){this.number=ee.number},re}();Instrument$2.Instrument=Instrument$1;var Note$1={};Object.defineProperty(Note$1,"__esModule",{value:!0});Note$1.Note=void 0;function midiToPitch(re){var ee=Math.floor(re/12)-1;return midiToPitchClass(re)+ee.toString()}function midiToPitchClass(re){var ee=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],ne=re%12;return ee[ne]}function pitchClassToMidi(re){var ee=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];return ee.indexOf(re)}var pitchToMidi=function(){var re=/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,ee={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13};return function(ne){var ie=re.exec(ne),oe=ie[1],ae=ie[2],ce=ee[oe.toLowerCase()];return ce+(parseInt(ae,10)+1)*12}}(),privateHeaderMap$1=new WeakMap,Note=function(){function re(ee,ne,ie){privateHeaderMap$1.set(this,ie),this.midi=ee.midi,this.velocity=ee.velocity,this.noteOffVelocity=ne.velocity,this.ticks=ee.ticks,this.durationTicks=ne.ticks-ee.ticks}return Object.defineProperty(re.prototype,"name",{get:function(){return midiToPitch(this.midi)},set:function(ee){this.midi=pitchToMidi(ee)},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"octave",{get:function(){return Math.floor(this.midi/12)-1},set:function(ee){var ne=ee-this.octave;this.midi+=ne*12},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"pitch",{get:function(){return midiToPitchClass(this.midi)},set:function(ee){this.midi=12*(this.octave+1)+pitchClassToMidi(ee)},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"duration",{get:function(){var ee=privateHeaderMap$1.get(this);return ee.ticksToSeconds(this.ticks+this.durationTicks)-ee.ticksToSeconds(this.ticks)},set:function(ee){var ne=privateHeaderMap$1.get(this),ie=ne.secondsToTicks(this.time+ee);this.durationTicks=ie-this.ticks},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"time",{get:function(){var ee=privateHeaderMap$1.get(this);return ee.ticksToSeconds(this.ticks)},set:function(ee){var ne=privateHeaderMap$1.get(this);this.ticks=ne.secondsToTicks(ee)},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"bars",{get:function(){var ee=privateHeaderMap$1.get(this);return ee.ticksToMeasures(this.ticks)},enumerable:!1,configurable:!0}),re.prototype.toJSON=function(){return{duration:this.duration,durationTicks:this.durationTicks,midi:this.midi,name:this.name,ticks:this.ticks,time:this.time,velocity:this.velocity}},re}();Note$1.Note=Note;Object.defineProperty(Track$1,"__esModule",{value:!0});Track$1.Track=void 0;var BinarySearch_1=BinarySearch,ControlChange_1=ControlChange,ControlChanges_1=ControlChanges,PitchBend_1=PitchBend$1,Instrument_1=Instrument$2,Note_1=Note$1,privateHeaderMap=new WeakMap,Track=function(){function re(ee,ne){var ie=this;if(this.name="",this.notes=[],this.controlChanges=(0,ControlChanges_1.createControlChanges)(),this.pitchBends=[],privateHeaderMap.set(this,ne),ee){var oe=ee.find(function(ge){return ge.type==="trackName"});this.name=oe?oe.text:""}if(this.instrument=new Instrument_1.Instrument(ee,this),this.channel=0,ee){for(var ae=ee.filter(function(ge){return ge.type==="noteOn"}),ce=ee.filter(function(ge){return ge.type==="noteOff"}),le=function(){var ge=ae.shift();ue.channel=ge.channel;var ve=ce.findIndex(function(be){return be.noteNumber===ge.noteNumber&&be.absoluteTime>=ge.absoluteTime});if(ve!==-1){var ye=ce.splice(ve,1)[0];ue.addNote({durationTicks:ye.absoluteTime-ge.absoluteTime,midi:ge.noteNumber,noteOffVelocity:ye.velocity/127,ticks:ge.absoluteTime,velocity:ge.velocity/127})}},ue=this;ae.length;)le();var he=ee.filter(function(ge){return ge.type==="controller"});he.forEach(function(ge){ie.addCC({number:ge.controllerType,ticks:ge.absoluteTime,value:ge.value/127})});var fe=ee.filter(function(ge){return ge.type==="pitchBend"});fe.forEach(function(ge){ie.addPitchBend({ticks:ge.absoluteTime,value:ge.value/Math.pow(2,13)})});var me=ee.find(function(ge){return ge.type==="endOfTrack"});this.endOfTrackTicks=me!==void 0?me.absoluteTime:void 0}}return re.prototype.addNote=function(ee){var ne=privateHeaderMap.get(this),ie=new Note_1.Note({midi:0,ticks:0,velocity:1},{ticks:0,velocity:0},ne);return Object.assign(ie,ee),(0,BinarySearch_1.insert)(this.notes,ie,"ticks"),this},re.prototype.addCC=function(ee){var ne=privateHeaderMap.get(this),ie=new ControlChange_1.ControlChange({controllerType:ee.number},ne);return delete ee.number,Object.assign(ie,ee),Array.isArray(this.controlChanges[ie.number])||(this.controlChanges[ie.number]=[]),(0,BinarySearch_1.insert)(this.controlChanges[ie.number],ie,"ticks"),this},re.prototype.addPitchBend=function(ee){var ne=privateHeaderMap.get(this),ie=new PitchBend_1.PitchBend({},ne);return Object.assign(ie,ee),(0,BinarySearch_1.insert)(this.pitchBends,ie,"ticks"),this},Object.defineProperty(re.prototype,"duration",{get:function(){if(!this.notes.length)return 0;for(var ee=this.notes[this.notes.length-1].time+this.notes[this.notes.length-1].duration,ne=0;ne<this.notes.length-1;ne++){var ie=this.notes[ne].time+this.notes[ne].duration;ee<ie&&(ee=ie)}return ee},enumerable:!1,configurable:!0}),Object.defineProperty(re.prototype,"durationTicks",{get:function(){if(!this.notes.length)return 0;for(var ee=this.notes[this.notes.length-1].ticks+this.notes[this.notes.length-1].durationTicks,ne=0;ne<this.notes.length-1;ne++){var ie=this.notes[ne].ticks+this.notes[ne].durationTicks;ee<ie&&(ee=ie)}return ee},enumerable:!1,configurable:!0}),re.prototype.fromJSON=function(ee){var ne=this;this.name=ee.name,this.channel=ee.channel,this.instrument=new Instrument_1.Instrument(void 0,this),this.instrument.fromJSON(ee.instrument),ee.endOfTrackTicks!==void 0&&(this.endOfTrackTicks=ee.endOfTrackTicks);for(var ie in ee.controlChanges)ee.controlChanges[ie]&&ee.controlChanges[ie].forEach(function(oe){ne.addCC({number:oe.number,ticks:oe.ticks,value:oe.value})});ee.notes.forEach(function(oe){ne.addNote({durationTicks:oe.durationTicks,midi:oe.midi,ticks:oe.ticks,velocity:oe.velocity})})},re.prototype.toJSON=function(){for(var ee={},ne=0;ne<127;ne++)this.controlChanges.hasOwnProperty(ne)&&(ee[ne]=this.controlChanges[ne].map(function(oe){return oe.toJSON()}));var ie={channel:this.channel,controlChanges:ee,pitchBends:this.pitchBends.map(function(oe){return oe.toJSON()}),instrument:this.instrument.toJSON(),name:this.name,notes:this.notes.map(function(oe){return oe.toJSON()})};return this.endOfTrackTicks!==void 0&&(ie.endOfTrackTicks=this.endOfTrackTicks),ie},re}();Track$1.Track=Track;var Encode={};function flatten(re){var ee=[];return $flatten(re,ee),ee}function $flatten(re,ee){for(var ne=0;ne<re.length;ne++){var ie=re[ne];Array.isArray(ie)?$flatten(ie,ee):ee.push(ie)}}const dist_es2015=Object.freeze(Object.defineProperty({__proto__:null,flatten},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(dist_es2015);var __spreadArray=commonjsGlobal&&commonjsGlobal.__spreadArray||function(re,ee,ne){if(ne||arguments.length===2)for(var ie=0,oe=ee.length,ae;ie<oe;ie++)(ae||!(ie in ee))&&(ae||(ae=Array.prototype.slice.call(ee,0,ie)),ae[ie]=ee[ie]);return re.concat(ae||Array.prototype.slice.call(ee))};Object.defineProperty(Encode,"__esModule",{value:!0});Encode.encode=void 0;var midi_file_1=midiFile,Header_1=Header$1,array_flatten_1=require$$2;function encodeNote(re,ee){return[{absoluteTime:re.ticks,channel:ee,deltaTime:0,noteNumber:re.midi,type:"noteOn",velocity:Math.floor(re.velocity*127)},{absoluteTime:re.ticks+re.durationTicks,channel:ee,deltaTime:0,noteNumber:re.midi,type:"noteOff",velocity:Math.floor(re.noteOffVelocity*127)}]}function encodeNotes(re){return(0,array_flatten_1.flatten)(re.notes.map(function(ee){return encodeNote(ee,re.channel)}))}function encodeControlChange(re,ee){return{absoluteTime:re.ticks,channel:ee,controllerType:re.number,deltaTime:0,type:"controller",value:Math.floor(re.value*127)}}function encodeControlChanges(re){for(var ee=[],ne=0;ne<127;ne++)re.controlChanges.hasOwnProperty(ne)&&re.controlChanges[ne].forEach(function(ie){ee.push(encodeControlChange(ie,re.channel))});return ee}function encodePitchBend(re,ee){return{absoluteTime:re.ticks,channel:ee,deltaTime:0,type:"pitchBend",value:re.value}}function encodePitchBends(re){var ee=[];return re.pitchBends.forEach(function(ne){ee.push(encodePitchBend(ne,re.channel))}),ee}function encodeInstrument(re){return{absoluteTime:0,channel:re.channel,deltaTime:0,programNumber:re.instrument.number,type:"programChange"}}function encodeTrackName(re){return{absoluteTime:0,deltaTime:0,meta:!0,text:re,type:"trackName"}}function encodeTempo(re){return{absoluteTime:re.ticks,deltaTime:0,meta:!0,microsecondsPerBeat:Math.floor(6e7/re.bpm),type:"setTempo"}}function encodeTimeSignature(re){return{absoluteTime:re.ticks,deltaTime:0,denominator:re.timeSignature[1],meta:!0,metronome:24,numerator:re.timeSignature[0],thirtyseconds:8,type:"timeSignature"}}function encodeKeySignature(re){var ee=Header_1.keySignatureKeys.indexOf(re.key);return{absoluteTime:re.ticks,deltaTime:0,key:ee+7,meta:!0,scale:re.scale==="major"?0:1,type:"keySignature"}}function encodeText(re){return{absoluteTime:re.ticks,deltaTime:0,meta:!0,text:re.text,type:re.type}}function encode(re){var ee={header:{format:1,numTracks:re.tracks.length+1,ticksPerBeat:re.header.ppq},tracks:__spreadArray([__spreadArray(__spreadArray(__spreadArray(__spreadArray([{absoluteTime:0,deltaTime:0,meta:!0,text:re.header.name,type:"trackName"}],re.header.keySignatures.map(function(ne){return encodeKeySignature(ne)}),!0),re.header.meta.map(function(ne){return encodeText(ne)}),!0),re.header.tempos.map(function(ne){return encodeTempo(ne)}),!0),re.header.timeSignatures.map(function(ne){return encodeTimeSignature(ne)}),!0)],re.tracks.map(function(ne){return __spreadArray(__spreadArray(__spreadArray([encodeTrackName(ne.name),encodeInstrument(ne)],encodeNotes(ne),!0),encodeControlChanges(ne),!0),encodePitchBends(ne),!0)}),!0)};return ee.tracks=ee.tracks.map(function(ne){ne=ne.sort(function(oe,ae){return oe.absoluteTime-ae.absoluteTime});var ie=0;return ne.forEach(function(oe){oe.deltaTime=oe.absoluteTime-ie,ie=oe.absoluteTime,delete oe.absoluteTime}),ne.push({deltaTime:0,meta:!0,type:"endOfTrack"}),ne}),new Uint8Array((0,midi_file_1.writeMidi)(ee))}Encode.encode=encode;(function(re){var ee=commonjsGlobal&&commonjsGlobal.__awaiter||function(me,ge,ve,ye){function be(Ce){return Ce instanceof ve?Ce:new ve(function(Se){Se(Ce)})}return new(ve||(ve=Promise))(function(Ce,Se){function $e(Ie){try{Ne(ye.next(Ie))}catch(ke){Se(ke)}}function Te(Ie){try{Ne(ye.throw(Ie))}catch(ke){Se(ke)}}function Ne(Ie){Ie.done?Ce(Ie.value):be(Ie.value).then($e,Te)}Ne((ye=ye.apply(me,ge||[])).next())})},ne=commonjsGlobal&&commonjsGlobal.__generator||function(me,ge){var ve={label:0,sent:function(){if(Ce[0]&1)throw Ce[1];return Ce[1]},trys:[],ops:[]},ye,be,Ce,Se;return Se={next:$e(0),throw:$e(1),return:$e(2)},typeof Symbol=="function"&&(Se[Symbol.iterator]=function(){return this}),Se;function $e(Ne){return function(Ie){return Te([Ne,Ie])}}function Te(Ne){if(ye)throw new TypeError("Generator is already executing.");for(;ve;)try{if(ye=1,be&&(Ce=Ne[0]&2?be.return:Ne[0]?be.throw||((Ce=be.return)&&Ce.call(be),0):be.next)&&!(Ce=Ce.call(be,Ne[1])).done)return Ce;switch(be=0,Ce&&(Ne=[Ne[0]&2,Ce.value]),Ne[0]){case 0:case 1:Ce=Ne;break;case 4:return ve.label++,{value:Ne[1],done:!1};case 5:ve.label++,be=Ne[1],Ne=[0];continue;case 7:Ne=ve.ops.pop(),ve.trys.pop();continue;default:if(Ce=ve.trys,!(Ce=Ce.length>0&&Ce[Ce.length-1])&&(Ne[0]===6||Ne[0]===2)){ve=0;continue}if(Ne[0]===3&&(!Ce||Ne[1]>Ce[0]&&Ne[1]<Ce[3])){ve.label=Ne[1];break}if(Ne[0]===6&&ve.label<Ce[1]){ve.label=Ce[1],Ce=Ne;break}if(Ce&&ve.label<Ce[2]){ve.label=Ce[2],ve.ops.push(Ne);break}Ce[2]&&ve.ops.pop(),ve.trys.pop();continue}Ne=ge.call(me,ve)}catch(Ie){Ne=[6,Ie],be=0}finally{ye=Ce=0}if(Ne[0]&5)throw Ne[1];return{value:Ne[0]?Ne[1]:void 0,done:!0}}};Object.defineProperty(re,"__esModule",{value:!0}),re.Header=re.Track=re.Midi=void 0;var ie=midiFile,oe=Header$1,ae=Track$1,ce=Encode,le=function(){function me(ge){var ve=this,ye=null;if(ge){var be=ge instanceof ArrayBuffer?new Uint8Array(ge):ge;ye=(0,ie.parseMidi)(be),ye.tracks.forEach(function(Ce){var Se=0;Ce.forEach(function($e){Se+=$e.deltaTime,$e.absoluteTime=Se})}),ye.tracks=fe(ye.tracks)}this.header=new oe.Header(ye),this.tracks=[],ge&&(this.tracks=ye.tracks.map(function(Ce){return new ae.Track(Ce,ve.header)}),ye.header.format===1&&this.tracks[0].duration===0&&this.tracks.shift())}return me.fromUrl=function(ge){return ee(this,void 0,void 0,function(){var ve,ye;return ne(this,function(be){switch(be.label){case 0:return[4,fetch(ge)];case 1:return ve=be.sent(),ve.ok?[4,ve.arrayBuffer()]:[3,3];case 2:return ye=be.sent(),[2,new me(ye)];case 3:throw new Error("Could not load '".concat(ge,"'"))}})})},Object.defineProperty(me.prototype,"name",{get:function(){return this.header.name},set:function(ge){this.header.name=ge},enumerable:!1,configurable:!0}),Object.defineProperty(me.prototype,"duration",{get:function(){var ge=this.tracks.map(function(ve){return ve.duration});return Math.max.apply(Math,ge)},enumerable:!1,configurable:!0}),Object.defineProperty(me.prototype,"durationTicks",{get:function(){var ge=this.tracks.map(function(ve){return ve.durationTicks});return Math.max.apply(Math,ge)},enumerable:!1,configurable:!0}),me.prototype.addTrack=function(){var ge=new ae.Track(void 0,this.header);return this.tracks.push(ge),ge},me.prototype.toArray=function(){return(0,ce.encode)(this)},me.prototype.toJSON=function(){return{header:this.header.toJSON(),tracks:this.tracks.map(function(ge){return ge.toJSON()})}},me.prototype.fromJSON=function(ge){var ve=this;this.header=new oe.Header,this.header.fromJSON(ge.header),this.tracks=ge.tracks.map(function(ye){var be=new ae.Track(void 0,ve.header);return be.fromJSON(ye),be})},me.prototype.clone=function(){var ge=new me;return ge.fromJSON(this.toJSON()),ge},me}();re.Midi=le;var ue=Track$1;Object.defineProperty(re,"Track",{enumerable:!0,get:function(){return ue.Track}});var he=Header$1;Object.defineProperty(re,"Header",{enumerable:!0,get:function(){return he.Header}});function fe(me){for(var ge=[],ve=0;ve<me.length;ve++)for(var ye=ge.length,be=new Map,Ce=Array(16).fill(0),Se=0,$e=me[ve];Se<$e.length;Se++){var Te=$e[Se],Ne=ye,Ie=Te.channel;if(Ie!==void 0){Te.type==="programChange"&&(Ce[Ie]=Te.programNumber);var ke=Ce[Ie],De="".concat(ke," ").concat(Ie);be.has(De)?Ne=be.get(De):(Ne=ye+be.size,be.set(De,Ne))}ge[Ne]||ge.push([]),ge[Ne].push(Te)}return ge}})(Midi);function midiToSequenceProto(re){const ee=new Midi.Midi(re),ne=NoteSequence.create();ne.ticksPerQuarter=ee.header.ppq,ne.sourceInfo=NoteSequence.SourceInfo.create({parser:NoteSequence.SourceInfo.Parser.TONEJS_MIDI_CONVERT,encodingType:NoteSequence.SourceInfo.EncodingType.MIDI});for(const oe of ee.header.timeSignatures)ne.timeSignatures.push(NoteSequence.TimeSignature.create({time:ee.header.ticksToSeconds(oe.ticks),numerator:oe.timeSignature[0],denominator:oe.timeSignature[1]}));ne.timeSignatures.length||ne.timeSignatures.push(NoteSequence.TimeSignature.create({time:0,numerator:4,denominator:4}));for(const oe of ee.header.tempos)ne.tempos.push(NoteSequence.Tempo.create({time:oe.time,qpm:oe.bpm}));let ie=-1;for(const oe of ee.tracks){oe.notes.length>0&&(ie+=1);for(const le of oe.notes){const ue=le.time,he=le.duration,fe=ue+he;ne.notes.push(NoteSequence.Note.create({instrument:ie,program:oe.instrument.number,startTime:ue,endTime:fe,pitch:le.midi,velocity:Math.floor(le.velocity*MIDI_VELOCITIES),isDrum:oe.instrument.percussion})),fe>ne.totalTime&&(ne.totalTime=fe)}const ae=Object.values(oe.controlChanges),ce=[].concat.apply([],ae);for(const le of ce)ne.controlChanges.push(NoteSequence.ControlChange.create({time:le.time,controlNumber:le.number,controlValue:Math.floor(le.value*(MIDI_VELOCITIES-1)),instrument:ie,program:oe.instrument.number,isDrum:oe.instrument.percussion}))}return ne}function urlToBlob(re){return new Promise((ee,ne)=>{fetch$1(re).then(ie=>ie.blob()).then(ie=>{ee(ie)}).catch(ie=>ne(ie))})}function blobToNoteSequence(re){return new Promise((ee,ne)=>{const ie=new FileReader;ie.onload=oe=>{try{const ae=midiToSequenceProto(ie.result);ee(ae)}catch(ae){ne(ae)}},ie.onerror=oe=>ne(oe),ie.readAsArrayBuffer(re)})}function urlToNoteSequence(re){return urlToBlob(re).then(blobToNoteSequence)}class Instrument{constructor(ee){this.FADE_SECONDS=.1,this.baseURL=ee,this.buffers=new ToneAudioBuffers,this.sourceMap=new Map,this.initialized=!1}async initialize(){await fetch$1(`${this.baseURL}/instrument.json`).then(ee=>ee.json()).then(ee=>{this.name=ee.name,this.minPitch=ee.minPitch,this.maxPitch=ee.maxPitch,this.durationSeconds=ee.durationSeconds,this.releaseSeconds=ee.releaseSeconds,this.percussive=ee.percussive,this.velocities=ee.velocities,this.initialized=!0})}sampleInfoToName(ee){return this.velocities?`p${ee.pitch}_v${ee.velocity}`:`p${ee.pitch}`}sampleNameToURL(ee){return`${this.baseURL}/${ee}.mp3`}nearestVelocity(ee){if(!this.velocities)return ee;ee||(ee=DEFAULT_VELOCITY);let ne,ie=MIDI_VELOCITIES;return this.velocities.forEach(oe=>{const ae=Math.abs(oe-ee);ae<ie&&(ne=oe,ie=ae)}),ne}async loadSamples(ee){this.initialized||await this.initialize();const ne=ee.filter(ae=>ae.pitch<this.minPitch||ae.pitch>this.maxPitch?(log$1(`Pitch ${ae.pitch} is outside the valid range for ${this.name}, ignoring.`,"SoundFont"),!1):!0).map(ae=>this.sampleInfoToName({pitch:ae.pitch,velocity:this.nearestVelocity(ae.velocity)})),oe=Array.from(new Set(ne)).filter(ae=>!this.buffers.has(ae)).map(ae=>({name:ae,url:this.sampleNameToURL(ae)}));oe.length>0&&(oe.forEach(ae=>this.buffers.add(ae.name,ae.url)),await loaded(),log$1(`Loaded samples for ${this.name}.`,"SoundFont"))}playNote(ee,ne,ie,oe,ae){const ce=this.getBuffer(ee,ne);if(!ce)return;oe>this.durationSeconds&&log$1(`Requested note duration longer than sample duration: ${oe} > ${this.durationSeconds}`,"SoundFont");const le=new ToneBufferSource({url:ce,fadeOut:this.FADE_SECONDS}).connect(ae);if(le.start(ie,0,void 0,1),!this.percussive&&oe<this.durationSeconds){const ue=new ToneBufferSource({url:ce,fadeOut:this.FADE_SECONDS}).connect(ae);le.stop(ie+oe+this.FADE_SECONDS),ue.start(ie+oe,this.durationSeconds,void 0,1)}}playNoteDown(ee,ne,ie){const oe=this.getBuffer(ee,ne);if(!oe)return;const ae=new ToneBufferSource(oe).connect(ie);ae.start(0,0,void 0,1),this.sourceMap.has(ee)&&this.sourceMap.get(ee).stop(now()+this.FADE_SECONDS,this.FADE_SECONDS),this.sourceMap.set(ee,ae)}playNoteUp(ee,ne,ie){if(!this.sourceMap.has(ee))return;const oe=this.getBuffer(ee,ne);if(!oe)return;new ToneBufferSource({url:oe,fadeOut:this.FADE_SECONDS}).connect(ie).start(0,this.durationSeconds,void 0,1),this.sourceMap.get(ee).stop(now()+this.FADE_SECONDS,this.FADE_SECONDS),this.sourceMap.delete(ee)}getBuffer(ee,ne){if(!this.initialized)throw new Error("Instrument is not initialized.");if(ee<this.minPitch||ee>this.maxPitch){log$1(`Pitch ${ee} is outside the valid range for ${this.name} (${this.minPitch}-${this.maxPitch})`,"SoundFont");return}const ie=this.sampleInfoToName({pitch:ee,velocity:this.nearestVelocity(ne)});if(!this.buffers.has(ie))throw new Error(`Buffer not found for ${this.name}: ${ie}`);const oe=this.buffers.get(ie);if(!oe.loaded)throw new Error(`Buffer not loaded for ${this.name}: ${ie}`);return oe}}class SoundFont{constructor(ee){this.baseURL=ee,this.instruments=new Map,this.initialized=!1}async initialize(){await fetch$1(`${this.baseURL}/soundfont.json`).then(ee=>ee.json()).then(ee=>{this.name=ee.name;for(const ne in ee.instruments){const ie=`${this.baseURL}/${ee.instruments[ne]}`;this.instruments.set(ne==="drums"?"drums":+ne,new Instrument(ie))}this.initialized=!0})}async loadSamples(ee){this.initialized||await this.initialize();const ne=new Map;ee.forEach(ie=>{ie.isDrum=ie.isDrum||!1,ie.program=ie.program||0;const oe=ie.isDrum?"drums":ie.program,ae={pitch:ie.pitch,velocity:ie.velocity};ne.has(oe)?ne.get(oe).push(ae):this.instruments.has(oe)?ne.set(oe,[ae]):log$1(`No instrument in ${this.name} for: program=${ie.program}, isDrum=${ie.isDrum}`,"SoundFont")}),await Promise.all(Array.from(ne.keys()).map(ie=>this.instruments.get(ie).loadSamples(ne.get(ie))))}playNote(ee,ne,ie,oe,ae=0,ce=!1,le){const ue=ce?"drums":ae;if(!this.initialized)throw new Error("SoundFont is not initialized.");if(!this.instruments.has(ue)){log$1(`No instrument in ${this.name} for: program=${ae}, isDrum=${ce}`,"SoundFont");return}this.instruments.get(ue).playNote(ee,ne,ie,oe,le)}playNoteDown(ee,ne,ie=0,oe=!1,ae){const ce=oe?"drums":ie;if(!this.initialized)throw new Error("SoundFont is not initialized.");if(!this.instruments.has(ce)){log$1(`No instrument in ${this.name} for: program=${ie}, isDrum=${oe}`,"SoundFont");return}this.instruments.get(ce).playNoteDown(ee,ne,ae)}playNoteUp(ee,ne,ie=0,oe=!1,ae){const ce=oe?"drums":ie;if(!this.initialized)throw new Error("SoundFont is not initialized.");if(!this.instruments.has(ce)){log$1(`No instrument in ${this.name} for: program=${ie}, isDrum=${oe}`,"SoundFont");return}this.instruments.get(ce).playNoteUp(ee,ne,ae)}}function compareQuantizedNotes(re,ee){return re.quantizedStartStep<ee.quantizedStartStep?-1:re.quantizedStartStep>ee.quantizedStartStep?1:re.pitch<ee.pitch?-1:1}class BasePlayer{constructor(ee=!1,ne){this.playClick=ee,this.callbackObject=ne,this.desiredQPM=void 0}setTempo(ee){this.desiredQPM=ee,Transport.state==="started"&&(Transport.bpm.value=ee)}makeClickSequence(ee){const ne=clone(ee),ie=ne.notes.map(ae=>ae.quantizedEndStep),oe=Math.max(...ie);for(let ae=0;ae<oe;ae+=4){const ce={pitch:ae%16===0?LO_CLICK_PITCH:HI_CLICK_PITCH,quantizedStartStep:ae,isDrum:!0,quantizedEndStep:ae+1};ne.notes.push(ce)}return ne.notes.sort(compareQuantizedNotes),ne}resumeContext(){context.resume()}start(ee,ne,ie=0){if(this.getPlayState()==="started")throw new Error("Cannot start playback; player is already playing.");if(this.getPlayState()==="paused")throw new Error("Cannot `start()` a paused player; use `resume()`.");if(Transport.state!=="stopped")throw new Error("Cannot start playback while `Tone.Transport` is in use.");this.resumeContext();const oe=isQuantizedSequence(ee);if(this.playClick&&oe&&(ee=this.makeClickSequence(ee)),ne?Transport.bpm.value=ne:ee.tempos&&ee.tempos.length>0&&ee.tempos[0].qpm>0?Transport.bpm.value=ee.tempos[0].qpm:Transport.bpm.value=DEFAULT_QUARTERS_PER_MINUTE,oe)ee=unquantizeSequence(ee,ne);else if(ne)throw new Error("Cannot specify a `qpm` for a non-quantized sequence.");const ae=new Part((ce,le)=>{this.currentPart===ae&&(this.playNote(ce,le),this.callbackObject&&Draw.schedule(()=>{this.callbackObject.run(le,ce)},ce))},ee.notes.map(ce=>[ce.startTime,ce]));return this.currentPart=ae,this.desiredQPM&&(Transport.bpm.value=this.desiredQPM),this.currentPart.start(void 0,ie),Transport.state!=="started"&&Transport.start(),new Promise(ce=>{this.scheduledStop=Transport.schedule(()=>{this.stop(),ce(),this.callbackObject&&this.callbackObject.stop()},`+${ee.totalTime}`)})}stop(){this.isPlaying()&&(this.currentPart.stop(),Transport.stop(),this.currentPart=null),Transport.clear(this.scheduledStop),this.scheduledStop=void 0,this.desiredQPM=void 0}pause(){if(!this.isPlaying())throw new Error("Cannot pause playback while the player is stopped.");Transport.pause()}resume(){if(this.getPlayState()!=="paused")throw new Error(`Cannot resume playback while "${this.getPlayState()}".`);Transport.start()}seekTo(ee){if(!this.isPlaying())throw new Error("Cannot seek while the player is stopped.");Transport.seconds=ee}isPlaying(){return!!this.currentPart}getPlayState(){return this.isPlaying()?Transport.state:"stopped"}}class DrumKit{constructor(){this.DRUM_PITCH_TO_CLASS=new Map,this.kick=new MembraneSynth().toDestination(),this.tomLow=new MembraneSynth({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.tomMid=new MembraneSynth({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.tomHigh=new MembraneSynth({pitchDecay:.008,envelope:{attack:.01,decay:.5,sustain:0}}).toDestination(),this.closedHihat=new MetalSynth({frequency:400,envelope:{attack:.001,decay:.1,release:.8},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1}).toDestination(),this.openHihat=new MetalSynth({frequency:400,envelope:{attack:.001,decay:.5,release:.8,sustain:1},harmonicity:5.1,modulationIndex:32,resonance:4e3,octaves:1}).toDestination(),this.ride=new MetalSynth().toDestination(),this.crash=new MetalSynth({frequency:300,envelope:{attack:.001,decay:1,release:3},harmonicity:5.1,modulationIndex:64,resonance:4e3,octaves:1.5}).toDestination(),this.snare=new NoiseSynth({noise:{type:"white"},envelope:{attack:.005,decay:.05,sustain:.1,release:.4}}).toDestination(),this.loClick=new MembraneSynth({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.hiClick=new MembraneSynth({pitchDecay:.008,envelope:{attack:.001,decay:.3,sustain:0}}).toDestination(),this.pitchPlayers=[(ee,ne=1)=>this.kick.triggerAttackRelease("C2","8n",ee,ne),(ee,ne=1)=>this.snare.triggerAttackRelease("16n",ee,ne),(ee,ne=1)=>this.closedHihat.triggerAttack(ee,.3,ne),(ee,ne=1)=>this.openHihat.triggerAttack(ee,.3,ne),(ee,ne=.5)=>this.tomLow.triggerAttack("G3",ee,ne),(ee,ne=.5)=>this.tomMid.triggerAttack("C4",ee,ne),(ee,ne=.5)=>this.tomHigh.triggerAttack("F4",ee,ne),(ee,ne=1)=>this.crash.triggerAttack(ee,1,ne),(ee,ne=1)=>this.ride.triggerAttack(ee,.5,ne),(ee,ne=.5)=>this.loClick.triggerAttack("G5",ee,ne),(ee,ne=.5)=>this.hiClick.triggerAttack("C6",ee,ne)];for(let ee=0;ee<DEFAULT_DRUM_PITCH_CLASSES.length;++ee)DEFAULT_DRUM_PITCH_CLASSES[ee].forEach(ne=>{this.DRUM_PITCH_TO_CLASS.set(ne,ee)});this.DRUM_PITCH_TO_CLASS.set(LO_CLICK_PITCH,LO_CLICK_CLASS),this.DRUM_PITCH_TO_CLASS.set(HI_CLICK_PITCH,HI_CLICK_CLASS)}static getInstance(){return DrumKit.instance||(DrumKit.instance=new DrumKit),DrumKit.instance}playNote(ee,ne,ie){this.pitchPlayers[this.DRUM_PITCH_TO_CLASS.get(ee)](ne,ie)}}class Player extends BasePlayer{constructor(){super(...arguments),this.drumKit=DrumKit.getInstance(),this.bassSynth=new Synth({volume:5,oscillator:{type:"triangle"}}).toDestination(),this.polySynth=new PolySynth().toDestination()}playNote(ee,ne){const ie=ne.hasOwnProperty("velocity")?ne.velocity/MAX_MIDI_VELOCITY:void 0;if(ne.isDrum)this.drumKit.playNote(ne.pitch,ee,ie);else{const oe=Frequency(ne.pitch,"midi").toFrequency(),ae=ne.endTime-ne.startTime;this.getSynth(ne.instrument,ne.program).triggerAttackRelease(oe,ae,ee,ie)}}getSynth(ee,ne){return ne!==void 0&&ne>=32&&ne<=39?this.bassSynth:this.polySynth}}Player.tone=Tone;class SoundFontPlayer extends BasePlayer{constructor(ee,ne=Master,ie,oe,ae){super(!1,ae),this.soundFont=new SoundFont(ee),this.output=ne,this.programOutputs=ie,this.drumOutputs=oe}async loadSamples(ee){await this.soundFont.loadSamples(ee.notes.map(ne=>({pitch:ne.pitch,velocity:ne.velocity,program:ne.program||0,isDrum:ne.isDrum||!1})))}async loadAllSamples(ee=0,ne=!1){const ie=NoteSequence.create(),oe=ne?MIN_DRUM_PITCH:MIN_PIANO_PITCH,ae=ne?MAX_DRUM_PITCH:MAX_PIANO_PITCH;for(let ce=oe;ce<=ae;ce++)for(let le=MIN_MIDI_VELOCITY;le<MAX_MIDI_VELOCITY;le++)ie.notes.push({pitch:ce,velocity:le,program:ee,isDrum:ne});return this.loadSamples(ie)}resumeContext(){context.resume()}start(ee,ne,ie=0){return this.resumeContext(),this.loadSamples(ee).then(()=>super.start(ee,ne,ie))}playNote(ee,ne){this.soundFont.playNote(ne.pitch,ne.velocity,ee,ne.endTime-ne.startTime,ne.program,ne.isDrum,this.getAudioNodeOutput(ne))}playNoteDown(ee){this.soundFont.playNoteDown(ee.pitch,ee.velocity,ee.program,ee.isDrum,this.getAudioNodeOutput(ee))}playNoteUp(ee){this.soundFont.playNoteUp(ee.pitch,ee.velocity,ee.program,ee.isDrum,this.getAudioNodeOutput(ee))}getAudioNodeOutput(ee){let ne=this.output;return this.programOutputs&&!ee.isDrum?this.programOutputs.has(ee.program)&&(ne=this.programOutputs.get(ee.program)):this.drumOutputs&&ee.isDrum&&this.drumOutputs.has(ee.pitch)&&(ne=this.drumOutputs.get(ee.pitch)),ne}}var es6={exports:{}};(function(re,ee){(function(ne,ie){re.exports=ie()})(self,function(){return function(ne){var ie={};function oe(ae){if(ie[ae])return ie[ae].exports;var ce=ie[ae]={i:ae,l:!1,exports:{}};return ne[ae].call(ce.exports,ce,ce.exports,oe),ce.l=!0,ce.exports}return oe.m=ne,oe.c=ie,oe.d=function(ae,ce,le){oe.o(ae,ce)||Object.defineProperty(ae,ce,{enumerable:!0,get:le})},oe.r=function(ae){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(ae,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(ae,"__esModule",{value:!0})},oe.t=function(ae,ce){if(1&ce&&(ae=oe(ae)),8&ce||4&ce&&typeof ae=="object"&&ae&&ae.__esModule)return ae;var le=Object.create(null);if(oe.r(le),Object.defineProperty(le,"default",{enumerable:!0,value:ae}),2&ce&&typeof ae!="string")for(var ue in ae)oe.d(le,ue,(function(he){return ae[he]}).bind(null,ue));return le},oe.n=function(ae){var ce=ae&&ae.__esModule?function(){return ae.default}:function(){return ae};return oe.d(ce,"a",ce),ce},oe.o=function(ae,ce){return Object.prototype.hasOwnProperty.call(ae,ce)},oe.p="",oe(oe.s=4)}([function(ne,ie,oe){oe.r(ie),oe.d(ie,"SVGNS",function(){return ae}),oe.d(ie,"drawSVGPath",function(){return ce}),oe.d(ie,"drawSVGText",function(){return le}),oe.d(ie,"createSVGGroupChild",function(){return ue}),oe.d(ie,"setFade",function(){return he});const ae="http://www.w3.org/2000/svg";function ce(fe,me,ge,ve,ye,be,Ce=1){const Se=document.createElementNS(ae,"path");return Se.setAttributeNS(null,"d",me),Se.setAttributeNS(null,"transform",`translate(${ge}, ${ve}) scale(${ye}, ${be})`),Se.setAttributeNS(null,"opacity",`${Ce}`),fe.appendChild(Se),Se}function le(fe,me,ge,ve,ye,be=!1,Ce=1,Se=1){const $e=document.createElementNS(ae,"text");$e.setAttributeNS(null,"font-family","Times"),$e.setAttributeNS(null,"font-size",ye),be&&$e.setAttributeNS(null,"font-weight","bold"),$e.setAttributeNS(null,"transform",`translate(${ge}, ${ve}) scale(${Ce}, ${Se})`);const Te=document.createTextNode(me);return $e.appendChild(Te),fe.appendChild($e),$e}function ue(fe,me){const ge=document.createElementNS(ae,"g");return ge.setAttribute("data-id",me),fe.appendChild(ge),ge}function he(fe,me=!1,ge=1,ve=0){let ye=fe.querySelector("animate");if(!ye){(ye=document.createElementNS(ae,"animate")).setAttributeNS(null,"attributeName","opacity"),ye.setAttributeNS(null,"dur","4s"),ye.setAttributeNS(null,"fill","freeze"),ye.setAttributeNS(null,"keyTimes","0; 0.25; 0.5; 0.75; 1");const be=(ge+3*ve)/4;ye.setAttributeNS(null,"values",`${ge}; ${be}; ${ve}; ${be}; ${ge}`)}return me?ye.setAttributeNS(null,"repeatCount","indefinite"):ye.setAttributeNS(null,"repeatCount","1"),fe.appendChild(ye),fe}},function(ne,ie,oe){oe.r(ie),oe.d(ie,"PATH_SCALE",function(){return ae}),oe.d(ie,"staffLinePath",function(){return le}),oe.d(ie,"extraLinePath",function(){return ue}),oe.d(ie,"barPath",function(){return he}),oe.d(ie,"stemPath",function(){return fe}),oe.d(ie,"singleFlagPath",function(){return me}),oe.d(ie,"multiFlagPath",function(){return ge}),oe.d(ie,"tiePath",function(){return ve}),oe.d(ie,"dotPath",function(){return ye}),oe.d(ie,"NOTE_PATHS",function(){return be}),oe.d(ie,"REST_PATHS",function(){return Ce}),oe.d(ie,"CLEF_PATHS",function(){return Se}),oe.d(ie,"ACCIDENTAL_PATHS",function(){return $e});const ae=100,ce=`M 0,10 C 0,-15 35,-50 80,-50 110,-50 125,-35 125,-10 
125,15 90,50 45,50 15,50 0,35 0,10 Z`,le="m 0,0 h 100",ue="m -25,0 h 175",he="m 0,-200 v 400",fe="m 0,0 v 100 h 15 v -100 z",me=`M0,0 h 12 c 7,100 175,156 62,314 79,-177 -49,
-193 -61,-200 l -13,-5 z`,ge=`m 0,0 h 10 c 6,72 173,64 84,227 44,-120 -44,
-123 -94,-167 z`,ve=`M 0,25 C 10,46 30,67 50,67 69,67 90,47 100,25 94,
65 73,89 50,89 26,89 5,63 0,25 Z`,ye="M 5 -20 a 20 20 0 1 0 0.00001 0 z",be={4:{path:`m 0,0 c 0,-37 49,-51 79,-51 31,0 83,13 83,51 0,39 
-55,51 -84,51 C 49,51 0,37 0,0 Z m 111,31 c 13,-19 0,-58 -22,-68 -33,-15 
-53,10 -39,49 9,27 48,39 61,19 z`,width:150,stemVSteps:0,stemAnchor:0,flags:0},2:{path:`m 0,10 c 0,-25 35,-60 80,-60 15,0 45,4 45,40 C 125,16 
89,50 45,50 17,50 0,36 0,10 Z m 71,7 c 17,-11 45,-34 38,-45 -7,-10 -39,1 
-57,12 -19,11 -42,31 -36,42 6,10 37,2 55,-9 z`,width:125,stemVSteps:7,stemAnchor:-10,flags:0},1:{path:ce,width:125,stemVSteps:7,stemAnchor:-10,flags:0},.5:{path:ce,width:125,stemVSteps:7,stemAnchor:-10,flags:1},.25:{path:ce,width:125,stemVSteps:9,stemAnchor:-10,flags:2},.125:{path:ce,width:125,stemVSteps:11,stemAnchor:-10,flags:3},.0625:{path:ce,width:125,stemVSteps:13,stemAnchor:-10,flags:4}},Ce={4:"m 0,-50 h 125 v -50 H 0 Z",2:"M 0,0 H 125 V -50 H 0 Z",1:`m 0,-25 c 39,-39 37,-75 8,-120 l 6,-5 61,103 C 
40,-13 31,4 73,71 l -5,5 C 14,52 16,125 67,144 l -4,6 C -37,102 -1,22 59,60 Z`,.5:`m 52,-47 c 26,-2 42,-21 48,-42 l 12,4 L 64,83 52,79 
88,-49 c 0,0 -17,22 -57,22 -16,0 -31,-13 -31,-27 0,-18 10,-31 27,-31 17,0 
33,15 25,38 z`,.25:`m 129,-191 c -6,21 -22,40 -48,42 8,-23 -8,-38 
-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -20,69 
c -7,18 -22,33 -45,35 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 15,27 
31,27 40,0 57,-22 57,-22 l -36,128 12,4 77,-270 z`,.125:`m 129,-191 c -6,21 -22,40 -48,42 8,-23 -8,-38 
-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -20,69 
c -7,18 -22,33 -45,35 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 15,27 
31,27 40,0 57,-22 57,-22 L 68,20 C 61,37 46,51 24,52 32,29 16,14 -1,14 c 
-17,0 -27,13 -27,31 0,14 15,27 31,27 38,0 55,-20 57,-22 l -36,128 12,4 
105,-369 z`,.0625:`m 158,-292 c -6,21 -22,40 -48,42 8,-23 -8,-38 
-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 l -17,61 
v 0 c -6,21 -22,40 -48,42 8,-23 -8,-38 -25,-38 -17,0 -27,13 -27,31 0,14 
15,27 31,27 40,0 57,-22 57,-22 l -20,69 c -7,18 -22,33 -45,35 8,-23 -8,-38 
-25,-38 -17,0 -27,13 -27,31 0,14 15,27 31,27 40,0 57,-22 57,-22 L 68,20 C 
61,37 46,51 24,52 32,29 16,14 -1,14 c -17,0 -27,13 -27,31 0,14 15,27 31,27 
38,0 55,-20 57,-22 l -36,128 12,4 134,-469 z`},Se={50:{path:`m 101,-199 c -49,0 -100,28 -100,83 0,39 58,57 82,26 15,-20 
-4,-47 -32,-47 -23,1 -25,0 -25,-8 0,-22 40,-46 71,-41 91,16 67,208 -105,302 
75,-27 198,-94 211,-201 6,-66 -42,-114 -102,-114 z m 143,33 c -13,0 -23,11 
-23,24 0,14 10,24 23,24 13,0 23,-11 23,-24 0,-13 -10,-24 -23,-24 z m 2,83 c 
-13,0 -23,11 -23,24 0,14 10,24 23,24 13,0 23,-11 23,-24 0,-13 -10,-24 -23,-24 
z`,upper:-4,lower:3},71:{path:`M 139,48 C 102,57 76,120 131,151 41,128 64,24 129,2 L 
117,-57 C -32,47 26,217 166,182 Z m 12,-1 27,131 C 242,153 216,46 151,47 
Z m -35,-177 c 34,-23 82,-117 50,-140 -23,-17 -71,33 -50,140 z m -10,10 c 
-23,-77 -20,-200 48,-213 19,-4 89,171 -26,266 l 13,66 c 120,-6 137,155 
39,191 l 12,58 c 30,131 -137,145 -138,47 0,-29 37,-59 63,-37 21,18 25,71 
-25,70 32,42 103,0 91,-65 L 167,193 C 56,232 -112,63 106,-120 Z`,upper:-7,lower:8}},$e=[null,`m -49,-121 v 52 l -29,9 v -48 h -8 v 51 l -20,6 v 29 l 
20,-6 v 70 l -20,6 v 30 l 20,-6 v 51 h 8 V 69 l 30,-8 v 50 h 8 V 58 l 20,-6 
V 23 l -20,6 v -71 l 20,-6 v -29 l -20,6 v -50 z m 1,82 v 71 l -29,9 v -71 z`,`M -106,-166 V 67 c 52,-42 85,-56 85,-94 0,-47 -46,-51 
-73,-22 v -117 z m 31,120 c 20,0 42,46 -20,91 V -7 c 0,-28 10,-39 20,-39 z`,`m -81,-58 v -48 H -92 V 73 l 60,-13 v 50 h 11 V -72 Z m 
50,24 v 58 l -50,11 v -58 z`]},function(ne,ie,oe){oe.r(ie),oe.d(ie,"MIN_RESOLUTION",function(){return ae}),oe.d(ie,"STEM_WIDTH",function(){return ce}),oe.d(ie,"LINE_STROKE",function(){return le}),oe.d(ie,"COMPACT_SPACING",function(){return ue});const ae=.0625,ce=15,le=1,ue=150},function(ne,ie,oe){oe.r(ie),oe.d(ie,"MAX_QUARTER_DIVISION",function(){return fe}),oe.d(ie,"ScrollType",function(){return me}),oe.d(ie,"StaffSVGRender",function(){return ge});var ae=oe(2),ce=oe(0),le=oe(1);const ue=[{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[0,1,0,1,0,0,1,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,0,3,0,3,0,0,3,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,0,1,0,3,0,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,0,3,0,2,0,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,3,0,0,3,0,3,0,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,2,0,0,2,0,2,0,0,3]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-7],accidental:[3,0,3,0,3,0,0,3,0,3,0,0]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[0,1,0,1,0,3,0,0,1,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,0,3,0,3,0,2,0,0,3,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,0,1,0,3,0,3,0,0,1,0]},{steps:[0,-1,-1,-2,-2,-3,-4,-4,-5,-5,-6,-6],accidental:[0,2,0,0,3,0,2,0,2,0,0,3]},{steps:[0,0,-1,-1,-2,-3,-3,-4,-4,-5,-5,-6],accidental:[3,0,3,0,0,3,0,3,0,3,0,0]}],he=[{accidental:1,pitches:[]},{accidental:2,pitches:[70,75,68,73,66]},{accidental:1,pitches:[78,73]},{accidental:2,pitches:[70,75,68]},{accidental:1,pitches:[78,73,80,75]},{accidental:2,pitches:[70]},{accidental:2,pitches:[70,75,68,73,66,71]},{accidental:1,pitches:[78]},{accidental:2,pitches:[70,75,68,73]},{accidental:1,pitches:[78,73,80]},{accidental:2,pitches:[70,75]},{accidental:1,pitches:[78,73,80,75,70]}],fe=16;var me;(function(ve){ve[ve.PAGE=0]="PAGE",ve[ve.NOTE=1]="NOTE",ve[ve.BAR=2]="BAR"})(me||(me={}));class ge{constructor(ye,be,Ce){this.handleScrollEvent=Se=>{this.lastKnownScrollLeft=this.parentElement.scrollLeft,this.ticking||window.requestAnimationFrame(()=>{this.changeAndDrawSignaturesIfNeeded(this.lastKnownScrollLeft),this.ticking=!1}),this.ticking=!0},this.scoreInfo=ye,this.config={noteHeight:be.noteHeight||6,noteSpacing:be.noteSpacing||1,pixelsPerTimeStep:be.pixelsPerTimeStep||30,noteRGB:be.noteRGB||"8, 41, 64",activeNoteRGB:be.activeNoteRGB||"240, 84, 119"},this.div=Ce,this.timeSignatureNumerator=4,this.timeSignatureDenominator=4,this.key=be.defaultKey||0,this.scrollType=be.scrollType||me.PAGE,this.scale=this.config.noteHeight/le.PATH_SCALE,(be.pixelsPerTimeStep===void 0||be.pixelsPerTimeStep<=0)&&(this.config.pixelsPerTimeStep=0,this.config.noteSpacing=ae.COMPACT_SPACING*this.scale),this.clear(),this.redraw()}clear(){for(;this.div.lastChild;)this.div.removeChild(this.div.lastChild);this.div.style.overflow="visible",this.div.style.position="relative",this.overlaySVG=document.createElementNS(ce.SVGNS,"svg"),this.overlaySVG.style.position="absolute",this.div.appendChild(this.overlaySVG),this.overlayG=Object(ce.createSVGGroupChild)(this.overlaySVG,"overlay"),this.signaturesBlinking=!1,this.signaturesQuarters=0,this.parentElement=document.createElement("div"),this.parentElement.style.overflow="auto",this.div.appendChild(this.parentElement),this.ticking=!1,this.lastKnownScrollLeft=0,this.parentElement.addEventListener("scroll",this.handleScrollEvent),this.staffSVG=document.createElementNS(ce.SVGNS,"svg"),this.parentElement.appendChild(this.staffSVG),this.staffG=Object(ce.createSVGGroupChild)(this.staffSVG,"staff"),this.linesG=Object(ce.createSVGGroupChild)(this.staffSVG,"lines"),this.setStroke(this.linesG),this.staffG.appendChild(this.linesG),this.musicG=Object(ce.createSVGGroupChild)(this.staffSVG,"music"),this.setFill(this.musicG),this.setStroke(this.musicG,0),this.staffG.appendChild(this.musicG),this.signaturesG=Object(ce.createSVGGroupChild)(this.staffSVG,"signatures"),this.staffG.appendChild(this.signaturesG);let ye=0,be=0;this.scoreInfo.notes.forEach(Se=>{ye+=Se.pitch,++be});const Ce=ye/be;this.clef=Ce<60?50:71,this.signaturesList=[{x:0,q:0}],this.signatureCurrent=0,this.signatureNext=0,this.changeKeySignatureIfNeeded(0),this.changeTimeSignatureIfNeeded(0),this.vStepSize=this.config.noteHeight/2,this.hStepSize=this.config.pixelsPerTimeStep,this.staffOffset=0,this.height=0,this.width=0,this.musicBlockMap=new Map,this.playingNotes=[],this.lastBar=0,this.barAccidentals={},this.lastQ=-1}isPaintingActiveNote(ye,be){const Ce=ye.start===be.start,Se=ye.start<=be.start&&ye.start+ye.length>=be.start+be.length;return Ce||Se}redraw(ye,be){let Ce=-1;const Se=this.config.pixelsPerTimeStep===0;if(ye){const $e=[];this.playingNotes.forEach(Ne=>{this.isPaintingActiveNote(Ne,ye)?$e.push(Ne):this.highlightElement(this.getGroup(Ne),!1)}),this.playingNotes=$e;const Te=this.getGroup(ye);if(Te){this.playingNotes.push(ye),this.highlightElement(Te,!0),Ce=Te.getBoundingClientRect().left-this.staffSVG.getBoundingClientRect().left;const Ne=ye.start,Ie=Te.getAttribute("data-is-bar-beginning");(this.scrollType!==me.BAR||Ie)&&this.scrollIntoViewIfNeeded(be,Ce),!Se&&this.signaturesBlinking&&Ne>=this.signaturesQuarters&&(this.signaturesBlinking=!1,Object(ce.setFade)(this.overlayG,this.signaturesBlinking))}}else{this.setDetails();const $e=this.lastQ===-1;let Te=0,Ne=0;$e?(Ne=this.drawSignatures(this.overlayG,Te,!0,!0,!0),Se&&(this.width=0,Ne+=this.config.noteSpacing),Ne+=this.drawRests(this.initialRest,Te+Ne)):Te=this.width,this.musicBlockMap.forEach((De,Oe)=>{Se||(Te=this.quartersToTime(Oe)*this.hStepSize),Oe>this.lastQ?(Ne+=this.drawMusicBlock(De,Te+Ne),this.lastQ=Oe):Oe===this.lastQ&&(Ne+=this.drawRests(De,Te+Ne))});const Ie=this.staffSVG.getBoundingClientRect(),ke=this.musicG.getBoundingClientRect();if(this.updateVerticalBoundaries(ke.top-Ie.top,ke.bottom-Ie.top),Se)this.width+=Ne;else{const De=this.musicBlockMap.get(this.lastQ),Oe=this.quartersToTime(this.lastQ+De.notes[0].length);this.width=Oe*this.config.pixelsPerTimeStep}this.staffSVG.setAttributeNS(null,"width",`${this.width}`),this.redrawStaff(this.linesG,0,this.width)}return Ce}drawMusicBlock(ye,be){const Ce=ye.notes[0].start;let Se=this.drawBarIfNeeded(Ce,be);Se+=this.drawSignaturesIfNeeded(Ce,be+Se);let $e=0;for(let Ie=4;Ie>=ae.MIN_RESOLUTION&&!$e;Ie/=2)Ie<=ye.notes[0].length&&($e=Ie);if($e===0){const Ie=ye.notes[0].length===0?"[infinite]":`${4/ye.notes[0].length}`;console.warn(" StaffRender ","background:orange; color:white",`StaffRender does not handle notes shorther than 1/${4/ae.MIN_RESOLUTION}th, and this score tries to draw a 1/${Ie}th. Shortest possible note will be drawn instead.`),$e=ae.MIN_RESOLUTION}const Te=le.NOTE_PATHS[$e];let Ne;if(Te.stemAnchor&&(Ne=Object(ce.createSVGGroupChild)(this.musicG,"stem")),ye.notes.forEach(Ie=>{const ke=Ie.vSteps*this.vStepSize,De=2*(Ie.vSteps>0?Math.floor(Ie.vSteps/2):Math.ceil(Ie.vSteps/2)),Oe=Ie.vSteps>0?-2:2;for(let Be=De;Math.abs(Be)>4;Be+=Oe)Object(ce.drawSVGPath)(this.linesG,le.extraLinePath,be+Se,Be*this.vStepSize,this.scale,1);if(Ie.g=Ie.tiedFrom?Ie.tiedFrom.g:Object(ce.createSVGGroupChild)(this.musicG,`${Ie.start}-${Ie.pitch}`),ye.isBarBeginning&&Ie.g.setAttribute("data-is-bar-beginning","true"),Ie.tiedFrom){const Be=be+Se-Ie.tiedFrom.xHeadRight;Object(ce.drawSVGPath)(Ie.g,le.tiePath,Ie.tiedFrom.xHeadRight,ke,Be/le.PATH_SCALE,this.scale*(Ie.vSteps<0?-1:1),Ie.opacity)}Object(ce.drawSVGPath)(Ie.g,Te.path,be+Se,ke,this.scale,this.scale,Ie.opacity),Ie.xHeadRight=be+Se+Te.width*this.scale,1.5*$e<=Ie.length&&Object(ce.drawSVGPath)(Ie.g,le.dotPath,be+Se+Te.width*this.scale+this.vStepSize/2,ke-this.vStepSize/2,this.scale,this.scale,Ie.opacity),Ie.accidental!==0&&Object(ce.drawSVGPath)(Ie.g,le.ACCIDENTAL_PATHS[Ie.accidental],be+Se,ke,this.scale,this.scale,Ie.opacity)}),Te.stemAnchor){let Ie,ke,De=be+Se;const Oe=Te.stemAnchor*this.scale,Be=ye.minVStep+ye.maxVStep<0,Me=Te.flags>2?2*(Te.flags-2):0;if(Be?(Ie=ye.maxVStep*this.vStepSize-Oe,ke=(ye.minVStep+7+Me)*this.vStepSize):(De+=(Te.width-ae.STEM_WIDTH)*this.scale,Ie=ye.minVStep*this.vStepSize+Oe,ke=(ye.maxVStep-7-Me)*this.vStepSize),Object(ce.drawSVGPath)(Ne,le.stemPath,De,Ie,this.scale,(ke-Ie)/le.PATH_SCALE),Te.flags===1)Object(ce.drawSVGPath)(Ne,le.singleFlagPath,De,ke,this.scale,this.scale*(Be?-1:1),1);else if(Te.flags>1)for(let Le=0;Le<Te.flags;++Le)Object(ce.drawSVGPath)(Ne,le.multiFlagPath,De,ke,this.scale,this.scale*(Be?-1:1),1),ke+=(Be?-2:2)*this.vStepSize}return this.config.pixelsPerTimeStep===0&&(Se+=Te.width*this.scale,Ne&&(Se+=Ne.getBoundingClientRect().width),Se+=this.config.noteSpacing),Se+=this.drawRests(ye,be+Se)}drawBarIfNeeded(ye,be){let Ce=0;const Se=this.lastBar+this.getBarLength();return ye!==0&&ye>=Se&&(this.config.pixelsPerTimeStep>0?be-=this.config.noteSpacing:Ce=this.config.noteSpacing,Object(ce.drawSVGPath)(this.linesG,le.barPath,be,0,1,this.scale),this.lastBar=Se),Ce}drawRests(ye,be){let Ce=0,Se=ye.restToNextLength;if(Se){this.config.pixelsPerTimeStep>0&&(be+=this.quartersToTime(ye.notes[0].length)*this.hStepSize);let $e=ye.notes[0].start+ye.notes[0].length,Te=0;const Ne=this.lastBar+this.getBarLength()-$e;let Ie;for(Se>Ne&&(Te=Se-Ne,Se=Ne),Ie=4;Ie>this.getBarLength()&&Ie>=ae.MIN_RESOLUTION;Ie/=2);let ke=Ie;for(;(Se||Te)&&ke>=ae.MIN_RESOLUTION;){if(ke<=Se){Ce+=this.drawBarIfNeeded($e,be+Ce),Ce+=this.drawSignaturesIfNeeded($e,be+Ce);const De=Object(ce.drawSVGPath)(this.musicG,le.REST_PATHS[ke],be+Ce,0,this.scale,this.scale);this.config.pixelsPerTimeStep>0?be+=this.quartersToTime(ke)*this.hStepSize:(Ce+=De.getBoundingClientRect().width,Ce+=this.config.noteSpacing),$e+=ke,Se-=ke}if(Te&&Se<=0){const De=this.getBarLength();for(Te>De?(Se=De,Te-=De):(Se=Te,Te=0),Ie=4;Ie>this.getBarLength()&&Ie>=ae.MIN_RESOLUTION;Ie/=2);ke=Ie}Se<ke&&(ke/=2)}}return Ce}redrawStaff(ye,be,Ce){let Se=ye.querySelector('g[data-id="staff-five-lines"]');if(Se)Se.setAttributeNS(null,"transform",`scale(${Ce/le.PATH_SCALE}, 1)`);else{Se=Object(ce.createSVGGroupChild)(ye,"staff-five-lines");const $e=0;for(let Te=-4;Te<=4;Te+=2)Object(ce.drawSVGPath)(Se,le.staffLinePath,be,$e+Te*this.vStepSize,Ce/le.PATH_SCALE,1)}return Se}clearSignatureOverlay(){for(;this.overlayG.lastChild;)this.overlayG.removeChild(this.overlayG.lastChild)}drawSignaturesIfNeeded(ye,be){let Ce=0;const Se=this.changeKeySignatureIfNeeded(ye),$e=this.changeTimeSignatureIfNeeded(ye);if(Se||$e){const Te=ae.COMPACT_SPACING*this.scale*(this.config.pixelsPerTimeStep>0?3:2);this.signaturesList.push({x:be-Te,q:ye}),this.signatureNext===null&&(this.signatureNext=be);const Ne=ye>0?Object(ce.createSVGGroupChild)(this.signaturesG,"signatures"):this.overlayG;Ce+=this.drawSignatures(Ne,be+Ce,!1,Se,$e)}return this.config.pixelsPerTimeStep===0?Ce:0}drawSignatures(ye,be,Ce,Se,$e){const Te=ae.COMPACT_SPACING*this.scale;let Ne,Ie=Te;const ke=ye===this.overlayG||this.config.pixelsPerTimeStep>0;if(ke){(Ne=document.createElementNS(ce.SVGNS,"rect")).setAttributeNS(null,"x",`${be}`),Ne.setAttributeNS(null,"y","0"),Ne.setAttributeNS(null,"width","1"),Ne.setAttributeNS(null,"height","1"),Ne.setAttribute("data-id","background"),ye.appendChild(Ne);const Me=document.defaultView.getComputedStyle(this.div.parentElement);Ne.setAttributeNS(null,"fill",Me.getPropertyValue("background-color"))}if(Ce){const Me=Object(ce.drawSVGPath)(ye,le.CLEF_PATHS[this.clef].path,be+Ie,0,this.scale,this.scale);this.setFill(Me),Ie+=3*Te}if(Se){const Me=he[this.key].accidental,Le=this.clef===71?0:14;he[this.key].pitches.forEach(je=>{const ze=this.getPitchDetails(je).vSteps,Ve=Object(ce.drawSVGPath)(ye,le.ACCIDENTAL_PATHS[Me],be+Ie,(Le+ze)*this.vStepSize,this.scale,this.scale);this.setFill(Ve),Ie+=Ve.getBoundingClientRect().width})}if($e){const Me=Object(ce.createSVGGroupChild)(ye,"time-key"),Le=`${2.85*this.config.noteHeight}px`;Object(ce.drawSVGText)(Me,`${this.timeSignatureNumerator}`,be+Ie,-.5,Le,!0),Object(ce.drawSVGText)(Me,`${this.timeSignatureDenominator}`,be+Ie,4*this.vStepSize-.5,Le,!0),this.setFill(Me),Ie+=Me.getBoundingClientRect().width+Te}const De=this.redrawStaff(ye,be,Ie);this.setStroke(De);const Oe=this.div.getBoundingClientRect(),Be=ye.getBoundingClientRect();if(this.updateVerticalBoundaries(Be.top-Oe.top,Be.bottom-Oe.top),ke&&(Ne.setAttributeNS(null,"y",`${-this.staffOffset}`),Ne.setAttributeNS(null,"height",`${this.height}`),Ne.setAttributeNS(null,"width",`${Ie}`)),ye===this.overlayG){this.overlaySVG.setAttributeNS(null,"width",`${Ie+5}`);for(let Me=0;Me<5;++Me){const Le=Object(ce.drawSVGPath)(ye,le.stemPath,Ie+Me,Me*Me-this.staffOffset,1/ae.STEM_WIDTH,(this.height-2*Me*Me)/le.PATH_SCALE,(Me-5)*(Me-5)*2/le.PATH_SCALE);this.setFill(Le)}}if(this.config.pixelsPerTimeStep>0){const Me=this.signaturesQuarters===0;return Me&&(this.signaturesQuarters=this.timeToQuarters(Ie/this.hStepSize)),(Me||be>0)&&(this.signaturesBlinking=!0,Object(ce.setFade)(ye,this.signaturesBlinking)),0}return Ie}changeKeySignatureIfNeeded(ye){if(this.scoreInfo.keySignatures){let be=this.key;for(let Ce=0;Ce<this.scoreInfo.keySignatures.length&&this.scoreInfo.keySignatures[Ce].start<=ye;++Ce)be=this.scoreInfo.keySignatures[Ce].key;if(be!==this.key)return this.key=be,!0}return!1}changeTimeSignatureIfNeeded(ye){if(this.scoreInfo.timeSignatures){let be=this.timeSignatureNumerator,Ce=this.timeSignatureDenominator;for(let Se=0;Se<this.scoreInfo.timeSignatures.length&&this.scoreInfo.timeSignatures[Se].start<=ye;++Se)be=this.scoreInfo.timeSignatures[Se].numerator,Ce=this.scoreInfo.timeSignatures[Se].denominator;if(be!==this.timeSignatureNumerator||Ce!==this.timeSignatureDenominator)return this.timeSignatureNumerator=be,this.timeSignatureDenominator=Ce,!0}return!1}changeAndDrawSignaturesIfNeeded(ye){let be;if(ye<this.signatureCurrent||this.signatureNext!==null&&this.signatureNext<=ye){be=this.signaturesList[0].q,this.signatureNext=null;for(let Ce=0;Ce<this.signaturesList.length;++Ce){if(ye<this.signaturesList[Ce].x){this.signatureNext=this.signaturesList[Ce].x;break}this.signatureCurrent=this.signaturesList[Ce].x,be=this.signaturesList[Ce].q}}if(be!==void 0){const Ce=this.key,Se=this.timeSignatureNumerator,$e=this.timeSignatureDenominator;this.changeKeySignatureIfNeeded(be),this.changeTimeSignatureIfNeeded(be),this.clearSignatureOverlay(),this.drawSignatures(this.overlayG,0,!0,!0,!0),this.key=Ce,this.timeSignatureNumerator=Se,this.timeSignatureDenominator=$e}this.config.pixelsPerTimeStep>0&&ye===0&&(this.signatureNext=0,this.signaturesBlinking=!0,Object(ce.setFade)(this.overlayG,this.signaturesBlinking))}getBarLength(){return 4*this.timeSignatureNumerator/this.timeSignatureDenominator}scrollIntoViewIfNeeded(ye,be){if(ye)if(this.scrollType===me.PAGE){const Ce=this.parentElement.getBoundingClientRect().width;be>this.parentElement.scrollLeft+Ce&&(this.parentElement.scrollLeft=be-20)}else{const Ce=this.parentElement.getBoundingClientRect().width;this.parentElement.scrollLeft=be-.5*Ce}}updateVerticalBoundaries(ye,be){let Ce=0;if(ye<0){this.staffOffset-=ye;const Se=`translate(0, ${this.staffOffset})`;this.overlayG.setAttributeNS(null,"transform",Se),this.staffG.setAttributeNS(null,"transform",Se),Ce=this.height-ye}if((Ce=Math.max(Ce,be-ye))>this.height){this.height=Ce,this.overlaySVG.setAttributeNS(null,"height",`${this.height}`),this.staffSVG.setAttributeNS(null,"height",`${this.height}`);const Se=this.div.querySelectorAll('rect[data-id="background"]');for(let $e=0;$e<Se.length;++$e){const Te=Se[$e];Te.setAttributeNS(null,"y",`${-this.staffOffset}`),Te.setAttributeNS(null,"height",`${this.height}`)}}}setFill(ye,be=!1){ye.setAttributeNS(null,"fill",this.getColor(be))}setStroke(ye,be=ae.LINE_STROKE,Ce=!1){ye.setAttributeNS(null,"stroke",this.getColor(Ce)),ye.setAttributeNS(null,"stroke-width",`${be}`)}getColor(ye){return`rgb(${ye?this.config.activeNoteRGB:this.config.noteRGB})`}getOpacity(ye){return ye?ye/127*.8+.2:1}getGroup(ye){const be=ye.start,Ce=ye.pitch;return this.staffSVG.querySelector(`g[data-id="${be}-${Ce}"]`)}highlightElement(ye,be){ye.setAttribute("fill",this.getColor(be)),ye.setAttribute("stroke",this.getColor(be))}getBarBeginnings(){const ye=new Set;let be=0;this.scoreInfo.notes.forEach($e=>{$e.start+$e.length>be&&(be=$e.start+$e.length)});const Ce=this.scoreInfo.timeSignatures?this.scoreInfo.timeSignatures.slice(0):[{start:0,numerator:4,denominator:4}];Ce.sort(($e,Te)=>$e.start-Te.start);let Se=0;for(let $e=0;$e<Ce.length;++$e){const Te=$e===Ce.length-1?be:Ce[$e].start,Ne=4*Ce[$e].numerator/Ce[$e].denominator;for(;Se<Te;Se+=Ne)ye.add(Se)}return ye}quartersToTime(ye){return ye/this.scoreInfo.tempos[0].qpm*60}timeToQuarters(ye){return ye*this.scoreInfo.tempos[0].qpm/60}setDetails(){let ye=new Map;const be=this.getBarBeginnings(),Ce=new Set(be);this.scoreInfo.notes.slice().sort((ke,De)=>ke.start-De.start).forEach(ke=>{const De=this.getQNote(ke);Ce.add(De.start),Ce.add(De.start+De.length),ye.has(De.start)?ye.get(De.start).push(De):ye.set(De.start,[De])}),Array.from(Ce).sort((ke,De)=>ke-De).forEach(ke=>{const De=[];ye.forEach(Oe=>{Oe.forEach(Be=>{const Me=this.splitQNote(Be,ke);Me&&De.push(Me)})}),De.forEach(Oe=>{ye.has(Oe.start)?ye.get(Oe.start).push(Oe):ye.set(Oe.start,[Oe])})}),ye=new Map(Array.from(ye).sort((ke,De)=>ke[0]-De[0]));const Se=this.key;let $e=null,Te=0;const Ne=be[Symbol.iterator]();let Ie=Ne.next();ye.forEach((ke,De)=>{const Oe={maxVStep:Number.MAX_SAFE_INTEGER,minVStep:Number.MIN_SAFE_INTEGER,restToNextLength:0,isBarBeginning:!1,notes:[]};this.changeKeySignatureIfNeeded(De);const Be=Ie.value+this.getBarLength();!Ie.done&&De>=Be&&(Ie=Ne.next(),this.barAccidentals={},Oe.isBarBeginning=!0),ke.forEach(Me=>{this.analyzePitch(Me,De),Oe.minVStep=Math.max(Me.vSteps,Oe.minVStep),Oe.maxVStep=Math.min(Me.vSteps,Oe.maxVStep),Oe.notes.push(Me)}),$e&&($e.restToNextLength=De-Te),this.musicBlockMap.set(De,Oe),$e=Oe,Te=De+Oe.notes[0].length}),this.initialRest={maxVStep:0,minVStep:0,restToNextLength:this.musicBlockMap.values().next().value.notes[0].start,isBarBeginning:!0,notes:[{start:0,length:0,vSteps:0,accidental:0,opacity:0,pitch:0,xHeadRight:0}]},this.key=Se}getQNote(ye){return{start:ye.start,length:ye.length,vSteps:0,accidental:0,opacity:this.getOpacity(ye.intensity),pitch:ye.pitch,xHeadRight:0}}splitQNote(ye,be){const Ce=ye.start+ye.length-be;return be>ye.start&&Ce>0?(ye.length-=Ce,{start:be,length:Ce,vSteps:ye.vSteps,accidental:ye.accidental,opacity:ye.opacity,pitch:ye.pitch,xHeadRight:0,tiedFrom:ye}):null}analyzePitch(ye,be){const Ce=this.getPitchDetails(ye.pitch);Ce.vSteps in this.barAccidentals?Ce.accidental===this.barAccidentals[Ce.vSteps]?Ce.accidental=0:(this.barAccidentals[Ce.vSteps]===3?Ce.accidental=Ce.keyAccidental:Ce.accidental===0&&(Ce.accidental=3),this.barAccidentals[Ce.vSteps]=Ce.accidental):(ye.tiedFrom&&(Ce.accidental=0),this.barAccidentals[Ce.vSteps]=Ce.accidental),ye.vSteps=Ce.vSteps,ye.accidental=Ce.accidental}getPitchDetails(ye){const be=ye-60,Ce=Math.floor(be/12),Se=be-12*Ce,$e=ue[this.key].steps[Se],Te=this.clef===71?6:-6,Ne=he[this.key].accidental===1?69+(Se+3)%12:64+(Se+8)%12;return{vSteps:Te-7*Ce+$e,accidental:ue[this.key].accidental[Se],keyAccidental:he[this.key].pitches.indexOf(Ne)>-1?he[this.key].accidental:0}}}},function(ne,ie,oe){oe.r(ie);var ae=oe(3);oe.d(ie,"MAX_QUARTER_DIVISION",function(){return ae.MAX_QUARTER_DIVISION}),oe.d(ie,"ScrollType",function(){return ae.ScrollType}),oe.d(ie,"StaffSVGRender",function(){return ae.StaffSVGRender})}])})})(es6);var es6Exports=es6.exports;const MIN_NOTE_LENGTH=1;class BaseVisualizer{constructor(ee,ne={}){const ie=isQuantizedSequence(ee),oe=ee.tempos&&ee.tempos.length>0?ee.tempos[0].qpm:void 0;this.noteSequence=ie?unquantizeSequence(ee,oe):ee;const ae=30;this.config={noteHeight:ne.noteHeight||6,noteSpacing:ne.noteSpacing||1,pixelsPerTimeStep:ne.pixelsPerTimeStep||ae,noteRGB:ne.noteRGB||"8, 41, 64",activeNoteRGB:ne.activeNoteRGB||"240, 84, 119",minPitch:ne.minPitch,maxPitch:ne.maxPitch};const ce=this.getSize();this.width=ce.width,this.height=ce.height}updateMinMaxPitches(ee=!1){if(!(this.config.minPitch&&this.config.maxPitch)){this.config.minPitch===void 0&&(this.config.minPitch=MAX_MIDI_PITCH),this.config.maxPitch===void 0&&(this.config.maxPitch=MIN_MIDI_PITCH);for(const ne of this.noteSequence.notes)this.config.minPitch=Math.min(ne.pitch,this.config.minPitch),this.config.maxPitch=Math.max(ne.pitch,this.config.maxPitch);ee||(this.config.minPitch-=2,this.config.maxPitch+=2)}}getSize(){this.updateMinMaxPitches();const ee=(this.config.maxPitch-this.config.minPitch)*this.config.noteHeight,ne=this.noteSequence.totalTime;if(!ne)throw new Error("The sequence you are using with the visualizer does not have a totalQuantizedSteps or totalTime field set, so the visualizer can't be horizontally sized correctly.");return{width:ne*this.config.pixelsPerTimeStep,height:ee}}getNotePosition(ee,ne){const ie=this.getNoteEndTime(ee)-this.getNoteStartTime(ee),oe=this.getNoteStartTime(ee)*this.config.pixelsPerTimeStep,ae=Math.max(this.config.pixelsPerTimeStep*ie-this.config.noteSpacing,MIN_NOTE_LENGTH),ce=this.height-(ee.pitch-this.config.minPitch)*this.config.noteHeight;return{x:oe,y:ce,w:ae,h:this.config.noteHeight}}scrollIntoViewIfNeeded(ee,ne){if(ee&&this.parentElement){const ie=this.parentElement.getBoundingClientRect().width;ne>this.parentElement.scrollLeft+ie&&(this.parentElement.scrollLeft=ne-20)}}getNoteStartTime(ee){return Math.round(ee.startTime*1e8)/1e8}getNoteEndTime(ee){return Math.round(ee.endTime*1e8)/1e8}isPaintingActiveNote(ee,ne){const ie=this.getNoteStartTime(ee)===this.getNoteStartTime(ne),oe=this.getNoteStartTime(ee)<=this.getNoteStartTime(ne)&&this.getNoteEndTime(ee)>=this.getNoteEndTime(ne);return ie||oe}}class BaseSVGVisualizer extends BaseVisualizer{constructor(ee,ne={}){super(ee,ne),this.drawn=!1}redraw(ee,ne){if(this.drawn||this.draw(),!ee)return null;this.unfillActiveRect(this.svg);let ie;for(let oe=0;oe<this.noteSequence.notes.length;oe++){const ae=this.noteSequence.notes[oe];if(!(ee&&this.isPaintingActiveNote(ae,ee)))continue;const le=this.svg.querySelector(`rect[data-index="${oe}"]`);this.fillActiveRect(le,ae),ae===ee&&(ie=parseFloat(le.getAttribute("x")))}return this.scrollIntoViewIfNeeded(ne,ie),ie}fillActiveRect(ee,ne){ee.setAttribute("fill",this.getNoteFillColor(ne,!0)),ee.classList.add("active")}unfillActiveRect(ee){const ne=ee.querySelectorAll("rect.active");for(let ie=0;ie<ne.length;++ie){const oe=ne[ie],ae=this.getNoteFillColor(this.noteSequence.notes[parseInt(oe.getAttribute("data-index"),10)],!1);oe.setAttribute("fill",ae),oe.classList.remove("active")}}draw(){for(let ee=0;ee<this.noteSequence.notes.length;ee++){const ne=this.noteSequence.notes[ee],ie=this.getNotePosition(ne,ee),oe=this.getNoteFillColor(ne,!1),ae=[["index",ee],["instrument",ne.instrument],["program",ne.program],["isDrum",ne.isDrum===!0],["pitch",ne.pitch]],ce=[["--midi-velocity",String(ne.velocity!==void 0?ne.velocity:127)]];this.drawNote(ie.x,ie.y,ie.w,ie.h,oe,ae,ce)}this.drawn=!0}getNoteFillColor(ee,ne){const oe=ee.velocity?ee.velocity/100+.2:1;return`rgba(${ne?this.config.activeNoteRGB:this.config.noteRGB},
  ${oe})`}drawNote(ee,ne,ie,oe,ae,ce,le){if(!this.svg)return;const ue=document.createElementNS("http://www.w3.org/2000/svg","rect");ue.classList.add("note"),ue.setAttribute("fill",ae),ue.setAttribute("x",`${Math.round(ee)}`),ue.setAttribute("y",`${Math.round(ne)}`),ue.setAttribute("width",`${Math.round(ie)}`),ue.setAttribute("height",`${Math.round(oe)}`),ce.forEach(([he,fe])=>{fe!==void 0&&(ue.dataset[he]=`${fe}`)}),le.forEach(([he,fe])=>{ue.style.setProperty(he,fe)}),this.svg.appendChild(ue)}clear(){this.svg.innerHTML="",this.drawn=!1}clearActiveNotes(){this.unfillActiveRect(this.svg)}}class PianoRollSVGVisualizer extends BaseSVGVisualizer{constructor(ee,ne,ie={}){if(super(ee,ie),!(ne instanceof SVGSVGElement))throw new Error("This visualizer requires an <svg> element to display the visualization");this.svg=ne,this.parentElement=ne.parentElement;const oe=this.getSize();this.width=oe.width,this.height=oe.height,this.svg.style.width=`${this.width}px`,this.svg.style.height=`${this.height}px`,this.clear(),this.draw()}}class WaterfallSVGVisualizer extends BaseSVGVisualizer{constructor(ee,ne,ie={}){if(super(ee,ie),this.NOTES_PER_OCTAVE=12,this.WHITE_NOTES_PER_OCTAVE=7,this.LOW_C=24,this.firstDrawnOctave=0,this.lastDrawnOctave=6,!(ne instanceof HTMLDivElement))throw new Error("This visualizer requires a <div> element to display the visualization");this.config.whiteNoteWidth=ie.whiteNoteWidth||20,this.config.blackNoteWidth=ie.blackNoteWidth||this.config.whiteNoteWidth*2/3,this.config.whiteNoteHeight=ie.whiteNoteHeight||70,this.config.blackNoteHeight=ie.blackNoteHeight||2*70/3,this.config.showOnlyOctavesUsed=ie.showOnlyOctavesUsed,this.setupDOM(ne);const oe=this.getSize();this.width=oe.width,this.height=oe.height,this.svg.style.width=`${this.width}px`,this.svg.style.height=`${this.height}px`,this.svgPiano.style.width=`${this.width}px`,this.svgPiano.style.height=`${this.config.whiteNoteHeight}px`,this.parentElement.style.width=`${this.width+this.config.whiteNoteWidth}px`,this.parentElement.scrollTop=this.parentElement.scrollHeight,this.clear(),this.drawPiano(),this.draw()}setupDOM(ee){this.parentElement=document.createElement("div"),this.parentElement.classList.add("waterfall-notes-container");const ne=Math.max(ee.getBoundingClientRect().height,200);this.parentElement.style.paddingTop=`${ne-this.config.whiteNoteHeight}px`,this.parentElement.style.height=`${ne-this.config.whiteNoteHeight}px`,this.parentElement.style.boxSizing="border-box",this.parentElement.style.overflowX="hidden",this.parentElement.style.overflowY="auto",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgPiano=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.classList.add("waterfall-notes"),this.svgPiano.classList.add("waterfall-piano"),this.parentElement.appendChild(this.svg),ee.innerHTML="",ee.appendChild(this.parentElement),ee.appendChild(this.svgPiano)}redraw(ee,ne){if(this.drawn||this.draw(),!ee)return null;this.clearActiveNotes(),this.parentElement.style.paddingTop=this.parentElement.style.height;for(let ie=0;ie<this.noteSequence.notes.length;ie++){const oe=this.noteSequence.notes[ie];if(!(ee&&this.isPaintingActiveNote(oe,ee)))continue;const ce=this.svg.querySelector(`rect[data-index="${ie}"]`);this.fillActiveRect(ce,oe);const le=this.svgPiano.querySelector(`rect[data-pitch="${oe.pitch}"]`);if(this.fillActiveRect(le,oe),oe===ee){const ue=parseFloat(ce.getAttribute("y")),he=parseFloat(ce.getAttribute("height"));return ue<this.parentElement.scrollTop-he&&(this.parentElement.scrollTop=ue+he),ue}}return null}getSize(){this.updateMinMaxPitches(!0);let ee=52;if(this.config.showOnlyOctavesUsed){let ae=!1,ce=!1;for(let le=1;le<7;le++){const ue=this.LOW_C+this.NOTES_PER_OCTAVE*le;!ae&&ue>this.config.minPitch&&(this.firstDrawnOctave=le-1,ae=!0),!ce&&ue>this.config.maxPitch&&(this.lastDrawnOctave=le-1,ce=!0)}ee=(this.lastDrawnOctave-this.firstDrawnOctave+1)*this.WHITE_NOTES_PER_OCTAVE}const ne=ee*this.config.whiteNoteWidth,ie=this.noteSequence.totalTime;if(!ie)throw new Error("The sequence you are using with the visualizer does not have a totalQuantizedSteps or totalTime field set, so the visualizer can't be horizontally sized correctly.");const oe=Math.max(ie*this.config.pixelsPerTimeStep,MIN_NOTE_LENGTH);return{width:ne,height:oe}}getNotePosition(ee,ne){const ie=this.svgPiano.querySelector(`rect[data-pitch="${ee.pitch}"]`);if(!ie)return null;const oe=this.getNoteEndTime(ee)-this.getNoteStartTime(ee),ae=Number(ie.getAttribute("x")),ce=Number(ie.getAttribute("width")),le=Math.max(this.config.pixelsPerTimeStep*oe-this.config.noteSpacing,MIN_NOTE_LENGTH),ue=this.height-this.getNoteStartTime(ee)*this.config.pixelsPerTimeStep-le;return{x:ae,y:ue,w:ce,h:le}}drawPiano(){this.svgPiano.innerHTML="";const ee=this.config.whiteNoteWidth-this.config.blackNoteWidth/2,ne=[1,3,6,8,10];let ie=0,oe=0;this.config.showOnlyOctavesUsed?oe=this.firstDrawnOctave*this.NOTES_PER_OCTAVE+this.LOW_C:(oe=this.LOW_C-3,this.drawWhiteKey(oe,ie),this.drawWhiteKey(oe+2,this.config.whiteNoteWidth),oe+=3,ie=2*this.config.whiteNoteWidth);for(let ae=this.firstDrawnOctave;ae<=this.lastDrawnOctave;ae++)for(let ce=0;ce<this.NOTES_PER_OCTAVE;ce++)ne.indexOf(ce)===-1&&(this.drawWhiteKey(oe,ie),ie+=this.config.whiteNoteWidth),oe++;this.config.showOnlyOctavesUsed?(oe=this.firstDrawnOctave*this.NOTES_PER_OCTAVE+this.LOW_C,ie=-this.config.whiteNoteWidth):(this.drawWhiteKey(oe,ie),oe=this.LOW_C-3,this.drawBlackKey(oe+1,ee),oe+=3,ie=this.config.whiteNoteWidth);for(let ae=this.firstDrawnOctave;ae<=this.lastDrawnOctave;ae++)for(let ce=0;ce<this.NOTES_PER_OCTAVE;ce++)ne.indexOf(ce)!==-1?this.drawBlackKey(oe,ie+ee):ie+=this.config.whiteNoteWidth,oe++}drawWhiteKey(ee,ne){const ie=document.createElementNS("http://www.w3.org/2000/svg","rect");return ie.dataset.pitch=String(ee),ie.setAttribute("x",String(ne)),ie.setAttribute("y","0"),ie.setAttribute("width",String(this.config.whiteNoteWidth)),ie.setAttribute("height",String(this.config.whiteNoteHeight)),ie.setAttribute("fill","white"),ie.setAttribute("original-fill","white"),ie.setAttribute("stroke","black"),ie.setAttribute("stroke-width","3px"),ie.classList.add("white"),this.svgPiano.appendChild(ie),ie}drawBlackKey(ee,ne){const ie=document.createElementNS("http://www.w3.org/2000/svg","rect");return ie.dataset.pitch=String(ee),ie.setAttribute("x",String(ne)),ie.setAttribute("y","0"),ie.setAttribute("width",String(this.config.blackNoteWidth)),ie.setAttribute("height",String(this.config.blackNoteHeight)),ie.setAttribute("fill","black"),ie.setAttribute("original-fill","black"),ie.setAttribute("stroke","black"),ie.setAttribute("stroke-width","3px"),ie.classList.add("black"),this.svgPiano.appendChild(ie),ie}clearActiveNotes(){super.unfillActiveRect(this.svg);const ee=this.svgPiano.querySelectorAll("rect.active");for(let ne=0;ne<ee.length;++ne){const ie=ee[ne];ie.setAttribute("fill",ie.getAttribute("original-fill")),ie.classList.remove("active")}}}var ScrollType;(function(re){re[re.PAGE=0]="PAGE",re[re.NOTE=1]="NOTE",re[re.BAR=2]="BAR"})(ScrollType||(ScrollType={}));class StaffSVGVisualizer extends BaseVisualizer{constructor(ee,ne,ie={}){super(ee,ie),(ie.pixelsPerTimeStep===void 0||ie.pixelsPerTimeStep<=0)&&(this.config.pixelsPerTimeStep=0),this.instruments=ie.instruments||[],this.render=new es6Exports.StaffSVGRender(this.getScoreInfo(ee),{noteHeight:this.config.noteHeight,noteSpacing:this.config.noteSpacing,pixelsPerTimeStep:this.config.pixelsPerTimeStep,noteRGB:this.config.noteRGB,activeNoteRGB:this.config.activeNoteRGB,defaultKey:ie.defaultKey||0,scrollType:ie.scrollType||ScrollType.PAGE},ne),this.drawnNotes=ee.notes.length,this.clear(),this.redraw()}clear(){this.render.clear()}redraw(ee,ne){this.drawnNotes!==this.noteSequence.notes.length&&(this.render.scoreInfo=this.getScoreInfo(this.noteSequence));const ie=ee?this.getNoteInfo(ee):void 0;return this.render.redraw(ie,ne)}isNoteInInstruments(ee){return ee.instrument===void 0||this.instruments.length===0?!0:this.instruments.indexOf(ee.instrument)>=0}timeToQuarters(ee){const ne=ee*this.noteSequence.tempos[0].qpm/60;return Math.round(ne*16)/16}getNoteInfo(ee){const ne=this.timeToQuarters(ee.startTime),ie=this.timeToQuarters(ee.endTime);return{start:ne,length:ie-ne,pitch:ee.pitch,intensity:ee.velocity}}getScoreInfo(ee){const ne=[];return ee.notes.forEach(ie=>{this.isNoteInInstruments(ie)&&ne.push(this.getNoteInfo(ie))}),{notes:ne,tempos:ee.tempos?ee.tempos.map(ie=>({start:this.timeToQuarters(ie.time),qpm:ie.qpm})):[],keySignatures:ee.keySignatures?ee.keySignatures.map(ie=>({start:this.timeToQuarters(ie.time),key:ie.key})):[],timeSignatures:ee.timeSignatures?ee.timeSignatures.map(ie=>({start:this.timeToQuarters(ie.time),numerator:ie.numerator,denominator:ie.denominator})):[]}}clearActiveNotes(){this.redraw()}}/**
 * html-midi-player@1.5.0
 * https://github.com/cifkao/html-midi-player.git
 * @author Ondřej Cífka (@cifkao)
 * @license BSD-2-Clause
 */var playIcon=`<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">
 <path d="m4.4979 3.175-2.1167 1.5875v-3.175z" stroke-width=".70201"/>
</svg>
`,pauseIcon=`<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">
 <path d="m1.8521 1.5875v3.175h0.92604v-3.175zm1.7198 0v3.175h0.92604v-3.175z" stroke-width=".24153"/>
</svg>
`,errorIcon=`<svg width="24" height="24" version="1.1" viewBox="0 0 6.35 6.35" xmlns="http://www.w3.org/2000/svg">
 <path transform="scale(.26458)" d="m12 3.5a8.4993 8.4993 0 0 0-8.5 8.5 8.4993 8.4993 0 0 0 8.5 8.5 8.4993 8.4993 0 0 0 8.5-8.5 8.4993 8.4993 0 0 0-8.5-8.5zm-1.4062 3.5h3v6h-3v-6zm0 8h3v2h-3v-2z"/>
</svg>
`,controlsCSS=`:host {
  display: inline-block;
  width: 300px;
  margin: 3px;
  vertical-align: bottom;
  font-family: sans-serif;
  font-size: 14px;
}

:focus:not(.focus-visible) {
  outline: none;
}

.controls {
  width: inherit;
  height: inherit;
  box-sizing: border-box;
  display: flex;
  flex-direction: row;
  position: relative;
  overflow: hidden;
  align-items: center;
  border-radius: 100px;
  background: #f2f5f6;
  padding: 0 0.25em;
  user-select: none;
}
.controls > * {
  margin: 0.8em 0.45em;
}
.controls input, .controls button {
  cursor: pointer;
}
.controls input:disabled, .controls button:disabled {
  cursor: inherit;
}
.controls button {
  text-align: center;
  background: rgba(204, 204, 204, 0);
  border: none;
  width: 32px;
  height: 32px;
  border-radius: 100%;
  transition: background-color 0.25s ease 0s;
  padding: 0;
}
.controls button:not(:disabled):hover {
  background: rgba(204, 204, 204, 0.3);
}
.controls button:not(:disabled):active {
  background: rgba(204, 204, 204, 0.6);
}
.controls button .icon {
  display: none;
}
.controls button .icon, .controls button .icon svg {
  vertical-align: middle;
}
.controls button .icon svg {
  fill: currentColor;
}
.controls .seek-bar {
  flex: 1;
  min-width: 0;
  margin-right: 1.1em;
  background: transparent;
}
.controls .seek-bar::-moz-range-track {
  background-color: #555;
}
.controls.stopped .play-icon, .controls.playing .stop-icon, .controls.error .error-icon {
  display: inherit;
}
.controls.frozen > div, .controls > button:disabled .icon {
  opacity: 0.5;
}
.controls .overlay {
  z-index: 0;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  margin: 0;
  box-sizing: border-box;
  display: none;
  opacity: 1;
}
.controls.loading .loading-overlay {
  display: block;
  background: linear-gradient(110deg, #92929200 5%, #92929288 25%, #92929200 45%);
  background-size: 250% 100%;
  background-repeat: repeat-y;
  animation: shimmer 1.5s linear infinite;
}

@keyframes shimmer {
  0% {
    background-position: 125% 0;
  }
  100% {
    background-position: -200% 0;
  }
}`,visualizerCSS=`:host {
  display: block;
}

::slotted(.piano-roll-visualizer) {
  overflow-x: auto;
}`;const controlsTemplate=document.createElement("template");controlsTemplate.innerHTML=`
<style>
${controlsCSS}
</style>
<div class="controls stopped frozen" part="control-panel">
  <button class="play" part="play-button" disabled>
    <span class="icon play-icon">${playIcon}</span>
    <span class="icon stop-icon">${pauseIcon}</span>
    <span class="icon error-icon">${errorIcon}</span>
  </button>
  <div part="time"><span class="current-time" part="current-time">0:00</span> / <span class="total-time" part="total-time">0:00</span></div>
  <input type="range" min="0" max="0" value="0" step="any" class="seek-bar" part="seek-bar" disabled>
  <div class="overlay loading-overlay" part="loading-overlay"></div>
</div>
`;const visualizerTemplate=document.createElement("template");visualizerTemplate.innerHTML=`
<style>
${visualizerCSS}
</style>
<slot>
</slot>
`;function formatTime(re){const ee=re<0;re=Math.floor(Math.abs(re||0));const ne=re%60,ie=(re-ne)/60,oe=(re-ne-60*ie)/3600,ae=ne>9?`${ne}`:`0${ne}`,ce=ie>9||!oe?`${ie}:`:`0${ie}:`,le=oe?`${oe}:`:"";return(ee?"-":"")+le+ce+ae}const VISUALIZER_TYPES=["piano-roll","waterfall","staff"];class VisualizerElement extends HTMLElement{constructor(){super(...arguments),this.domInitialized=!1,this.ns=null,this._config={}}static get observedAttributes(){return["src","type"]}connectedCallback(){this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(visualizerTemplate.content.cloneNode(!0)),!this.domInitialized&&(this.domInitialized=!0,this.wrapper=document.createElement("div"),this.appendChild(this.wrapper),this.initVisualizerNow())}attributeChangedCallback(ee,ne,ie){(ee==="src"||ee==="type")&&this.initVisualizer()}initVisualizer(){this.initTimeout==null&&(this.initTimeout=window.setTimeout(()=>this.initVisualizerNow()))}async initVisualizerNow(){if(this.initTimeout=null,!!this.domInitialized&&(this.src&&(this.ns=null,this.ns=await urlToNoteSequence(this.src)),this.wrapper.innerHTML="",!!this.ns)){if(this.type==="piano-roll"){this.wrapper.classList.add("piano-roll-visualizer");const ee=document.createElementNS("http://www.w3.org/2000/svg","svg");this.wrapper.appendChild(ee),this.visualizer=new PianoRollSVGVisualizer(this.ns,ee,this._config)}else if(this.type==="waterfall")this.wrapper.classList.add("waterfall-visualizer"),this.visualizer=new WaterfallSVGVisualizer(this.ns,this.wrapper,this._config);else if(this.type==="staff"){this.wrapper.classList.add("staff-visualizer");const ee=document.createElement("div");this.wrapper.appendChild(ee),this.visualizer=new StaffSVGVisualizer(this.ns,ee,this._config)}}}reload(){this.initVisualizerNow()}redraw(ee){this.visualizer&&this.visualizer.redraw(ee,ee!=null)}clearActiveNotes(){this.visualizer&&this.visualizer.clearActiveNotes()}get noteSequence(){return this.ns}set noteSequence(ee){this.ns!=ee&&(this.ns=ee,this.removeAttribute("src"),this.initVisualizer())}get src(){return this.getAttribute("src")}set src(ee){this.ns=null,this.setOrRemoveAttribute("src",ee),this.initVisualizer()}get type(){let ee=this.getAttribute("type");return VISUALIZER_TYPES.indexOf(ee)<0&&(ee="piano-roll"),ee}set type(ee){if(ee!=null&&VISUALIZER_TYPES.indexOf(ee)<0)throw new Error(`Unknown visualizer type ${ee}. Allowed values: ${VISUALIZER_TYPES.join(", ")}`);this.setOrRemoveAttribute("type",ee)}get config(){return this._config}set config(ee){this._config=ee,this.initVisualizer()}setOrRemoveAttribute(ee,ne){ne==null?this.removeAttribute(ee):this.setAttribute(ee,ne)}}const VISUALIZER_EVENTS=["start","stop","note"],DEFAULT_SOUNDFONT="https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus";let playingPlayer=null;class PlayerElement extends HTMLElement{constructor(){super(),this.domInitialized=!1,this.needInitNs=!1,this.visualizerListeners=new Map,this.ns=null,this._playing=!1,this.seeking=!1,this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(controlsTemplate.content.cloneNode(!0)),this.controlPanel=this.shadowRoot.querySelector(".controls"),this.playButton=this.controlPanel.querySelector(".play"),this.currentTimeLabel=this.controlPanel.querySelector(".current-time"),this.totalTimeLabel=this.controlPanel.querySelector(".total-time"),this.seekBar=this.controlPanel.querySelector(".seek-bar")}static get observedAttributes(){return["sound-font","src","visualizer"]}connectedCallback(){if(this.domInitialized)return;this.domInitialized=!0;const ee=window.applyFocusVisiblePolyfill;ee!=null&&ee(this.shadowRoot),this.playButton.addEventListener("click",()=>{this.player.isPlaying()?this.stop():this.start()}),this.seekBar.addEventListener("input",()=>{this.seeking=!0,this.player&&this.player.getPlayState()==="started"&&this.player.pause()}),this.seekBar.addEventListener("change",()=>{const ne=this.currentTime;this.currentTimeLabel.textContent=formatTime(ne),this.player&&this.player.isPlaying()&&(this.player.seekTo(ne),this.player.getPlayState()==="paused"&&this.player.resume()),this.seeking=!1}),this.initPlayerNow()}attributeChangedCallback(ee,ne,ie){if(this.hasAttribute(ee)||(ie=null),ee==="sound-font"||ee==="src")this.initPlayer();else if(ee==="visualizer"){const oe=()=>{this.setVisualizerSelector(ie)};document.readyState==="loading"?window.addEventListener("DOMContentLoaded",oe):oe()}}initPlayer(ee=!0){this.needInitNs=this.needInitNs||ee,this.initTimeout==null&&(this.stop(),this.setLoading(),this.initTimeout=window.setTimeout(()=>this.initPlayerNow(this.needInitNs)))}async initPlayerNow(ee=!0){if(this.initTimeout=null,this.needInitNs=!1,!!this.domInitialized)try{let ne=null;if(ee&&(this.src&&(this.ns=null,this.ns=await urlToNoteSequence(this.src)),this.currentTime=0,this.ns||this.setError("No content loaded")),ne=this.ns,ne)this.seekBar.max=String(ne.totalTime),this.totalTimeLabel.textContent=formatTime(ne.totalTime);else{this.seekBar.max="0",this.totalTimeLabel.textContent=formatTime(0);return}let ie=this.soundFont;const oe={run:ae=>this.ns===ne&&this.noteCallback(ae),stop:()=>{}};if(ie===null?this.player=new Player(!1,oe):(ie===""&&(ie=DEFAULT_SOUNDFONT),this.player=new SoundFontPlayer(ie,void 0,void 0,void 0,oe),await this.player.loadSamples(ne)),this.ns!==ne)return;this.setLoaded(),this.dispatchEvent(new CustomEvent("load"))}catch(ne){throw this.setError(String(ne)),ne}}reload(){this.initPlayerNow()}start(){this._start()}_start(ee=!1){(async()=>{if(this.player)if(this.player.getPlayState()=="stopped"){playingPlayer&&playingPlayer.playing&&!(playingPlayer==this&&ee)&&playingPlayer.stop(),playingPlayer=this,this._playing=!0;let ne=this.currentTime;this.ns.notes.filter(ie=>ie.startTime>ne).length==0&&(ne=0),this.currentTime=ne,this.controlPanel.classList.remove("stopped"),this.controlPanel.classList.add("playing");try{for(const oe of this.visualizerListeners.keys())oe.noteSequence!=this.ns&&(oe.noteSequence=this.ns,oe.reload());const ie=this.player.start(this.ns,void 0,ne);ee?this.dispatchEvent(new CustomEvent("loop")):this.dispatchEvent(new CustomEvent("start")),await ie,this.handleStop(!0)}catch(ie){throw this.handleStop(),ie}}else this.player.getPlayState()=="paused"&&this.player.resume()})()}stop(){this.player&&this.player.isPlaying()&&this.player.stop(),this.handleStop(!1)}addVisualizer(ee){const ne={start:()=>{ee.noteSequence=this.noteSequence},stop:()=>{ee.clearActiveNotes()},note:ie=>{ee.redraw(ie.detail.note)}};for(const ie of VISUALIZER_EVENTS)this.addEventListener(ie,ne[ie]);this.visualizerListeners.set(ee,ne)}removeVisualizer(ee){const ne=this.visualizerListeners.get(ee);for(const ie of VISUALIZER_EVENTS)this.removeEventListener(ie,ne[ie]);this.visualizerListeners.delete(ee)}noteCallback(ee){this.playing&&(this.dispatchEvent(new CustomEvent("note",{detail:{note:ee}})),!this.seeking&&(this.seekBar.value=String(ee.startTime),this.currentTimeLabel.textContent=formatTime(ee.startTime)))}handleStop(ee=!1){if(ee){if(this.loop){this.currentTime=0,this._start(!0);return}this.currentTime=this.duration}this.controlPanel.classList.remove("playing"),this.controlPanel.classList.add("stopped"),this._playing&&(this._playing=!1,this.dispatchEvent(new CustomEvent("stop",{detail:{finished:ee}})))}setVisualizerSelector(ee){for(const ne of this.visualizerListeners.values())for(const ie of VISUALIZER_EVENTS)this.removeEventListener(ie,ne[ie]);if(this.visualizerListeners.clear(),ee!=null)for(const ne of document.querySelectorAll(ee)){if(!(ne instanceof VisualizerElement)){console.warn(`Selector ${ee} matched non-visualizer element`,ne);continue}this.addVisualizer(ne)}}setLoading(){this.playButton.disabled=!0,this.seekBar.disabled=!0,this.controlPanel.classList.remove("error"),this.controlPanel.classList.add("loading","frozen"),this.controlPanel.removeAttribute("title")}setLoaded(){this.controlPanel.classList.remove("loading","frozen"),this.playButton.disabled=!1,this.seekBar.disabled=!1}setError(ee){this.playButton.disabled=!0,this.seekBar.disabled=!0,this.controlPanel.classList.remove("loading","stopped","playing"),this.controlPanel.classList.add("error","frozen"),this.controlPanel.title=ee}get noteSequence(){return this.ns}set noteSequence(ee){this.ns!=ee&&(this.ns=ee,this.removeAttribute("src"),this.initPlayer())}get src(){return this.getAttribute("src")}set src(ee){this.ns=null,this.setOrRemoveAttribute("src",ee),this.initPlayer()}get soundFont(){return this.getAttribute("sound-font")}set soundFont(ee){this.setOrRemoveAttribute("sound-font",ee)}get loop(){return this.getAttribute("loop")!=null}set loop(ee){this.setOrRemoveAttribute("loop",ee?"":null)}get currentTime(){return parseFloat(this.seekBar.value)}set currentTime(ee){this.seekBar.value=String(ee),this.currentTimeLabel.textContent=formatTime(this.currentTime),this.player&&this.player.isPlaying()&&this.player.seekTo(ee)}get duration(){return parseFloat(this.seekBar.max)}get playing(){return this._playing}setOrRemoveAttribute(ee,ne){ne==null?this.removeAttribute(ee):this.setAttribute(ee,ne)}}window.customElements.define("midi-player",PlayerElement);window.customElements.define("midi-visualizer",VisualizerElement);const feed_container$1="_feed_container_1bc7r_216",container$j="_container_1bc7r_217",player_container="_player_container_1bc7r_223",volume_slider="_volume_slider_1bc7r_238",slider="_slider_1bc7r_256",volume_container="_volume_container_1bc7r_270",button$1="_button_1bc7r_312",playerButton="_playerButton_1bc7r_321",styles$C={feed_container:feed_container$1,container:container$j,player_container,volume_slider,slider,volume_container,button:button$1,playerButton};/*!
 * Compressor.js v1.1.1
 * https://fengyuanchen.github.io/compressorjs
 *
 * Copyright 2018-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2021-10-05T02:32:40.212Z
 */function ownKeys$1(re,ee){var ne=Object.keys(re);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(re);ee&&(ie=ie.filter(function(oe){return Object.getOwnPropertyDescriptor(re,oe).enumerable})),ne.push.apply(ne,ie)}return ne}function _objectSpread2$1(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee]!=null?arguments[ee]:{};ee%2?ownKeys$1(Object(ne),!0).forEach(function(ie){_defineProperty(re,ie,ne[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(re,Object.getOwnPropertyDescriptors(ne)):ownKeys$1(Object(ne)).forEach(function(ie){Object.defineProperty(re,ie,Object.getOwnPropertyDescriptor(ne,ie))})}return re}function _classCallCheck(re,ee){if(!(re instanceof ee))throw new TypeError("Cannot call a class as a function")}function _defineProperties(re,ee){for(var ne=0;ne<ee.length;ne++){var ie=ee[ne];ie.enumerable=ie.enumerable||!1,ie.configurable=!0,"value"in ie&&(ie.writable=!0),Object.defineProperty(re,ie.key,ie)}}function _createClass(re,ee,ne){return ee&&_defineProperties(re.prototype,ee),ne&&_defineProperties(re,ne),re}function _defineProperty(re,ee,ne){return ee in re?Object.defineProperty(re,ee,{value:ne,enumerable:!0,configurable:!0,writable:!0}):re[ee]=ne,re}function _extends(){return _extends=Object.assign||function(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee];for(var ie in ne)Object.prototype.hasOwnProperty.call(ne,ie)&&(re[ie]=ne[ie])}return re},_extends.apply(this,arguments)}var canvasToBlob={exports:{}};(function(re){typeof window>"u"||function(ee){var ne=ee.HTMLCanvasElement&&ee.HTMLCanvasElement.prototype,ie=ee.Blob&&function(){try{return!!new Blob}catch{return!1}}(),oe=ie&&ee.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch{return!1}}(),ae=ee.BlobBuilder||ee.WebKitBlobBuilder||ee.MozBlobBuilder||ee.MSBlobBuilder,ce=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,le=(ie||ae)&&ee.atob&&ee.ArrayBuffer&&ee.Uint8Array&&function(ue){var he,fe,me,ge,ve,ye,be,Ce,Se;if(he=ue.match(ce),!he)throw new Error("invalid data URI");for(fe=he[2]?he[1]:"text/plain"+(he[3]||";charset=US-ASCII"),me=!!he[4],ge=ue.slice(he[0].length),me?ve=atob(ge):ve=decodeURIComponent(ge),ye=new ArrayBuffer(ve.length),be=new Uint8Array(ye),Ce=0;Ce<ve.length;Ce+=1)be[Ce]=ve.charCodeAt(Ce);return ie?new Blob([oe?be:ye],{type:fe}):(Se=new ae,Se.append(ye),Se.getBlob(fe))};ee.HTMLCanvasElement&&!ne.toBlob&&(ne.mozGetAsFile?ne.toBlob=function(ue,he,fe){var me=this;setTimeout(function(){fe&&ne.toDataURL&&le?ue(le(me.toDataURL(he,fe))):ue(me.mozGetAsFile("blob",he))})}:ne.toDataURL&&le&&(ne.msToBlob?ne.toBlob=function(ue,he,fe){var me=this;setTimeout(function(){(he&&he!=="image/png"||fe)&&ne.toDataURL&&le?ue(le(me.toDataURL(he,fe))):ue(me.msToBlob(he))})}:ne.toBlob=function(ue,he,fe){var me=this;setTimeout(function(){ue(le(me.toDataURL(he,fe)))})})),re.exports?re.exports=le:ee.dataURLtoBlob=le}(window)})(canvasToBlob);var toBlob=canvasToBlob.exports,isBlob=function re(ee){return typeof Blob>"u"?!1:ee instanceof Blob||Object.prototype.toString.call(ee)==="[object Blob]"},DEFAULTS={strict:!0,checkOrientation:!0,maxWidth:1/0,maxHeight:1/0,minWidth:0,minHeight:0,width:void 0,height:void 0,resize:"none",quality:.8,mimeType:"auto",convertTypes:["image/png"],convertSize:5e6,beforeDraw:null,drew:null,success:null,error:null},IS_BROWSER=typeof window<"u"&&typeof window.document<"u",WINDOW=IS_BROWSER?window:{},isPositiveNumber=function re(ee){return ee>0&&ee<1/0},slice$1=Array.prototype.slice;function toArray(re){return Array.from?Array.from(re):slice$1.call(re)}var REGEXP_IMAGE_TYPE=/^image\/.+$/;function isImageType(re){return REGEXP_IMAGE_TYPE.test(re)}function imageTypeToExtension(re){var ee=isImageType(re)?re.substr(6):"";return ee==="jpeg"&&(ee="jpg"),".".concat(ee)}var fromCharCode=String.fromCharCode;function getStringFromCharCode(re,ee,ne){var ie="",oe;for(ne+=ee,oe=ee;oe<ne;oe+=1)ie+=fromCharCode(re.getUint8(oe));return ie}var btoa$1=WINDOW.btoa;function arrayBufferToDataURL(re,ee){for(var ne=[],ie=8192,oe=new Uint8Array(re);oe.length>0;)ne.push(fromCharCode.apply(null,toArray(oe.subarray(0,ie)))),oe=oe.subarray(ie);return"data:".concat(ee,";base64,").concat(btoa$1(ne.join("")))}function resetAndGetOrientation(re){var ee=new DataView(re),ne;try{var ie,oe,ae;if(ee.getUint8(0)===255&&ee.getUint8(1)===216)for(var ce=ee.byteLength,le=2;le+1<ce;){if(ee.getUint8(le)===255&&ee.getUint8(le+1)===225){oe=le;break}le+=1}if(oe){var ue=oe+4,he=oe+10;if(getStringFromCharCode(ee,ue,4)==="Exif"){var fe=ee.getUint16(he);if(ie=fe===18761,(ie||fe===19789)&&ee.getUint16(he+2,ie)===42){var me=ee.getUint32(he+4,ie);me>=8&&(ae=he+me)}}}if(ae){var ge=ee.getUint16(ae,ie),ve,ye;for(ye=0;ye<ge;ye+=1)if(ve=ae+ye*12+2,ee.getUint16(ve,ie)===274){ve+=8,ne=ee.getUint16(ve,ie),ee.setUint16(ve,1,ie);break}}}catch{ne=1}return ne}function parseOrientation(re){var ee=0,ne=1,ie=1;switch(re){case 2:ne=-1;break;case 3:ee=-180;break;case 4:ie=-1;break;case 5:ee=90,ie=-1;break;case 6:ee=90;break;case 7:ee=90,ne=-1;break;case 8:ee=-90;break}return{rotate:ee,scaleX:ne,scaleY:ie}}var REGEXP_DECIMALS=/\.\d*(?:0|9){12}\d*$/;function normalizeDecimalNumber(re){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return REGEXP_DECIMALS.test(re)?Math.round(re*ee)/ee:re}function getAdjustedSizes(re){var ee=re.aspectRatio,ne=re.height,ie=re.width,oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"none",ae=isPositiveNumber(ie),ce=isPositiveNumber(ne);if(ae&&ce){var le=ne*ee;(oe==="contain"||oe==="none")&&le>ie||oe==="cover"&&le<ie?ne=ie/ee:ie=ne*ee}else ae?ne=ie/ee:ce&&(ie=ne*ee);return{width:ie,height:ne}}var ArrayBuffer$1=WINDOW.ArrayBuffer,FileReader$1=WINDOW.FileReader,URL$1=WINDOW.URL||WINDOW.webkitURL,REGEXP_EXTENSION=/\.\w+$/,AnotherCompressor=WINDOW.Compressor,Compressor=function(){function re(ee,ne){_classCallCheck(this,re),this.file=ee,this.image=new Image,this.options=_objectSpread2$1(_objectSpread2$1({},DEFAULTS),ne),this.aborted=!1,this.result=null,this.init()}return _createClass(re,[{key:"init",value:function(){var ne=this,ie=this.file,oe=this.options;if(!isBlob(ie)){this.fail(new Error("The first argument must be a File or Blob object."));return}var ae=ie.type;if(!isImageType(ae)){this.fail(new Error("The first argument must be an image File or Blob object."));return}if(!URL$1||!FileReader$1){this.fail(new Error("The current browser does not support image compression."));return}if(ArrayBuffer$1||(oe.checkOrientation=!1),URL$1&&!oe.checkOrientation)this.load({url:URL$1.createObjectURL(ie)});else{var ce=new FileReader$1,le=oe.checkOrientation&&ae==="image/jpeg";this.reader=ce,ce.onload=function(ue){var he=ue.target,fe=he.result,me={};if(le){var ge=resetAndGetOrientation(fe);ge>1||!URL$1?(me.url=arrayBufferToDataURL(fe,ae),ge>1&&_extends(me,parseOrientation(ge))):me.url=URL$1.createObjectURL(ie)}else me.url=fe;ne.load(me)},ce.onabort=function(){ne.fail(new Error("Aborted to read the image with FileReader."))},ce.onerror=function(){ne.fail(new Error("Failed to read the image with FileReader."))},ce.onloadend=function(){ne.reader=null},le?ce.readAsArrayBuffer(ie):ce.readAsDataURL(ie)}}},{key:"load",value:function(ne){var ie=this,oe=this.file,ae=this.image;ae.onload=function(){ie.draw(_objectSpread2$1(_objectSpread2$1({},ne),{},{naturalWidth:ae.naturalWidth,naturalHeight:ae.naturalHeight}))},ae.onabort=function(){ie.fail(new Error("Aborted to load the image."))},ae.onerror=function(){ie.fail(new Error("Failed to load the image."))},WINDOW.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent)&&(ae.crossOrigin="anonymous"),ae.alt=oe.name,ae.src=ne.url}},{key:"draw",value:function(ne){var ie=this,oe=ne.naturalWidth,ae=ne.naturalHeight,ce=ne.rotate,le=ce===void 0?0:ce,ue=ne.scaleX,he=ue===void 0?1:ue,fe=ne.scaleY,me=fe===void 0?1:fe,ge=this.file,ve=this.image,ye=this.options,be=document.createElement("canvas"),Ce=be.getContext("2d"),Se=Math.abs(le)%180===90,$e=(ye.resize==="contain"||ye.resize==="cover")&&isPositiveNumber(ye.width)&&isPositiveNumber(ye.height),Te=Math.max(ye.maxWidth,0)||1/0,Ne=Math.max(ye.maxHeight,0)||1/0,Ie=Math.max(ye.minWidth,0)||0,ke=Math.max(ye.minHeight,0)||0,De=oe/ae,Oe=ye.width,Be=ye.height;if(Se){var Me=[Ne,Te];Te=Me[0],Ne=Me[1];var Le=[ke,Ie];Ie=Le[0],ke=Le[1];var je=[Be,Oe];Oe=je[0],Be=je[1]}$e&&(De=Oe/Be);var ze=getAdjustedSizes({aspectRatio:De,width:Te,height:Ne},"contain");Te=ze.width,Ne=ze.height;var Ve=getAdjustedSizes({aspectRatio:De,width:Ie,height:ke},"cover");if(Ie=Ve.width,ke=Ve.height,$e){var He=getAdjustedSizes({aspectRatio:De,width:Oe,height:Be},ye.resize);Oe=He.width,Be=He.height}else{var We=getAdjustedSizes({aspectRatio:De,width:Oe,height:Be}),Ye=We.width;Oe=Ye===void 0?oe:Ye;var Ue=We.height;Be=Ue===void 0?ae:Ue}Oe=Math.floor(normalizeDecimalNumber(Math.min(Math.max(Oe,Ie),Te))),Be=Math.floor(normalizeDecimalNumber(Math.min(Math.max(Be,ke),Ne)));var Ke=-Oe/2,Xe=-Be/2,Vt=Oe,Wt=Be,Kt=[];if($e){var tn=0,Xt=0,dn=oe,nn=ae,rn=getAdjustedSizes({aspectRatio:De,width:oe,height:ae},{contain:"cover",cover:"contain"}[ye.resize]);dn=rn.width,nn=rn.height,tn=(oe-dn)/2,Xt=(ae-nn)/2,Kt.push(tn,Xt,dn,nn)}if(Kt.push(Ke,Xe,Vt,Wt),Se){var vn=[Be,Oe];Oe=vn[0],Be=vn[1]}be.width=Oe,be.height=Be,isImageType(ye.mimeType)||(ye.mimeType=ge.type);var yn="transparent";if(ge.size>ye.convertSize&&ye.convertTypes.indexOf(ye.mimeType)>=0&&(ye.mimeType="image/jpeg"),ye.mimeType==="image/jpeg"&&(yn="#fff"),Ce.fillStyle=yn,Ce.fillRect(0,0,Oe,Be),ye.beforeDraw&&ye.beforeDraw.call(this,Ce,be),!this.aborted&&(Ce.save(),Ce.translate(Oe/2,Be/2),Ce.rotate(le*Math.PI/180),Ce.scale(he,me),Ce.drawImage.apply(Ce,[ve].concat(Kt)),Ce.restore(),ye.drew&&ye.drew.call(this,Ce,be),!this.aborted)){var Sn=function(Bn){ie.aborted||ie.done({naturalWidth:oe,naturalHeight:ae,result:Bn})};be.toBlob?be.toBlob(Sn,ye.mimeType,ye.quality):Sn(toBlob(be.toDataURL(ye.mimeType,ye.quality)))}}},{key:"done",value:function(ne){var ie=ne.naturalWidth,oe=ne.naturalHeight,ae=ne.result,ce=this.file,le=this.image,ue=this.options;if(URL$1&&!ue.checkOrientation&&URL$1.revokeObjectURL(le.src),ae)if(ue.strict&&ae.size>ce.size&&ue.mimeType===ce.type&&!(ue.width>ie||ue.height>oe||ue.minWidth>ie||ue.minHeight>oe||ue.maxWidth<ie||ue.maxHeight<oe))ae=ce;else{var he=new Date;ae.lastModified=he.getTime(),ae.lastModifiedDate=he,ae.name=ce.name,ae.name&&ae.type!==ce.type&&(ae.name=ae.name.replace(REGEXP_EXTENSION,imageTypeToExtension(ae.type)))}else ae=ce;this.result=ae,ue.success&&ue.success.call(this,ae)}},{key:"fail",value:function(ne){var ie=this.options;if(ie.error)ie.error.call(this,ne);else throw ne}},{key:"abort",value:function(){this.aborted||(this.aborted=!0,this.reader?this.reader.abort():this.image.complete?this.fail(new Error("The compression process has been aborted.")):(this.image.onload=null,this.image.onabort()))}}],[{key:"noConflict",value:function(){return window.Compressor=AnotherCompressor,re}},{key:"setDefaults",value:function(ne){_extends(DEFAULTS,ne)}}]),re}();const getMimeType=re=>new Promise(ee=>{const ne=new FileReader;ne.onloadend=function(ie){if(ie.target.readyState===FileReader.DONE){const oe=new Uint8Array(ie.target.result),ae=[];oe.forEach(ue=>{ae.push(ue.toString(16))});const ce=ae.join("").toUpperCase();let le;switch(ce){case"7BA2020":le=MIMETYPE.GLTF;break;case"676C5446":le=MIMETYPE.GLB;break;default:le="Unknown MimeType"}ee(le)}},ne.onerror=()=>ee("Unknown MimeType"),ne.readAsArrayBuffer(re.slice(0,4))}),extensionFromMimetype=re=>{switch(re){case MIMETYPE.JPEG:return"jpg";case MIMETYPE.PNG:return"png";case MIMETYPE.GIF:return"gif";default:return"jpg"}},removeExtension=re=>re.split(".").slice(0,-1).join("."),getImageDimensions=async re=>await new Promise((ee,ne)=>{if(re){const ie=new Image;ie.src=re.reader,ie.onload=function(){ee({imageWidth:ie.width,imageHeight:ie.height})},ie.onerror=oe=>{ee({imageWidth:0,imageHeight:0})};return}ee({imageWidth:0,imageHeight:0})}),generateCompressedImage=async(re,ee)=>{if(!re.file)return;const ne=await compressImage(re.file,ee),ie=ne.type,oe=await ne.arrayBuffer(),ae=await blobToDataURL(ne);return{mimeType:ie,buffer:oe,reader:ae}},blobToDataURL=async re=>new Promise((ee,ne)=>{const ie=new FileReader;ie.onerror=ne,ie.onload=oe=>ee(ie.result),ie.readAsDataURL(re)}),compressImage=(re,ee)=>new Promise((ne,ie)=>{new Compressor(re,{...ee,success(oe){ne(oe)},error(oe){ie(oe)}})}),generateCoverAndThumbnail=async re=>{if(re.mimeType===MIMETYPE.GIF)return{cover:re,thumbnail:re};console.debug("Generating cover");const ee=await generateCompressedImage(re,COVER_COMPRESSOR_OPTIONS);console.debug("Generating thumbnail");const ne=await generateCompressedImage(re,THUMBNAIL_COMPRESSOR_OPTIONS);return{cover:ee,thumbnail:ne}},generateTypedArtCoverImage=async(re,ee,ne,ie)=>{if(!re||re.trim().length===0)throw new Error("Input text must not be empty");ne=ne||1024;const oe=(Ne,Ie)=>{const ke=document.createElement("canvas");ke.width=Ne,ke.height=Ie;const De=ke.getContext("2d");if(!De)throw new Error("Could not create canvas context");return De},ae=ee?"Iosevka":"Source Sans Pro",ce=.75,le=16;let ue=Math.max(le,ne*ce);const he=`${ue}px ${ae}`,fe=oe(ne,ne);fe.font=he,fe.filter="grayscale(100%)",fe.fillStyle="transparent",fe.fillRect(0,0,ne,ne),fe.fillStyle="white";let me=re.split(`
`).filter((Ne,Ie,ke)=>Ne.trim()!==""||Ie===ke.length-1||ke[Ie+1].trim()!=="");const ge=50,ve=ne-ge*2,ye=ne-ge*2,be=me.reduce((Ne,Ie)=>fe.measureText(Ie).width>fe.measureText(Ne).width?Ie:Ne,"");let Ce=fe.measureText(")").actualBoundingBoxAscent+fe.measureText(")").actualBoundingBoxDescent+5,Se=fe.measureText(be).width;for(;(me.length*Ce>ye||Se>ve)&&(ue-=1,fe.font=`${ue}px ${ae}`,!(ue<=le));)Se=fe.measureText(be).width,Ce=fe.measureText(")").actualBoundingBoxAscent+fe.measureText(")").actualBoundingBoxDescent+5;Se>ve&&(me=[re.split(`
`)[0].substring(0,Math.floor(ve/ue)-3)+"..."]),Ce=fe.measureText(")").actualBoundingBoxAscent+fe.measureText(")").actualBoundingBoxDescent+5;const $e=me.length*Ce,Te=(ne-$e)/2;return fe.imageSmoothingEnabled=!0,fe.imageSmoothingQuality="high",me.forEach((Ne,Ie)=>{let ke=ge;if(ie){const De=fe.measureText(Ne).width;ke=(ne-De)/2}fe.fillText(Ne,ke,Te+(Ie+1)*Ce)}),new Promise((Ne,Ie)=>{fe.canvas.toBlob(ke=>{if(!ke){Ie(new Error("Failed to generate image"));return}const De=new File([ke],"Generated Cover.png",{type:"image/png"});Ne(De)},"image/png")})},generateMidiCover=async(re,ee)=>new Promise((ne,ie)=>{var ve;const ce=document.createElement("canvas");ce.width=1024,ce.height=1024;const le=ce.getContext("2d");if(!le){ie(new Error("Could not create canvas context"));return}le.clearRect(0,0,ce.width,ce.height);const ue=ee.tracks,he=lodashExports.truncate(re||((ve=ee==null?void 0:ee.tracks)==null?void 0:ve[0].name)||"Midi Track",{length:50});le.strokeStyle="white",le.lineWidth=5,le.strokeRect(0,0,ce.width,ce.height);const fe=ce.width-2*30,ge=(ce.height-2*30)/128;le.font="40px Arial",le.fillStyle="white",le.textAlign="center",le.fillText(he,ce.width/2,30+40),le.fillText("(MIDI)",ce.width/2,30+90),ue.forEach((ye,be)=>{const Ce=ye.notes,Se=Ce.reduce((Te,Ne)=>Math.max(Te,Ne.time+Ne.duration),0),$e=.5+be/ue.length*.5;le.fillStyle=`rgba(255, 255, 255, ${$e})`,Ce.forEach(Te=>{const Ne=30+Te.time*fe/Se,Ie=ce.height-30-Te.midi*ge,ke=Te.duration*fe/Se,De=5;le.fillRect(Ne,Ie,ke,De)})}),ce.toBlob(ye=>{if(!ye){ie(new Error("Failed to generate image"));return}const be=new File([ye],"Generated_MIDI_Cover.png",{type:"image/png"});ne(be)},"image/png")}),convertFileToFileForm=async re=>{const ee=re.type===""?await getMimeType(re):re.type,ne=Buffer.from(await re.arrayBuffer()),ie=re.name+".png";let oe=new FileReader;const ae=new Blob([ne],{type:ee});oe=await blobToDataURL(ae);const ce={mimeType:ee,fileName:ie+".png",fileSize:re.size};return{title:ie,mimeType:ee,file:re,buffer:ne,reader:oe,format:ce}};async function processMidiData(re,ee){try{const ne=await new Midi.Midi.fromUrl(re),ie=parseInt(ee)/100;ne.tracks.forEach(ce=>{ce.notes.forEach(le=>{le.velocity*=ie})});const oe=ne.toArray(),ae=new Blob([oe],{type:"audio/midi"});return URL.createObjectURL(ae)}catch(ne){throw console.error("Failed to modify MIDI data:",ne),ne}}const processMidiCover=async re=>{const ee=new Midi.Midi(re.artifact.buffer);let ne=await generateMidiCover(re.title,ee);return re.cover=await convertFileToFileForm(ne),re};var PitchClass;(function(re){re[re.None=0]="None",re[re.C=1]="C",re[re.Cs=2]="Cs",re[re.D=3]="D",re[re.Eb=4]="Eb",re[re.E=5]="E",re[re.F=6]="F",re[re.Fs=7]="Fs",re[re.G=8]="G",re[re.Ab=9]="Ab",re[re.A=10]="A",re[re.Bb=11]="Bb",re[re.B=12]="B"})(PitchClass||(PitchClass={}));var ChordFamily;(function(re){re[re.None=0]="None",re[re.Maj=1]="Maj",re[re.Min=2]="Min",re[re.Aug=3]="Aug",re[re.Dim=4]="Dim",re[re.Seven=5]="Seven",re[re.Maj7=6]="Maj7",re[re.Min7=7]="Min7",re[re.Min7b5=8]="Min7b5"})(ChordFamily||(ChordFamily={}));function FFT(re){if(this.size=re|0,this.size<=1||this.size&this.size-1)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=re<<1;for(var ee=new Array(this.size*2),ne=0;ne<ee.length;ne+=2){const ue=Math.PI*ne/this.size;ee[ne]=Math.cos(ue),ee[ne+1]=-Math.sin(ue)}this.table=ee;for(var ie=0,oe=1;this.size>oe;oe<<=1)ie++;this._width=ie%2===0?ie-1:ie,this._bitrev=new Array(1<<this._width);for(var ae=0;ae<this._bitrev.length;ae++){this._bitrev[ae]=0;for(var ce=0;ce<this._width;ce+=2){var le=this._width-ce-2;this._bitrev[ae]|=(ae>>>ce&3)<<le}}this._out=null,this._data=null,this._inv=0}FFT.prototype.fromComplexArray=function re(ee,ne){for(var ie=ne||new Array(ee.length>>>1),oe=0;oe<ee.length;oe+=2)ie[oe>>>1]=ee[oe];return ie};FFT.prototype.createComplexArray=function re(){const ee=new Array(this._csize);for(var ne=0;ne<ee.length;ne++)ee[ne]=0;return ee};FFT.prototype.toComplexArray=function re(ee,ne){for(var ie=ne||this.createComplexArray(),oe=0;oe<ie.length;oe+=2)ie[oe]=ee[oe>>>1],ie[oe+1]=0;return ie};FFT.prototype.completeSpectrum=function re(ee){for(var ne=this._csize,ie=ne>>>1,oe=2;oe<ie;oe+=2)ee[ne-oe]=ee[oe],ee[ne-oe+1]=-ee[oe+1]};FFT.prototype.transform=function re(ee,ne){if(ee===ne)throw new Error("Input and output buffers must be different");this._out=ee,this._data=ne,this._inv=0,this._transform4(),this._out=null,this._data=null};FFT.prototype.realTransform=function re(ee,ne){if(ee===ne)throw new Error("Input and output buffers must be different");this._out=ee,this._data=ne,this._inv=0,this._realTransform4(),this._out=null,this._data=null};FFT.prototype.inverseTransform=function re(ee,ne){if(ee===ne)throw new Error("Input and output buffers must be different");this._out=ee,this._data=ne,this._inv=1,this._transform4();for(var ie=0;ie<ee.length;ie++)ee[ie]/=this.size;this._out=null,this._data=null};FFT.prototype._transform4=function re(){var ee=this._out,ne=this._csize,ie=this._width,oe=1<<ie,ae=ne/oe<<1,ce,le,ue=this._bitrev;if(ae===4)for(ce=0,le=0;ce<ne;ce+=ae,le++){const be=ue[le];this._singleTransform2(ce,be,oe)}else for(ce=0,le=0;ce<ne;ce+=ae,le++){const be=ue[le];this._singleTransform4(ce,be,oe)}var he=this._inv?-1:1,fe=this.table;for(oe>>=2;oe>=2;oe>>=2){ae=ne/oe<<1;var me=ae>>>2;for(ce=0;ce<ne;ce+=ae)for(var ge=ce+me,ve=ce,ye=0;ve<ge;ve+=2,ye+=oe){const be=ve,Ce=be+me,Se=Ce+me,$e=Se+me,Te=ee[be],Ne=ee[be+1],Ie=ee[Ce],ke=ee[Ce+1],De=ee[Se],Oe=ee[Se+1],Be=ee[$e],Me=ee[$e+1],Le=Te,je=Ne,ze=fe[ye],Ve=he*fe[ye+1],He=Ie*ze-ke*Ve,We=Ie*Ve+ke*ze,Ye=fe[2*ye],Ue=he*fe[2*ye+1],Ke=De*Ye-Oe*Ue,Xe=De*Ue+Oe*Ye,Vt=fe[3*ye],Wt=he*fe[3*ye+1],Kt=Be*Vt-Me*Wt,tn=Be*Wt+Me*Vt,Xt=Le+Ke,dn=je+Xe,nn=Le-Ke,rn=je-Xe,vn=He+Kt,yn=We+tn,Sn=he*(He-Kt),kn=he*(We-tn),Bn=Xt+vn,Dn=dn+yn,Je=Xt-vn,Yt=dn-yn,an=nn+kn,An=rn-Sn,fn=nn-kn,mn=rn+Sn;ee[be]=Bn,ee[be+1]=Dn,ee[Ce]=an,ee[Ce+1]=An,ee[Se]=Je,ee[Se+1]=Yt,ee[$e]=fn,ee[$e+1]=mn}}};FFT.prototype._singleTransform2=function re(ee,ne,ie){const oe=this._out,ae=this._data,ce=ae[ne],le=ae[ne+1],ue=ae[ne+ie],he=ae[ne+ie+1],fe=ce+ue,me=le+he,ge=ce-ue,ve=le-he;oe[ee]=fe,oe[ee+1]=me,oe[ee+2]=ge,oe[ee+3]=ve};FFT.prototype._singleTransform4=function re(ee,ne,ie){const oe=this._out,ae=this._data,ce=this._inv?-1:1,le=ie*2,ue=ie*3,he=ae[ne],fe=ae[ne+1],me=ae[ne+ie],ge=ae[ne+ie+1],ve=ae[ne+le],ye=ae[ne+le+1],be=ae[ne+ue],Ce=ae[ne+ue+1],Se=he+ve,$e=fe+ye,Te=he-ve,Ne=fe-ye,Ie=me+be,ke=ge+Ce,De=ce*(me-be),Oe=ce*(ge-Ce),Be=Se+Ie,Me=$e+ke,Le=Te+Oe,je=Ne-De,ze=Se-Ie,Ve=$e-ke,He=Te-Oe,We=Ne+De;oe[ee]=Be,oe[ee+1]=Me,oe[ee+2]=Le,oe[ee+3]=je,oe[ee+4]=ze,oe[ee+5]=Ve,oe[ee+6]=He,oe[ee+7]=We};FFT.prototype._realTransform4=function re(){var ee=this._out,ne=this._csize,ie=this._width,oe=1<<ie,ae=ne/oe<<1,ce,le,ue=this._bitrev;if(ae===4)for(ce=0,le=0;ce<ne;ce+=ae,le++){const Cs=ue[le];this._singleRealTransform2(ce,Cs>>>1,oe>>>1)}else for(ce=0,le=0;ce<ne;ce+=ae,le++){const Cs=ue[le];this._singleRealTransform4(ce,Cs>>>1,oe>>>1)}var he=this._inv?-1:1,fe=this.table;for(oe>>=2;oe>=2;oe>>=2){ae=ne/oe<<1;var me=ae>>>1,ge=me>>>1,ve=ge>>>1;for(ce=0;ce<ne;ce+=ae)for(var ye=0,be=0;ye<=ve;ye+=2,be+=oe){var Ce=ce+ye,Se=Ce+ge,$e=Se+ge,Te=$e+ge,Ne=ee[Ce],Ie=ee[Ce+1],ke=ee[Se],De=ee[Se+1],Oe=ee[$e],Be=ee[$e+1],Me=ee[Te],Le=ee[Te+1],je=Ne,ze=Ie,Ve=fe[be],He=he*fe[be+1],We=ke*Ve-De*He,Ye=ke*He+De*Ve,Ue=fe[2*be],Ke=he*fe[2*be+1],Xe=Oe*Ue-Be*Ke,Vt=Oe*Ke+Be*Ue,Wt=fe[3*be],Kt=he*fe[3*be+1],tn=Me*Wt-Le*Kt,Xt=Me*Kt+Le*Wt,dn=je+Xe,nn=ze+Vt,rn=je-Xe,vn=ze-Vt,yn=We+tn,Sn=Ye+Xt,kn=he*(We-tn),Bn=he*(Ye-Xt),Dn=dn+yn,Je=nn+Sn,Yt=rn+Bn,an=vn-kn;if(ee[Ce]=Dn,ee[Ce+1]=Je,ee[Se]=Yt,ee[Se+1]=an,ye===0){var An=dn-yn,fn=nn-Sn;ee[$e]=An,ee[$e+1]=fn;continue}if(ye!==ve){var mn=rn,Tn=-vn,Vn=dn,Gn=-nn,Pn=-he*Bn,Un=-he*kn,ls=-he*Sn,Rn=-he*yn,Kn=mn+Pn,pn=Tn+Un,sn=Vn+Rn,Nn=Gn-ls,wn=ce+ge-ye,is=ce+me-ye;ee[wn]=Kn,ee[wn+1]=pn,ee[is]=sn,ee[is+1]=Nn}}}};FFT.prototype._singleRealTransform2=function re(ee,ne,ie){const oe=this._out,ae=this._data,ce=ae[ne],le=ae[ne+ie],ue=ce+le,he=ce-le;oe[ee]=ue,oe[ee+1]=0,oe[ee+2]=he,oe[ee+3]=0};FFT.prototype._singleRealTransform4=function re(ee,ne,ie){const oe=this._out,ae=this._data,ce=this._inv?-1:1,le=ie*2,ue=ie*3,he=ae[ne],fe=ae[ne+ie],me=ae[ne+le],ge=ae[ne+ue],ve=he+me,ye=he-me,be=fe+ge,Ce=ce*(fe-ge),Se=ve+be,$e=ye,Te=-Ce,Ne=ve-be,Ie=ye,ke=Ce;oe[ee]=Se,oe[ee+1]=0,oe[ee+2]=$e,oe[ee+3]=Te,oe[ee+4]=Ne,oe[ee+5]=0,oe[ee+6]=Ie,oe[ee+7]=ke};var ndarrayOps={};function unique_pred(re,ee){for(var ne=1,ie=re.length,oe=re[0],ae=re[0],ce=1;ce<ie;++ce)if(ae=oe,oe=re[ce],ee(oe,ae)){if(ce===ne){ne++;continue}re[ne++]=oe}return re.length=ne,re}function unique_eq(re){for(var ee=1,ne=re.length,ie=re[0],oe=re[0],ae=1;ae<ne;++ae,oe=ie)if(oe=ie,ie=re[ae],ie!==oe){if(ae===ee){ee++;continue}re[ee++]=ie}return re.length=ee,re}function unique(re,ee,ne){return re.length===0?re:ee?(ne||re.sort(ee),unique_pred(re,ee)):(ne||re.sort(),unique_eq(re))}var uniq$4=unique,uniq$3=uniq$4;function innerFill(re,ee,ne){var ie=re.length,oe=ee.arrayArgs.length,ae=ee.indexArgs.length>0,ce=[],le=[],ue=0,he=0,fe,me;for(fe=0;fe<ie;++fe)le.push(["i",fe,"=0"].join(""));for(me=0;me<oe;++me)for(fe=0;fe<ie;++fe)he=ue,ue=re[fe],fe===0?le.push(["d",me,"s",fe,"=t",me,"p",ue].join("")):le.push(["d",me,"s",fe,"=(t",me,"p",ue,"-s",he,"*t",me,"p",he,")"].join(""));for(le.length>0&&ce.push("var "+le.join(",")),fe=ie-1;fe>=0;--fe)ue=re[fe],ce.push(["for(i",fe,"=0;i",fe,"<s",ue,";++i",fe,"){"].join(""));for(ce.push(ne),fe=0;fe<ie;++fe){for(he=ue,ue=re[fe],me=0;me<oe;++me)ce.push(["p",me,"+=d",me,"s",fe].join(""));ae&&(fe>0&&ce.push(["index[",he,"]-=s",he].join("")),ce.push(["++index[",ue,"]"].join(""))),ce.push("}")}return ce.join(`
`)}function outerFill(re,ee,ne,ie){for(var oe=ee.length,ae=ne.arrayArgs.length,ce=ne.blockSize,le=ne.indexArgs.length>0,ue=[],he=0;he<ae;++he)ue.push(["var offset",he,"=p",he].join(""));for(var he=re;he<oe;++he)ue.push(["for(var j"+he+"=SS[",ee[he],"]|0;j",he,">0;){"].join("")),ue.push(["if(j",he,"<",ce,"){"].join("")),ue.push(["s",ee[he],"=j",he].join("")),ue.push(["j",he,"=0"].join("")),ue.push(["}else{s",ee[he],"=",ce].join("")),ue.push(["j",he,"-=",ce,"}"].join("")),le&&ue.push(["index[",ee[he],"]=j",he].join(""));for(var he=0;he<ae;++he){for(var fe=["offset"+he],me=re;me<oe;++me)fe.push(["j",me,"*t",he,"p",ee[me]].join(""));ue.push(["p",he,"=(",fe.join("+"),")"].join(""))}ue.push(innerFill(ee,ne,ie));for(var he=re;he<oe;++he)ue.push("}");return ue.join(`
`)}function countMatches(re){for(var ee=0,ne=re[0].length;ee<ne;){for(var ie=1;ie<re.length;++ie)if(re[ie][ee]!==re[0][ee])return ee;++ee}return ee}function processBlock(re,ee,ne){for(var ie=re.body,oe=[],ae=[],ce=0;ce<re.args.length;++ce){var le=re.args[ce];if(!(le.count<=0)){var ue=new RegExp(le.name,"g"),he="",fe=ee.arrayArgs.indexOf(ce);switch(ee.argTypes[ce]){case"offset":var me=ee.offsetArgIndex.indexOf(ce),ge=ee.offsetArgs[me];fe=ge.array,he="+q"+me;case"array":he="p"+fe+he;var ve="l"+ce,ye="a"+fe;if(ee.arrayBlockIndices[fe]===0)le.count===1?ne[fe]==="generic"?le.lvalue?(oe.push(["var ",ve,"=",ye,".get(",he,")"].join("")),ie=ie.replace(ue,ve),ae.push([ye,".set(",he,",",ve,")"].join(""))):ie=ie.replace(ue,[ye,".get(",he,")"].join("")):ie=ie.replace(ue,[ye,"[",he,"]"].join("")):ne[fe]==="generic"?(oe.push(["var ",ve,"=",ye,".get(",he,")"].join("")),ie=ie.replace(ue,ve),le.lvalue&&ae.push([ye,".set(",he,",",ve,")"].join(""))):(oe.push(["var ",ve,"=",ye,"[",he,"]"].join("")),ie=ie.replace(ue,ve),le.lvalue&&ae.push([ye,"[",he,"]=",ve].join("")));else{for(var be=[le.name],Ce=[he],Se=0;Se<Math.abs(ee.arrayBlockIndices[fe]);Se++)be.push("\\s*\\[([^\\]]+)\\]"),Ce.push("$"+(Se+1)+"*t"+fe+"b"+Se);if(ue=new RegExp(be.join(""),"g"),he=Ce.join("+"),ne[fe]==="generic")throw new Error("cwise: Generic arrays not supported in combination with blocks!");ie=ie.replace(ue,[ye,"[",he,"]"].join(""))}break;case"scalar":ie=ie.replace(ue,"Y"+ee.scalarArgs.indexOf(ce));break;case"index":ie=ie.replace(ue,"index");break;case"shape":ie=ie.replace(ue,"shape");break}}}return[oe.join(`
`),ie,ae.join(`
`)].join(`
`).trim()}function typeSummary(re){for(var ee=new Array(re.length),ne=!0,ie=0;ie<re.length;++ie){var oe=re[ie],ae=oe.match(/\d+/);ae?ae=ae[0]:ae="",oe.charAt(0)===0?ee[ie]="u"+oe.charAt(1)+ae:ee[ie]=oe.charAt(0)+ae,ie>0&&(ne=ne&&ee[ie]===ee[ie-1])}return ne?ee[0]:ee.join("")}function generateCWiseOp(re,ee){for(var ne=ee[1].length-Math.abs(re.arrayBlockIndices[0])|0,ie=new Array(re.arrayArgs.length),oe=new Array(re.arrayArgs.length),ae=0;ae<re.arrayArgs.length;++ae)oe[ae]=ee[2*ae],ie[ae]=ee[2*ae+1];for(var ce=[],le=[],ue=[],he=[],fe=[],ae=0;ae<re.arrayArgs.length;++ae){re.arrayBlockIndices[ae]<0?(ue.push(0),he.push(ne),ce.push(ne),le.push(ne+re.arrayBlockIndices[ae])):(ue.push(re.arrayBlockIndices[ae]),he.push(re.arrayBlockIndices[ae]+ne),ce.push(0),le.push(re.arrayBlockIndices[ae]));for(var me=[],ge=0;ge<ie[ae].length;ge++)ue[ae]<=ie[ae][ge]&&ie[ae][ge]<he[ae]&&me.push(ie[ae][ge]-ue[ae]);fe.push(me)}for(var ve=["SS"],ye=["'use strict'"],be=[],ge=0;ge<ne;++ge)be.push(["s",ge,"=SS[",ge,"]"].join(""));for(var ae=0;ae<re.arrayArgs.length;++ae){ve.push("a"+ae),ve.push("t"+ae),ve.push("p"+ae);for(var ge=0;ge<ne;++ge)be.push(["t",ae,"p",ge,"=t",ae,"[",ue[ae]+ge,"]"].join(""));for(var ge=0;ge<Math.abs(re.arrayBlockIndices[ae]);++ge)be.push(["t",ae,"b",ge,"=t",ae,"[",ce[ae]+ge,"]"].join(""))}for(var ae=0;ae<re.scalarArgs.length;++ae)ve.push("Y"+ae);if(re.shapeArgs.length>0&&be.push("shape=SS.slice(0)"),re.indexArgs.length>0){for(var Ce=new Array(ne),ae=0;ae<ne;++ae)Ce[ae]="0";be.push(["index=[",Ce.join(","),"]"].join(""))}for(var ae=0;ae<re.offsetArgs.length;++ae){for(var Se=re.offsetArgs[ae],$e=[],ge=0;ge<Se.offset.length;++ge)Se.offset[ge]!==0&&(Se.offset[ge]===1?$e.push(["t",Se.array,"p",ge].join("")):$e.push([Se.offset[ge],"*t",Se.array,"p",ge].join("")));$e.length===0?be.push("q"+ae+"=0"):be.push(["q",ae,"=",$e.join("+")].join(""))}var Te=uniq$3([].concat(re.pre.thisVars).concat(re.body.thisVars).concat(re.post.thisVars));be=be.concat(Te),be.length>0&&ye.push("var "+be.join(","));for(var ae=0;ae<re.arrayArgs.length;++ae)ye.push("p"+ae+"|=0");re.pre.body.length>3&&ye.push(processBlock(re.pre,re,oe));var Ne=processBlock(re.body,re,oe),Ie=countMatches(fe);Ie<ne?ye.push(outerFill(Ie,fe[0],re,Ne)):ye.push(innerFill(fe[0],re,Ne)),re.post.body.length>3&&ye.push(processBlock(re.post,re,oe)),re.debug&&console.log("-----Generated cwise routine for ",ee,`:
`+ye.join(`
`)+`
----------`);var ke=[re.funcName||"unnamed","_cwise_loop_",ie[0].join("s"),"m",Ie,typeSummary(oe)].join(""),De=new Function(["function ",ke,"(",ve.join(","),"){",ye.join(`
`),"} return ",ke].join(""));return De()}var compile$3=generateCWiseOp,compile$2=compile$3;function createThunk$1(re){var ee=["'use strict'","var CACHED={}"],ne=[],ie=re.funcName+"_cwise_thunk";ee.push(["return function ",ie,"(",re.shimArgs.join(","),"){"].join(""));for(var oe=[],ae=[],ce=[["array",re.arrayArgs[0],".shape.slice(",Math.max(0,re.arrayBlockIndices[0]),re.arrayBlockIndices[0]<0?","+re.arrayBlockIndices[0]+")":")"].join("")],le=[],ue=[],he=0;he<re.arrayArgs.length;++he){var fe=re.arrayArgs[he];ne.push(["t",fe,"=array",fe,".dtype,","r",fe,"=array",fe,".order"].join("")),oe.push("t"+fe),oe.push("r"+fe),ae.push("t"+fe),ae.push("r"+fe+".join()"),ce.push("array"+fe+".data"),ce.push("array"+fe+".stride"),ce.push("array"+fe+".offset|0"),he>0&&(le.push("array"+re.arrayArgs[0]+".shape.length===array"+fe+".shape.length+"+(Math.abs(re.arrayBlockIndices[0])-Math.abs(re.arrayBlockIndices[he]))),ue.push("array"+re.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,re.arrayBlockIndices[0])+"]===array"+fe+".shape[shapeIndex+"+Math.max(0,re.arrayBlockIndices[he])+"]"))}re.arrayArgs.length>1&&(ee.push("if (!("+le.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),ee.push("for(var shapeIndex=array"+re.arrayArgs[0]+".shape.length-"+Math.abs(re.arrayBlockIndices[0])+"; shapeIndex-->0;) {"),ee.push("if (!("+ue.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),ee.push("}"));for(var he=0;he<re.scalarArgs.length;++he)ce.push("scalar"+re.scalarArgs[he]);ne.push(["type=[",ae.join(","),"].join()"].join("")),ne.push("proc=CACHED[type]"),ee.push("var "+ne.join(",")),ee.push(["if(!proc){","CACHED[type]=proc=compile([",oe.join(","),"])}","return proc(",ce.join(","),")}"].join("")),re.debug&&console.log(`-----Generated thunk:
`+ee.join(`
`)+`
----------`);var me=new Function("compile",ee.join(`
`));return me(compile$2.bind(void 0,re))}var thunk=createThunk$1,createThunk=thunk;function Procedure(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function compileCwise(re){var ee=new Procedure;ee.pre=re.pre,ee.body=re.body,ee.post=re.post;var ne=re.args.slice(0);ee.argTypes=ne;for(var ie=0;ie<ne.length;++ie){var oe=ne[ie];if(oe==="array"||typeof oe=="object"&&oe.blockIndices){if(ee.argTypes[ie]="array",ee.arrayArgs.push(ie),ee.arrayBlockIndices.push(oe.blockIndices?oe.blockIndices:0),ee.shimArgs.push("array"+ie),ie<ee.pre.args.length&&ee.pre.args[ie].count>0)throw new Error("cwise: pre() block may not reference array args");if(ie<ee.post.args.length&&ee.post.args[ie].count>0)throw new Error("cwise: post() block may not reference array args")}else if(oe==="scalar")ee.scalarArgs.push(ie),ee.shimArgs.push("scalar"+ie);else if(oe==="index"){if(ee.indexArgs.push(ie),ie<ee.pre.args.length&&ee.pre.args[ie].count>0)throw new Error("cwise: pre() block may not reference array index");if(ie<ee.body.args.length&&ee.body.args[ie].lvalue)throw new Error("cwise: body() block may not write to array index");if(ie<ee.post.args.length&&ee.post.args[ie].count>0)throw new Error("cwise: post() block may not reference array index")}else if(oe==="shape"){if(ee.shapeArgs.push(ie),ie<ee.pre.args.length&&ee.pre.args[ie].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(ie<ee.body.args.length&&ee.body.args[ie].lvalue)throw new Error("cwise: body() block may not write to array shape");if(ie<ee.post.args.length&&ee.post.args[ie].lvalue)throw new Error("cwise: post() block may not write to array shape")}else if(typeof oe=="object"&&oe.offset)ee.argTypes[ie]="offset",ee.offsetArgs.push({array:oe.array,offset:oe.offset}),ee.offsetArgIndex.push(ie);else throw new Error("cwise: Unknown argument type "+ne[ie])}if(ee.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(ee.pre.args.length>ne.length)throw new Error("cwise: Too many arguments in pre() block");if(ee.body.args.length>ne.length)throw new Error("cwise: Too many arguments in body() block");if(ee.post.args.length>ne.length)throw new Error("cwise: Too many arguments in post() block");return ee.debug=!!re.printCode||!!re.debug,ee.funcName=re.funcName||"cwise",ee.blockSize=re.blockSize||64,createThunk(ee)}var compiler=compileCwise;(function(re){var ee=compiler,ne={body:"",args:[],thisVars:[],localVars:[]};function ie(ge){if(!ge)return ne;for(var ve=0;ve<ge.args.length;++ve){var ye=ge.args[ve];ve===0?ge.args[ve]={name:ye,lvalue:!0,rvalue:!!ge.rvalue,count:ge.count||1}:ge.args[ve]={name:ye,lvalue:!1,rvalue:!0,count:1}}return ge.thisVars||(ge.thisVars=[]),ge.localVars||(ge.localVars=[]),ge}function oe(ge){return ee({args:ge.args,pre:ie(ge.pre),body:ie(ge.body),post:ie(ge.proc),funcName:ge.funcName})}function ae(ge){for(var ve=[],ye=0;ye<ge.args.length;++ye)ve.push("a"+ye);var be=new Function("P",["return function ",ge.funcName,"_ndarrayops(",ve.join(","),") {P(",ve.join(","),");return a0}"].join(""));return be(oe(ge))}var ce={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};(function(){for(var ge in ce){var ve=ce[ge];re[ge]=ae({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+ve+"c"},funcName:ge}),re[ge+"eq"]=ae({args:["array","array"],body:{args:["a","b"],body:"a"+ve+"=b"},rvalue:!0,funcName:ge+"eq"}),re[ge+"s"]=ae({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+ve+"s"},funcName:ge+"s"}),re[ge+"seq"]=ae({args:["array","scalar"],body:{args:["a","s"],body:"a"+ve+"=s"},rvalue:!0,funcName:ge+"seq"})}})();var le={not:"!",bnot:"~",neg:"-",recip:"1.0/"};(function(){for(var ge in le){var ve=le[ge];re[ge]=ae({args:["array","array"],body:{args:["a","b"],body:"a="+ve+"b"},funcName:ge}),re[ge+"eq"]=ae({args:["array"],body:{args:["a"],body:"a="+ve+"a"},rvalue:!0,count:2,funcName:ge+"eq"})}})();var ue={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};(function(){for(var ge in ue){var ve=ue[ge];re[ge]=ae({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+ve+"c"},funcName:ge}),re[ge+"s"]=ae({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+ve+"s"},funcName:ge+"s"}),re[ge+"eq"]=ae({args:["array","array"],body:{args:["a","b"],body:"a=a"+ve+"b"},rvalue:!0,count:2,funcName:ge+"eq"}),re[ge+"seq"]=ae({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+ve+"s"},rvalue:!0,count:2,funcName:ge+"seq"})}})();var he=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];(function(){for(var ge=0;ge<he.length;++ge){var ve=he[ge];re[ve]=ae({args:["array","array"],pre:{args:[],body:"this_f=Math."+ve,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:ve}),re[ve+"eq"]=ae({args:["array"],pre:{args:[],body:"this_f=Math."+ve,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:ve+"eq"})}})();var fe=["max","min","atan2","pow"];(function(){for(var ge=0;ge<fe.length;++ge){var ve=fe[ge];re[ve]=ae({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+ve,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:ve}),re[ve+"s"]=ae({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+ve,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:ve+"s"}),re[ve+"eq"]=ae({args:["array","array"],pre:{args:[],body:"this_f=Math."+ve,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:ve+"eq"}),re[ve+"seq"]=ae({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+ve,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:ve+"seq"})}})();var me=["atan2","pow"];(function(){for(var ge=0;ge<me.length;++ge){var ve=me[ge];re[ve+"op"]=ae({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+ve,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:ve+"op"}),re[ve+"ops"]=ae({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+ve,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:ve+"ops"}),re[ve+"opeq"]=ae({args:["array","array"],pre:{args:[],body:"this_f=Math."+ve,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:ve+"opeq"}),re[ve+"opseq"]=ae({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+ve,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:ve+"opseq"})}})(),re.any=ee({args:["array"],pre:ne,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),re.all=ee({args:["array"],pre:ne,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),re.sum=ee({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),re.prod=ee({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),re.norm2squared=ee({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),re.norm2=ee({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),re.norminf=ee({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),re.norm1=ee({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),re.sup=ee({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),re.inf=ee({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),re.argmin=ee({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),re.argmax=ee({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),re.random=ae({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),re.assign=ae({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),re.assigns=ae({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),re.equals=ee({args:["array","array"],pre:ne,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})})(ndarrayOps);var twiddle={},INT_BITS=32;twiddle.INT_BITS=INT_BITS;twiddle.INT_MAX=2147483647;twiddle.INT_MIN=-1<<INT_BITS-1;twiddle.sign=function(re){return(re>0)-(re<0)};twiddle.abs=function(re){var ee=re>>INT_BITS-1;return(re^ee)-ee};twiddle.min=function(re,ee){return ee^(re^ee)&-(re<ee)};twiddle.max=function(re,ee){return re^(re^ee)&-(re<ee)};twiddle.isPow2=function(re){return!(re&re-1)&&!!re};twiddle.log2=function(re){var ee,ne;return ee=(re>65535)<<4,re>>>=ee,ne=(re>255)<<3,re>>>=ne,ee|=ne,ne=(re>15)<<2,re>>>=ne,ee|=ne,ne=(re>3)<<1,re>>>=ne,ee|=ne,ee|re>>1};twiddle.log10=function(re){return re>=1e9?9:re>=1e8?8:re>=1e7?7:re>=1e6?6:re>=1e5?5:re>=1e4?4:re>=1e3?3:re>=100?2:re>=10?1:0};twiddle.popCount=function(re){return re=re-(re>>>1&1431655765),re=(re&858993459)+(re>>>2&858993459),(re+(re>>>4)&252645135)*16843009>>>24};function countTrailingZeros(re){var ee=32;return re&=-re,re&&ee--,re&65535&&(ee-=16),re&16711935&&(ee-=8),re&252645135&&(ee-=4),re&858993459&&(ee-=2),re&1431655765&&(ee-=1),ee}twiddle.countTrailingZeros=countTrailingZeros;twiddle.nextPow2=function(re){return re+=re===0,--re,re|=re>>>1,re|=re>>>2,re|=re>>>4,re|=re>>>8,re|=re>>>16,re+1};twiddle.prevPow2=function(re){return re|=re>>>1,re|=re>>>2,re|=re>>>4,re|=re>>>8,re|=re>>>16,re-(re>>>1)};twiddle.parity=function(re){return re^=re>>>16,re^=re>>>8,re^=re>>>4,re&=15,27030>>>re&1};var REVERSE_TABLE=new Array(256);(function(re){for(var ee=0;ee<256;++ee){var ne=ee,ie=ee,oe=7;for(ne>>>=1;ne;ne>>>=1)ie<<=1,ie|=ne&1,--oe;re[ee]=ie<<oe&255}})(REVERSE_TABLE);twiddle.reverse=function(re){return REVERSE_TABLE[re&255]<<24|REVERSE_TABLE[re>>>8&255]<<16|REVERSE_TABLE[re>>>16&255]<<8|REVERSE_TABLE[re>>>24&255]};twiddle.interleave2=function(re,ee){return re&=65535,re=(re|re<<8)&16711935,re=(re|re<<4)&252645135,re=(re|re<<2)&858993459,re=(re|re<<1)&1431655765,ee&=65535,ee=(ee|ee<<8)&16711935,ee=(ee|ee<<4)&252645135,ee=(ee|ee<<2)&858993459,ee=(ee|ee<<1)&1431655765,re|ee<<1};twiddle.deinterleave2=function(re,ee){return re=re>>>ee&1431655765,re=(re|re>>>1)&858993459,re=(re|re>>>2)&252645135,re=(re|re>>>4)&16711935,re=(re|re>>>16)&65535,re<<16>>16};twiddle.interleave3=function(re,ee,ne){return re&=1023,re=(re|re<<16)&4278190335,re=(re|re<<8)&251719695,re=(re|re<<4)&3272356035,re=(re|re<<2)&1227133513,ee&=1023,ee=(ee|ee<<16)&4278190335,ee=(ee|ee<<8)&251719695,ee=(ee|ee<<4)&3272356035,ee=(ee|ee<<2)&1227133513,re|=ee<<1,ne&=1023,ne=(ne|ne<<16)&4278190335,ne=(ne|ne<<8)&251719695,ne=(ne|ne<<4)&3272356035,ne=(ne|ne<<2)&1227133513,re|ne<<2};twiddle.deinterleave3=function(re,ee){return re=re>>>ee&1227133513,re=(re|re>>>2)&3272356035,re=(re|re>>>4)&251719695,re=(re|re>>>8)&4278190335,re=(re|re>>>16)&1023,re<<22>>22};twiddle.nextCombination=function(re){var ee=re|re-1;return ee+1|(~ee&-~ee)-1>>>countTrailingZeros(re)+1};function dupe_array(re,ee,ne){var ie=re[ne]|0;if(ie<=0)return[];var oe=new Array(ie),ae;if(ne===re.length-1)for(ae=0;ae<ie;++ae)oe[ae]=ee;else for(ae=0;ae<ie;++ae)oe[ae]=dupe_array(re,ee,ne+1);return oe}function dupe_number(re,ee){var ne,ie;for(ne=new Array(re),ie=0;ie<re;++ie)ne[ie]=ee;return ne}function dupe(re,ee){switch(typeof ee>"u"&&(ee=0),typeof re){case"number":if(re>0)return dupe_number(re|0,ee);break;case"object":if(typeof re.length=="number")return dupe_array(re,ee,0);break}return[]}var dup$1=dupe,dup=dup$1;buffer$2.Buffer;globalThis.__TYPEDARRAY_POOL||(globalThis.__TYPEDARRAY_POOL={UINT8:dup([32,0]),UINT16:dup([32,0]),UINT32:dup([32,0]),BIGUINT64:dup([32,0]),INT8:dup([32,0]),INT16:dup([32,0]),INT32:dup([32,0]),BIGINT64:dup([32,0]),FLOAT:dup([32,0]),DOUBLE:dup([32,0]),DATA:dup([32,0]),UINT8C:dup([32,0]),BUFFER:dup([32,0])});var POOL=globalThis.__TYPEDARRAY_POOL;POOL.UINT8C||(POOL.UINT8C=dup([32,0]));POOL.BIGUINT64||(POOL.BIGUINT64=dup([32,0]));POOL.BIGINT64||(POOL.BIGINT64=dup([32,0]));POOL.BUFFER||(POOL.BUFFER=dup([32,0]));POOL.DATA;POOL.BUFFER;var fftMatrix={exports:{}},bits=twiddle;function fft(re,ee,ne,ie,oe,ae,ce){re|=0,ee|=0,ne|=0,oe|=0,ae|=0,bits.isPow2(ne)?fftRadix2(re,ee,ne,ie,oe,ae):fftBluestein(re,ee,ne,ie,oe,ae,ce)}fftMatrix.exports=fft;function scratchMemory(re){return bits.isPow2(re)?0:2*re+4*bits.nextPow2(2*re+1)}fftMatrix.exports.scratchMemory=scratchMemory;function fftRadix2(re,ee,ne,ie,oe,ae){re|=0,ee|=0,ne|=0,oe|=0,ae|=0;var ce,le,ue,he,fe,me,ge,ve,ye,be,Ce,Se,$e,Te,Ne,Ie,ke,De,Oe,Be,Me,Le,je,ze,Ve;for(ce=ne,le=bits.log2(ce),De=0;De<ee;++De){for(ge=ce>>1,fe=0,ue=0;ue<ce-1;ue++){for(ue<fe&&($e=ie[oe+ue],ie[oe+ue]=ie[oe+fe],ie[oe+fe]=$e,$e=ie[ae+ue],ie[ae+ue]=ie[ae+fe],ie[ae+fe]=$e),me=ge;me<=fe;)fe-=me,me>>=1;fe+=me}for(Ce=-1,Se=0,be=1,ve=0;ve<le;ve++){for(ye=be,be<<=1,Ie=1,ke=0,fe=0;fe<ye;fe++){for(ue=fe;ue<ce;ue+=be)he=ue+ye,Oe=ie[oe+he],Be=ie[ae+he],Me=ie[oe+ue],Le=ie[ae+ue],je=Ie*(Oe+Be),ze=Oe*(ke-Ie),Ve=Be*(Ie+ke),Te=je-Ve,Ne=je+ze,ie[oe+he]=Me-Te,ie[ae+he]=Le-Ne,ie[oe+ue]+=Te,ie[ae+ue]+=Ne;je=Ce*(Ie+ke),ze=Ie*(Se-Ce),Ve=ke*(Ce+Se),Ie=je-Ve,ke=je+ze}Se=Math.sqrt((1-Ce)/2),re<0&&(Se=-Se),Ce=Math.sqrt((1+Ce)/2)}if(re<0){var He=1/ce;for(ue=0;ue<ce;ue++)ie[oe+ue]*=He,ie[ae+ue]*=He}oe+=ne,ae+=ne}}function fftBluestein(re,ee,ne,ie,oe,ae,ce){re|=0,ee|=0,ne|=0,oe|=0,ae|=0,ce|=0;var le=bits.nextPow2(2*ne+1),ue=ce,he=ue+ne,fe=he+ne,me=fe+le,ge=me+le,ve=ge+le,ye=-re*Math.PI/ne,be,Ce,Se,$e,Te,Ne,Ie,ke,De;for(De=0;De<ne;++De)Ce=ye*(De*De%(ne*2)),$e=Math.cos(Ce),Te=Math.sin(Ce),ie[ge+(le-De)]=ie[ge+De]=ie[ue+De]=$e,ie[ve+(le-De)]=ie[ve+De]=ie[he+De]=Te;for(De=ne;De<=le-ne;++De)ie[ge+De]=0;for(De=ne;De<=le-ne;++De)ie[ve+De]=0;for(fftRadix2(1,1,le,ie,ge,ve),re<0?ye=1/ne:ye=1,be=0;be<ee;++be){for(De=0;De<ne;++De)Ce=ie[oe+De],Se=ie[ae+De],$e=ie[ue+De],Te=-ie[he+De],Ne=$e*(Ce+Se),Ie=Ce*(Te-$e),ke=Se*($e+Te),ie[fe+De]=Ne-ke,ie[me+De]=Ne+Ie;for(De=ne;De<le;++De)ie[fe+De]=0;for(De=ne;De<le;++De)ie[me+De]=0;for(fftRadix2(1,1,le,ie,fe,me),De=0;De<le;++De)Ce=ie[fe+De],Se=ie[me+De],$e=ie[ge+De],Te=ie[ve+De],Ne=$e*(Ce+Se),Ie=Ce*(Te-$e),ke=Se*($e+Te),ie[fe+De]=Ne-ke,ie[me+De]=Ne+Ie;for(fftRadix2(-1,1,le,ie,fe,me),De=0;De<ne;++De)Ce=ie[fe+De],Se=ie[me+De],$e=ie[ue+De],Te=-ie[he+De],Ne=$e*(Ce+Se),Ie=Ce*(Te-$e),ke=Se*($e+Te),ie[oe+De]=ye*(Ne-ke),ie[ae+De]=ye*(Ne+Ie);oe+=ne,ae+=ne}}var esprima$1={};(function(re){(function(ee,ne){ne(re)})(commonjsGlobal,function(ee){var ne,ie,oe,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ce,Se,$e,Te;ne={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9},ie={},ie[ne.BooleanLiteral]="Boolean",ie[ne.EOF]="<end>",ie[ne.Identifier]="Identifier",ie[ne.Keyword]="Keyword",ie[ne.NullLiteral]="Null",ie[ne.NumericLiteral]="Numeric",ie[ne.Punctuator]="Punctuator",ie[ne.StringLiteral]="String",ie[ne.RegularExpression]="RegularExpression",oe=["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="],ae={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SwitchStatement:"SwitchStatement",SwitchCase:"SwitchCase",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement"},ce={Data:1,Get:2,Set:4},le={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"},ue={NonAsciiIdentifierStart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]"),NonAsciiIdentifierPart:new RegExp("[ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮ̀-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁ҃-҇Ҋ-ԧԱ-Ֆՙա-և֑-ׇֽֿׁׂׅׄא-תװ-ײؐ-ؚؠ-٩ٮ-ۓە-ۜ۟-۪ۨ-ۼۿܐ-݊ݍ-ޱ߀-ߵߺࠀ-࠭ࡀ-࡛ࢠࢢ-ࢬࣤ-ࣾऀ-ॣ०-९ॱ-ॷॹ-ॿঁ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-ৱਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-ੵઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૯ଁ-ଃଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହ଼-ୄେୈୋ-୍ୖୗଡ଼ଢ଼ୟ-ୣ୦-୯ୱஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௯ఁ-ఃఅ-ఌఎ-ఐఒ-నప-ళవ-హఽ-ౄె-ైొ-్ౕౖౘౙౠ-ౣ౦-౯ಂಃಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹ಼-ೄೆ-ೈೊ-್ೕೖೞೠ-ೣ೦-೯ೱೲംഃഅ-ഌഎ-ഐഒ-ഺഽ-ൄെ-ൈൊ-ൎൗൠ-ൣ൦-൯ൺ-ൿංඃඅ-ඖක-නඳ-රලව-ෆ්ා-ුූෘ-ෟෲෳก-ฺเ-๎๐-๙ກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ູົ-ຽເ-ໄໆ່-ໍ໐-໙ໜ-ໟༀ༘༙༠-༩༹༵༷༾-ཇཉ-ཬཱ-྄྆-ྗྙ-ྼ࿆က-၉ၐ-ႝႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚ፝-፟ᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-᜔ᜠ-᜴ᝀ-ᝓᝠ-ᝬᝮ-ᝰᝲᝳក-៓ៗៜ៝០-៩᠋-᠍᠐-᠙ᠠ-ᡷᢀ-ᢪᢰ-ᣵᤀ-ᤜᤠ-ᤫᤰ-᤻᥆-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉ᧐-᧙ᨀ-ᨛᨠ-ᩞ᩠-᩿᩼-᪉᪐-᪙ᪧᬀ-ᭋ᭐-᭙᭫-᭳ᮀ-᯳ᰀ-᰷᱀-᱉ᱍ-ᱽ᳐-᳔᳒-ᳶᴀ-ᷦ᷼-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼ‌‍‿⁀⁔ⁱⁿₐ-ₜ⃐-⃥⃜⃡-⃰ℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯ⵿-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⷠ-ⷿⸯ々-〇〡-〯〱-〵〸-〼ぁ-ゖ゙゚ゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘫꙀ-꙯ꙴ-꙽ꙿ-ꚗꚟ-꛱ꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠧꡀ-ꡳꢀ-꣄꣐-꣙꣠-ꣷꣻ꤀-꤭ꤰ-꥓ꥠ-ꥼꦀ-꧀ꧏ-꧙ꨀ-ꨶꩀ-ꩍ꩐-꩙ꩠ-ꩶꩺꩻꪀ-ꫂꫛ-ꫝꫠ-ꫯꫲ-꫶ꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯪ꯬꯭꯰-꯹가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻ︀-️︠-︦︳︴﹍-﹏ﹰ-ﹴﹶ-ﻼ０-９Ａ-Ｚ＿ａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]")};function Ne(Re,Ge){if(!Re)throw new Error("ASSERT: "+Ge)}function Ie(Re){return Re>=48&&Re<=57}function ke(Re){return"0123456789abcdefABCDEF".indexOf(Re)>=0}function De(Re){return"01234567".indexOf(Re)>=0}function Oe(Re){return Re===32||Re===9||Re===11||Re===12||Re===160||Re>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(Re)>=0}function Be(Re){return Re===10||Re===13||Re===8232||Re===8233}function Me(Re){return Re===36||Re===95||Re>=65&&Re<=90||Re>=97&&Re<=122||Re===92||Re>=128&&ue.NonAsciiIdentifierStart.test(String.fromCharCode(Re))}function Le(Re){return Re===36||Re===95||Re>=65&&Re<=90||Re>=97&&Re<=122||Re>=48&&Re<=57||Re===92||Re>=128&&ue.NonAsciiIdentifierPart.test(String.fromCharCode(Re))}function je(Re){switch(Re){case"class":case"enum":case"export":case"extends":case"import":case"super":return!0;default:return!1}}function ze(Re){switch(Re){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}}function Ve(Re){return Re==="eval"||Re==="arguments"}function He(Re){if(me&&ze(Re))return!0;switch(Re.length){case 2:return Re==="if"||Re==="in"||Re==="do";case 3:return Re==="var"||Re==="for"||Re==="new"||Re==="try"||Re==="let";case 4:return Re==="this"||Re==="else"||Re==="case"||Re==="void"||Re==="with"||Re==="enum";case 5:return Re==="while"||Re==="break"||Re==="catch"||Re==="throw"||Re==="const"||Re==="yield"||Re==="class"||Re==="super";case 6:return Re==="return"||Re==="typeof"||Re==="delete"||Re==="switch"||Re==="export"||Re==="import";case 7:return Re==="default"||Re==="finally"||Re==="extends";case 8:return Re==="function"||Re==="continue"||Re==="debugger";case 10:return Re==="instanceof";default:return!1}}function We(Re,Ge,Ut,cn,En){var Fn;Ne(typeof Ut=="number","Comment must have valid position"),!($e.lastCommentStart>=Ut)&&($e.lastCommentStart=Ut,Fn={type:Re,value:Ge},Te.range&&(Fn.range=[Ut,cn]),Te.loc&&(Fn.loc=En),Te.comments.push(Fn),Te.attachComment&&(Te.leadingComments.push(Fn),Te.trailingComments.push(Fn)))}function Ye(Re){var Ge,Ut,cn,En;for(Ge=ge-Re,Ut={start:{line:ve,column:ge-ye-Re}};ge<be;)if(cn=fe.charCodeAt(ge),++ge,Be(cn)){Te.comments&&(En=fe.slice(Ge+Re,ge-1),Ut.end={line:ve,column:ge-ye-1},We("Line",En,Ge,ge-1,Ut)),cn===13&&fe.charCodeAt(ge)===10&&++ge,++ve,ye=ge;return}Te.comments&&(En=fe.slice(Ge+Re,ge),Ut.end={line:ve,column:ge-ye},We("Line",En,Ge,ge,Ut))}function Ue(){var Re,Ge,Ut,cn;for(Te.comments&&(Re=ge-2,Ge={start:{line:ve,column:ge-ye-2}});ge<be;)if(Ut=fe.charCodeAt(ge),Be(Ut))Ut===13&&fe.charCodeAt(ge+1)===10&&++ge,++ve,++ge,ye=ge,ge>=be&&Pn({},le.UnexpectedToken,"ILLEGAL");else if(Ut===42){if(fe.charCodeAt(ge+1)===47){++ge,++ge,Te.comments&&(cn=fe.slice(Re+2,ge-2),Ge.end={line:ve,column:ge-ye},We("Block",cn,Re,ge,Ge));return}++ge}else++ge;Pn({},le.UnexpectedToken,"ILLEGAL")}function Ke(){var Re,Ge;for(Ge=ge===0;ge<be;)if(Re=fe.charCodeAt(ge),Oe(Re))++ge;else if(Be(Re))++ge,Re===13&&fe.charCodeAt(ge)===10&&++ge,++ve,ye=ge,Ge=!0;else if(Re===47)if(Re=fe.charCodeAt(ge+1),Re===47)++ge,++ge,Ye(2),Ge=!0;else if(Re===42)++ge,++ge,Ue();else break;else if(Ge&&Re===45)if(fe.charCodeAt(ge+1)===45&&fe.charCodeAt(ge+2)===62)ge+=3,Ye(3);else break;else if(Re===60)if(fe.slice(ge+1,ge+4)==="!--")++ge,++ge,++ge,++ge,Ye(4);else break;else break}function Xe(Re){var Ge,Ut,cn,En=0;for(Ut=Re==="u"?4:2,Ge=0;Ge<Ut;++Ge)if(ge<be&&ke(fe[ge]))cn=fe[ge++],En=En*16+"0123456789abcdef".indexOf(cn.toLowerCase());else return"";return String.fromCharCode(En)}function Vt(){var Re,Ge;for(Re=fe.charCodeAt(ge++),Ge=String.fromCharCode(Re),Re===92&&(fe.charCodeAt(ge)!==117&&Pn({},le.UnexpectedToken,"ILLEGAL"),++ge,Re=Xe("u"),(!Re||Re==="\\"||!Me(Re.charCodeAt(0)))&&Pn({},le.UnexpectedToken,"ILLEGAL"),Ge=Re);ge<be&&(Re=fe.charCodeAt(ge),!!Le(Re));)++ge,Ge+=String.fromCharCode(Re),Re===92&&(Ge=Ge.substr(0,Ge.length-1),fe.charCodeAt(ge)!==117&&Pn({},le.UnexpectedToken,"ILLEGAL"),++ge,Re=Xe("u"),(!Re||Re==="\\"||!Le(Re.charCodeAt(0)))&&Pn({},le.UnexpectedToken,"ILLEGAL"),Ge+=Re);return Ge}function Wt(){var Re,Ge;for(Re=ge++;ge<be;){if(Ge=fe.charCodeAt(ge),Ge===92)return ge=Re,Vt();if(Le(Ge))++ge;else break}return fe.slice(Re,ge)}function Kt(){var Re,Ge,Ut;return Re=ge,Ge=fe.charCodeAt(ge)===92?Vt():Wt(),Ge.length===1?Ut=ne.Identifier:He(Ge)?Ut=ne.Keyword:Ge==="null"?Ut=ne.NullLiteral:Ge==="true"||Ge==="false"?Ut=ne.BooleanLiteral:Ut=ne.Identifier,{type:Ut,value:Ge,lineNumber:ve,lineStart:ye,start:Re,end:ge}}function tn(){var Re=ge,Ge=fe.charCodeAt(ge),Ut,cn=fe[ge],En,Fn,Jn;switch(Ge){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ge,Te.tokenize&&(Ge===40?Te.openParenToken=Te.tokens.length:Ge===123&&(Te.openCurlyToken=Te.tokens.length)),{type:ne.Punctuator,value:String.fromCharCode(Ge),lineNumber:ve,lineStart:ye,start:Re,end:ge};default:if(Ut=fe.charCodeAt(ge+1),Ut===61)switch(Ge){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ge+=2,{type:ne.Punctuator,value:String.fromCharCode(Ge)+String.fromCharCode(Ut),lineNumber:ve,lineStart:ye,start:Re,end:ge};case 33:case 61:return ge+=2,fe.charCodeAt(ge)===61&&++ge,{type:ne.Punctuator,value:fe.slice(Re,ge),lineNumber:ve,lineStart:ye,start:Re,end:ge}}}if(Jn=fe.substr(ge,4),Jn===">>>=")return ge+=4,{type:ne.Punctuator,value:Jn,lineNumber:ve,lineStart:ye,start:Re,end:ge};if(Fn=Jn.substr(0,3),Fn===">>>"||Fn==="<<="||Fn===">>=")return ge+=3,{type:ne.Punctuator,value:Fn,lineNumber:ve,lineStart:ye,start:Re,end:ge};if(En=Fn.substr(0,2),cn===En[1]&&"+-<>&|".indexOf(cn)>=0||En==="=>")return ge+=2,{type:ne.Punctuator,value:En,lineNumber:ve,lineStart:ye,start:Re,end:ge};if("<>=!+-*%&|^/".indexOf(cn)>=0)return++ge,{type:ne.Punctuator,value:cn,lineNumber:ve,lineStart:ye,start:Re,end:ge};Pn({},le.UnexpectedToken,"ILLEGAL")}function Xt(Re){for(var Ge="";ge<be&&ke(fe[ge]);)Ge+=fe[ge++];return Ge.length===0&&Pn({},le.UnexpectedToken,"ILLEGAL"),Me(fe.charCodeAt(ge))&&Pn({},le.UnexpectedToken,"ILLEGAL"),{type:ne.NumericLiteral,value:parseInt("0x"+Ge,16),lineNumber:ve,lineStart:ye,start:Re,end:ge}}function dn(Re){for(var Ge="0"+fe[ge++];ge<be&&De(fe[ge]);)Ge+=fe[ge++];return(Me(fe.charCodeAt(ge))||Ie(fe.charCodeAt(ge)))&&Pn({},le.UnexpectedToken,"ILLEGAL"),{type:ne.NumericLiteral,value:parseInt(Ge,8),octal:!0,lineNumber:ve,lineStart:ye,start:Re,end:ge}}function nn(){var Re,Ge;for(Re=ge+1;Re<be;++Re){if(Ge=fe[Re],Ge==="8"||Ge==="9")return!1;if(!De(Ge))return!0}return!0}function rn(){var Re,Ge,Ut;if(Ut=fe[ge],Ne(Ie(Ut.charCodeAt(0))||Ut===".","Numeric literal must start with a decimal digit or a decimal point"),Ge=ge,Re="",Ut!=="."){if(Re=fe[ge++],Ut=fe[ge],Re==="0"){if(Ut==="x"||Ut==="X")return++ge,Xt(Ge);if(De(Ut)&&nn())return dn(Ge)}for(;Ie(fe.charCodeAt(ge));)Re+=fe[ge++];Ut=fe[ge]}if(Ut==="."){for(Re+=fe[ge++];Ie(fe.charCodeAt(ge));)Re+=fe[ge++];Ut=fe[ge]}if(Ut==="e"||Ut==="E")if(Re+=fe[ge++],Ut=fe[ge],(Ut==="+"||Ut==="-")&&(Re+=fe[ge++]),Ie(fe.charCodeAt(ge)))for(;Ie(fe.charCodeAt(ge));)Re+=fe[ge++];else Pn({},le.UnexpectedToken,"ILLEGAL");return Me(fe.charCodeAt(ge))&&Pn({},le.UnexpectedToken,"ILLEGAL"),{type:ne.NumericLiteral,value:parseFloat(Re),lineNumber:ve,lineStart:ye,start:Ge,end:ge}}function vn(){var Re="",Ge,Ut,cn,En,Fn,Jn,os=!1,xs,$s;for(xs=ve,$s=ye,Ge=fe[ge],Ne(Ge==="'"||Ge==='"',"String literal must starts with a quote"),Ut=ge,++ge;ge<be;)if(cn=fe[ge++],cn===Ge){Ge="";break}else if(cn==="\\")if(cn=fe[ge++],!cn||!Be(cn.charCodeAt(0)))switch(cn){case"u":case"x":Jn=ge,Fn=Xe(cn),Fn?Re+=Fn:(ge=Jn,Re+=cn);break;case"n":Re+=`
`;break;case"r":Re+="\r";break;case"t":Re+="	";break;case"b":Re+="\b";break;case"f":Re+="\f";break;case"v":Re+="\v";break;default:De(cn)?(En="01234567".indexOf(cn),En!==0&&(os=!0),ge<be&&De(fe[ge])&&(os=!0,En=En*8+"01234567".indexOf(fe[ge++]),"0123".indexOf(cn)>=0&&ge<be&&De(fe[ge])&&(En=En*8+"01234567".indexOf(fe[ge++]))),Re+=String.fromCharCode(En)):Re+=cn;break}else++ve,cn==="\r"&&fe[ge]===`
`&&++ge,ye=ge;else{if(Be(cn.charCodeAt(0)))break;Re+=cn}return Ge!==""&&Pn({},le.UnexpectedToken,"ILLEGAL"),{type:ne.StringLiteral,value:Re,octal:os,startLineNumber:xs,startLineStart:$s,lineNumber:ve,lineStart:ye,start:Ut,end:ge}}function yn(Re,Ge){var Ut;try{Ut=new RegExp(Re,Ge)}catch{Pn({},le.InvalidRegExp)}return Ut}function Sn(){var Re,Ge,Ut,cn,En;for(Re=fe[ge],Ne(Re==="/","Regular expression literal must start with a slash"),Ge=fe[ge++],Ut=!1,cn=!1;ge<be;)if(Re=fe[ge++],Ge+=Re,Re==="\\")Re=fe[ge++],Be(Re.charCodeAt(0))&&Pn({},le.UnterminatedRegExp),Ge+=Re;else if(Be(Re.charCodeAt(0)))Pn({},le.UnterminatedRegExp);else if(Ut)Re==="]"&&(Ut=!1);else if(Re==="/"){cn=!0;break}else Re==="["&&(Ut=!0);return cn||Pn({},le.UnterminatedRegExp),En=Ge.substr(1,Ge.length-2),{value:En,literal:Ge}}function kn(){var Re,Ge,Ut,cn;for(Ge="",Ut="";ge<be&&(Re=fe[ge],!!Le(Re.charCodeAt(0)));)if(++ge,Re==="\\"&&ge<be)if(Re=fe[ge],Re==="u"){if(++ge,cn=ge,Re=Xe("u"),Re)for(Ut+=Re,Ge+="\\u";cn<ge;++cn)Ge+=fe[cn];else ge=cn,Ut+="u",Ge+="\\u";Un({},le.UnexpectedToken,"ILLEGAL")}else Ge+="\\",Un({},le.UnexpectedToken,"ILLEGAL");else Ut+=Re,Ge+=Re;return{value:Ut,literal:Ge}}function Bn(){var Re,Ge,Ut,cn;return Se=null,Ke(),Re=ge,Ge=Sn(),Ut=kn(),cn=yn(Ge.value,Ut.value),Te.tokenize?{type:ne.RegularExpression,value:cn,lineNumber:ve,lineStart:ye,start:Re,end:ge}:{literal:Ge.literal+Ut.literal,value:cn,start:Re,end:ge}}function Dn(){var Re,Ge,Ut,cn;return Ke(),Re=ge,Ge={start:{line:ve,column:ge-ye}},Ut=Bn(),Ge.end={line:ve,column:ge-ye},Te.tokenize||(Te.tokens.length>0&&(cn=Te.tokens[Te.tokens.length-1],cn.range[0]===Re&&cn.type==="Punctuator"&&(cn.value==="/"||cn.value==="/=")&&Te.tokens.pop()),Te.tokens.push({type:"RegularExpression",value:Ut.literal,range:[Re,ge],loc:Ge})),Ut}function Je(Re){return Re.type===ne.Identifier||Re.type===ne.Keyword||Re.type===ne.BooleanLiteral||Re.type===ne.NullLiteral}function Yt(){var Re,Ge;if(Re=Te.tokens[Te.tokens.length-1],!Re)return Dn();if(Re.type==="Punctuator"){if(Re.value==="]")return tn();if(Re.value===")")return Ge=Te.tokens[Te.openParenToken-1],Ge&&Ge.type==="Keyword"&&(Ge.value==="if"||Ge.value==="while"||Ge.value==="for"||Ge.value==="with")?Dn():tn();if(Re.value==="}"){if(Te.tokens[Te.openCurlyToken-3]&&Te.tokens[Te.openCurlyToken-3].type==="Keyword"){if(Ge=Te.tokens[Te.openCurlyToken-4],!Ge)return tn()}else if(Te.tokens[Te.openCurlyToken-4]&&Te.tokens[Te.openCurlyToken-4].type==="Keyword"){if(Ge=Te.tokens[Te.openCurlyToken-5],!Ge)return Dn()}else return tn();return oe.indexOf(Ge.value)>=0?tn():Dn()}return Dn()}return Re.type==="Keyword"&&Re.value!=="this"?Dn():tn()}function an(){var Re;return Ke(),ge>=be?{type:ne.EOF,lineNumber:ve,lineStart:ye,start:ge,end:ge}:(Re=fe.charCodeAt(ge),Me(Re)?Kt():Re===40||Re===41||Re===59?tn():Re===39||Re===34?vn():Re===46?Ie(fe.charCodeAt(ge+1))?rn():tn():Ie(Re)?rn():Te.tokenize&&Re===47?Yt():tn())}function An(){var Re,Ge,Ut;return Ke(),Re={start:{line:ve,column:ge-ye}},Ge=an(),Re.end={line:ve,column:ge-ye},Ge.type!==ne.EOF&&(Ut=fe.slice(Ge.start,Ge.end),Te.tokens.push({type:ie[Ge.type],value:Ut,range:[Ge.start,Ge.end],loc:Re})),Ge}function fn(){var Re;return Re=Se,ge=Re.end,ve=Re.lineNumber,ye=Re.lineStart,Se=typeof Te.tokens<"u"?An():an(),ge=Re.end,ve=Re.lineNumber,ye=Re.lineStart,Re}function mn(){var Re,Ge,Ut;Re=ge,Ge=ve,Ut=ye,Se=typeof Te.tokens<"u"?An():an(),ge=Re,ve=Ge,ye=Ut}function Tn(Re,Ge){this.line=Re,this.column=Ge}function Vn(Re,Ge,Ut,cn){this.start=new Tn(Re,Ge),this.end=new Tn(Ut,cn)}he={name:"SyntaxTree",processComment:function(Re){var Ge,Ut;if(!(Re.type===ae.Program&&Re.body.length>0)){for(Te.trailingComments.length>0?Te.trailingComments[0].range[0]>=Re.range[1]?(Ut=Te.trailingComments,Te.trailingComments=[]):Te.trailingComments.length=0:Te.bottomRightStack.length>0&&Te.bottomRightStack[Te.bottomRightStack.length-1].trailingComments&&Te.bottomRightStack[Te.bottomRightStack.length-1].trailingComments[0].range[0]>=Re.range[1]&&(Ut=Te.bottomRightStack[Te.bottomRightStack.length-1].trailingComments,delete Te.bottomRightStack[Te.bottomRightStack.length-1].trailingComments);Te.bottomRightStack.length>0&&Te.bottomRightStack[Te.bottomRightStack.length-1].range[0]>=Re.range[0];)Ge=Te.bottomRightStack.pop();Ge?Ge.leadingComments&&Ge.leadingComments[Ge.leadingComments.length-1].range[1]<=Re.range[0]&&(Re.leadingComments=Ge.leadingComments,delete Ge.leadingComments):Te.leadingComments.length>0&&Te.leadingComments[Te.leadingComments.length-1].range[1]<=Re.range[0]&&(Re.leadingComments=Te.leadingComments,Te.leadingComments=[]),Ut&&(Re.trailingComments=Ut),Te.bottomRightStack.push(Re)}},markEnd:function(Re,Ge){return Te.range&&(Re.range=[Ge.start,ge]),Te.loc&&(Re.loc=new Vn(Ge.startLineNumber===void 0?Ge.lineNumber:Ge.startLineNumber,Ge.start-(Ge.startLineStart===void 0?Ge.lineStart:Ge.startLineStart),ve,ge-ye),this.postProcess(Re)),Te.attachComment&&this.processComment(Re),Re},postProcess:function(Re){return Te.source&&(Re.loc.source=Te.source),Re},createArrayExpression:function(Re){return{type:ae.ArrayExpression,elements:Re}},createAssignmentExpression:function(Re,Ge,Ut){return{type:ae.AssignmentExpression,operator:Re,left:Ge,right:Ut}},createBinaryExpression:function(Re,Ge,Ut){var cn=Re==="||"||Re==="&&"?ae.LogicalExpression:ae.BinaryExpression;return{type:cn,operator:Re,left:Ge,right:Ut}},createBlockStatement:function(Re){return{type:ae.BlockStatement,body:Re}},createBreakStatement:function(Re){return{type:ae.BreakStatement,label:Re}},createCallExpression:function(Re,Ge){return{type:ae.CallExpression,callee:Re,arguments:Ge}},createCatchClause:function(Re,Ge){return{type:ae.CatchClause,param:Re,body:Ge}},createConditionalExpression:function(Re,Ge,Ut){return{type:ae.ConditionalExpression,test:Re,consequent:Ge,alternate:Ut}},createContinueStatement:function(Re){return{type:ae.ContinueStatement,label:Re}},createDebuggerStatement:function(){return{type:ae.DebuggerStatement}},createDoWhileStatement:function(Re,Ge){return{type:ae.DoWhileStatement,body:Re,test:Ge}},createEmptyStatement:function(){return{type:ae.EmptyStatement}},createExpressionStatement:function(Re){return{type:ae.ExpressionStatement,expression:Re}},createForStatement:function(Re,Ge,Ut,cn){return{type:ae.ForStatement,init:Re,test:Ge,update:Ut,body:cn}},createForInStatement:function(Re,Ge,Ut){return{type:ae.ForInStatement,left:Re,right:Ge,body:Ut,each:!1}},createFunctionDeclaration:function(Re,Ge,Ut,cn){return{type:ae.FunctionDeclaration,id:Re,params:Ge,defaults:Ut,body:cn,rest:null,generator:!1,expression:!1}},createFunctionExpression:function(Re,Ge,Ut,cn){return{type:ae.FunctionExpression,id:Re,params:Ge,defaults:Ut,body:cn,rest:null,generator:!1,expression:!1}},createIdentifier:function(Re){return{type:ae.Identifier,name:Re}},createIfStatement:function(Re,Ge,Ut){return{type:ae.IfStatement,test:Re,consequent:Ge,alternate:Ut}},createLabeledStatement:function(Re,Ge){return{type:ae.LabeledStatement,label:Re,body:Ge}},createLiteral:function(Re){return{type:ae.Literal,value:Re.value,raw:fe.slice(Re.start,Re.end)}},createMemberExpression:function(Re,Ge,Ut){return{type:ae.MemberExpression,computed:Re==="[",object:Ge,property:Ut}},createNewExpression:function(Re,Ge){return{type:ae.NewExpression,callee:Re,arguments:Ge}},createObjectExpression:function(Re){return{type:ae.ObjectExpression,properties:Re}},createPostfixExpression:function(Re,Ge){return{type:ae.UpdateExpression,operator:Re,argument:Ge,prefix:!1}},createProgram:function(Re){return{type:ae.Program,body:Re}},createProperty:function(Re,Ge,Ut){return{type:ae.Property,key:Ge,value:Ut,kind:Re}},createReturnStatement:function(Re){return{type:ae.ReturnStatement,argument:Re}},createSequenceExpression:function(Re){return{type:ae.SequenceExpression,expressions:Re}},createSwitchCase:function(Re,Ge){return{type:ae.SwitchCase,test:Re,consequent:Ge}},createSwitchStatement:function(Re,Ge){return{type:ae.SwitchStatement,discriminant:Re,cases:Ge}},createThisExpression:function(){return{type:ae.ThisExpression}},createThrowStatement:function(Re){return{type:ae.ThrowStatement,argument:Re}},createTryStatement:function(Re,Ge,Ut,cn){return{type:ae.TryStatement,block:Re,guardedHandlers:Ge,handlers:Ut,finalizer:cn}},createUnaryExpression:function(Re,Ge){return Re==="++"||Re==="--"?{type:ae.UpdateExpression,operator:Re,argument:Ge,prefix:!0}:{type:ae.UnaryExpression,operator:Re,argument:Ge,prefix:!0}},createVariableDeclaration:function(Re,Ge){return{type:ae.VariableDeclaration,declarations:Re,kind:Ge}},createVariableDeclarator:function(Re,Ge){return{type:ae.VariableDeclarator,id:Re,init:Ge}},createWhileStatement:function(Re,Ge){return{type:ae.WhileStatement,test:Re,body:Ge}},createWithStatement:function(Re,Ge){return{type:ae.WithStatement,object:Re,body:Ge}}};function Gn(){var Re,Ge,Ut,cn;return Re=ge,Ge=ve,Ut=ye,Ke(),cn=ve!==Ge,ge=Re,ve=Ge,ye=Ut,cn}function Pn(Re,Ge){var Ut,cn=Array.prototype.slice.call(arguments,2),En=Ge.replace(/%(\d)/g,function(Fn,Jn){return Ne(Jn<cn.length,"Message reference must be in range"),cn[Jn]});throw typeof Re.lineNumber=="number"?(Ut=new Error("Line "+Re.lineNumber+": "+En),Ut.index=Re.start,Ut.lineNumber=Re.lineNumber,Ut.column=Re.start-ye+1):(Ut=new Error("Line "+ve+": "+En),Ut.index=ge,Ut.lineNumber=ve,Ut.column=ge-ye+1),Ut.description=En,Ut}function Un(){try{Pn.apply(null,arguments)}catch(Re){if(Te.errors)Te.errors.push(Re);else throw Re}}function ls(Re){if(Re.type===ne.EOF&&Pn(Re,le.UnexpectedEOS),Re.type===ne.NumericLiteral&&Pn(Re,le.UnexpectedNumber),Re.type===ne.StringLiteral&&Pn(Re,le.UnexpectedString),Re.type===ne.Identifier&&Pn(Re,le.UnexpectedIdentifier),Re.type===ne.Keyword){if(je(Re.value))Pn(Re,le.UnexpectedReserved);else if(me&&ze(Re.value)){Un(Re,le.StrictReservedWord);return}Pn(Re,le.UnexpectedToken,Re.value)}Pn(Re,le.UnexpectedToken,Re.value)}function Rn(Re){var Ge=fn();(Ge.type!==ne.Punctuator||Ge.value!==Re)&&ls(Ge)}function Kn(Re){var Ge=fn();(Ge.type!==ne.Keyword||Ge.value!==Re)&&ls(Ge)}function pn(Re){return Se.type===ne.Punctuator&&Se.value===Re}function sn(Re){return Se.type===ne.Keyword&&Se.value===Re}function Nn(){var Re;return Se.type!==ne.Punctuator?!1:(Re=Se.value,Re==="="||Re==="*="||Re==="/="||Re==="%="||Re==="+="||Re==="-="||Re==="<<="||Re===">>="||Re===">>>="||Re==="&="||Re==="^="||Re==="|=")}function wn(){var Re,Ge=ge,Ut=ve,cn=ye,En=Se;if(fe.charCodeAt(ge)===59||pn(";")){fn();return}if(Re=ve,Ke(),ve!==Re){ge=Ge,ve=Ut,ye=cn,Se=En;return}Se.type!==ne.EOF&&!pn("}")&&ls(Se)}function is(Re){return Re.type===ae.Identifier||Re.type===ae.MemberExpression}function Cs(){var Re=[],Ge;for(Ge=Se,Rn("[");!pn("]");)pn(",")?(fn(),Re.push(null)):(Re.push(Ls()),pn("]")||Rn(","));return fn(),Ce.markEnd(Ce.createArrayExpression(Re),Ge)}function ss(Re,Ge){var Ut,cn,En;return Ut=me,En=Se,cn=fi(),Ge&&me&&Ve(Re[0].name)&&Un(Ge,le.StrictParamName),me=Ut,Ce.markEnd(Ce.createFunctionExpression(null,Re,[],cn),En)}function bn(){var Re,Ge;return Ge=Se,Re=fn(),Re.type===ne.StringLiteral||Re.type===ne.NumericLiteral?(me&&Re.octal&&Un(Re,le.StrictOctalLiteral),Ce.markEnd(Ce.createLiteral(Re),Ge)):Ce.markEnd(Ce.createIdentifier(Re.value),Ge)}function $n(){var Re,Ge,Ut,cn,En,Fn;if(Re=Se,Fn=Se,Re.type===ne.Identifier)return Ut=bn(),Re.value==="get"&&!pn(":")?(Ge=bn(),Rn("("),Rn(")"),cn=ss([]),Ce.markEnd(Ce.createProperty("get",Ge,cn),Fn)):Re.value==="set"&&!pn(":")?(Ge=bn(),Rn("("),Re=Se,Re.type!==ne.Identifier?(Rn(")"),Un(Re,le.UnexpectedToken,Re.value),cn=ss([])):(En=[fr()],Rn(")"),cn=ss(En,Re)),Ce.markEnd(Ce.createProperty("set",Ge,cn),Fn)):(Rn(":"),cn=Ls(),Ce.markEnd(Ce.createProperty("init",Ut,cn),Fn));if(Re.type===ne.EOF||Re.type===ne.Punctuator)ls(Re);else return Ge=bn(),Rn(":"),cn=Ls(),Ce.markEnd(Ce.createProperty("init",Ge,cn),Fn)}function Ln(){var Re=[],Ge,Ut,cn,En,Fn={},Jn=String,os;for(os=Se,Rn("{");!pn("}");)Ge=$n(),Ge.key.type===ae.Identifier?Ut=Ge.key.name:Ut=Jn(Ge.key.value),En=Ge.kind==="init"?ce.Data:Ge.kind==="get"?ce.Get:ce.Set,cn="$"+Ut,Object.prototype.hasOwnProperty.call(Fn,cn)?(Fn[cn]===ce.Data?me&&En===ce.Data?Un({},le.StrictDuplicateProperty):En!==ce.Data&&Un({},le.AccessorDataProperty):En===ce.Data?Un({},le.AccessorDataProperty):Fn[cn]&En&&Un({},le.AccessorGetSet),Fn[cn]|=En):Fn[cn]=En,Re.push(Ge),pn("}")||Rn(",");return Rn("}"),Ce.markEnd(Ce.createObjectExpression(Re),os)}function zn(){var Re;return Rn("("),Re=Ns(),Rn(")"),Re}function Xn(){var Re,Ge,Ut,cn;if(pn("("))return zn();if(pn("["))return Cs();if(pn("{"))return Ln();if(Re=Se.type,cn=Se,Re===ne.Identifier)Ut=Ce.createIdentifier(fn().value);else if(Re===ne.StringLiteral||Re===ne.NumericLiteral)me&&Se.octal&&Un(Se,le.StrictOctalLiteral),Ut=Ce.createLiteral(fn());else if(Re===ne.Keyword){if(sn("function"))return Ui();sn("this")?(fn(),Ut=Ce.createThisExpression()):ls(fn())}else Re===ne.BooleanLiteral?(Ge=fn(),Ge.value=Ge.value==="true",Ut=Ce.createLiteral(Ge)):Re===ne.NullLiteral?(Ge=fn(),Ge.value=null,Ut=Ce.createLiteral(Ge)):pn("/")||pn("/=")?(typeof Te.tokens<"u"?Ut=Ce.createLiteral(Dn()):Ut=Ce.createLiteral(Bn()),mn()):ls(fn());return Ce.markEnd(Ut,cn)}function cs(){var Re=[];if(Rn("("),!pn(")"))for(;ge<be&&(Re.push(Ls()),!pn(")"));)Rn(",");return Rn(")"),Re}function fs(){var Re,Ge;return Ge=Se,Re=fn(),Je(Re)||ls(Re),Ce.markEnd(Ce.createIdentifier(Re.value),Ge)}function ms(){return Rn("."),fs()}function ds(){var Re;return Rn("["),Re=Ns(),Rn("]"),Re}function _s(){var Re,Ge,Ut;return Ut=Se,Kn("new"),Re=ws(),Ge=pn("(")?cs():[],Ce.markEnd(Ce.createNewExpression(Re,Ge),Ut)}function ys(){var Re,Ge,Ut,cn,En=$e.allowIn;for(cn=Se,$e.allowIn=!0,Re=sn("new")?_s():Xn();;){if(pn("."))Ut=ms(),Re=Ce.createMemberExpression(".",Re,Ut);else if(pn("("))Ge=cs(),Re=Ce.createCallExpression(Re,Ge);else if(pn("["))Ut=ds(),Re=Ce.createMemberExpression("[",Re,Ut);else break;Ce.markEnd(Re,cn)}return $e.allowIn=En,Re}function ws(){var Re,Ge,Ut;for(Ne($e.allowIn,"callee of new expression always allow in keyword."),Ut=Se,Re=sn("new")?_s():Xn();pn(".")||pn("[");)pn("[")?(Ge=ds(),Re=Ce.createMemberExpression("[",Re,Ge)):(Ge=ms(),Re=Ce.createMemberExpression(".",Re,Ge)),Ce.markEnd(Re,Ut);return Re}function lr(){var Re,Ge,Ut=Se;return Re=ys(),Se.type===ne.Punctuator&&(pn("++")||pn("--"))&&!Gn()&&(me&&Re.type===ae.Identifier&&Ve(Re.name)&&Un({},le.StrictLHSPostfix),is(Re)||Un({},le.InvalidLHSInAssignment),Ge=fn(),Re=Ce.markEnd(Ce.createPostfixExpression(Ge.value,Re),Ut)),Re}function Ms(){var Re,Ge,Ut;return Se.type!==ne.Punctuator&&Se.type!==ne.Keyword?Ge=lr():pn("++")||pn("--")?(Ut=Se,Re=fn(),Ge=Ms(),me&&Ge.type===ae.Identifier&&Ve(Ge.name)&&Un({},le.StrictLHSPrefix),is(Ge)||Un({},le.InvalidLHSInAssignment),Ge=Ce.createUnaryExpression(Re.value,Ge),Ge=Ce.markEnd(Ge,Ut)):pn("+")||pn("-")||pn("~")||pn("!")?(Ut=Se,Re=fn(),Ge=Ms(),Ge=Ce.createUnaryExpression(Re.value,Ge),Ge=Ce.markEnd(Ge,Ut)):sn("delete")||sn("void")||sn("typeof")?(Ut=Se,Re=fn(),Ge=Ms(),Ge=Ce.createUnaryExpression(Re.value,Ge),Ge=Ce.markEnd(Ge,Ut),me&&Ge.operator==="delete"&&Ge.argument.type===ae.Identifier&&Un({},le.StrictDelete)):Ge=lr(),Ge}function vr(Re,Ge){var Ut=0;if(Re.type!==ne.Punctuator&&Re.type!==ne.Keyword)return 0;switch(Re.value){case"||":Ut=1;break;case"&&":Ut=2;break;case"|":Ut=3;break;case"^":Ut=4;break;case"&":Ut=5;break;case"==":case"!=":case"===":case"!==":Ut=6;break;case"<":case">":case"<=":case">=":case"instanceof":Ut=7;break;case"in":Ut=Ge?7:0;break;case"<<":case">>":case">>>":Ut=8;break;case"+":case"-":Ut=9;break;case"*":case"/":case"%":Ut=11;break}return Ut}function Tr(){var Re,Ge,Ut,cn,En,Fn,Jn,os,xs,$s;if(Re=Se,xs=Ms(),cn=Se,En=vr(cn,$e.allowIn),En===0)return xs;for(cn.prec=En,fn(),Ge=[Re,Se],Jn=Ms(),Fn=[xs,cn,Jn];(En=vr(Se,$e.allowIn))>0;){for(;Fn.length>2&&En<=Fn[Fn.length-2].prec;)Jn=Fn.pop(),os=Fn.pop().value,xs=Fn.pop(),Ut=Ce.createBinaryExpression(os,xs,Jn),Ge.pop(),Re=Ge[Ge.length-1],Ce.markEnd(Ut,Re),Fn.push(Ut);cn=fn(),cn.prec=En,Fn.push(cn),Ge.push(Se),Ut=Ms(),Fn.push(Ut)}for($s=Fn.length-1,Ut=Fn[$s],Ge.pop();$s>1;)Ut=Ce.createBinaryExpression(Fn[$s-1].value,Fn[$s-2],Ut),$s-=2,Re=Ge.pop(),Ce.markEnd(Ut,Re);return Ut}function Kr(){var Re,Ge,Ut,cn,En;return En=Se,Re=Tr(),pn("?")&&(fn(),Ge=$e.allowIn,$e.allowIn=!0,Ut=Ls(),$e.allowIn=Ge,Rn(":"),cn=Ls(),Re=Ce.createConditionalExpression(Re,Ut,cn),Ce.markEnd(Re,En)),Re}function Ls(){var Re,Ge,Ut,cn,En;return Re=Se,En=Se,cn=Ge=Kr(),Nn()&&(is(Ge)||Un({},le.InvalidLHSInAssignment),me&&Ge.type===ae.Identifier&&Ve(Ge.name)&&Un(Re,le.StrictLHSAssignment),Re=fn(),Ut=Ls(),cn=Ce.markEnd(Ce.createAssignmentExpression(Re.value,Ge,Ut),En)),cn}function Ns(){var Re,Ge=Se;if(Re=Ls(),pn(",")){for(Re=Ce.createSequenceExpression([Re]);ge<be&&pn(",");)fn(),Re.expressions.push(Ls());Ce.markEnd(Re,Ge)}return Re}function ko(){for(var Re=[],Ge;ge<be&&!(pn("}")||(Ge=Ir(),typeof Ge>"u"));)Re.push(Ge);return Re}function Yr(){var Re,Ge;return Ge=Se,Rn("{"),Re=ko(),Rn("}"),Ce.markEnd(Ce.createBlockStatement(Re),Ge)}function fr(){var Re,Ge;return Ge=Se,Re=fn(),Re.type!==ne.Identifier&&ls(Re),Ce.markEnd(Ce.createIdentifier(Re.value),Ge)}function Fo(Re){var Ge=null,Ut,cn;return cn=Se,Ut=fr(),me&&Ve(Ut.name)&&Un({},le.StrictVarName),Re==="const"?(Rn("="),Ge=Ls()):pn("=")&&(fn(),Ge=Ls()),Ce.markEnd(Ce.createVariableDeclarator(Ut,Ge),cn)}function pi(Re){var Ge=[];do{if(Ge.push(Fo(Re)),!pn(","))break;fn()}while(ge<be);return Ge}function Oo(){var Re;return Kn("var"),Re=pi(),wn(),Ce.createVariableDeclaration(Re,"var")}function Ro(Re){var Ge,Ut;return Ut=Se,Kn(Re),Ge=pi(Re),wn(),Ce.markEnd(Ce.createVariableDeclaration(Ge,Re),Ut)}function Bi(){return Rn(";"),Ce.createEmptyStatement()}function Mo(){var Re=Ns();return wn(),Ce.createExpressionStatement(Re)}function Bo(){var Re,Ge,Ut;return Kn("if"),Rn("("),Re=Ns(),Rn(")"),Ge=Zs(),sn("else")?(fn(),Ut=Zs()):Ut=null,Ce.createIfStatement(Re,Ge,Ut)}function Po(){var Re,Ge,Ut;return Kn("do"),Ut=$e.inIteration,$e.inIteration=!0,Re=Zs(),$e.inIteration=Ut,Kn("while"),Rn("("),Ge=Ns(),Rn(")"),pn(";")&&fn(),Ce.createDoWhileStatement(Re,Ge)}function Lo(){var Re,Ge,Ut;return Kn("while"),Rn("("),Re=Ns(),Rn(")"),Ut=$e.inIteration,$e.inIteration=!0,Ge=Zs(),$e.inIteration=Ut,Ce.createWhileStatement(Re,Ge)}function zo(){var Re,Ge,Ut;return Ut=Se,Re=fn(),Ge=pi(),Ce.markEnd(Ce.createVariableDeclaration(Ge,Re.value),Ut)}function Vo(){var Re,Ge,Ut,cn,En,Fn,Jn,os=$e.allowIn;return Re=Ge=Ut=null,Kn("for"),Rn("("),pn(";")?fn():(sn("var")||sn("let")?($e.allowIn=!1,Re=zo(),$e.allowIn=os,Re.declarations.length===1&&sn("in")&&(fn(),cn=Re,En=Ns(),Re=null)):($e.allowIn=!1,Re=Ns(),$e.allowIn=os,sn("in")&&(is(Re)||Un({},le.InvalidLHSInForIn),fn(),cn=Re,En=Ns(),Re=null)),typeof cn>"u"&&Rn(";")),typeof cn>"u"&&(pn(";")||(Ge=Ns()),Rn(";"),pn(")")||(Ut=Ns())),Rn(")"),Jn=$e.inIteration,$e.inIteration=!0,Fn=Zs(),$e.inIteration=Jn,typeof cn>"u"?Ce.createForStatement(Re,Ge,Ut,Fn):Ce.createForInStatement(cn,En,Fn)}function Xr(){var Re=null,Ge;return Kn("continue"),fe.charCodeAt(ge)===59?(fn(),$e.inIteration||Pn({},le.IllegalContinue),Ce.createContinueStatement(null)):Gn()?($e.inIteration||Pn({},le.IllegalContinue),Ce.createContinueStatement(null)):(Se.type===ne.Identifier&&(Re=fr(),Ge="$"+Re.name,Object.prototype.hasOwnProperty.call($e.labelSet,Ge)||Pn({},le.UnknownLabel,Re.name)),wn(),Re===null&&!$e.inIteration&&Pn({},le.IllegalContinue),Ce.createContinueStatement(Re))}function jo(){var Re=null,Ge;return Kn("break"),fe.charCodeAt(ge)===59?(fn(),$e.inIteration||$e.inSwitch||Pn({},le.IllegalBreak),Ce.createBreakStatement(null)):Gn()?($e.inIteration||$e.inSwitch||Pn({},le.IllegalBreak),Ce.createBreakStatement(null)):(Se.type===ne.Identifier&&(Re=fr(),Ge="$"+Re.name,Object.prototype.hasOwnProperty.call($e.labelSet,Ge)||Pn({},le.UnknownLabel,Re.name)),wn(),Re===null&&!($e.inIteration||$e.inSwitch)&&Pn({},le.IllegalBreak),Ce.createBreakStatement(Re))}function Jr(){var Re=null;return Kn("return"),$e.inFunctionBody||Un({},le.IllegalReturn),fe.charCodeAt(ge)===32&&Me(fe.charCodeAt(ge+1))?(Re=Ns(),wn(),Ce.createReturnStatement(Re)):Gn()?Ce.createReturnStatement(null):(pn(";")||!pn("}")&&Se.type!==ne.EOF&&(Re=Ns()),wn(),Ce.createReturnStatement(Re))}function Uo(){var Re,Ge;return me&&(Ke(),Un({},le.StrictModeWith)),Kn("with"),Rn("("),Re=Ns(),Rn(")"),Ge=Zs(),Ce.createWithStatement(Re,Ge)}function Go(){var Re,Ge=[],Ut,cn;for(cn=Se,sn("default")?(fn(),Re=null):(Kn("case"),Re=Ns()),Rn(":");ge<be&&!(pn("}")||sn("default")||sn("case"));)Ut=Zs(),Ge.push(Ut);return Ce.markEnd(Ce.createSwitchCase(Re,Ge),cn)}function qo(){var Re,Ge,Ut,cn,En;if(Kn("switch"),Rn("("),Re=Ns(),Rn(")"),Rn("{"),Ge=[],pn("}"))return fn(),Ce.createSwitchStatement(Re,Ge);for(cn=$e.inSwitch,$e.inSwitch=!0,En=!1;ge<be&&!pn("}");)Ut=Go(),Ut.test===null&&(En&&Pn({},le.MultipleDefaultsInSwitch),En=!0),Ge.push(Ut);return $e.inSwitch=cn,Rn("}"),Ce.createSwitchStatement(Re,Ge)}function Li(){var Re;return Kn("throw"),Gn()&&Pn({},le.NewlineAfterThrow),Re=Ns(),wn(),Ce.createThrowStatement(Re)}function zi(){var Re,Ge,Ut;return Ut=Se,Kn("catch"),Rn("("),pn(")")&&ls(Se),Re=fr(),me&&Ve(Re.name)&&Un({},le.StrictCatchVariable),Rn(")"),Ge=Yr(),Ce.markEnd(Ce.createCatchClause(Re,Ge),Ut)}function Vi(){var Re,Ge=[],Ut=null;return Kn("try"),Re=Yr(),sn("catch")&&Ge.push(zi()),sn("finally")&&(fn(),Ut=Yr()),Ge.length===0&&!Ut&&Pn({},le.NoCatchOrFinally),Ce.createTryStatement(Re,[],Ge,Ut)}function Ho(){return Kn("debugger"),wn(),Ce.createDebuggerStatement()}function Zs(){var Re=Se.type,Ge,Ut,cn,En;if(Re===ne.EOF&&ls(Se),Re===ne.Punctuator&&Se.value==="{")return Yr();if(En=Se,Re===ne.Punctuator)switch(Se.value){case";":return Ce.markEnd(Bi(),En);case"(":return Ce.markEnd(Mo(),En)}if(Re===ne.Keyword)switch(Se.value){case"break":return Ce.markEnd(jo(),En);case"continue":return Ce.markEnd(Xr(),En);case"debugger":return Ce.markEnd(Ho(),En);case"do":return Ce.markEnd(Po(),En);case"for":return Ce.markEnd(Vo(),En);case"function":return Ce.markEnd(mi(),En);case"if":return Ce.markEnd(Bo(),En);case"return":return Ce.markEnd(Jr(),En);case"switch":return Ce.markEnd(qo(),En);case"throw":return Ce.markEnd(Li(),En);case"try":return Ce.markEnd(Vi(),En);case"var":return Ce.markEnd(Oo(),En);case"while":return Ce.markEnd(Lo(),En);case"with":return Ce.markEnd(Uo(),En)}return Ge=Ns(),Ge.type===ae.Identifier&&pn(":")?(fn(),cn="$"+Ge.name,Object.prototype.hasOwnProperty.call($e.labelSet,cn)&&Pn({},le.Redeclaration,"Label",Ge.name),$e.labelSet[cn]=!0,Ut=Zs(),delete $e.labelSet[cn],Ce.markEnd(Ce.createLabeledStatement(Ge,Ut),En)):(wn(),Ce.markEnd(Ce.createExpressionStatement(Ge),En))}function fi(){var Re,Ge=[],Ut,cn,En,Fn,Jn,os,xs,$s;for($s=Se,Rn("{");ge<be&&!(Se.type!==ne.StringLiteral||(Ut=Se,Re=Ir(),Ge.push(Re),Re.expression.type!==ae.Literal));)cn=fe.slice(Ut.start+1,Ut.end-1),cn==="use strict"?(me=!0,En&&Un(En,le.StrictOctalLiteral)):!En&&Ut.octal&&(En=Ut);for(Fn=$e.labelSet,Jn=$e.inIteration,os=$e.inSwitch,xs=$e.inFunctionBody,$e.labelSet={},$e.inIteration=!1,$e.inSwitch=!1,$e.inFunctionBody=!0;ge<be&&!(pn("}")||(Re=Ir(),typeof Re>"u"));)Ge.push(Re);return Rn("}"),$e.labelSet=Fn,$e.inIteration=Jn,$e.inSwitch=os,$e.inFunctionBody=xs,Ce.markEnd(Ce.createBlockStatement(Ge),$s)}function ji(Re){var Ge,Ut=[],cn,En,Fn,Jn,os;if(Rn("("),!pn(")"))for(Fn={};ge<be&&(cn=Se,Ge=fr(),Jn="$"+cn.value,me?(Ve(cn.value)&&(En=cn,os=le.StrictParamName),Object.prototype.hasOwnProperty.call(Fn,Jn)&&(En=cn,os=le.StrictParamDupe)):Re||(Ve(cn.value)?(Re=cn,os=le.StrictParamName):ze(cn.value)?(Re=cn,os=le.StrictReservedWord):Object.prototype.hasOwnProperty.call(Fn,Jn)&&(Re=cn,os=le.StrictParamDupe)),Ut.push(Ge),Fn[Jn]=!0,!pn(")"));)Rn(",");return Rn(")"),{params:Ut,stricted:En,firstRestricted:Re,message:os}}function mi(){var Re,Ge=[],Ut,cn,En,Fn,Jn,os,xs,$s;return $s=Se,Kn("function"),cn=Se,Re=fr(),me?Ve(cn.value)&&Un(cn,le.StrictFunctionName):Ve(cn.value)?(Jn=cn,os=le.StrictFunctionName):ze(cn.value)&&(Jn=cn,os=le.StrictReservedWord),Fn=ji(Jn),Ge=Fn.params,En=Fn.stricted,Jn=Fn.firstRestricted,Fn.message&&(os=Fn.message),xs=me,Ut=fi(),me&&Jn&&Pn(Jn,os),me&&En&&Un(En,os),me=xs,Ce.markEnd(Ce.createFunctionDeclaration(Re,Ge,[],Ut),$s)}function Ui(){var Re,Ge=null,Ut,cn,En,Fn,Jn=[],os,xs,$s;return $s=Se,Kn("function"),pn("(")||(Re=Se,Ge=fr(),me?Ve(Re.value)&&Un(Re,le.StrictFunctionName):Ve(Re.value)?(cn=Re,En=le.StrictFunctionName):ze(Re.value)&&(cn=Re,En=le.StrictReservedWord)),Fn=ji(cn),Jn=Fn.params,Ut=Fn.stricted,cn=Fn.firstRestricted,Fn.message&&(En=Fn.message),xs=me,os=fi(),me&&cn&&Pn(cn,En),me&&Ut&&Un(Ut,En),me=xs,Ce.markEnd(Ce.createFunctionExpression(Ge,Jn,[],os),$s)}function Ir(){if(Se.type===ne.Keyword)switch(Se.value){case"const":case"let":return Ro(Se.value);case"function":return mi();default:return Zs()}if(Se.type!==ne.EOF)return Zs()}function gi(){for(var Re,Ge=[],Ut,cn,En;ge<be&&(Ut=Se,!(Ut.type!==ne.StringLiteral||(Re=Ir(),Ge.push(Re),Re.expression.type!==ae.Literal)));)cn=fe.slice(Ut.start+1,Ut.end-1),cn==="use strict"?(me=!0,En&&Un(En,le.StrictOctalLiteral)):!En&&Ut.octal&&(En=Ut);for(;ge<be&&(Re=Ir(),!(typeof Re>"u"));)Ge.push(Re);return Ge}function Wo(){var Re,Ge;return Ke(),mn(),Ge=Se,me=!1,Re=gi(),Ce.markEnd(Ce.createProgram(Re),Ge)}function Ai(){var Re,Ge,Ut,cn=[];for(Re=0;Re<Te.tokens.length;++Re)Ge=Te.tokens[Re],Ut={type:Ge.type,value:Ge.value},Te.range&&(Ut.range=Ge.range),Te.loc&&(Ut.loc=Ge.loc),cn.push(Ut);Te.tokens=cn}function Zr(Re,Ge){var Ut,cn,En;Ut=String,typeof Re!="string"&&!(Re instanceof String)&&(Re=Ut(Re)),Ce=he,fe=Re,ge=0,ve=fe.length>0?1:0,ye=0,be=fe.length,Se=null,$e={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Te={},Ge=Ge||{},Ge.tokens=!0,Te.tokens=[],Te.tokenize=!0,Te.openParenToken=-1,Te.openCurlyToken=-1,Te.range=typeof Ge.range=="boolean"&&Ge.range,Te.loc=typeof Ge.loc=="boolean"&&Ge.loc,typeof Ge.comment=="boolean"&&Ge.comment&&(Te.comments=[]),typeof Ge.tolerant=="boolean"&&Ge.tolerant&&(Te.errors=[]);try{if(mn(),Se.type===ne.EOF)return Te.tokens;for(cn=fn();Se.type!==ne.EOF;)try{cn=fn()}catch(Fn){if(cn=Se,Te.errors){Te.errors.push(Fn);break}else throw Fn}Ai(),En=Te.tokens,typeof Te.comments<"u"&&(En.comments=Te.comments),typeof Te.errors<"u"&&(En.errors=Te.errors)}catch(Fn){throw Fn}finally{Te={}}return En}function Gi(Re,Ge){var Ut,cn;cn=String,typeof Re!="string"&&!(Re instanceof String)&&(Re=cn(Re)),Ce=he,fe=Re,ge=0,ve=fe.length>0?1:0,ye=0,be=fe.length,Se=null,$e={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1},Te={},typeof Ge<"u"&&(Te.range=typeof Ge.range=="boolean"&&Ge.range,Te.loc=typeof Ge.loc=="boolean"&&Ge.loc,Te.attachComment=typeof Ge.attachComment=="boolean"&&Ge.attachComment,Te.loc&&Ge.source!==null&&Ge.source!==void 0&&(Te.source=cn(Ge.source)),typeof Ge.tokens=="boolean"&&Ge.tokens&&(Te.tokens=[]),typeof Ge.comment=="boolean"&&Ge.comment&&(Te.comments=[]),typeof Ge.tolerant=="boolean"&&Ge.tolerant&&(Te.errors=[]),Te.attachComment&&(Te.range=!0,Te.comments=[],Te.bottomRightStack=[],Te.trailingComments=[],Te.leadingComments=[]));try{Ut=Wo(),typeof Te.comments<"u"&&(Ut.comments=Te.comments),typeof Te.tokens<"u"&&(Ai(),Ut.tokens=Te.tokens),typeof Te.errors<"u"&&(Ut.errors=Te.errors)}catch(En){throw En}finally{Te={}}return Ut}ee.version="1.2.5",ee.tokenize=Zr,ee.parse=Gi,ee.Syntax=function(){var Re,Ge={};typeof Object.create=="function"&&(Ge=Object.create(null));for(Re in ae)ae.hasOwnProperty(Re)&&(Ge[Re]=ae[Re]);return typeof Object.freeze=="function"&&Object.freeze(Ge),Ge}()})})(esprima$1);var esprima=esprima$1,uniq$2=uniq$4,PREFIX_COUNTER=0;function CompiledArgument(re,ee,ne){this.name=re,this.lvalue=ee,this.rvalue=ne,this.count=0}function CompiledRoutine(re,ee,ne,ie){this.body=re,this.args=ee,this.thisVars=ne,this.localVars=ie}function isGlobal(re){if(re==="eval")throw new Error("cwise-parser: eval() not allowed");return typeof window<"u"?re in window:typeof globalThis<"u"?re in globalThis:typeof self<"u"?re in self:!1}function getArgNames(re){for(var ee=re.body[0].expression.callee.params,ne=new Array(ee.length),ie=0;ie<ee.length;++ie)ne[ie]=ee[ie].name;return ne}function preprocess(re){for(var ee=["(",re,")()"].join(""),ne=esprima.parse(ee,{range:!0}),ie="_inline_"+PREFIX_COUNTER+++"_",oe=getArgNames(ne),ae=new Array(oe.length),ce=0;ce<oe.length;++ce)ae[ce]=new CompiledArgument([ie,"arg",ce,"_"].join(""),!1,!1);for(var le=new Array(ee.length),ce=0,ue=ee.length;ce<ue;++ce)le[ce]=ee.charAt(ce);var he=[],fe=[];function me(Ne){var Ie=ie+Ne.replace(/\_/g,"__");return he.push(Ie),Ie}function ge(Ne){var Ie="this_"+Ne.replace(/\_/g,"__");return fe.push(Ie),Ie}function ve(Ne,Ie){for(var ke=Ne.range[0],De=Ne.range[1],Oe=ke+1;Oe<De;++Oe)le[Oe]="";le[ke]=Ie}function ye(Ne){return"'"+Ne.replace(/\_/g,"\\_").replace(/\'/g,"'")+"'"}function be(Ne){return le.slice(Ne.range[0],Ne.range[1]).join("")}var Ce=1,Se=2;function $e(Ne){return Ne.parent.type==="AssignmentExpression"&&Ne.parent.left===Ne?Ne.parent.operator==="="?Ce:Ce|Se:Ne.parent.type==="UpdateExpression"?Ce|Se:Se}(function Ne(Ie,ke){if(Ie.parent=ke,Ie.type==="MemberExpression")Ie.computed?(Ne(Ie.object,Ie),Ne(Ie.property,Ie)):Ie.object.type==="ThisExpression"?ve(Ie,ge(Ie.property.name)):Ne(Ie.object,Ie);else{if(Ie.type==="ThisExpression")throw new Error("cwise-parser: Computed this is not allowed");if(Ie.type==="Identifier"){var De=Ie.name,Oe=oe.indexOf(De);if(Oe>=0){var Be=ae[Oe],Me=$e(Ie);Me&Ce&&(Be.lvalue=!0),Me&Se&&(Be.rvalue=!0),++Be.count,ve(Ie,Be.name)}else isGlobal(De)||ve(Ie,me(De))}else if(Ie.type==="Literal")typeof Ie.value=="string"&&ve(Ie,ye(Ie.value));else{if(Ie.type==="WithStatement")throw new Error("cwise-parser: with() statements not allowed");for(var Le=Object.keys(Ie),je=0,ze=Le.length;je<ze;++je)if(Le[je]!=="parent"){var Ve=Ie[Le[je]];if(Ve)if(Ve instanceof Array)for(var He=0;He<Ve.length;++He)Ve[He]&&typeof Ve[He].type=="string"&&Ne(Ve[He],Ie);else typeof Ve.type=="string"&&Ne(Ve,Ie)}}}})(ne.body[0].expression.callee.body,void 0),uniq$2(he),uniq$2(fe);var Te=new CompiledRoutine(be(ne.body[0].expression.callee.body),ae,fe,he);return Te}var cwiseParser=preprocess,parse$2=cwiseParser,compile$1=compiler,REQUIRED_FIELDS=["args","body"],OPTIONAL_FIELDS=["pre","post","printCode","funcName","blockSize"];function createCWise(re){for(var ee in re)REQUIRED_FIELDS.indexOf(ee)<0&&OPTIONAL_FIELDS.indexOf(ee)<0&&console.warn("cwise: Unknown argument '"+ee+"' passed to expression compiler");for(var ne=0;ne<REQUIRED_FIELDS.length;++ne)if(!re[REQUIRED_FIELDS[ne]])throw new Error("cwise: Missing argument: "+REQUIRED_FIELDS[ne]);return compile$1({args:re.args,pre:parse$2(re.pre||function(){}),body:parse$2(re.body),post:parse$2(re.post||function(){}),debug:!!re.printCode,funcName:re.funcName||re.body.name||"cwise",blockSize:re.blockSize||64})}var cwiseEsprima=createCWise,cwise=cwiseEsprima;cwise({args:["array","array","scalar","scalar","scalar"],body:function re(ee,ne,ie,oe,ae){}});const SAMPLE_RATE=16e3;getOfflineAudioContext(SAMPLE_RATE);const MidiComponent=({artifactUri:re,displayUri:ee,previewUri:ne,displayView:ie,nft:oe})=>{const[ae,ce]=reactExports.useState(ne||re),[le,ue]=reactExports.useState(100),[he,fe]=reactExports.useState(!1),[me,ge]=reactExports.useState(!1),ve=reactExports.useRef(),ye=()=>{fe(!he)};reactExports.useEffect(()=>{ve.current&&(he?ve.current.start():ve.current.stop())},[he]),reactExports.useEffect(()=>{(ne||re)&&processMidiData(ne||re,le).then(Ce=>{ce(Ce)}).catch(Ce=>{console.error("Error processing MIDI:",Ce)})},[ne,re,le]);const be=reactExports.useCallback(Ce=>{ue(Ce.target.value)},[]);return reactExports.useEffect(()=>{ve.current&&(ve.current.addEventListener("start",()=>{ge(!0)}),ve.current.addEventListener("stop",()=>{ge(!1)}))},[ve.current]),ie?jsxs("div",{className:styles$C.container,children:[jsx$1("img",{src:ee,alt:"cover for midi nft"}),jsx$1("i",{children:"Please manually stop midi player before navigating out of this page."}),jsxs("div",{className:styles$C.player_container,children:[jsx$1("midi-player",{id:"midi-player",ref:ve,src:ae}),jsxs("div",{className:styles$C.volume_container,children:[jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"black",class:"w-6 h-6",children:jsx$1("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"})}),jsx$1("input",{onInput:be,disabled:me,type:"range",min:"1",max:"100",value:le,className:styles$C.volume_slider,id:"volume-slider"})]})]})]}):jsxs("div",{className:styles$C.feed_container,children:[jsx$1(Button,{to:`${PATH.OBJKT}/${oe.token_id}`,children:jsx$1("img",{alt:`cover for midi object ${oe.token_id}`,src:ee})}),jsx$1(Button,{className:styles$C.button,onClick:ye,children:he?jsxs("div",{className:styles$C.playerButton,children:[jsx$1(SvgPause,{fill:"var(--gray-10)",width:64,height:64}),jsx$1("i",{children:"Please manually stop midi player before navigating away from this page."})]}):jsx$1(SvgPlay,{fill:"var(--gray-10)",width:64,height:64})}),jsx$1("div",{id:"feed-player",style:{display:"none"},children:jsx$1("midi-player",{id:"midi-player",ref:ve,src:ae})})]})},container$i="_container_c9n77_1",preview="_preview_c9n77_18",button="_button_c9n77_33",gradient="_gradient_c9n77_43",styles$B={container:container$i,preview,button,gradient},TXT=({artifactUri:re,displayUri:ee,displayView:ne,previewUri:ie,nft:oe})=>{const[ae,ce]=React.useState(""),[le,ue]=React.useState(!1),he=reactExports.useRef();return React.useEffect(()=>{var me;if(re?axios.get(re).then(ge=>{ce(ge.data)}):ee&&((async()=>{await fetch(ee).then(ge=>{if(!ge.ok)throw new Error("Error reading blob");return ge.text()}).then(ge=>{ce(ge)}).catch(ge=>{console.error("Error fetching the file:",ge)})})(),ue(oe.is_mono_type)),oe!=null&&oe.tags&&((me=oe==null?void 0:oe.tags)==null?void 0:me.length)>0){let ge=oe.tags.map(ve=>ve.tag.toLowerCase());(ge.includes("monospace")||ge.includes("mono"))&&ue(!0)}},[re,ie,ne,ee,oe]),jsx$1("div",{ref:he,className:styles$B.container,children:jsx$1("div",{className:styles$B.preview,children:!ne&&ie?jsx$1("img",{alt:`Text NFT thumbnail for ${oe.token_id}`,src:ie}):jsx$1("pre",{style:{fontFamily:le?"Iosevka, monospace":"Source Sans Pro, sans-serif",overflowY:"auto"},children:ae})})})},RenderMediaType=({nft:re,previewUri:ee,previewDisplayUri:ne,displayView:ie,details:oe})=>{const ae=reactExports.useMemo(()=>re.artifact_uri?HashToURL(re.artifact_uri,"CDN",{size:"raw"}):"",[re]);if(!re)throw Error("No OBJKT to render");if(re.metadata_status==="unprocessed")throw Error(`The OBJKT #${re.token_id} is being processed`,{cause:"Processing Metadata"});const ce=reactExports.useMemo(()=>{var he;return!!(!re.display_uri&&((he=re.mime_type)!=null&&he.startsWith("video")))},[re]),le=reactExports.useMemo(()=>{var he;if(ne)return ne;if(re.display_uri)return HashToURL(re.display_uri,"CDN",{size:"raw"});if((he=re.mime_type)!=null&&he.startsWith("video"))return HashToURL(re.artifact_uri,"CDN",{size:"raw"})},[re,ne]),ue=reactExports.useMemo(()=>{switch(re.mime_type){case MIMETYPE.BMP:case MIMETYPE.GIF:case MIMETYPE.JPEG:case MIMETYPE.PNG:case MIMETYPE.TIFF:case MIMETYPE.WEBP:return jsx$1(ImageComponent,{artifactUri:ae,displayUri:le,displayView:ie,previewUri:ee,nft:re});case MIMETYPE.SVG:return jsx$1(VectorComponent,{artifactUri:ae,displayUri:le,displayView:ie,previewUri:ee,nft:re});case MIMETYPE.DIRECTORY:case MIMETYPE.ZIP:case MIMETYPE.ZIP1:case MIMETYPE.ZIP2:return jsx$1(HTMLComponent,{artifactUri:ae,displayUri:le,displayView:ie,previewUri:ee,nft:re});case MIMETYPE.MP4:case MIMETYPE.OGV:case MIMETYPE.QUICKTIME:case MIMETYPE.WEBM:return jsx$1(VideoComponent,{artifactUri:ae,displayUri:le,displayView:ie,previewUri:ee,nft:re,forceVideo:ce});case MIMETYPE.GLB:case MIMETYPE.GLTF:return jsx$1(GLBComponent,{artifactUri:ae,displayUri:le,displayView:ie,previewUri:ee,nft:re});case MIMETYPE.MP3:case MIMETYPE.OGA:case MIMETYPE.FLAC:case MIMETYPE.WAV:case MIMETYPE.XWAV:return jsx$1(AudioComponent,{artifactUri:ae,displayUri:le,displayView:ie,previewUri:ee,nft:re});case MIMETYPE.PDF:return jsx$1(PdfComponent,{artifactUri:ae,displayUri:le,displayView:ie,previewUri:ee,nft:re});case MIMETYPE.MD:return jsx$1(MD,{artifactUri:ae,displayUri:le,displayView:ie,previewUri:ee,nft:re});case MIMETYPE.MIDI:case MIMETYPE.MID:return jsx$1(MidiComponent,{artifactUri:ae,displayUri:le,displayView:ie,previewUri:ee,nft:re});case MIMETYPE.TXT:return jsx$1(TXT,{artifactUri:ae,displayUri:ee,displayView:ie,previewUri:le,nft:re});default:return jsx$1(UnknownComponent,{mimeType:re.mime_type})}},[re.mime_type]);if(re.metadata_status==="error"){const he=Error(`The OBJKT #${re.token_id} failed to index, 
      if this persists for more than a day please log an issue.`,{cause:"Metadata Error"});return console.error(he),null}return jsxs(Container$1,{displayView:ie,nft:re,children:[oe,ue]})},hover_details="_hover_details_1v35r_216",moderated="_moderated_1v35r_232",moderation_corner="_moderation_corner_1v35r_236",container$h="_container_1v35r_290",token_infos_container="_token_infos_container_1v35r_298",blur$1="_blur_1v35r_306",photo_protect="_photo_protect_1v35r_310",masonry="_masonry_1v35r_318",styles$A={hover_details,moderated,moderation_corner,container:container$h,token_infos_container,blur:blur$1,photo_protect,masonry},info_variants={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},TokenHover=({nft:re,visible:ee})=>jsx$1(AnimatePresence,{children:ee&&jsxs(motion.div,{...info_variants,className:styles$A.hover_details,children:[jsxs("h3",{children:["#",re.token_id]}),jsx$1("h4",{children:re.name}),jsx$1("p",{children:re.description})]})}),FeedItem=({nft:re})=>{var ue;const[ee,ne]=useLocalSettings(he=>[he.nsfwFriendly,he.photosensitiveFriendly],shallow),ie=useLocalSettings(he=>he.zen),oe=useLocalSettings(he=>he.viewMode),[ae,ce]=reactExports.useState(!1),le=classNames$1({[styles$A.container]:!0,[styles$A.blur]:re.isNSFW&&!ee,[styles$A.photo_protect]:re.isPhotosensitive&&!ne,[styles$A.masonry]:oe==="masonry"});return jsxs("div",{onMouseOver:()=>ce(!0),onFocus:()=>ce(!0),onMouseOut:()=>ce(!1),onBlur:()=>ce(!1),className:le,children:[(ue=re.mime_type)!=null&&ue.startsWith("audio")?jsx$1(RenderMediaType,{details:jsx$1(TokenHover,{nft:re,visible:ae&&!ie}),nft:re}):jsx$1(Link,{"aria-label":`OBJKT ${re.token_id}`,to:`${PATH.OBJKT}/${re.token_id}`,children:jsx$1(RenderMediaType,{details:jsx$1(TokenHover,{nft:re,visible:ae&&!ie}),nft:re})}),!ie&&jsx$1("div",{className:styles$A.token_infos_container,children:jsx$1(ItemInfoCompact,{nft:re})})]})};class InfiniteScroll extends reactExports.Component{constructor(ee){super(ee),this.scrollListener=this.scrollListener.bind(this),this.eventListenerOptions=this.eventListenerOptions.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this)}componentDidMount(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}componentDidUpdate(){if(this.props.isReverse&&this.loadMore){const ee=this.getParentElement(this.scrollComponent);ee.scrollTop=ee.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}componentWillUnmount(){this.detachScrollListener(),this.detachMousewheelListener()}isPassiveSupported(){let ee=!1;const ne={get passive(){ee=!0}};try{document.addEventListener("test",null,ne),document.removeEventListener("test",null,ne)}catch{}return ee}eventListenerOptions(){let ee=this.props.useCapture;return this.isPassiveSupported()?ee={useCapture:this.props.useCapture,passive:!0}:ee={passive:!1},ee}setDefaultLoader(ee){this.defaultLoader=ee}detachMousewheelListener(){let ee=window;this.props.useWindow===!1&&(ee=this.scrollComponent.parentNode),ee.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}detachScrollListener(){let ee=window;this.props.useWindow===!1&&(ee=this.getParentElement(this.scrollComponent)),ee.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),ee.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}getParentElement(ee){const ne=this.props.getScrollParent&&this.props.getScrollParent();return ne??(ee&&ee.parentNode)}filterProps(ee){return ee}attachScrollListener(){const ee=this.getParentElement(this.scrollComponent);if(!this.props.hasMore||!ee)return;let ne=window;this.props.useWindow===!1&&(ne=ee),ne.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),ne.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),ne.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}mousewheelListener(ee){ee.deltaY===1&&!this.isPassiveSupported()&&ee.preventDefault()}scrollListener(){const ee=this.scrollComponent,ne=window,ie=this.getParentElement(ee);let oe;if(this.props.useWindow){const ae=document.documentElement||document.body.parentNode||document.body,ce=ne.pageYOffset!==void 0?ne.pageYOffset:ae.scrollTop;this.props.isReverse?oe=ce:oe=this.calculateOffset(ee,ce)}else this.props.isReverse?oe=ie.scrollTop:oe=ee.scrollHeight-ie.scrollTop-ie.clientHeight;oe<Number(this.props.threshold)&&ee&&ee.offsetParent!==null&&(this.detachScrollListener(),this.beforeScrollHeight=ie.scrollHeight,this.beforeScrollTop=ie.scrollTop,typeof this.props.loadMore=="function"&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}calculateOffset(ee,ne){return ee?this.calculateTopPosition(ee)+(ee.offsetHeight-ne-window.innerHeight):0}calculateTopPosition(ee){return ee?ee.offsetTop+this.calculateTopPosition(ee.offsetParent):0}render(){const ee=this.filterProps(this.props),{children:ne,element:ie,hasMore:oe,initialLoad:ae,isReverse:ce,loader:le,loadMore:ue,pageStart:he,ref:fe,threshold:me,useCapture:ge,useWindow:ve,getScrollParent:ye,...be}=ee;be.ref=Se=>{this.scrollComponent=Se,fe&&fe(Se)};const Ce=[ne];return oe&&(le?ce?Ce.unshift(le):Ce.push(le):this.defaultLoader&&(ce?Ce.unshift(this.defaultLoader):Ce.push(this.defaultLoader))),React.createElement(ie,be,Ce)}}nc(InfiniteScroll,"propTypes",{children:PropTypes.node.isRequired,element:PropTypes.node,hasMore:PropTypes.bool,initialLoad:PropTypes.bool,isReverse:PropTypes.bool,loader:PropTypes.node,loadMore:PropTypes.func.isRequired,pageStart:PropTypes.number,ref:PropTypes.func,getScrollParent:PropTypes.func,threshold:PropTypes.number,useCapture:PropTypes.bool,useWindow:PropTypes.bool}),nc(InfiniteScroll,"defaultProps",{element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null});function laggy(re){return(ee,ne,ie)=>{const oe=reactExports.useRef(),ae=re(ee,ne,ie);reactExports.useEffect(()=>{ae.data!==void 0&&(oe.current=ae.data)},[ae.data]);const ce=reactExports.useCallback(()=>{oe.current=void 0},[]),le=ae.data===void 0?oe.current:ae.data,ue=ae.data===void 0&&oe.current!==void 0;return Object.assign({},ae,{data:le,isLagging:ue,resetLaggy:ce})}}const toolbar="_toolbar_tugae_216",filter_box="_filter_box_tugae_236",feeds_area="_feeds_area_tugae_251",filter_area="_filter_area_tugae_258",feeds_button="_feeds_button_tugae_263",separator$1="_separator_tugae_283",feeds_dropdown="_feeds_dropdown_tugae_288",view_mode_area="_view_mode_area_tugae_292",tagline="_tagline_tugae_301",media_type="_media_type_tugae_306",confirm_box="_confirm_box_tugae_312",tags="_tags_tugae_320",filters_container="_filters_container_tugae_327",styles$z={toolbar,filter_box,feeds_area,filter_area,feeds_button,separator:separator$1,feeds_dropdown,view_mode_area,tagline,media_type,confirm_box,tags,filters_container},addBodyClass=re=>document.body.classList.add(re),removeBodyClass=re=>document.body.classList.remove(re);function useBodyClass(re){reactExports.useEffect(()=>(re instanceof Array?re.map(addBodyClass):addBodyClass(re),()=>{re instanceof Array?re.map(removeBodyClass):removeBodyClass(re)}),[re])}const dropdown_container="_dropdown_container_1x8nz_216",vertical="_vertical_1x8nz_237",header_button="_header_button_1x8nz_241",menu_left="_menu_left_1x8nz_254",header_button_open="_header_button_open_1x8nz_260",header_button_toggled="_header_button_toggled_1x8nz_273",left$1="_left_1x8nz_281",styles$y={dropdown_container,vertical,header_button,menu_left,header_button_open,header_button_toggled,left:left$1},useClickOutside=(re,ee,ne=!1)=>{const ie=oe=>{re.current&&!re.current.contains(oe.target)&&(ne&&re.current.parentElement.contains(oe.target)||ee())};reactExports.useEffect(()=>(document.addEventListener("mousedown",ie),()=>{document.removeEventListener("mousedown",ie)}),[])};/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */var twemoji=function(){var re={base:"https://twemoji.maxcdn.com/v/14.0.2/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:$e,toCodePoint:ke},onerror:function(){this.parentNode&&this.parentNode.replaceChild(ue(this.alt,!1),this)},parse:Te,replace:Ne,test:Ie},ee={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},ne=/(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[©®\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef0-\udef6]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedd-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7c\ude80-\ude86\ude90-\udeac\udeb0-\udeba\udec0-\udec2\uded0-\uded9\udee0-\udee7]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,ie=/\uFE0F/g,oe=String.fromCharCode(8205),ae=/[&<>'"]/g,ce=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,le=String.fromCharCode;return re;function ue(De,Oe){return document.createTextNode(Oe?De.replace(ie,""):De)}function he(De){return De.replace(ae,be)}function fe(De,Oe){return"".concat(Oe.base,Oe.size,"/",De,Oe.ext)}function me(De,Oe){for(var Be=De.childNodes,Me=Be.length,Le,je;Me--;)Le=Be[Me],je=Le.nodeType,je===3?Oe.push(Le):je===1&&!("ownerSVGElement"in Le)&&!ce.test(Le.nodeName.toLowerCase())&&me(Le,Oe);return Oe}function ge(De){return ke(De.indexOf(oe)<0?De.replace(ie,""):De)}function ve(De,Oe){for(var Be=me(De,[]),Me=Be.length,Le,je,ze,Ve,He,We,Ye,Ue,Ke,Xe,Vt,Wt,Kt;Me--;){for(ze=!1,Ve=document.createDocumentFragment(),He=Be[Me],We=He.nodeValue,Ue=0;Ye=ne.exec(We);){if(Ke=Ye.index,Ke!==Ue&&Ve.appendChild(ue(We.slice(Ue,Ke),!0)),Vt=Ye[0],Wt=ge(Vt),Ue=Ke+Vt.length,Kt=Oe.callback(Wt,Oe),Wt&&Kt){Xe=new Image,Xe.onerror=Oe.onerror,Xe.setAttribute("draggable","false"),Le=Oe.attributes(Vt,Wt);for(je in Le)Le.hasOwnProperty(je)&&je.indexOf("on")!==0&&!Xe.hasAttribute(je)&&Xe.setAttribute(je,Le[je]);Xe.className=Oe.className,Xe.alt=Vt,Xe.src=Kt,ze=!0,Ve.appendChild(Xe)}Xe||Ve.appendChild(ue(Vt,!1)),Xe=null}ze&&(Ue<We.length&&Ve.appendChild(ue(We.slice(Ue),!0)),He.parentNode.replaceChild(Ve,He))}return De}function ye(De,Oe){return Ne(De,function(Be){var Me=Be,Le=ge(Be),je=Oe.callback(Le,Oe),ze,Ve;if(Le&&je){Me="<img ".concat('class="',Oe.className,'" ','draggable="false" ','alt="',Be,'"',' src="',je,'"'),ze=Oe.attributes(Be,Le);for(Ve in ze)ze.hasOwnProperty(Ve)&&Ve.indexOf("on")!==0&&Me.indexOf(" "+Ve+"=")===-1&&(Me=Me.concat(" ",Ve,'="',he(ze[Ve]),'"'));Me=Me.concat("/>")}return Me})}function be(De){return ee[De]}function Ce(){return null}function Se(De){return typeof De=="number"?De+"x"+De:De}function $e(De){var Oe=typeof De=="string"?parseInt(De,16):De;return Oe<65536?le(Oe):(Oe-=65536,le(55296+(Oe>>10),56320+(Oe&1023)))}function Te(De,Oe){return(!Oe||typeof Oe=="function")&&(Oe={callback:Oe}),(typeof De=="string"?ye:ve)(De,{callback:Oe.callback||fe,attributes:typeof Oe.attributes=="function"?Oe.attributes:Ce,base:typeof Oe.base=="string"?Oe.base:re.base,ext:Oe.ext||re.ext,size:Oe.folder||Se(Oe.size||re.size),className:Oe.className||re.className,onerror:Oe.onerror||re.onerror})}function Ne(De,Oe){return String(De).replace(ne,Oe)}function Ie(De){ne.lastIndex=0;var Oe=ne.test(De);return ne.lastIndex=0,Oe}function ke(De,Oe){for(var Be=[],Me=0,Le=0,je=0;je<De.length;)Me=De.charCodeAt(je++),Le?(Be.push((65536+(Le-55296<<10)+(Me-56320)).toString(16)),Le=0):55296<=Me&&Me<=56319?Le=Me:Be.push(Me.toString(16));return Be.join(Oe||"-")}}();function useTwemoji(){reactExports.useEffect(()=>{twemoji.parse(document.body,{folder:"svg",ext:".svg",base:"https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/"})},[])}function DropDown({children:re,setOpen:ee,vertical:ne,menuID:ie,left:oe}){useBodyClass("overlay");const ae=reactExports.useRef(null);useTwemoji(),useClickOutside(ae,()=>{ee(!1)},!0);const ce=classNames$1({[styles$y.dropdown_container]:!0,[styles$y.vertical]:ne,[styles$y.left]:oe});return jsx$1(motion.div,{className:ce,initial:"hidden",animate:"show",variants:containerMenu,id:ie||"dropdown",ref:ae,children:jsx$1(AnimatePresence,{children:re})})}const DropDown$1=reactExports.memo(DropDown);function DropdownButton({menuID:re,direction:ee="right",label:ne,alt:ie,icon:oe,toggled:ae,children:ce,onClick:le,className:ue}){const[he,fe]=reactExports.useState(!1);useTwemoji();const me=()=>{fe(!he)},ge=classNames$1({[styles$y.header_button]:!0,[styles$y.header_button_open]:he,[styles$y.header_button_toggled]:ae}),ve=classNames$1({[styles$y.menu_left]:ee==="left"}),ye={};return ee==="left"&&(ye.left=!0),jsxs(motion.div,{className:`${ue||""} ${ve}`,children:[jsx$1(Button,{alt:ie,className:ge,"data-toggle":re,onClick:()=>{me(),le&&le()},children:jsxs(Fragment,{children:[ne,oe]})}),jsx$1(AnimatePresence,{children:ce&&he&&React.cloneElement(ce,{setOpen:fe,...ye})})]})}const DropdownButton$1=reactExports.memo(DropdownButton),locationMap=new Map([["/feed/sales","Recent Sales"],["/feed/random","Random"],["/feed/newobjkts","New OBJKTs"],["/feed/friends","Friends"],["---fund_feeds","fund_feeds"],["/feed/art4artists","Art4Artists"],["/feed/tez4pal","🇵🇸 Tez4Pal"],["/feed/morocco-quake-aid","🇲🇦 Quake Aid"],["/feed/quake-aid","🇹🇷🇸🇾 Quake Aid"],["/feed/ukraine","🇺🇦 Ukraine"],["/feed/pakistan","🇵🇰 Pakistan"],["/feed/iran","🇮🇷 Iran"],["/feed/tezospride","🏳️‍🌈 Tezospride"],["---mime_feeds","mime_feeds"],["/feed/image","Image"],["/feed/video","Video"],["/feed/audio","Audio"],["/feed/glb","3D"],["/feed/html-svg","HTML & SVG"],["/feed/gif","GIF"],["/feed/pdf","PDF"],["/feed/md","Markdown"],["/feed/txt","Text"],["/feed/midi","Midi"]]),locationNeedSync=["/feed/friends"],FeedToolbar=({feeds_menu:re=!1})=>{const[ee,ne,ie]=useLocalSettings(le=>[le.viewMode,le.setViewMode,le.startFeed],shallow),oe=useLocation(),ae=locationMap.get(oe.pathname)||ie||DEFAULT_START_FEED,ce=useNavigate();return jsxs(motion.div,{className:styles$z.toolbar,children:[re&&jsx$1("div",{className:styles$z.feeds_area,children:jsx$1(DropdownButton$1,{alt:"feeds selection dropdown",menuID:"feeds",icon:jsx$1(SvgChevron,{}),label:ae,className:styles$z.feeds_dropdown,children:jsx$1(DropDown$1,{menuID:"feeds",children:jsx$1("div",{className:styles$z.feeds_button,children:[...locationMap.keys()].map(le=>le.startsWith("-")?jsx$1(Line,{className:styles$z.separator},le):locationNeedSync.includes(le)?jsx$1(Button,{onClick:()=>{ce("/sync",{state:`${le}`})},children:locationMap.get(le)},le):jsx$1(Button,{to:le,children:locationMap.get(le)},le))})})})}),jsxs("div",{className:styles$z.view_mode_area,children:[jsx$1(IconToggle,{alt:"single view mode",toggled:ee==="single",onClick:()=>{ne("single")},icon:jsx$1(SvgSingleView,{})}),jsx$1(IconToggle,{alt:"masonry view mode",toggled:ee==="masonry",onClick:()=>ne("masonry"),icon:jsx$1(SvgMasonry,{})})]})]})},single_view="_single_view_96p3b_216",load_container="_load_container_96p3b_222",feed_container="_feed_container_96p3b_231",infinite_scroll="_infinite_scroll_96p3b_251",empty_section="_empty_section_96p3b_256",styles$x={single_view,load_container,feed_container,infinite_scroll,empty_section};function useFirstMountState(){var re=reactExports.useRef(!0);return re.current?(re.current=!1,!0):re.current}var useUpdateEffect=function(re,ee){var ne=useFirstMountState();reactExports.useEffect(function(){if(!ne)return re()},ee)};const useUpdateEffect$1=useUpdateEffect;function on(re){for(var ee=[],ne=1;ne<arguments.length;ne++)ee[ne-1]=arguments[ne];re&&re.addEventListener&&re.addEventListener.apply(re,ee)}function off(re){for(var ee=[],ne=1;ne<arguments.length;ne++)ee[ne-1]=arguments[ne];re&&re.removeEventListener&&re.removeEventListener.apply(re,ee)}var isBrowser$1=typeof window<"u",toggleSelection=function(){var re=document.getSelection();if(!re.rangeCount)return function(){};for(var ee=document.activeElement,ne=[],ie=0;ie<re.rangeCount;ie++)ne.push(re.getRangeAt(ie));switch(ee.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":ee.blur();break;default:ee=null;break}return re.removeAllRanges(),function(){re.type==="Caret"&&re.removeAllRanges(),re.rangeCount||ne.forEach(function(oe){re.addRange(oe)}),ee&&ee.focus()}},deselectCurrent=toggleSelection,clipboardToIE11Formatting={"text/plain":"Text","text/html":"Url",default:"Text"},defaultMessage="Copy to clipboard: #{key}, Enter";function format(re){var ee=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return re.replace(/#{\s*key\s*}/g,ee)}function copy$1(re,ee){var ne,ie,oe,ae,ce,le,ue=!1;ee||(ee={}),ne=ee.debug||!1;try{oe=deselectCurrent(),ae=document.createRange(),ce=document.getSelection(),le=document.createElement("span"),le.textContent=re,le.ariaHidden="true",le.style.all="unset",le.style.position="fixed",le.style.top=0,le.style.clip="rect(0, 0, 0, 0)",le.style.whiteSpace="pre",le.style.webkitUserSelect="text",le.style.MozUserSelect="text",le.style.msUserSelect="text",le.style.userSelect="text",le.addEventListener("copy",function(fe){if(fe.stopPropagation(),ee.format)if(fe.preventDefault(),typeof fe.clipboardData>"u"){ne&&console.warn("unable to use e.clipboardData"),ne&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var me=clipboardToIE11Formatting[ee.format]||clipboardToIE11Formatting.default;window.clipboardData.setData(me,re)}else fe.clipboardData.clearData(),fe.clipboardData.setData(ee.format,re);ee.onCopy&&(fe.preventDefault(),ee.onCopy(fe.clipboardData))}),document.body.appendChild(le),ae.selectNodeContents(le),ce.addRange(ae);var he=document.execCommand("copy");if(!he)throw new Error("copy command was unsuccessful");ue=!0}catch(fe){ne&&console.error("unable to copy using execCommand: ",fe),ne&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(ee.format||"text",re),ee.onCopy&&ee.onCopy(window.clipboardData),ue=!0}catch(me){ne&&console.error("unable to copy using clipboardData: ",me),ne&&console.error("falling back to prompt"),ie=format("message"in ee?ee.message:defaultMessage),window.prompt(ie,re)}}finally{ce&&(typeof ce.removeRange=="function"?ce.removeRange(ae):ce.removeAllRanges()),le&&document.body.removeChild(le),oe()}return ue}var copyToClipboard=copy$1;const r$1=getDefaultExportFromCjs(copyToClipboard);var useEffectOnce=function(re){reactExports.useEffect(re,[])};const useEffectOnce$1=useEffectOnce;var getInitialState=function(re,ee){return ee!==void 0?ee:isBrowser$1?window.matchMedia(re).matches:!1},useMedia=function(re,ee){var ne=reactExports.useState(getInitialState(re,ee)),ie=ne[0],oe=ne[1];return reactExports.useEffect(function(){var ae=!0,ce=window.matchMedia(re),le=function(){ae&&oe(!!ce.matches)};return ce.addListener(le),oe(ce.matches),function(){ae=!1,ce.removeListener(le)}},[re]),ie};const useMedia$1=useMedia;var useMount=function(re){useEffectOnce$1(function(){re()})};const useMount$1=useMount;var useUnmount=function(re){var ee=reactExports.useRef(re);ee.current=re,useEffectOnce$1(function(){return function(){return ee.current()}})};const useUnmount$1=useUnmount;var useRafState=function(re){var ee=reactExports.useRef(0),ne=reactExports.useState(re),ie=ne[0],oe=ne[1],ae=reactExports.useCallback(function(ce){cancelAnimationFrame(ee.current),ee.current=requestAnimationFrame(function(){oe(ce)})},[]);return useUnmount$1(function(){cancelAnimationFrame(ee.current)}),[ie,ae]};const useRafState$1=useRafState;var useWindowScroll=function(){var re=useRafState$1(function(){return{x:isBrowser$1?window.pageXOffset:0,y:isBrowser$1?window.pageYOffset:0}}),ee=re[0],ne=re[1];return reactExports.useEffect(function(){var ie=function(){ne(function(oe){var ae=window.pageXOffset,ce=window.pageYOffset;return oe.x!==ae||oe.y!==ce?{x:ae,y:ce}:oe})};return ie(),on(window,"scroll",ie,{capture:!1,passive:!0}),function(){off(window,"scroll",ie)}},[]),ee};const useWindowScroll$1=useWindowScroll,useKeyboard=(re,ee,ne)=>{const[ie,oe]=reactExports.useState([!1,null]),[ae,ce]=reactExports.useState(null);return useMount$1(()=>{__vitePreload(()=>import("./keyboard-c95f0a37.js").then(le=>le.k),["assets/keyboard-c95f0a37.js","assets/contracts-aa63cee0.js"]).then(le=>ce(le.default||le))}),reactExports.useEffect(()=>{if(!ae)return;const le=he=>oe([!0,he]),ue=he=>oe([!1,he]);return ae.bind(re,le,ue,!0),()=>{ae.unbind(re,le,ue)}},[re,ae]),useUpdateEffect$1(()=>{!ie[0]&&ne?ne():ie[0]&&ee&&ee()},[ie[0]]),ie};function SingleView({tokens:re}){return jsx$1("div",{className:`${styles$x.single_view} no-fool`,children:re.map(ee=>jsx$1(FeedItem,{nft:ee},ee.token_id))})}function MasonryView({tokens:re}){return jsx$1(ResponsiveMasonry,{children:re.map(ee=>jsx$1(FeedItem,{nft:ee},ee.key||ee.token_id))})}function TokenCollection({query:re,label:ee,namespace:ne,showRestricted:ie=!1,overrideProtections:oe=!1,feeds_menu:ae=!1,disable:ce=!1,variables:le={},swrParams:ue=[],itemsPerLoad:he=40,maxItems:fe=2e3,resultsPath:me="tokens",tokenPath:ge="",keyPath:ve="token_id",emptyMessage:ye="no results",postProcessTokens:be=Se=>Se,extractTokensFromResponse:Ce=(Se,{postProcessTokens:$e,resultsPath:Te,tokenPath:Ne,keyPath:Ie})=>$e(get$5(Se,Te).map(ke=>({...Ne?get$5(ke,Ne):ke,key:get$5(ke,Ie)})))}){const[Se]=useUserStore(We=>[We.address]),[$e,Te]=useSearchParams(),{walletBlockMap:Ne,nsfwMap:Ie,photosensitiveMap:ke,objktBlockMap:De}=useSettings(),[Oe,Be,Me]=useLocalSettings(We=>[We.viewMode,We.toggleViewMode,We.toggleZen],shallow);useKeyboard("v",Be),useKeyboard("z",Me);const Le=$e.get(ne)?parseInt($e.get(ne),10):he,{data:je,error:ze}=useSWR(ce?null:[ne,...ue],async We=>typeof re=="string"?distExports.request("https://teztok.teia.rocks/v1/graphql",re,{...le,...fe?{limit:fe}:{}}):re,{revalidateIfStale:!1,revalidateOnFocus:!1,use:[laggy]});if(ze)return jsx$1(Container$3,{children:jsx$1("pre",{children:JSON.stringify(ze,null,2)})});if(!je)return jsxs("div",{className:styles$x.feed_container,children:[jsx$1(FeedToolbar,{feeds_menu:ae}),jsx$1("div",{className:styles$x.load_container,children:jsx$1(Loading,{message:`Loading ${ee||ne}`})})]});if(Ne===void 0)throw new Error("Please try again in a few minutes.",{cause:"Could not retrieve the ban list"});const Ve=Ce(je,{postProcessTokens:be,resultsPath:me,tokenPath:ge,keyPath:ve}).filter(We=>ie?!0:Ne.get(We.artist_address)!==1&&De.get(We.id)!==1).map(We=>{var Ye,Ue,Ke;return{...We,isNSFW:!oe&&(Ie.get(We.token_id)===1||((Ye=We.teia_meta)==null?void 0:Ye.content_rating)===METADATA_CONTENT_RATING_MATURE),isPhotosensitive:!oe&&(ke.get(We.token_id)===1||((Ke=(Ue=We.teia_meta)==null?void 0:Ue.accessibility)==null?void 0:Ke.hazards.includes(METADATA_ACCESSIBILITY_HAZARDS_PHOTOSENS))),isModerated:(ke.get(We.token_id)===1||Ie.get(We.token_id)===1)&&We.artist_address===Se}});if(!Ve.length)return jsxs("div",{className:styles$x.feed_container,children:[jsx$1(FeedToolbar,{feeds_menu:ae}),jsx$1("div",{className:styles$x.empty_section,children:jsx$1("h1",{children:ye})})]});const He=Ve.slice(0,Le);return jsxs("div",{className:`${styles$x.feed_container} no-fool`,children:[jsx$1(FeedToolbar,{feeds_menu:ae}),jsx$1(IconCache.Provider,{value:{},children:jsx$1(InfiniteScroll,{className:`${styles$x.infinite_scroll} no-fool`,loadMore:()=>{Te({...Object.fromEntries($e),[ne]:Le+he},{preventScrollReset:!0})},hasMore:Le<Ve.length,children:Oe==="single"?jsx$1(SingleView,{tokens:He}):jsx$1(MasonryView,{tokens:He})})})]})}function TagFeed({tag:re,...ee}){return jsx$1(TokenCollection,{feeds_menu:!0,label:re,variables:{tag:re},swrParams:[re],maxItems:600,query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query getObjktsByTag($tag: String!, $limit: Int!) {
          tokens(
            where: {
              tags: { tag: { _eq: $tag } },
              editions: { _neq: 0 },
              fa2_address: { _eq: "${HEN_CONTRACT_FA2}" },
              metadata_status: { _eq: "processed" }
            }
            order_by: { minted_at: desc }
            limit: $limit
          ) {
            ...baseTokenFields
          }
        }
      `,...ee})}const Tags$1=()=>{const{tag:re}=useParams();return jsx$1(Page,{feed:!0,title:`Tag ${re}`,children:jsx$1(TagFeed,{tag:re,namespace:`tag_${re}`})})},buttons$2="_buttons_f3kt5_216",about="_about_f3kt5_221",styles$w={buttons:buttons$2,about},ReactComponent=function(re){return Object.keys(re).forEach(function(ne){re[ne]}),React.createElement("div",null,React.createElement("h1",null,"Teia is"),React.createElement("p",null,"... a collaborative artwork made of artworks, a place for ideas and creative works."),React.createElement("p",null,"... a non-profit, open-source online platform for trading digital assets as OBJKT NFTs."),React.createElement("p",null,"... a collective, aligning under the values of sustainability, accessibility, and equity."),React.createElement("p",null,"... owned and maintained by its community, built and improved by its participants."),React.createElement("p",null,"... an infinite work in progress."),React.createElement("hr",null),React.createElement("p",null,React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#core-values"},"Core Values")," /",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#code-of-conduct"},"Code of Conduct")," /",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#terms-and-conditions"},"Terms and Conditions"),"/",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#content-moderation"},"Account Restrictions/Content Moderation")),React.createElement("hr",null),React.createElement("h2",null,"Links"),React.createElement("ul",null,React.createElement("li",null,"Documentation: ",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki"},"wiki.teia.art")),React.createElement("li",null,"Blog: ",React.createElement("a",{href:"https://blog.teia.art"},"blog.teia.art")),React.createElement("li",null,"Announcements and Updates: ",React.createElement("a",{href:"https://twitter.com/TeiaCommunity"},"Twitter")),React.createElement("li",null,"Join the community: ",React.createElement("a",{href:"https://discord.com/invite/7pZrPCcgnG"},"discord")),React.createElement("li",null,"Report Harassment or Scams via the ",React.createElement("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSeuBmNJjTiROSbHXXiQ5e-ia6fFywHKZ7Dj4-7sZtyltGY3yA/viewform"},"Report Form")),React.createElement("li",null,"Report Bugs via a ",React.createElement("a",{href:"https://github.com/teia-community/teia-ui/issues"},"Github issue")),React.createElement("li",null,"DAO Agora/Forum: ",React.createElement("a",{href:"https://discourse.teia.art/"},"discourse.teia.art")),React.createElement("li",null,"Code: ",React.createElement("a",{href:"https://github.com/teia-community"},"Teia Github")),React.createElement("li",null,"Community Curation: ",React.createElement("a",{href:"https://twitter.com/TeiaCommunity"},"@TeiaArt"))),React.createElement("hr",null),React.createElement("h2",null,"Imprint"),React.createElement("p",null,React.createElement("strong",null,"Teia DAO LLC")),React.createElement("p",null,"Mail: info@teia.art"),React.createElement("p",null,"Principals office address: PO Box 852, Long Island Rd Majuro, Marshall Islands MH 96960"),React.createElement("p",null,"Registration Number: 10020-23 (Registrated via ",React.createElement("a",{href:"https://www.midao.org/"},"MIDAO Directory Services"),")"),React.createElement("hr",null),React.createElement("h2",null,"Tech Specs"),React.createElement("p",null,"The Teia Marketplace Interface and marketplace contract are ",React.createElement("a",{href:"https://github.com/teia-community/teia-ui"},"code forks")," based on the open source Tezos NFT marketplace ",React.createElement("a",{href:"https://github.com/hicetnunc2000"},"hic et nunc")," that have been and will be further developed and maintained by the Teia community."),React.createElement("p",null,"The ",React.createElement("a",{href:"https://github.com/teia-community/teia-docs/wiki/Marketplace-Fees"},"marketplace fees")," are set to 2.5%."),React.createElement("h3",null,"Smart Contracts:"),React.createElement("ul",null,React.createElement("li",null,React.createElement("strong",null,"FA2 Token Contract:")," ",React.createElement("a",{href:"https://tzstats.com/KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton"},"KT1RJ6PbjHpwc3M5rw5s2Nbmefwbuwbdxton")," by ",React.createElement("a",{href:"https://github.com/hicetnunc2000/objkt-swap"},"hicetnunclab2000")),React.createElement("li",null,React.createElement("strong",null,"Minting Contract:")," ",React.createElement("a",{href:"https://tzkt.io/KT1Hkg5qeNhfwpKW4fXvq7HGZB9z2EnmCCA9/operations/"},"KT1Hkg5qeNhfwpKW4fXvq7HGZB9z2EnmCCA9")," by ",React.createElement("a",{href:"https://github.com/hicetnunc2000/objkt-swap"},"hicetnunclab2000")),React.createElement("li",null,React.createElement("strong",null,"Marketplace Contract:")," ",React.createElement("a",{href:"https://tzkt.io/KT1PHubm9HtyQEJ4BBpMTVomq6mhbfNZ9z5w/operations/"},"KT1PHubm9HtyQEJ4BBpMTVomq6mhbfNZ9z5w")," by ",React.createElement("a",{href:"https://github.com/teia-community/teia-smart-contracts/blob/main/python/contracts/teiaMarketplace_v1.py"},"Teia community")," - audited by ",React.createElement("a",{href:"https://github.com/InferenceAG/ReportPublications/blob/master/Inference%20AG%20-%20Teia%20community%20-%20marketplace%20%26%20multisig%20-%20v1.0.pdf"},"Inference AG")),React.createElement("li",null,React.createElement("strong",null,"Marketplace Contract Admin:")," ",React.createElement("a",{href:"https://tzkt.io/KT1PKBTVmdxfgkFvSeNUQacYiEFsPBw16B4P/operations/"},"KT1PKBTVmdxfgkFvSeNUQacYiEFsPBw16B4P")," - ",React.createElement("a",{href:"https://multisign.onrender.com/"},"multisig contract")," developed by the Teia Community")),React.createElement("hr",null),React.createElement("p",null,"All code and contracts above have been ",React.createElement("a",{href:"https://github.com/teia-community/teia-ui/blob/main/LICENSE"},"released under the MIT license.")),React.createElement("hr",null))};function About(){return jsx$1(Page,{title:"about",children:jsx$1("div",{className:styles$w.about,children:jsx$1(ReactComponent,{})})})}function useClipboard(re,ee){var ne=reactExports.useState(!1),ie=ne[0],oe=ne[1],ae=ee&&ee.successDuration;return reactExports.useEffect(function(){if(ie&&ae){var ce=setTimeout(function(){oe(!1)},ae);return function(){clearTimeout(ce)}}},[ie,ae]),[ie,function(){var ce=r$1(re);oe(ce)}]}const identicon$2="_identicon_1g3ye_216",smol="_smol_1g3ye_229",styles$v={identicon:identicon$2,smol},alphabet58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",base58=base(alphabet58),s=64;function bound(re,ee){return Math.abs((ee-re)%ee)}function corner({x:re,y:ee}){const oe=s-13,ae=s*2-26;return re+ee<13||re+ee>ae||re>oe&&ee<13||ee>oe&&re<13}function newPath(re){return re.substr(-2)!=="M "}function dummyAddress(){const re=[{tag:0,curve:0,prefix:"tz1"},{tag:0,curve:1,prefix:"tz2"},{tag:0,curve:2,prefix:"tz3"},{tag:1,prefix:"KT1"}],ee=re[Math.floor(Math.random()*re.length)],ne=window.crypto.getRandomValues(new Uint8Array(20)),ie=new Uint8Array(22);ie[0]=ee.tag,ee.tag===0&&ee.curve&&(ie[1]=ee.curve),ie.set(ne,ee.tag===0?2:1),ee.tag===1&&(ie[21]=0);const oe=base58.encode(ie);return ee.prefix+oe}function avatar(re){re=re||dummyAddress();const ee=base58.decode(re.trim().substr(3)),ne=buffer$2.Buffer.from(ee).toString("hex"),ie=ne.split("").reduce((ue,he)=>ue+parseInt(he,16),0),oe=ne.split("").slice(-5).reduce((ue,he)=>ue+parseInt(he,16),0),ae=[];for(let ue=0;ue<ne.length-2;ue++){const he=parseInt(`${ne[ue]}${ne[ue+1]}${ne[ue+2]}`,16)+ie,fe=bound(Math.round((he||s/2)/s),s),me=bound(Math.round(he/(fe||s/2)),s);ae.push({x:fe,y:me,n:he})}let ce="M ",le=!1;for(let ue=0;ue<ae.length;ue++){const he=ae[ue];if(newPath(ce))if(corner(he)&&he.n%2===0&&(he.x+he.y)%7<2){const fe=he.x%5+he.y%7;ce+=`
          M ${bound(he.x+s/10,s)-fe}, ${bound(he.y+s/10,s)}
          a ${fe},${fe} 0 1,0 ${fe*2},0
          a ${fe},${fe} 0 1,0 -${fe*2},0
        `,le=!0}else if(he.n%7===3){const fe=he.x%5+he.y%7;ce+=`
          M ${bound(he.x+s/10,s)-fe}, ${bound(he.y+s/10,s)}
          a ${fe},${fe} 0 1,0 ${fe*2},0
          a ${fe},${fe} 0 1,0 -${fe*2},0
        `,le=!0}else he.n%2===0&&he.x%5<3?(ce+=` M ${he.x},${he.y}`,ce+=` L ${he.x},${he.y}`,le=!1):he.n%2===1?(ce+=` M ${he.x},${he.y}`,ce+=` L ${he.y},${he.x}`,le=!1):(ce+=` M ${he.x},${he.y}`,ce+=` L ${he.x},${he.y}`,le=!1,ue<ae.length-2&&(ce+=` ${ae[ue+1].x},${ae[ue+1].y}`,ce+=` ${ae[ue+2].x},${ae[ue+2].y}`));else le?(ce+=` M ${he.x},${he.y}`,ce+=` L ${he.x},${he.y}`,le=!1):(ce+=` ${he.x},${he.y}`,le=!1)}return[ce,oe]}const identicons=[(re,ee,ne)=>jsx$1("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:jsx$1("path",{id:"path",d:`${re}`})}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsx$1("filter",{id:`filter${ee}`,x:"0%",y:"0%",width:"100%",height:"100%",filterUnits:"objectBoundingBox",primitiveUnits:"userSpaceOnUse",children:jsx$1("feMorphology",{operator:"erode",radius:"3 1",x:"0%",y:"0%",width:"100%",height:"100%",in:"SourceGraphic",result:"morphology"})}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxs("filter",{id:`filter${ee}`,children:[jsx$1("feTurbulence",{type:"turbulence",baseFrequency:"0.005",numOctaves:"4",result:"turbulence"}),jsx$1("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"30",xChannelSelector:"R",yChannelSelector:"G"}),jsx$1("feMorphology",{operator:"dilate",radius:"0.5"}),jsx$1("feMorphology",{operator:"erode",radius:"0.5"})]}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxs("filter",{id:`filter${ee}`,children:[jsx$1("feTurbulence",{type:"turbulence",baseFrequency:"0.005",numOctaves:"4",result:"turbulence"}),jsx$1("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"50",xChannelSelector:"R",yChannelSelector:"G"}),jsx$1("feMorphology",{operator:"erode",radius:"0.5"})]}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxs("filter",{id:`filter${ee}`,children:[jsx$1("feTurbulence",{type:"turbulence",baseFrequency:"0.5 0",numOctaves:"1",result:"turbulence"}),jsx$1("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"10",xChannelSelector:"R",yChannelSelector:"G"})]}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxs("filter",{id:`filter${ee}`,children:[jsx$1("feTurbulence",{type:"turbulence",baseFrequency:"0.05 0.5",numOctaves:"1",result:"turbulence"}),jsx$1("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"10",xChannelSelector:"R",yChannelSelector:"G"})]}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsx$1("filter",{id:`filter${ee}`,children:jsx$1("feMorphology",{operator:"erode",radius:"1"})}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsx$1("filter",{id:`filter${ee}`,children:jsx$1("feMorphology",{operator:"dilate",radius:"1.2"})}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxs("filter",{id:`filter${ee}`,x:"0",y:"0",width:"100%",height:"100%",children:[jsx$1("feTile",{in:"SourceGraphic",x:"16",y:"16",width:"98",height:"98"}),jsx$1("feTile",{})]}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]}),(re,ee,ne)=>jsxs("svg",{className:ne,viewBox:`0 0 ${s} ${s}`,xmlns:"http://www.w3.org/2000/svg",children:[jsxs("filter",{id:`filter${ee}`,children:[jsx$1("feTurbulence",{type:"turbulence",baseFrequency:"0.05",numOctaves:"2",result:"turbulence"}),jsx$1("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:"20",xChannelSelector:"R",yChannelSelector:"G"})]}),jsx$1("path",{id:"path",d:`${re}`,style:{filter:`url(#filter${ee})`}})]})],Identicon=({address:re="",logo:ee,className:ne})=>{const ie=reactExports.useMemo(()=>{if(ee)return ee.startsWith("ipfs://")?HashToURL(ee,"CDN",{size:"raw"}):ee},[ee]),[oe,ae]=reactExports.useState(!1),[ce,le]=reactExports.useState(!1),ue=classNames$1(styles$v.identicon,ne,ce?styles$v.smol:""),he=({target:ve})=>{const ye=ve.naturalWidth,be=ve.naturalHeight;ye+be<256&&le(!0)};if(ie)return oe?jsx$1("video",{className:ue,"aria-label":"identicon",src:ie}):jsx$1(buildExports.LazyLoadImage,{className:ue,src:ie,alt:"identicon",onLoad:he,onError:ve=>{console.error(ve),ae(!0)}});const[fe,me]=avatar(re);return identicons[me%identicons.length](fe,re,ue)},Identicon$1=reactExports.memo(Identicon);function reorderBigmapData(re,ee,ne=!1){const ie=re?{}:void 0;return re==null||re.forEach(oe=>ie[ee?oe.key[ee]:oe.key]=ne?bytes2Char(oe.value):oe.value),ie}function useBalance(re){const{data:ee,mutate:ne}=useSWR(re?`/v1/accounts/${re}/balance`:null,getTzktData);return[ee?ee/1e6:0,ne]}function useDaoTokenBalance(re){const ee={"token.contract":DAO_TOKEN_CONTRACT,"token.tokenId":"0",account:re,select:"balance"},{data:ne,mutate:ie}=useSWR(re?["/v1/tokens/balances",ee]:null,getTzktData);return[ne!=null&&ne[0]?parseInt(ne[0])/DAO_TOKEN_DECIMALS:0,ie]}function useStorage(re){const{data:ee,mutate:ne}=useSWR(re?`/v1/contracts/${re}/storage`:null,getTzktData);return[ee,ne]}function useDaoGovernanceParameters(re){const ee={limit:1e4,active:!0,select:"key,value"},{data:ne,mutate:ie}=useSWR(re!=null&&re.governance_parameters?[`/v1/bigmaps/${re.governance_parameters}/keys`,ee]:null,getTzktData);return[reorderBigmapData(ne),ie]}function useDaoProposals(re){const ee={limit:1e4,active:!0,select:"key,value"},{data:ne,mutate:ie}=useSWR(re!=null&&re.proposals?[`/v1/bigmaps/${re.proposals}/keys`,ee]:null,getTzktData);return[reorderBigmapData(ne),ie]}function useDaoRepresentatives(re){const{data:ee,mutate:ne}=useSWR(re!=null&&re.representatives?`/v1/contracts/${re.representatives}/storage`:null,getTzktData);return[ee!=null&&ee.representatives?Object.fromEntries(Object.entries(ee.representatives).sort(([,oe],[,ae])=>oe<ae?-1:oe>ae?1:0)):void 0,ne]}function useDaoUserVotes(re,ee){const ne={"key.address":re,limit:1e4,active:!0,select:"key,value"},{data:ie,mutate:oe}=useSWR(re&&(ee!=null&&ee.token_votes)?[`/v1/bigmaps/${ee.token_votes}/keys`,ne]:null,getTzktData);return[reorderBigmapData(ie,"nat"),oe]}function useDaoCommunityVotes(re,ee){const ne={"key.string":re,limit:1e4,active:!0,select:"key,value"},{data:ie,mutate:oe}=useSWR(re&&(ee!=null&&ee.representatives_votes)?[`/v1/bigmaps/${ee.representatives_votes}/keys`,ne]:null,getTzktData);return[reorderBigmapData(ie,"nat"),oe]}function useAliases(re){(re==null?void 0:re.length)===1&&re.push(re[0]);const ee={"key.in":re==null?void 0:re.join(","),limit:1e4,active:!0,select:"key,value"},{data:ne,mutate:ie}=useSWR((re==null?void 0:re.length)>0?["/v1/bigmaps/3919/keys",ee]:null,getTzktData);return[reorderBigmapData(ne,void 0,!0),ie]}function useDaoUsersAliases(re,ee,ne){const ie=new Set;return re&&ie.add(re),ee&&Object.keys(ee).forEach(oe=>ie.add(oe)),ne&&Object.values(ne).forEach(oe=>{ie.add(oe.issuer),oe.kind.transfer_mutez?oe.kind.transfer_mutez.forEach(ae=>ie.add(ae.destination)):oe.kind.transfer_token&&oe.kind.transfer_token.distribution.forEach(ae=>ie.add(ae.destination))}),useAliases(Array.from(ie))}function useDaoMemberCount(re){const ee={"token.contract":DAO_TOKEN_CONTRACT,"token.tokenId":"0","balance.gt":re*DAO_TOKEN_DECIMALS},{data:ne,mutate:ie}=useSWR(["/v1/tokens/balances/count",ee],getTzktData);return[ne?parseInt(ne):0,ie]}function usePolls(re){const ee={limit:1e4,active:!0,select:"key,value"},{data:ne,mutate:ie}=useSWR(re!=null&&re.polls?[`/v1/bigmaps/${re.polls}/keys`,ee]:null,getTzktData);return[reorderBigmapData(ne),ie]}function useUserPollVotes(re,ee){const ne={"key.address":re,limit:1e4,active:!0,select:"key,value"},{data:ie,mutate:oe}=useSWR(re&&(ee!=null&&ee.votes)?[`/v1/bigmaps/${ee.votes}/keys`,ne]:null,getTzktData);return[reorderBigmapData(ie,"nat"),oe]}function usePollsUsersAliases(re,ee){const ne=new Set;return re&&ne.add(re),ee&&Object.values(ee).forEach(ie=>{ne.add(ie.issuer)}),useAliases(Array.from(ne))}function useObjkt(re){const{data:ee,mutate:ne}=useSWR(re?["/poll/objkt/",re]:null,async(ie,oe)=>fetchObjktDetails(oe),{revalidateIfStale:!1,revalidateOnFocus:!1});return[ee,ne]}const identicon$1="_identicon_1j1cd_216",square="_square_1j1cd_221",profile="_profile_1j1cd_233",info$2="_info_1j1cd_240",user$1="_user_1j1cd_243",user_pfp="_user_pfp_1j1cd_259",socials="_socials_1j1cd_267",menu$1="_menu_1j1cd_278",profile_page$1="_profile_page_1j1cd_287",container$g="_container_1j1cd_291",number="_number_1j1cd_296",filter="_filter_1j1cd_306",card="_card_1j1cd_319",cardContainer="_cardContainer_1j1cd_333",cardText="_cardText_1j1cd_337",cardTitle="_cardTitle_1j1cd_347",cardCollect="_cardCollect_1j1cd_353",cardCollectPrice="_cardCollectPrice_1j1cd_372",tag$2="_tag_1j1cd_376",top="_top_1j1cd_393",restricted$2="_restricted_1j1cd_448",blur="_blur_1j1cd_461",tools="_tools_1j1cd_465",styles$u={identicon:identicon$1,square,profile,info:info$2,user:user$1,user_pfp,socials,menu:menu$1,profile_page:profile_page$1,container:container$g,number,filter,card,cardContainer,cardText,cardTitle,cardCollect,cardCollectPrice,tag:tag$2,top,restricted:restricted$2,blur,tools};async function reverseRecord(re){var ne,ie,oe,ae;const ee=await axios.post("https://api.tezos.domains/graphql",{query:"query reverseRecord($address: String!) { reverseRecord(address: $address) { domain { name }}}",variables:{address:re}},{headers:{"Content-Type":"application/json"}});return((ae=(oe=(ie=(ne=ee==null?void 0:ee.data)==null?void 0:ne.data)==null?void 0:ie.reverseRecord)==null?void 0:oe.domain)==null?void 0:ae.name)||""}function Profile({user:re}){const[ee,ne]=useClipboard(re.discord),[ie,oe]=useClipboard(re.address,{successDuration:2500}),[ae]=useDaoTokenBalance(re.address),ce=useDisplayStore(fe=>fe.coreParticipants),[le,ue]=reactExports.useState(""),he=reactExports.useCallback(()=>{reverseRecord(re.address).then(fe=>{ue(fe)})},[re.address]);return reactExports.useEffect(()=>{he()},[he]),jsx$1("div",{className:styles$u.container,children:jsxs("div",{className:styles$u.profile,children:[jsx$1("div",{className:styles$u.user_pfp,children:jsx$1(Identicon$1,{className:styles$u.identicon,address:re.address,logo:re.identicon})}),jsxs("div",{className:styles$u.info,children:[jsx$1("p",{className:styles$u.user,children:re.subjkt||re.alias}),re.description&&jsx$1("p",{children:re.description}),ce&&ce.length>0&&jsx$1(ParticipantList$1,{title:!1,participants:ce}),jsxs("div",{style:{display:"flex",gap:"1em",alignItems:"center"},children:[jsx$1(Button,{href:`https://tzkt.io/${re.address}`,children:le||walletPreview(re.address)}),jsx$1(Button,{className:styles$u.square,onClick:oe}),ie&&"Copied!"]}),ae>=0&&jsxs("p",{children:[Math.round(ae*10)/10," ",jsx$1("a",{href:"dao",children:"TEIA"})]}),jsxs("div",{className:styles$u.socials,children:[re.twitter&&jsx$1(Button,{alt:`User profile on Twitter (@${re.twitter})`,href:`https://twitter.com/${re.twitter}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"})})}),re.discord&&jsx$1(Button,{alt:`User profile on Discord, click to copy (${re.discord})`,onClick:ne,children:jsx$1("span",{className:styles$u.top,"data-position":"top","data-tooltip":ee?"Copied":re.discord,style:{marginRight:"10px"},children:jsx$1("svg",{width:"20",height:"15",viewBox:"0 0 20 15",xmlns:"http://www.w3.org/2000/svg",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M16.9308 1.24342C15.6561 0.667894 14.2892 0.243873 12.8599 0.00101874C12.8339 -0.00366827 12.8079 0.00804483 12.7945 0.0314716C12.6187 0.339138 12.4239 0.740513 12.2876 1.05599C10.7503 0.829542 9.22099 0.829542 7.71527 1.05599C7.57887 0.733501 7.37707 0.339138 7.20048 0.0314716C7.18707 0.00882646 7.16107 -0.00288664 7.13504 0.00101874C5.70659 0.243097 4.33963 0.667118 3.06411 1.24342C3.05307 1.2481 3.04361 1.25592 3.03732 1.26606C0.444493 5.07759 -0.265792 8.79544 0.0826501 12.4672C0.0842267 12.4852 0.0944749 12.5023 0.108665 12.5133C1.81934 13.7494 3.47642 14.4998 5.10273 14.9973C5.12876 15.0051 5.15634 14.9957 5.1729 14.9746C5.55761 14.4577 5.90054 13.9126 6.19456 13.3394C6.21192 13.3059 6.19535 13.266 6.15989 13.2528C5.61594 13.0497 5.098 12.8022 4.59977 12.5211C4.56037 12.4984 4.55721 12.443 4.59347 12.4164C4.69831 12.3391 4.80318 12.2587 4.9033 12.1775C4.92141 12.1626 4.94665 12.1595 4.96794 12.1689C8.24107 13.6393 11.7846 13.6393 15.0191 12.1689C15.0404 12.1587 15.0657 12.1619 15.0846 12.1767C15.1847 12.2579 15.2895 12.3391 15.3952 12.4164C15.4314 12.443 15.4291 12.4984 15.3897 12.5211C14.8914 12.8076 14.3735 13.0497 13.8288 13.252C13.7933 13.2653 13.7775 13.3059 13.7949 13.3394C14.0952 13.9118 14.4381 14.4569 14.8157 14.9738C14.8315 14.9957 14.8599 15.0051 14.8859 14.9973C16.5201 14.4998 18.1772 13.7494 19.8879 12.5133C19.9028 12.5023 19.9123 12.4859 19.9139 12.468C20.3309 8.22302 19.2154 4.53566 16.9568 1.26684C16.9513 1.25592 16.9419 1.2481 16.9308 1.24342ZM6.68335 10.2315C5.69792 10.2315 4.88594 9.34128 4.88594 8.24802C4.88594 7.15476 5.68217 6.26456 6.68335 6.26456C7.69239 6.26456 8.49651 7.16258 8.48073 8.24802C8.48073 9.34128 7.68451 10.2315 6.68335 10.2315ZM13.329 10.2315C12.3435 10.2315 11.5316 9.34128 11.5316 8.24802C11.5316 7.15476 12.3278 6.26456 13.329 6.26456C14.338 6.26456 15.1421 7.16258 15.1264 8.24802C15.1264 9.34128 14.338 10.2315 13.329 10.2315Z"})})})}),re.github&&jsx$1(Button,{alt:`User profile on Github (@${re.github})`,href:`https://github.com/${re.github}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"})})}),re.gitlab&&jsx$1(Button,{alt:`User profile on gitlab (@${re.gitlab})`,href:`https://gitlab.com/${re.gitlab}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"m21.94 13.11-1.05-3.22c0-.03-.01-.06-.02-.09l-2.11-6.48a.859.859 0 0 0-.8-.57c-.36 0-.68.25-.79.58l-2 6.17H8.84L6.83 3.33a.851.851 0 0 0-.79-.58c-.37 0-.69.25-.8.58L3.13 9.82v.01l-1.07 3.28c-.16.5.01 1.04.44 1.34l9.22 6.71c.17.12.39.12.56-.01l9.22-6.7c.43-.3.6-.84.44-1.34M8.15 10.45l2.57 7.91-6.17-7.91m8.73 7.92 2.47-7.59.1-.33h3.61l-5.59 7.16m4.1-13.67 1.81 5.56h-3.62m-1.3.95-1.79 5.51L12 19.24l-2.86-8.79M6.03 3.94 7.84 9.5H4.23m-1.18 4.19c-.09-.07-.13-.19-.09-.29l.79-2.43 5.82 7.45m11.38-4.73-6.51 4.73.02-.03 5.79-7.42.79 2.43c.04.1 0 .22-.09.29"})})}),re.site&&jsx$1(Button,{alt:`User web site ${re.site}`,href:`${re.site}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 24 24",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2 0-.68.06-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.65 15.65 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z"})})}),re.email&&jsx$1(Button,{alt:`User email address ${re.email}`,href:`mailto: ${re.email}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 -2.5 20 20",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"m18 2.291-8 7.027-8-7.037V2h16v.291ZM2 13V4.945l8 7.035 8-7.027V13H2Zm-2 2h20V0H0v15Z"})})}),re.reddit&&jsx$1(Button,{alt:`User reddit account (${re.reddit})`,href:`https://www.reddit.com/${re.reddit}`,children:jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 279.748 279.748",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:[jsx$1("path",{d:"M279.748 133.142c0-19.299-15.701-35-35-35-10.768 0-20.674 4.812-27.279 13.064-18.532-8.431-39.663-13.626-62.015-15.271l19.206-60.692 42.895 9.294c3.285 12.782 14.901 22.258 28.693 22.258 16.336 0 29.627-13.29 29.627-29.626 0-16.336-13.291-29.627-29.627-29.627-11.801 0-21.999 6.941-26.759 16.95l-49.497-10.725a10.002 10.002 0 0 0-11.651 6.756L134.636 95.43c-26.164.638-50.988 6.053-72.356 15.775-6.606-8.251-16.512-13.063-27.28-13.063-19.299 0-35 15.701-35 35 0 9.373 3.683 18.173 10.222 24.709-3.9 8.37-5.875 17.076-5.875 25.936 0 24.048 14.396 46.492 40.538 63.199 25.447 16.264 59.183 25.221 94.989 25.221 35.808 0 69.542-8.957 94.989-25.221 26.142-16.707 40.538-39.151 40.538-63.199 0-8.859-1.975-17.565-5.875-25.936 6.539-6.537 10.222-15.336 10.222-24.709zM15.369 145.139c-2.212-3.59-3.369-7.688-3.369-11.997 0-12.682 10.317-23 23-23 5.444 0 10.558 1.851 14.649 5.258-14.622 8.302-26.132 18.289-34.28 29.739zm52.671 20.266c0-13.785 11.215-25 25-25s25 11.215 25 25-11.215 25-25 25-25-11.215-25-25zm123.119 57.054c-9.745 10.637-29.396 17.244-51.285 17.244-21.888 0-41.539-6.607-51.284-17.244a9.937 9.937 0 0 1-2.617-7.192 9.933 9.933 0 0 1 3.235-6.937 9.974 9.974 0 0 1 6.754-2.627c2.797 0 5.484 1.183 7.373 3.244 5.803 6.333 20.827 10.756 36.539 10.756s30.737-4.423 36.539-10.756a10.022 10.022 0 0 1 7.374-3.244c2.508 0 4.906.933 6.755 2.627a9.928 9.928 0 0 1 3.234 6.937 9.933 9.933 0 0 1-2.617 7.192zm-4.451-32.054c-13.785 0-25-11.215-25-25s11.215-25 25-25 25 11.215 25 25-11.215 25-25 25zm77.671-45.266c-8.147-11.45-19.657-21.436-34.28-29.739 4.092-3.408 9.205-5.258 14.649-5.258 12.683 0 23 10.318 23 23 0 4.309-1.157 8.407-3.369 11.997z"})," "]})}),re.mailchain&&jsx$1(Button,{alt:`User mailchain address (${re.mailchain})`,href:`https://app.mailchain.com/mailto:${re.mailchain}@tezos.mailchain.com`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M7.879 6.894a.985.985 0 0 0-.984.985v8.242c0 .543.44.984.984.984h8.242a.985.985 0 0 0 .984-.984V7.88a.985.985 0 0 0-.984-.985zM16.12 18.65H7.88a2.529 2.529 0 0 1-2.527-2.528V7.88a2.529 2.529 0 0 1 2.527-2.527h8.242a2.529 2.529 0 0 1 2.527 2.527v8.242a2.529 2.529 0 0 1-2.527 2.528zm.125-15.106a.878.878 0 0 0-.621.258l-1.7 1.7a.878.878 0 0 0 0 1.246l3.329 3.328a.878.878 0 0 0 1.246 0l1.7-1.7a.878.878 0 0 0 0-1.246L16.87 3.801a.887.887 0 0 0-.625-.258Zm1.633 8.332a2.424 2.424 0 0 1-1.715-.707l-3.332-3.332a2.407 2.407 0 0 1-.707-1.714c0-.649.25-1.258.707-1.715l1.7-1.7a2.407 2.407 0 0 1 1.714-.706c.649 0 1.258.25 1.715.707l3.332 3.332c.457.457.707 1.066.707 1.714 0 .649-.25 1.258-.707 1.715l-1.7 1.7a2.424 2.424 0 0 1-1.714.706zM7.754 3.543a.887.887 0 0 0-.625.258L3.8 7.13a.878.878 0 0 0 0 1.246l1.699 1.7a.878.878 0 0 0 1.246 0l3.328-3.328a.882.882 0 0 0 0-1.246L8.375 3.8a.878.878 0 0 0-.621-.258ZM6.12 11.876c-.648 0-1.258-.25-1.715-.707L2.707 9.47A2.407 2.407 0 0 1 2 7.754c0-.648.25-1.257.707-1.714L6.04 2.708A2.407 2.407 0 0 1 7.754 2c.648 0 1.258.25 1.715.707l1.699 1.699a2.428 2.428 0 0 1 0 3.43l-3.332 3.332a2.407 2.407 0 0 1-1.715.707Zm0 1.794a.878.878 0 0 0-.621.257l-1.7 1.7a.878.878 0 0 0 0 1.246L7.13 20.2a.878.878 0 0 0 1.246 0l1.7-1.7a.878.878 0 0 0 0-1.246l-3.329-3.328a.887.887 0 0 0-.625-.258ZM7.754 22a2.424 2.424 0 0 1-1.715-.708l-3.332-3.332A2.407 2.407 0 0 1 2 16.247c0-.649.25-1.258.707-1.715l1.7-1.7a2.407 2.407 0 0 1 1.714-.706c.649 0 1.258.25 1.715.707l3.332 3.332a2.4 2.4 0 0 1 .707 1.714c0 .649-.25 1.258-.707 1.715l-1.7 1.7A2.424 2.424 0 0 1 7.755 22Zm10.125-8.332a.88.88 0 0 0-.625.257l-3.328 3.328a.882.882 0 0 0 0 1.247l1.699 1.699a.878.878 0 0 0 1.246 0l3.328-3.328a.878.878 0 0 0 0-1.246l-1.699-1.7a.878.878 0 0 0-.621-.257ZM16.246 22a2.424 2.424 0 0 1-1.715-.708l-1.699-1.699a2.428 2.428 0 0 1 0-3.43l3.332-3.331a2.4 2.4 0 0 1 1.715-.707c.648 0 1.258.25 1.715.707l1.695 1.699c.457.457.71 1.066.71 1.715 0 .648-.253 1.257-.706 1.714l-3.332 3.332a2.424 2.424 0 0 1-1.715.707z"})})}),re.telegram&&jsx$1(Button,{alt:`User telegram account (${re.telegram})`,href:`https://t.me/${re.telegram}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"m9.78 18.65.28-4.23 7.68-6.92c.34-.31-.07-.46-.52-.19L7.74 13.3 3.64 12c-.88-.25-.89-.86.2-1.3l15.97-6.16c.73-.33 1.43.18 1.15 1.3l-2.72 12.81c-.19.91-.74 1.13-1.5.71L12.6 16.3l-1.99 1.93c-.23.23-.42.42-.83.42Z"})})}),re.facebook&&jsx$1(Button,{alt:`User facebook account (${re.facebook})`,href:`https://www.facebook.com/${re.facebook}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M12 2.04c-5.5 0-10 4.49-10 10.02 0 5 3.66 9.15 8.44 9.9v-7H7.9v-2.9h2.54V9.85c0-2.51 1.49-3.89 3.78-3.89 1.09 0 2.23.19 2.23.19v2.47h-1.26c-1.24 0-1.63.77-1.63 1.56v1.88h2.78l-.45 2.9h-2.33v7a10 10 0 0 0 8.44-9.9c0-5.53-4.5-10.02-10-10.02Z"})})}),re.instagram&&jsx$1(Button,{alt:`User instagram account (${re.instagram})`,href:`https://www.instagram.com/${re.instagram}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4a5.8 5.8 0 0 1-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8A5.8 5.8 0 0 1 7.8 2m-.2 2A3.6 3.6 0 0 0 4 7.6v8.8C4 18.39 5.61 20 7.6 20h8.8a3.6 3.6 0 0 0 3.6-3.6V7.6C20 5.61 18.39 4 16.4 4H7.6m9.65 1.5a1.25 1.25 0 0 1 1.25 1.25A1.25 1.25 0 0 1 17.25 8 1.25 1.25 0 0 1 16 6.75a1.25 1.25 0 0 1 1.25-1.25M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3Z"})})}),re.dns&&jsx$1(Button,{alt:`User DNS Profile (${re.dns})`,href:`http://${re.dns}`,children:jsx$1("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",style:{fill:"var(--text-color)",stroke:"transparent",marginRight:"10px"},children:jsx$1("path",{d:"M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm7.5-6.923c-.67.204-1.335.82-1.887 1.855A7.97 7.97 0 0 0 5.145 4H7.5V1.077zM4.09 4a9.267 9.267 0 0 1 .64-1.539 6.7 6.7 0 0 1 .597-.933A7.025 7.025 0 0 0 2.255 4H4.09zm-.582 3.5c.03-.877.138-1.718.312-2.5H1.674a6.958 6.958 0 0 0-.656 2.5h2.49zM4.847 5a12.5 12.5 0 0 0-.338 2.5H7.5V5H4.847zM8.5 5v2.5h2.99a12.495 12.495 0 0 0-.337-2.5H8.5zM4.51 8.5a12.5 12.5 0 0 0 .337 2.5H7.5V8.5H4.51zm3.99 0V11h2.653c.187-.765.306-1.608.338-2.5H8.5zM5.145 12c.138.386.295.744.468 1.068.552 1.035 1.218 1.65 1.887 1.855V12H5.145zm.182 2.472a6.696 6.696 0 0 1-.597-.933A9.268 9.268 0 0 1 4.09 12H2.255a7.024 7.024 0 0 0 3.072 2.472zM3.82 11a13.652 13.652 0 0 1-.312-2.5h-2.49c.062.89.291 1.733.656 2.5H3.82zm6.853 3.472A7.024 7.024 0 0 0 13.745 12H11.91a9.27 9.27 0 0 1-.64 1.539 6.688 6.688 0 0 1-.597.933zM8.5 12v2.923c.67-.204 1.335-.82 1.887-1.855.173-.324.33-.682.468-1.068H8.5zm3.68-1h2.146c.365-.767.594-1.61.656-2.5h-2.49a13.65 13.65 0 0 1-.312 2.5zm2.802-3.5a6.959 6.959 0 0 0-.656-2.5H12.18c.174.782.282 1.623.312 2.5h2.49zM11.27 2.461c.247.464.462.98.64 1.539h1.835a7.024 7.024 0 0 0-3.072-2.472c.218.284.418.598.597.933zM10.855 4a7.966 7.966 0 0 0-.468-1.068C9.835 1.897 9.17 1.282 8.5 1.077V4h2.355z"})})})]})]})]})})}const container$f="_container_314o8_216",tab$1="_tab_314o8_220",active="_active_314o8_223",selected$1="_selected_314o8_223",tabs$1="_tabs_314o8_229",line$3="_line_314o8_247",styles$t={container:container$f,tab:tab$1,active,selected:selected$1,tabs:tabs$1,line:line$3},Tabs=({tabs:re,className:ee,filter:ne})=>{const ie=reactExports.useMemo(()=>ne?re.map(ne).filter(oe=>oe!==null):re,[re,ne]);return jsxs("div",{className:`${styles$t.container} ${ee||""}`,children:[jsx$1("div",{className:styles$t.tabs,children:ie.map((oe,ae)=>oe?jsx$1(Button,{alt:`tab_${oe.title}`,preventScrollReset:!0,className:styles$t.tab,activeClass:styles$t.active,disabled:oe.disabled,to:oe==null?void 0:oe.to,children:oe.title},oe.title):null)}),jsx$1(Line,{className:styles$t.line})]})},check_container$1="_check_container_1047g_216",checkmark$1="_checkmark_1047g_233",container$e="_container_1047g_261",small$1="_small_1047g_309",styles$s={check_container:check_container$1,checkmark:checkmark$1,container:container$e,small:small$1},Checkbox=reactExports.forwardRef(({name:re,label:ee,alt:ne,initial:ie,onCheck:oe=()=>null,onBlur:ae=()=>null,onWheel:ce=()=>null,title:le="",disabled:ue,checked:he,autoFocus:fe=!1,className:me,small:ge},ve)=>{const[ye,be]=useControlled(he,ie),Ce=reactExports.useCallback($e=>{if(ue)return;const Te=$e.target.checked;be(Te),oe==null||oe(Te)},[ye,ue]),Se=classNames$1({[styles$s.check_container]:!0,[styles$s.small]:ge});return jsxs("label",{title:le,className:`${Se} ${me||""}`,children:[ee,jsx$1("input",{ref:ve,"aria-label":ne||re,defaultChecked:ie,type:"checkbox",name:re,onChange:Ce,onBlur:ae,onWheel:ce,checked:he,"aria-checked":ye,disabled:ue}),jsx$1("span",{className:styles$s.checkmark})]})}),Checkbox$1=reactExports.memo(Checkbox),box="_box_1czlq_1",buttons$1="_buttons_1czlq_17",styles$r={box,buttons:buttons$1},Warning=({onInteract:re})=>{const[ee,ne]=reactExports.useState(!1),{setNsfwFriendly:ie,setPhotosensitiveFriendly:oe}=useLocalSettings(ue=>[ue.setNsfwFriendly,ue.setPhotosensitiveFriendly]),ae=ue=>{re(ue)},ce=()=>{ee&&(console.log("disabling protections for good"),ie(!0),oe(!0)),ae(!0)},le=()=>{ae(!1)};return jsxs("div",{className:styles$r.box,children:[jsx$1("h1",{children:"Override Mode"}),jsxs("div",{children:[jsx$1("p",{children:"The override mode momentarily removes visual protections (NSFW and Flashing content)"}),jsx$1("p",{children:"By clicking enable, those filters will be removed only for this profile"}),jsx$1("p",{children:'You can tick the "Remember my choice" checkbox to make it effective across teia.'}),jsxs("p",{children:["If you ever need to change these, head to the local",jsx$1(Button,{inline:!0,strong:!0,to:"/settings",children:"settings"})]})]}),jsxs("div",{className:styles$r.buttons,children:[jsx$1(Button,{onClick:le,"data-id":"skip",shadow_box:!0,children:"Skip"}),jsx$1(Button,{onClick:ce,"data-id":"enable",shadow_box:!0,children:"Enable"})]}),jsx$1(Checkbox$1,{checked:ee,onCheck:ne,label:"Remember my choice"})]})};async function fetchUserInfo(re,ee="user_address"){let ne=await getUser(re,ee);if(!ne&&ee!=="user_address")throw new Error(`SUBJKT ${re} is not registered`,{cause:"User not found"});if(!ne&&validateAddress(re)===ValidationResult.VALID&&(ne={user_address:re}),!(ne!=null&&ne.user_address))throw new Error(`Invalid or missing Tz address: ${re}`,{cause:"Address not found"});const ie=await GetUserMetadata(ne.user_address);console.log(ie);const oe=ie?{...ie}:{};return oe.address=ne.user_address,get$5(ne,"metadata.data.description")&&(oe.description=get$5(ne,"metadata.data.description")),get$5(ne,"metadata.data.identicon")&&(oe.identicon=get$5(ne,"metadata.data.identicon")),ne.name&&(oe.subjkt=ne.name),oe}const useDisplayStore=create$2(subscribeWithSelector((re,ee)=>({coreParticipants:void 0})));function Display(){const{address:re,name:ee}=useParams(),{walletBlockMap:ne,underReviewMap:ie}=useSettings(),[oe,ae]=reactExports.useState(),[ce,le]=reactExports.useState(),[ue,he]=reactExports.useState();let[fe]=useSearchParams();const{nsfwFriendly:me,photosensitiveFriendly:ge}=useLocalSettings(Te=>[Te.nsfwFriendly,Te.photosensitiveFriendly]);reactExports.useLayoutEffect(()=>{fe.get("yolo")!==null&&(!me||!ge)&&ae(!0),le(fe.get("show")!==null)},[]);const[ve]=reactExports.useState(!1),{data:ye,error:be}=useSWR(["/user",re||ee],(Te,Ne)=>fetchUserInfo(Ne,re?"user_address":"name"),{revalidateIfStale:!1,revalidateOnFocus:!1}),Ce=reactExports.useMemo(()=>ye!=null&&ye.address?ne.get(ye.address)===1:!1,[ye==null?void 0:ye.address,ne]),Se=reactExports.useMemo(()=>ye!=null&&ye.address?ie.get(ye.address)===1:!1,[ye==null?void 0:ye.address,ie]);if(be)throw be;if(!ye)return jsx$1(Page,{title:"loading",children:jsx$1(Loading,{message:"Getting user profile"})});const $e=[{title:"Creations",to:""},{title:"Collection",to:"collection"},{title:"Collabs",to:"collabs"}];return jsx$1(Page,{feed:!0,title:ye.alias,children:oe?jsx$1(Warning,{onInteract:Te=>{he(Te),ae(!1)}}):jsxs(Fragment,{children:[jsx$1(Profile,{user:ye}),ye.address.substr(0,2)!=="KT"&&jsx$1("div",{className:styles$u.menu,children:jsx$1(Tabs,{tabs:$e})}),(Ce||Se)&&jsxs("div",{className:styles$u.restricted,children:[jsxs("h1",{children:[Se?"Under review":"Restricted"," account",ce?"(bypassed)":""]}),jsxs("p",{children:["Contact the Teia moderators on",jsx$1(Button,{small:!0,inline:!0,href:"https://discord.gg/TKeybhYhNe",children:"Discord"}),"to resolve the status."]}),jsxs("p",{children:["See the",jsx$1(Button,{inline:!0,small:!0,href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#3-terms-and-conditions---account-restrictions",children:"Teia Terms and Conditions"})]})]}),jsx$1(Outlet,{context:{showRestricted:ce,overrideProtections:ue,showFilters:ve,address:ye.address}})]})})}const CollabDisplay=()=>{const{id:re,name:ee}=useParams(),{data:ne,error:ie}=useSWR(!re||!ee?["/contract",re,ee]:null,async()=>{const ue=await fetchCollabCreations(ee||re,ee?"subjkt":"address");if(!ue.split_contracts.length)throw new Error("unknown split contract");return{tokens:ue.tokens,split_contract:ue.split_contracts[0]}},{revalidateIfStale:!1,revalidateOnFocus:!1});if(reactExports.useEffect(()=>{useDisplayStore.setState({coreParticipants:get$5(ne==null?void 0:ne.split_contract,"shareholders",[]).filter(({holder_type:ue})=>ue===CollaboratorType.CORE_PARTICIPANT)})},[ne==null?void 0:ne.split_contract]),ie)return jsx$1("pre",{children:JSON.stringify(ie,null,2)});if(!ne)return jsx$1(Loading,{message:"Collab contract"});const{split_contract:oe,tokens:ae}=ne,ce=oe==null?void 0:oe.contract_address;return re&&["KT1CSfR6kx3uwDEXpwuCPnqp3MhpzfPmnLKj","KT1XhXv6jBpkahnvrtdiSi8foWXneWEjcz6F"].indexOf(re)>-1?jsx$1(Navigate,{to:`${PATH.ISSUER}/${re}`,replace:!0}):jsx$1(Fragment,{children:jsx$1(TokenCollection,{namespace:"collab-tokens",emptyMessage:"This collab has no OBJKT creations to display",swrParams:[ce],query:{tokens:ae}})})},validAddress=re=>re.length?["tz","KT"].includes(re.substr(0,2))&&re.length===36:!1,extractAddress=re=>{let ee;return ee=/^.*(tz[\w\d]{34}).*$/i.exec(re.trim()),ee?ee[1]:(ee=/^.*(kt[\w\d]{34}).*$/i.exec(re.trim()),ee?ee[1]:!1)},groupShareTotal=re=>re.reduce((ee,ne)=>(ne.shares||0)+ee,0),TipSelector=({onSelect:re})=>jsx$1("div",{className:collabStyles.tipSelect,children:tipOptions.map(ee=>jsxs("button",{onClick:()=>re(ee),children:[ee,isNaN(ee)?"":"%"]},`btn-${ee}`))}),check_container="_check_container_1047g_216",checkmark="_checkmark_1047g_233",container$d="_container_1047g_261",small="_small_1047g_309",inputStyles={check_container,checkmark,container:container$d,small},BeneficiaryRow=({beneficiary:re,onUpdate:ee,onAdd:ne,onRemove:ie,onPasteMulti:oe,onSelectPercentage:ae,minimalView:ce})=>{const[le,ue]=reactExports.useState(),[he,fe]=reactExports.useState(re.address),[me,ge]=reactExports.useState(re.shares);reactExports.useEffect(()=>{const{address:$e,shares:Te}=re;!le&&$e&&GetUserMetadata($e).then(({data:Ne})=>ue(Ne)),le&&!$e&&ue(),fe($e),ge(Te)},[re,le]);const ve=($e,Te)=>{if(Te.replace(/\r/g,"").split(/\n/).length>1)oe(Te);else{const Ie={...re,[$e]:isNaN(Te)?Te:Number(Te)};ee(Ie)}},ye=classNames$1(inputStyles.container,collabStyles.input),be=$e=>{$e.keyCode===13&&ne&&ne(re)},Se=(le?le.alias:null)||`${he?"":"(tz... or KT...)"}`;return ce?jsxs("tr",{className:collabStyles.row,children:[jsx$1("td",{className:collabStyles.addressCell,children:he}),jsxs("td",{className:collabStyles.sharesCell,children:[re.share,"%"]})]}):jsxs("tr",{className:collabStyles.row,children:[jsx$1("td",{className:collabStyles.addressCell,children:jsx$1("div",{className:ye,children:jsxs("label",{children:[jsx$1("p",{children:"Address"}),jsx$1("textarea",{rows:1,value:he||"",className:collabStyles.textInput,placeholder:Se,onChange:$e=>ve("address",$e.target.value)})]})})}),jsx$1("td",{className:collabStyles.sharesCell,children:jsxs("div",{className:ye,children:[jsxs("label",{children:[jsx$1("p",{children:"Shares"}),jsx$1("input",{type:"number",placeholder:"(proportional)",value:me||"",onKeyDown:be,onChange:$e=>ve("shares",$e.target.value)})]}),!me&&ae&&jsx$1(TipSelector,{onSelect:ae})]})}),jsx$1("td",{className:collabStyles.actionCell,children:jsx$1(Button,{onClick:ie,children:jsx$1(Secondary$1,{children:jsx$1(SvgClose,{})})})})]})},ProjectList=({beneficiaries:re,onSelect:ee})=>{const[ne,ie]=reactExports.useState(!1),oe=re.map(he=>he.address),ae=re.filter(he=>he.address&&he.shares),ce=ossProjects.filter(he=>!oe.includes(he.address)),le=classNames$1(collabStyles.btn,{[collabStyles.muted]:ne||ce.length<ossProjects.length||ae.length>0,[collabStyles.absolute]:ne}),ue=(he,fe)=>{ee(he,fe),ie(!1)};return ce.length>0?jsxs("div",{className:ne?collabStyles.projectList:null,children:[jsx$1("button",{className:le,onClick:()=>ie(!ne),children:jsx$1(Secondary$1,{children:ne?"Close":"Choose from popular projects"})}),ne&&jsx$1("ul",{className:collabStyles.list,children:ce.map(he=>{const{name:fe,address:me}=he;return jsx$1("li",{children:jsx$1("button",{className:collabStyles.btn,onClick:()=>ue(me,fe),children:fe})},me)})})]}):null},AddCollaboratorsButton=({collaborators:re,onClick:ee,threshold:ne=2})=>{const ie=re.filter(oe=>!!oe.shares&&validAddress(oe.address));return jsx$1("div",{className:collabStyles.mt3,children:jsx$1(Button,{onClick:ee,disabled:ie.length<ne,className:collabStyles.btnSecondary,shadow_box:!0,children:ie.length===0?"Skip":"Next"})})},AddCollaboratorsButton$1=reactExports.memo(AddCollaboratorsButton),BeneficiariesUI=({beneficiaries:re,setBeneficiaries:ee,onSelectPercentage:ne,totalParticipants:ie,onComplete:oe})=>{const[ae,ce]=reactExports.useState(""),le=(Ce,Se)=>{typeof Ce=="object"&&(Ce="");const $e=re.filter(Ne=>Ne.address),Te={...collaboratorTemplate,address:Ce||"",name:Se};ee([...$e,Te])},ue=Ce=>{ne(Ce,0);const Se=[...re];Se.splice(Ce,1),ee(Se)},he=(Ce,Se)=>{const $e=[...re];$e[Ce]={...Se,share:Se.percentage},ee([...$e])};if(ae.length){const Ce=re.filter(Ie=>Ie.address).map(Ie=>Ie.address),$e=ae.replace(/\r/g,"").split(/\n/).map(Ie=>extractAddress(Ie)).filter(Ie=>Ie),Ne=Ce.concat($e).map(Ie=>({...collaboratorTemplate,address:Ie}));ee(Ne),ce("")}const fe=classNames$1(collabStyles.mt3,{[collabStyles.mb1]:re.length===0,[collabStyles.mb2]:re.length>0}),me=classNames$1(collabStyles.muted,{[collabStyles.mb1]:re.length===0,[collabStyles.mb2]:re.length>0}),ge=re.filter(Ce=>Ce.address&&Ce.shares),ve=re[re.length-1],ye=ve?!ve.address:!0,be=ie===re.length;return jsxs(reactExports.Fragment,{children:[jsx$1("h2",{className:fe,children:jsx$1("strong",{children:"Beneficiaries"})}),re.length===0&&jsx$1("p",{className:me,children:"Do you want to include anyone that wasn’t a collaborator, eg. the team who made the collab contract ;)"}),re.length===0&&jsx$1("button",{className:collabStyles.btn,onClick:le,children:jsx$1(Secondary$1,{children:"Add address manually"})}),re.length>0&&jsxs("table",{className:collabStyles.table,children:[jsx$1("tbody",{children:re.map((Ce,Se)=>jsx$1(BeneficiaryRow,{beneficiary:Ce,onUpdate:$e=>he(Se,$e),onRemove:()=>ue(Se),onAdd:le,onPasteMulti:ce,onSelectPercentage:be?null:$e=>ne(Se,$e)},`beneficiary-${Se}`))}),re.filter(Ce=>Ce.address).length>0&&jsx$1("tfoot",{children:jsx$1("tr",{children:jsx$1("td",{children:jsx$1("button",{className:collabStyles.btn,onClick:()=>le(),disabled:ye,children:"Add another beneficiary"})})})})]}),jsx$1(ProjectList,{beneficiaries:re,onSelect:le}),ge.length>0&&ie>=2&&jsx$1(AddCollaboratorsButton$1,{threshold:1,collaborators:re,onClick:oe}),(ge.length===0||ie<2)&&jsxs("div",{className:collabStyles.mt2,children:[ie>=2&&jsx$1(Button,{shadow_box:!0,onClick:oe,children:"Skip"}),ie<2&&jsx$1("p",{className:collabStyles.muted,children:"You need to have at least two participants to create a collaborative contract"})]})]})},CollaboratorRow=({collaborator:re,onUpdate:ee,onAdd:ne,onRemove:ie,onPasteMulti:oe,minimalView:ae,onEdit:ce})=>{const[le,ue]=reactExports.useState(),[he,fe]=reactExports.useState(re.address),[me,ge]=reactExports.useState(re.shares),ve=reactExports.useRef();reactExports.useEffect(()=>{const{address:Te,shares:Ne}=re;fe(Te),ge(Ne)},[re]),reactExports.useEffect(()=>{const Te=validAddress(he);Te&&!me&&ve.current&&ve.current.focus(),Te?(console.debug("valid address, checking meta",le,he),(!le||le&&le.tzprofile!==he)&&GetUserMetadata(he).then(({data:Ne})=>{console.debug("Data from user meta query",Ne),ue(Ne)})):ue()},[he,me,le]);const ye=(Te,Ne)=>{if(Ne.replace(/\r/g,"").split(/\n/).length>1)oe(Ne);else{const ke={...re,[Te]:isNaN(Ne)?Ne:Number(Ne)};ee(ke)}},be=classNames$1(inputStyles.container,collabStyles.input),Ce=Te=>{Te.keyCode===13&&ne&&ne(re)},Se=le?le.alias:null,$e=Se||`${he?"":"(tz... or KT...)"}`;return ae?jsxs("tr",{className:collabStyles.row,onClick:ce,children:[jsxs("td",{className:collabStyles.cellWithPadding,children:[Se&&jsx$1("p",{children:Se}),jsx$1("span",{children:he})]}),jsxs("td",{className:collabStyles.cellWithPadding,children:[re.shares," Shares"]})]}):jsxs("tr",{className:collabStyles.row,children:[jsx$1("td",{className:collabStyles.addressCell,children:jsx$1("div",{className:be,children:jsxs("label",{children:[jsx$1("p",{children:"Address"}),jsx$1("textarea",{rows:1,className:collabStyles.textInput,onChange:Te=>ye("address",Te.target.value),placeholder:$e,value:he||""})]})})}),jsx$1("td",{className:collabStyles.sharesCell,children:jsx$1("div",{className:be,children:jsxs("label",{children:[jsx$1("p",{children:"Shares"}),jsx$1("input",{ref:ve,type:"number",onChange:Te=>ye("shares",Te.target.value),onKeyDown:Ce,placeholder:"(proportional)",label:"shares",value:me||""})]})})}),ie&&jsx$1("td",{className:collabStyles.actionCell,children:jsx$1(Button,{onClick:ie,children:jsx$1(Secondary$1,{children:jsx$1(SvgClose,{})})})})]})},CollaboratorTable=({collaborators:re,setCollaborators:ee,availableShares:ne,minimalView:ie,onEdit:oe})=>{const[ae,ce]=reactExports.useState(""),[le,ue]=reactExports.useState(!1),he=()=>{ee([...re,{...collaboratorTemplate}]),ie&&oe()},fe=ye=>{const be=[...re];be.splice(ye,1),ee(be)},me=(ye,be)=>{const Ce=[...re];Ce.length>1&&Ce.some((Se,$e)=>Se.address===be.address&&$e!==ye)?console.debug("Address exists"):Ce[ye]=be,ee(Ce)};reactExports.useEffect(()=>{if(ae.length){const ye=re.filter(Ne=>Ne.address).map(Ne=>Ne.address),Ce=ae.replace(/\r/g,"").split(/\n/).map(Ne=>extractAddress(Ne)).filter(Ne=>!!Ne&&ye.indexOf(Ne)===-1),Se=ye.concat(Ce),$e=Math.floor(100/Se.length),Te=Se.map(Ne=>({address:Ne,shares:$e}));ue(!0),ee(Te),ce("")}re.length===0&&(le||ee([{...collaboratorTemplate}]))},[ae,re,ee,le,ue]);const ge=re[re.length-1],ve=ge?!ge.address:!0;return jsx$1("div",{children:jsxs("table",{className:collabStyles.table,children:[jsx$1("tbody",{children:re.map((ye,be)=>jsx$1(CollaboratorRow,{collaborator:ye,availableShares:ne,onUpdate:Ce=>me(be,Ce),onRemove:()=>fe(be),onAdd:he,onEdit:oe,onPasteMulti:ce,minimalView:ie},`collaborator-${be}`))}),re.filter(ye=>ye.address).length>0&&jsx$1("tfoot",{children:jsx$1("tr",{children:jsx$1("td",{colSpan:ie?2:3,children:jsx$1("button",{className:collabStyles.btn,onClick:()=>he(),disabled:ve,children:"Add another collaborator"})})})})]})})},ReviewStage=({collaborators:re,beneficiaries:ee,onEdit:ne})=>{const ie=groupShareTotal(re)+groupShareTotal(ee),oe=re.length,ae=ee.length,ce=useCollabStore(ue=>ue.originateProxy),le=async()=>{const ue={},he=re.filter(ge=>ge.shares).map(ge=>({...ge,role:"collaborator"})),fe=ee.filter(ge=>ge.shares).map(ge=>({...ge,role:"benefactor"})),me=he.concat(fe);Object.values(me).forEach(ge=>ue[ge.address]={share:parseFloat(Math.floor(ge.shares*1e3)),isCore:ge.role==="collaborator"}),await ce(ue)};return jsxs(Container$3,{children:[jsx$1("h1",{className:collabStyles.mb1,children:jsx$1("strong",{children:"Review & Create"})}),jsxs("p",{className:collabStyles.descriptive,children:["You have a total of ",ie," shares divided between ",oe+ae," ","addresses. Percentages may not total 100% due to rounding."]}),jsx$1("h2",{className:collabStyles.mt3,children:"Collaborators"}),re.length>0&&jsxs("table",{className:collabStyles.reviewTable,children:[jsx$1("thead",{children:jsxs("tr",{children:[jsx$1("th",{children:"Address"}),jsx$1("th",{children:"Shares"}),jsx$1("th",{style:{textAlign:"right"},children:"%"})]})}),jsx$1("tbody",{children:re.map(ue=>{const{address:he,shares:fe,name:me}=ue,ge=(fe/ie*100).toFixed(2);return jsxs("tr",{children:[jsxs("td",{className:collabStyles.cellWithPadding,children:[me&&jsx$1("p",{className:collabStyles.muted,children:me}),he]}),jsx$1("td",{className:collabStyles.cellWithPadding,children:fe}),jsx$1("td",{className:collabStyles.cellWithPadding,style:{textAlign:"right"},children:ge})]},he)})})]}),re.length===0&&jsx$1("p",{className:collabStyles.muted,children:"No core collaborators"}),ee.length>0&&jsxs(reactExports.Fragment,{children:[jsx$1("h2",{className:collabStyles.mt3,children:"Beneficiaries"}),jsxs("table",{className:collabStyles.reviewTable,children:[jsx$1("thead",{children:jsxs("tr",{children:[jsx$1("th",{children:"Address"}),jsx$1("th",{children:"Shares"}),jsx$1("th",{style:{textAlign:"right"},children:"%"})]})}),jsx$1("tbody",{children:ee.map(ue=>{const{address:he,shares:fe,name:me}=ue,ge=(fe/ie*100).toFixed(2);return jsxs("tr",{children:[jsxs("td",{className:collabStyles.cellWithPadding,children:[me&&jsx$1("p",{className:collabStyles.muted,children:me}),he]}),jsx$1("td",{className:collabStyles.cellWithPadding,children:fe}),jsx$1("td",{className:collabStyles.cellWithPadding,style:{textAlign:"right"},children:ge})]},he)})})]})]}),jsx$1("div",{className:collabStyles.mt3,children:jsx$1(Button,{shadow_box:!0,onClick:()=>le(),children:"Create collaborative contract"})}),jsx$1("button",{className:collabStyles.btn,onClick:ne,children:"< Go back"})]})},mb1="_mb1_3qkq2_216",mt1="_mt1_3qkq2_220",mb2="_mb2_3qkq2_224",mt2="_mt2_3qkq2_228",mb3="_mb3_3qkq2_232",mt3="_mt3_3qkq2_236",muted="_muted_3qkq2_240",tabs="_tabs_3qkq2_249",styles$q={mb1,mt1,mb2,mt2,mb3,mt3,muted,tabs},CreateCollaboration=()=>{const re=useUserStore($e=>$e.address),[ee,ne]=reactExports.useState(!0),[ie,oe]=reactExports.useState([]),[ae,ce]=reactExports.useState([]),[le,ue]=reactExports.useState(!1),[he,fe]=reactExports.useState(!1),me=groupShareTotal(ie)+groupShareTotal(ae),ge=ie.filter($e=>!!$e.shares&&validAddress($e.address));reactExports.useEffect(()=>{ae.length===0&&ue(!1)},[he,ae.length]),reactExports.useEffect(()=>{!ee&&!le&&ue(!0),ge.length===0&&oe([])},[ee,le,ge.length]);const ve=($e,Te)=>{const Ne=ae[$e],Ie=[...ae];console.debug("_calculateShares",$e,Te),Ie[$e]={...Ne,shares:Math.ceil(me*Te/100)};const ke=me-groupShareTotal(Ie),De=ie.map(Oe=>{const Be=Oe.shares/groupShareTotal(ie),Me=Math.floor(Be*ke*100)/100;return{...Oe,shares:Me}});ce(Ie),oe(De)},ye=ge.length+ae.length,be=classNames$1(styles$q.mb2,styles$q.muted),Ce=!ee&&(le||he),Se=ee||ge.length>0;return re?he?jsx$1(ReviewStage,{collaborators:ge,beneficiaries:ae,onEdit:()=>fe(!1)}):jsxs(Container$3,{children:[jsx$1("h1",{className:Se?styles$q.mb1:styles$q.mb2,children:jsx$1("strong",{children:"Core collaborators"})}),Se&&jsxs(reactExports.Fragment,{children:[jsx$1("p",{className:be,children:"Note: shares don’t have to add up to 100% - splits are calculated as proportions of the total shares."}),jsx$1("p",{className:be,children:"You can paste multiple addresses to get an auto split"})]}),Se&&jsx$1(CollaboratorTable,{collaborators:ee?ie:ge,setCollaborators:oe,minimalView:Ce,onEdit:()=>ne(!0)}),!Se&&jsx$1("p",{className:styles$q.muted,children:jsx$1(Button,{onClick:()=>ne(!0),children:jsx$1(Secondary$1,{children:"No core collaborators - click to add"})})}),!Ce&&jsx$1(AddCollaboratorsButton$1,{threshold:0,collaborators:ie,onClick:()=>ne(!1)}),le&&jsx$1(BeneficiariesUI,{totalParticipants:ye,totalShares:me,beneficiaries:ae,setBeneficiaries:ce,minimalView:he,onComplete:()=>fe(!0),onSelectPercentage:($e,Te)=>ve($e,Te)})]}):jsx$1(Container$3,{children:"Please sync your wallet to create a collaboration"})},CountdownTimer=({endDate:re,onComplete:ee})=>{const ne=()=>{const ce=Math.abs(re-new Date);return Math.floor(ce/1e3%60)},[ie,oe]=reactExports.useState(ne());return reactExports.useEffect(()=>{const ae=setTimeout(()=>{const ce=ne();oe(ce)},1e3);return()=>clearTimeout(ae)}),reactExports.useEffect(()=>{ie<=0&&ee()},[ie]),ie>0?`${ie}s`:"checking..."},CollabParticipantInfo=({collabData:re,expanded:ee=!1})=>{const[ne,ie]=useUserStore(Ce=>[Ce.proxyAddress,Ce.address]),{administrator_address:oe,contract_address:ae,contract_profile:ce,shareholders:le}=re,ue=ie===oe,he=le.filter(({holder_type:Ce})=>Ce===CollaboratorType.CORE_PARTICIPANT),fe=le.filter(({holder_type:Ce})=>Ce===CollaboratorType.BENEFACTOR),me=classNames$1(collabStyles.flex,collabStyles.flexBetween,collabStyles.alignStart,collabStyles.mb2,{[collabStyles.border]:ae===ne}),ge=classNames$1(collabStyles.flex,collabStyles.flexBetween,collabStyles.alignStart,collabStyles.fullWidth),ve=get$5(ce,"name"),ye=ve||ae,be=ve?`/collab/${ve}`:`${PATH.COLLAB}/${ae}`;return jsx$1("li",{className:me,children:jsxs("div",{className:collabStyles.fullWidth,children:[jsxs("div",{className:ge,children:[ye&&jsx$1("h3",{children:jsx$1("strong",{children:jsx$1(Link,{to:be,children:ye})})}),ae!==ne&&ue&&jsx$1(Button,{shadow_box:!0,onClick:()=>useUserStore.setState({proxyAddress:ae,proxyName:ve}),children:"sign in"}),ae===ne&&ue&&jsx$1(Button,{shadow_box:!0,onClick:()=>useUserStore.setState({proxyAddress:void 0,proxyName:void 0}),children:"sign out"})]}),!ve&&ue&&jsxs("p",{children:["to set the name of this collab,"," ",ae!==ne?"sign in and":""," visit"," ",jsx$1(Link,{to:"/subjkt",style:{textDecoration:"underline"},children:"settings"})]}),ee&&jsxs(reactExports.Fragment,{children:[jsxs("p",{children:[jsx$1("span",{className:collabStyles.infoLabel,children:"address:"}),jsx$1(Link,{className:collabStyles.link,to:`${PATH.ISSUER}/${ae}`,children:ae})]})," ",he.length>0&&jsx$1(ParticipantList$1,{title:"participants",participants:he}),fe.length>0&&jsx$1(ParticipantList$1,{title:"beneficiaries",participants:fe})]})]})},ae)},CollabList=({description:re,collabs:ee})=>{const[ne,ie]=reactExports.useState(!1),oe=classNames$1(collabStyles.flex,collabStyles.flexBetween),ae=classNames$1(collabStyles.borderBottom,collabStyles.mb3);return jsxs("div",{className:ae,children:[jsxs("div",{className:oe,children:[re&&jsx$1("p",{className:collabStyles.mb1,children:re}),jsx$1("div",{className:collabStyles.mb2,children:jsx$1(Button,{shadow_box:!0,onClick:()=>ie(!ne),children:ne?"less detail":"more detail"})})]}),jsx$1("ul",{children:ee.map(ce=>jsx$1(CollabParticipantInfo,{collabData:ce,expanded:ne},ce.contract_address))})]})},CollabContractsOverview=({showAdminOnly:re=!1})=>{const ee=useUserStore(ye=>ye.address),[ne,ie,oe]=useCollabStore(ye=>[ye.originatedContract,ye.originationOpHash,ye.findOriginatedContractFromOpHash],shallow),[ae,ce]=reactExports.useState([]),[le,ue]=reactExports.useState(!0),[he,fe]=reactExports.useState(30),[me,ge]=reactExports.useState();reactExports.useEffect(()=>{if(!(ie&&!me))return;const ye=new Date;ye.setTime(ye.getTime()+he*1e3),ge(ye)},[ie,me,he]),reactExports.useEffect(()=>{ee&&(ue(!0),console.debug("Now checking for available collabs"),fetchGraphQL(getCollabsForAddress,"GetCollabs",{address:ee}).then(({data:ye})=>{if(ue(!1),!ye)return;const be=ye.split_contracts||[],Ce=be.filter(Te=>Te.administrator_address===ee),Se=be.filter(Te=>Te.administrator_address!==ee),$e=re?be.filter(Te=>Te.administrator_address===ee):[...Ce,...Se];ce($e)}))},[ee,ne,re]);const ve=()=>{oe(ie),fe(10)};return jsxs(Container$3,{children:[ie&&me&&jsxs("p",{className:collabStyles.mb3,children:["Collab contract creation in progress..."," ",jsx$1(CountdownTimer,{endDate:me,onComplete:ve})]}),ne&&jsxs("div",{className:collabStyles.mb3,children:[jsx$1("p",{children:jsx$1("strong",{children:"Collaborative contract created successfully!"})}),jsxs("p",{children:["Address: ",ne.address]})]}),ae.length>0&&jsx$1(CollabList,{description:re?"you can mint with these collab contracts:":"you are part of these collab contracts:",collabs:ae}),ae.length===0&&!ie&&jsx$1("p",{children:le?"Looking for collabs...":"You are not a manager of any collaborations at the moment"})]})},TABS$4=[{title:"Manage",to:""},{title:"Create",to:"create"}],Collaborate=()=>{const re=useNavigate();return reactExports.useEffect(()=>{const ee=ie=>{console.debug({originationOpHash:ie}),ie&&re("/")};return useCollabStore.subscribe(ie=>ie.originationOpHash,ee)},[]),jsxs(Page,{title:"proxy",children:[jsx$1(Tabs,{className:styles$q.tabs,tabs:TABS$4}),jsx$1(Outlet,{})]})};function Input$1({type:re="text",placeholder:ee="placeholder",name:ne,min:ie,max:oe,maxlength:ae=500,label:ce,onChange:le=Se=>null,onBlur:ue=()=>null,disabled:he,value:fe,children:me,defaultValue:ge,pattern:ve,onKeyDown:ye,className:be},Ce){const[Se,$e]=useControlled(fe,ge),Te=reactExports.useCallback(Ne=>{le(Ne);const Ie=Ne.target;if(Ie){const ke=re==="number"?isNaN(Ie.valueAsNumber)?Ie.value:Ie.valueAsNumber:Ie.value;$e(ke),le(ke)}},[$e,le,re]);return jsxs("div",{className:`${styles$s.container} ${be||""}`,children:[jsxs("label",{htmlFor:ne||ce||"",children:[jsx$1("p",{children:ce||ne||""}),jsx$1("input",{type:re,ref:Ce,placeholder:ee,name:ne||ce||"",min:ie,max:oe,maxLength:ae,defaultValue:ge,value:Se||"",onChange:Te,onBlur:ue,pattern:ve,onWheel:Ne=>Ne.target.blur(),onKeyDown:ye,autoComplete:"off"})]}),me]})}const Input$2=reactExports.memo(React.forwardRef(Input$1)),Textarea=reactExports.forwardRef(({type:re="text",placeholder:ee="placeholder",name:ne="input-name-not-set",min:ie,max:oe,children:ae,maxlength:ce=5e4,label:le,onChange:ue=()=>null,onBlur:he=()=>null,disabled:fe,value:me,className:ge},ve)=>jsxs("div",{className:`${styles$s.container} ${ge||""}`,children:[jsxs("label",{htmlFor:ne,children:[jsx$1("p",{children:le}),jsx$1("textarea",{ref:ve,type:re,placeholder:ee,name:ne,min:ie,max:oe,maxLength:ce,value:me,onChange:ue,onBlur:he,disabled:fe})]}),ae]})),Textarea$1=reactExports.memo(Textarea);function SimpleInput({type:re,label:ee,min:ne,max:ie,step:oe,minlength:ae,maxlength:ce,placeholder:le,value:ue,onChange:he,pattern:fe,className:me,children:ge}){const ve=ye=>{var be;return he(re==="file"?(be=ye.target.files)==null?void 0:be[0]:ye.target.value)};return jsxs("div",{className:`${styles$s.container} ${me??""}`,children:[jsxs("label",{children:[jsx$1("p",{children:ee}),jsx$1("input",{type:re,min:ne,max:ie,step:oe,minLength:ae,maxLength:ce,placeholder:le,value:ue,onChange:ve,pattern:fe,autoComplete:"off"})]}),ge]})}function TransferFields({labels:re,placeholders:ee,transfers:ne,onChange:ie,className:oe,step:ae,children:ce}){const le=(he,fe,me)=>{const ge=ne.map(ve=>({...ve}));ge[he][fe]=me,ie(ge)},ue=(he,fe)=>{he.preventDefault();const me=ne.map(ge=>({...ge}));fe?me.push({amount:"",destination:""}):me.length>1&&me.pop(),ie(me)};return jsxs("div",{children:[ne.map((he,fe)=>jsxs("div",{children:[jsx$1(SimpleInput,{type:"number",label:`${re.amount} (${fe+1})`,placeholder:(ee==null?void 0:ee.amount)??"0",min:"0",step:ae,value:he.amount,onChange:me=>le(fe,"amount",me),className:oe,children:ce}),jsx$1(SimpleInput,{type:"text",label:`${re.destination} (${fe+1})`,placeholder:(ee==null?void 0:ee.destination)??"tz1...",minlenght:"36",maxlength:"36",value:he.destination,onChange:me=>le(fe,"destination",me),className:oe,children:ce})]},fe)),jsx$1(IncrementButtons,{onClick:ue})]})}const subjkt_editor="_subjkt_editor_1l8zw_216",identicon="_identicon_1l8zw_229",title_line="_title_line_1l8zw_233",fields$1="_fields_1l8zw_239",localSettings="_localSettings_1l8zw_247",info$1="_info_1l8zw_257",explainer="_explainer_1l8zw_274",styles$p={subjkt_editor,identicon,title_line,fields:fields$1,localSettings,info:info$1,explainer},container$c="_container_4ijx1_216",label$1="_label_4ijx1_233",styles$o={container:container$c,label:label$1};function ownKeys(re,ee){var ne=Object.keys(re);if(Object.getOwnPropertySymbols){var ie=Object.getOwnPropertySymbols(re);ee&&(ie=ie.filter(function(oe){return Object.getOwnPropertyDescriptor(re,oe).enumerable})),ne.push.apply(ne,ie)}return ne}function _objectSpread2(re){for(var ee=1;ee<arguments.length;ee++){var ne=arguments[ee]!=null?arguments[ee]:{};ee%2?ownKeys(Object(ne),!0).forEach(function(ie){_defineProperty$2(re,ie,ne[ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(re,Object.getOwnPropertyDescriptors(ne)):ownKeys(Object(ne)).forEach(function(ie){Object.defineProperty(re,ie,Object.getOwnPropertyDescriptor(ne,ie))})}return re}var _excluded$5=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function useStateManager(re){var ee=re.defaultInputValue,ne=ee===void 0?"":ee,ie=re.defaultMenuIsOpen,oe=ie===void 0?!1:ie,ae=re.defaultValue,ce=ae===void 0?null:ae,le=re.inputValue,ue=re.menuIsOpen,he=re.onChange,fe=re.onInputChange,me=re.onMenuClose,ge=re.onMenuOpen,ve=re.value,ye=_objectWithoutProperties$1(re,_excluded$5),be=reactExports.useState(le!==void 0?le:ne),Ce=_slicedToArray(be,2),Se=Ce[0],$e=Ce[1],Te=reactExports.useState(ue!==void 0?ue:oe),Ne=_slicedToArray(Te,2),Ie=Ne[0],ke=Ne[1],De=reactExports.useState(ve!==void 0?ve:ce),Oe=_slicedToArray(De,2),Be=Oe[0],Me=Oe[1],Le=reactExports.useCallback(function(Ue,Ke){typeof he=="function"&&he(Ue,Ke),Me(Ue)},[he]),je=reactExports.useCallback(function(Ue,Ke){var Xe;typeof fe=="function"&&(Xe=fe(Ue,Ke)),$e(Xe!==void 0?Xe:Ue)},[fe]),ze=reactExports.useCallback(function(){typeof ge=="function"&&ge(),ke(!0)},[ge]),Ve=reactExports.useCallback(function(){typeof me=="function"&&me(),ke(!1)},[me]),He=le!==void 0?le:Se,We=ue!==void 0?ue:Ie,Ye=ve!==void 0?ve:Be;return _objectSpread2(_objectSpread2({},ye),{},{inputValue:He,menuIsOpen:We,onChange:Le,onInputChange:je,onMenuClose:Ve,onMenuOpen:ze,value:Ye})}function _isNativeReflectConstruct(){try{var re=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_isNativeReflectConstruct=function(){return!!re})()}function _createSuper(re){var ee=_isNativeReflectConstruct();return function(){var ie=_getPrototypeOf(re),oe;if(ee){var ae=_getPrototypeOf(this).constructor;oe=Reflect.construct(ie,arguments,ae)}else oe=ie.apply(this,arguments);return _possibleConstructorReturn(this,oe)}}function sheetForTag(re){if(re.sheet)return re.sheet;for(var ee=0;ee<document.styleSheets.length;ee++)if(document.styleSheets[ee].ownerNode===re)return document.styleSheets[ee]}function createStyleElement(re){var ee=document.createElement("style");return ee.setAttribute("data-emotion",re.key),re.nonce!==void 0&&ee.setAttribute("nonce",re.nonce),ee.appendChild(document.createTextNode("")),ee.setAttribute("data-s",""),ee}var StyleSheet=function(){function re(ne){var ie=this;this._insertTag=function(oe){var ae;ie.tags.length===0?ie.insertionPoint?ae=ie.insertionPoint.nextSibling:ie.prepend?ae=ie.container.firstChild:ae=ie.before:ae=ie.tags[ie.tags.length-1].nextSibling,ie.container.insertBefore(oe,ae),ie.tags.push(oe)},this.isSpeedy=ne.speedy===void 0?!0:ne.speedy,this.tags=[],this.ctr=0,this.nonce=ne.nonce,this.key=ne.key,this.container=ne.container,this.prepend=ne.prepend,this.insertionPoint=ne.insertionPoint,this.before=null}var ee=re.prototype;return ee.hydrate=function(ie){ie.forEach(this._insertTag)},ee.insert=function(ie){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var oe=this.tags[this.tags.length-1];if(this.isSpeedy){var ae=sheetForTag(oe);try{ae.insertRule(ie,ae.cssRules.length)}catch{}}else oe.appendChild(document.createTextNode(ie));this.ctr++},ee.flush=function(){this.tags.forEach(function(ie){return ie.parentNode&&ie.parentNode.removeChild(ie)}),this.tags=[],this.ctr=0},re}(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(re,ee){return charat(re,0)^45?(((ee<<2^charat(re,0))<<2^charat(re,1))<<2^charat(re,2))<<2^charat(re,3):0}function trim(re){return re.trim()}function match(re,ee){return(re=ee.exec(re))?re[0]:re}function replace(re,ee,ne){return re.replace(ee,ne)}function indexof(re,ee){return re.indexOf(ee)}function charat(re,ee){return re.charCodeAt(ee)|0}function substr(re,ee,ne){return re.slice(ee,ne)}function strlen(re){return re.length}function sizeof(re){return re.length}function append(re,ee){return ee.push(re),re}function combine(re,ee){return re.map(ee).join("")}var line$2=1,column$1=1,length=0,position=0,character=0,characters="";function node(re,ee,ne,ie,oe,ae,ce){return{value:re,root:ee,parent:ne,type:ie,props:oe,children:ae,line:line$2,column:column$1,length:ce,return:""}}function copy(re,ee){return assign(node("",null,null,"",null,null,0),re,{length:-re.length},ee)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column$1--,character===10&&(column$1=1,line$2--),character}function next(){return character=position<length?charat(characters,position++):0,column$1++,character===10&&(column$1=1,line$2++),character}function peek$1(){return charat(characters,position)}function caret(){return position}function slice(re,ee){return substr(characters,re,ee)}function token$1(re){switch(re){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(re){return line$2=column$1=1,length=strlen(characters=re),position=0,[]}function dealloc(re){return characters="",re}function delimit(re){return trim(slice(position-1,delimiter(re===91?re+2:re===40?re+1:re)))}function whitespace(re){for(;(character=peek$1())&&character<33;)next();return token$1(re)>2||token$1(character)>3?"":" "}function escaping(re,ee){for(;--ee&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(re,caret()+(ee<6&&peek$1()==32&&next()==32))}function delimiter(re){for(;next();)switch(character){case re:return position;case 34:case 39:re!==34&&re!==39&&delimiter(character);break;case 40:re===41&&delimiter(re);break;case 92:next();break}return position}function commenter(re,ee){for(;next()&&re+character!==47+10;)if(re+character===42+42&&peek$1()===47)break;return"/*"+slice(ee,position-1)+"*"+from(re===47?re:next())}function identifier(re){for(;!token$1(peek$1());)next();return slice(re,position)}function compile(re){return dealloc(parse$1("",null,null,null,[""],re=alloc(re),0,[0],re))}function parse$1(re,ee,ne,ie,oe,ae,ce,le,ue){for(var he=0,fe=0,me=ce,ge=0,ve=0,ye=0,be=1,Ce=1,Se=1,$e=0,Te="",Ne=oe,Ie=ae,ke=ie,De=Te;Ce;)switch(ye=$e,$e=next()){case 40:if(ye!=108&&charat(De,me-1)==58){indexof(De+=replace(delimit($e),"&","&\f"),"&\f")!=-1&&(Se=-1);break}case 34:case 39:case 91:De+=delimit($e);break;case 9:case 10:case 13:case 32:De+=whitespace(ye);break;case 92:De+=escaping(caret()-1,7);continue;case 47:switch(peek$1()){case 42:case 47:append(comment(commenter(next(),caret()),ee,ne),ue);break;default:De+="/"}break;case 123*be:le[he++]=strlen(De)*Se;case 125*be:case 59:case 0:switch($e){case 0:case 125:Ce=0;case 59+fe:ve>0&&strlen(De)-me&&append(ve>32?declaration(De+";",ie,ne,me-1):declaration(replace(De," ","")+";",ie,ne,me-2),ue);break;case 59:De+=";";default:if(append(ke=ruleset(De,ee,ne,he,fe,oe,le,Te,Ne=[],Ie=[],me),ae),$e===123)if(fe===0)parse$1(De,ee,ke,ke,Ne,ae,me,le,Ie);else switch(ge===99&&charat(De,3)===110?100:ge){case 100:case 109:case 115:parse$1(re,ke,ke,ie&&append(ruleset(re,ke,ke,0,0,oe,le,Te,oe,Ne=[],me),Ie),oe,Ie,me,le,ie?Ne:Ie);break;default:parse$1(De,ke,ke,ke,[""],Ie,0,le,Ie)}}he=fe=ve=0,be=Se=1,Te=De="",me=ce;break;case 58:me=1+strlen(De),ve=ye;default:if(be<1){if($e==123)--be;else if($e==125&&be++==0&&prev()==125)continue}switch(De+=from($e),$e*be){case 38:Se=fe>0?1:(De+="\f",-1);break;case 44:le[he++]=(strlen(De)-1)*Se,Se=1;break;case 64:peek$1()===45&&(De+=delimit(next())),ge=peek$1(),fe=me=strlen(Te=De+=identifier(caret())),$e++;break;case 45:ye===45&&strlen(De)==2&&(be=0)}}return ae}function ruleset(re,ee,ne,ie,oe,ae,ce,le,ue,he,fe){for(var me=oe-1,ge=oe===0?ae:[""],ve=sizeof(ge),ye=0,be=0,Ce=0;ye<ie;++ye)for(var Se=0,$e=substr(re,me+1,me=abs(be=ce[ye])),Te=re;Se<ve;++Se)(Te=trim(be>0?ge[Se]+" "+$e:replace($e,/&\f/g,ge[Se])))&&(ue[Ce++]=Te);return node(re,ee,ne,oe===0?RULESET:le,ue,he,fe)}function comment(re,ee,ne){return node(re,ee,ne,COMMENT,from(char()),substr(re,2,-2),0)}function declaration(re,ee,ne,ie){return node(re,ee,ne,DECLARATION,substr(re,0,ie),substr(re,ie+1,-1),ie)}function serialize(re,ee){for(var ne="",ie=sizeof(re),oe=0;oe<ie;oe++)ne+=ee(re[oe],oe,re,ee)||"";return ne}function stringify$1(re,ee,ne,ie){switch(re.type){case IMPORT:case DECLARATION:return re.return=re.return||re.value;case COMMENT:return"";case KEYFRAMES:return re.return=re.value+"{"+serialize(re.children,ie)+"}";case RULESET:re.value=re.props.join(",")}return strlen(ne=serialize(re.children,ie))?re.return=re.value+"{"+ne+"}":""}function middleware(re){var ee=sizeof(re);return function(ne,ie,oe,ae){for(var ce="",le=0;le<ee;le++)ce+=re[le](ne,ie,oe,ae)||"";return ce}}function rulesheet(re){return function(ee){ee.root||(ee=ee.return)&&re(ee)}}function memoize(re){var ee=Object.create(null);return function(ne){return ee[ne]===void 0&&(ee[ne]=re(ne)),ee[ne]}}var identifierWithPointTracking=function re(ee,ne,ie){for(var oe=0,ae=0;oe=ae,ae=peek$1(),oe===38&&ae===12&&(ne[ie]=1),!token$1(ae);)next();return slice(ee,position)},toRules=function re(ee,ne){var ie=-1,oe=44;do switch(token$1(oe)){case 0:oe===38&&peek$1()===12&&(ne[ie]=1),ee[ie]+=identifierWithPointTracking(position-1,ne,ie);break;case 2:ee[ie]+=delimit(oe);break;case 4:if(oe===44){ee[++ie]=peek$1()===58?"&\f":"",ne[ie]=ee[ie].length;break}default:ee[ie]+=from(oe)}while(oe=next());return ee},getRules=function re(ee,ne){return dealloc(toRules(alloc(ee),ne))},fixedElements=new WeakMap,compat=function re(ee){if(!(ee.type!=="rule"||!ee.parent||ee.length<1)){for(var ne=ee.value,ie=ee.parent,oe=ee.column===ie.column&&ee.line===ie.line;ie.type!=="rule";)if(ie=ie.parent,!ie)return;if(!(ee.props.length===1&&ne.charCodeAt(0)!==58&&!fixedElements.get(ie))&&!oe){fixedElements.set(ee,!0);for(var ae=[],ce=getRules(ne,ae),le=ie.props,ue=0,he=0;ue<ce.length;ue++)for(var fe=0;fe<le.length;fe++,he++)ee.props[he]=ae[ue]?ce[ue].replace(/&\f/g,le[fe]):le[fe]+" "+ce[ue]}}},removeLabel=function re(ee){if(ee.type==="decl"){var ne=ee.value;ne.charCodeAt(0)===108&&ne.charCodeAt(2)===98&&(ee.return="",ee.value="")}};function prefix(re,ee){switch(hash(re,ee)){case 5103:return WEBKIT+"print-"+re+re;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+re+re;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+re+MOZ+re+MS+re+re;case 6828:case 4268:return WEBKIT+re+MS+re+re;case 6165:return WEBKIT+re+MS+"flex-"+re+re;case 5187:return WEBKIT+re+replace(re,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+re;case 5443:return WEBKIT+re+MS+"flex-item-"+replace(re,/flex-|-self/,"")+re;case 4675:return WEBKIT+re+MS+"flex-line-pack"+replace(re,/align-content|flex-|-self/,"")+re;case 5548:return WEBKIT+re+MS+replace(re,"shrink","negative")+re;case 5292:return WEBKIT+re+MS+replace(re,"basis","preferred-size")+re;case 6060:return WEBKIT+"box-"+replace(re,"-grow","")+WEBKIT+re+MS+replace(re,"grow","positive")+re;case 4554:return WEBKIT+replace(re,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+re;case 6187:return replace(replace(replace(re,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),re,"")+re;case 5495:case 3959:return replace(re,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(re,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+re+re;case 4095:case 3583:case 4068:case 2532:return replace(re,/(.+)-inline(.+)/,WEBKIT+"$1$2")+re;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(re)-1-ee>6)switch(charat(re,ee+1)){case 109:if(charat(re,ee+4)!==45)break;case 102:return replace(re,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(re,ee+3)==108?"$3":"$2-$3"))+re;case 115:return~indexof(re,"stretch")?prefix(replace(re,"stretch","fill-available"),ee)+re:re}break;case 4949:if(charat(re,ee+1)!==115)break;case 6444:switch(charat(re,strlen(re)-3-(~indexof(re,"!important")&&10))){case 107:return replace(re,":",":"+WEBKIT)+re;case 101:return replace(re,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(re,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+re}break;case 5936:switch(charat(re,ee+11)){case 114:return WEBKIT+re+MS+replace(re,/[svh]\w+-[tblr]{2}/,"tb")+re;case 108:return WEBKIT+re+MS+replace(re,/[svh]\w+-[tblr]{2}/,"tb-rl")+re;case 45:return WEBKIT+re+MS+replace(re,/[svh]\w+-[tblr]{2}/,"lr")+re}return WEBKIT+re+MS+re+re}return re}var prefixer=function re(ee,ne,ie,oe){if(ee.length>-1&&!ee.return)switch(ee.type){case DECLARATION:ee.return=prefix(ee.value,ee.length);break;case KEYFRAMES:return serialize([copy(ee,{value:replace(ee.value,"@","@"+WEBKIT)})],oe);case RULESET:if(ee.length)return combine(ee.props,function(ae){switch(match(ae,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(ee,{props:[replace(ae,/:(read-\w+)/,":"+MOZ+"$1")]})],oe);case"::placeholder":return serialize([copy(ee,{props:[replace(ae,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(ee,{props:[replace(ae,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(ee,{props:[replace(ae,/:(plac\w+)/,MS+"input-$1")]})],oe)}return""})}},defaultStylisPlugins=[prefixer],createCache=function re(ee){var ne=ee.key;if(ne==="css"){var ie=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(ie,function(be){var Ce=be.getAttribute("data-emotion");Ce.indexOf(" ")!==-1&&(document.head.appendChild(be),be.setAttribute("data-s",""))})}var oe=ee.stylisPlugins||defaultStylisPlugins,ae={},ce,le=[];ce=ee.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+ne+' "]'),function(be){for(var Ce=be.getAttribute("data-emotion").split(" "),Se=1;Se<Ce.length;Se++)ae[Ce[Se]]=!0;le.push(be)});var ue,he=[compat,removeLabel];{var fe,me=[stringify$1,rulesheet(function(be){fe.insert(be)})],ge=middleware(he.concat(oe,me)),ve=function(Ce){return serialize(compile(Ce),ge)};ue=function(Ce,Se,$e,Te){fe=$e,ve(Ce?Ce+"{"+Se.styles+"}":Se.styles),Te&&(ye.inserted[Se.name]=!0)}}var ye={key:ne,sheet:new StyleSheet({key:ne,container:ce,nonce:ee.nonce,speedy:ee.speedy,prepend:ee.prepend,insertionPoint:ee.insertionPoint}),nonce:ee.nonce,inserted:ae,registered:{},insert:ue};return ye.sheet.hydrate(le),ye},reactIs$1={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=typeof Symbol=="function"&&Symbol.for,c$1=b?Symbol.for("react.element"):60103,d=b?Symbol.for("react.portal"):60106,e=b?Symbol.for("react.fragment"):60107,f=b?Symbol.for("react.strict_mode"):60108,g=b?Symbol.for("react.profiler"):60114,h=b?Symbol.for("react.provider"):60109,k=b?Symbol.for("react.context"):60110,l=b?Symbol.for("react.async_mode"):60111,m$1=b?Symbol.for("react.concurrent_mode"):60111,n=b?Symbol.for("react.forward_ref"):60112,p=b?Symbol.for("react.suspense"):60113,q=b?Symbol.for("react.suspense_list"):60120,r=b?Symbol.for("react.memo"):60115,t=b?Symbol.for("react.lazy"):60116,v=b?Symbol.for("react.block"):60121,w$1=b?Symbol.for("react.fundamental"):60117,x=b?Symbol.for("react.responder"):60118,y=b?Symbol.for("react.scope"):60119;function z(re){if(typeof re=="object"&&re!==null){var ee=re.$$typeof;switch(ee){case c$1:switch(re=re.type,re){case l:case m$1:case e:case g:case f:case p:return re;default:switch(re=re&&re.$$typeof,re){case k:case n:case t:case r:case h:return re;default:return ee}}case d:return ee}}}function A(re){return z(re)===m$1}reactIs_production_min.AsyncMode=l;reactIs_production_min.ConcurrentMode=m$1;reactIs_production_min.ContextConsumer=k;reactIs_production_min.ContextProvider=h;reactIs_production_min.Element=c$1;reactIs_production_min.ForwardRef=n;reactIs_production_min.Fragment=e;reactIs_production_min.Lazy=t;reactIs_production_min.Memo=r;reactIs_production_min.Portal=d;reactIs_production_min.Profiler=g;reactIs_production_min.StrictMode=f;reactIs_production_min.Suspense=p;reactIs_production_min.isAsyncMode=function(re){return A(re)||z(re)===l};reactIs_production_min.isConcurrentMode=A;reactIs_production_min.isContextConsumer=function(re){return z(re)===k};reactIs_production_min.isContextProvider=function(re){return z(re)===h};reactIs_production_min.isElement=function(re){return typeof re=="object"&&re!==null&&re.$$typeof===c$1};reactIs_production_min.isForwardRef=function(re){return z(re)===n};reactIs_production_min.isFragment=function(re){return z(re)===e};reactIs_production_min.isLazy=function(re){return z(re)===t};reactIs_production_min.isMemo=function(re){return z(re)===r};reactIs_production_min.isPortal=function(re){return z(re)===d};reactIs_production_min.isProfiler=function(re){return z(re)===g};reactIs_production_min.isStrictMode=function(re){return z(re)===f};reactIs_production_min.isSuspense=function(re){return z(re)===p};reactIs_production_min.isValidElementType=function(re){return typeof re=="string"||typeof re=="function"||re===e||re===m$1||re===g||re===f||re===p||re===q||typeof re=="object"&&re!==null&&(re.$$typeof===t||re.$$typeof===r||re.$$typeof===h||re.$$typeof===k||re.$$typeof===n||re.$$typeof===w$1||re.$$typeof===x||re.$$typeof===y||re.$$typeof===v)};reactIs_production_min.typeOf=z;reactIs$1.exports=reactIs_production_min;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser=!0;function getRegisteredStyles(re,ee,ne){var ie="";return ne.split(" ").forEach(function(oe){re[oe]!==void 0?ee.push(re[oe]+";"):ie+=oe+" "}),ie}var registerStyles=function re(ee,ne,ie){var oe=ee.key+"-"+ne.name;(ie===!1||isBrowser===!1)&&ee.registered[oe]===void 0&&(ee.registered[oe]=ne.styles)},insertStyles=function re(ee,ne,ie){registerStyles(ee,ne,ie);var oe=ee.key+"-"+ne.name;if(ee.inserted[ne.name]===void 0){var ae=ne;do ee.insert(ne===ae?"."+oe:"",ae,ee.sheet,!0),ae=ae.next;while(ae!==void 0)}};function murmur2(re){for(var ee=0,ne,ie=0,oe=re.length;oe>=4;++ie,oe-=4)ne=re.charCodeAt(ie)&255|(re.charCodeAt(++ie)&255)<<8|(re.charCodeAt(++ie)&255)<<16|(re.charCodeAt(++ie)&255)<<24,ne=(ne&65535)*1540483477+((ne>>>16)*59797<<16),ne^=ne>>>24,ee=(ne&65535)*1540483477+((ne>>>16)*59797<<16)^(ee&65535)*1540483477+((ee>>>16)*59797<<16);switch(oe){case 3:ee^=(re.charCodeAt(ie+2)&255)<<16;case 2:ee^=(re.charCodeAt(ie+1)&255)<<8;case 1:ee^=re.charCodeAt(ie)&255,ee=(ee&65535)*1540483477+((ee>>>16)*59797<<16)}return ee^=ee>>>13,ee=(ee&65535)*1540483477+((ee>>>16)*59797<<16),((ee^ee>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function re(ee){return ee.charCodeAt(1)===45},isProcessableValue=function re(ee){return ee!=null&&typeof ee!="boolean"},processStyleName=memoize(function(re){return isCustomProperty(re)?re:re.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function re(ee,ne){switch(ee){case"animation":case"animationName":if(typeof ne=="string")return ne.replace(animationRegex,function(ie,oe,ae){return cursor={name:oe,styles:ae,next:cursor},oe})}return unitlessKeys[ee]!==1&&!isCustomProperty(ee)&&typeof ne=="number"&&ne!==0?ne+"px":ne},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(re,ee,ne){if(ne==null)return"";if(ne.__emotion_styles!==void 0)return ne;switch(typeof ne){case"boolean":return"";case"object":{if(ne.anim===1)return cursor={name:ne.name,styles:ne.styles,next:cursor},ne.name;if(ne.styles!==void 0){var ie=ne.next;if(ie!==void 0)for(;ie!==void 0;)cursor={name:ie.name,styles:ie.styles,next:cursor},ie=ie.next;var oe=ne.styles+";";return oe}return createStringFromObject(re,ee,ne)}case"function":{if(re!==void 0){var ae=cursor,ce=ne(re);return cursor=ae,handleInterpolation(re,ee,ce)}break}}if(ee==null)return ne;var le=ee[ne];return le!==void 0?le:ne}function createStringFromObject(re,ee,ne){var ie="";if(Array.isArray(ne))for(var oe=0;oe<ne.length;oe++)ie+=handleInterpolation(re,ee,ne[oe])+";";else for(var ae in ne){var ce=ne[ae];if(typeof ce!="object")ee!=null&&ee[ce]!==void 0?ie+=ae+"{"+ee[ce]+"}":isProcessableValue(ce)&&(ie+=processStyleName(ae)+":"+processStyleValue(ae,ce)+";");else if(Array.isArray(ce)&&typeof ce[0]=="string"&&(ee==null||ee[ce[0]]===void 0))for(var le=0;le<ce.length;le++)isProcessableValue(ce[le])&&(ie+=processStyleName(ae)+":"+processStyleValue(ae,ce[le])+";");else{var ue=handleInterpolation(re,ee,ce);switch(ae){case"animation":case"animationName":{ie+=processStyleName(ae)+":"+ue+";";break}default:ie+=ae+"{"+ue+"}"}}}return ie}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function re(ee,ne,ie){if(ee.length===1&&typeof ee[0]=="object"&&ee[0]!==null&&ee[0].styles!==void 0)return ee[0];var oe=!0,ae="";cursor=void 0;var ce=ee[0];ce==null||ce.raw===void 0?(oe=!1,ae+=handleInterpolation(ie,ne,ce)):ae+=ce[0];for(var le=1;le<ee.length;le++)ae+=handleInterpolation(ie,ne,ee[le]),oe&&(ae+=ce[le]);labelPattern.lastIndex=0;for(var ue="",he;(he=labelPattern.exec(ae))!==null;)ue+="-"+he[1];var fe=murmur2(ae)+ue;return{name:fe,styles:ae,next:cursor}},syncFallback=function re(ee){return ee()},useInsertionEffect=React$1["useInsertionEffect"]?React$1["useInsertionEffect"]:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,hasOwnProperty$4={}.hasOwnProperty,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function re(ee){return reactExports.forwardRef(function(ne,ie){var oe=reactExports.useContext(EmotionCacheContext);return ee(ne,oe,ie)})},ThemeContext=reactExports.createContext({}),typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function re(ee,ne){var ie={};for(var oe in ne)hasOwnProperty$4.call(ne,oe)&&(ie[oe]=ne[oe]);return ie[typePropName]=ee,ie},Insertion=function re(ee){var ne=ee.cache,ie=ee.serialized,oe=ee.isStringTag;return registerStyles(ne,ie,oe),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(ne,ie,oe)}),null},Emotion=withEmotionCache(function(re,ee,ne){var ie=re.css;typeof ie=="string"&&ee.registered[ie]!==void 0&&(ie=ee.registered[ie]);var oe=re[typePropName],ae=[ie],ce="";typeof re.className=="string"?ce=getRegisteredStyles(ee.registered,ae,re.className):re.className!=null&&(ce=re.className+" ");var le=serializeStyles(ae,void 0,reactExports.useContext(ThemeContext));ce+=ee.key+"-"+le.name;var ue={};for(var he in re)hasOwnProperty$4.call(re,he)&&he!=="css"&&he!==typePropName&&(ue[he]=re[he]);return ue.ref=ne,ue.className=ce,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:ee,serialized:le,isStringTag:typeof oe=="string"}),reactExports.createElement(oe,ue))}),jsx=function re(ee,ne){var ie=arguments;if(ne==null||!hasOwnProperty$4.call(ne,"css"))return reactExports.createElement.apply(void 0,ie);var oe=ie.length,ae=new Array(oe);ae[0]=Emotion,ae[1]=createEmotionProps(ee,ne);for(var ce=2;ce<oe;ce++)ae[ce]=ie[ce];return reactExports.createElement.apply(null,ae)};function css$2(){for(var re=arguments.length,ee=new Array(re),ne=0;ne<re;ne++)ee[ne]=arguments[ne];return serializeStyles(ee)}var keyframes=function re(){var ee=css$2.apply(void 0,arguments),ne="animation-"+ee.name;return{name:ne,styles:"@keyframes "+ne+"{"+ee.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function _taggedTemplateLiteral(re,ee){return ee||(ee=re.slice(0)),Object.freeze(Object.defineProperties(re,{raw:{value:Object.freeze(ee)}}))}const min=Math.min,max=Math.max,round=Math.round,floor=Math.floor,createCoords=re=>({x:re,y:re});function rectToClientRect(re){return{...re,top:re.y,left:re.x,right:re.x+re.width,bottom:re.y+re.height}}function getNodeName(re){return isNode(re)?(re.nodeName||"").toLowerCase():"#document"}function getWindow(re){var ee;return(re==null||(ee=re.ownerDocument)==null?void 0:ee.defaultView)||window}function getDocumentElement(re){var ee;return(ee=(isNode(re)?re.ownerDocument:re.document)||window.document)==null?void 0:ee.documentElement}function isNode(re){return re instanceof Node||re instanceof getWindow(re).Node}function isElement(re){return re instanceof Element||re instanceof getWindow(re).Element}function isHTMLElement$1(re){return re instanceof HTMLElement||re instanceof getWindow(re).HTMLElement}function isShadowRoot(re){return typeof ShadowRoot>"u"?!1:re instanceof ShadowRoot||re instanceof getWindow(re).ShadowRoot}function isOverflowElement(re){const{overflow:ee,overflowX:ne,overflowY:ie,display:oe}=getComputedStyle$1(re);return/auto|scroll|overlay|hidden|clip/.test(ee+ie+ne)&&!["inline","contents"].includes(oe)}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(re){return["html","body","#document"].includes(getNodeName(re))}function getComputedStyle$1(re){return getWindow(re).getComputedStyle(re)}function getParentNode(re){if(getNodeName(re)==="html")return re;const ee=re.assignedSlot||re.parentNode||isShadowRoot(re)&&re.host||getDocumentElement(re);return isShadowRoot(ee)?ee.host:ee}function getNearestOverflowAncestor(re){const ee=getParentNode(re);return isLastTraversableNode(ee)?re.ownerDocument?re.ownerDocument.body:re.body:isHTMLElement$1(ee)&&isOverflowElement(ee)?ee:getNearestOverflowAncestor(ee)}function getOverflowAncestors(re,ee,ne){var ie;ee===void 0&&(ee=[]),ne===void 0&&(ne=!0);const oe=getNearestOverflowAncestor(re),ae=oe===((ie=re.ownerDocument)==null?void 0:ie.body),ce=getWindow(oe);return ae?ee.concat(ce,ce.visualViewport||[],isOverflowElement(oe)?oe:[],ce.frameElement&&ne?getOverflowAncestors(ce.frameElement):[]):ee.concat(oe,getOverflowAncestors(oe,[],ne))}function getCssDimensions(re){const ee=getComputedStyle$1(re);let ne=parseFloat(ee.width)||0,ie=parseFloat(ee.height)||0;const oe=isHTMLElement$1(re),ae=oe?re.offsetWidth:ne,ce=oe?re.offsetHeight:ie,le=round(ne)!==ae||round(ie)!==ce;return le&&(ne=ae,ie=ce),{width:ne,height:ie,$:le}}function unwrapElement(re){return isElement(re)?re:re.contextElement}function getScale(re){const ee=unwrapElement(re);if(!isHTMLElement$1(ee))return createCoords(1);const ne=ee.getBoundingClientRect(),{width:ie,height:oe,$:ae}=getCssDimensions(ee);let ce=(ae?round(ne.width):ne.width)/ie,le=(ae?round(ne.height):ne.height)/oe;return(!ce||!Number.isFinite(ce))&&(ce=1),(!le||!Number.isFinite(le))&&(le=1),{x:ce,y:le}}const noOffsets=createCoords(0);function getVisualOffsets(re){const ee=getWindow(re);return!isWebKit()||!ee.visualViewport?noOffsets:{x:ee.visualViewport.offsetLeft,y:ee.visualViewport.offsetTop}}function shouldAddVisualOffsets(re,ee,ne){return ee===void 0&&(ee=!1),!ne||ee&&ne!==getWindow(re)?!1:ee}function getBoundingClientRect(re,ee,ne,ie){ee===void 0&&(ee=!1),ne===void 0&&(ne=!1);const oe=re.getBoundingClientRect(),ae=unwrapElement(re);let ce=createCoords(1);ee&&(ie?isElement(ie)&&(ce=getScale(ie)):ce=getScale(re));const le=shouldAddVisualOffsets(ae,ne,ie)?getVisualOffsets(ae):createCoords(0);let ue=(oe.left+le.x)/ce.x,he=(oe.top+le.y)/ce.y,fe=oe.width/ce.x,me=oe.height/ce.y;if(ae){const ge=getWindow(ae),ve=ie&&isElement(ie)?getWindow(ie):ie;let ye=ge.frameElement;for(;ye&&ie&&ve!==ge;){const be=getScale(ye),Ce=ye.getBoundingClientRect(),Se=getComputedStyle$1(ye),$e=Ce.left+(ye.clientLeft+parseFloat(Se.paddingLeft))*be.x,Te=Ce.top+(ye.clientTop+parseFloat(Se.paddingTop))*be.y;ue*=be.x,he*=be.y,fe*=be.x,me*=be.y,ue+=$e,he+=Te,ye=getWindow(ye).frameElement}}return rectToClientRect({width:fe,height:me,x:ue,y:he})}function observeMove(re,ee){let ne=null,ie;const oe=getDocumentElement(re);function ae(){var le;clearTimeout(ie),(le=ne)==null||le.disconnect(),ne=null}function ce(le,ue){le===void 0&&(le=!1),ue===void 0&&(ue=1),ae();const{left:he,top:fe,width:me,height:ge}=re.getBoundingClientRect();if(le||ee(),!me||!ge)return;const ve=floor(fe),ye=floor(oe.clientWidth-(he+me)),be=floor(oe.clientHeight-(fe+ge)),Ce=floor(he),$e={rootMargin:-ve+"px "+-ye+"px "+-be+"px "+-Ce+"px",threshold:max(0,min(1,ue))||1};let Te=!0;function Ne(Ie){const ke=Ie[0].intersectionRatio;if(ke!==ue){if(!Te)return ce();ke?ce(!1,ke):ie=setTimeout(()=>{ce(!1,1e-7)},100)}Te=!1}try{ne=new IntersectionObserver(Ne,{...$e,root:oe.ownerDocument})}catch{ne=new IntersectionObserver(Ne,$e)}ne.observe(re)}return ce(!0),ae}function autoUpdate(re,ee,ne,ie){ie===void 0&&(ie={});const{ancestorScroll:oe=!0,ancestorResize:ae=!0,elementResize:ce=typeof ResizeObserver=="function",layoutShift:le=typeof IntersectionObserver=="function",animationFrame:ue=!1}=ie,he=unwrapElement(re),fe=oe||ae?[...he?getOverflowAncestors(he):[],...getOverflowAncestors(ee)]:[];fe.forEach(Se=>{oe&&Se.addEventListener("scroll",ne,{passive:!0}),ae&&Se.addEventListener("resize",ne)});const me=he&&le?observeMove(he,ne):null;let ge=-1,ve=null;ce&&(ve=new ResizeObserver(Se=>{let[$e]=Se;$e&&$e.target===he&&ve&&(ve.unobserve(ee),cancelAnimationFrame(ge),ge=requestAnimationFrame(()=>{var Te;(Te=ve)==null||Te.observe(ee)})),ne()}),he&&!ue&&ve.observe(he),ve.observe(ee));let ye,be=ue?getBoundingClientRect(re):null;ue&&Ce();function Ce(){const Se=getBoundingClientRect(re);be&&(Se.x!==be.x||Se.y!==be.y||Se.width!==be.width||Se.height!==be.height)&&ne(),be=Se,ye=requestAnimationFrame(Ce)}return ne(),()=>{var Se;fe.forEach($e=>{oe&&$e.removeEventListener("scroll",ne),ae&&$e.removeEventListener("resize",ne)}),me==null||me(),(Se=ve)==null||Se.disconnect(),ve=null,ue&&cancelAnimationFrame(ye)}}var index$1=reactExports.useLayoutEffect,_excluded$3=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],noop$2=function re(){};function applyPrefixToName(re,ee){return ee?ee[0]==="-"?re+ee:re+"__"+ee:re}function classNames(re,ee){for(var ne=arguments.length,ie=new Array(ne>2?ne-2:0),oe=2;oe<ne;oe++)ie[oe-2]=arguments[oe];var ae=[].concat(ie);if(ee&&re)for(var ce in ee)ee.hasOwnProperty(ce)&&ee[ce]&&ae.push("".concat(applyPrefixToName(re,ce)));return ae.filter(function(le){return le}).map(function(le){return String(le).trim()}).join(" ")}var cleanValue=function re(ee){return isArray$7(ee)?ee.filter(Boolean):_typeof(ee)==="object"&&ee!==null?[ee]:[]},cleanCommonProps=function re(ee){ee.className,ee.clearValue,ee.cx,ee.getStyles,ee.getClassNames,ee.getValue,ee.hasValue,ee.isMulti,ee.isRtl,ee.options,ee.selectOption,ee.selectProps,ee.setValue,ee.theme;var ne=_objectWithoutProperties$1(ee,_excluded$3);return _objectSpread2({},ne)},getStyleProps=function re(ee,ne,ie){var oe=ee.cx,ae=ee.getStyles,ce=ee.getClassNames,le=ee.className;return{css:ae(ne,ee),className:oe(ie??{},ce(ne,ee),le)}};function isDocumentElement(re){return[document.documentElement,document.body,window].indexOf(re)>-1}function normalizedHeight(re){return isDocumentElement(re)?window.innerHeight:re.clientHeight}function getScrollTop(re){return isDocumentElement(re)?window.pageYOffset:re.scrollTop}function scrollTo(re,ee){if(isDocumentElement(re)){window.scrollTo(0,ee);return}re.scrollTop=ee}function getScrollParent(re){var ee=getComputedStyle(re),ne=ee.position==="absolute",ie=/(auto|scroll)/;if(ee.position==="fixed")return document.documentElement;for(var oe=re;oe=oe.parentElement;)if(ee=getComputedStyle(oe),!(ne&&ee.position==="static")&&ie.test(ee.overflow+ee.overflowY+ee.overflowX))return oe;return document.documentElement}function easeOutCubic(re,ee,ne,ie){return ne*((re=re/ie-1)*re*re+1)+ee}function animatedScrollTo(re,ee){var ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,ie=arguments.length>3&&arguments[3]!==void 0?arguments[3]:noop$2,oe=getScrollTop(re),ae=ee-oe,ce=10,le=0;function ue(){le+=ce;var he=easeOutCubic(le,oe,ae,ne);scrollTo(re,he),le<ne?window.requestAnimationFrame(ue):ie(re)}ue()}function scrollIntoView(re,ee){var ne=re.getBoundingClientRect(),ie=ee.getBoundingClientRect(),oe=ee.offsetHeight/3;ie.bottom+oe>ne.bottom?scrollTo(re,Math.min(ee.offsetTop+ee.clientHeight-re.offsetHeight+oe,re.scrollHeight)):ie.top-oe<ne.top&&scrollTo(re,Math.max(ee.offsetTop-oe,0))}function getBoundingClientObj(re){var ee=re.getBoundingClientRect();return{bottom:ee.bottom,height:ee.height,left:ee.left,right:ee.right,top:ee.top,width:ee.width}}function isTouchCapable(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function isMobileDevice(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var passiveOptionAccessed=!1,options={get passive(){return passiveOptionAccessed=!0}},w=typeof window<"u"?window:{};w.addEventListener&&w.removeEventListener&&(w.addEventListener("p",noop$2,options),w.removeEventListener("p",noop$2,!1));var supportsPassiveEvents=passiveOptionAccessed;function notNullish(re){return re!=null}function isArray$7(re){return Array.isArray(re)}function valueTernary(re,ee,ne){return re?ee:ne}function singleValueAsValue(re){return re}function multiValueAsValue(re){return re}var removeProps=function re(ee){for(var ne=arguments.length,ie=new Array(ne>1?ne-1:0),oe=1;oe<ne;oe++)ie[oe-1]=arguments[oe];var ae=Object.entries(ee).filter(function(ce){var le=_slicedToArray(ce,1),ue=le[0];return!ie.includes(ue)});return ae.reduce(function(ce,le){var ue=_slicedToArray(le,2),he=ue[0],fe=ue[1];return ce[he]=fe,ce},{})};function getMenuPlacement(re){var ee=re.maxHeight,ne=re.menuEl,ie=re.minHeight,oe=re.placement,ae=re.shouldScroll,ce=re.isFixedPosition,le=re.controlHeight,ue=getScrollParent(ne),he={placement:"bottom",maxHeight:ee};if(!ne||!ne.offsetParent)return he;var fe=ue.getBoundingClientRect(),me=fe.height,ge=ne.getBoundingClientRect(),ve=ge.bottom,ye=ge.height,be=ge.top,Ce=ne.offsetParent.getBoundingClientRect(),Se=Ce.top,$e=ce?window.innerHeight:normalizedHeight(ue),Te=getScrollTop(ue),Ne=parseInt(getComputedStyle(ne).marginBottom,10),Ie=parseInt(getComputedStyle(ne).marginTop,10),ke=Se-Ie,De=$e-be,Oe=ke+Te,Be=me-Te-be,Me=ve-$e+Te+Ne,Le=Te+be-Ie,je=160;switch(oe){case"auto":case"bottom":if(De>=ye)return{placement:"bottom",maxHeight:ee};if(Be>=ye&&!ce)return ae&&animatedScrollTo(ue,Me,je),{placement:"bottom",maxHeight:ee};if(!ce&&Be>=ie||ce&&De>=ie){ae&&animatedScrollTo(ue,Me,je);var ze=ce?De-Ne:Be-Ne;return{placement:"bottom",maxHeight:ze}}if(oe==="auto"||ce){var Ve=ee,He=ce?ke:Oe;return He>=ie&&(Ve=Math.min(He-Ne-le,ee)),{placement:"top",maxHeight:Ve}}if(oe==="bottom")return ae&&scrollTo(ue,Me),{placement:"bottom",maxHeight:ee};break;case"top":if(ke>=ye)return{placement:"top",maxHeight:ee};if(Oe>=ye&&!ce)return ae&&animatedScrollTo(ue,Le,je),{placement:"top",maxHeight:ee};if(!ce&&Oe>=ie||ce&&ke>=ie){var We=ee;return(!ce&&Oe>=ie||ce&&ke>=ie)&&(We=ce?ke-Ie:Oe-Ie),ae&&animatedScrollTo(ue,Le,je),{placement:"top",maxHeight:We}}return{placement:"bottom",maxHeight:ee};default:throw new Error('Invalid placement provided "'.concat(oe,'".'))}return he}function alignToControl(re){var ee={bottom:"top",top:"bottom"};return re?ee[re]:"bottom"}var coercePlacement=function re(ee){return ee==="auto"?"bottom":ee},menuCSS=function re(ee,ne){var ie,oe=ee.placement,ae=ee.theme,ce=ae.borderRadius,le=ae.spacing,ue=ae.colors;return _objectSpread2((ie={label:"menu"},_defineProperty$2(ie,alignToControl(oe),"100%"),_defineProperty$2(ie,"position","absolute"),_defineProperty$2(ie,"width","100%"),_defineProperty$2(ie,"zIndex",1),ie),ne?{}:{backgroundColor:ue.neutral0,borderRadius:ce,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:le.menuGutter,marginTop:le.menuGutter})},PortalPlacementContext=reactExports.createContext(null),MenuPlacer=function re(ee){var ne=ee.children,ie=ee.minMenuHeight,oe=ee.maxMenuHeight,ae=ee.menuPlacement,ce=ee.menuPosition,le=ee.menuShouldScrollIntoView,ue=ee.theme,he=reactExports.useContext(PortalPlacementContext)||{},fe=he.setPortalPlacement,me=reactExports.useRef(null),ge=reactExports.useState(oe),ve=_slicedToArray(ge,2),ye=ve[0],be=ve[1],Ce=reactExports.useState(null),Se=_slicedToArray(Ce,2),$e=Se[0],Te=Se[1],Ne=ue.spacing.controlHeight;return index$1(function(){var Ie=me.current;if(Ie){var ke=ce==="fixed",De=le&&!ke,Oe=getMenuPlacement({maxHeight:oe,menuEl:Ie,minHeight:ie,placement:ae,shouldScroll:De,isFixedPosition:ke,controlHeight:Ne});be(Oe.maxHeight),Te(Oe.placement),fe==null||fe(Oe.placement)}},[oe,ae,ce,le,ie,fe,Ne]),ne({ref:me,placerProps:_objectSpread2(_objectSpread2({},ee),{},{placement:$e||coercePlacement(ae),maxHeight:ye})})},Menu$1=function re(ee){var ne=ee.children,ie=ee.innerRef,oe=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"menu",{menu:!0}),{ref:ie},oe),ne)},menuListCSS=function re(ee,ne){var ie=ee.maxHeight,oe=ee.theme.spacing.baseUnit;return _objectSpread2({maxHeight:ie,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},ne?{}:{paddingBottom:oe,paddingTop:oe})},MenuList=function re(ee){var ne=ee.children,ie=ee.innerProps,oe=ee.innerRef,ae=ee.isMulti;return jsx("div",_extends$2({},getStyleProps(ee,"menuList",{"menu-list":!0,"menu-list--is-multi":ae}),{ref:oe},ie),ne)},noticeCSS=function re(ee,ne){var ie=ee.theme,oe=ie.spacing.baseUnit,ae=ie.colors;return _objectSpread2({textAlign:"center"},ne?{}:{color:ae.neutral40,padding:"".concat(oe*2,"px ").concat(oe*3,"px")})},noOptionsMessageCSS=noticeCSS,loadingMessageCSS=noticeCSS,NoOptionsMessage=function re(ee){var ne=ee.children,ie=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),ie),ne)};NoOptionsMessage.defaultProps={children:"No options"};var LoadingMessage=function re(ee){var ne=ee.children,ie=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),ie),ne)};LoadingMessage.defaultProps={children:"Loading..."};var menuPortalCSS=function re(ee){var ne=ee.rect,ie=ee.offset,oe=ee.position;return{left:ne.left,position:oe,top:ie,width:ne.width,zIndex:1}},MenuPortal=function re(ee){var ne=ee.appendTo,ie=ee.children,oe=ee.controlElement,ae=ee.innerProps,ce=ee.menuPlacement,le=ee.menuPosition,ue=reactExports.useRef(null),he=reactExports.useRef(null),fe=reactExports.useState(coercePlacement(ce)),me=_slicedToArray(fe,2),ge=me[0],ve=me[1],ye=reactExports.useMemo(function(){return{setPortalPlacement:ve}},[]),be=reactExports.useState(null),Ce=_slicedToArray(be,2),Se=Ce[0],$e=Ce[1],Te=reactExports.useCallback(function(){if(oe){var De=getBoundingClientObj(oe),Oe=le==="fixed"?0:window.pageYOffset,Be=De[ge]+Oe;(Be!==(Se==null?void 0:Se.offset)||De.left!==(Se==null?void 0:Se.rect.left)||De.width!==(Se==null?void 0:Se.rect.width))&&$e({offset:Be,rect:De})}},[oe,le,ge,Se==null?void 0:Se.offset,Se==null?void 0:Se.rect.left,Se==null?void 0:Se.rect.width]);index$1(function(){Te()},[Te]);var Ne=reactExports.useCallback(function(){typeof he.current=="function"&&(he.current(),he.current=null),oe&&ue.current&&(he.current=autoUpdate(oe,ue.current,Te,{elementResize:"ResizeObserver"in window}))},[oe,Te]);index$1(function(){Ne()},[Ne]);var Ie=reactExports.useCallback(function(De){ue.current=De,Ne()},[Ne]);if(!ne&&le!=="fixed"||!Se)return null;var ke=jsx("div",_extends$2({ref:Ie},getStyleProps(_objectSpread2(_objectSpread2({},ee),{},{offset:Se.offset,position:le,rect:Se.rect}),"menuPortal",{"menu-portal":!0}),ae),ie);return jsx(PortalPlacementContext.Provider,{value:ye},ne?reactDomExports.createPortal(ke,ne):ke)},containerCSS=function re(ee){var ne=ee.isDisabled,ie=ee.isRtl;return{label:"container",direction:ie?"rtl":void 0,pointerEvents:ne?"none":void 0,position:"relative"}},SelectContainer=function re(ee){var ne=ee.children,ie=ee.innerProps,oe=ee.isDisabled,ae=ee.isRtl;return jsx("div",_extends$2({},getStyleProps(ee,"container",{"--is-disabled":oe,"--is-rtl":ae}),ie),ne)},valueContainerCSS=function re(ee,ne){var ie=ee.theme.spacing,oe=ee.isMulti,ae=ee.hasValue,ce=ee.selectProps.controlShouldRenderValue;return _objectSpread2({alignItems:"center",display:oe&&ae&&ce?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},ne?{}:{padding:"".concat(ie.baseUnit/2,"px ").concat(ie.baseUnit*2,"px")})},ValueContainer=function re(ee){var ne=ee.children,ie=ee.innerProps,oe=ee.isMulti,ae=ee.hasValue;return jsx("div",_extends$2({},getStyleProps(ee,"valueContainer",{"value-container":!0,"value-container--is-multi":oe,"value-container--has-value":ae}),ie),ne)},indicatorsContainerCSS=function re(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},IndicatorsContainer=function re(ee){var ne=ee.children,ie=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"indicatorsContainer",{indicators:!0}),ie),ne)},_templateObject,_excluded$2=["size"],_ref2$2={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},Svg=function re(ee){var ne=ee.size,ie=_objectWithoutProperties$1(ee,_excluded$2);return jsx("svg",_extends$2({height:ne,width:ne,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:_ref2$2},ie))},CrossIcon=function re(ee){return jsx(Svg,_extends$2({size:20},ee),jsx("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},DownChevron=function re(ee){return jsx(Svg,_extends$2({size:20},ee),jsx("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},baseCSS=function re(ee,ne){var ie=ee.isFocused,oe=ee.theme,ae=oe.spacing.baseUnit,ce=oe.colors;return _objectSpread2({label:"indicatorContainer",display:"flex",transition:"color 150ms"},ne?{}:{color:ie?ce.neutral60:ce.neutral20,padding:ae*2,":hover":{color:ie?ce.neutral80:ce.neutral40}})},dropdownIndicatorCSS=baseCSS,DropdownIndicator=function re(ee){var ne=ee.children,ie=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),ie),ne||jsx(DownChevron,null))},clearIndicatorCSS=baseCSS,ClearIndicator=function re(ee){var ne=ee.children,ie=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"clearIndicator",{indicator:!0,"clear-indicator":!0}),ie),ne||jsx(CrossIcon,null))},indicatorSeparatorCSS=function re(ee,ne){var ie=ee.isDisabled,oe=ee.theme,ae=oe.spacing.baseUnit,ce=oe.colors;return _objectSpread2({label:"indicatorSeparator",alignSelf:"stretch",width:1},ne?{}:{backgroundColor:ie?ce.neutral10:ce.neutral20,marginBottom:ae*2,marginTop:ae*2})},IndicatorSeparator=function re(ee){var ne=ee.innerProps;return jsx("span",_extends$2({},ne,getStyleProps(ee,"indicatorSeparator",{"indicator-separator":!0})))},loadingDotAnimations=keyframes(_templateObject||(_templateObject=_taggedTemplateLiteral([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),loadingIndicatorCSS=function re(ee,ne){var ie=ee.isFocused,oe=ee.size,ae=ee.theme,ce=ae.colors,le=ae.spacing.baseUnit;return _objectSpread2({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:oe,lineHeight:1,marginRight:oe,textAlign:"center",verticalAlign:"middle"},ne?{}:{color:ie?ce.neutral60:ce.neutral20,padding:le*2})},LoadingDot=function re(ee){var ne=ee.delay,ie=ee.offset;return jsx("span",{css:css$2({animation:"".concat(loadingDotAnimations," 1s ease-in-out ").concat(ne,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:ie?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},LoadingIndicator=function re(ee){var ne=ee.innerProps,ie=ee.isRtl;return jsx("div",_extends$2({},getStyleProps(ee,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),ne),jsx(LoadingDot,{delay:0,offset:ie}),jsx(LoadingDot,{delay:160,offset:!0}),jsx(LoadingDot,{delay:320,offset:!ie}))};LoadingIndicator.defaultProps={size:4};var css$1=function re(ee,ne){var ie=ee.isDisabled,oe=ee.isFocused,ae=ee.theme,ce=ae.colors,le=ae.borderRadius,ue=ae.spacing;return _objectSpread2({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:ue.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},ne?{}:{backgroundColor:ie?ce.neutral5:ce.neutral0,borderColor:ie?ce.neutral10:oe?ce.primary:ce.neutral20,borderRadius:le,borderStyle:"solid",borderWidth:1,boxShadow:oe?"0 0 0 1px ".concat(ce.primary):void 0,"&:hover":{borderColor:oe?ce.primary:ce.neutral30}})},Control=function re(ee){var ne=ee.children,ie=ee.isDisabled,oe=ee.isFocused,ae=ee.innerRef,ce=ee.innerProps,le=ee.menuIsOpen;return jsx("div",_extends$2({ref:ae},getStyleProps(ee,"control",{control:!0,"control--is-disabled":ie,"control--is-focused":oe,"control--menu-is-open":le}),ce),ne)},_excluded$1=["data"],groupCSS=function re(ee,ne){var ie=ee.theme.spacing;return ne?{}:{paddingBottom:ie.baseUnit*2,paddingTop:ie.baseUnit*2}},Group=function re(ee){var ne=ee.children,ie=ee.cx,oe=ee.getStyles,ae=ee.getClassNames,ce=ee.Heading,le=ee.headingProps,ue=ee.innerProps,he=ee.label,fe=ee.theme,me=ee.selectProps;return jsx("div",_extends$2({},getStyleProps(ee,"group",{group:!0}),ue),jsx(ce,_extends$2({},le,{selectProps:me,theme:fe,getStyles:oe,getClassNames:ae,cx:ie}),he),jsx("div",null,ne))},groupHeadingCSS=function re(ee,ne){var ie=ee.theme,oe=ie.colors,ae=ie.spacing;return _objectSpread2({label:"group",cursor:"default",display:"block"},ne?{}:{color:oe.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:ae.baseUnit*3,paddingRight:ae.baseUnit*3,textTransform:"uppercase"})},GroupHeading=function re(ee){var ne=cleanCommonProps(ee);ne.data;var ie=_objectWithoutProperties$1(ne,_excluded$1);return jsx("div",_extends$2({},getStyleProps(ee,"groupHeading",{"group-heading":!0}),ie))},_excluded$4=["innerRef","isDisabled","isHidden","inputClassName"],inputCSS=function re(ee,ne){var ie=ee.isDisabled,oe=ee.value,ae=ee.theme,ce=ae.spacing,le=ae.colors;return _objectSpread2(_objectSpread2({visibility:ie?"hidden":"visible",transform:oe?"translateZ(0)":""},containerStyle),ne?{}:{margin:ce.baseUnit/2,paddingBottom:ce.baseUnit/2,paddingTop:ce.baseUnit/2,color:le.neutral80})},spacingStyle={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},containerStyle={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":_objectSpread2({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},spacingStyle)},inputStyle=function re(ee){return _objectSpread2({label:"input",color:"inherit",background:0,opacity:ee?0:1,width:"100%"},spacingStyle)},Input=function re(ee){var ne=ee.cx,ie=ee.value,oe=cleanCommonProps(ee),ae=oe.innerRef,ce=oe.isDisabled,le=oe.isHidden,ue=oe.inputClassName,he=_objectWithoutProperties$1(oe,_excluded$4);return jsx("div",_extends$2({},getStyleProps(ee,"input",{"input-container":!0}),{"data-value":ie||""}),jsx("input",_extends$2({className:ne({input:!0},ue),ref:ae,style:inputStyle(le),disabled:ce},he)))},multiValueCSS=function re(ee,ne){var ie=ee.theme,oe=ie.spacing,ae=ie.borderRadius,ce=ie.colors;return _objectSpread2({label:"multiValue",display:"flex",minWidth:0},ne?{}:{backgroundColor:ce.neutral10,borderRadius:ae/2,margin:oe.baseUnit/2})},multiValueLabelCSS=function re(ee,ne){var ie=ee.theme,oe=ie.borderRadius,ae=ie.colors,ce=ee.cropWithEllipsis;return _objectSpread2({overflow:"hidden",textOverflow:ce||ce===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},ne?{}:{borderRadius:oe/2,color:ae.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemoveCSS=function re(ee,ne){var ie=ee.theme,oe=ie.spacing,ae=ie.borderRadius,ce=ie.colors,le=ee.isFocused;return _objectSpread2({alignItems:"center",display:"flex"},ne?{}:{borderRadius:ae/2,backgroundColor:le?ce.dangerLight:void 0,paddingLeft:oe.baseUnit,paddingRight:oe.baseUnit,":hover":{backgroundColor:ce.dangerLight,color:ce.danger}})},MultiValueGeneric=function re(ee){var ne=ee.children,ie=ee.innerProps;return jsx("div",ie,ne)},MultiValueContainer=MultiValueGeneric,MultiValueLabel=MultiValueGeneric;function MultiValueRemove(re){var ee=re.children,ne=re.innerProps;return jsx("div",_extends$2({role:"button"},ne),ee||jsx(CrossIcon,{size:14}))}var MultiValue=function re(ee){var ne=ee.children,ie=ee.components,oe=ee.data,ae=ee.innerProps,ce=ee.isDisabled,le=ee.removeProps,ue=ee.selectProps,he=ie.Container,fe=ie.Label,me=ie.Remove;return jsx(he,{data:oe,innerProps:_objectSpread2(_objectSpread2({},getStyleProps(ee,"multiValue",{"multi-value":!0,"multi-value--is-disabled":ce})),ae),selectProps:ue},jsx(fe,{data:oe,innerProps:_objectSpread2({},getStyleProps(ee,"multiValueLabel",{"multi-value__label":!0})),selectProps:ue},ne),jsx(me,{data:oe,innerProps:_objectSpread2(_objectSpread2({},getStyleProps(ee,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(ne||"option")},le),selectProps:ue}))},optionCSS=function re(ee,ne){var ie=ee.isDisabled,oe=ee.isFocused,ae=ee.isSelected,ce=ee.theme,le=ce.spacing,ue=ce.colors;return _objectSpread2({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},ne?{}:{backgroundColor:ae?ue.primary:oe?ue.primary25:"transparent",color:ie?ue.neutral20:ae?ue.neutral0:"inherit",padding:"".concat(le.baseUnit*2,"px ").concat(le.baseUnit*3,"px"),":active":{backgroundColor:ie?void 0:ae?ue.primary:ue.primary50}})},Option=function re(ee){var ne=ee.children,ie=ee.isDisabled,oe=ee.isFocused,ae=ee.isSelected,ce=ee.innerRef,le=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"option",{option:!0,"option--is-disabled":ie,"option--is-focused":oe,"option--is-selected":ae}),{ref:ce,"aria-disabled":ie},le),ne)},placeholderCSS=function re(ee,ne){var ie=ee.theme,oe=ie.spacing,ae=ie.colors;return _objectSpread2({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},ne?{}:{color:ae.neutral50,marginLeft:oe.baseUnit/2,marginRight:oe.baseUnit/2})},Placeholder=function re(ee){var ne=ee.children,ie=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"placeholder",{placeholder:!0}),ie),ne)},css=function re(ee,ne){var ie=ee.isDisabled,oe=ee.theme,ae=oe.spacing,ce=oe.colors;return _objectSpread2({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},ne?{}:{color:ie?ce.neutral40:ce.neutral80,marginLeft:ae.baseUnit/2,marginRight:ae.baseUnit/2})},SingleValue=function re(ee){var ne=ee.children,ie=ee.isDisabled,oe=ee.innerProps;return jsx("div",_extends$2({},getStyleProps(ee,"singleValue",{"single-value":!0,"single-value--is-disabled":ie}),oe),ne)},components={ClearIndicator,Control,DropdownIndicator,DownChevron,CrossIcon,Group,GroupHeading,IndicatorsContainer,IndicatorSeparator,Input,LoadingIndicator,Menu:Menu$1,MenuList,MenuPortal,LoadingMessage,NoOptionsMessage,MultiValue,MultiValueContainer,MultiValueLabel,MultiValueRemove,Option,Placeholder,SelectContainer,SingleValue,ValueContainer},defaultComponents=function re(ee){return _objectSpread2(_objectSpread2({},components),ee.components)},safeIsNaN=Number.isNaN||function re(ee){return typeof ee=="number"&&ee!==ee};function isEqual(re,ee){return!!(re===ee||safeIsNaN(re)&&safeIsNaN(ee))}function areInputsEqual(re,ee){if(re.length!==ee.length)return!1;for(var ne=0;ne<re.length;ne++)if(!isEqual(re[ne],ee[ne]))return!1;return!0}function memoizeOne(re,ee){ee===void 0&&(ee=areInputsEqual);var ne=null;function ie(){for(var oe=[],ae=0;ae<arguments.length;ae++)oe[ae]=arguments[ae];if(ne&&ne.lastThis===this&&ee(oe,ne.lastArgs))return ne.lastResult;var ce=re.apply(this,oe);return ne={lastResult:ce,lastArgs:oe,lastThis:this},ce}return ie.clear=function(){ne=null},ie}var _ref={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},A11yText=function re(ee){return jsx("span",_extends$2({css:_ref},ee))},defaultAriaLiveMessages={guidance:function re(ee){var ne=ee.isSearchable,ie=ee.isMulti,oe=ee.isDisabled,ae=ee.tabSelectsValue,ce=ee.context;switch(ce){case"menu":return"Use Up and Down to choose options".concat(oe?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(ae?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(ee["aria-label"]||"Select"," is focused ").concat(ne?",type to refine list":"",", press Down to open the menu, ").concat(ie?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function re(ee){var ne=ee.action,ie=ee.label,oe=ie===void 0?"":ie,ae=ee.labels,ce=ee.isDisabled;switch(ne){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(oe,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(ae.length>1?"s":""," ").concat(ae.join(","),", selected.");case"select-option":return ce?"option ".concat(oe," is disabled. Select another option."):"option ".concat(oe,", selected.");default:return""}},onFocus:function re(ee){var ne=ee.context,ie=ee.focused,oe=ee.options,ae=ee.label,ce=ae===void 0?"":ae,le=ee.selectValue,ue=ee.isDisabled,he=ee.isSelected,fe=function(ye,be){return ye&&ye.length?"".concat(ye.indexOf(be)+1," of ").concat(ye.length):""};if(ne==="value"&&le)return"value ".concat(ce," focused, ").concat(fe(le,ie),".");if(ne==="menu"){var me=ue?" disabled":"",ge="".concat(he?"selected":"focused").concat(me);return"option ".concat(ce," ").concat(ge,", ").concat(fe(oe,ie),".")}return""},onFilter:function re(ee){var ne=ee.inputValue,ie=ee.resultsMessage;return"".concat(ie).concat(ne?" for search term "+ne:"",".")}},LiveRegion=function re(ee){var ne=ee.ariaSelection,ie=ee.focusedOption,oe=ee.focusedValue,ae=ee.focusableOptions,ce=ee.isFocused,le=ee.selectValue,ue=ee.selectProps,he=ee.id,fe=ue.ariaLiveMessages,me=ue.getOptionLabel,ge=ue.inputValue,ve=ue.isMulti,ye=ue.isOptionDisabled,be=ue.isSearchable,Ce=ue.menuIsOpen,Se=ue.options,$e=ue.screenReaderStatus,Te=ue.tabSelectsValue,Ne=ue["aria-label"],Ie=ue["aria-live"],ke=reactExports.useMemo(function(){return _objectSpread2(_objectSpread2({},defaultAriaLiveMessages),fe||{})},[fe]),De=reactExports.useMemo(function(){var Ve="";if(ne&&ke.onChange){var He=ne.option,We=ne.options,Ye=ne.removedValue,Ue=ne.removedValues,Ke=ne.value,Xe=function(nn){return Array.isArray(nn)?null:nn},Vt=Ye||He||Xe(Ke),Wt=Vt?me(Vt):"",Kt=We||Ue||void 0,tn=Kt?Kt.map(me):[],Xt=_objectSpread2({isDisabled:Vt&&ye(Vt,le),label:Wt,labels:tn},ne);Ve=ke.onChange(Xt)}return Ve},[ne,ke,ye,le,me]),Oe=reactExports.useMemo(function(){var Ve="",He=ie||oe,We=!!(ie&&le&&le.includes(ie));if(He&&ke.onFocus){var Ye={focused:He,label:me(He),isDisabled:ye(He,le),isSelected:We,options:ae,context:He===ie?"menu":"value",selectValue:le};Ve=ke.onFocus(Ye)}return Ve},[ie,oe,me,ye,ke,ae,le]),Be=reactExports.useMemo(function(){var Ve="";if(Ce&&Se.length&&ke.onFilter){var He=$e({count:ae.length});Ve=ke.onFilter({inputValue:ge,resultsMessage:He})}return Ve},[ae,ge,Ce,ke,Se,$e]),Me=reactExports.useMemo(function(){var Ve="";if(ke.guidance){var He=oe?"value":Ce?"menu":"input";Ve=ke.guidance({"aria-label":Ne,context:He,isDisabled:ie&&ye(ie,le),isMulti:ve,isSearchable:be,tabSelectsValue:Te})}return Ve},[Ne,ie,oe,ve,ye,be,Ce,ke,le,Te]),Le="".concat(Oe," ").concat(Be," ").concat(Me),je=jsx(reactExports.Fragment,null,jsx("span",{id:"aria-selection"},De),jsx("span",{id:"aria-context"},Le)),ze=(ne==null?void 0:ne.action)==="initial-input-focus";return jsx(reactExports.Fragment,null,jsx(A11yText,{id:he},ze&&je),jsx(A11yText,{"aria-live":Ie,"aria-atomic":"false","aria-relevant":"additions text"},ce&&!ze&&je))},diacritics=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],anyDiacritic=new RegExp("["+diacritics.map(function(re){return re.letters}).join("")+"]","g"),diacriticToBase={};for(var i=0;i<diacritics.length;i++)for(var diacritic=diacritics[i],j=0;j<diacritic.letters.length;j++)diacriticToBase[diacritic.letters[j]]=diacritic.base;var stripDiacritics=function re(ee){return ee.replace(anyDiacritic,function(ne){return diacriticToBase[ne]})},memoizedStripDiacriticsForInput=memoizeOne(stripDiacritics),trimString=function re(ee){return ee.replace(/^\s+|\s+$/g,"")},defaultStringify=function re(ee){return"".concat(ee.label," ").concat(ee.value)},createFilter=function re(ee){return function(ne,ie){if(ne.data.__isNew__)return!0;var oe=_objectSpread2({ignoreCase:!0,ignoreAccents:!0,stringify:defaultStringify,trim:!0,matchFrom:"any"},ee),ae=oe.ignoreCase,ce=oe.ignoreAccents,le=oe.stringify,ue=oe.trim,he=oe.matchFrom,fe=ue?trimString(ie):ie,me=ue?trimString(le(ne)):le(ne);return ae&&(fe=fe.toLowerCase(),me=me.toLowerCase()),ce&&(fe=memoizedStripDiacriticsForInput(fe),me=stripDiacritics(me)),he==="start"?me.substr(0,fe.length)===fe:me.indexOf(fe)>-1}},_excluded=["innerRef"];function DummyInput(re){var ee=re.innerRef,ne=_objectWithoutProperties$1(re,_excluded),ie=removeProps(ne,"onExited","in","enter","exit","appear");return jsx("input",_extends$2({ref:ee},ie,{css:css$2({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var cancelScroll=function re(ee){ee.preventDefault(),ee.stopPropagation()};function useScrollCapture(re){var ee=re.isEnabled,ne=re.onBottomArrive,ie=re.onBottomLeave,oe=re.onTopArrive,ae=re.onTopLeave,ce=reactExports.useRef(!1),le=reactExports.useRef(!1),ue=reactExports.useRef(0),he=reactExports.useRef(null),fe=reactExports.useCallback(function(Ce,Se){if(he.current!==null){var $e=he.current,Te=$e.scrollTop,Ne=$e.scrollHeight,Ie=$e.clientHeight,ke=he.current,De=Se>0,Oe=Ne-Ie-Te,Be=!1;Oe>Se&&ce.current&&(ie&&ie(Ce),ce.current=!1),De&&le.current&&(ae&&ae(Ce),le.current=!1),De&&Se>Oe?(ne&&!ce.current&&ne(Ce),ke.scrollTop=Ne,Be=!0,ce.current=!0):!De&&-Se>Te&&(oe&&!le.current&&oe(Ce),ke.scrollTop=0,Be=!0,le.current=!0),Be&&cancelScroll(Ce)}},[ne,ie,oe,ae]),me=reactExports.useCallback(function(Ce){fe(Ce,Ce.deltaY)},[fe]),ge=reactExports.useCallback(function(Ce){ue.current=Ce.changedTouches[0].clientY},[]),ve=reactExports.useCallback(function(Ce){var Se=ue.current-Ce.changedTouches[0].clientY;fe(Ce,Se)},[fe]),ye=reactExports.useCallback(function(Ce){if(Ce){var Se=supportsPassiveEvents?{passive:!1}:!1;Ce.addEventListener("wheel",me,Se),Ce.addEventListener("touchstart",ge,Se),Ce.addEventListener("touchmove",ve,Se)}},[ve,ge,me]),be=reactExports.useCallback(function(Ce){Ce&&(Ce.removeEventListener("wheel",me,!1),Ce.removeEventListener("touchstart",ge,!1),Ce.removeEventListener("touchmove",ve,!1))},[ve,ge,me]);return reactExports.useEffect(function(){if(ee){var Ce=he.current;return ye(Ce),function(){be(Ce)}}},[ee,ye,be]),function(Ce){he.current=Ce}}var STYLE_KEYS=["boxSizing","height","overflow","paddingRight","position"],LOCK_STYLES={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function preventTouchMove(re){re.preventDefault()}function allowTouchMove(re){re.stopPropagation()}function preventInertiaScroll(){var re=this.scrollTop,ee=this.scrollHeight,ne=re+this.offsetHeight;re===0?this.scrollTop=1:ne===ee&&(this.scrollTop=re-1)}function isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints}var canUseDOM=!!(typeof window<"u"&&window.document&&window.document.createElement),activeScrollLocks=0,listenerOptions={capture:!1,passive:!1};function useScrollLock(re){var ee=re.isEnabled,ne=re.accountForScrollbars,ie=ne===void 0?!0:ne,oe=reactExports.useRef({}),ae=reactExports.useRef(null),ce=reactExports.useCallback(function(ue){if(canUseDOM){var he=document.body,fe=he&&he.style;if(ie&&STYLE_KEYS.forEach(function(ye){var be=fe&&fe[ye];oe.current[ye]=be}),ie&&activeScrollLocks<1){var me=parseInt(oe.current.paddingRight,10)||0,ge=document.body?document.body.clientWidth:0,ve=window.innerWidth-ge+me||0;Object.keys(LOCK_STYLES).forEach(function(ye){var be=LOCK_STYLES[ye];fe&&(fe[ye]=be)}),fe&&(fe.paddingRight="".concat(ve,"px"))}he&&isTouchDevice()&&(he.addEventListener("touchmove",preventTouchMove,listenerOptions),ue&&(ue.addEventListener("touchstart",preventInertiaScroll,listenerOptions),ue.addEventListener("touchmove",allowTouchMove,listenerOptions))),activeScrollLocks+=1}},[ie]),le=reactExports.useCallback(function(ue){if(canUseDOM){var he=document.body,fe=he&&he.style;activeScrollLocks=Math.max(activeScrollLocks-1,0),ie&&activeScrollLocks<1&&STYLE_KEYS.forEach(function(me){var ge=oe.current[me];fe&&(fe[me]=ge)}),he&&isTouchDevice()&&(he.removeEventListener("touchmove",preventTouchMove,listenerOptions),ue&&(ue.removeEventListener("touchstart",preventInertiaScroll,listenerOptions),ue.removeEventListener("touchmove",allowTouchMove,listenerOptions)))}},[ie]);return reactExports.useEffect(function(){if(ee){var ue=ae.current;return ce(ue),function(){le(ue)}}},[ee,ce,le]),function(ue){ae.current=ue}}var blurSelectInput=function re(){return document.activeElement&&document.activeElement.blur()},_ref2$1={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function ScrollManager(re){var ee=re.children,ne=re.lockEnabled,ie=re.captureEnabled,oe=ie===void 0?!0:ie,ae=re.onBottomArrive,ce=re.onBottomLeave,le=re.onTopArrive,ue=re.onTopLeave,he=useScrollCapture({isEnabled:oe,onBottomArrive:ae,onBottomLeave:ce,onTopArrive:le,onTopLeave:ue}),fe=useScrollLock({isEnabled:ne}),me=function(ve){he(ve),fe(ve)};return jsx(reactExports.Fragment,null,ne&&jsx("div",{onClick:blurSelectInput,css:_ref2$1}),ee(me))}var _ref2={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},RequiredInput=function re(ee){var ne=ee.name,ie=ee.onFocus;return jsx("input",{required:!0,name:ne,tabIndex:-1,onFocus:ie,css:_ref2,value:"",onChange:function(){}})},formatGroupLabel=function re(ee){return ee.label},getOptionLabel$1=function re(ee){return ee.label},getOptionValue$1=function re(ee){return ee.value},isOptionDisabled=function re(ee){return!!ee.isDisabled},defaultStyles={clearIndicator:clearIndicatorCSS,container:containerCSS,control:css$1,dropdownIndicator:dropdownIndicatorCSS,group:groupCSS,groupHeading:groupHeadingCSS,indicatorsContainer:indicatorsContainerCSS,indicatorSeparator:indicatorSeparatorCSS,input:inputCSS,loadingIndicator:loadingIndicatorCSS,loadingMessage:loadingMessageCSS,menu:menuCSS,menuList:menuListCSS,menuPortal:menuPortalCSS,multiValue:multiValueCSS,multiValueLabel:multiValueLabelCSS,multiValueRemove:multiValueRemoveCSS,noOptionsMessage:noOptionsMessageCSS,option:optionCSS,placeholder:placeholderCSS,singleValue:css,valueContainer:valueContainerCSS},colors={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},borderRadius=4,baseUnit=4,controlHeight=38,menuGutter=baseUnit*2,spacing={baseUnit,controlHeight,menuGutter},defaultTheme={borderRadius,colors,spacing},defaultProps={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:isTouchCapable(),captureMenuScroll:!isTouchCapable(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:createFilter(),formatGroupLabel,getOptionLabel:getOptionLabel$1,getOptionValue:getOptionValue$1,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled,loadingMessage:function re(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!isMobileDevice(),noOptionsMessage:function re(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function re(ee){var ne=ee.count;return"".concat(ne," result").concat(ne!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function toCategorizedOption(re,ee,ne,ie){var oe=_isOptionDisabled(re,ee,ne),ae=_isOptionSelected(re,ee,ne),ce=getOptionLabel(re,ee),le=getOptionValue(re,ee);return{type:"option",data:ee,isDisabled:oe,isSelected:ae,label:ce,value:le,index:ie}}function buildCategorizedOptions(re,ee){return re.options.map(function(ne,ie){if("options"in ne){var oe=ne.options.map(function(ce,le){return toCategorizedOption(re,ce,ee,le)}).filter(function(ce){return isFocusable(re,ce)});return oe.length>0?{type:"group",data:ne,options:oe,index:ie}:void 0}var ae=toCategorizedOption(re,ne,ee,ie);return isFocusable(re,ae)?ae:void 0}).filter(notNullish)}function buildFocusableOptionsFromCategorizedOptions(re){return re.reduce(function(ee,ne){return ne.type==="group"?ee.push.apply(ee,_toConsumableArray(ne.options.map(function(ie){return ie.data}))):ee.push(ne.data),ee},[])}function buildFocusableOptions(re,ee){return buildFocusableOptionsFromCategorizedOptions(buildCategorizedOptions(re,ee))}function isFocusable(re,ee){var ne=re.inputValue,ie=ne===void 0?"":ne,oe=ee.data,ae=ee.isSelected,ce=ee.label,le=ee.value;return(!shouldHideSelectedOptions(re)||!ae)&&_filterOption(re,{label:ce,value:le,data:oe},ie)}function getNextFocusedValue(re,ee){var ne=re.focusedValue,ie=re.selectValue,oe=ie.indexOf(ne);if(oe>-1){var ae=ee.indexOf(ne);if(ae>-1)return ne;if(oe<ee.length)return ee[oe]}return null}function getNextFocusedOption(re,ee){var ne=re.focusedOption;return ne&&ee.indexOf(ne)>-1?ne:ee[0]}var getOptionLabel=function re(ee,ne){return ee.getOptionLabel(ne)},getOptionValue=function re(ee,ne){return ee.getOptionValue(ne)};function _isOptionDisabled(re,ee,ne){return typeof re.isOptionDisabled=="function"?re.isOptionDisabled(ee,ne):!1}function _isOptionSelected(re,ee,ne){if(ne.indexOf(ee)>-1)return!0;if(typeof re.isOptionSelected=="function")return re.isOptionSelected(ee,ne);var ie=getOptionValue(re,ee);return ne.some(function(oe){return getOptionValue(re,oe)===ie})}function _filterOption(re,ee,ne){return re.filterOption?re.filterOption(ee,ne):!0}var shouldHideSelectedOptions=function re(ee){var ne=ee.hideSelectedOptions,ie=ee.isMulti;return ne===void 0?ie:ne},instanceId=1,Select$1=function(re){_inherits(ne,re);var ee=_createSuper(ne);function ne(ie){var oe;if(_classCallCheck$1(this,ne),oe=ee.call(this,ie),oe.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},oe.blockOptionHover=!1,oe.isComposing=!1,oe.commonProps=void 0,oe.initialTouchX=0,oe.initialTouchY=0,oe.instancePrefix="",oe.openAfterFocus=!1,oe.scrollToFocusedOptionOnUpdate=!1,oe.userIsDragging=void 0,oe.controlRef=null,oe.getControlRef=function(le){oe.controlRef=le},oe.focusedOptionRef=null,oe.getFocusedOptionRef=function(le){oe.focusedOptionRef=le},oe.menuListRef=null,oe.getMenuListRef=function(le){oe.menuListRef=le},oe.inputRef=null,oe.getInputRef=function(le){oe.inputRef=le},oe.focus=oe.focusInput,oe.blur=oe.blurInput,oe.onChange=function(le,ue){var he=oe.props,fe=he.onChange,me=he.name;ue.name=me,oe.ariaOnChange(le,ue),fe(le,ue)},oe.setValue=function(le,ue,he){var fe=oe.props,me=fe.closeMenuOnSelect,ge=fe.isMulti,ve=fe.inputValue;oe.onInputChange("",{action:"set-value",prevInputValue:ve}),me&&(oe.setState({inputIsHiddenAfterUpdate:!ge}),oe.onMenuClose()),oe.setState({clearFocusValueOnUpdate:!0}),oe.onChange(le,{action:ue,option:he})},oe.selectOption=function(le){var ue=oe.props,he=ue.blurInputOnSelect,fe=ue.isMulti,me=ue.name,ge=oe.state.selectValue,ve=fe&&oe.isOptionSelected(le,ge),ye=oe.isOptionDisabled(le,ge);if(ve){var be=oe.getOptionValue(le);oe.setValue(ge.filter(function(Ce){return oe.getOptionValue(Ce)!==be}),"deselect-option",le)}else if(!ye)fe?oe.setValue([].concat(_toConsumableArray(ge),[le]),"select-option",le):oe.setValue(le,"select-option");else{oe.ariaOnChange(le,{action:"select-option",option:le,name:me});return}he&&oe.blurInput()},oe.removeValue=function(le){var ue=oe.props.isMulti,he=oe.state.selectValue,fe=oe.getOptionValue(le),me=he.filter(function(ve){return oe.getOptionValue(ve)!==fe}),ge=valueTernary(ue,me,me[0]||null);oe.onChange(ge,{action:"remove-value",removedValue:le}),oe.focusInput()},oe.clearValue=function(){var le=oe.state.selectValue;oe.onChange(valueTernary(oe.props.isMulti,[],null),{action:"clear",removedValues:le})},oe.popValue=function(){var le=oe.props.isMulti,ue=oe.state.selectValue,he=ue[ue.length-1],fe=ue.slice(0,ue.length-1),me=valueTernary(le,fe,fe[0]||null);oe.onChange(me,{action:"pop-value",removedValue:he})},oe.getValue=function(){return oe.state.selectValue},oe.cx=function(){for(var le=arguments.length,ue=new Array(le),he=0;he<le;he++)ue[he]=arguments[he];return classNames.apply(void 0,[oe.props.classNamePrefix].concat(ue))},oe.getOptionLabel=function(le){return getOptionLabel(oe.props,le)},oe.getOptionValue=function(le){return getOptionValue(oe.props,le)},oe.getStyles=function(le,ue){var he=oe.props.unstyled,fe=defaultStyles[le](ue,he);fe.boxSizing="border-box";var me=oe.props.styles[le];return me?me(fe,ue):fe},oe.getClassNames=function(le,ue){var he,fe;return(he=(fe=oe.props.classNames)[le])===null||he===void 0?void 0:he.call(fe,ue)},oe.getElementId=function(le){return"".concat(oe.instancePrefix,"-").concat(le)},oe.getComponents=function(){return defaultComponents(oe.props)},oe.buildCategorizedOptions=function(){return buildCategorizedOptions(oe.props,oe.state.selectValue)},oe.getCategorizedOptions=function(){return oe.props.menuIsOpen?oe.buildCategorizedOptions():[]},oe.buildFocusableOptions=function(){return buildFocusableOptionsFromCategorizedOptions(oe.buildCategorizedOptions())},oe.getFocusableOptions=function(){return oe.props.menuIsOpen?oe.buildFocusableOptions():[]},oe.ariaOnChange=function(le,ue){oe.setState({ariaSelection:_objectSpread2({value:le},ue)})},oe.onMenuMouseDown=function(le){le.button===0&&(le.stopPropagation(),le.preventDefault(),oe.focusInput())},oe.onMenuMouseMove=function(le){oe.blockOptionHover=!1},oe.onControlMouseDown=function(le){if(!le.defaultPrevented){var ue=oe.props.openMenuOnClick;oe.state.isFocused?oe.props.menuIsOpen?le.target.tagName!=="INPUT"&&le.target.tagName!=="TEXTAREA"&&oe.onMenuClose():ue&&oe.openMenu("first"):(ue&&(oe.openAfterFocus=!0),oe.focusInput()),le.target.tagName!=="INPUT"&&le.target.tagName!=="TEXTAREA"&&le.preventDefault()}},oe.onDropdownIndicatorMouseDown=function(le){if(!(le&&le.type==="mousedown"&&le.button!==0)&&!oe.props.isDisabled){var ue=oe.props,he=ue.isMulti,fe=ue.menuIsOpen;oe.focusInput(),fe?(oe.setState({inputIsHiddenAfterUpdate:!he}),oe.onMenuClose()):oe.openMenu("first"),le.preventDefault()}},oe.onClearIndicatorMouseDown=function(le){le&&le.type==="mousedown"&&le.button!==0||(oe.clearValue(),le.preventDefault(),oe.openAfterFocus=!1,le.type==="touchend"?oe.focusInput():setTimeout(function(){return oe.focusInput()}))},oe.onScroll=function(le){typeof oe.props.closeMenuOnScroll=="boolean"?le.target instanceof HTMLElement&&isDocumentElement(le.target)&&oe.props.onMenuClose():typeof oe.props.closeMenuOnScroll=="function"&&oe.props.closeMenuOnScroll(le)&&oe.props.onMenuClose()},oe.onCompositionStart=function(){oe.isComposing=!0},oe.onCompositionEnd=function(){oe.isComposing=!1},oe.onTouchStart=function(le){var ue=le.touches,he=ue&&ue.item(0);he&&(oe.initialTouchX=he.clientX,oe.initialTouchY=he.clientY,oe.userIsDragging=!1)},oe.onTouchMove=function(le){var ue=le.touches,he=ue&&ue.item(0);if(he){var fe=Math.abs(he.clientX-oe.initialTouchX),me=Math.abs(he.clientY-oe.initialTouchY),ge=5;oe.userIsDragging=fe>ge||me>ge}},oe.onTouchEnd=function(le){oe.userIsDragging||(oe.controlRef&&!oe.controlRef.contains(le.target)&&oe.menuListRef&&!oe.menuListRef.contains(le.target)&&oe.blurInput(),oe.initialTouchX=0,oe.initialTouchY=0)},oe.onControlTouchEnd=function(le){oe.userIsDragging||oe.onControlMouseDown(le)},oe.onClearIndicatorTouchEnd=function(le){oe.userIsDragging||oe.onClearIndicatorMouseDown(le)},oe.onDropdownIndicatorTouchEnd=function(le){oe.userIsDragging||oe.onDropdownIndicatorMouseDown(le)},oe.handleInputChange=function(le){var ue=oe.props.inputValue,he=le.currentTarget.value;oe.setState({inputIsHiddenAfterUpdate:!1}),oe.onInputChange(he,{action:"input-change",prevInputValue:ue}),oe.props.menuIsOpen||oe.onMenuOpen()},oe.onInputFocus=function(le){oe.props.onFocus&&oe.props.onFocus(le),oe.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(oe.openAfterFocus||oe.props.openMenuOnFocus)&&oe.openMenu("first"),oe.openAfterFocus=!1},oe.onInputBlur=function(le){var ue=oe.props.inputValue;if(oe.menuListRef&&oe.menuListRef.contains(document.activeElement)){oe.inputRef.focus();return}oe.props.onBlur&&oe.props.onBlur(le),oe.onInputChange("",{action:"input-blur",prevInputValue:ue}),oe.onMenuClose(),oe.setState({focusedValue:null,isFocused:!1})},oe.onOptionHover=function(le){oe.blockOptionHover||oe.state.focusedOption===le||oe.setState({focusedOption:le})},oe.shouldHideSelectedOptions=function(){return shouldHideSelectedOptions(oe.props)},oe.onValueInputFocus=function(le){le.preventDefault(),le.stopPropagation(),oe.focus()},oe.onKeyDown=function(le){var ue=oe.props,he=ue.isMulti,fe=ue.backspaceRemovesValue,me=ue.escapeClearsValue,ge=ue.inputValue,ve=ue.isClearable,ye=ue.isDisabled,be=ue.menuIsOpen,Ce=ue.onKeyDown,Se=ue.tabSelectsValue,$e=ue.openMenuOnFocus,Te=oe.state,Ne=Te.focusedOption,Ie=Te.focusedValue,ke=Te.selectValue;if(!ye&&!(typeof Ce=="function"&&(Ce(le),le.defaultPrevented))){switch(oe.blockOptionHover=!0,le.key){case"ArrowLeft":if(!he||ge)return;oe.focusValue("previous");break;case"ArrowRight":if(!he||ge)return;oe.focusValue("next");break;case"Delete":case"Backspace":if(ge)return;if(Ie)oe.removeValue(Ie);else{if(!fe)return;he?oe.popValue():ve&&oe.clearValue()}break;case"Tab":if(oe.isComposing||le.shiftKey||!be||!Se||!Ne||$e&&oe.isOptionSelected(Ne,ke))return;oe.selectOption(Ne);break;case"Enter":if(le.keyCode===229)break;if(be){if(!Ne||oe.isComposing)return;oe.selectOption(Ne);break}return;case"Escape":be?(oe.setState({inputIsHiddenAfterUpdate:!1}),oe.onInputChange("",{action:"menu-close",prevInputValue:ge}),oe.onMenuClose()):ve&&me&&oe.clearValue();break;case" ":if(ge)return;if(!be){oe.openMenu("first");break}if(!Ne)return;oe.selectOption(Ne);break;case"ArrowUp":be?oe.focusOption("up"):oe.openMenu("last");break;case"ArrowDown":be?oe.focusOption("down"):oe.openMenu("first");break;case"PageUp":if(!be)return;oe.focusOption("pageup");break;case"PageDown":if(!be)return;oe.focusOption("pagedown");break;case"Home":if(!be)return;oe.focusOption("first");break;case"End":if(!be)return;oe.focusOption("last");break;default:return}le.preventDefault()}},oe.instancePrefix="react-select-"+(oe.props.instanceId||++instanceId),oe.state.selectValue=cleanValue(ie.value),ie.menuIsOpen&&oe.state.selectValue.length){var ae=oe.buildFocusableOptions(),ce=ae.indexOf(oe.state.selectValue[0]);oe.state.focusedOption=ae[ce]}return oe}return _createClass$1(ne,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&scrollIntoView(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(oe){var ae=this.props,ce=ae.isDisabled,le=ae.menuIsOpen,ue=this.state.isFocused;(ue&&!ce&&oe.isDisabled||ue&&le&&!oe.menuIsOpen)&&this.focusInput(),ue&&ce&&!oe.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!ue&&!ce&&oe.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(scrollIntoView(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(oe,ae){this.props.onInputChange(oe,ae)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(oe){var ae=this,ce=this.state,le=ce.selectValue,ue=ce.isFocused,he=this.buildFocusableOptions(),fe=oe==="first"?0:he.length-1;if(!this.props.isMulti){var me=he.indexOf(le[0]);me>-1&&(fe=me)}this.scrollToFocusedOptionOnUpdate=!(ue&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:he[fe]},function(){return ae.onMenuOpen()})}},{key:"focusValue",value:function(oe){var ae=this.state,ce=ae.selectValue,le=ae.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var ue=ce.indexOf(le);le||(ue=-1);var he=ce.length-1,fe=-1;if(ce.length){switch(oe){case"previous":ue===0?fe=0:ue===-1?fe=he:fe=ue-1;break;case"next":ue>-1&&ue<he&&(fe=ue+1);break}this.setState({inputIsHidden:fe!==-1,focusedValue:ce[fe]})}}}},{key:"focusOption",value:function(){var oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",ae=this.props.pageSize,ce=this.state.focusedOption,le=this.getFocusableOptions();if(le.length){var ue=0,he=le.indexOf(ce);ce||(he=-1),oe==="up"?ue=he>0?he-1:le.length-1:oe==="down"?ue=(he+1)%le.length:oe==="pageup"?(ue=he-ae,ue<0&&(ue=0)):oe==="pagedown"?(ue=he+ae,ue>le.length-1&&(ue=le.length-1)):oe==="last"&&(ue=le.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:le[ue],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(defaultTheme):_objectSpread2(_objectSpread2({},defaultTheme),this.props.theme):defaultTheme}},{key:"getCommonProps",value:function(){var oe=this.clearValue,ae=this.cx,ce=this.getStyles,le=this.getClassNames,ue=this.getValue,he=this.selectOption,fe=this.setValue,me=this.props,ge=me.isMulti,ve=me.isRtl,ye=me.options,be=this.hasValue();return{clearValue:oe,cx:ae,getStyles:ce,getClassNames:le,getValue:ue,hasValue:be,isMulti:ge,isRtl:ve,options:ye,selectOption:he,selectProps:me,setValue:fe,theme:this.getTheme()}}},{key:"hasValue",value:function(){var oe=this.state.selectValue;return oe.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var oe=this.props,ae=oe.isClearable,ce=oe.isMulti;return ae===void 0?ce:ae}},{key:"isOptionDisabled",value:function(oe,ae){return _isOptionDisabled(this.props,oe,ae)}},{key:"isOptionSelected",value:function(oe,ae){return _isOptionSelected(this.props,oe,ae)}},{key:"filterOption",value:function(oe,ae){return _filterOption(this.props,oe,ae)}},{key:"formatOptionLabel",value:function(oe,ae){if(typeof this.props.formatOptionLabel=="function"){var ce=this.props.inputValue,le=this.state.selectValue;return this.props.formatOptionLabel(oe,{context:ae,inputValue:ce,selectValue:le})}else return this.getOptionLabel(oe)}},{key:"formatGroupLabel",value:function(oe){return this.props.formatGroupLabel(oe)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var oe=this.props,ae=oe.isDisabled,ce=oe.isSearchable,le=oe.inputId,ue=oe.inputValue,he=oe.tabIndex,fe=oe.form,me=oe.menuIsOpen,ge=oe.required,ve=this.getComponents(),ye=ve.Input,be=this.state,Ce=be.inputIsHidden,Se=be.ariaSelection,$e=this.commonProps,Te=le||this.getElementId("input"),Ne=_objectSpread2(_objectSpread2(_objectSpread2({"aria-autocomplete":"list","aria-expanded":me,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":ge,role:"combobox"},me&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!ce&&{"aria-readonly":!0}),this.hasValue()?(Se==null?void 0:Se.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return ce?reactExports.createElement(ye,_extends$2({},$e,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:Te,innerRef:this.getInputRef,isDisabled:ae,isHidden:Ce,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:he,form:fe,type:"text",value:ue},Ne)):reactExports.createElement(DummyInput,_extends$2({id:Te,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:noop$2,onFocus:this.onInputFocus,disabled:ae,tabIndex:he,inputMode:"none",form:fe,value:""},Ne))}},{key:"renderPlaceholderOrValue",value:function(){var oe=this,ae=this.getComponents(),ce=ae.MultiValue,le=ae.MultiValueContainer,ue=ae.MultiValueLabel,he=ae.MultiValueRemove,fe=ae.SingleValue,me=ae.Placeholder,ge=this.commonProps,ve=this.props,ye=ve.controlShouldRenderValue,be=ve.isDisabled,Ce=ve.isMulti,Se=ve.inputValue,$e=ve.placeholder,Te=this.state,Ne=Te.selectValue,Ie=Te.focusedValue,ke=Te.isFocused;if(!this.hasValue()||!ye)return Se?null:reactExports.createElement(me,_extends$2({},ge,{key:"placeholder",isDisabled:be,isFocused:ke,innerProps:{id:this.getElementId("placeholder")}}),$e);if(Ce)return Ne.map(function(Oe,Be){var Me=Oe===Ie,Le="".concat(oe.getOptionLabel(Oe),"-").concat(oe.getOptionValue(Oe));return reactExports.createElement(ce,_extends$2({},ge,{components:{Container:le,Label:ue,Remove:he},isFocused:Me,isDisabled:be,key:Le,index:Be,removeProps:{onClick:function(){return oe.removeValue(Oe)},onTouchEnd:function(){return oe.removeValue(Oe)},onMouseDown:function(ze){ze.preventDefault()}},data:Oe}),oe.formatOptionLabel(Oe,"value"))});if(Se)return null;var De=Ne[0];return reactExports.createElement(fe,_extends$2({},ge,{data:De,isDisabled:be}),this.formatOptionLabel(De,"value"))}},{key:"renderClearIndicator",value:function(){var oe=this.getComponents(),ae=oe.ClearIndicator,ce=this.commonProps,le=this.props,ue=le.isDisabled,he=le.isLoading,fe=this.state.isFocused;if(!this.isClearable()||!ae||ue||!this.hasValue()||he)return null;var me={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return reactExports.createElement(ae,_extends$2({},ce,{innerProps:me,isFocused:fe}))}},{key:"renderLoadingIndicator",value:function(){var oe=this.getComponents(),ae=oe.LoadingIndicator,ce=this.commonProps,le=this.props,ue=le.isDisabled,he=le.isLoading,fe=this.state.isFocused;if(!ae||!he)return null;var me={"aria-hidden":"true"};return reactExports.createElement(ae,_extends$2({},ce,{innerProps:me,isDisabled:ue,isFocused:fe}))}},{key:"renderIndicatorSeparator",value:function(){var oe=this.getComponents(),ae=oe.DropdownIndicator,ce=oe.IndicatorSeparator;if(!ae||!ce)return null;var le=this.commonProps,ue=this.props.isDisabled,he=this.state.isFocused;return reactExports.createElement(ce,_extends$2({},le,{isDisabled:ue,isFocused:he}))}},{key:"renderDropdownIndicator",value:function(){var oe=this.getComponents(),ae=oe.DropdownIndicator;if(!ae)return null;var ce=this.commonProps,le=this.props.isDisabled,ue=this.state.isFocused,he={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return reactExports.createElement(ae,_extends$2({},ce,{innerProps:he,isDisabled:le,isFocused:ue}))}},{key:"renderMenu",value:function(){var oe=this,ae=this.getComponents(),ce=ae.Group,le=ae.GroupHeading,ue=ae.Menu,he=ae.MenuList,fe=ae.MenuPortal,me=ae.LoadingMessage,ge=ae.NoOptionsMessage,ve=ae.Option,ye=this.commonProps,be=this.state.focusedOption,Ce=this.props,Se=Ce.captureMenuScroll,$e=Ce.inputValue,Te=Ce.isLoading,Ne=Ce.loadingMessage,Ie=Ce.minMenuHeight,ke=Ce.maxMenuHeight,De=Ce.menuIsOpen,Oe=Ce.menuPlacement,Be=Ce.menuPosition,Me=Ce.menuPortalTarget,Le=Ce.menuShouldBlockScroll,je=Ce.menuShouldScrollIntoView,ze=Ce.noOptionsMessage,Ve=Ce.onMenuScrollToTop,He=Ce.onMenuScrollToBottom;if(!De)return null;var We=function(Kt,tn){var Xt=Kt.type,dn=Kt.data,nn=Kt.isDisabled,rn=Kt.isSelected,vn=Kt.label,yn=Kt.value,Sn=be===dn,kn=nn?void 0:function(){return oe.onOptionHover(dn)},Bn=nn?void 0:function(){return oe.selectOption(dn)},Dn="".concat(oe.getElementId("option"),"-").concat(tn),Je={id:Dn,onClick:Bn,onMouseMove:kn,onMouseOver:kn,tabIndex:-1};return reactExports.createElement(ve,_extends$2({},ye,{innerProps:Je,data:dn,isDisabled:nn,isSelected:rn,key:Dn,label:vn,type:Xt,value:yn,isFocused:Sn,innerRef:Sn?oe.getFocusedOptionRef:void 0}),oe.formatOptionLabel(Kt.data,"menu"))},Ye;if(this.hasOptions())Ye=this.getCategorizedOptions().map(function(Wt){if(Wt.type==="group"){var Kt=Wt.data,tn=Wt.options,Xt=Wt.index,dn="".concat(oe.getElementId("group"),"-").concat(Xt),nn="".concat(dn,"-heading");return reactExports.createElement(ce,_extends$2({},ye,{key:dn,data:Kt,options:tn,Heading:le,headingProps:{id:nn,data:Wt.data},label:oe.formatGroupLabel(Wt.data)}),Wt.options.map(function(rn){return We(rn,"".concat(Xt,"-").concat(rn.index))}))}else if(Wt.type==="option")return We(Wt,"".concat(Wt.index))});else if(Te){var Ue=Ne({inputValue:$e});if(Ue===null)return null;Ye=reactExports.createElement(me,ye,Ue)}else{var Ke=ze({inputValue:$e});if(Ke===null)return null;Ye=reactExports.createElement(ge,ye,Ke)}var Xe={minMenuHeight:Ie,maxMenuHeight:ke,menuPlacement:Oe,menuPosition:Be,menuShouldScrollIntoView:je},Vt=reactExports.createElement(MenuPlacer,_extends$2({},ye,Xe),function(Wt){var Kt=Wt.ref,tn=Wt.placerProps,Xt=tn.placement,dn=tn.maxHeight;return reactExports.createElement(ue,_extends$2({},ye,Xe,{innerRef:Kt,innerProps:{onMouseDown:oe.onMenuMouseDown,onMouseMove:oe.onMenuMouseMove,id:oe.getElementId("listbox")},isLoading:Te,placement:Xt}),reactExports.createElement(ScrollManager,{captureEnabled:Se,onTopArrive:Ve,onBottomArrive:He,lockEnabled:Le},function(nn){return reactExports.createElement(he,_extends$2({},ye,{innerRef:function(vn){oe.getMenuListRef(vn),nn(vn)},isLoading:Te,maxHeight:dn,focusedOption:be}),Ye)}))});return Me||Be==="fixed"?reactExports.createElement(fe,_extends$2({},ye,{appendTo:Me,controlElement:this.controlRef,menuPlacement:Oe,menuPosition:Be}),Vt):Vt}},{key:"renderFormField",value:function(){var oe=this,ae=this.props,ce=ae.delimiter,le=ae.isDisabled,ue=ae.isMulti,he=ae.name,fe=ae.required,me=this.state.selectValue;if(!(!he||le)){if(fe&&!this.hasValue())return reactExports.createElement(RequiredInput,{name:he,onFocus:this.onValueInputFocus});if(ue)if(ce){var ge=me.map(function(be){return oe.getOptionValue(be)}).join(ce);return reactExports.createElement("input",{name:he,type:"hidden",value:ge})}else{var ve=me.length>0?me.map(function(be,Ce){return reactExports.createElement("input",{key:"i-".concat(Ce),name:he,type:"hidden",value:oe.getOptionValue(be)})}):reactExports.createElement("input",{name:he,type:"hidden",value:""});return reactExports.createElement("div",null,ve)}else{var ye=me[0]?this.getOptionValue(me[0]):"";return reactExports.createElement("input",{name:he,type:"hidden",value:ye})}}}},{key:"renderLiveRegion",value:function(){var oe=this.commonProps,ae=this.state,ce=ae.ariaSelection,le=ae.focusedOption,ue=ae.focusedValue,he=ae.isFocused,fe=ae.selectValue,me=this.getFocusableOptions();return reactExports.createElement(LiveRegion,_extends$2({},oe,{id:this.getElementId("live-region"),ariaSelection:ce,focusedOption:le,focusedValue:ue,isFocused:he,selectValue:fe,focusableOptions:me}))}},{key:"render",value:function(){var oe=this.getComponents(),ae=oe.Control,ce=oe.IndicatorsContainer,le=oe.SelectContainer,ue=oe.ValueContainer,he=this.props,fe=he.className,me=he.id,ge=he.isDisabled,ve=he.menuIsOpen,ye=this.state.isFocused,be=this.commonProps=this.getCommonProps();return reactExports.createElement(le,_extends$2({},be,{className:fe,innerProps:{id:me,onKeyDown:this.onKeyDown},isDisabled:ge,isFocused:ye}),this.renderLiveRegion(),reactExports.createElement(ae,_extends$2({},be,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:ge,isFocused:ye,menuIsOpen:ve}),reactExports.createElement(ue,_extends$2({},be,{isDisabled:ge}),this.renderPlaceholderOrValue(),this.renderInput()),reactExports.createElement(ce,_extends$2({},be,{isDisabled:ge}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(oe,ae){var ce=ae.prevProps,le=ae.clearFocusValueOnUpdate,ue=ae.inputIsHiddenAfterUpdate,he=ae.ariaSelection,fe=ae.isFocused,me=ae.prevWasFocused,ge=oe.options,ve=oe.value,ye=oe.menuIsOpen,be=oe.inputValue,Ce=oe.isMulti,Se=cleanValue(ve),$e={};if(ce&&(ve!==ce.value||ge!==ce.options||ye!==ce.menuIsOpen||be!==ce.inputValue)){var Te=ye?buildFocusableOptions(oe,Se):[],Ne=le?getNextFocusedValue(ae,Se):null,Ie=getNextFocusedOption(ae,Te);$e={selectValue:Se,focusedOption:Ie,focusedValue:Ne,clearFocusValueOnUpdate:!1}}var ke=ue!=null&&oe!==ce?{inputIsHidden:ue,inputIsHiddenAfterUpdate:void 0}:{},De=he,Oe=fe&&me;return fe&&!Oe&&(De={value:valueTernary(Ce,Se,Se[0]||null),options:Se,action:"initial-input-focus"},Oe=!me),(he==null?void 0:he.action)==="initial-input-focus"&&(De=null),_objectSpread2(_objectSpread2(_objectSpread2({},$e),ke),{},{prevProps:oe,ariaSelection:De,prevWasFocused:Oe})}}]),ne}(reactExports.Component);Select$1.defaultProps=defaultProps;var StateManagedSelect=reactExports.forwardRef(function(re,ee){var ne=useStateManager(re);return reactExports.createElement(Select$1,_extends$2({ref:ee},ne))});const ReactSelect=StateManagedSelect,theme=re=>({...re,colors:{...re.colors,text:"var(--background-color)",primary:"var(--text-color)"}}),common={color:"var(--text-color)"},style$1={option:(re,{isSelected:ee})=>({...re,color:ee?"var(--background-color)":"var(--text-color)",backgroundColor:ee?"var(--text-color)":"var(--background-color)","&:hover":{color:"var(--background-color)",backgroundColor:"var(--gray-60)"}}),dropdownIndicator:re=>({...re,...common,opacity:.6,"&:hover":{color:"var(--text-color)",opacity:.8}}),placeholder:re=>({...re,color:"var(--gray-60)"}),indicatorSeparator:re=>({...re,backgroundColor:"var(--gray-60)"}),valueContainer:re=>({...re,padding:"0px"}),input:re=>({...re,...common}),control:(re,{isFocused:ee})=>({...re,...common,backgroundColor:"var(--background-color)",border:"none"}),menu:re=>({...re,backgroundColor:"var(--background-color)",zIndex:9999}),menuList:re=>({...re,"::-webkit-scrollbar":{width:"4px",height:"0px"},"::-webkit-scrollbar-track":{background:"var(--gray-20)"},"::-webkit-scrollbar-thumb":{background:"var(--gray-60)"},"::-webkit-scrollbar-thumb:hover":{background:"var(--gray-80)"}}),menuPortal:re=>({...re,zIndex:9999}),singleValue:re=>({...re,...common,overflow:"visible"})},Select=reactExports.forwardRef(({label:re,alt:ee,value:ne,search:ie=!1,defaultValue:oe,options:ae,onChange:ce=()=>null,disabled:le,children:ue,placeholder:he,className:fe,style:me,...ge},ve)=>{const[ye,be]=useControlled(ne,oe),Ce=reactExports.useCallback(Se=>{be(Se),ce(Se)},[ye]);return jsxs("label",{style:me,className:`${styles$o.label} ${fe||""}`,children:[jsx$1("p",{children:re}),jsx$1(ReactSelect,{inputRef:ve,"aria-label":ee||re,styles:style$1,theme,className:styles$o.container,classNamePrefix:"react_select",onChange:Ce,options:ae,disabled:le,placeholder:he,isSearchable:ie,menuPortalTarget:document.querySelector("body"),value:ye===void 0?"":ye,...ge}),ue]})}),ThemeSelection=re=>{const ee=useLocalSettings(ie=>ie.theme),ne=useLocalSettings(ie=>ie.setTheme);return jsx$1(Select,{alt:"theme selection",value:{label:THEMES[ee],value:ee},onChange:ie=>ne(ie.value,re.apply),options:THEME_OPTIONS,...re})};var Space_Separator=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,unicode={Space_Separator,ID_Start,ID_Continue},util={isSpaceSeparator(re){return typeof re=="string"&&unicode.Space_Separator.test(re)},isIdStartChar(re){return typeof re=="string"&&(re>="a"&&re<="z"||re>="A"&&re<="Z"||re==="$"||re==="_"||unicode.ID_Start.test(re))},isIdContinueChar(re){return typeof re=="string"&&(re>="a"&&re<="z"||re>="A"&&re<="Z"||re>="0"&&re<="9"||re==="$"||re==="_"||re==="‌"||re==="‍"||unicode.ID_Continue.test(re))},isDigit(re){return typeof re=="string"&&/[0-9]/.test(re)},isHexDigit(re){return typeof re=="string"&&/[0-9A-Fa-f]/.test(re)}};let source,parseState,stack,pos,line$1,column,token,key,root$5;var parse=function re(ee,ne){source=String(ee),parseState="start",stack=[],pos=0,line$1=1,column=0,token=void 0,key=void 0,root$5=void 0;do token=lex(),parseStates[parseState]();while(token.type!=="eof");return typeof ne=="function"?internalize({"":root$5},"",ne):root$5};function internalize(re,ee,ne){const ie=re[ee];if(ie!=null&&typeof ie=="object")if(Array.isArray(ie))for(let oe=0;oe<ie.length;oe++){const ae=String(oe),ce=internalize(ie,ae,ne);ce===void 0?delete ie[ae]:Object.defineProperty(ie,ae,{value:ce,writable:!0,enumerable:!0,configurable:!0})}else for(const oe in ie){const ae=internalize(ie,oe,ne);ae===void 0?delete ie[oe]:Object.defineProperty(ie,oe,{value:ae,writable:!0,enumerable:!0,configurable:!0})}return ne.call(re,ee,ie)}let lexState,buffer,doubleQuote,sign,c;function lex(){for(lexState="default",buffer="",doubleQuote=!1,sign=1;;){c=peek();const re=lexStates[lexState]();if(re)return re}}function peek(){if(source[pos])return String.fromCodePoint(source.codePointAt(pos))}function read(){const re=peek();return re===`
`?(line$1++,column=0):re?column+=re.length:column++,re&&(pos+=re.length),re}const lexStates={default(){switch(c){case"	":case"\v":case"\f":case" ":case" ":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":read();return;case"/":read(),lexState="comment";return;case void 0:return read(),newToken("eof")}if(util.isSpaceSeparator(c)){read();return}return lexStates[parseState]()},comment(){switch(c){case"*":read(),lexState="multiLineComment";return;case"/":read(),lexState="singleLineComment";return}throw invalidChar(read())},multiLineComment(){switch(c){case"*":read(),lexState="multiLineCommentAsterisk";return;case void 0:throw invalidChar(read())}read()},multiLineCommentAsterisk(){switch(c){case"*":read();return;case"/":read(),lexState="default";return;case void 0:throw invalidChar(read())}read(),lexState="multiLineComment"},singleLineComment(){switch(c){case`
`:case"\r":case"\u2028":case"\u2029":read(),lexState="default";return;case void 0:return read(),newToken("eof")}read()},value(){switch(c){case"{":case"[":return newToken("punctuator",read());case"n":return read(),literal("ull"),newToken("null",null);case"t":return read(),literal("rue"),newToken("boolean",!0);case"f":return read(),literal("alse"),newToken("boolean",!1);case"-":case"+":read()==="-"&&(sign=-1),lexState="sign";return;case".":buffer=read(),lexState="decimalPointLeading";return;case"0":buffer=read(),lexState="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":buffer=read(),lexState="decimalInteger";return;case"I":return read(),literal("nfinity"),newToken("numeric",1/0);case"N":return read(),literal("aN"),newToken("numeric",NaN);case'"':case"'":doubleQuote=read()==='"',buffer="",lexState="string";return}throw invalidChar(read())},identifierNameStartEscape(){if(c!=="u")throw invalidChar(read());read();const re=unicodeEscape();switch(re){case"$":case"_":break;default:if(!util.isIdStartChar(re))throw invalidIdentifier();break}buffer+=re,lexState="identifierName"},identifierName(){switch(c){case"$":case"_":case"‌":case"‍":buffer+=read();return;case"\\":read(),lexState="identifierNameEscape";return}if(util.isIdContinueChar(c)){buffer+=read();return}return newToken("identifier",buffer)},identifierNameEscape(){if(c!=="u")throw invalidChar(read());read();const re=unicodeEscape();switch(re){case"$":case"_":case"‌":case"‍":break;default:if(!util.isIdContinueChar(re))throw invalidIdentifier();break}buffer+=re,lexState="identifierName"},sign(){switch(c){case".":buffer=read(),lexState="decimalPointLeading";return;case"0":buffer=read(),lexState="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":buffer=read(),lexState="decimalInteger";return;case"I":return read(),literal("nfinity"),newToken("numeric",sign*(1/0));case"N":return read(),literal("aN"),newToken("numeric",NaN)}throw invalidChar(read())},zero(){switch(c){case".":buffer+=read(),lexState="decimalPoint";return;case"e":case"E":buffer+=read(),lexState="decimalExponent";return;case"x":case"X":buffer+=read(),lexState="hexadecimal";return}return newToken("numeric",sign*0)},decimalInteger(){switch(c){case".":buffer+=read(),lexState="decimalPoint";return;case"e":case"E":buffer+=read(),lexState="decimalExponent";return}if(util.isDigit(c)){buffer+=read();return}return newToken("numeric",sign*Number(buffer))},decimalPointLeading(){if(util.isDigit(c)){buffer+=read(),lexState="decimalFraction";return}throw invalidChar(read())},decimalPoint(){switch(c){case"e":case"E":buffer+=read(),lexState="decimalExponent";return}if(util.isDigit(c)){buffer+=read(),lexState="decimalFraction";return}return newToken("numeric",sign*Number(buffer))},decimalFraction(){switch(c){case"e":case"E":buffer+=read(),lexState="decimalExponent";return}if(util.isDigit(c)){buffer+=read();return}return newToken("numeric",sign*Number(buffer))},decimalExponent(){switch(c){case"+":case"-":buffer+=read(),lexState="decimalExponentSign";return}if(util.isDigit(c)){buffer+=read(),lexState="decimalExponentInteger";return}throw invalidChar(read())},decimalExponentSign(){if(util.isDigit(c)){buffer+=read(),lexState="decimalExponentInteger";return}throw invalidChar(read())},decimalExponentInteger(){if(util.isDigit(c)){buffer+=read();return}return newToken("numeric",sign*Number(buffer))},hexadecimal(){if(util.isHexDigit(c)){buffer+=read(),lexState="hexadecimalInteger";return}throw invalidChar(read())},hexadecimalInteger(){if(util.isHexDigit(c)){buffer+=read();return}return newToken("numeric",sign*Number(buffer))},string(){switch(c){case"\\":read(),buffer+=escape();return;case'"':if(doubleQuote)return read(),newToken("string",buffer);buffer+=read();return;case"'":if(!doubleQuote)return read(),newToken("string",buffer);buffer+=read();return;case`
`:case"\r":throw invalidChar(read());case"\u2028":case"\u2029":separatorChar(c);break;case void 0:throw invalidChar(read())}buffer+=read()},start(){switch(c){case"{":case"[":return newToken("punctuator",read())}lexState="value"},beforePropertyName(){switch(c){case"$":case"_":buffer=read(),lexState="identifierName";return;case"\\":read(),lexState="identifierNameStartEscape";return;case"}":return newToken("punctuator",read());case'"':case"'":doubleQuote=read()==='"',lexState="string";return}if(util.isIdStartChar(c)){buffer+=read(),lexState="identifierName";return}throw invalidChar(read())},afterPropertyName(){if(c===":")return newToken("punctuator",read());throw invalidChar(read())},beforePropertyValue(){lexState="value"},afterPropertyValue(){switch(c){case",":case"}":return newToken("punctuator",read())}throw invalidChar(read())},beforeArrayValue(){if(c==="]")return newToken("punctuator",read());lexState="value"},afterArrayValue(){switch(c){case",":case"]":return newToken("punctuator",read())}throw invalidChar(read())},end(){throw invalidChar(read())}};function newToken(re,ee){return{type:re,value:ee,line:line$1,column}}function literal(re){for(const ee of re){if(peek()!==ee)throw invalidChar(read());read()}}function escape(){switch(peek()){case"b":return read(),"\b";case"f":return read(),"\f";case"n":return read(),`
`;case"r":return read(),"\r";case"t":return read(),"	";case"v":return read(),"\v";case"0":if(read(),util.isDigit(peek()))throw invalidChar(read());return"\0";case"x":return read(),hexEscape();case"u":return read(),unicodeEscape();case`
`:case"\u2028":case"\u2029":return read(),"";case"\r":return read(),peek()===`
`&&read(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw invalidChar(read());case void 0:throw invalidChar(read())}return read()}function hexEscape(){let re="",ee=peek();if(!util.isHexDigit(ee)||(re+=read(),ee=peek(),!util.isHexDigit(ee)))throw invalidChar(read());return re+=read(),String.fromCodePoint(parseInt(re,16))}function unicodeEscape(){let re="",ee=4;for(;ee-- >0;){const ne=peek();if(!util.isHexDigit(ne))throw invalidChar(read());re+=read()}return String.fromCodePoint(parseInt(re,16))}const parseStates={start(){if(token.type==="eof")throw invalidEOF();push()},beforePropertyName(){switch(token.type){case"identifier":case"string":key=token.value,parseState="afterPropertyName";return;case"punctuator":pop();return;case"eof":throw invalidEOF()}},afterPropertyName(){if(token.type==="eof")throw invalidEOF();parseState="beforePropertyValue"},beforePropertyValue(){if(token.type==="eof")throw invalidEOF();push()},beforeArrayValue(){if(token.type==="eof")throw invalidEOF();if(token.type==="punctuator"&&token.value==="]"){pop();return}push()},afterPropertyValue(){if(token.type==="eof")throw invalidEOF();switch(token.value){case",":parseState="beforePropertyName";return;case"}":pop()}},afterArrayValue(){if(token.type==="eof")throw invalidEOF();switch(token.value){case",":parseState="beforeArrayValue";return;case"]":pop()}},end(){}};function push(){let re;switch(token.type){case"punctuator":switch(token.value){case"{":re={};break;case"[":re=[];break}break;case"null":case"boolean":case"numeric":case"string":re=token.value;break}if(root$5===void 0)root$5=re;else{const ee=stack[stack.length-1];Array.isArray(ee)?ee.push(re):Object.defineProperty(ee,key,{value:re,writable:!0,enumerable:!0,configurable:!0})}if(re!==null&&typeof re=="object")stack.push(re),Array.isArray(re)?parseState="beforeArrayValue":parseState="beforePropertyName";else{const ee=stack[stack.length-1];ee==null?parseState="end":Array.isArray(ee)?parseState="afterArrayValue":parseState="afterPropertyValue"}}function pop(){stack.pop();const re=stack[stack.length-1];re==null?parseState="end":Array.isArray(re)?parseState="afterArrayValue":parseState="afterPropertyValue"}function invalidChar(re){return syntaxError(re===void 0?`JSON5: invalid end of input at ${line$1}:${column}`:`JSON5: invalid character '${formatChar(re)}' at ${line$1}:${column}`)}function invalidEOF(){return syntaxError(`JSON5: invalid end of input at ${line$1}:${column}`)}function invalidIdentifier(){return column-=5,syntaxError(`JSON5: invalid identifier character at ${line$1}:${column}`)}function separatorChar(re){console.warn(`JSON5: '${formatChar(re)}' in strings is not valid ECMAScript; consider escaping`)}function formatChar(re){const ee={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(ee[re])return ee[re];if(re<" "){const ne=re.charCodeAt(0).toString(16);return"\\x"+("00"+ne).substring(ne.length)}return re}function syntaxError(re){const ee=new SyntaxError(re);return ee.lineNumber=line$1,ee.columnNumber=column,ee}var stringify=function re(ee,ne,ie){const oe=[];let ae="",ce,le,ue="",he;if(ne!=null&&typeof ne=="object"&&!Array.isArray(ne)&&(ie=ne.space,he=ne.quote,ne=ne.replacer),typeof ne=="function")le=ne;else if(Array.isArray(ne)){ce=[];for(const be of ne){let Ce;typeof be=="string"?Ce=be:(typeof be=="number"||be instanceof String||be instanceof Number)&&(Ce=String(be)),Ce!==void 0&&ce.indexOf(Ce)<0&&ce.push(Ce)}}return ie instanceof Number?ie=Number(ie):ie instanceof String&&(ie=String(ie)),typeof ie=="number"?ie>0&&(ie=Math.min(10,Math.floor(ie)),ue="          ".substr(0,ie)):typeof ie=="string"&&(ue=ie.substr(0,10)),fe("",{"":ee});function fe(be,Ce){let Se=Ce[be];switch(Se!=null&&(typeof Se.toJSON5=="function"?Se=Se.toJSON5(be):typeof Se.toJSON=="function"&&(Se=Se.toJSON(be))),le&&(Se=le.call(Ce,be,Se)),Se instanceof Number?Se=Number(Se):Se instanceof String?Se=String(Se):Se instanceof Boolean&&(Se=Se.valueOf()),Se){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof Se=="string")return me(Se);if(typeof Se=="number")return String(Se);if(typeof Se=="object")return Array.isArray(Se)?ye(Se):ge(Se)}function me(be){const Ce={"'":.1,'"':.2},Se={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let $e="";for(let Ne=0;Ne<be.length;Ne++){const Ie=be[Ne];switch(Ie){case"'":case'"':Ce[Ie]++,$e+=Ie;continue;case"\0":if(util.isDigit(be[Ne+1])){$e+="\\x00";continue}}if(Se[Ie]){$e+=Se[Ie];continue}if(Ie<" "){let ke=Ie.charCodeAt(0).toString(16);$e+="\\x"+("00"+ke).substring(ke.length);continue}$e+=Ie}const Te=he||Object.keys(Ce).reduce((Ne,Ie)=>Ce[Ne]<Ce[Ie]?Ne:Ie);return $e=$e.replace(new RegExp(Te,"g"),Se[Te]),Te+$e+Te}function ge(be){if(oe.indexOf(be)>=0)throw TypeError("Converting circular structure to JSON5");oe.push(be);let Ce=ae;ae=ae+ue;let Se=ce||Object.keys(be),$e=[];for(const Ne of Se){const Ie=fe(Ne,be);if(Ie!==void 0){let ke=ve(Ne)+":";ue!==""&&(ke+=" "),ke+=Ie,$e.push(ke)}}let Te;if($e.length===0)Te="{}";else{let Ne;if(ue==="")Ne=$e.join(","),Te="{"+Ne+"}";else{let Ie=`,
`+ae;Ne=$e.join(Ie),Te=`{
`+ae+Ne+`,
`+Ce+"}"}}return oe.pop(),ae=Ce,Te}function ve(be){if(be.length===0)return me(be);const Ce=String.fromCodePoint(be.codePointAt(0));if(!util.isIdStartChar(Ce))return me(be);for(let Se=Ce.length;Se<be.length;Se++)if(!util.isIdContinueChar(String.fromCodePoint(be.codePointAt(Se))))return me(be);return be}function ye(be){if(oe.indexOf(be)>=0)throw TypeError("Converting circular structure to JSON5");oe.push(be);let Ce=ae;ae=ae+ue;let Se=[];for(let Te=0;Te<be.length;Te++){const Ne=fe(String(Te),be);Se.push(Ne!==void 0?Ne:"null")}let $e;if(Se.length===0)$e="[]";else if(ue==="")$e="["+Se.join(",")+"]";else{let Te=`,
`+ae,Ne=Se.join(Te);$e=`[
`+ae+Ne+`,
`+Ce+"]"}return oe.pop(),ae=Ce,$e}};const JSON5={parse,stringify};var lib=JSON5;const Settings=()=>{const[re,ee]=reactExports.useState(!1);reactExports.useEffect(()=>{async function $e(){const Ne=await(await fetch(`${BANNER_URL}/banner_config.json`)).text(),Ie=lib.parse(Ne);ee(Ie.enable===1)}try{$e()}catch(Te){console.error(Te)}},[]);const[ne,ie,oe,ae,ce,le,ue,he,fe,me,ge,ve,ye,be,Ce,Se]=useLocalSettings($e=>[$e.nsfwFriendly,$e.setNsfwFriendly,$e.photosensitiveFriendly,$e.setPhotosensitiveFriendly,$e.startFeed,$e.setStartFeed,$e.rpcNode,$e.setRpcNode,$e.customRpcNode,$e.setCustomRpcNode,$e.tilted,$e.setTilted,$e.imgproxy,$e.setImgproxy,$e.has_seen_banner,$e.setHasSeenBanner]);return jsxs(Page,{children:[jsxs("div",{className:styles$p.info,children:[jsx$1("h1",{children:"Local Settings"}),jsx$1("p",{children:"Those settings are non portable and only stored in your current browser cache."}),jsx$1(Line,{className:styles$p.title_line})]}),jsx$1("div",{className:styles$p.localSettings,children:jsxs("div",{className:styles$p.fields,children:[jsx$1("p",{children:jsx$1("strong",{children:"Feed preferences"})}),jsx$1(Checkbox$1,{alt:`click to ${ne?"disable":"enable"} the blurring of NSFW tokens on feeds`,checked:ne,onCheck:ie,label:"Allow NSFW on feeds"}),jsx$1(Checkbox$1,{alt:`click to ${oe?"disable":"enable"} the blurring of photosensitive tokens on feeds`,checked:oe,onCheck:ae,label:"Allow Photosensitive on feeds"}),jsx$1(Select,{label:"Start Feed",value:{label:ce.replace(/[^\x00-\xFF]/g,""),value:ce},options:FEED_LIST.map($e=>({label:$e.replace(/[^\x00-\xFF]/g,""),value:$e})),onChange:$e=>{le($e.value)}}),jsx$1(Line,{}),jsx$1(ThemeSelection,{label:"Theme"}),jsx$1(Line,{}),jsx$1(Select,{label:"RPC Node",value:{label:ue,value:ue},options:rpc_nodes.map($e=>({label:$e,value:$e})),onChange:$e=>{he($e.value)}}),ue==="custom"&&jsx$1(Input$2,{name:"custom-rpc",value:fe,onChange:me,placeholder:"url to a RPC node",label:"Custom RPC node"}),jsx$1(Line,{}),jsx$1(Checkbox$1,{alt:`click to ${ge?"disable":"enable"} fool around (a throwback of the 2023 april fool)`,title:`click to ${ge?"disable":"enable"} fool around (a throwback of the 2023 april fool)`,checked:ge,onCheck:ve,className:"no-fool",label:"Fool Around"}),jsx$1(Line,{}),jsx$1(Checkbox$1,{alt:`click to ${ye?"disable":"enable"} imgproxy thumbnails. Not using imgproxy will load fullsize images from ipfs directly instead (performance penalty)`,title:`click to ${ye?"disable":"enable"} imgproxy thumbnails. Not using imgproxy will load fullsize images from ipfs directly instead (performance penalty)`,checked:ye,onCheck:be,initial:!0,label:"Use thumbnails to increase performance"}),re&&jsx$1(Checkbox$1,{alt:`click to ${Se?"disable":"enable"} last event banner (this is automatically reset for you on new announcements)`,title:`click to ${Se?"disable":"enable"} last event banner (this is automatically reset for you on new announcements)`,checked:Ce,onCheck:Se,label:"Hide banner for last announcement"})]})})]})};async function uploadFileToIPFSProxy$1(re,ee="Preparing OBJKT"){const ne=useModalStore.getState().step,ie=useModalStore.getState().show,oe=new FormData,ae=mime.lookup(re.path);if(!ae){ie("Filetype Error",`Could not determine the type from file ${re.path}`);return}const ce=re.size?` (${(re.size/1e6).toFixed(1)}mb)`:"";return ne(ee,`uploading ${re.path}${ce} as ${ae}`),console.debug(`uploading ${re.path} as ${ae}`),oe.append("asset",new File([re.blob],re.path,{type:ae})),(await axios.post("https://ipfsproxy.teia.rocks/single",oe,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:ue=>{const he=Number(ue.loaded/ue.total*100).toFixed(1);ne(ee,`uploading ${re.path}${ce} as ${ae}
## ${he}%`)}})).data.cid}async function uploadMultipleFilesToIPFSProxy(re){const ee=new FormData,ne=useModalStore.getState().step;return ne("Preparing OBJKT","uploading multiple files"),re.forEach(oe=>{const ae=mime.lookup(oe.path);console.debug(`uploading ${oe.path} as ${ae}`),ee.append("assets",new File([oe.blob],encodeURI(oe.path),{type:ae||""}))}),(await axios.post("https://ipfsproxy.teia.rocks/multiple",ee,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:oe=>{const ae=Number(oe.loaded/oe.total*100).toFixed(1);ne("Preparing OBJKT",`uploading multiple files
## ${ae}%`)}})).data.cid}const isDoubleMint=async re=>{const ee=distExports.gql`
    query uriQuery($address: String!, $ids: [String!] = "") {
      tokens(
        order_by: { minted_at: desc }
        where: {
          editions: { _gt: "0" }
          metadata_status: { _eq: "processed" }
          artifact_uri: { _in: $ids }
          artist_address: { _eq: $address }
        }
      ) {
        token_id
      }
    }
  `,{proxyAddress:ne,address:ie}=useUserStore.getState(),{show:oe}=useModalStore.getState(),{errors:ae,data:ce}=await fetchGraphQL(ee,"uriQuery",{address:ne||ie,ids:[re]});return console.debug(ce),ae?(oe(`GraphQL Error: ${JSON.stringify(ae)}`),!0):ce?!ce.tokens||ce.tokens.every(({editions:ue})=>ue===0)?!1:(oe(`Duplicate mint detected: [#${ce.tokens[0].token_id}](/objkt/${ce.tokens[0].token_id}) is already minted`),!0):!1},prepareFile=async({name:re,description:ee,tags:ne,address:ie,file:oe,cover:ae,thumbnail:ce,rights:le,rightsUri:ue,language:he,accessibility:fe,contentRating:me,formats:ge})=>{var Ie,ke,De,Oe,Be,Me,Le;const ve=useModalStore.getState().step,ye=useModalStore.getState().show,be=!oe.mimeType.startsWith("image");if(!((Ie=oe.file)!=null&&Ie.name)){console.error("Incomplete item received",oe),ye("No name for file","");return}const Ce=await uploadFileToIPFSProxy$1({blob:new Blob([oe.buffer]),path:oe.file.name,size:(ke=oe.file)==null?void 0:ke.size});ve("Preparing OBJKT",`Successfully uploaded file to IPFS: ${Ce}`);const Se=`ipfs://${Ce}`;if(await isDoubleMint(Se))throw Error("Double Mint",{cause:"You already minted the same token."});ge.length>0&&(ge[0].uri=Se,console.debug("file format",ge[0]));let $e=Se;if(be&&ae){const je=await uploadFileToIPFSProxy$1({blob:new Blob([ae.buffer]),path:`cover_${ae.file?ae.file.name:(De=ae.format)==null?void 0:De.fileName}`,size:(Oe=ae.file)==null?void 0:Oe.size});if(ve("Preparing OBJKT",`Successfully uploaded cover to IPFS: ${je}`),console.debug(`Successfully uploaded cover to IPFS: ${je}`),$e=`ipfs://${je}`,ae!=null&&ae.format){const ze=JSON.parse(JSON.stringify(ae.format));ze.uri=$e,ze.fileName=`cover_${ze.fileName}`,ge.push(ze),console.debug("cover format",ze)}}let Te=IPFS_DEFAULT_THUMBNAIL_URI;if(ce&&((Be=ce.file)==null?void 0:Be.type)==="image/gif"){if(console.debug("GIF format detected, we will use the artifact's cid as the thumbnail to avoid uploading twice"),Te=`${Se}`,ce!=null&&ce.format){const je=JSON.parse(JSON.stringify(ce.format));je.uri=Te,je.fileName=`thumbnail_${je.fileName}`,ge.push(je),console.debug("thumbnail format",je)}}else if(ce){if(Te=`ipfs://${await uploadFileToIPFSProxy$1({blob:new Blob([ce.buffer]),path:`thumbnail_${ce.file?ce.file.name:(Me=ce.format)==null?void 0:Me.fileName}`,size:(Le=ce.file)==null?void 0:Le.size})}`,ce!=null&&ce.format){const ze=JSON.parse(JSON.stringify(ce.format));ze.uri=Te,ze.fileName=`thumbnail_${ze.fileName}`,ge.push(ze),console.debug("thumbnail format",ze)}}else console.debug("Using default thumbnail CID");const Ne=await buildMetadataFile({name:re,description:ee,tags:ne,uri:Se,address:ie,displayUri:$e,thumbnailUri:Te,rights:le,rightsUri:ue,language:he,accessibility:fe,contentRating:me,formats:ge});return ve("Preparing OBJKT","Uploading metadata file"),console.debug("Uploading metadata file:",JSON.parse(Ne)),await uploadFileToIPFSProxy$1({blob:new Blob([buffer$2.Buffer.from(Ne)]),path:"metadata.json"})},prepareDirectory=async({name:re,description:ee,tags:ne,address:ie,files:oe,cover:ae,thumbnail:ce,generateDisplayUri:le,rights:ue,rightsUri:he,language:fe,accessibility:me,contentRating:ge,formats:ve})=>{var Ne,Ie,ke;const ye=useModalStore.getState().step,be=await uploadFilesToDirectory(oe);ye("Preparing OBJKT",`Successfully uploaded directory to IPFS: ${be.directory}`),console.debug("Successfully uploaded directory to IPFS:",be.directory);const Ce=`ipfs://${be.directory}`;ve.length>0&&(ve[0].uri=Ce,console.debug("file format",ve[0]));let Se="";if(le){const De=await uploadFileToIPFSProxy$1({blob:new Blob([ae.buffer]),path:`cover_${((Ne=ae.format)==null?void 0:Ne.fileName)||"format"}`});if(ye("Preparing OBJKT","Successfully uploaded cover to IPFS"),console.debug(`Successfully uploaded cover to IPFS: ${De}`),Se=`ipfs://${De}`,ae!=null&&ae.format){const Oe=JSON.parse(JSON.stringify(ae.format));Oe.uri=Se,Oe.fileName=`cover_${Oe.fileName}`,ve.push(Oe),console.debug("cover format",Oe)}}let $e=IPFS_DEFAULT_THUMBNAIL_URI;if(le&&ce&&($e=`ipfs://${await uploadFileToIPFSProxy$1({blob:new Blob([ce.buffer]),path:((Ie=ce.format)==null?void 0:Ie.fileName)||ce.title||((ke=ce.file)==null?void 0:ke.name)||""})}`,ce!=null&&ce.format)){const Oe=JSON.parse(JSON.stringify(ce.format));Oe.uri=$e,Oe.fileName=`thumbnail_${Oe.fileName}`,ve.push(Oe),console.debug("thumbnail format",Oe)}const Te=await buildMetadataFile({name:re,description:ee,tags:ne,uri:Ce,address:ie,displayUri:Se,thumbnailUri:$e,rights:ue,rightsUri:he,language:fe,accessibility:me,contentRating:ge,formats:ve});return console.debug("Uploading metadata file:",JSON.parse(Te)),await uploadFileToIPFSProxy$1({blob:new Blob([buffer$2.Buffer.from(Te)]),path:"metadata.json"})};function not_directory(re){return re.blob.type!==MIMETYPE.DIRECTORY}async function uploadFilesToDirectory(re){return console.debug("uploadFilesToDirectory",re),re=re.filter(not_directory),{directory:await uploadMultipleFilesToIPFSProxy(re)}}async function buildMetadataFile({name:re,description:ee,tags:ne,uri:ie,address:oe,displayUri:ae="",thumbnailUri:ce=IPFS_DEFAULT_THUMBNAIL_URI,rights:le,rightsUri:ue,language:he,accessibility:fe,contentRating:me,formats:ge}){const ve={name:re,description:ee,tags:ne?ne.replace(/\s/g,"").split(","):[],symbol:"OBJKT",artifactUri:ie,displayUri:ae,thumbnailUri:ce,creators:[oe],formats:ge,decimals:0,isBooleanAmount:!1,shouldPreferSymbol:!1,rights:le,date:new Date().toISOString(),mintingTool:"https://teia.art/mint"};if(fe&&(ve.accessibility=fe),me&&(ve.contentRating=me),le==="custom"&&ue){const ye=await uploadFileToIPFSProxy$1({blob:new Blob([buffer$2.Buffer.from(JSON.stringify(ue))]),path:"license.json"});ve.rightsUri=`ipfs://${ye}`}return he!=null&&(ve.language=he),JSON.stringify(ve)}const query_tz=distExports.gql`
  query addressQuery($address: String!) {
    teia_users(where: { user_address: { _eq: $address } }) {
      user_address
      name
      metadata {
        data
      }
    }
  }
`,query_name_exist=distExports.gql`
  query nameExists($name: String!) {
    teia_users(where: { name: { _eq: $name } }) {
      user_address
    }
  }
`;async function fetchTz(re){const{errors:ee,data:ne}=await fetchGraphQL(query_tz,"addressQuery",{address:re});return ee&&console.error(ee),get$5(ne,"teia_users.0",{user_address:re})}const Subjkt=()=>{const[re,ee]=reactExports.useState(!0),[ne,ie]=reactExports.useState(""),[oe,ae]=reactExports.useState(""),[ce,le]=reactExports.useState(""),[ue,he]=reactExports.useState(),[fe,me]=reactExports.useState(""),ge="Editing Profile",[ve,ye,be]=useUserStore(Ie=>[Ie.address,Ie.proxyAddress,Ie.registry]),Ce=useModalStore(Ie=>Ie.show),Se=ye||ve;reactExports.useEffect(()=>{(async()=>{var ke,De;if(Se){const Oe=await fetchTz(Se);if(console.debug("Subjkt Infos:",Oe),Oe){const{metadata:Be,name:Me}=Oe;Me&&ie(Me),Be&&!_$1.isEmpty(Be==null?void 0:Be.data)&&((ke=Be==null?void 0:Be.data)!=null&&ke.description&&ae(Be.data.description),(De=Be==null?void 0:Be.data)!=null&&De.identicon&&le(Be.data.identicon))}}ee(!1)})()},[]);const $e=async()=>{if(!ne)return!1;const{errors:Ie,data:ke}=await fetchGraphQL(query_name_exist,"nameExists",{name:ne});if(Ie)return console.error(Ie),!1;if(ke.teia_users.length===0)return!1;const De=ke.teia_users[0];return De.user_address===ve||De.user_address===ye?!1:(console.error(`name exists and is registered to ${De.user_address}`),Ce("Subjkt",`The provided name is already registered by ${De.user_address}`),!0)},Te=async()=>{if(await $e())return;let Ie=ce;const ke=useModalStore.getState().show,De=useModalStore.getState().step;if(De(ge,"uploading SUBJKT"),ue){const[Me]=ue;De(ge,"uploading identicon");const Le=buffer$2.Buffer.from(await Me.arrayBuffer());Ie=`ipfs://${await uploadFileToIPFSProxy$1({blob:new Blob([Le]),path:Me.name},ge)}`}const Oe=JSON.stringify({description:oe,identicon:Ie});De(ge,"uploading metadatas"),console.debug("Uploading metadatas file to IPFS",JSON.parse(Oe));const Be=await uploadFileToIPFSProxy$1({blob:new Blob([buffer$2.Buffer.from(Oe)]),path:"profile_metadata.json"});if(Be==null){ke(`${ge} (Error)`,"Error uploading SUBJKT"),console.error("Error uploading metadatas file to IPFS");return}console.debug("Uploaded metadatas file to IPFS",Be),De(ge,"Minting SUBJKT"),le(Ie),await be(ne,Be)},Ne=async Ie=>{if(Ie.target.files){const[ke]=Ie.target.files;me(URL.createObjectURL(ke)),he(Ie.target.files)}};return!re&&jsxs(Page,{children:[jsx$1("h1",{children:"Subjkt Settings"}),jsx$1(Line,{className:styles$p.title_line}),jsxs("div",{className:styles$p.subjkt_editor,children:[jsxs("div",{className:styles$p.fields,children:[jsx$1(Identicon,{className:styles$p.identicon,address:ve,logo:fe||ce}),jsx$1("input",{type:"file",onChange:Ne,title:"avatar file"})]}),jsxs("div",{className:styles$p.fields,children:[jsx$1(Input$2,{name:"subjkt",value:ne,onChange:ie,onBlur:Ie=>{/[^A-Za-z0-9-._]/.test(Ie.target.value)&&Ce("Subjkt contains invalid characters. This field can only contain: letters (a-z A-Z), numbers (0-9), . (dot), - (dash), _ (underscore)")},placeholder:"can contain letters (a-z A-Z), numbers (0-9), . (dot), - (dash), _ (underscore)",label:"Username",pattern:"^[A-Za-z0-9-._]*$"}),jsx$1(Input$2,{name:"description",value:oe,onChange:ae,placeholder:"(Max length 500 characters)",label:"Description"})]})]}),jsx$1(Button,{shadow_box:!0,onClick:Te,children:"Save Profile"}),jsx$1("div",{style:{display:"inline"},children:jsxs("p",{style:{paddingTop:"7.5px"},children:[jsx$1("span",{children:"Link your Twitter, Discord, GitHub, and website with "}),jsx$1("span",{children:jsx$1("a",{style:{fontWeight:"bold"},target:"_blank",href:"https://profiles.tzkt.io",rel:"noreferrer",children:"TzKT Profiles"})})]})})]})},container$b="_container_1nrpp_216",headline$1="_headline_1nrpp_221",loading_containter$1="_loading_containter_1nrpp_228",section$3="_section_1nrpp_235",section_title$2="_section_title_1nrpp_260",proposal="_proposal_1nrpp_264",proposal_id="_proposal_id_1nrpp_274",proposal_title="_proposal_title_1nrpp_281",proposal_information="_proposal_information_1nrpp_286",user_vote$1="_user_vote_1nrpp_297",proposal_buttons="_proposal_buttons_1nrpp_303",styles$n={container:container$b,headline:headline$1,loading_containter:loading_containter$1,section:section$3,section_title:section_title$2,proposal,proposal_id,proposal_title,proposal_information,user_vote:user_vote$1,proposal_buttons};function LoadingDaoMessage({message:re}){return jsx$1("div",{className:styles$n.loading_containter,children:jsx$1(Loading,{message:re??"Loading DAO information"})})}const TABS$3=[{title:"Parameters",to:""},{title:"Proposals",to:"proposals"},{title:"Submit",to:"submit",private:!0}];function DAO(){const[re]=useStorage(DAO_GOVERNANCE_CONTRACT),[ee]=useDaoGovernanceParameters(re),[ne]=useDaoProposals(re),[ie]=useDaoRepresentatives(re),oe=useUserStore(le=>le.address),ae=ie==null?void 0:ie[oe],[ce]=useDaoTokenBalance(oe);return jsx$1(Page,{title:"Teia DAO",children:jsxs("div",{className:styles$n.container,children:[jsx$1("h1",{className:styles$n.headline,children:"Teia DAO"}),!ee||!ne?jsx$1(LoadingDaoMessage,{}):jsxs(Fragment,{children:[jsx$1(Tabs,{tabs:TABS$3,filter:le=>ce===0&&!ae&&le.private?null:le}),jsx$1(Outlet,{})]})]})})}async function downloadJsonFileFromIpfs(re){const ee=await fetch(CIDToURL(re));return ee.ok||console.error(`There was a problem downloading a file from ipfs with cid ${re}`),ee.json()}async function uploadFileToIPFSProxy(re){var ie;const ee=new FormData;ee.append("asset",re);const ne=await axios.post("https://ipfsproxy.teia.rocks/single",ee,{headers:{"Content-Type":"multipart/form-data"}});return(ie=ne==null?void 0:ne.data)==null?void 0:ie.cid}const useDaoStore=create$2()(subscribeWithSelector(persist((re,ee)=>({voteProposal:async(ne,ie,oe,ae)=>{const ce=useUserStore.getState().handleOp,le=useModalStore.getState().showError,ue=useModalStore.getState().step,he="Vote DAO proposal";ue(he,"Waiting for confirmation",!0);try{const fe=await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT),me={proposal_id:ne,vote:{[ie]:[["unit"]]},max_checkpoints:oe},ge=fe.methodsObject.token_vote(me),ve=await ce(ge,he);return ae==null||ae(),ve}catch(fe){le(he,fe)}},voteProposalAsRepresentative:async(ne,ie,oe)=>{const ae=useUserStore.getState().handleOp,ce=useModalStore.getState().showError,le=useModalStore.getState().step,ue="Vote DAO proposal as representative";le(ue,"Waiting for confirmation",!0);try{const he=await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT),fe={proposal_id:ne,vote:{[ie]:[["unit"]]}},me=he.methodsObject.representatives_vote(fe),ge=await ae(me,ue);return oe==null||oe(),ge}catch(he){ce(ue,he)}},cancelProposal:async(ne,ie,oe)=>{const ae=useUserStore.getState().handleOp,ce=useModalStore.getState().showError,le=useModalStore.getState().step,ue="Cancel DAO proposal";le(ue,"Waiting for confirmation",!0);try{const fe=(await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT)).methods.cancel_proposal(ne,ie),me=await ae(fe,ue);return oe==null||oe(),me}catch(he){ce(ue,he)}},evaluateVotingResult:async(ne,ie)=>{const oe=useUserStore.getState().handleOp,ae=useModalStore.getState().showError,ce=useModalStore.getState().step,le="Evaluate DAO proposal voting result";ce(le,"Waiting for confirmation",!0);try{const he=(await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT)).methods.evaluate_voting_result(ne),fe=await oe(he,le);return ie==null||ie(),fe}catch(ue){ae(le,ue)}},executeProposal:async(ne,ie)=>{const oe=useUserStore.getState().handleOp,ae=useModalStore.getState().showError,ce=useModalStore.getState().step,le="Execute DAO proposal";ce(le,"Waiting for confirmation",!0);try{const he=(await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT)).methods.execute_proposal(ne),fe=await oe(he,le);return ie==null||ie(),fe}catch(ue){ae(le,ue)}},createProposal:async(ne,ie,oe,ae)=>{const ce=useUserStore.getState().address,le=useUserStore.getState().handleOp,ue=useModalStore.getState().show,he=useModalStore.getState().showError,fe=useModalStore.getState().step,me="Submit DAO proposal";if(!ne||ne.length<10){ue(me,"The proposal title must be at least 10 characters long");return}if(!ie){ue(me,"The proposal description needs to be uploaded first to IPFS");return}fe(me,"Waiting for confirmation",!0);try{const ge=await Tezos.wallet.at(DAO_GOVERNANCE_CONTRACT),ve=await Tezos.wallet.at(DAO_TOKEN_CONTRACT),ye={owner:ce,operator:DAO_GOVERNANCE_CONTRACT,token_id:0},be={title:char2Bytes(ne),description:char2Bytes(`ipfs://${ie}`),kind:oe};let Ce=Tezos.wallet.batch();Ce=Ce.withContractCall(ve.methods.update_operators([{add_operator:ye}])),Ce=Ce.withContractCall(ge.methodsObject.create_proposal(be)),Ce=Ce.withContractCall(ve.methods.update_operators([{remove_operator:ye}]));const Se=await le(Ce,me);return ae==null||ae(),Se}catch(ge){he(me,ge)}},createTextProposal:async(ne,ie,oe)=>{const ae={text:[["unit"]]};return ee().createProposal(ne,ie,ae,oe)},createTransferMutezProposal:async(ne,ie,oe,ae)=>{const ce=useModalStore.getState().show;for(const{destination:le}of oe){if(!(le&&validateAddress(le)===3)){ce("Submit DAO proposal",`The provided address is not a valid tezos address: ${le}`);return}const ue={transfer_mutez:oe};return ee().createProposal(ne,ie,ue,ae)}},createTransferTokenProposal:async(ne,ie,oe,ae,ce,le)=>{const ue=useModalStore.getState().show;if(!(oe&&validateAddress(oe)===3)){ue("Submit DAO proposal",`The provided token contract address is not a valid tezos address: ${oe}`);return}for(const{destination:fe}of ce)if(!(fe&&validateAddress(fe)===3)){ue("Submit DAO proposal",`The provided address is not a valid tezos address: ${fe}`);return}const he={transfer_token:{fa2:oe,token_id:ae,distribution:ce}};return ee().createProposal(ne,ie,he,le)},createLambdaFunctionProposal:async(ne,ie,oe,ae)=>{const ce=useModalStore.getState().show;let le;try{le=new Parser$2().parseMichelineExpression(oe)}catch{ce("Create DAO proposal","The provided lambda function Michelson code is not correct");return}const ue={lambda_function:le};return ee().createProposal(ne,ie,ue,ae)},claimTokens:async()=>{const ne=useUserStore.getState().address,ie=useUserStore.getState().handleOp,oe=useModalStore.getState().show,ae=useModalStore.getState().showError,ce=useModalStore.getState().step,le="Claim DAO tokens";if(ce(le,"Claiming Teia DAO tokens",!0),!ne){oe(le,"You need to sync your wallet first");return}const ue=await downloadJsonFileFromIpfs(DISTRIBUTION_MAPPING_IPFS_PATH);if(ue){if(!(ne in ue)){oe(le,`Your wallet is not in the distribution list.
Sorry, you don't qualify to claim any tokens.`);return}}else{oe(le,"Could not download the distribution map from IPFS");return}const he=ue[ne],fe=await downloadJsonFileFromIpfs(MERKLE_DATA_IPFS_PATHS[he]);if(!fe){oe(le,"Could not download the user Merkle proofs from IPFS");return}const me=fe[ne],ge=parseInt(me.tokens)/DAO_TOKEN_DECIMALS,ve=await getClaimedDaoTokens(ne),ye=ge-(ve||0);if(ye===0){oe(le,"Sorry, but you already claimed all your tokens");return}ce(le,`You are allowed to claim ${ye} DAO tokens`);try{const Ce=(await Tezos.wallet.at(DAO_TOKEN_CLAIM_CONTRACT)).methods.claim(me.proof,me.leafDataPacked);return await ie(Ce,le,{amount:0,storageLimit:400})}catch(be){ae(le,be)}}}),{name:"dao",storage:createJSONStorage(()=>localStorage)}))),ipfs_link="_ipfs_link_yqy4p_1",styles$m={ipfs_link};function TeiaUserLink({address:re,alias:ee,shorten:ne,className:ie,children:oe}){return jsx$1("a",{href:`/tz/${re}`,className:ie??"",children:oe??ee??(ne?walletPreview(re):re)})}function DefaultLink({href:re,className:ee,children:ne}){return jsx$1("a",{href:re,target:"_blank",rel:"noreferrer",className:ee??"",children:ne??"link"})}function TzktLink({link:re,className:ee,children:ne}){return jsx$1(DefaultLink,{href:`https://tzkt.io/${re}`,className:ee,children:ne??"TzKT link"})}function TezosAddressLink({address:re,alias:ee,shorten:ne,className:ie,children:oe}){return jsx$1(TzktLink,{link:re,className:ie,children:oe??ee??(ne?walletPreview(re):re)})}function TokenLink({fa2:re,id:ee,className:ne,children:ie}){const oe=TOKENS.find(ce=>ce.fa2===re),ae=oe?oe.multiasset?`${oe.name}#${ee}`:oe.name:`token #${ee}`;return oe!=null&&oe.website?jsx$1(DefaultLink,{href:`${oe.website}${ee}`,className:ne,children:ie??ae}):jsx$1(TzktLink,{link:`${re}/tokens/${ee}`,className:ne,children:ie??ae})}function IpfsLink({cid:re,type:ee,className:ne,children:ie}){return jsx$1(DefaultLink,{href:CIDToURL(re,ee??"IPFS"),className:`${styles$m.ipfs_link} ${ne??""}`,children:ie??re})}function Claim(){const re=useDaoStore(ie=>ie.claimTokens),[ee,ne]=reactExports.useState(!1);return jsx$1(Page,{title:"Claim DAO tokens",large:!0,children:jsxs("div",{className:styles$n.container,children:[jsxs("div",{className:styles$n.headline,children:[jsx$1("h1",{children:"Welcome to the TEIA tokens claim page!"}),jsx$1("p",{children:"Here you can claim your Teia DAO tokens."}),jsx$1(SvgTeiaDao,{})]}),jsxs("section",{className:styles$n.section,children:[jsx$1("p",{children:'By owning TEIA tokens, you are part of the Teia DAO LLC and eligible to put forward and vote on DAO proposals for Teia. Teia DAO tokens, (or "TEIA tokens") are specifically designed and intended for governance purposes within the Teia DAO ecosystem.'}),jsxs("p",{children:["If your Tezos wallet satisfies the conditions laid out in the"," ",jsx$1(DefaultLink,{href:"https://blog.teia.art/blog/fact-sheet-token-drop",children:"token distribution fact sheet"})," ","you are eligible to claim your TEIA tokens during the claiming period (August 20th, 2023 to November 20th, 2023). You can find a table with all eligible Tezos addresses and the amount of tokens in this"," ",jsx$1(DefaultLink,{href:"https://docs.google.com/spreadsheets/d/11jFANEUsvNSc9vQGD7sc46n_BOp8v0tGOLY1LG0KENk/edit?usp=sharing",children:"token distribution spreadsheet"}),"."]}),jsxs("p",{children:["For any questions or assistance regarding the token claim process get in touch with the team via discord or mail at"," ",jsx$1("a",{href:"mailto:info@teia.art",children:"info@teia.art"})]})]}),jsx$1(Line,{}),jsxs("section",{className:styles$n.section,children:[jsx$1("h1",{className:styles$n.section_title,children:"How to Claim your Tokens"}),jsxs("ol",{children:[jsxs("li",{counter:"1",children:[jsx$1("b",{children:"Sync your wallet"})," with teia.art (top right corner). Please check the URL before syncing your wallet: The only official TEIA token claim page is at www.teia.art/claim"]}),jsxs("li",{counter:"2",children:[jsx$1("b",{children:"Read the legal disclaimer below."})," It outlines important information regarding the nature of TEIA tokens and your responsibilities as a token holder."]}),jsxs("li",{counter:"3",children:[jsx$1("b",{children:"Confirm you have read the disclaimer"})," by checking the box at the bottom of this page to get access to the claim button."]}),jsxs("li",{counter:"4",children:[jsx$1("b",{children:'Click on the "Claim TEIA tokens" button'})," at the bottom of this page to initiate the token claim process and confirm the operation with your wallet. Your tokens should arrive in your wallet after a few minutes."]})]}),jsx$1("p",{children:"If you own multiple eligible wallets, unsync your wallet and repeat these steps for each of your wallets."})]}),jsx$1(Line,{}),jsxs("section",{className:styles$n.section,children:[jsx$1("h1",{className:styles$n.section_title,children:"Legal Disclaimer"}),jsx$1("p",{children:`By claiming your Teia DAO tokens ("TEIA tokens"), you agree to be bound by the terms and conditions set forth in this disclaimer. If you do not agree with any part of this disclaimer, don't participate in the token claim process!`}),jsxs("ol",{children:[jsxs("li",{counter:"1",children:[jsx$1("b",{children:"Governance only:"})," The TEIA tokens are intended solely for governance purposes within the Teia DAO ecosystem. TEIA tokens do not represent any form of investment in the Teia DAO or any associated entity. TEIA tokens are not intended to be securities or investment assets. The Teia DAO LLC does not intend to generate and distribute profits among its members. Teia does not sell TEIA tokens and does not intend to generate profit with the tokens. Claiming TEIA tokens via this claim page is free."]}),jsxs("li",{counter:"2",children:[jsx$1("b",{children:"No investment advice:"})," The information provided on this claim page, as well as any other informational materials, blog articles, or announcements published by Teia DAO LLC, are strictly for informational purposes. It does not constitute investment advice or any form of recommendation. The Teia DAO team does not endorse or recommend the purchase or sale of TEIA tokens as investment assets. The Teia DAO team makes no guarantees or representations regarding the future value, utility, or performance of TEIA tokens. The value of TEIA tokens may fluctuate, and you may experience losses if you choose to acquire or trade them. The Teia DAO team disclaims any responsibility for such losses."]}),jsxs("li",{counter:"3",children:[jsx$1("b",{children:"DAO membership:"})," By claiming and/or holding TEIA tokens, you become a member of the Teia DAO LLC. Teia does not require you to provide any personal information, as long as you hold less than 10% of tokens in circulation. Every address is limited to 400k TEIA tokens (5% of total supply) initially. This limit can be adjusted between 1% and 10% of total supply via DAO vote. If you want to stop being a Teia DAO member, you can send all your TEIA tokens to the"," ",jsx$1(DefaultLink,{href:"https://tzkt.io/KT1J9FYz29RBQi1oGLw8uXyACrzXzV1dHuvb/operations/",children:"Teia Treasury Address"}),"."]}),jsxs("li",{counter:"4",children:[jsx$1("b",{children:"Regulatory compliance:"})," The distribution and use of TEIA tokens may be subject to various laws, regulations, and restrictions in different jurisdictions. It is your sole responsibility to ensure compliance with any applicable laws and regulations before participating in the TEIA token claim process. The Teia DAO team does not provide legal, regulatory, or tax advice."]}),jsxs("li",{counter:"5",children:[jsx$1("b",{children:"No liability:"})," To the maximum extent permitted by applicable law, the Teia DAO team, its contributors, affiliates, partners, and any other associated entities shall not be liable for any direct, indirect, incidental, consequential, or punitive damages arising out of or in connection with the TEIA tokens or your participation in the TEIA token claim process."]}),jsxs("li",{counter:"6",children:[jsx$1("b",{children:"Risk acknowledgement:"})," By participating in the TEIA token claim process, you acknowledge and assume the risks associated with blockchain technology, cryptocurrencies, and the volatility of the cryptocurrency market. You agree to hold the Teia DAO team harmless against any claims, demands, actions, or liabilities arising from your participation."]}),jsxs("li",{counter:"7",children:[jsx$1("b",{children:"Updates and amendments:"})," The Teia DAO team reserves the right to modify, update, or amend this disclaimer at any time without prior notice."]})]}),jsx$1("br",{}),jsx$1(Checkbox$1,{alt:`click to ${ee?"decline":"accept"} the legal disclaimer`,checked:ee,onCheck:ne,label:"I have read and understood the legal disclaimer and agree to it"}),jsx$1("i",{children:"You need to accept the disclaimer in order to access the token claim button."})]}),ee&&jsxs(Fragment,{children:[jsx$1(Line,{}),jsxs("section",{className:styles$n.section,children:[jsx$1("h1",{className:styles$n.section_title,children:"Claim your TEIA tokens!"}),jsx$1("p",{children:jsx$1(Button,{shadow_box:!0,onClick:re,children:"Claim TEIA tokens"})})]}),jsx$1(Line,{}),jsxs("section",{className:styles$n.section,children:[jsx$1("h1",{className:styles$n.section_title,children:"Troubleshooting"}),jsx$1("p",{children:"Here are some of the most common solutions if the token claim process fails."}),jsxs("ol",{children:[jsx$1("li",{children:"Unsync and resync your wallet from teia.art"}),jsx$1("li",{children:"Check if you have enough funds for the transaction in your wallet. The transaction cost for the claim process is about 0.1-0.2 tez."}),jsx$1("li",{children:"Clear your browser cache."}),jsxs("li",{children:["Switch the rpc node in the"," ",jsx$1(DefaultLink,{href:"/settings",children:"config menu"}),", reload the page and try again."]})]})]})]})]})})}const details="_details_fqfiu_217",container$a="_container_fqfiu_228",transfers="_transfers_fqfiu_234",code="_code_fqfiu_245",styles$l={details,container:container$a,transfers,code};function Details({label:re,className:ee,children:ne}){return jsxs("details",{className:`${styles$l.details} ${ee??""}`,children:[jsx$1("summary",{children:re}),jsx$1("div",{className:styles$l.container,children:ne})]})}function TezTansfersDetails({label:re,transfers:ee,aliases:ne,className:ie}){return jsx$1(Details,{label:re,className:ie,children:jsx$1("table",{className:styles$l.transfers,children:jsx$1("tbody",{children:ee.map((oe,ae)=>jsxs("tr",{children:[jsxs("td",{children:[oe.amount/1e6," tez"]}),jsxs("td",{children:["to"," ",jsx$1(TezosAddressLink,{address:oe.destination,alias:ne==null?void 0:ne[oe.destination],shorten:!0})]})]},ae))})})})}function TokenTansfersDetails({label:re,fa2:ee,transfers:ne,aliases:ie,className:oe}){const ae=TOKENS.find(le=>le.fa2===ee),ce=(ae==null?void 0:ae.decimals)??1;return jsx$1(Details,{label:re,className:oe,children:jsx$1("table",{className:styles$l.transfers,children:jsx$1("tbody",{children:ne.map((le,ue)=>jsxs("tr",{children:[jsxs("td",{children:[le.amount/ce," ",!ae||ae.multiasset?`edition${le.amount/ce===1?"":"s"}`:ae.name]}),jsxs("td",{children:["to"," ",jsx$1(TezosAddressLink,{address:le.destination,alias:ie==null?void 0:ie[le.destination],shorten:!0})]})]},ue))})})})}function CodeDetails({label:re,code:ee,className:ne}){return jsx$1(Details,{label:re,className:ne,children:jsx$1("pre",{className:styles$l.code,children:ee})})}const votes="_votes_1pvl1_216",yes_vote="_yes_vote_1pvl1_230",no_vote="_no_vote_1pvl1_235",abstain_vote="_abstain_vote_1pvl1_240",empty_vote="_empty_vote_1pvl1_245",styles$k={votes,yes_vote,no_vote,abstain_vote,empty_vote};function Votes({votes:re,labels:ee={yes:"yes",no:"no",abstain:"abs",empty:"--"},showValues:ne,onClick:ie,className:oe}){const{yes:ae,no:ce,abstain:le}=re,ue=Number(ae)+Number(ce)+Number(le);return jsxs("button",{onClick:fe=>{fe.preventDefault(),ie()},className:`${styles$k.votes} ${oe??""}`,children:[ae>0&&jsx$1("span",{className:styles$k.yes_vote,style:{width:`${100*ae/ue}%`},children:ne?Math.round(ae):ee.yes}),ce>0&&jsx$1("span",{className:styles$k.no_vote,style:{width:`${100*ce/ue}%`},children:ne?Math.round(ce):ee.no}),le>0&&jsx$1("span",{className:styles$k.abstain_vote,style:{width:`${100*le/ue}%`},children:ne?Math.round(le):ee.abstain}),ue===0&&jsx$1("span",{className:styles$k.empty_vote,style:{width:"100%"},children:ne?0:ee.empty})]})}const getTimeAgo=re=>{const ee=Math.round(new Date(re).getTime()/1e3),ie=Math.round(new Date().getTime()/1e3)-ee;let oe,ae;return ie/60<60?(oe="minutes",ae=Math.round(ie/60),ae<=1&&(oe="minute")):ie/(60*60)<24?(oe="hours",ae=Math.round(ie/(60*60)),ae<=1&&(oe="hour")):(oe="days",ae=Math.round(ie/(60*60*24)),ae<=1&&(oe="day")),`${ae} ${oe} ago`},getWordDate=re=>{const ee=new Date(re),ne={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};return ee.toLocaleString("en-GB",ne)};function parseLambda(re){const ne=new Parser$2().parseJSON(JSON.parse(re));return emitMicheline(ne,{indent:"    ",newline:`
`}).replace(/0x0[0123]{1}[\w\d]{42}/g,ae=>`"${encodePubKey(ae.slice(2))}"`).replace(/0x0[0123]{1}[\w\d]{40}/g,ae=>`"${encodeKeyHash(ae.slice(2))}"`)}function Proposal({proposalId:re}){const[ee]=useStorage(DAO_GOVERNANCE_CONTRACT),[ne]=useDaoGovernanceParameters(ee),[ie,oe]=useDaoProposals(ee),[ae]=useDaoRepresentatives(ee),ce=useUserStore(Me=>Me.address),le=ae==null?void 0:ae[ce],[ue,he]=useDaoTokenBalance(ce),[fe,me]=useDaoUserVotes(ce,ee),[ge,ve]=useDaoCommunityVotes(le,ee),[ye]=useDaoUsersAliases(ce,ae,ie);if(!ne||!ie)return;const be=ie[re],Ce=ne[be.gp_index],Se=ue>0,$e=ue>=Ce.min_amount/DAO_TOKEN_DECIMALS,Te=parseInt(Ce.vote_period),Ne=parseInt(Ce.wait_period),Ie=new Date(be.timestamp);Ie.setDate(Ie.getDate()+Te);const ke=new Date(be.timestamp);ke.setDate(ke.getDate()+Te+Ne);const De=new Date,Oe=De>Ie,Be=De>ke;return be.id=re,be.voteExpirationTime=Ie,be.waitExpirationTime=ke,be.voteFinished=Oe,be.waitFinished=Be,jsxs("div",{className:styles$n.proposal,children:[jsxs("h3",{className:styles$n.proposal_title,children:[jsxs(Link,{"aria-label":`Proposal ${re}`,to:`${PATH.PROPOSAL}/${re}`,className:styles$n.proposal_id,children:["#",re]}),bytes2Char(be.title)]}),jsxs("div",{className:styles$n.proposal_information,children:[jsxs("div",{children:[jsx$1(ProposalDescription,{proposal:be,aliases:ye}),jsx$1(ProposalVotesSummary,{tokenVotes:be.token_votes,representativesVotes:be.representatives_votes,quorum:be.quorum,gp:Ce,showUserVotes:ue>0||le||fe&&Object.keys(fe).length>0,userCommunity:le,userVote:fe==null?void 0:fe[re],userCommunityVote:ge==null?void 0:ge[re]})]}),jsx$1(ProposalActions,{proposalId:re,canVote:be.status.open&&!Oe&&$e&&!(fe!=null&&fe[re]),canVoteAsRepresentative:be.status.open&&!Oe&&le&&!(ge!=null&&ge[re]),canEvaluate:be.status.open&&Oe&&Se,canExecute:be.status.approved&&Be&&Se,canCancel:(be.status.open||be.status.approved)&&(be.issuer===ce||ee.guardians===ce),callback:()=>{oe(),he(),me(),ve()}})]})]})}function ProposalDescription({proposal:re,aliases:ee}){const ne=bytes2Char(re.description),ie=ne.split("//")[1];return jsxs("div",{children:[jsxs("p",{children:["Proposed by"," ",jsx$1(TeiaUserLink,{address:re.issuer,alias:ee==null?void 0:ee[re.issuer],shorten:!0})," ","on ",getWordDate(re.timestamp),"."]}),jsx$1("p",{children:`Status: ${Object.keys(re.status)[0].toUpperCase()}`}),!re.status.cancelled&&(re.voteFinished?!re.waitFinished&&jsxs("p",{children:["Waiting period ends on ",getWordDate(re.waitExpirationTime),"."]}):jsxs("p",{children:["Voting period ends on ",getWordDate(re.voteExpirationTime),"."]})),jsxs("p",{children:["Description: ",ie?jsx$1(IpfsLink,{cid:ie,children:"IPFS"}):ne]}),jsx$1(ProposalContent,{content:re.kind,aliases:ee})]})}function ProposalContent({content:re,aliases:ee}){if(re.text)return jsx$1("p",{children:"Effect: Approves a text proposal."});if(re.transfer_mutez){const ne=re.transfer_mutez,ie=ne.reduce((oe,ae)=>oe+ae.amount/1e6,0);return ne.length===1?jsxs("p",{children:["Effect: Transfers ",ie," tez to"," ",jsx$1(TezosAddressLink,{address:ne[0].destination,alias:ee==null?void 0:ee[ne[0].destination],shorten:!0}),"."]}):jsxs(Fragment,{children:[jsxs("p",{children:["Effect: Transfers ",ie," tez."]}),jsx$1(TezTansfersDetails,{label:"See transfer details",transfers:ne,aliases:ee})]})}else if(re.transfer_token){const ne=re.transfer_token.fa2,ie=re.transfer_token.token_id,oe=TOKENS.find(ue=>ue.fa2===ne),ae=(oe==null?void 0:oe.decimals)??1,ce=re.transfer_token.distribution,le=ce.reduce((ue,he)=>ue+he.amount/ae,0);return ce.length===1?jsxs("p",{children:["Effect: Transfers ",le," ",(!oe||oe.multiasset)&&`edition${le===1?"":"s"} of `,jsx$1(TokenLink,{fa2:ne,id:ie})," to"," ",jsx$1(TezosAddressLink,{address:ce[0].destination,alias:ee==null?void 0:ee[ce[0].destination],shorten:!0}),"."]}):jsxs(Fragment,{children:[jsxs("p",{children:["Effect: Transfers ",le," ",(!oe||oe.multiasset)&&`edition${le===1?"":"s"} of `,jsx$1(TokenLink,{fa2:ne,id:ie}),"."]}),jsx$1(TokenTansfersDetails,{label:"See transfer details",fa2:ne,transfers:ce,aliases:ee})]})}else return jsxs(Fragment,{children:[jsx$1("p",{children:"Effect: Executes a lambda function."}),jsx$1(CodeDetails,{label:"See Micheline code",code:parseLambda(re.lambda_function)})]})}function ProposalVotesSummary({tokenVotes:re,representativesVotes:ee,quorum:ne,gp:ie,showUserVotes:oe,userCommunity:ae,userVote:ce,userCommunityVote:le}){const[ue,he]=reactExports.useState(!1),fe=ie.supermajority/100,me=ie.vote_method.linear?DAO_TOKEN_DECIMALS:Math.pow(DAO_TOKEN_DECIMALS,.5),ge=ee.total>0?Math.min(ie.representatives_share/ee.total,ie.representative_max_share)/100:0,ve=ne*ge,ye=parseInt(re.total)+ee.total*ve,be=parseInt(re.positive)+ee.positive*ve,Ce=parseInt(re.negative)+ee.negative*ve,Se=parseInt(re.abstain)+ee.abstain*ve,$e=ye>ne,Te=be>(be+Ce)*fe,Ne=$e?0:ne-ye,Ie=Te?0:ye===0?me:Ce*fe/(1-fe)-be;return jsxs("div",{children:[jsx$1("p",{children:"Token votes:"}),jsx$1(Votes,{votes:{yes:re.positive/me,no:re.negative/me,abstain:re.abstain/me},showValues:ue,onClick:()=>he(!ue)}),jsx$1("p",{children:"Representatives votes:"}),jsx$1(Votes,{votes:{yes:ee.positive*ve/me,no:ee.negative*ve/me,abstain:ee.abstain*ve/me},showValues:ue,onClick:()=>he(!ue)}),jsx$1("p",{children:"Combined votes:"}),jsx$1(Votes,{votes:{yes:be/me,no:Ce/me,abstain:Se/me},showValues:ue,onClick:()=>he(!ue)}),jsxs("p",{children:["Passes supermajority condition?"," ",Te?"Yes.":`No, ${Math.ceil(Ie/me)} yes vote${Ie!==me?"s":""} still missing.`]}),jsxs("p",{children:["Passes minimum quorum condition?"," ",$e?"Yes.":`No, ${Math.ceil(Ne/me)} vote${Ne!==me?"s":""} still missing.`]}),oe&&jsxs("p",{children:["Your votes:",jsx$1("span",{className:styles$n.user_vote,children:jsx$1(Votes,{votes:{yes:ce!=null&&ce.vote.yes?ce.weight/me:0,no:ce!=null&&ce.vote.no?ce.weight/me:0,abstain:ce!=null&&ce.vote.abstain?ce.weight/me:0},showValues:ue,onClick:()=>he(!ue)})}),ae&&jsx$1("span",{className:styles$n.user_vote,children:jsx$1(Votes,{votes:{yes:le!=null&&le.yes?ve/me:0,no:le!=null&&le.no?ve/me:0,abstain:le!=null&&le.abstain?ve/me:0},showValues:ue,onClick:()=>he(!ue)})})]})]})}function ProposalActions({proposalId:re,canVote:ee,canVoteAsRepresentative:ne,canEvaluate:ie,canExecute:oe,canCancel:ae,callback:ce}){const le=useDaoStore(ge=>ge.voteProposal),ue=useDaoStore(ge=>ge.voteProposalAsRepresentative),he=useDaoStore(ge=>ge.cancelProposal),fe=useDaoStore(ge=>ge.evaluateVotingResult),me=useDaoStore(ge=>ge.executeProposal);if(ee||ne||ie||oe||ae)return jsxs("div",{children:[ee&&jsxs("div",{children:[jsx$1("p",{children:"Vote with your tokens:"}),jsxs("div",{className:styles$n.proposal_buttons,children:[jsx$1(Button,{onClick:()=>le(re,"yes",null,ce),shadow_box:!0,fit:!0,children:"yes"}),jsx$1(Button,{onClick:()=>le(re,"no",null,ce),shadow_box:!0,fit:!0,children:"no"}),jsx$1(Button,{onClick:()=>le(re,"abstain",null,ce),shadow_box:!0,fit:!0,children:"abstain"})]})]}),ne&&jsxs("div",{children:[jsx$1("p",{children:"Vote as representative:"}),jsxs("div",{className:styles$n.proposal_buttons,children:[jsx$1(Button,{onClick:()=>ue(re,"yes",ce),shadow_box:!0,fit:!0,children:"yes"}),jsx$1(Button,{onClick:()=>ue(re,"no",ce),shadow_box:!0,fit:!0,children:"no"}),jsx$1(Button,{onClick:()=>ue(re,"abstain",ce),shadow_box:!0,fit:!0,children:"abstain"})]})]}),ie&&jsxs("div",{children:[jsx$1("p",{children:"Evaluate the proposal:"}),jsx$1("div",{className:styles$n.proposal_buttons,children:jsx$1(Button,{onClick:()=>fe(re,ce),shadow_box:!0,fit:!0,children:"evaluate"})})]}),oe&&jsxs("div",{children:[jsx$1("p",{children:"Execute the proposal:"}),jsx$1("div",{className:styles$n.proposal_buttons,children:jsx$1(Button,{onClick:()=>me(re,ce),shadow_box:!0,fit:!0,children:"execute"})})]}),ae&&jsxs("div",{children:[jsx$1("p",{children:"Cancel the proposal:"}),jsx$1("div",{className:styles$n.proposal_buttons,children:jsx$1(Button,{onClick:()=>he(re,!0,ce),shadow_box:!0,fit:!0,children:"cancel"})})]})]})}function ProposalDisplay(){const[re]=useStorage(DAO_GOVERNANCE_CONTRACT),[ee]=useDaoGovernanceParameters(re),[ne]=useDaoProposals(re),{id:ie}=useParams();return ne&&!ne[ie]?jsx$1(RootErrorBoundary,{title:"Wrong DAO proposal id",msg:`The last DAO proposal id is ${re.counter-1}`}):jsx$1(Page,{title:`DAO proposal #${ie}`,children:jsxs("div",{className:styles$n.container,children:[jsx$1("h1",{className:styles$n.headline,children:"DAO proposal"}),!ee||!ne?jsx$1(LoadingDaoMessage,{message:"Loading proposal information"}):jsxs(Fragment,{children:[jsx$1("section",{className:styles$n.section,children:jsx$1(Proposal,{proposalId:ie})}),jsx$1(PaginationButtons,{path:PATH.PROPOSAL,current:parseInt(ie),min:0,max:re.counter-1})]})]})})}const section$2="_section_15hzx_1",section_title$1="_section_title_15hzx_11",parameters_list="_parameters_list_15hzx_15",proposal_form="_proposal_form_15hzx_19",proposal_form_fields="_proposal_form_fields_15hzx_23",proposal_form_field="_proposal_form_field_15hzx_23",styles$j={section:section$2,section_title:section_title$1,parameters_list,proposal_form,proposal_form_fields,proposal_form_field};function DaoParameters(){const[re]=useStorage(DAO_GOVERNANCE_CONTRACT),[ee]=useDaoGovernanceParameters(re),[ne]=useDaoProposals(re),[ie]=useDaoRepresentatives(re),[oe]=useDaoMemberCount(0),[ae]=useBalance(DAO_GOVERNANCE_CONTRACT),[ce]=useDaoTokenBalance(DAO_GOVERNANCE_CONTRACT),le=useUserStore(Se=>Se.address),ue=ie==null?void 0:ie[le],[he]=useDaoTokenBalance(le),[fe]=useDaoUserVotes(le,re),[me]=useDaoCommunityVotes(ue,re),[ge]=useDaoUsersAliases(le,ie,ne);if(!ee||!ne||!ie)return jsx$1(LoadingDaoMessage,{});const ve=ee[re.gp_counter-1],ye=ve.vote_method.linear?DAO_TOKEN_DECIMALS:Math.pow(DAO_TOKEN_DECIMALS,.5),be=fe?Object.keys(fe).length:0,Ce=me?Object.keys(me).length:0;return jsxs(Fragment,{children:[le&&jsxs(Fragment,{children:[jsxs("section",{className:styles$j.section,children:[jsx$1("h1",{className:styles$j.section_title,children:"User information"}),jsxs("ul",{className:styles$j.parameters_list,children:[jsxs("li",{children:["Address: ",jsx$1(TeiaUserLink,{address:le,shorten:!0})]}),ue&&jsxs("li",{children:["Representative for ",ue,"."]}),jsxs("li",{children:["DAO token balance: ",Math.round(he*10)/10," TEIA"]}),jsxs("li",{children:["Submited proposals:"," ",Object.values(ne).reduce((Se,$e)=>Se+($e.issuer===le?1:0),0)]}),jsxs("li",{children:["Voted in ",be," proposal",be===1?"":"s","."]}),ue&&jsxs("li",{children:["Voted in ",Ce," proposal",Ce===1?"":"s"," as community representative."]})]})]}),jsx$1(Line,{})]}),jsxs("section",{className:styles$j.section,children:[jsx$1("h1",{className:styles$j.section_title,children:"DAO information"}),jsxs("ul",{className:styles$j.parameters_list,children:[jsxs("li",{children:["Members:"," ",jsx$1(TzktLink,{link:`${DAO_TOKEN_CONTRACT}/tokens/0/holders`,children:oe})]}),jsxs("li",{children:["Total number of proposals: ",Object.keys(ne).length]}),jsxs("li",{children:["Open proposals:"," ",Object.values(ne).reduce((Se,$e)=>Se+($e.status.open?1:0),0)]}),jsxs("li",{children:["Executed proposals:"," ",Object.values(ne).reduce((Se,$e)=>Se+($e.status.executed?1:0),0)]}),jsxs("li",{children:["Rejected proposals:"," ",Object.values(ne).reduce((Se,$e)=>Se+($e.status.rejected?1:0),0)]}),jsxs("li",{children:["Cancelled proposals:"," ",Object.values(ne).reduce((Se,$e)=>Se+($e.status.cancelled?1:0),0)]}),jsxs("li",{children:["Treasury balance: ",Math.round(ae)," tez and"," ",Math.round(ce*10)/10," TEIA tokens"]})]})]}),jsx$1(Line,{}),jsxs("section",{className:styles$j.section,children:[jsx$1("h1",{className:styles$j.section_title,children:"Community representatives"}),jsx$1("ul",{className:styles$j.parameters_list,children:Object.entries(ie).map(([Se,$e])=>jsxs("li",{children:[`${$e}: `,jsx$1(TeiaUserLink,{address:Se,alias:ge==null?void 0:ge[Se],shorten:!0})]},$e))})]}),jsx$1(Line,{}),jsxs("section",{className:styles$j.section,children:[jsx$1("h1",{className:styles$j.section_title,children:"Current DAO governance parameters"}),jsxs("ul",{className:styles$j.parameters_list,children:[jsxs("li",{children:["Vote method:"," ",ve.vote_method.linear?"linear weight":"quadratic weight"]}),jsxs("li",{children:["Required quorum: ",re.quorum/ye," weighted votes"]}),jsxs("li",{children:["Percentage for supermajority: ",ve.supermajority,"% positive votes"]}),jsxs("li",{children:["Representatives vote share: ",ve.representatives_share,"% of the quorum"]}),jsxs("li",{children:["Representative max vote share: ",ve.representative_max_share,"% of the quorum"]}),jsxs("li",{children:["Proposal voting period: ",ve.vote_period," days"]}),jsxs("li",{children:["Proposal waiting period: ",ve.wait_period," days"]}),jsxs("li",{children:["Number of tokens to escrow to submit a proposal:"," ",ve.escrow_amount/DAO_TOKEN_DECIMALS," TEIA tokens"]}),jsxs("li",{children:["Minimum number of tokens required to vote a proposal:"," ",ve.min_amount/DAO_TOKEN_DECIMALS," TEIA tokens"]})]})]}),jsx$1(Line,{}),jsxs("section",{className:styles$j.section,children:[jsx$1("h1",{className:styles$j.section_title,children:"Smart contracts"}),jsxs("ul",{className:styles$j.parameters_list,children:[jsxs("li",{children:["DAO governance:"," ",jsx$1(TezosAddressLink,{address:DAO_GOVERNANCE_CONTRACT,shorten:!0})]}),jsxs("li",{children:["DAO token: ",jsx$1(TezosAddressLink,{address:re.token,shorten:!0})]}),jsxs("li",{children:["DAO treasury:"," ",jsx$1(TezosAddressLink,{address:re.treasury,shorten:!0})]}),jsxs("li",{children:["DAO guardians:"," ",jsx$1(TezosAddressLink,{address:re.guardians,shorten:!0})]}),jsxs("li",{children:["DAO administrator:"," ",jsx$1(TezosAddressLink,{address:re.administrator,shorten:!0})]}),jsxs("li",{children:["Community representatives:"," ",jsx$1(TezosAddressLink,{address:re.representatives,shorten:!0})]})]})]})]})}const PROPOSAL_STATUS_OPTIONS={toVote:"Proposals to vote",voted:"Already voted proposals",toEvaluate:"Proposals to evaluate",approved:"Approved proposals",toExecute:"Proposals to execute",executed:"Executed proposals",rejected:"Rejected proposals",cancelled:"Cancelled proposals"};function DaoProposals(){const[re,ee]=reactExports.useState("toVote"),[ne]=useStorage(DAO_GOVERNANCE_CONTRACT),[ie]=useDaoGovernanceParameters(ne),[oe]=useDaoProposals(ne),[ae]=useDaoRepresentatives(ne),ce=useUserStore(ve=>ve.address),le=ae==null?void 0:ae[ce],[ue]=useDaoUserVotes(ce,ne),[he]=useDaoCommunityVotes(le,ne);if(!ie||!oe||!ae)return jsx$1(LoadingDaoMessage,{});const fe=Object.fromEntries(Object.keys(PROPOSAL_STATUS_OPTIONS).map(ve=>[ve,[]])),me=new Date;for(const ve of Object.keys(oe).reverse()){const ye=oe[ve],be=ie[ye.gp_index],Ce=parseInt(be.vote_period),Se=parseInt(be.wait_period),$e=new Date(ye.timestamp);$e.setDate($e.getDate()+Ce);const Te=new Date(ye.timestamp);Te.setDate(Te.getDate()+Ce+Se),ye.status.open?me>$e?fe.toEvaluate.push(ve):ue!=null&&ue[ve]?le&&!(he!=null&&he[ve])?fe.toVote.push(ve):fe.voted.push(ve):fe.toVote.push(ve):ye.status.approved?me>Te?fe.toExecute.push(ve):fe.approved.push(ve):ye.status.executed?fe.executed.push(ve):ye.status.rejected?fe.rejected.push(ve):ye.status.cancelled&&fe.cancelled.push(ve)}const ge=Object.keys(PROPOSAL_STATUS_OPTIONS).filter(ve=>ve==="toVote"||fe[ve].length>0);return jsxs("section",{className:styles$j.section,children:[jsx$1("h1",{className:styles$j.section_title,children:"Teia DAO proposals"}),jsx$1(Select,{alt:"proposal group selection",value:{value:re,label:`${PROPOSAL_STATUS_OPTIONS[re]} (${fe[re].length})`},onChange:ve=>ee(ve.value),options:ge.map(ve=>({value:ve,label:`${PROPOSAL_STATUS_OPTIONS[ve]} (${fe[ve].length})`})),children:jsx$1(Line,{})}),jsx$1(ProposalGroup,{status:re,proposalIds:fe[re]})]})}function ProposalGroup({status:re,proposalIds:ee}){const ne=(()=>{switch(re){case"toVote":return ee.length>0?"These proposals are still in the voting phase and you didn't vote for them yet.":"There are no new proposals to vote at the moment.";case"voted":return"These proposals are still in the voting phase, but you already voted them.";case"toEvaluate":return"The voting period for these proposals has finished. You can evaluate their result to see if they are approved or rejected.";case"approved":return"These are approved proposals that are still in the waiting phase. Once the waiting phase finishes, you will be able to execute them.";case"toExecute":return"These proposals have been approved by the DAO and can be exectuded.";case"executed":return"These proposals have been executed already.";case"rejected":return"These proposals didn't reach the required quorum and/or supermajority. As a result, they were rejected by the DAO.";case"cancelled":return"These proposals were cancelled by the proposal issuer or the DAO guardians.";default:return""}})();return jsxs(Fragment,{children:[jsx$1("p",{children:ne}),ee.length>0&&jsx$1("ul",{children:ee.map((ie,oe)=>jsxs("li",{children:[jsx$1(Proposal,{proposalId:ie}),oe<ee.length-1&&jsx$1(Line,{})]},ie))})]})}const container$9="_container_1uklo_1",ipfs_upload_button="_ipfs_upload_button_1uklo_5",ipfs_result="_ipfs_result_1uklo_18",allowed="_allowed_1uklo_25",selected="_selected_1uklo_32",styles$i={container:container$9,ipfs_upload_button,ipfs_result,allowed,selected},Upload=reactExports.forwardRef(({label:re,file:ee,placeHolder:ne,allowedTypes:ie,allowedTypesLabel:oe,children:ae,onChange:ce=()=>null,...le},ue)=>{const{language:he}=useLanguage(),[fe,me]=reactExports.useState(ne),ge=async ye=>{const{files:be}=ye.target,Ce=be[0];if(!Ce){me(ne);return}me(Ce.name);const Se=Ce.type===""?await getMimeType(Ce):Ce.type,$e=Buffer.from(await Ce.arrayBuffer()),Te=new FileReader;Te.addEventListener("load",Ne=>{ce({title:fe,mimeType:Se,file:Ce,buffer:$e,reader:Ne.target.result})}),Te.readAsDataURL(Ce)},ve={type:"file",name:le.name||"file"};return ie&&(ve.accept=ie.join(",")),jsxs("div",{className:styles$i.container,children:[jsx$1("strong",{children:re}),jsxs("label",{children:[fe,jsx$1("input",{...ve,ref:ue,onChange:ge,...le})]}),jsxs("div",{className:styles$i.allowed,children:[he.mint.supports,": ",oe]}),ae]})});function IpfsUploader({label:re,placeholder:ee,value:ne,onChange:ie,className:oe,displayUploadInformation:ae=!0,children:ce}){const[le,ue]=reactExports.useState(void 0),he=ge=>{ue(ge.target.files[0]),ie("")},fe=async ge=>{ge.preventDefault(),ie(await uploadFileToIpfs(le,ae))},me=async ge=>{ge.preventDefault(),ue(void 0),ie("")};return jsxs("div",{className:`${styles$i.container} ${oe??""}`,children:[jsx$1("p",{children:jsx$1("strong",{children:re})}),!le&&jsxs("label",{children:[ee,jsx$1("input",{type:"file",onChange:he})]}),le&&ne===""&&jsxs(Fragment,{children:[jsxs("button",{onClick:fe,className:styles$i.ipfs_upload_button,children:["Upload ",le.name," to IPFS"]}),jsx$1(Button,{onClick:me,small:!0,children:"Clear field"})]}),le&&ne!==""&&jsxs(Fragment,{children:[jsxs("p",{className:styles$i.ipfs_result,children:[jsxs("span",{children:[le.name," ",jsx$1(IpfsLink,{cid:ne,children:"IPFS"})]}),jsx$1(Button,{onClick:me,small:!0,children:"Clear field"})]}),ce]})]})}async function uploadFileToIpfs(re,ee){const ne=useModalStore.getState().step,ie=useModalStore.getState().close;ee&&ne("IPFS upload",`Uploading ${re.name} to IPFS...`);const oe=await uploadFileToIPFSProxy(re);return ee&&ie(),oe}const PROPOSAL_KINDS={text:"Text proposal",transferTez:"Transfer tez proposal",transferToken:"Transfer token proposal",lambdaFunction:"Lambda function proposal"};function SubmitDaoProposals(){const[re,ee]=reactExports.useState("text"),[ne]=useStorage(DAO_GOVERNANCE_CONTRACT),[ie]=useDaoGovernanceParameters(ne),[,oe]=useDaoProposals(ne),ae=useUserStore(fe=>fe.address),[ce,le]=useDaoTokenBalance(ae);if(!ie)return jsx$1(LoadingDaoMessage,{});const he=ie[ne.gp_counter-1].escrow_amount/DAO_TOKEN_DECIMALS;return jsxs("section",{className:styles$j.section,children:[jsx$1("h1",{className:styles$j.section_title,children:"Submit a new DAO proposal"}),ce===0?jsx$1("p",{children:"Only DAO members can create proposals."}):ce<he?jsxs("p",{children:["A minimum of ",he," TEIA tokens are needed to create proposals."]}):jsxs(Fragment,{children:[jsx$1(Select,{alt:"proposal form selection",value:{value:re,label:PROPOSAL_KINDS[re]},onChange:fe=>ee(fe.value),options:Object.entries(PROPOSAL_KINDS).map(([fe,me])=>({value:fe,label:me})),children:jsx$1(Line,{})}),jsx$1(ProposalForm,{kind:re,callback:()=>{oe(),le()}})]})]})}function ProposalForm({kind:re,callback:ee}){switch(re){case"text":return jsxs(Fragment,{children:[jsxs("p",{children:["Use this form to create a DAO proposal for Teia. DAO proposals should primarily be used for significant decisions for the LLC and must be both practically and legally viable. For polling and smaller suggestions, please use the"," ",jsx$1("a",{href:"https://teia.art/polls",children:"Community poll tool"})]}),jsx$1("p",{children:"This proposal has no direct consequences on the blockchain. However, if accepted and executed, it should trigger some off-chain actions by one of the Teia DAO members (e.g. change a website UI, decide on a dog name, buy bread at the bakery). The proposal description will be stored in IPFS for archival purposes."}),jsx$1(TextProposalForm,{callback:ee})]});case"transferTez":return jsxs(Fragment,{children:[jsx$1("p",{children:"Use this form to create a proposal that, if accepted, will transfer the specified amount of XTZ from the DAO treasury to a list of Tezos addresses. The proposal description will be stored in IPFS for archival purposes."}),jsx$1(TransferTezProposalForm,{callback:ee})]});case"transferToken":return jsxs(Fragment,{children:[jsx$1("p",{children:"Use this form to create a proposal that, if accepted, it will transfer the specified amount of token editions from the DAO treasury to a list of Tezos addresses. The proposal description will be stored in IPFS for archival purposes."}),jsx$1(TransferTokenProposalForm,{callback:ee})]});case"lambdaFunction":return jsxs(Fragment,{children:[jsx$1("p",{children:"Use this form to create a proposal that, if accepted, will execute some smart contract code stored in a Michelson lambda function. The proposal description will be stored in IPFS for archival purposes."}),jsx$1("p",{children:"This proposal could be used to administer other smart contracts of which the DAO is the administrator (e.g. to update the Teia marketplace fees), or to execute entry points from other contracts (e.g. swap or collect a token, vote in anoter DAO / multisig)."}),jsx$1("p",{children:"Warning: Executing arbitrary smart contract code could compromise the DAO or have unexpected consequences. The lambda function code should have been revised by some trusted smart contract expert before the proposal is accepted and executed."}),jsx$1(LambdaFunctionProposalForm,{callback:ee})]});default:return}}function CommonProposalFields({title:re,setTitle:ee,descriptionIpfsCid:ne,setDescriptionIpfsCid:ie}){return jsxs(Fragment,{children:[jsx$1(SimpleInput,{type:"text",label:"Proposal title",placeholder:"Write a meaningful title for your proposal here",maxlength:"500",value:re,onChange:ee,className:styles$j.proposal_form_field,children:jsx$1(Line,{})}),jsx$1(IpfsUploader,{label:"Proposal description",placeholder:"Select the file with the proposal description",value:ne,onChange:ie,className:styles$j.proposal_form_field,children:jsx$1(Line,{})})]})}function TextProposalForm({callback:re}){const[ee,ne]=reactExports.useState(""),[ie,oe]=reactExports.useState(""),ae=useDaoStore(le=>le.createTextProposal),ce=le=>{le.preventDefault(),ae(ee,ie,re)};return jsxs("form",{className:styles$j.proposal_form,onSubmit:ce,children:[jsx$1("div",{className:styles$j.proposal_form_fields,children:jsx$1(CommonProposalFields,{title:ee,setTitle:ne,descriptionIpfsCid:ie,setDescriptionIpfsCid:oe})}),jsx$1(Button,{shadow_box:!0,fit:!0,children:"Submit proposal"})]})}function TransferTezProposalForm({callback:re}){const[ee,ne]=reactExports.useState(""),[ie,oe]=reactExports.useState(""),[ae,ce]=reactExports.useState([{amount:"",destination:""}]),le=useDaoStore(he=>he.createTransferMutezProposal),ue=he=>{he.preventDefault(),le(ee,ie,ae.map(fe=>({amount:fe.amount*1e6,destination:fe.destination})),re)};return jsxs("form",{className:styles$j.proposal_form,onSubmit:ue,children:[jsxs("div",{className:styles$j.proposal_form_fields,children:[jsx$1(CommonProposalFields,{title:ee,setTitle:ne,descriptionIpfsCid:ie,setDescriptionIpfsCid:oe}),jsx$1(TransferFields,{labels:{amount:"Amount to transfer in tez",destination:"Destination address"},transfers:ae,onChange:ce,step:"0.000001",className:styles$j.proposal_form_field,children:jsx$1(Line,{})})]}),jsx$1(Button,{shadow_box:!0,fit:!0,children:"Submit proposal"})]})}function TransferTokenProposalForm({callback:re}){const[ee,ne]=reactExports.useState(""),[ie,oe]=reactExports.useState(""),[ae,ce]=reactExports.useState(""),[le,ue]=reactExports.useState(""),[he,fe]=reactExports.useState([{amount:"",destination:""}]),me=useDaoStore(ve=>ve.createTransferTokenProposal),ge=ve=>{const ye=TOKENS.find(be=>be.fa2===ae);ve.preventDefault(),me(ee,ie,ae,le,he.map(be=>({amount:ye?be.amount*ye.decimals:be.amount,destination:be.destination})),re)};return jsxs("form",{className:styles$j.proposal_form,onSubmit:ge,children:[jsxs("div",{className:styles$j.proposal_form_fields,children:[jsx$1(CommonProposalFields,{title:ee,setTitle:ne,descriptionIpfsCid:ie,setDescriptionIpfsCid:oe}),jsx$1(SimpleInput,{type:"text",label:"Token contract address",placeholder:"KT...",minlenght:"36",maxlength:"36",value:ae,onChange:ce,className:styles$j.proposal_form_field,children:jsx$1(Line,{})}),jsx$1(SimpleInput,{type:"number",label:"Token id",placeholder:"0",min:"0",step:"1",value:le,onChange:ue,className:styles$j.proposal_form_field,children:jsx$1(Line,{})}),jsx$1(TransferFields,{labels:{amount:"Token editions",destination:"Destination address"},transfers:he,onChange:fe,step:"1",className:styles$j.proposal_form_field,children:jsx$1(Line,{})})]}),jsx$1(Button,{shadow_box:!0,fit:!0,children:"Submit proposal"})]})}function LambdaFunctionProposalForm({callback:re}){const[ee,ne]=reactExports.useState(""),[ie,oe]=reactExports.useState(""),[ae,ce]=reactExports.useState(""),le=useDaoStore(he=>he.createLambdaFunctionProposal),ue=he=>{he.preventDefault(),le(ee,ie,ae,re)};return jsxs("form",{className:styles$j.proposal_form,onSubmit:ue,children:[jsxs("div",{className:styles$j.proposal_form_fields,children:[jsx$1(CommonProposalFields,{title:ee,setTitle:ne,descriptionIpfsCid:ie,setDescriptionIpfsCid:oe}),jsx$1(Textarea$1,{name:"lambdaFunctionCode",label:"Lambda function code in Micheline format",placeholder:"Write here the lambda function code",maxLength:"1000",value:ae,onChange:he=>ce(he.target.value),className:styles$j.proposal_form_field,children:jsx$1(Line,{})})]}),jsx$1(Button,{shadow_box:!0,fit:!0,children:"Submit proposal"})]})}const container$8="_container_1okj8_216",headline="_headline_1okj8_221",loading_containter="_loading_containter_1okj8_225",section$1="_section_1okj8_232",poll="_poll_1okj8_242",poll_id="_poll_id_1okj8_252",poll_question="_poll_question_1okj8_259",poll_options="_poll_options_1okj8_263",poll_option="_poll_option_1okj8_263",winner_option="_winner_option_1okj8_287",poll_option_container="_poll_option_container_1okj8_295",user_vote="_user_vote_1okj8_299",poll_objkt_option="_poll_objkt_option_1okj8_303",styles$h={container:container$8,headline,loading_containter,section:section$1,poll,poll_id,poll_question,poll_options,poll_option,winner_option,poll_option_container,user_vote,poll_objkt_option};function LoadingPollsMessage({message:re}){return jsx$1("div",{className:styles$h.loading_containter,children:jsx$1(Loading,{message:re??"Loading polls information"})})}const TABS$2=[{title:"Polls",to:""},{title:"Create",to:"create"}];function TeiaPolls(){const[re]=useStorage(POLLS_CONTRACT),[ee]=usePolls(re);return jsx$1(Page,{title:"Teia polls",children:jsxs("div",{className:styles$h.container,children:[jsx$1("h1",{className:styles$h.headline,children:"Teia community polls"}),ee?jsxs(Fragment,{children:[jsx$1(Tabs,{tabs:TABS$2}),jsx$1(Outlet,{})]}):jsx$1(LoadingPollsMessage,{})]})})}const usePollsStore=create$2()(subscribeWithSelector(persist((re,ee)=>({votePoll:async(ne,ie,oe,ae)=>{const ce=useUserStore.getState().handleOp,le=useModalStore.getState().showError,ue=useModalStore.getState().step,he="Vote teia poll";ue(he,"Waiting for confirmation",!0);try{const fe=await Tezos.wallet.at(POLLS_CONTRACT),me={poll_id:parseInt(ne),option:ie,max_checkpoints:oe},ge=fe.methodsObject.vote(me),ve=await ce(ge,he);return ae==null||ae(),ve}catch(fe){le(he,fe)}},createPoll:async(ne,ie,oe,ae,ce,le)=>{const ue=useUserStore.getState().handleOp,he=useModalStore.getState().show,fe=useModalStore.getState().showError,me=useModalStore.getState().step,ge="Create teia poll";if(!ne||ne.length<10){he(ge,"The poll question must be at least 10 characters long");return}if(ce.length<2){he(ge,"The poll should have at least 2 options to vote");return}me(ge,"Waiting for confirmation",!0);try{const ve=await Tezos.wallet.at(POLLS_CONTRACT),ye={question:char2Bytes(ne),description:ie===""?char2Bytes(""):char2Bytes(`ipfs://${ie}`),options:MichelsonMap.fromLiteral(Object.fromEntries(ce.map((Se,$e)=>[$e,char2Bytes(Se)]))),vote_weight_method:{[oe]:[["unit"]]},vote_period:ae},be=ve.methodsObject.create_poll(ye),Ce=await ue(be,ge);return le==null||le(),Ce}catch(ve){fe(ge,ve)}}}),{name:"polls",storage:createJSONStorage(()=>localStorage)})));function Poll({pollId:re}){var ye;const[ee]=useStorage(POLLS_CONTRACT),[ne,ie]=usePolls(ee),oe=useUserStore(be=>be.address),[ae]=useDaoTokenBalance(oe),[ce,le]=useUserPollVotes(oe,ee),[ue]=usePollsUsersAliases(oe,ne);if(!ne)return;const he=ne[re],fe=parseInt(he.vote_period),me=new Date(he.timestamp);me.setDate(me.getDate()+fe);const ve=new Date>me;return he.id=re,he.voteExpirationTime=me,he.voteFinished=ve,jsxs("div",{className:styles$h.poll,children:[jsxs("h3",{className:styles$h.poll_question,children:[jsxs(Link,{"aria-label":`Poll ${re}`,to:`${PATH.POLL}/${re}`,className:styles$h.poll_id,children:["#",re]}),bytes2Char(he.question)]}),jsx$1(PollDescription,{poll:he,aliases:ue}),jsx$1(PollVotesSummary,{poll:he,userVotedOption:(ye=ce==null?void 0:ce[re])==null?void 0:ye.option,canVote:!ve&&ae>0,callback:()=>{ie(),le()}})]})}function PollDescription({poll:re,aliases:ee}){const ne=re.description!==""?bytes2Char(re.description):"",ie=ne.split("//")[1];return jsxs(Fragment,{children:[jsxs("p",{children:["Created by"," ",jsx$1(TeiaUserLink,{address:re.issuer,alias:ee==null?void 0:ee[re.issuer],shorten:!0})," ","on ",getWordDate(re.timestamp),"."]}),!re.voteFinished&&jsxs("p",{children:["Voting period ends on ",getWordDate(re.voteExpirationTime),"."]}),ne!==""&&jsxs("p",{children:["Description: ",ie?jsx$1(IpfsLink,{cid:ie,children:"IPFS"}):ne]}),jsxs("p",{children:["Vote weight method:"," ",Object.keys(re.vote_weight_method)[0].toUpperCase()]})]})}function PollVotesSummary({poll:re,userVotedOption:ee,canVote:ne,callback:ie}){const[oe,ae]=reactExports.useState(!1),ce=usePollsStore(me=>me.votePoll),le=Object.values(re.votes_count).map(me=>parseInt(me)),ue=le.reduce((me,ge)=>me+ge,0),he=Math.max(...le),fe=re.vote_weight_method.linear?DAO_TOKEN_DECIMALS:re.vote_weight_method.quadratic?Math.pow(DAO_TOKEN_DECIMALS,.5):1;return jsxs(Fragment,{children:[jsx$1("p",{children:"Options to vote:"}),jsx$1("ul",{className:styles$h.poll_options,children:Object.entries(re.votes_count).map(([me,ge])=>jsxs("li",{className:`${styles$h.poll_option} ${parseInt(ge)===he&&he!==0?styles$h.winner_option:""}`,children:[jsxs("button",{onClick:()=>ae(!oe),children:[ee===me?jsxs("div",{className:styles$h.poll_option_container,children:[jsx$1("span",{className:styles$h.user_vote}),jsx$1(PollOption,{option:bytes2Char(re.options[me])}),jsx$1("span",{className:styles$h.user_vote,children:"✔"})]}):jsx$1(PollOption,{option:bytes2Char(re.options[me])}),jsx$1("div",{children:oe?`${ue===0?0:Math.round(100*ge/ue)}%`:`${Math.round(ge/fe)} vote${parseInt(ge)!==fe?"s":""}`})]}),ne&&jsx$1(Button,{onClick:()=>ce(re.id,me,null,ie),shadow_box:!0,fit:!0,children:"Select"})]},me))})]})}function PollOption({option:re}){return re.indexOf("http")>=0?jsx$1(DefaultLink,{href:re.slice(re.indexOf("http")),children:re.slice(0,re.indexOf("http"))||void 0}):re.indexOf("ipfs://")>=0?jsx$1(IpfsLink,{cid:re.split("ipfs://")[1]}):re.indexOf("OBJKT#")===0?jsx$1(ObjktOption,{id:re.split("#")[1]}):jsx$1("span",{children:re})}function ObjktOption({id:re}){const[ee]=useObjkt(re);return ee?jsxs("div",{className:styles$h.poll_objkt_option,children:[jsx$1(RenderMediaType,{nft:ee}),jsx$1("span",{children:`OBJKT#${re}`})]}):jsx$1("span",{children:`OBJKT#${re}`})}function PollDisplay(){const[re]=useStorage(POLLS_CONTRACT),[ee]=usePolls(re),{id:ne}=useParams();return ee&&!ee[ne]?jsx$1(RootErrorBoundary,{title:"Wrong poll id",msg:`The last Teia poll id is ${re.counter-1}`}):jsx$1(Page,{title:`Teia poll #${ne}`,children:jsxs("div",{className:styles$h.container,children:[jsx$1("h1",{className:styles$h.headline,children:"Teia poll"}),ee?jsxs(Fragment,{children:[jsx$1("section",{className:styles$h.section,children:jsx$1(Poll,{pollId:ne})}),jsx$1(PaginationButtons,{path:PATH.POLL,current:parseInt(ne),min:0,max:re.counter-1})]}):jsx$1(LoadingPollsMessage,{message:"Loading poll information"})]})})}const section="_section_1n27w_1",section_title="_section_title_1n27w_11",poll_form="_poll_form_1n27w_15",poll_form_fields="_poll_form_fields_1n27w_19",poll_form_field="_poll_form_field_1n27w_19",styles$g={section,section_title,poll_form,poll_form_fields,poll_form_field},POLL_STATUS_OPTIONS={active:"Active polls",finished:"Finished polls"};function Polls(){const[re,ee]=reactExports.useState("active"),[ne]=useStorage(POLLS_CONTRACT),[ie]=usePolls(ne);if(!ie)return jsx$1(LoadingPollsMessage,{});const oe=Object.fromEntries(Object.keys(POLL_STATUS_OPTIONS).map(ce=>[ce,[]])),ae=new Date;for(const ce of Object.keys(ie).reverse()){const le=ie[ce],ue=parseInt(le.vote_period),he=new Date(le.timestamp);he.setDate(he.getDate()+ue),ae>he?oe.finished.push(ce):oe.active.push(ce)}return jsxs("section",{className:styles$g.section,children:[jsx$1("h1",{className:styles$g.section_title,children:"Teia polls"}),jsx$1(Select,{alt:"poll group selection",value:{value:re,label:`${POLL_STATUS_OPTIONS[re]} (${oe[re].length})`},onChange:ce=>ee(ce.value),options:Object.entries(POLL_STATUS_OPTIONS).map(([ce,le])=>({value:ce,label:`${le} (${oe[ce].length})`})),children:jsx$1(Line,{})}),jsx$1(PollGroup,{status:re,pollIds:oe[re]})]})}function PollGroup({status:re,pollIds:ee}){const ne=(()=>{switch(re){case"active":return ee.length>0?"These polls are still active. You can modify your previous vote if you want.":"There are no active polls to vote at the moment.";case"finished":return"These polls are closed and cannot be voted anymore.";default:return""}})();return jsxs(Fragment,{children:[jsx$1("p",{children:ne}),ee.length>0&&jsx$1("ul",{children:ee.map((ie,oe)=>jsxs("li",{children:[jsx$1(Poll,{pollId:ie}),oe<ee.length-1&&jsx$1(Line,{})]},ie))})]})}function CreatePolls(){const[re]=useStorage(POLLS_CONTRACT),[,ee]=usePolls(re),ne=useUserStore(oe=>oe.address),[ie]=useDaoTokenBalance(ne);return jsxs("section",{className:styles$g.section,children:[jsx$1("h1",{className:styles$g.section_title,children:"Create a new poll"}),ie===0?jsx$1("p",{children:"Only DAO members can create new polls."}):jsxs(Fragment,{children:[jsx$1("p",{children:"Use this form to create new Teia polls."}),jsx$1(PollForm,{callback:ee})]})]})}function PollForm({callback:re}){const[ee,ne]=reactExports.useState(""),[ie,oe]=reactExports.useState(""),[ae,ce]=reactExports.useState("equal"),[le,ue]=reactExports.useState(""),[he,fe]=reactExports.useState(["","",""]),me=usePollsStore(Ce=>Ce.createPoll),ge={equal:"Equal: one wallet, one vote",linear:"Linear: proportional to the amount of TEIA tokens",quadratic:"Quadratic: proportional to the square root of the amount of TEIA tokens"},ve=(Ce,Se)=>{const $e=he.slice();$e[Ce]=Se,fe($e)},ye=(Ce,Se)=>{Ce.preventDefault();const $e=he.slice();Se?$e.push(""):$e.length>1&&$e.pop(),fe($e)},be=Ce=>{Ce.preventDefault();const Se=he.map($e=>$e.trim()).filter($e=>$e!=="");me(ee,ie,ae,le,Se,re)};return jsxs("form",{className:styles$g.poll_form,onSubmit:be,children:[jsxs("div",{className:styles$g.poll_form_fields,children:[jsx$1(SimpleInput,{type:"text",label:"Poll question",placeholder:"Write here the question you want to ask",minlength:"10",maxlength:"500",value:ee,onChange:ne,className:styles$g.poll_form_field,children:jsx$1(Line,{})}),jsx$1(IpfsUploader,{label:"Poll description (optional)",placeholder:"Select the file with the poll description",value:ie,onChange:oe,className:styles$g.poll_form_field,children:jsx$1(Line,{})}),jsx$1(Select,{label:"Method to use to calculate the vote weight",alt:"Vote weight method selection",value:{value:ae,label:ge[ae]},onChange:Ce=>ce(Ce.value),options:Object.entries(ge).map(([Ce,Se])=>({value:Ce,label:Se})),children:jsx$1(Line,{})}),jsx$1(SimpleInput,{type:"number",label:"Poll duration in days",placeholder:"1",min:"1",max:"30",step:"1",value:le,onChange:ue,className:styles$g.poll_form_field,children:jsx$1(Line,{})}),jsxs("div",{children:[he.map((Ce,Se)=>jsx$1(SimpleInput,{type:"text",label:`Option ${Se+1}`,placeholder:"A possible option to vote",minLength:"1",value:Ce,onChange:$e=>ve(Se,$e),className:styles$g.poll_form_field,children:jsx$1(Line,{})},Se)),jsx$1(IncrementButtons,{onClick:ye})]})]}),jsx$1(Button,{shadow_box:!0,fit:!0,children:"Create poll"})]})}const faq__container="_faq__container_191gx_1",faq__title="_faq__title_191gx_30",faq__outer__container="_faq__outer__container_191gx_36",styles$f={faq__container,faq__title,faq__outer__container},FAQ=()=>{const re=({text:ee,link:ne})=>jsx$1("li",{className:styles$f.buttons,children:jsx$1(Button,{href:ne,children:ee})});return jsxs(Page,{title:"faq",large:!0,children:[jsxs("div",{className:styles$f.faq__outer__container,children:[jsx$1("h1",{className:styles$f.faq__title,children:"FAQ"}),jsxs("ul",{className:styles$f.faq__container,children:[jsx$1(re,{text:"How do I get tezos/make a wallet?",link:"https://github.com/teia-community/teia-docs/wiki/Getting-Started-with-Tezos"}),jsx$1(re,{text:"How do I mint?",link:"https://github.com/teia-community/teia-docs/wiki/How-to-mint-%F0%9F%8C%BF"}),jsx$1(re,{text:"How do I edit my profile?",link:"https://github.com/teia-community/teia-docs/wiki/Edit-your-profile"}),jsx$1(re,{text:"How do I add/change the price of my OBJKT?",link:"https://github.com/teia-community/teia-docs/wiki/How-to-swap-%F0%9F%94%83"}),jsx$1(re,{text:"How do I burn my OBJKT?",link:"https://github.com/teia-community/teia-docs/wiki/How-to-burn-%F0%9F%94%A5"}),jsx$1(re,{text:"How do I resell an OBJKT?",link:"https://github.com/teia-community/teia-docs/wiki/How-to-resell-%F0%9F%8F%AA"})]})]}),jsx$1("div",{className:styles$f.faq__outer__container,children:jsx$1(Line,{})}),jsx$1("div",{className:styles$f.faq__outer__container,children:jsxs("ul",{className:styles$f.faq__container,children:[jsx$1(re,{text:"General FAQ",link:"https://github.com/teia-community/teia-docs/wiki/General-FAQs"}),jsx$1(re,{text:"Troubleshooting",link:"https://github.com/teia-community/teia-docs/wiki/Troubleshooting"}),jsx$1(re,{text:"Useful tools",link:"https://github.com/teia-community/teia-docs/wiki/Tools-made-by-the-community"}),jsx$1(re,{text:"User Safety",link:"https://github.com/teia-community/teia-docs/wiki/User-safety"})]})})]})};var ListCache$2=_ListCache;function stackClear$1(){this.__data__=new ListCache$2,this.size=0}var _stackClear=stackClear$1;function stackDelete$1(re){var ee=this.__data__,ne=ee.delete(re);return this.size=ee.size,ne}var _stackDelete=stackDelete$1;function stackGet$1(re){return this.__data__.get(re)}var _stackGet=stackGet$1;function stackHas$1(re){return this.__data__.has(re)}var _stackHas=stackHas$1,ListCache$1=_ListCache,Map$2=_Map,MapCache$1=_MapCache,LARGE_ARRAY_SIZE$1=200;function stackSet$1(re,ee){var ne=this.__data__;if(ne instanceof ListCache$1){var ie=ne.__data__;if(!Map$2||ie.length<LARGE_ARRAY_SIZE$1-1)return ie.push([re,ee]),this.size=++ne.size,this;ne=this.__data__=new MapCache$1(ie)}return ne.set(re,ee),this.size=ne.size,this}var _stackSet=stackSet$1,ListCache=_ListCache,stackClear=_stackClear,stackDelete=_stackDelete,stackGet=_stackGet,stackHas=_stackHas,stackSet=_stackSet;function Stack$2(re){var ee=this.__data__=new ListCache(re);this.size=ee.size}Stack$2.prototype.clear=stackClear;Stack$2.prototype.delete=stackDelete;Stack$2.prototype.get=stackGet;Stack$2.prototype.has=stackHas;Stack$2.prototype.set=stackSet;var _Stack=Stack$2,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd$1(re){return this.__data__.set(re,HASH_UNDEFINED),this}var _setCacheAdd=setCacheAdd$1;function setCacheHas$1(re){return this.__data__.has(re)}var _setCacheHas=setCacheHas$1,MapCache=_MapCache,setCacheAdd=_setCacheAdd,setCacheHas=_setCacheHas;function SetCache$2(re){var ee=-1,ne=re==null?0:re.length;for(this.__data__=new MapCache;++ee<ne;)this.add(re[ee])}SetCache$2.prototype.add=SetCache$2.prototype.push=setCacheAdd;SetCache$2.prototype.has=setCacheHas;var _SetCache=SetCache$2;function arraySome$1(re,ee){for(var ne=-1,ie=re==null?0:re.length;++ne<ie;)if(ee(re[ne],ne,re))return!0;return!1}var _arraySome=arraySome$1;function cacheHas$2(re,ee){return re.has(ee)}var _cacheHas=cacheHas$2,SetCache$1=_SetCache,arraySome=_arraySome,cacheHas$1=_cacheHas,COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays$2(re,ee,ne,ie,oe,ae){var ce=ne&COMPARE_PARTIAL_FLAG$5,le=re.length,ue=ee.length;if(le!=ue&&!(ce&&ue>le))return!1;var he=ae.get(re),fe=ae.get(ee);if(he&&fe)return he==ee&&fe==re;var me=-1,ge=!0,ve=ne&COMPARE_UNORDERED_FLAG$3?new SetCache$1:void 0;for(ae.set(re,ee),ae.set(ee,re);++me<le;){var ye=re[me],be=ee[me];if(ie)var Ce=ce?ie(be,ye,me,ee,re,ae):ie(ye,be,me,re,ee,ae);if(Ce!==void 0){if(Ce)continue;ge=!1;break}if(ve){if(!arraySome(ee,function(Se,$e){if(!cacheHas$1(ve,$e)&&(ye===Se||oe(ye,Se,ne,ie,ae)))return ve.push($e)})){ge=!1;break}}else if(!(ye===be||oe(ye,be,ne,ie,ae))){ge=!1;break}}return ae.delete(re),ae.delete(ee),ge}var _equalArrays=equalArrays$2,root$4=_root,Uint8Array$2=root$4.Uint8Array,_Uint8Array=Uint8Array$2;function mapToArray$1(re){var ee=-1,ne=Array(re.size);return re.forEach(function(ie,oe){ne[++ee]=[oe,ie]}),ne}var _mapToArray=mapToArray$1;function setToArray$3(re){var ee=-1,ne=Array(re.size);return re.forEach(function(ie){ne[++ee]=ie}),ne}var _setToArray=setToArray$3,Symbol$1=_Symbol,Uint8Array$1=_Uint8Array,eq$1=eq_1,equalArrays$1=_equalArrays,mapToArray=_mapToArray,setToArray$2=_setToArray,COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$2="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag$1(re,ee,ne,ie,oe,ae,ce){switch(ne){case dataViewTag$2:if(re.byteLength!=ee.byteLength||re.byteOffset!=ee.byteOffset)return!1;re=re.buffer,ee=ee.buffer;case arrayBufferTag$1:return!(re.byteLength!=ee.byteLength||!ae(new Uint8Array$1(re),new Uint8Array$1(ee)));case boolTag$1:case dateTag$1:case numberTag$2:return eq$1(+re,+ee);case errorTag$1:return re.name==ee.name&&re.message==ee.message;case regexpTag$1:case stringTag$1:return re==ee+"";case mapTag$2:var le=mapToArray;case setTag$2:var ue=ie&COMPARE_PARTIAL_FLAG$4;if(le||(le=setToArray$2),re.size!=ee.size&&!ue)return!1;var he=ce.get(re);if(he)return he==ee;ie|=COMPARE_UNORDERED_FLAG$2,ce.set(re,ee);var fe=equalArrays$1(le(re),le(ee),ie,oe,ae,ce);return ce.delete(re),fe;case symbolTag:if(symbolValueOf)return symbolValueOf.call(re)==symbolValueOf.call(ee)}return!1}var _equalByTag=equalByTag$1,arrayPush=_arrayPush,isArray$6=isArray_1;function baseGetAllKeys$1(re,ee,ne){var ie=ee(re);return isArray$6(re)?ie:arrayPush(ie,ne(re))}var _baseGetAllKeys=baseGetAllKeys$1;function arrayFilter$1(re,ee){for(var ne=-1,ie=re==null?0:re.length,oe=0,ae=[];++ne<ie;){var ce=re[ne];ee(ce,ne,re)&&(ae[oe++]=ce)}return ae}var _arrayFilter=arrayFilter$1;function stubArray$1(){return[]}var stubArray_1=stubArray$1,arrayFilter=_arrayFilter,stubArray=stubArray_1,objectProto$5=Object.prototype,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols$1=nativeGetSymbols?function(re){return re==null?[]:(re=Object(re),arrayFilter(nativeGetSymbols(re),function(ee){return propertyIsEnumerable.call(re,ee)}))}:stubArray,_getSymbols=getSymbols$1;function baseTimes$1(re,ee){for(var ne=-1,ie=Array(re);++ne<re;)ie[ne]=ee(ne);return ie}var _baseTimes=baseTimes$1,isBuffer$2={exports:{}};function stubFalse(){return!1}var stubFalse_1=stubFalse;isBuffer$2.exports;(function(re,ee){var ne=_root,ie=stubFalse_1,oe=ee&&!ee.nodeType&&ee,ae=oe&&!0&&re&&!re.nodeType&&re,ce=ae&&ae.exports===oe,le=ce?ne.Buffer:void 0,ue=le?le.isBuffer:void 0,he=ue||ie;re.exports=he})(isBuffer$2,isBuffer$2.exports);var isBufferExports=isBuffer$2.exports,MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex$3(re,ee){var ne=typeof re;return ee=ee??MAX_SAFE_INTEGER$1,!!ee&&(ne=="number"||ne!="symbol"&&reIsUint.test(re))&&re>-1&&re%1==0&&re<ee}var _isIndex=isIndex$3,MAX_SAFE_INTEGER=9007199254740991;function isLength$3(re){return typeof re=="number"&&re>-1&&re%1==0&&re<=MAX_SAFE_INTEGER}var isLength_1=isLength$3,baseGetTag$2=_baseGetTag,isLength$2=isLength_1,isObjectLike$2=isObjectLike_1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$1="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$1]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag]=typedArrayTags[setTag$1]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray$1(re){return isObjectLike$2(re)&&isLength$2(re.length)&&!!typedArrayTags[baseGetTag$2(re)]}var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$2(re){return function(ee){return re(ee)}}var _baseUnary=baseUnary$2,_nodeUtil={exports:{}};_nodeUtil.exports;(function(re,ee){var ne=_freeGlobal,ie=ee&&!ee.nodeType&&ee,oe=ie&&!0&&re&&!re.nodeType&&re,ae=oe&&oe.exports===ie,ce=ae&&ne.process,le=function(){try{var ue=oe&&oe.require&&oe.require("util").types;return ue||ce&&ce.binding&&ce.binding("util")}catch{}}();re.exports=le})(_nodeUtil,_nodeUtil.exports);var _nodeUtilExports=_nodeUtil.exports,baseIsTypedArray=_baseIsTypedArray,baseUnary$1=_baseUnary,nodeUtil=_nodeUtilExports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray$2=nodeIsTypedArray?baseUnary$1(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray$2,baseTimes=_baseTimes,isArguments$1=isArguments_1,isArray$5=isArray_1,isBuffer$1=isBufferExports,isIndex$2=_isIndex,isTypedArray$1=isTypedArray_1,objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function arrayLikeKeys$1(re,ee){var ne=isArray$5(re),ie=!ne&&isArguments$1(re),oe=!ne&&!ie&&isBuffer$1(re),ae=!ne&&!ie&&!oe&&isTypedArray$1(re),ce=ne||ie||oe||ae,le=ce?baseTimes(re.length,String):[],ue=le.length;for(var he in re)(ee||hasOwnProperty$3.call(re,he))&&!(ce&&(he=="length"||oe&&(he=="offset"||he=="parent")||ae&&(he=="buffer"||he=="byteLength"||he=="byteOffset")||isIndex$2(he,ue)))&&le.push(he);return le}var _arrayLikeKeys=arrayLikeKeys$1,objectProto$3=Object.prototype;function isPrototype$1(re){var ee=re&&re.constructor,ne=typeof ee=="function"&&ee.prototype||objectProto$3;return re===ne}var _isPrototype=isPrototype$1;function overArg$1(re,ee){return function(ne){return re(ee(ne))}}var _overArg=overArg$1,overArg=_overArg,nativeKeys$1=overArg(Object.keys,Object),_nativeKeys=nativeKeys$1,isPrototype=_isPrototype,nativeKeys=_nativeKeys,objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeys$1(re){if(!isPrototype(re))return nativeKeys(re);var ee=[];for(var ne in Object(re))hasOwnProperty$2.call(re,ne)&&ne!="constructor"&&ee.push(ne);return ee}var _baseKeys=baseKeys$1,isFunction$1=isFunction_1,isLength$1=isLength_1;function isArrayLike$4(re){return re!=null&&isLength$1(re.length)&&!isFunction$1(re)}var isArrayLike_1=isArrayLike$4,arrayLikeKeys=_arrayLikeKeys,baseKeys=_baseKeys,isArrayLike$3=isArrayLike_1;function keys$3(re){return isArrayLike$3(re)?arrayLikeKeys(re):baseKeys(re)}var keys_1=keys$3,baseGetAllKeys=_baseGetAllKeys,getSymbols=_getSymbols,keys$2=keys_1;function getAllKeys$1(re){return baseGetAllKeys(re,keys$2,getSymbols)}var _getAllKeys=getAllKeys$1,getAllKeys=_getAllKeys,COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects$1(re,ee,ne,ie,oe,ae){var ce=ne&COMPARE_PARTIAL_FLAG$3,le=getAllKeys(re),ue=le.length,he=getAllKeys(ee),fe=he.length;if(ue!=fe&&!ce)return!1;for(var me=ue;me--;){var ge=le[me];if(!(ce?ge in ee:hasOwnProperty$1.call(ee,ge)))return!1}var ve=ae.get(re),ye=ae.get(ee);if(ve&&ye)return ve==ee&&ye==re;var be=!0;ae.set(re,ee),ae.set(ee,re);for(var Ce=ce;++me<ue;){ge=le[me];var Se=re[ge],$e=ee[ge];if(ie)var Te=ce?ie($e,Se,ge,ee,re,ae):ie(Se,$e,ge,re,ee,ae);if(!(Te===void 0?Se===$e||oe(Se,$e,ne,ie,ae):Te)){be=!1;break}Ce||(Ce=ge=="constructor")}if(be&&!Ce){var Ne=re.constructor,Ie=ee.constructor;Ne!=Ie&&"constructor"in re&&"constructor"in ee&&!(typeof Ne=="function"&&Ne instanceof Ne&&typeof Ie=="function"&&Ie instanceof Ie)&&(be=!1)}return ae.delete(re),ae.delete(ee),be}var _equalObjects=equalObjects$1,getNative$3=_getNative,root$3=_root,DataView$2=getNative$3(root$3,"DataView"),_DataView=DataView$2,getNative$2=_getNative,root$2=_root,Promise$2=getNative$2(root$2,"Promise"),_Promise=Promise$2,getNative$1=_getNative,root$1=_root,Set$3=getNative$1(root$1,"Set"),_Set=Set$3,getNative=_getNative,root=_root,WeakMap$2=getNative(root,"WeakMap"),_WeakMap=WeakMap$2,DataView$1=_DataView,Map$1=_Map,Promise$1=_Promise,Set$2=_Set,WeakMap$1=_WeakMap,baseGetTag$1=_baseGetTag,toSource=_toSource,mapTag="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$1),getTag$1=baseGetTag$1;(DataView$1&&getTag$1(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag$1(new Map$1)!=mapTag||Promise$1&&getTag$1(Promise$1.resolve())!=promiseTag||Set$2&&getTag$1(new Set$2)!=setTag||WeakMap$1&&getTag$1(new WeakMap$1)!=weakMapTag)&&(getTag$1=function(re){var ee=baseGetTag$1(re),ne=ee==objectTag$1?re.constructor:void 0,ie=ne?toSource(ne):"";if(ie)switch(ie){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag;case promiseCtorString:return promiseTag;case setCtorString:return setTag;case weakMapCtorString:return weakMapTag}return ee});var _getTag=getTag$1,Stack$1=_Stack,equalArrays=_equalArrays,equalByTag=_equalByTag,equalObjects=_equalObjects,getTag=_getTag,isArray$4=isArray_1,isBuffer=isBufferExports,isTypedArray=isTypedArray_1,COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep$1(re,ee,ne,ie,oe,ae){var ce=isArray$4(re),le=isArray$4(ee),ue=ce?arrayTag:getTag(re),he=le?arrayTag:getTag(ee);ue=ue==argsTag?objectTag:ue,he=he==argsTag?objectTag:he;var fe=ue==objectTag,me=he==objectTag,ge=ue==he;if(ge&&isBuffer(re)){if(!isBuffer(ee))return!1;ce=!0,fe=!1}if(ge&&!fe)return ae||(ae=new Stack$1),ce||isTypedArray(re)?equalArrays(re,ee,ne,ie,oe,ae):equalByTag(re,ee,ue,ne,ie,oe,ae);if(!(ne&COMPARE_PARTIAL_FLAG$2)){var ve=fe&&hasOwnProperty.call(re,"__wrapped__"),ye=me&&hasOwnProperty.call(ee,"__wrapped__");if(ve||ye){var be=ve?re.value():re,Ce=ye?ee.value():ee;return ae||(ae=new Stack$1),oe(be,Ce,ne,ie,ae)}}return ge?(ae||(ae=new Stack$1),equalObjects(re,ee,ne,ie,oe,ae)):!1}var _baseIsEqualDeep=baseIsEqualDeep$1,baseIsEqualDeep=_baseIsEqualDeep,isObjectLike$1=isObjectLike_1;function baseIsEqual$2(re,ee,ne,ie,oe){return re===ee?!0:re==null||ee==null||!isObjectLike$1(re)&&!isObjectLike$1(ee)?re!==re&&ee!==ee:baseIsEqualDeep(re,ee,ne,ie,baseIsEqual$2,oe)}var _baseIsEqual=baseIsEqual$2,Stack=_Stack,baseIsEqual$1=_baseIsEqual,COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch$1(re,ee,ne,ie){var oe=ne.length,ae=oe,ce=!ie;if(re==null)return!ae;for(re=Object(re);oe--;){var le=ne[oe];if(ce&&le[2]?le[1]!==re[le[0]]:!(le[0]in re))return!1}for(;++oe<ae;){le=ne[oe];var ue=le[0],he=re[ue],fe=le[1];if(ce&&le[2]){if(he===void 0&&!(ue in re))return!1}else{var me=new Stack;if(ie)var ge=ie(he,fe,ue,re,ee,me);if(!(ge===void 0?baseIsEqual$1(fe,he,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,ie,me):ge))return!1}}return!0}var _baseIsMatch=baseIsMatch$1,isObject$3=isObject_1;function isStrictComparable$2(re){return re===re&&!isObject$3(re)}var _isStrictComparable=isStrictComparable$2,isStrictComparable$1=_isStrictComparable,keys$1=keys_1;function getMatchData$1(re){for(var ee=keys$1(re),ne=ee.length;ne--;){var ie=ee[ne],oe=re[ie];ee[ne]=[ie,oe,isStrictComparable$1(oe)]}return ee}var _getMatchData=getMatchData$1;function matchesStrictComparable$2(re,ee){return function(ne){return ne==null?!1:ne[re]===ee&&(ee!==void 0||re in Object(ne))}}var _matchesStrictComparable=matchesStrictComparable$2,baseIsMatch=_baseIsMatch,getMatchData=_getMatchData,matchesStrictComparable$1=_matchesStrictComparable;function baseMatches$1(re){var ee=getMatchData(re);return ee.length==1&&ee[0][2]?matchesStrictComparable$1(ee[0][0],ee[0][1]):function(ne){return ne===re||baseIsMatch(ne,re,ee)}}var _baseMatches=baseMatches$1;function baseHasIn$1(re,ee){return re!=null&&ee in Object(re)}var _baseHasIn=baseHasIn$1,castPath=_castPath,isArguments=isArguments_1,isArray$3=isArray_1,isIndex$1=_isIndex,isLength=isLength_1,toKey$2=_toKey;function hasPath$1(re,ee,ne){ee=castPath(ee,re);for(var ie=-1,oe=ee.length,ae=!1;++ie<oe;){var ce=toKey$2(ee[ie]);if(!(ae=re!=null&&ne(re,ce)))break;re=re[ce]}return ae||++ie!=oe?ae:(oe=re==null?0:re.length,!!oe&&isLength(oe)&&isIndex$1(ce,oe)&&(isArray$3(re)||isArguments(re)))}var _hasPath=hasPath$1,baseHasIn=_baseHasIn,hasPath=_hasPath;function hasIn$1(re,ee){return re!=null&&hasPath(re,ee,baseHasIn)}var hasIn_1=hasIn$1,baseIsEqual=_baseIsEqual,get$1=get_1,hasIn=hasIn_1,isKey$2=_isKey,isStrictComparable=_isStrictComparable,matchesStrictComparable=_matchesStrictComparable,toKey$1=_toKey,COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty$1(re,ee){return isKey$2(re)&&isStrictComparable(ee)?matchesStrictComparable(toKey$1(re),ee):function(ne){var ie=get$1(ne,re);return ie===void 0&&ie===ee?hasIn(ne,re):baseIsEqual(ee,ie,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}var _baseMatchesProperty=baseMatchesProperty$1;function identity$2(re){return re}var identity_1=identity$2;function baseProperty$1(re){return function(ee){return ee==null?void 0:ee[re]}}var _baseProperty=baseProperty$1,baseGet$2=_baseGet;function basePropertyDeep$1(re){return function(ee){return baseGet$2(ee,re)}}var _basePropertyDeep=basePropertyDeep$1,baseProperty=_baseProperty,basePropertyDeep=_basePropertyDeep,isKey$1=_isKey,toKey=_toKey;function property$1(re){return isKey$1(re)?baseProperty(toKey(re)):basePropertyDeep(re)}var property_1=property$1,baseMatches=_baseMatches,baseMatchesProperty=_baseMatchesProperty,identity$1=identity_1,isArray$2=isArray_1,property=property_1;function baseIteratee$2(re){return typeof re=="function"?re:re==null?identity$1:typeof re=="object"?isArray$2(re)?baseMatchesProperty(re[0],re[1]):baseMatches(re):property(re)}var _baseIteratee=baseIteratee$2;function baseFindIndex$1(re,ee,ne,ie){for(var oe=re.length,ae=ne+(ie?1:-1);ie?ae--:++ae<oe;)if(ee(re[ae],ae,re))return ae;return-1}var _baseFindIndex=baseFindIndex$1;function baseIsNaN$1(re){return re!==re}var _baseIsNaN=baseIsNaN$1;function strictIndexOf$1(re,ee,ne){for(var ie=ne-1,oe=re.length;++ie<oe;)if(re[ie]===ee)return ie;return-1}var _strictIndexOf=strictIndexOf$1,baseFindIndex=_baseFindIndex,baseIsNaN=_baseIsNaN,strictIndexOf=_strictIndexOf;function baseIndexOf$1(re,ee,ne){return ee===ee?strictIndexOf(re,ee,ne):baseFindIndex(re,baseIsNaN,ne)}var _baseIndexOf=baseIndexOf$1,baseIndexOf=_baseIndexOf;function arrayIncludes$1(re,ee){var ne=re==null?0:re.length;return!!ne&&baseIndexOf(re,ee,0)>-1}var _arrayIncludes=arrayIncludes$1;function arrayIncludesWith$1(re,ee,ne){for(var ie=-1,oe=re==null?0:re.length;++ie<oe;)if(ne(ee,re[ie]))return!0;return!1}var _arrayIncludesWith=arrayIncludesWith$1;function noop$1(){}var noop_1=noop$1,Set$1=_Set,noop=noop_1,setToArray$1=_setToArray,INFINITY$1=1/0,createSet$1=Set$1&&1/setToArray$1(new Set$1([,-0]))[1]==INFINITY$1?function(re){return new Set$1(re)}:noop,_createSet=createSet$1,SetCache=_SetCache,arrayIncludes=_arrayIncludes,arrayIncludesWith=_arrayIncludesWith,cacheHas=_cacheHas,createSet=_createSet,setToArray=_setToArray,LARGE_ARRAY_SIZE=200;function baseUniq$2(re,ee,ne){var ie=-1,oe=arrayIncludes,ae=re.length,ce=!0,le=[],ue=le;if(ne)ce=!1,oe=arrayIncludesWith;else if(ae>=LARGE_ARRAY_SIZE){var he=ee?null:createSet(re);if(he)return setToArray(he);ce=!1,oe=cacheHas,ue=new SetCache}else ue=ee?[]:le;e:for(;++ie<ae;){var fe=re[ie],me=ee?ee(fe):fe;if(fe=ne||fe!==0?fe:0,ce&&me===me){for(var ge=ue.length;ge--;)if(ue[ge]===me)continue e;ee&&ue.push(me),le.push(fe)}else oe(ue,me,ne)||(ue!==le&&ue.push(me),le.push(fe))}return le}var _baseUniq=baseUniq$2,baseIteratee$1=_baseIteratee,baseUniq$1=_baseUniq;function uniqBy(re,ee){return re&&re.length?baseUniq$1(re,baseIteratee$1(ee)):[]}var uniqBy_1=uniqBy;const uniqBy$1=getDefaultExportFromCjs(uniqBy_1);function NewObjktsFeed(){return jsx$1(TokenCollection,{feeds_menu:!0,label:"New OBJKTs",namespace:"new-objkts-feed",maxItems:600,postProcessTokens:re=>uniqBy$1(re,"artist_address"),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query getNewObjkt($limit: Int!) {
          tokens(
            where: { editions: { _gt: "0" }, metadata_status: { _eq: "processed" }, fa2_address: { _eq: "${HEN_CONTRACT_FA2}"} }
            order_by: { minted_at: desc }
            limit: $limit

          ) {
            ...baseTokenFields
          }
        }
      `})}function MimeTypeFeed({label:re,namespace:ee,mimeTypes:ne}){return jsx$1(TokenCollection,{feeds_menu:!0,label:re,namespace:ee,maxItems:600,postProcessTokens:ie=>uniqBy$1(ie,"artist_address"),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query getTokensByMimeTypes($limit: Int!) {
          tokens(where: { mime_type: {_in : [${ne.map(ie=>`"${ie}"`).join(", ")}] }, editions : { _neq : 0 }, metadata_status: { _eq: "processed" }, fa2_address: { _eq: "${HEN_CONTRACT_FA2}"}}, order_by: { minted_at: desc }, limit: $limit) {
              ...baseTokenFields
          }
        }
      `})}function GlbFeed(){return jsx$1(MimeTypeFeed,{label:"3D OBJKTs",namespace:"glb-feed",mimeTypes:["model/gltf-binary"]})}function AudioFeed(){return jsx$1(MimeTypeFeed,{label:"Audio OBJKTs",namespace:"audio-feed",mimeTypes:["audio/ogg","audio/wav","audio/mpeg","audio/vorbis","audio/mp4"]})}function MidiFeed(){return jsx$1(MimeTypeFeed,{label:"Midi OBJKTs",namespace:"midi-feed",mimeTypes:["audio/mid","audio/midi"]})}function VideoFeed(){return jsx$1(MimeTypeFeed,{label:"Video OBJKTs",namespace:"video-feed",mimeTypes:["video/mp4"]})}function PdfFeed(){return jsx$1(MimeTypeFeed,{label:"PDF OBJKTs",namespace:"pdf-feed",mimeTypes:["application/pdf"]})}function MarkdownFeed(){return jsx$1(MimeTypeFeed,{label:"Markdown OBJKTs",namespace:"md-feed",mimeTypes:["text/markdown"]})}function TextFeed(){return jsx$1(MimeTypeFeed,{label:"Text OBJKTs",namespace:"txt-feed",mimeTypes:["text/plain"]})}function ImageFeed(){return jsx$1(MimeTypeFeed,{label:"Image OBJKTs",namespace:"image-feed",mimeTypes:["image/jpeg","image/png","image/jpg"]})}function HtmlSvgFeed(){return jsx$1(MimeTypeFeed,{label:"Interactive OBJKTs (HTML or SVG)",namespace:"html-svg-feed",mimeTypes:["application/x-directory","image/svg+xml"]})}function GifFeed(){return jsx$1(MimeTypeFeed,{label:"GIF OBJKTs",namespace:"gif-feed",mimeTypes:["image/gif"]})}function createBaseFor$1(re){return function(ee,ne,ie){for(var oe=-1,ae=Object(ee),ce=ie(ee),le=ce.length;le--;){var ue=ce[re?le:++oe];if(ne(ae[ue],ue,ae)===!1)break}return ee}}var _createBaseFor=createBaseFor$1,createBaseFor=_createBaseFor,baseFor$1=createBaseFor(),_baseFor=baseFor$1,baseFor=_baseFor,keys=keys_1;function baseForOwn$1(re,ee){return re&&baseFor(re,ee,keys)}var _baseForOwn=baseForOwn$1,isArrayLike$2=isArrayLike_1;function createBaseEach$1(re,ee){return function(ne,ie){if(ne==null)return ne;if(!isArrayLike$2(ne))return re(ne,ie);for(var oe=ne.length,ae=ee?oe:-1,ce=Object(ne);(ee?ae--:++ae<oe)&&ie(ce[ae],ae,ce)!==!1;);return ne}}var _createBaseEach=createBaseEach$1,baseForOwn=_baseForOwn,createBaseEach=_createBaseEach,baseEach$1=createBaseEach(baseForOwn),_baseEach=baseEach$1,baseEach=_baseEach,isArrayLike$1=isArrayLike_1;function baseMap$1(re,ee){var ne=-1,ie=isArrayLike$1(re)?Array(re.length):[];return baseEach(re,function(oe,ae,ce){ie[++ne]=ee(oe,ae,ce)}),ie}var _baseMap=baseMap$1;function baseSortBy$1(re,ee){var ne=re.length;for(re.sort(ee);ne--;)re[ne]=re[ne].value;return re}var _baseSortBy=baseSortBy$1,isSymbol$1=isSymbol_1;function compareAscending$1(re,ee){if(re!==ee){var ne=re!==void 0,ie=re===null,oe=re===re,ae=isSymbol$1(re),ce=ee!==void 0,le=ee===null,ue=ee===ee,he=isSymbol$1(ee);if(!le&&!he&&!ae&&re>ee||ae&&ce&&ue&&!le&&!he||ie&&ce&&ue||!ne&&ue||!oe)return 1;if(!ie&&!ae&&!he&&re<ee||he&&ne&&oe&&!ie&&!ae||le&&ne&&oe||!ce&&oe||!ue)return-1}return 0}var _compareAscending=compareAscending$1,compareAscending=_compareAscending;function compareMultiple$1(re,ee,ne){for(var ie=-1,oe=re.criteria,ae=ee.criteria,ce=oe.length,le=ne.length;++ie<ce;){var ue=compareAscending(oe[ie],ae[ie]);if(ue){if(ie>=le)return ue;var he=ne[ie];return ue*(he=="desc"?-1:1)}}return re.index-ee.index}var _compareMultiple=compareMultiple$1,arrayMap=_arrayMap,baseGet$1=_baseGet,baseIteratee=_baseIteratee,baseMap=_baseMap,baseSortBy=_baseSortBy,baseUnary=_baseUnary,compareMultiple=_compareMultiple,identity=identity_1,isArray$1=isArray_1;function baseOrderBy$1(re,ee,ne){ee.length?ee=arrayMap(ee,function(ae){return isArray$1(ae)?function(ce){return baseGet$1(ce,ae.length===1?ae[0]:ae)}:ae}):ee=[identity];var ie=-1;ee=arrayMap(ee,baseUnary(baseIteratee));var oe=baseMap(re,function(ae,ce,le){var ue=arrayMap(ee,function(he){return he(ae)});return{criteria:ue,index:++ie,value:ae}});return baseSortBy(oe,function(ae,ce){return compareMultiple(ae,ce,ne)})}var _baseOrderBy=baseOrderBy$1,baseOrderBy=_baseOrderBy,isArray=isArray_1;function orderBy(re,ee,ne,ie){return re==null?[]:(isArray(ee)||(ee=ee==null?[]:[ee]),ne=ie?void 0:ne,isArray(ne)||(ne=ne==null?[]:[ne]),baseOrderBy(re,ee,ne))}var orderBy_1=orderBy;const orderBy$1=getDefaultExportFromCjs(orderBy_1),tag$1="_tag_djinq_216",feed_info="_feed_info_djinq_238",styles$e={tag:tag$1,feed_info};function FundFeed({minShares:re=50,introText:ee,infoUrl:ne,contractAddress:ie,cause:oe,namespace:ae,tags:ce=null}){return jsxs(Fragment,{children:[jsxs("div",{className:styles$e.feed_info,children:[jsx$1("p",{children:ee}),jsxs("a",{href:ne,target:"_blank",rel:"noreferrer",children:["More info ",jsx$1("strong",{children:"here"})]})]}),jsx$1(TokenCollection,{feeds_menu:!0,label:`Fundraise for ${oe}`,namespace:ae,maxItems:600,extractTokensFromResponse:({tokens_by_share:le,tokens_by_tag:ue})=>orderBy$1(uniqBy$1([...flatten$4(le.map(({total_shares:he,shareholders:fe,created_tokens:me})=>flatten$4(fe.map(ge=>{if([ie].includes(ge.shareholder_address)&&ge.shares/he*100>=re)return me}).filter(ge=>ge!==void 0)))),...ue||[]].map(he=>({...he,key:he.token_id})),({key:he})=>he),["minted_at"],["desc"]),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query GetCollabTokens($limit: Int!) {
          tokens_by_share: teia_split_contracts(limit: $limit, where: {shareholders: {shareholder_address: {_eq: "${ie}"}}}) {
            contract_profile {
              name
            }
            total_shares
            shareholders {
              shareholder_address
              shares
            }
            created_tokens(where: {editions: {_gt: "0"}, metadata_status: { _eq: "processed" }, teia_meta: { is_signed: { _eq: true }}}, order_by: { minted_at: desc }) {
              ...baseTokenFields
            }
          }
          ${ce?`
            tokens_by_tag: tokens(where: {tags: {tag: {_in: [${ce.map(le=>`"${le}"`)}]}}, editions: {_gt: "0"}, metadata_status: { _eq: "processed" },}, limit: $limit, order_by: { minted_at: desc }) {
              ...baseTokenFields
            }
          `:""}
        }
      `})]})}function IranFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"This feed shows OBJKTs minted with the Iran donation address as beneficiary of at least 50% of sales volume or tagged with #Tezos4Iran"}),contractAddress:IRAN_FUNDING_CONTRACT,cause:"Iran",namespace:"iran-feed",tags:["tezos4iran","#tezos4iran"],infoUrl:"https://github.com/teia-community/teia-docs/wiki/Tezos-for-Iran"})}function PakistanFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"This feed shows OBJKTs minted with the Pakistan donation address as beneficiary of at least 50% of sales volume."}),contractAddress:PAKISTAN_FUNDING_CONTRACT,cause:"Pakistan",namespace:"pakistan-feed",infoUrl:"https://github.com/teia-community/teia-docs/wiki/Pakistan-Fundraiser"})}function UkraineFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"This feed shows OBJKTs minted with the Ukraine donation address as beneficiary of at least 50% of sales volume."}),contractAddress:UKRAINE_FUNDING_CONTRACT,cause:"Ukraine",namespace:"ukraine-feed",infoUrl:"https://github.com/teia-community/teia-docs/wiki/Ukranian-Fundraising"})}function QuakeFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"Tezos community initiative to support those affected by the recent earthquake in Turkey and Syria. Given the events in Morocco, we are channeling our current support toward emergency relief there."}),contractAddress:QUAKE_FUNDING_CONTRACT,cause:"Morocco, Turkey and Syria Earthquakes",namespace:"quake-feed",tags:["TezQuakeAid","#TezQuakeAid"],infoUrl:"https://app.joyn.xyz/space/tezquakeaid-ec7f1f650671"})}function MoroccoQuakeFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"Tezos community initiative to support those affected by the recent earthquake in Morocco."}),contractAddress:MOROCCO_QUAKE_FUNDING_CONTRACT,cause:"Morocco Earthquakes",namespace:"morocco-quake-feed",tags:["TezQuakeAid","#TezQuakeAid"],infoUrl:"https://app.joyn.xyz/space/tezquakeaid-ec7f1f650671"})}function Tez4PalFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"The Tezos Fundraiser #Tez4Pal, supporting Gaza civilians."}),contractAddress:TEZ4PAL_FUNDING_ADDRESS,cause:"Supporting Gaza civilians",namespace:"tez4pal",tags:["Tez4Pal","#Tez4Pal","tez4pal","#tez4pal"],infoUrl:"https://twitter.com/LN0ir/status/1745946304742576400"})}function Art4ArtistsFeed(){return jsx$1(FundFeed,{introText:jsx$1(Fragment,{children:"#Art4Artists Breadfond"}),contractAddress:ART4ARTISTS_BREADFOND_CONTRACT,cause:"Art4Artists",namespace:"art4artists",tags:["Art4Artists","#Art4Artists"],infoUrl:"https://x.com/EggsUnknow/status/1848805355620602309"})}var baseUniq=_baseUniq;function uniq(re){return re&&re.length?baseUniq(re):[]}var uniq_1=uniq;const uniq$1=getDefaultExportFromCjs(uniq_1);async function fetchAllFrensAddresses(re){const{errors:ee,data:ne}=await fetchGraphQL(distExports.gql`
      query collectorGallery($address: String!) {
        holdings(
          where: {
            holder_address: { _eq: $address }
            amount: { _gt: 0 }
            token: { artist_address: { _neq: $address } }
          }
          order_by: { token_id: desc }
        ) {
          token {
            artist_address
          }
        }
      }
    `,"collectorGallery",{address:re});return ee?(console.error(ee),[]):uniq$1(ne.holdings.map(ie=>ie.token.artist_address))}function FriendsFeed(){const re=useParams(),{data:ee}=useSWR(["/feed/friends",re.address],async()=>fetchAllFrensAddresses(re.address),{revalidateIfStale:!1,revalidateOnFocus:!1});return jsxs(Fragment,{children:[jsx$1("div",{className:styles$e.feed_info,children:jsx$1("p",{children:"This feed show OBJKTs of your collectors and artists you collected from."})}),jsx$1(TokenCollection,{feeds_menu:!0,disable:!ee,label:"Friends Feed",namespace:"friends",variables:{wallets:ee},swrParams:[re.address],query:distExports.gql`
          ${BaseTokenFieldsFragment}
          query frensGallery($wallets: [String!], $limit: Int!) {
            tokens(
              where: {
                editions: { _gt: 0 }
                artist_address: { _in: $wallets }
                metadata_status: { _eq: "processed" }
              }
              order_by: { minted_at: desc }
              limit: $limit
            ) {
              ...baseTokenFields
            }
          }
        `})]})}var nativeFloor=Math.floor,nativeRandom$1=Math.random;function baseRandom$1(re,ee){return re+nativeFloor(nativeRandom$1()*(ee-re+1))}var _baseRandom=baseRandom$1,eq=eq_1,isArrayLike=isArrayLike_1,isIndex=_isIndex,isObject$2=isObject_1;function isIterateeCall$1(re,ee,ne){if(!isObject$2(ne))return!1;var ie=typeof ee;return(ie=="number"?isArrayLike(ne)&&isIndex(ee,ne.length):ie=="string"&&ee in ne)?eq(ne[ee],re):!1}var _isIterateeCall=isIterateeCall$1,reWhitespace=/\s/;function trimmedEndIndex$1(re){for(var ee=re.length;ee--&&reWhitespace.test(re.charAt(ee)););return ee}var _trimmedEndIndex=trimmedEndIndex$1,trimmedEndIndex=_trimmedEndIndex,reTrimStart=/^\s+/;function baseTrim$1(re){return re&&re.slice(0,trimmedEndIndex(re)+1).replace(reTrimStart,"")}var _baseTrim=baseTrim$1,baseTrim=_baseTrim,isObject$1=isObject_1,isSymbol=isSymbol_1,NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber$1(re){if(typeof re=="number")return re;if(isSymbol(re))return NAN;if(isObject$1(re)){var ee=typeof re.valueOf=="function"?re.valueOf():re;re=isObject$1(ee)?ee+"":ee}if(typeof re!="string")return re===0?re:+re;re=baseTrim(re);var ne=reIsBinary.test(re);return ne||reIsOctal.test(re)?freeParseInt(re.slice(2),ne?2:8):reIsBadHex.test(re)?NAN:+re}var toNumber_1=toNumber$1,toNumber=toNumber_1,INFINITY=1/0,MAX_INTEGER=17976931348623157e292;function toFinite$1(re){if(!re)return re===0?re:0;if(re=toNumber(re),re===INFINITY||re===-INFINITY){var ee=re<0?-1:1;return ee*MAX_INTEGER}return re===re?re:0}var toFinite_1=toFinite$1,baseRandom=_baseRandom,isIterateeCall=_isIterateeCall,toFinite=toFinite_1,freeParseFloat=parseFloat,nativeMin=Math.min,nativeRandom=Math.random;function random(re,ee,ne){if(ne&&typeof ne!="boolean"&&isIterateeCall(re,ee,ne)&&(ee=ne=void 0),ne===void 0&&(typeof ee=="boolean"?(ne=ee,ee=void 0):typeof re=="boolean"&&(ne=re,re=void 0)),re===void 0&&ee===void 0?(re=0,ee=1):(re=toFinite(re),ee===void 0?(ee=re,re=0):ee=toFinite(ee)),re>ee){var ie=re;re=ee,ee=ie}if(ne||re%1||ee%1){var oe=nativeRandom();return nativeMin(re+oe*(ee-re+freeParseFloat("1e-"+((oe+"").length-1))),ee)}return baseRandom(re,ee)}var random_1=random;const random$1=getDefaultExportFromCjs(random_1);function RandomFeed({firstId:re=196,lastId:ee=1592463,max:ne=200}){const ie=reactExports.useMemo(()=>{const oe=new Set;for(;oe.size<ne;)oe.add(`${random$1(re,ee)}`);return Array.from(oe)},[re,ee,ne]);return jsx$1(TokenCollection,{feeds_menu:!0,label:"Random",namespace:"random-feed",enableInfinityScroll:!1,variables:{tokenIds:ie},maxItems:200,query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query Objkts($tokenIds: [String!] = "", $limit: Int!) {
          tokens(where: { token_id: { _in: $tokenIds }, editions: { _neq: 0 }, fa2_address: { _eq: "${HEN_CONTRACT_FA2}" } }, limit: $limit) {
            ...baseTokenFields
          }
        }
      `})}function RecentSalesFeed(){return jsx$1(TokenCollection,{feeds_menu:!0,label:"Recent Sales",namespace:"recent-sales-feed",resultsPath:"events",tokenPath:"token",keyPath:"token.token_id",maxItems:600,postProcessTokens:re=>uniqBy$1(uniqBy$1(re,"token_id"),"artist_address"),query:distExports.gql`
        ${BaseTokenFieldsFragment}
        query getLatestSales($limit: Int!) {
          events(limit: $limit, order_by: [{level: desc, opid: desc}], where: {token: {metadata_status: {_eq: "processed"}}, implements: {_eq: "SALE"}, fa2_address: {_eq: "${HEN_CONTRACT_FA2}"}}) {
            type
            timestamp
            token {
              ...baseTokenFields
            }
          }
        }
      `})}function SearchFeed(){const[re]=useSearchParams(),ee=re.get("term")||"";return jsx$1(TagFeed,{feeds_menu:!1,label:"Search",namespace:"search-feed",tag:ee})}const container$7="_container_dvrm0_216",subjkt_icon="_subjkt_icon_dvrm0_222",flex="_flex_dvrm0_229",description="_description_dvrm0_238",user="_user_dvrm0_243",user_box="_user_box_dvrm0_250",styles$d={container:container$7,subjkt_icon,flex,description,user,user_box};function SubjktsSearchResults(){const[re]=useSearchParams(),ee=re.get("term")||"",{data:ne}=useSWR(["subjkts-search",ee],async(oe,ae)=>(await fetchGraphQL(distExports.gql`
          query getSubjkts($subjkt: String!) {
            teia_users(where: { name: { _ilike: $subjkt } }) {
              user_address
              name
              metadata {
                data
              }
            }
          }
        `,"getSubjkts",{subjkt:`%${ae}%`})).data,{revalidateIfStale:!1,revalidateOnFocus:!1,use:[laggy]}),ie=uniqBy$1(get$5(ne,"teia_users")||[],({name:oe})=>oe).filter(({name:oe})=>oe);return ie.length?jsx$1("div",{className:styles$d.container,children:ie.map(({user_address:oe,name:ae,metadata:ce})=>{var le;return jsxs("div",{className:styles$d.subjkt_result,children:[jsxs("div",{className:styles$d.flex,children:[jsxs(Link,{className:styles$d.user_box,to:`/${encodeURIComponent(ae)}`,children:[ce.data&&jsx$1(Identicon,{className:styles$d.subjkt_icon,address:oe,logo:(le=ce.data)==null?void 0:le.identicon}),jsx$1("p",{className:styles$d.user,children:ae})]})," ",jsx$1("p",{className:styles$d.description,children:get$5(ce,"data.description")})]}),jsx$1(Line,{},`${ae}-line`)]},ae)})}):null}const DefaultFeedComponent=RecentSalesFeed,feedComponentMap={"Recent Sales":RecentSalesFeed,Art4Artists:Art4ArtistsFeed,"🏳️‍🌈 Tezospride":TagFeed,"🇮🇷 Iran":IranFeed,"Quake Aid":QuakeFeed,"🇵🇰 Pakistan":PakistanFeed,"🇺🇦 Ukraine":UkraineFeed,"🇵🇸 Tez4Pal":Tez4PalFeed,Random:RandomFeed,"New OBJKTs":NewObjktsFeed,"3D":GlbFeed,Video:VideoFeed,Image:ImageFeed,Audio:AudioFeed,"HTML & SVG":HtmlSvgFeed,PDF:PdfFeed,Markdown:MarkdownFeed,GIF:GifFeed,Friends:FriendsFeed};function Home({isSearch:re=!1}){const ee=useOutlet(),[ne]=useSearchParams(),[ie,oe]=reactExports.useState(ne.get("term")||""),ae=useNavigate(),[ce]=useLocalSettings(ue=>[ue.startFeed]),le=feedComponentMap[ce]||DefaultFeedComponent;return jsxs(Page,{feed:!re,title:"Home",children:[jsx$1(Fragment,{children:re&&jsx$1(Input$2,{type:"text",name:"search",onChange:ue=>{oe(ue)},placeholder:"Search ↵",onKeyDown:ue=>{ue.key==="Enter"&&ae({pathname:"/search",search:createSearchParams({term:ie}).toString()},{replace:!0})},value:ie})}),jsx$1(Fragment,{children:re&&ne.get("term")?jsx$1(SubjktsSearchResults,{}):null}),re?ne.get("term")?jsx$1(SearchFeed,{}):jsx$1("h1",{children:"Enter a search term"}):ee||jsx$1(le,{})]})}const defaultValuesStored={title:"",description:"",tags:"",editions:void 0,royalties:void 0,license:void 0,customLicenseData:void 0,language:void 0,nsfw:!1,photosensitive:!1,isTyped:!1},defaultValues={artifact:void 0,cover:void 0,thumbnail:void 0,getValuesStored:()=>{},updateCustomLicenseData:()=>{}},useMintStore=create$2()(subscribeWithSelector(persist((re,ee)=>({...defaultValuesStored,...defaultValues,isValid:!1,updateCustomLicenseData:ne=>{re(ie=>({...ie,customLicenseData:ne}))},reset:()=>{re({...defaultValuesStored,...defaultValues})},getValuesStored:()=>{const ne=ee();return Object.fromEntries(Object.entries(ne).filter(([ie])=>Object.keys(defaultValues).includes(ie)))},mint:async ne=>{const{proxyAddress:ie,address:oe,sync:ae,mint:ce}=useUserStore.getState(),{language:le,editions:ue,royalties:he,license:fe,customLicenseData:me,artifact:ge,title:ve,description:ye,tags:be,cover:Ce,photosensitive:Se,nsfw:$e,isMonoType:Te,reset:Ne}=ee(),Ie=useModalStore.getState().show,ke=useModalStore.getState().step,De=useModalStore.getState().close;if(!ge||!ge.file)return;if(!oe){ke("Sync Required","Sync your wallet"),await ae(),De();return}if(!ALLOWED_MIMETYPES.includes(ge.mimeType)){Ie(`File format invalid. supported formats include: ${ALLOWED_FILETYPES_LABEL.toLocaleLowerCase()}`);return}if(Ce&&!ALLOWED_COVER_MIMETYPES.includes(Ce.mimeType)){Ie(`Cover file format invalid. supported formats include: ${ALLOWED_COVER_FILETYPES_LABEL.toLocaleLowerCase()}`);return}const Oe=parseInt((ge.file.size/1024/1024).toFixed(4));if(Oe>MINT_FILESIZE){Ie(`Max file size (${Oe}). Limit is currently ${MINT_FILESIZE}MB`);return}ke("Mint","Preparing OBJKT");const Be=ie||oe;console.debug({minterAddress:Be});const Me=Se?{hazards:[METADATA_ACCESSIBILITY_HAZARDS_PHOTOSENS]}:null,Le=$e?METADATA_CONTENT_RATING_MATURE:null,{imageWidth:je,imageHeight:ze}=await getImageDimensions(ge),Ve=[MIMETYPE.ZIP,MIMETYPE.ZIP1,MIMETYPE.ZIP2].includes(ge.mimeType),He=[],We=await generateCoverAndThumbnail(Ce||ge),Ye=Ce||We.cover,Ue=We.thumbnail;if(ge.mimeType.indexOf("image")===0){const Vt={mimeType:ge.mimeType,fileSize:ge.file.size,fileName:ge.file.name};je&&ze&&(Vt.dimensions={value:`${je}x${ze}`,unit:"px"}),He.push(Vt)}else Ve?He.push({fileSize:ge.file.size,fileName:ge.file.name,mimeType:MIMETYPE.DIRECTORY}):He.push({fileSize:ge.file.size,fileName:ge.file.name,mimeType:ge.mimeType});if(ge.mimeType!==MIMETYPE.GIF){let Vt=!1;if(Ye){Vt=Ye.mimeType===MIMETYPE.GIF;const{imageWidth:Wt,imageHeight:Kt}=await getImageDimensions(Ye);Ye.format={mimeType:Ye.mimeType,fileSize:Ye.buffer.byteLength,fileName:`${removeExtension(ge.file.name)}.${Vt?"gif":extensionFromMimetype(Ye.mimeType)}`,dimensions:{value:`${Wt}x${Kt}`,unit:"px"}}}if(Ue&&!Vt){const{imageWidth:Wt,imageHeight:Kt}=await getImageDimensions(Ue);Ue.format={mimeType:Ue.mimeType,fileSize:Ue.buffer.byteLength,fileName:`${removeExtension(ge.file.name)}.${extensionFromMimetype(Ue.mimeType)}`,dimensions:{value:`${Wt}x${Kt}`,unit:"px"}}}}let Ke;if(Ve){const Vt=await prepareFilesFromZIP(ge.buffer);Ke=await prepareDirectory({name:ve,description:ye,tags:be,address:Be,files:Vt,cover:Ye,thumbnail:Ue,generateDisplayUri:!0,rights:fe==null?void 0:fe.value,rightsUri:me,language:le==null?void 0:le.value,accessibility:Me,contentRating:Le,formats:He})}else Ke=await prepareFile({name:ve,description:ye,tags:be,address:Be,file:ge,cover:Ye,thumbnail:Ue,rights:fe==null?void 0:fe.value,rightsUri:me,language:le==null?void 0:le.value,accessibility:Me,contentRating:Le,formats:He});console.debug("Calling mint with",{minterAddress:Be,amount:ue,path:Ke,royalties:he});const Xe=await ce(Be,ue,Ke,he);console.debug("success",Xe),Xe&&Ne()}}),{name:"mint",storage:createJSONStorage(()=>localStorage),onRehydrateStorage:re=>(ee,ne)=>{ne&&console.log("an error happened during hydration",ne)},version:1,partialize:re=>Object.fromEntries(Object.entries(re).filter(([ee])=>Object.keys(defaultValuesStored).includes(ee)))})));var isCheckBoxInput=re=>re.type==="checkbox",isDateObject=re=>re instanceof Date,isNullOrUndefined=re=>re==null;const isObjectType=re=>typeof re=="object";var isObject=re=>!isNullOrUndefined(re)&&!Array.isArray(re)&&isObjectType(re)&&!isDateObject(re),getEventValue=re=>isObject(re)&&re.target?isCheckBoxInput(re.target)?re.target.checked:re.target.value:re,getNodeParentName=re=>re.substring(0,re.search(/\.\d+(\.|$)/))||re,isNameInFieldArray=(re,ee)=>re.has(getNodeParentName(ee)),compact=re=>Array.isArray(re)?re.filter(Boolean):[],isUndefined=re=>re===void 0,get=(re,ee,ne)=>{if(!ee||!isObject(re))return ne;const ie=compact(ee.split(/[,[\].]+?/)).reduce((oe,ae)=>isNullOrUndefined(oe)?oe:oe[ae],re);return isUndefined(ie)||ie===re?isUndefined(re[ee])?ne:re[ee]:ie};const EVENTS={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},VALIDATION_MODE={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},INPUT_VALIDATION_RULES={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},HookFormContext=React.createContext(null),useFormContext=()=>React.useContext(HookFormContext),FormProvider=re=>{const{children:ee,...ne}=re;return React.createElement(HookFormContext.Provider,{value:ne},ee)};var getProxyFormState=(re,ee,ne,ie=!0)=>{const oe={defaultValues:ee._defaultValues};for(const ae in re)Object.defineProperty(oe,ae,{get:()=>{const ce=ae;return ee._proxyFormState[ce]!==VALIDATION_MODE.all&&(ee._proxyFormState[ce]=!ie||VALIDATION_MODE.all),ne&&(ne[ce]=!0),re[ce]}});return oe},isEmptyObject=re=>isObject(re)&&!Object.keys(re).length,shouldRenderFormState=(re,ee,ne,ie)=>{ne(re);const{name:oe,...ae}=re;return isEmptyObject(ae)||Object.keys(ae).length>=Object.keys(ee).length||Object.keys(ae).find(ce=>ee[ce]===(!ie||VALIDATION_MODE.all))},convertToArrayPayload=re=>Array.isArray(re)?re:[re],shouldSubscribeByName=(re,ee,ne)=>ne&&ee?re===ee:!re||!ee||re===ee||convertToArrayPayload(re).some(ie=>ie&&(ie.startsWith(ee)||ee.startsWith(ie)));function useSubscribe(re){const ee=React.useRef(re);ee.current=re,React.useEffect(()=>{const ne=!re.disabled&&ee.current.subject.subscribe({next:ee.current.next});return()=>{ne&&ne.unsubscribe()}},[re.disabled])}function useFormState(re){const ee=useFormContext(),{control:ne=ee.control,disabled:ie,name:oe,exact:ae}=re||{},[ce,le]=React.useState(ne._formState),ue=React.useRef(!0),he=React.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1}),fe=React.useRef(oe);return fe.current=oe,useSubscribe({disabled:ie,next:me=>ue.current&&shouldSubscribeByName(fe.current,me.name,ae)&&shouldRenderFormState(me,he.current,ne._updateFormState)&&le({...ne._formState,...me}),subject:ne._subjects.state}),React.useEffect(()=>{ue.current=!0;const me=ne._proxyFormState.isDirty&&ne._getDirty();return me!==ne._formState.isDirty&&ne._subjects.state.next({isDirty:me}),he.current.isValid&&ne._updateValid(!0),()=>{ue.current=!1}},[ne]),getProxyFormState(ce,ne,he.current,!1)}var isString=re=>typeof re=="string",generateWatchOutput=(re,ee,ne,ie,oe)=>isString(re)?(ie&&ee.watch.add(re),get(ne,re,oe)):Array.isArray(re)?re.map(ae=>(ie&&ee.watch.add(ae),get(ne,ae))):(ie&&(ee.watchAll=!0),ne),isPlainObject=re=>{const ee=re.constructor&&re.constructor.prototype;return isObject(ee)&&ee.hasOwnProperty("isPrototypeOf")},isWeb=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function cloneObject(re){let ee;const ne=Array.isArray(re);if(re instanceof Date)ee=new Date(re);else if(re instanceof Set)ee=new Set(re);else if(!(isWeb&&(re instanceof Blob||re instanceof FileList))&&(ne||isObject(re)))if(ee=ne?[]:{},!Array.isArray(re)&&!isPlainObject(re))ee=re;else for(const ie in re)ee[ie]=cloneObject(re[ie]);else return re;return ee}function useWatch(re){const ee=useFormContext(),{control:ne=ee.control,name:ie,defaultValue:oe,disabled:ae,exact:ce}=re||{},le=React.useRef(ie);le.current=ie,useSubscribe({disabled:ae,subject:ne._subjects.watch,next:fe=>{shouldSubscribeByName(le.current,fe.name,ce)&&he(cloneObject(generateWatchOutput(le.current,ne._names,fe.values||ne._formValues,!1,oe)))}});const[ue,he]=React.useState(ne._getWatch(ie,oe));return React.useEffect(()=>ne._removeUnmounted()),ue}function useController(re){const ee=useFormContext(),{name:ne,control:ie=ee.control,shouldUnregister:oe}=re,ae=isNameInFieldArray(ie._names.array,ne),ce=useWatch({control:ie,name:ne,defaultValue:get(ie._formValues,ne,get(ie._defaultValues,ne,re.defaultValue)),exact:!0}),le=useFormState({control:ie,name:ne}),ue=React.useRef(ie.register(ne,{...re.rules,value:ce}));return React.useEffect(()=>{const he=(fe,me)=>{const ge=get(ie._fields,fe);ge&&(ge._f.mount=me)};return he(ne,!0),()=>{const fe=ie._options.shouldUnregister||oe;(ae?fe&&!ie._stateFlags.action:fe)?ie.unregister(ne):he(ne,!1)}},[ne,ie,ae,oe]),{field:{name:ne,value:ce,onChange:React.useCallback(he=>ue.current.onChange({target:{value:getEventValue(he),name:ne},type:EVENTS.CHANGE}),[ne]),onBlur:React.useCallback(()=>ue.current.onBlur({target:{value:get(ie._formValues,ne),name:ne},type:EVENTS.BLUR}),[ne,ie]),ref:he=>{const fe=get(ie._fields,ne);fe&&he&&(fe._f.ref={focus:()=>he.focus(),select:()=>he.select(),setCustomValidity:me=>he.setCustomValidity(me),reportValidity:()=>he.reportValidity()})}},formState:le,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!get(le.errors,ne)},isDirty:{enumerable:!0,get:()=>!!get(le.dirtyFields,ne)},isTouched:{enumerable:!0,get:()=>!!get(le.touchedFields,ne)},error:{enumerable:!0,get:()=>get(le.errors,ne)}})}}const Controller=re=>re.render(useController(re));var appendErrors=(re,ee,ne,ie,oe)=>ee?{...ne[re],types:{...ne[re]&&ne[re].types?ne[re].types:{},[ie]:oe||!0}}:{},isKey=re=>/^\w*$/.test(re),stringToPath=re=>compact(re.replace(/["|']|\]/g,"").split(/\.|\[/));function set(re,ee,ne){let ie=-1;const oe=isKey(ee)?[ee]:stringToPath(ee),ae=oe.length,ce=ae-1;for(;++ie<ae;){const le=oe[ie];let ue=ne;if(ie!==ce){const he=re[le];ue=isObject(he)||Array.isArray(he)?he:isNaN(+oe[ie+1])?{}:[]}re[le]=ue,re=re[le]}return re}const focusFieldBy=(re,ee,ne)=>{for(const ie of ne||Object.keys(re)){const oe=get(re,ie);if(oe){const{_f:ae,...ce}=oe;if(ae&&ee(ae.name)){if(ae.ref.focus){ae.ref.focus();break}else if(ae.refs&&ae.refs[0].focus){ae.refs[0].focus();break}}else isObject(ce)&&focusFieldBy(ce,ee)}}};var getValidationModes=re=>({isOnSubmit:!re||re===VALIDATION_MODE.onSubmit,isOnBlur:re===VALIDATION_MODE.onBlur,isOnChange:re===VALIDATION_MODE.onChange,isOnAll:re===VALIDATION_MODE.all,isOnTouch:re===VALIDATION_MODE.onTouched}),isWatched=(re,ee,ne)=>!ne&&(ee.watchAll||ee.watch.has(re)||[...ee.watch].some(ie=>re.startsWith(ie)&&/^\.\w+/.test(re.slice(ie.length)))),updateFieldArrayRootError=(re,ee,ne)=>{const ie=compact(get(re,ne));return set(ie,"root",ee[ne]),set(re,ne,ie),re},isBoolean=re=>typeof re=="boolean",isFileInput=re=>re.type==="file",isFunction=re=>typeof re=="function",isHTMLElement=re=>{if(!isWeb)return!1;const ee=re?re.ownerDocument:0;return re instanceof(ee&&ee.defaultView?ee.defaultView.HTMLElement:HTMLElement)},isMessage=re=>isString(re)||React.isValidElement(re),isRadioInput=re=>re.type==="radio",isRegex=re=>re instanceof RegExp;const defaultResult={value:!1,isValid:!1},validResult={value:!0,isValid:!0};var getCheckboxValue=re=>{if(Array.isArray(re)){if(re.length>1){const ee=re.filter(ne=>ne&&ne.checked&&!ne.disabled).map(ne=>ne.value);return{value:ee,isValid:!!ee.length}}return re[0].checked&&!re[0].disabled?re[0].attributes&&!isUndefined(re[0].attributes.value)?isUndefined(re[0].value)||re[0].value===""?validResult:{value:re[0].value,isValid:!0}:validResult:defaultResult}return defaultResult};const defaultReturn={isValid:!1,value:null};var getRadioValue=re=>Array.isArray(re)?re.reduce((ee,ne)=>ne&&ne.checked&&!ne.disabled?{isValid:!0,value:ne.value}:ee,defaultReturn):defaultReturn;function getValidateError(re,ee,ne="validate"){if(isMessage(re)||Array.isArray(re)&&re.every(isMessage)||isBoolean(re)&&!re)return{type:ne,message:isMessage(re)?re:"",ref:ee}}var getValueAndMessage=re=>isObject(re)&&!isRegex(re)?re:{value:re,message:""},validateField=async(re,ee,ne,ie,oe)=>{const{ref:ae,refs:ce,required:le,maxLength:ue,minLength:he,min:fe,max:me,pattern:ge,validate:ve,name:ye,valueAsNumber:be,mount:Ce,disabled:Se}=re._f,$e=get(ee,ye);if(!Ce||Se)return{};const Te=ce?ce[0]:ae,Ne=je=>{ie&&Te.reportValidity&&(Te.setCustomValidity(isBoolean(je)?"":je||""),Te.reportValidity())},Ie={},ke=isRadioInput(ae),De=isCheckBoxInput(ae),Oe=ke||De,Be=(be||isFileInput(ae))&&isUndefined(ae.value)&&isUndefined($e)||isHTMLElement(ae)&&ae.value===""||$e===""||Array.isArray($e)&&!$e.length,Me=appendErrors.bind(null,ye,ne,Ie),Le=(je,ze,Ve,He=INPUT_VALIDATION_RULES.maxLength,We=INPUT_VALIDATION_RULES.minLength)=>{const Ye=je?ze:Ve;Ie[ye]={type:je?He:We,message:Ye,ref:ae,...Me(je?He:We,Ye)}};if(oe?!Array.isArray($e)||!$e.length:le&&(!Oe&&(Be||isNullOrUndefined($e))||isBoolean($e)&&!$e||De&&!getCheckboxValue(ce).isValid||ke&&!getRadioValue(ce).isValid)){const{value:je,message:ze}=isMessage(le)?{value:!!le,message:le}:getValueAndMessage(le);if(je&&(Ie[ye]={type:INPUT_VALIDATION_RULES.required,message:ze,ref:Te,...Me(INPUT_VALIDATION_RULES.required,ze)},!ne))return Ne(ze),Ie}if(!Be&&(!isNullOrUndefined(fe)||!isNullOrUndefined(me))){let je,ze;const Ve=getValueAndMessage(me),He=getValueAndMessage(fe);if(!isNullOrUndefined($e)&&!isNaN($e)){const We=ae.valueAsNumber||$e&&+$e;isNullOrUndefined(Ve.value)||(je=We>Ve.value),isNullOrUndefined(He.value)||(ze=We<He.value)}else{const We=ae.valueAsDate||new Date($e),Ye=Xe=>new Date(new Date().toDateString()+" "+Xe),Ue=ae.type=="time",Ke=ae.type=="week";isString(Ve.value)&&$e&&(je=Ue?Ye($e)>Ye(Ve.value):Ke?$e>Ve.value:We>new Date(Ve.value)),isString(He.value)&&$e&&(ze=Ue?Ye($e)<Ye(He.value):Ke?$e<He.value:We<new Date(He.value))}if((je||ze)&&(Le(!!je,Ve.message,He.message,INPUT_VALIDATION_RULES.max,INPUT_VALIDATION_RULES.min),!ne))return Ne(Ie[ye].message),Ie}if((ue||he)&&!Be&&(isString($e)||oe&&Array.isArray($e))){const je=getValueAndMessage(ue),ze=getValueAndMessage(he),Ve=!isNullOrUndefined(je.value)&&$e.length>je.value,He=!isNullOrUndefined(ze.value)&&$e.length<ze.value;if((Ve||He)&&(Le(Ve,je.message,ze.message),!ne))return Ne(Ie[ye].message),Ie}if(ge&&!Be&&isString($e)){const{value:je,message:ze}=getValueAndMessage(ge);if(isRegex(je)&&!$e.match(je)&&(Ie[ye]={type:INPUT_VALIDATION_RULES.pattern,message:ze,ref:ae,...Me(INPUT_VALIDATION_RULES.pattern,ze)},!ne))return Ne(ze),Ie}if(ve){if(isFunction(ve)){const je=await ve($e,ee),ze=getValidateError(je,Te);if(ze&&(Ie[ye]={...ze,...Me(INPUT_VALIDATION_RULES.validate,ze.message)},!ne))return Ne(ze.message),Ie}else if(isObject(ve)){let je={};for(const ze in ve){if(!isEmptyObject(je)&&!ne)break;const Ve=getValidateError(await ve[ze]($e,ee),Te,ze);Ve&&(je={...Ve,...Me(ze,Ve.message)},Ne(Ve.message),ne&&(Ie[ye]=je))}if(!isEmptyObject(je)&&(Ie[ye]={ref:Te,...je},!ne))return Ie}}return Ne(!0),Ie};function baseGet(re,ee){const ne=ee.slice(0,-1).length;let ie=0;for(;ie<ne;)re=isUndefined(re)?ie++:re[ee[ie++]];return re}function isEmptyArray(re){for(const ee in re)if(!isUndefined(re[ee]))return!1;return!0}function unset(re,ee){const ne=Array.isArray(ee)?ee:isKey(ee)?[ee]:stringToPath(ee),ie=ne.length===1?re:baseGet(re,ne),oe=ne.length-1,ae=ne[oe];return ie&&delete ie[ae],oe!==0&&(isObject(ie)&&isEmptyObject(ie)||Array.isArray(ie)&&isEmptyArray(ie))&&unset(re,ne.slice(0,-1)),re}function createSubject(){let re=[];return{get observers(){return re},next:oe=>{for(const ae of re)ae.next(oe)},subscribe:oe=>(re.push(oe),{unsubscribe:()=>{re=re.filter(ae=>ae!==oe)}}),unsubscribe:()=>{re=[]}}}var isPrimitive=re=>isNullOrUndefined(re)||!isObjectType(re);function deepEqual(re,ee){if(isPrimitive(re)||isPrimitive(ee))return re===ee;if(isDateObject(re)&&isDateObject(ee))return re.getTime()===ee.getTime();const ne=Object.keys(re),ie=Object.keys(ee);if(ne.length!==ie.length)return!1;for(const oe of ne){const ae=re[oe];if(!ie.includes(oe))return!1;if(oe!=="ref"){const ce=ee[oe];if(isDateObject(ae)&&isDateObject(ce)||isObject(ae)&&isObject(ce)||Array.isArray(ae)&&Array.isArray(ce)?!deepEqual(ae,ce):ae!==ce)return!1}}return!0}var isMultipleSelect=re=>re.type==="select-multiple",isRadioOrCheckbox=re=>isRadioInput(re)||isCheckBoxInput(re),live=re=>isHTMLElement(re)&&re.isConnected,objectHasFunction=re=>{for(const ee in re)if(isFunction(re[ee]))return!0;return!1};function markFieldsDirty(re,ee={}){const ne=Array.isArray(re);if(isObject(re)||ne)for(const ie in re)Array.isArray(re[ie])||isObject(re[ie])&&!objectHasFunction(re[ie])?(ee[ie]=Array.isArray(re[ie])?[]:{},markFieldsDirty(re[ie],ee[ie])):isNullOrUndefined(re[ie])||(ee[ie]=!0);return ee}function getDirtyFieldsFromDefaultValues(re,ee,ne){const ie=Array.isArray(re);if(isObject(re)||ie)for(const oe in re)Array.isArray(re[oe])||isObject(re[oe])&&!objectHasFunction(re[oe])?isUndefined(ee)||isPrimitive(ne[oe])?ne[oe]=Array.isArray(re[oe])?markFieldsDirty(re[oe],[]):{...markFieldsDirty(re[oe])}:getDirtyFieldsFromDefaultValues(re[oe],isNullOrUndefined(ee)?{}:ee[oe],ne[oe]):deepEqual(re[oe],ee[oe])?delete ne[oe]:ne[oe]=!0;return ne}var getDirtyFields=(re,ee)=>getDirtyFieldsFromDefaultValues(re,ee,markFieldsDirty(ee)),getFieldValueAs=(re,{valueAsNumber:ee,valueAsDate:ne,setValueAs:ie})=>isUndefined(re)?re:ee?re===""?NaN:re&&+re:ne&&isString(re)?new Date(re):ie?ie(re):re;function getFieldValue(re){const ee=re.ref;if(!(re.refs?re.refs.every(ne=>ne.disabled):ee.disabled))return isFileInput(ee)?ee.files:isRadioInput(ee)?getRadioValue(re.refs).value:isMultipleSelect(ee)?[...ee.selectedOptions].map(({value:ne})=>ne):isCheckBoxInput(ee)?getCheckboxValue(re.refs).value:getFieldValueAs(isUndefined(ee.value)?re.ref.value:ee.value,re)}var getResolverOptions=(re,ee,ne,ie)=>{const oe={};for(const ae of re){const ce=get(ee,ae);ce&&set(oe,ae,ce._f)}return{criteriaMode:ne,names:[...re],fields:oe,shouldUseNativeValidation:ie}},getRuleValue=re=>isUndefined(re)?re:isRegex(re)?re.source:isObject(re)?isRegex(re.value)?re.value.source:re.value:re,hasValidation=re=>re.mount&&(re.required||re.min||re.max||re.maxLength||re.minLength||re.pattern||re.validate);function schemaErrorLookup(re,ee,ne){const ie=get(re,ne);if(ie||isKey(ne))return{error:ie,name:ne};const oe=ne.split(".");for(;oe.length;){const ae=oe.join("."),ce=get(ee,ae),le=get(re,ae);if(ce&&!Array.isArray(ce)&&ne!==ae)return{name:ne};if(le&&le.type)return{name:ae,error:le};oe.pop()}return{name:ne}}var skipValidation=(re,ee,ne,ie,oe)=>oe.isOnAll?!1:!ne&&oe.isOnTouch?!(ee||re):(ne?ie.isOnBlur:oe.isOnBlur)?!re:(ne?ie.isOnChange:oe.isOnChange)?re:!0,unsetEmptyArray=(re,ee)=>!compact(get(re,ee)).length&&unset(re,ee);const defaultOptions={mode:VALIDATION_MODE.onSubmit,reValidateMode:VALIDATION_MODE.onChange,shouldFocusError:!0};function createFormControl(re={},ee){let ne={...defaultOptions,...re};const ie=re.resetOptions&&re.resetOptions.keepDirtyValues;let oe={submitCount:0,isDirty:!1,isLoading:!0,isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},errors:{}},ae={},ce=isObject(ne.defaultValues)||isObject(ne.values)?cloneObject(ne.defaultValues||ne.values)||{}:{},le=ne.shouldUnregister?{}:cloneObject(ce),ue={action:!1,mount:!1,watch:!1},he={mount:new Set,unMount:new Set,array:new Set,watch:new Set},fe,me=0;const ge={isDirty:!1,dirtyFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},ve={watch:createSubject(),array:createSubject(),state:createSubject()},ye=getValidationModes(ne.mode),be=getValidationModes(ne.reValidateMode),Ce=ne.criteriaMode===VALIDATION_MODE.all,Se=Je=>Yt=>{clearTimeout(me),me=window.setTimeout(Je,Yt)},$e=async Je=>{if(ge.isValid||Je){const Yt=ne.resolver?isEmptyObject((await Be()).errors):await Le(ae,!0);Yt!==oe.isValid&&ve.state.next({isValid:Yt})}},Te=Je=>ge.isValidating&&ve.state.next({isValidating:Je}),Ne=(Je,Yt=[],an,An,fn=!0,mn=!0)=>{if(An&&an){if(ue.action=!0,mn&&Array.isArray(get(ae,Je))){const Tn=an(get(ae,Je),An.argA,An.argB);fn&&set(ae,Je,Tn)}if(mn&&Array.isArray(get(oe.errors,Je))){const Tn=an(get(oe.errors,Je),An.argA,An.argB);fn&&set(oe.errors,Je,Tn),unsetEmptyArray(oe.errors,Je)}if(ge.touchedFields&&mn&&Array.isArray(get(oe.touchedFields,Je))){const Tn=an(get(oe.touchedFields,Je),An.argA,An.argB);fn&&set(oe.touchedFields,Je,Tn)}ge.dirtyFields&&(oe.dirtyFields=getDirtyFields(ce,le)),ve.state.next({name:Je,isDirty:ze(Je,Yt),dirtyFields:oe.dirtyFields,errors:oe.errors,isValid:oe.isValid})}else set(le,Je,Yt)},Ie=(Je,Yt)=>{set(oe.errors,Je,Yt),ve.state.next({errors:oe.errors})},ke=(Je,Yt,an,An)=>{const fn=get(ae,Je);if(fn){const mn=get(le,Je,isUndefined(an)?get(ce,Je):an);isUndefined(mn)||An&&An.defaultChecked||Yt?set(le,Je,Yt?mn:getFieldValue(fn._f)):We(Je,mn),ue.mount&&$e()}},De=(Je,Yt,an,An,fn)=>{let mn=!1,Tn=!1;const Vn={name:Je};if(!an||An){ge.isDirty&&(Tn=oe.isDirty,oe.isDirty=Vn.isDirty=ze(),mn=Tn!==Vn.isDirty);const Gn=deepEqual(get(ce,Je),Yt);Tn=get(oe.dirtyFields,Je),Gn?unset(oe.dirtyFields,Je):set(oe.dirtyFields,Je,!0),Vn.dirtyFields=oe.dirtyFields,mn=mn||ge.dirtyFields&&Tn!==!Gn}if(an){const Gn=get(oe.touchedFields,Je);Gn||(set(oe.touchedFields,Je,an),Vn.touchedFields=oe.touchedFields,mn=mn||ge.touchedFields&&Gn!==an)}return mn&&fn&&ve.state.next(Vn),mn?Vn:{}},Oe=(Je,Yt,an,An)=>{const fn=get(oe.errors,Je),mn=ge.isValid&&isBoolean(Yt)&&oe.isValid!==Yt;if(re.delayError&&an?(fe=Se(()=>Ie(Je,an)),fe(re.delayError)):(clearTimeout(me),fe=null,an?set(oe.errors,Je,an):unset(oe.errors,Je)),(an?!deepEqual(fn,an):fn)||!isEmptyObject(An)||mn){const Tn={...An,...mn&&isBoolean(Yt)?{isValid:Yt}:{},errors:oe.errors,name:Je};oe={...oe,...Tn},ve.state.next(Tn)}Te(!1)},Be=async Je=>await ne.resolver(le,ne.context,getResolverOptions(Je||he.mount,ae,ne.criteriaMode,ne.shouldUseNativeValidation)),Me=async Je=>{const{errors:Yt}=await Be();if(Je)for(const an of Je){const An=get(Yt,an);An?set(oe.errors,an,An):unset(oe.errors,an)}else oe.errors=Yt;return Yt},Le=async(Je,Yt,an={valid:!0})=>{for(const An in Je){const fn=Je[An];if(fn){const{_f:mn,...Tn}=fn;if(mn){const Vn=he.array.has(mn.name),Gn=await validateField(fn,le,Ce,ne.shouldUseNativeValidation,Vn);if(Gn[mn.name]&&(an.valid=!1,Yt))break;!Yt&&(get(Gn,mn.name)?Vn?updateFieldArrayRootError(oe.errors,Gn,mn.name):set(oe.errors,mn.name,Gn[mn.name]):unset(oe.errors,mn.name))}Tn&&await Le(Tn,Yt,an)}}return an.valid},je=()=>{for(const Je of he.unMount){const Yt=get(ae,Je);Yt&&(Yt._f.refs?Yt._f.refs.every(an=>!live(an)):!live(Yt._f.ref))&&dn(Je)}he.unMount=new Set},ze=(Je,Yt)=>(Je&&Yt&&set(le,Je,Yt),!deepEqual(Vt(),ce)),Ve=(Je,Yt,an)=>generateWatchOutput(Je,he,{...ue.mount?le:isUndefined(Yt)?ce:isString(Je)?{[Je]:Yt}:Yt},an,Yt),He=Je=>compact(get(ue.mount?le:ce,Je,re.shouldUnregister?get(ce,Je,[]):[])),We=(Je,Yt,an={})=>{const An=get(ae,Je);let fn=Yt;if(An){const mn=An._f;mn&&(!mn.disabled&&set(le,Je,getFieldValueAs(Yt,mn)),fn=isHTMLElement(mn.ref)&&isNullOrUndefined(Yt)?"":Yt,isMultipleSelect(mn.ref)?[...mn.ref.options].forEach(Tn=>Tn.selected=fn.includes(Tn.value)):mn.refs?isCheckBoxInput(mn.ref)?mn.refs.length>1?mn.refs.forEach(Tn=>(!Tn.defaultChecked||!Tn.disabled)&&(Tn.checked=Array.isArray(fn)?!!fn.find(Vn=>Vn===Tn.value):fn===Tn.value)):mn.refs[0]&&(mn.refs[0].checked=!!fn):mn.refs.forEach(Tn=>Tn.checked=Tn.value===fn):isFileInput(mn.ref)?mn.ref.value="":(mn.ref.value=fn,mn.ref.type||ve.watch.next({name:Je})))}(an.shouldDirty||an.shouldTouch)&&De(Je,fn,an.shouldTouch,an.shouldDirty,!0),an.shouldValidate&&Xe(Je)},Ye=(Je,Yt,an)=>{for(const An in Yt){const fn=Yt[An],mn=`${Je}.${An}`,Tn=get(ae,mn);(he.array.has(Je)||!isPrimitive(fn)||Tn&&!Tn._f)&&!isDateObject(fn)?Ye(mn,fn,an):We(mn,fn,an)}},Ue=(Je,Yt,an={})=>{const An=get(ae,Je),fn=he.array.has(Je),mn=cloneObject(Yt);set(le,Je,mn),fn?(ve.array.next({name:Je,values:le}),(ge.isDirty||ge.dirtyFields)&&an.shouldDirty&&ve.state.next({name:Je,dirtyFields:getDirtyFields(ce,le),isDirty:ze(Je,mn)})):An&&!An._f&&!isNullOrUndefined(mn)?Ye(Je,mn,an):We(Je,mn,an),isWatched(Je,he)&&ve.state.next({}),ve.watch.next({name:Je}),!ue.mount&&ee()},Ke=async Je=>{const Yt=Je.target;let an=Yt.name;const An=get(ae,an),fn=()=>Yt.type?getFieldValue(An._f):getEventValue(Je);if(An){let mn,Tn;const Vn=fn(),Gn=Je.type===EVENTS.BLUR||Je.type===EVENTS.FOCUS_OUT,Pn=!hasValidation(An._f)&&!ne.resolver&&!get(oe.errors,an)&&!An._f.deps||skipValidation(Gn,get(oe.touchedFields,an),oe.isSubmitted,be,ye),Un=isWatched(an,he,Gn);set(le,an,Vn),Gn?(An._f.onBlur&&An._f.onBlur(Je),fe&&fe(0)):An._f.onChange&&An._f.onChange(Je);const ls=De(an,Vn,Gn,!1),Rn=!isEmptyObject(ls)||Un;if(!Gn&&ve.watch.next({name:an,type:Je.type}),Pn)return ge.isValid&&$e(),Rn&&ve.state.next({name:an,...Un?{}:ls});if(!Gn&&Un&&ve.state.next({}),Te(!0),ne.resolver){const{errors:Kn}=await Be([an]),pn=schemaErrorLookup(oe.errors,ae,an),sn=schemaErrorLookup(Kn,ae,pn.name||an);mn=sn.error,an=sn.name,Tn=isEmptyObject(Kn)}else mn=(await validateField(An,le,Ce,ne.shouldUseNativeValidation))[an],mn?Tn=!1:ge.isValid&&(Tn=await Le(ae,!0));An._f.deps&&Xe(An._f.deps),Oe(an,Tn,mn,ls)}},Xe=async(Je,Yt={})=>{let an,An;const fn=convertToArrayPayload(Je);if(Te(!0),ne.resolver){const mn=await Me(isUndefined(Je)?Je:fn);an=isEmptyObject(mn),An=Je?!fn.some(Tn=>get(mn,Tn)):an}else Je?(An=(await Promise.all(fn.map(async mn=>{const Tn=get(ae,mn);return await Le(Tn&&Tn._f?{[mn]:Tn}:Tn)}))).every(Boolean),!(!An&&!oe.isValid)&&$e()):An=an=await Le(ae);return ve.state.next({...!isString(Je)||ge.isValid&&an!==oe.isValid?{}:{name:Je},...ne.resolver||!Je?{isValid:an}:{},errors:oe.errors,isValidating:!1}),Yt.shouldFocus&&!An&&focusFieldBy(ae,mn=>mn&&get(oe.errors,mn),Je?fn:he.mount),An},Vt=Je=>{const Yt={...ce,...ue.mount?le:{}};return isUndefined(Je)?Yt:isString(Je)?get(Yt,Je):Je.map(an=>get(Yt,an))},Wt=(Je,Yt)=>({invalid:!!get((Yt||oe).errors,Je),isDirty:!!get((Yt||oe).dirtyFields,Je),isTouched:!!get((Yt||oe).touchedFields,Je),error:get((Yt||oe).errors,Je)}),Kt=Je=>{Je&&convertToArrayPayload(Je).forEach(Yt=>unset(oe.errors,Yt)),ve.state.next({errors:Je?oe.errors:{}})},tn=(Je,Yt,an)=>{const An=(get(ae,Je,{_f:{}})._f||{}).ref;set(oe.errors,Je,{...Yt,ref:An}),ve.state.next({name:Je,errors:oe.errors,isValid:!1}),an&&an.shouldFocus&&An&&An.focus&&An.focus()},Xt=(Je,Yt)=>isFunction(Je)?ve.watch.subscribe({next:an=>Je(Ve(void 0,Yt),an)}):Ve(Je,Yt,!0),dn=(Je,Yt={})=>{for(const an of Je?convertToArrayPayload(Je):he.mount)he.mount.delete(an),he.array.delete(an),get(ae,an)&&(Yt.keepValue||(unset(ae,an),unset(le,an)),!Yt.keepError&&unset(oe.errors,an),!Yt.keepDirty&&unset(oe.dirtyFields,an),!Yt.keepTouched&&unset(oe.touchedFields,an),!ne.shouldUnregister&&!Yt.keepDefaultValue&&unset(ce,an));ve.watch.next({}),ve.state.next({...oe,...Yt.keepDirty?{isDirty:ze()}:{}}),!Yt.keepIsValid&&$e()},nn=(Je,Yt={})=>{let an=get(ae,Je);const An=isBoolean(Yt.disabled);return set(ae,Je,{...an||{},_f:{...an&&an._f?an._f:{ref:{name:Je}},name:Je,mount:!0,...Yt}}),he.mount.add(Je),an?An&&set(le,Je,Yt.disabled?void 0:get(le,Je,getFieldValue(an._f))):ke(Je,!0,Yt.value),{...An?{disabled:Yt.disabled}:{},...ne.shouldUseNativeValidation?{required:!!Yt.required,min:getRuleValue(Yt.min),max:getRuleValue(Yt.max),minLength:getRuleValue(Yt.minLength),maxLength:getRuleValue(Yt.maxLength),pattern:getRuleValue(Yt.pattern)}:{},name:Je,onChange:Ke,onBlur:Ke,ref:fn=>{if(fn){nn(Je,Yt),an=get(ae,Je);const mn=isUndefined(fn.value)&&fn.querySelectorAll&&fn.querySelectorAll("input,select,textarea")[0]||fn,Tn=isRadioOrCheckbox(mn),Vn=an._f.refs||[];if(Tn?Vn.find(Gn=>Gn===mn):mn===an._f.ref)return;set(ae,Je,{_f:{...an._f,...Tn?{refs:[...Vn.filter(live),mn,...Array.isArray(get(ce,Je))?[{}]:[]],ref:{type:mn.type,name:Je}}:{ref:mn}}}),ke(Je,!1,void 0,mn)}else an=get(ae,Je,{}),an._f&&(an._f.mount=!1),(ne.shouldUnregister||Yt.shouldUnregister)&&!(isNameInFieldArray(he.array,Je)&&ue.action)&&he.unMount.add(Je)}}},rn=()=>ne.shouldFocusError&&focusFieldBy(ae,Je=>Je&&get(oe.errors,Je),he.mount),vn=(Je,Yt)=>async an=>{an&&(an.preventDefault&&an.preventDefault(),an.persist&&an.persist());let An=cloneObject(le);if(ve.state.next({isSubmitting:!0}),ne.resolver){const{errors:fn,values:mn}=await Be();oe.errors=fn,An=mn}else await Le(ae);unset(oe.errors,"root"),isEmptyObject(oe.errors)?(ve.state.next({errors:{}}),await Je(An,an)):(Yt&&await Yt({...oe.errors},an),rn()),ve.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:isEmptyObject(oe.errors),submitCount:oe.submitCount+1,errors:oe.errors})},yn=(Je,Yt={})=>{get(ae,Je)&&(isUndefined(Yt.defaultValue)?Ue(Je,get(ce,Je)):(Ue(Je,Yt.defaultValue),set(ce,Je,Yt.defaultValue)),Yt.keepTouched||unset(oe.touchedFields,Je),Yt.keepDirty||(unset(oe.dirtyFields,Je),oe.isDirty=Yt.defaultValue?ze(Je,get(ce,Je)):ze()),Yt.keepError||(unset(oe.errors,Je),ge.isValid&&$e()),ve.state.next({...oe}))},Sn=(Je,Yt={})=>{const an=Je||ce,An=cloneObject(an),fn=Je&&!isEmptyObject(Je)?An:ce;if(Yt.keepDefaultValues||(ce=an),!Yt.keepValues){if(Yt.keepDirtyValues||ie)for(const mn of he.mount)get(oe.dirtyFields,mn)?set(fn,mn,get(le,mn)):Ue(mn,get(fn,mn));else{if(isWeb&&isUndefined(Je))for(const mn of he.mount){const Tn=get(ae,mn);if(Tn&&Tn._f){const Vn=Array.isArray(Tn._f.refs)?Tn._f.refs[0]:Tn._f.ref;if(isHTMLElement(Vn)){const Gn=Vn.closest("form");if(Gn){Gn.reset();break}}}}ae={}}le=re.shouldUnregister?Yt.keepDefaultValues?cloneObject(ce):{}:An,ve.array.next({values:fn}),ve.watch.next({values:fn})}he={mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},!ue.mount&&ee(),ue.mount=!ge.isValid||!!Yt.keepIsValid,ue.watch=!!re.shouldUnregister,ve.state.next({submitCount:Yt.keepSubmitCount?oe.submitCount:0,isDirty:Yt.keepDirty||Yt.keepDirtyValues?oe.isDirty:!!(Yt.keepDefaultValues&&!deepEqual(Je,ce)),isSubmitted:Yt.keepIsSubmitted?oe.isSubmitted:!1,dirtyFields:Yt.keepDirty||Yt.keepDirtyValues?oe.dirtyFields:Yt.keepDefaultValues&&Je?getDirtyFields(ce,Je):{},touchedFields:Yt.keepTouched?oe.touchedFields:{},errors:Yt.keepErrors?oe.errors:{},isSubmitting:!1,isSubmitSuccessful:!1})},kn=(Je,Yt)=>Sn(isFunction(Je)?Je(le):Je,Yt),Bn=(Je,Yt={})=>{const an=get(ae,Je),An=an&&an._f;if(An){const fn=An.refs?An.refs[0]:An.ref;fn.focus&&(fn.focus(),Yt.shouldSelect&&fn.select())}},Dn=Je=>{oe={...oe,...Je}};return isFunction(ne.defaultValues)&&ne.defaultValues().then(Je=>{kn(Je,ne.resetOptions),ve.state.next({isLoading:!1})}),{control:{register:nn,unregister:dn,getFieldState:Wt,_executeSchema:Be,_focusError:rn,_getWatch:Ve,_getDirty:ze,_updateValid:$e,_removeUnmounted:je,_updateFieldArray:Ne,_getFieldArray:He,_reset:Sn,_updateFormState:Dn,_subjects:ve,_proxyFormState:ge,get _fields(){return ae},get _formValues(){return le},get _stateFlags(){return ue},set _stateFlags(Je){ue=Je},get _defaultValues(){return ce},get _names(){return he},set _names(Je){he=Je},get _formState(){return oe},set _formState(Je){oe=Je},get _options(){return ne},set _options(Je){ne={...ne,...Je}}},trigger:Xe,register:nn,handleSubmit:vn,watch:Xt,setValue:Ue,getValues:Vt,reset:kn,resetField:yn,clearErrors:Kt,unregister:dn,setError:tn,setFocus:Bn,getFieldState:Wt}}function useForm(re={}){const ee=React.useRef(),[ne,ie]=React.useState({isDirty:!1,isValidating:!1,isLoading:!0,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},errors:{},defaultValues:isFunction(re.defaultValues)?void 0:re.defaultValues});ee.current||(ee.current={...createFormControl(re,()=>ie(ae=>({...ae}))),formState:ne});const oe=ee.current.control;return oe._options=re,useSubscribe({subject:oe._subjects.state,next:ae=>{shouldRenderFormState(ae,oe._proxyFormState,oe._updateFormState,!0)&&ie({...oe._formState})}}),React.useEffect(()=>{oe._stateFlags.mount||(oe._updateValid(),oe._stateFlags.mount=!0),oe._stateFlags.watch&&(oe._stateFlags.watch=!1,oe._subjects.state.next({})),oe._removeUnmounted()}),React.useEffect(()=>{re.values&&!deepEqual(re.values,oe._defaultValues)&&oe._reset(re.values,oe._options.resetOptions)},[re.values,oe]),React.useEffect(()=>{ne.submitCount&&oe._focusError()},[oe,ne.submitCount]),ee.current.formState=getProxyFormState(ne,oe),ee.current}const TABS$1=[{title:"Edit",to:""},{title:"Preview",to:"preview",disabled:!0},{title:"Mint",disabled:!0}];function Mint(){const re=useForm({defaultValues:useMintStore.getState(),mode:"onChange",reValidateMode:"onChange"}),ee=useUserStore(ge=>ge.address),ne=useUserStore(ge=>ge.userInfo),ie=useUserStore(ge=>ge.proxyAddress),oe=useUserStore(ge=>ge.proxyName),[ae,ce]=reactExports.useState(),{isValid:le,errors:ue,isDirty:he}=useFormState({control:re.control}),fe=reactExports.useMemo(()=>(TABS$1[1].disabled=he||!le||Object.keys(ue).length>0,TABS$1),[le,ue,he]),me=reactExports.useMemo(()=>oe||ie||(ne==null?void 0:ne.name)||ee,[ee,ie,oe,ne==null?void 0:ne.name]);return reactExports.useEffect(()=>{async function ge(){if(ee){const ve=await useUserStore.getState().getBalance(ee);ce(ve)}}ge()},[ee]),jsxs(Page,{title:"Mint",children:[jsx$1("h1",{children:"MINT"}),jsx$1(Tabs,{tabs:fe}),jsx$1(FormProvider,{...re,children:jsx$1(AnimatePresence,{mode:"sync",children:jsx$1(Outlet,{context:{balance:ae,minterName:me,address:ee,artifact:re.watch("artifact"),isTyped:re.watch("isTyped"),isMonoType:re.watch("isMonoType"),typedinput:re.watch("typedinput"),license:re.watch("license")}})})})]})}const objktview$1="_objktview_mfw1p_216",profile_page="_profile_page_mfw1p_231",info_ipfs$1="_info_ipfs_mfw1p_235",info_attributes$1="_info_attributes_mfw1p_245",infos_attributes_container$1="_infos_attributes_container_mfw1p_267",infos_container="_infos_container_mfw1p_268",profile_tabs="_profile_tabs_mfw1p_273",infos_attributes_flex$1="_infos_attributes_flex_mfw1p_278",container$6="_container_mfw1p_284",history$1="_history_mfw1p_289",history__mint__op$1="_history__mint__op_mfw1p_301",history__labels$1="_history__labels_mfw1p_337",history__event__container$1="_history__event__container_mfw1p_351",history__event$1="_history__event_mfw1p_351",history__from$1="_history__from_mfw1p_365",history__to$1="_history__to_mfw1p_366",history__ed$1="_history__ed_mfw1p_367",history__price$1="_history__price_mfw1p_368",history__date$1="_history__date_mfw1p_369",history__royalties$1="_history__royalties_mfw1p_420",history__secondary$1="_history__secondary_mfw1p_433",history__mobile$1="_history__mobile_mfw1p_438",history__inner__mobile$1="_history__inner__mobile_mfw1p_465",history__desktop$1="_history__desktop_mfw1p_481",objkt__title="_objkt__title_mfw1p_490",restricted$1="_restricted_mfw1p_501",tab="_tab_mfw1p_519",tab_area="_tab_area_mfw1p_530",styles$c={objktview:objktview$1,profile_page,info_ipfs:info_ipfs$1,info_attributes:info_attributes$1,infos_attributes_container:infos_attributes_container$1,infos_container,profile_tabs,infos_attributes_flex:infos_attributes_flex$1,container:container$6,history:history$1,history__mint__op:history__mint__op$1,history__labels:history__labels$1,history__event__container:history__event__container$1,history__event:history__event$1,history__from:history__from$1,history__to:history__to$1,history__ed:history__ed$1,history__price:history__price$1,history__date:history__date$1,history__royalties:history__royalties$1,history__secondary:history__secondary$1,history__mobile:history__mobile$1,history__inner__mobile:history__inner__mobile$1,history__desktop:history__desktop$1,objkt__title,restricted:restricted$1,tab,tab_area},style="",useObjktDisplayContext=()=>useOutletContext(),TABS=[{title:"Info",to:""},{title:"Listings",to:"listings"},{title:"History",to:"history"},{title:"Swap",to:"swap",private:!0,restricted:!0},{title:"Burn",to:"burn",private:!0},{title:"Transfer",to:"transfer",private:!0},{title:"Copyright",to:"copyright"}],ObjktDisplay=()=>{const{id:re}=useParams(),ee=useUserStore(fe=>fe.address),ne=useUserStore(fe=>fe.proxyAddress),{walletBlockMap:ie,nsfwMap:oe,photosensitiveMap:ae,underReviewMap:ce}=useSettings(),{data:le,error:ue}=useSWR(["/token",re],async()=>{var fe,me,ge;if(re){const ve=await fetchObjktDetails(re);if(!ve)throw/^\d+$/.test(re)?new Error(`Cannot find an OBJKT with id: ${re}`,{cause:"Unknown OBJKT"}):new Error(`Received a non numeric token_id: ${re}.
          This can happen if the requested SUBJKT is conflicting with a protected route. 
          You can still access it by its address (tz/<tz-address>)`,{cause:"Conflicting route"});const ye=oe.get(ve.token_id)===1,be=ae.get(ve.token_id)===1;return(ye||((fe=ve.teia_meta)==null?void 0:fe.content_rating)===METADATA_CONTENT_RATING_MATURE)&&(ve.isNSFW=!0),(be||(ge=(me=ve.teia_meta)==null?void 0:me.accessibility)!=null&&ge.hazards.includes(METADATA_ACCESSIBILITY_HAZARDS_PHOTOSENS))&&(ve.isPhotosensitive=!0),(ye||be)&&(ve.isModerated=!0),ve.restricted=ie.get(ve.artist_address)===1,ve.underReview=ce.get(ve.artist_address)===1,ve}},{revalidateIfStale:!1,revalidateOnFocus:!1}),he=!le&&!ue;if(he)return jsx$1(Page,{title:"loading",children:he&&jsx$1(Loading,{message:"Loading OBJKT"})});if(ue)throw ue;if(le)return jsx$1(Page,{className:styles$c.profile_page,title:le==null?void 0:le.name,children:jsxs(Fragment,{children:[le.restricted?jsxs("div",{className:styles$c.restricted,children:["Restricted OBJKT. Contact the Teia moderators on"," ",jsx$1("a",{href:"https://discord.gg/TKeybhYhNe",target:"_blank",rel:"noreferrer",children:"Discord"})," ","to resolve the status. See the"," ",jsx$1("a",{href:"https://github.com/teia-community/teia-docs/wiki/Core-Values-Code-of-Conduct-Terms-and-Conditions#content-moderation",target:"_blank",rel:"noreferrer",children:"Teia Terms and Conditions"}),"."]}):null,le.underReview&&jsxs("div",{className:styles$c.restricted,children:["OBJKT under review. Contact the Teia moderators on"," ",jsx$1("a",{href:"https://discord.gg/TKeybhYhNe",target:"_blank",rel:"noreferrer",children:"Discord"})," ","to resolve the status."]}),jsxs("div",{style:{position:"relative",display:"block",width:"100%"},className:"objkt-display",children:[jsx$1("div",{children:jsx$1(RenderMediaType,{nft:le,displayView:!0})}),jsx$1(ItemInfo,{nft:le})]}),jsx$1(Tabs,{tabs:TABS,className:styles$c.profile_tabs,filter:fe=>le!=null&&le.restricted&&fe.restricted||le!=null&&le.holdings&&fe.private&&le.holdings.map(ge=>ge.holder_address).includes(ee||"UNSYNCED")===!1&&le.artist_address!==ee&&le.artist_address!==ne?null:fe}),jsx$1("div",{className:styles$c.tab_area,children:jsx$1(Outlet,{context:{nft:le,viewer_address:ee}})})]})})},objktview="_objktview_1vvtg_216",info_ipfs="_info_ipfs_1vvtg_231",info_attributes="_info_attributes_1vvtg_241",infos_attributes_container="_infos_attributes_container_1vvtg_270",infos_attributes_flex="_infos_attributes_flex_1vvtg_274",container$5="_container_1vvtg_280",history="_history_1vvtg_286",history__mint__op="_history__mint__op_1vvtg_298",history__labels="_history__labels_1vvtg_334",history__event__container="_history__event__container_1vvtg_348",history__event="_history__event_1vvtg_348",history__from="_history__from_1vvtg_362",history__to="_history__to_1vvtg_363",history__ed="_history__ed_1vvtg_364",history__price="_history__price_1vvtg_365",history__date="_history__date_1vvtg_366",history__royalties="_history__royalties_1vvtg_417",history__secondary="_history__secondary_1vvtg_430",history__mobile="_history__mobile_1vvtg_435",history__inner__mobile="_history__inner__mobile_1vvtg_462",history__desktop="_history__desktop_1vvtg_478",basic_infos="_basic_infos_1vvtg_487",restricted="_restricted_1vvtg_497",styles$b={objktview,info_ipfs,info_attributes,infos_attributes_container,infos_attributes_flex,container:container$5,history,history__mint__op,history__labels,history__event__container,history__event,history__from,history__to,history__ed,history__price,history__date,history__royalties,history__secondary,history__mobile,history__inner__mobile,history__desktop,basic_infos,restricted},Burn=()=>{var ge,ve;const{nft:re}=useObjktDisplayContext(),[ee,ne,ie]=useUserStore(ye=>[ye.burn,ye.address,ye.proxyAddress]),[oe,ae]=useModalStore(ye=>[ye.visible,ye.message]),[ce,le]=reactExports.useState(""),ue=(ve=(ge=re.artist_profile)==null?void 0:ge.split_contract)==null?void 0:ve.administrator_address,he=reactExports.useMemo(()=>{var ye;return(ye=re.holdings)==null?void 0:ye.find(be=>be.holder_address===ne||be.holder_address===ie&&ne===ue)},[re,ne,ie,ue]),fe=reactExports.useMemo(()=>(he==null?void 0:he.amount)||0,[he]),me=()=>{if(ce===""||ce==="0"){alert("Error: No amount specified.");return}if(ce>fe){alert(`Error: You're trying to burn ${ce}, but you only own ${fe}.`);return}ee(re.token_id,ce)};return jsx$1(Fragment,{children:oe?jsxs("div",{children:[jsx$1("p",{style:{position:"absolute",left:"50%",top:"35%"},children:ae}),jsx$1(Loading,{})]}):jsxs("div",{children:[jsx$1(Container$3,{children:jsx$1("div",{className:styles$b.container,children:jsxs("p",{children:["You own ",fe," editions of OBJKT#",re.id,". How many would you like to burn?"]})})}),jsx$1(Container$3,{children:jsx$1("div",{className:styles$b.container,children:jsx$1(Input$2,{type:"number",placeholder:"OBJKTs to burn",value:ce,onChange:le,onBlur:ye=>{parseInt(ye.target.value)>=fe&&le(fe)}})})}),jsx$1(Container$3,{children:jsxs("div",{className:styles$b.container,children:[jsx$1("p",{style:{fontSize:"14px"},children:"Burning will transfer the OBJKTs from your possession to a burn address. Once in the burn address, the OBJKT can't be recovered or sold. You can only burn tokens that you own. If you have them swapped, you first need to cancel that swap before you try to burn them."}),jsx$1("br",{}),jsx$1("p",{children:jsx$1("strong",{children:"NB: This action is not reversable."})})]})}),jsx$1(Container$3,{children:jsx$1("div",{className:styles$b.container,children:jsx$1(Button,{shadow_box:!0,onClick:me,fit:!0,children:"Burn"})})})]})})},container$4="_container_15s4d_216",owner="_owner_15s4d_220",styles$a={container:container$4,owner},OwnerList=({owners:re})=>{const ee=re.filter(ne=>ne.holder_address!==BURN_ADDRESS);return jsx$1("div",{className:styles$a.container,children:ee.map(({amount:ne,holder_address:ie,holder_profile:oe})=>jsxs("div",{className:styles$a.owner,children:[ne," ed. ",get$5(oe,"name")?jsx$1(Button,{to:`/${encodeURIComponent(get$5(oe,"name"))}`,children:get$5(oe,"name")}):MARKETPLACE_CONTRACTS_TO_NAME[ie]?jsx$1(Button,{to:`/tz/${ie}`,children:MARKETPLACE_CONTRACTS_TO_NAME[ie]}):jsx$1(Button,{to:`/tz/${ie}`,children:walletPreview(ie)})]},ie))})},container$3="_container_1fuf2_216",swap="_swap_1fuf2_221",issuer="_issuer_1fuf2_232",buttons="_buttons_1fuf2_243",swapLabel="_swapLabel_1fuf2_257",border="_border_1fuf2_271",nomobile="_nomobile_1fuf2_282",styles$9={container:container$3,swap,issuer,buttons,swapLabel,border,nomobile};function ListingRow({nft:re,listing:ee,onCollectClick:ne,reswapPrices:ie,setReswapPrices:oe,proxyAdminAddress:ae,rowId:ce}){const{walletBlockMap:le}=useSettings(),[ue,he]=useUserStore(ye=>[ye.address,ye.proxyAddress]),fe=useUserStore(ye=>ye.reswap),me=useUserStore(ye=>ye.cancel),ge=ee.seller_address===ue||ae===ue&&ee.seller_address===he;console.debug("isOwnSwap",ge);const ve=reactExports.useMemo(()=>re.restricted||le.get(ee.seller_address)===1,[re.restricted,le,ee.seller_address]);return jsxs("div",{className:styles$9.swap,children:[jsxs("div",{className:styles$9.issuer,children:[ee.amount_left," ed. ",jsx$1(Button,{alt:"seller",to:`/tz/${ee.seller_address}`,children:get$5(ee,"seller_profile.name")||walletPreview(ee.seller_address)})]}),jsxs("div",{className:styles$9.buttons,children:[ve&&jsx$1(RestrictedLabel,{}),jsx$1(MarketplaceLabel$1,{listing:ee}),!ve&&le.get(ee.seller_address)!==1&&!ge&&jsx$1(Button,{alt:"collect",shadow_box:!0,onClick:()=>ne(ee),children:`Collect for ${ee.price/1e6} tez`}),ge&&!ve&&(ee.type.startsWith("TEIA")||ee.type.startsWith("HEN"))&&jsxs(Fragment,{children:[jsx$1("div",{className:styles$9.break}),jsx$1("input",{value:ie[ce]||ee.price/1e6,onChange:ye=>{const{value:be}=ye.target;oe(Ce=>({...Ce,[ce]:be}))},type:"number",placeholder:"New price",style:{width:"80px",marginRight:"5px"}}),jsx$1(Button,{alt:"Click to reswap",className:styles$9.smol,shadow_box:!0,onClick:async()=>{const ye=ie[ce];!ye||ye<=0||await fe(re,ye*1e6,ee)},children:"reswap"})]}),ge&&jsx$1(Button,{alt:"Click to cancel swap",shadow_box:!0,onClick:()=>me(ee.contract_address,ee.swap_id),className:styles$9.smol,children:"cancel"})]})]})}const Listings=({proxyAdminAddress:re,nft:ee,handleCollect:ne})=>{var ce;const[ie,oe]=reactExports.useState({}),ae=(ce=ee.listings)==null?void 0:ce.map(le=>({...le,key:le.swap_id||le.ask_id||le.offer_id}));return jsxs("div",{className:styles$9.container,children:[ae.map(le=>jsx$1(ListingRow,{nft:ee,rowId:le.key,listing:le,proxyAdminAddress:re,reswapPrices:ie,setReswapPrices:oe,onCollectClick:()=>{console.debug("buy",le),ne(le)}},le.key)),jsx$1(Line,{})]})},Collectors=()=>{var ce,le;const{nft:re}=useObjktDisplayContext(),[ee,ne,ie]=useUserStore(ue=>[ue.address,ue.sync,ue.collect]),oe=ue=>{ee==null?ne():ie(ue)},ae=(le=(ce=re.artist_profile)==null?void 0:ce.split_contract)==null?void 0:le.administrator_address;return jsxs(Fragment,{children:[re.listings.length>0&&jsx$1(Container$3,{children:jsx$1(Listings,{nft:re,handleCollect:oe,proxyAdminAddress:ae})}),jsx$1(Container$3,{children:jsx$1(OwnerList,{owners:re.holdings})})]})};var baseGetTag=_baseGetTag,isObjectLike=isObjectLike_1,numberTag="[object Number]";function isNumber(re){return typeof re=="number"||isObjectLike(re)&&baseGetTag(re)==numberTag}var isNumber_1=isNumber;const isNumber$1=getDefaultExportFromCjs(isNumber_1);function UsernameAndLink({event:re,attr:ee}){return jsx$1(Fragment,{children:get$5(re,`${ee}_profile.name`)?jsx$1("span",{children:jsx$1(Button,{href:`/${encodeURIComponent(get$5(re,`${ee}_profile.name`))}`,children:get$5(re,`${ee}_profile.name`)})}):jsx$1("span",{children:jsx$1(Button,{href:`/tz/${get$5(re,`${ee}_address`)}`,children:walletPreview(get$5(re,`${ee}_address`))})})})}function HistoryRow({eventType:re,from:ee,to:ne,editions:ie,price:oe,timestamp:ae}){return jsxs("div",{className:`${styles$b.history}`,children:[jsx$1("div",{className:styles$b.history__event__container,children:re}),jsx$1("div",{className:styles$b.history__from,children:ee?jsxs(Fragment,{children:[jsx$1("div",{className:`${styles$b.history__mobile} ${styles$b.history__secondary}`,children:"From"}),ee]}):null}),jsx$1("div",{className:styles$b.history__to,children:ne?jsxs(Fragment,{children:[jsx$1("div",{className:`${styles$b.history__mobile} ${styles$b.history__secondary}`,children:"To"}),ne]}):null}),jsx$1("div",{className:`${styles$b.history__ed} ${styles$b.history__desktop}`,children:ie}),jsx$1("div",{className:`${styles$b.history__price} ${styles$b.history__desktop}`,children:isNumber$1(oe)?`${parseFloat(oe/1e6)} tez`:null}),jsx$1("div",{className:`${styles$b.history__date} ${styles$b.history__desktop}`,title:ae,children:getTimeAgo(ae)}),jsxs("div",{className:styles$b.history__inner__mobile,children:[jsx$1("div",{className:styles$b.history__date,title:ae,children:getTimeAgo(ae)}),jsxs("div",{className:styles$b.history__ed,children:["ed. ",ie]}),jsx$1("div",{className:styles$b.history__price,children:isNumber$1(oe)?`${parseFloat(oe/1e6)} tez`:null})]})]})}const History=()=>{const{nft:re}=useObjktDisplayContext();return console.debug("nft.events",re==null?void 0:re.events),jsx$1(Container$3,{children:jsxs("div",{className:styles$b.history__container,children:[jsxs("div",{className:styles$b.history__labels,children:[jsx$1("div",{className:styles$b.history__event,style:{width:"calc(10% + 35px)"},children:"Event"}),jsx$1("div",{className:styles$b.history__from,children:"From"}),jsx$1("div",{className:styles$b.history__to,children:"To"}),jsx$1("div",{className:styles$b.history__ed,children:"Ed."}),jsx$1("div",{className:styles$b.history__price,children:"Price"}),jsx$1("div",{className:styles$b.history__date,children:"Time"})]}),re.events.map(ee=>ee.implements==="SALE"?jsx$1(HistoryRow,{eventType:jsxs(Fragment,{children:[jsx$1(TradeIcon,{size:14}),jsx$1("a",{href:`https://tzkt.io/${ee.ophash}`,target:"_blank",rel:"noreferrer",children:"Trade"})]}),from:jsx$1(UsernameAndLink,{event:ee,attr:"seller"}),to:jsx$1(UsernameAndLink,{event:ee,attr:"buyer"}),editions:1,timestamp:ee.timestamp,price:ee.price},`t-${ee.id}`):["OBJKT_ASK","OBJKT_ASK_V2","OBJKT_ASK_V3","OBJKT_ASK_V3_PRE","TEIA_SWAP","HEN_SWAP","HEN_SWAP_V2","VERSUM_SWAP"].includes(ee.type)?jsx$1(HistoryRow,{eventType:jsxs(Fragment,{children:[jsx$1(SwapIcon,{size:14}),jsx$1("a",{href:`https://tzkt.io/${ee.ophash}`,target:"_blank",rel:"noreferrer",children:"Swap"})]}),from:jsx$1(UsernameAndLink,{event:ee,attr:"seller"}),editions:ee.amount,timestamp:ee.timestamp,price:ee.price},`t-${ee.id}`):ee.type==="FA2_TRANSFER"&&ee.to_address!==BURN_ADDRESS&&!ee.from_address.startsWith("KT1")&&!ee.to_address.startsWith("KT1")?jsx$1(HistoryRow,{eventType:jsxs(Fragment,{children:[jsx$1(TradeIcon,{size:14}),jsx$1("a",{href:`https://tzkt.io/${ee.ophash}`,target:"_blank",rel:"noreferrer",children:"Transfer"})]}),from:jsx$1(UsernameAndLink,{event:ee,attr:"from"}),to:jsx$1(UsernameAndLink,{event:ee,attr:"to"}),editions:ee.amount,timestamp:ee.timestamp},`t-${ee.id}`):ee.type==="FA2_TRANSFER"&&ee.to_address===BURN_ADDRESS?jsx$1(HistoryRow,{eventType:jsxs(Fragment,{children:[jsx$1(BurnIcon,{size:14}),jsx$1("a",{href:`https://tzkt.io/${ee.ophash}`,target:"_blank",rel:"noreferrer",children:"Burn"})]}),from:jsx$1(UsernameAndLink,{event:ee,attr:"from"}),to:jsx$1("span",{children:jsx$1(Button,{href:`/tz/${encodeURIComponent(BURN_ADDRESS)}`,children:"Burn Address"})}),editions:ee.amount,timestamp:ee.timestamp},`t-${ee.id}`):ee.type==="HEN_MINT"?jsx$1(HistoryRow,{eventType:jsxs(Fragment,{children:[jsx$1(MintedIcon,{size:14}),jsx$1("div",{className:styles$b.history__mint__op,children:"Minted"})]}),editions:ee.editions,timestamp:ee.timestamp},`t-${ee.id}`):null),jsxs("div",{className:styles$b.history__royalties,children:[formatRoyalties(re)," Royalties"]})]})})},container$2="_container_gerq9_216",tag="_tag_gerq9_232",styles$8={container:container$2,tag},Tags=({tags:re})=>jsx$1("div",{className:styles$8.container,children:re.filter(ee=>ee!=="").map((ee,ne)=>jsx$1(Button,{to:`${PATH.TAGS}/${encodeURI(ee)}`,children:jsx$1("div",{className:styles$8.tag,children:ee})},`tag${ee}${ne}`))}),Attribute$1=({label:re,value:ee})=>jsxs("div",{className:styles$b.info_attributes,children:[re,":",jsx$1("p",{children:ee})]}),Info=()=>{var ce;const{nft:re,viewer_address:ee}=useObjktDisplayContext(),ne=HashToURL(re.artifact_uri)+`/?creator=${re.artist_address}&viewer=${ee||""}&objkt=${re.token_id}`,ie=ee?`https://anaver.se/?gallery=1&loadsingle=1&singlecontract=${HEN_CONTRACT_FA2}&singletokenid=${re.token_id}&wallet=${ee}&partnerPlatform=teia.art`:`https://anaver.se/?gallery=1&loadsingle=1&singlecontract=${HEN_CONTRACT_FA2}&singletokenid=${re.token_id}&partnerPlatform=teia.art`,oe=HashToURL(re.metadata_uri),ae=re.rights==="custom"&&re.right_uri&&re.right_uri.startsWith("ipfs://")?HashToURL(re.right_uri):re.right_uri;return jsxs(Fragment,{children:[jsx$1(Container$3,{children:jsxs("div",{className:styles$b.infos_container,children:[jsxs("div",{className:styles$b.basic_infos,children:[jsx$1("h1",{children:re.name}),jsx$1("p",{children:re.description})]}),(ce=re.tags)!=null&&ce.length?jsx$1(Tags,{tags:re.tags.map(({tag:le})=>le)}):null]})}),jsx$1(Line,{}),jsx$1(Container$3,{children:jsxs("div",{className:styles$b.infos_attributes_container,children:[jsxs("div",{className:styles$b.infos_attributes_flex,children:[jsx$1(Attribute$1,{label:"Mimetype",value:re.mime_type}),re.language&&jsx$1(Attribute$1,{label:"Language",value:LANGUAGES[re.language]}),re.isNSFW&&jsx$1(Attribute$1,{label:"Content Rating",value:"NSFW (Mature)"}),re.isPhotosensitive&&jsx$1(Attribute$1,{label:"Accessibility Hazards",value:"Photo Sensitive"}),re.isModerated&&re.artist_address===ee&&jsx$1(Attribute$1,{label:"Moderation",value:"The TEIA content moderation team has overridden the NSFW or Photosensitive attributes on this token"}),jsxs("div",{className:styles$b.info_attributes,children:["Rights:",jsx$1("p",{children:re.rights?re.rights==="custom"?jsx$1("a",{target:"_blank",href:ae,rel:"noreferrer",children:"Custom"}):LICENSE_TYPES[re.rights]:LICENSE_TYPES.none})]}),jsxs("div",{className:styles$b.info_attributes,children:["Mint date:",jsx$1("p",{children:getWordDate(re.minted_at)})]})]}),jsxs("div",{className:styles$b.info_ipfs,children:[jsx$1("a",{target:"_blank",rel:"noreferrer",href:oe,children:"Metadata"})," // ",jsx$1("a",{target:"_blank",rel:"noreferrer",href:ne,children:"View on ipfs"})," // ",jsx$1("a",{target:"_blank",rel:"noreferrer",href:ie,children:"View on anaverse"})]})]})})]})},Swap=()=>{var ke;const{nft:re}=useObjktDisplayContext(),{id:ee}=useParams(),[ne,ie,oe]=useUserStore(De=>[De.address,De.proxyAddress,De.swap]),[ae,ce,le,ue]=useModalStore(De=>[De.visible,De.progress,De.message,De.show]),[he,fe]=reactExports.useState(""),[me,ge]=reactExports.useState(""),[ve,ye]=reactExports.useState("tez"),be=De=>ye(De.target.value),Ce=De=>{console.debug(De),De<=.1&&ue(`Price is really low (${De}ꜩ), for giveaways checkout hicetdono (dono.xtz.tools)`)},Se=(ke=re.artist_profile)!=null&&ke.is_split?re.artist_profile.split_contract.administrator_address:null,$e=reactExports.useMemo(()=>{var De;return(De=re.holdings)==null?void 0:De.find(Oe=>Oe.holder_address===ne||Oe.holder_address===ie&&ne===Se)},[re,ne,ie,Se]),Te=reactExports.useMemo(()=>($e==null?void 0:$e.amount)||0,[$e]),Ne=async()=>{if(console.debug({amount:he,price:me}),!he){ue(`Please enter an OBJKT quantity to swap (current value: ${he})`);return}if(me==null||me<0){ue(`Please enter a price for the swap (current value: ${me})`);return}console.debug(ne,re.royalties_total,(me*1e6).toFixed(0),ee,re.artist_address,parseFloat(he)),console.log([ne,re.royalties_total,(me*1e6).toFixed(0),ee,re.artist_address,parseFloat(he)]),ve==="tez"&&await oe(ne,re.royalties_total/1e3,(me*1e6).toFixed(0),ee,re.artist_address,parseFloat(he))},Ie={width:"75% !important"};return jsx$1(Fragment,{children:ae?jsx$1(Container$3,{children:jsxs("div",{children:[jsx$1("p",{children:le}),jsx$1(Loading,{})]})}):jsxs("div",{children:[jsx$1(Container$3,{children:jsx$1("div",{className:styles$b.container,children:jsxs("p",{children:["You own ",Te," editions of OBJKT#",ee,". How many would you like to swap?"]})})}),jsx$1(Container$3,{children:jsxs("div",{className:styles$b.container,children:[jsx$1(Input$2,{type:"number",placeholder:"OBJKT quantity",min:1,value:he,onChange:fe,onBlur:De=>{parseInt(De.target.value)>Te&&fe(Te)},disabled:ce}),jsxs("div",{style:{width:"100%",display:"flex"},children:[jsx$1("div",{style:{width:"90%"},children:jsx$1(Input$2,{style:Ie,type:"number",placeholder:"Price per OBJKT",value:me,initial:0,onChange:ge,onBlur:De=>{const Oe=parseFloat(De.target.value);Oe>1e6?ge(1e6):Oe<0&&ge(0),Ce(Oe)},disabled:ce})}),jsx$1("div",{children:jsx$1("select",{onChange:be,style:{float:"right",display:"inline"},children:jsx$1("option",{value:"tezos",children:"tez"})})})]}),jsx$1(Button,{shadow_box:!0,onClick:Ne,fit:!0,disabled:ce,children:"Swap"})]})}),jsx$1(Container$3,{children:jsx$1("div",{className:styles$b.container,children:jsx$1("p",{children:"The Teia marketplace fee is set to 2.5%. Fees get directed to the Teia DAO treasury multisig (KT1J9FYz29RBQi1oGLw8uXyACrzXzV1dHuvb)"})})})]})})},TxRow=({tx:re,index:ee,onAdd:ne,onRemove:ie})=>{const[oe,ae]=reactExports.useState(""),[ce,le]=reactExports.useState(""),ue=useModalStore(me=>me.show),he=()=>{validateAddress(ce)?ne({index:ee,to_:ce,amount:parseInt(oe),token_id:re.token_id}):ue("Transfer",`Invalid address ${ce}`)},fe=me=>{me.code==="Enter"&&he()};return re?jsxs("tr",{className:collabStyles.row,children:[jsx$1("td",{style:{width:"200px"},children:jsx$1(Input$2,{type:"number",name:"transfer-quantity",label:"Quantity",placeholder:"OBJKT quantity",min:1,value:oe,onChange:me=>{typeof me=="number"&&ae(me.toString())}})}),jsx$1("td",{children:jsx$1(Input$2,{type:"text",label:"Recipient",placeholder:"to address (tz...)",value:ce,onChange:me=>{typeof me=="string"&&le(me)},onKeyDown:fe,onBlur:he})}),ie&&jsx$1("td",{className:collabStyles.actionCell,children:jsx$1(Button,{alt:"Click to delete this transfer",fit:!0,onClick:()=>ie(re),children:jsx$1(SvgClose,{width:16})})}),!ie&&ce&&oe&&jsx$1("td",{className:collabStyles.actionCell,align:"center",children:jsx$1(Button,{alt:"Add transfer to batch list",fit:!0,shadow_box:!0,onClick:he,children:"add"})})]}):null},Transfer=()=>{var Ce,Se,$e;const{nft:re}=useObjktDisplayContext(),[ee,ne,ie]=useUserStore(Te=>[Te.address,Te.proxyAddress,Te.transfer]),oe=ne||ee,ae=(Ce=re.artist_profile)!=null&&Ce.is_split?($e=(Se=re.artist_profile)==null?void 0:Se.split_contract)==null?void 0:$e.administrator_address:null,ce=reactExports.useMemo(()=>{var Te;return(Te=re.holdings)==null?void 0:Te.find(Ne=>Ne.holder_address===oe&&(ee===oe||ee===ae))},[re,ee,ae,oe]),le={index:0,to_:void 0,amount:void 0,token_id:re.token_id},[ue,he]=reactExports.useState([{...le}]),fe=classNames$1(collabStyles.table,collabStyles.mt3,collabStyles.mb3),me=ue.filter(Te=>(Te==null?void 0:Te.to_)&&(Te==null?void 0:Te.amount)),ge=Te=>{const Ne=[...ue];Ne[Te.index]=Te,he([...Ne,{...le,index:Ne.length}])},ve=Te=>{const Ne=[...ue];delete Ne[Te.index],he(Ne)},ye=()=>{ie(me)},be=ce?ce.amount:0;return jsx$1(Fragment,{children:be===0?jsx$1("div",{className:collabStyles.container,children:jsx$1("p",{children:"No editions found to transfer."})}):jsxs("div",{className:collabStyles.container,children:[jsxs("h2",{children:["Transfer (count: ",me.length,"/",be,")"]}),jsx$1("p",{children:"Add addresses below along with how many tokens you wish to send to each."}),jsxs("p",{children:["You currently have ",be," editions available."]}),jsx$1("table",{className:fe,children:jsx$1("tbody",{children:ue.map((Te,Ne)=>jsx$1(TxRow,{tx:Te,index:Ne,onAdd:ge,onRemove:Ne<ue.length-1?ve:void 0},`transfer-${Ne}`))})}),jsx$1(Button,{alt:"Click to transfer the token to the selected wallets",onClick:ye,disabled:me.length===0,shadow_box:!0,className:collabStyles.btnSecondary,children:"send"})]})})},Copyright=()=>{const{nft:re,viewer_address:ee}=useObjktDisplayContext(),[ne,ie]=reactExports.useState(null),[oe,ae]=reactExports.useState(!0),[ce,le]=reactExports.useState(!1),ue={reproduce:"Right to Reproduce",broadcast:"Right to Broadcast",publicDisplay:"Right to Public Display",createDerivativeWorks:"Right to Create Derivative Works",exclusiveRights:"Exclusive Rights",retainCreatorRights:"Retain Creator Rights Even When Exclusive",requireAttribution:"Require Attribution on Use",rightsAreTransferable:"Rights are Transferable (Secondary Sales)",releasePublicDomain:"Release to Public Domain",customUriEnabled:"Custom URI Enabled",customUri:"Custom URI"},he={reproduce:{true:"✅ Yes",false:"🚫 No"},broadcast:{true:"✅ Yes",false:"🚫 No"},publicDisplay:{true:"✅ Yes",false:"🚫 No"},createDerivativeWorks:{true:"✅ Yes",false:"🚫 No"},releasePublicDomain:{true:"✅ Yes",false:"🚫 No"},customUriEnabled:{true:"📝 Yes",false:"🚫 No"},retainCreatorRights:{true:"✅ Yes",false:"🚫 No"},requireAttribution:{true:"✅ Yes",false:"🚫 No"},rightsAreTransferable:{true:"✅ Yes",false:"🚫 No"}},fe={none:"🚫 None (No Exclusive Rights To Any Party)",majority:"⚖️ Majority Share (50%+ Editions Owned = Exclusive Rights)",superMajority:"⚖️ Super-Majority Share (66.667%+ Editions Owned = Exclusive Rights)"},me=HashToURL(re==null?void 0:re.right_uri,"CDN",{size:"raw"});function ge(ye){try{return new URL(ye),!0}catch{return!1}}if(reactExports.useEffect(()=>{if(!me){ae(!1);return}axios.get(me).then(ye=>{ie(ye.data),le(!1)}).catch(ye=>{console.error("Failed to fetch data:",ye),le(!0)}).finally(()=>{ae(!1)})},[me]),oe)return jsx$1("div",{children:"Loading license information..."});if(ce||!ne&&!(re!=null&&re.rights))return jsx$1("div",{children:"N/A or License Data Not Specified. 🚫"});const ve=()=>{var ye,be;return((ye=ne==null?void 0:ne.clauses)==null?void 0:ye.customUriEnabled)&&((be=ne==null?void 0:ne.clauses)==null?void 0:be.customUri)};return jsxs(Fragment,{children:[(re==null?void 0:re.rights)==="custom"&&jsxs(Fragment,{children:[jsx$1(Container$3,{children:jsxs("div",{children:[jsx$1("h3",{children:"Custom License Info"}),jsx$1("br",{}),jsx$1("h4",{children:"URI to Agreement (Permanent)"}),jsx$1("a",{href:me,target:"_blank",rel:"noopener noreferrer",children:"Metadata"}),jsx$1("br",{}),jsx$1("br",{}),jsx$1("h4",{children:"License Details"}),jsx$1("ul",{children:(ne==null?void 0:ne.clauses)&&Object.entries(ne==null?void 0:ne.clauses).map(([ye,be])=>{var $e,Te;if(ve()&&ye!=="customUri")return null;const Ce=ue[ye],Se=he[ye]?he[ye][be]:be;if(ye==="exclusiveRights")return jsxs("li",{children:["Exclusive Rights: ",fe[be]]},ye);if(ye==="expirationDate")return jsxs("li",{children:["Expiration Date:"," ",be?new Date(($e=ne==null?void 0:ne.clauses)==null?void 0:$e.expirationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"None"]},"expirationDate");if(ye==="customUri"){const Ne=(Te=ne==null?void 0:ne.clauses)!=null&&Te.customUriEnabled&&be?jsx$1("a",{href:be,target:"_blank",rel:"noopener noreferrer",children:be}):"None";return jsxs("li",{children:[Ce,": ",Ne]},ye)}return ye==="addendum"||ye==="expirationDateExists"?null:jsxs("li",{children:[Ce,": ",Se]},ye)})})]})}),jsx$1(Line,{}),jsx$1("br",{}),jsxs(Container$3,{children:[jsx$1("h2",{children:"Custom License Agreement"}),jsx$1("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",overflowWrap:"break-word"},children:(ne==null?void 0:ne.documentText)||"No license document available."})]})]}),(re==null?void 0:re.rights)!=="custom"&&(re==null?void 0:re.rights)&&jsxs(Container$3,{children:[jsx$1("h3",{children:"License Information"}),jsx$1("p",{children:re==null?void 0:re.rights}),(re==null?void 0:re.right_uri)&&jsxs(Fragment,{children:[jsx$1("h4",{children:"Link to Metadata"}),jsx$1("a",{href:ge(re==null?void 0:re.right_uri)?re==null?void 0:re.right_uri:HashToURL(re==null?void 0:re.right_uri,"CDN",{size:"raw"}),target:"_blank",rel:"noopener noreferrer",children:"Metadata Link"})]})]})]})};function FilterButton({type:re,children:ee,isActive:ne,onClick:ie}){return jsx$1(Button,{onClick:()=>{ie(re)},children:jsx$1("div",{className:styles$u.tag,style:{textDecoration:ne?"underline":"none"},children:ee})})}function Filters({onChange:re,filter:ee,items:ne=[]}){return jsx$1(Container$3,{children:jsx$1("div",{style:{display:"flex",justifyContent:"flex-end"},children:ne.map(({type:ie,label:oe})=>jsx$1(FilterButton,{type:ie,onClick:re,isActive:ee===ie,children:oe},ie))})})}const FILTER_ALL$1="ALL",FILTER_FOR_SALE="FOR_SALE",FILTER_NOT_FOR_SALE$1="NOT_FOR_SALE";function Collections(){const{showFilters:re,showRestricted:ee,overrideProtections:ne,address:ie}=useOutletContext(),[oe,ae]=reactExports.useState(FILTER_ALL$1);return jsxs(Fragment,{children:[re&&jsx$1(Filters,{filter:oe,onChange:ae,items:[{type:FILTER_ALL$1,label:"All"},{type:FILTER_FOR_SALE,label:"For sale"},{type:FILTER_NOT_FOR_SALE$1,label:"Not for sale"}]}),jsx$1(TokenCollection,{showRestricted:ee,overrideProtections:ne,label:"Artist's Collection",namespace:"collections",swrParams:[ie],variables:{address:ie},emptyMessage:"no collections",maxItems:null,postProcessTokens:ce=>oe===FILTER_FOR_SALE?ce.filter(({listing_seller_address:le})=>le===ie):oe===FILTER_NOT_FOR_SALE$1?ce.filter(({listing_seller_address:le,artist_address:ue})=>ue!==ie):ce,extractTokensFromResponse:(ce,{postProcessTokens:le})=>{const ue=ce.holdings.map(({token:me})=>me),he=ce.listings.map(({token:me,seller_address:ge})=>({...me,listing_seller_address:ge})),fe=uniqBy$1([...ue,...he],({token_id:me})=>me).map(me=>({...me,key:me.token_id}));return le(fe)},query:distExports.gql`
          ${BaseTokenFieldsFragment}
          query collectorGallery($address: String!) {
            holdings(
              where: {
                holder_address: { _eq: $address }
                token: {
                  artist_address: { _neq: $address }
                  metadata_status: { _eq: "processed" }
                }
                amount: { _gt: "0" }
              }
              order_by: { last_received_at: desc }
            ) {
              token {
                ...baseTokenFields
              }
            }
            listings(
              where: {
                token: { artist_address: { _neq: $address } }
                seller_address: { _eq: $address }
                status: { _eq: "active" }
              }
              distinct_on: token_id
            ) {
              seller_address
              token {
                ...baseTokenFields
              }
              contract_address
              amount_left
              price
            }
          }
        `})]})}const FILTER_ALL="ALL",FILTER_PRIMARY="PRIMARY",FILTER_SECONDARY="SECONDARY",FILTER_NOT_FOR_SALE="NOT_FOR_SALE";function Creations(){const{showFilters:re,showRestricted:ee,overrideProtections:ne,address:ie}=useOutletContext(),[oe,ae]=reactExports.useState(FILTER_ALL);return jsxs(Fragment,{children:[re&&jsx$1(Filters,{filter:oe,onChange:ae,items:[{type:FILTER_ALL,label:"All"},{type:FILTER_PRIMARY,label:"Primary"},{type:FILTER_SECONDARY,label:"Secondary"},{type:FILTER_NOT_FOR_SALE,label:"Not for sale"}]}),jsx$1(TokenCollection,{showRestricted:ee,overrideProtections:ne,label:"Artist's Creations",namespace:"creations",swrParams:[ie],variables:{address:ie},emptyMessage:"no creations",maxItems:null,extractTokensFromResponse:ce=>{const le=ce.artist_tokens,ue=ce.artist_single_collabs.map(he=>{var fe,me;return(fe=he==null?void 0:he.split_contract)!=null&&fe.created_tokens&&he.split_contract.shareholders.length===1?(me=he==null?void 0:he.split_contract)==null?void 0:me.created_tokens:[]}).flat();return lodashExports.orderBy([...le,...ue],["minted_at"]).reverse().map(he=>({...he,key:he.token_id}))},postProcessTokens:ce=>oe===FILTER_PRIMARY?ce.filter(le=>get$5(le,"lowest_price_listing.seller_address")===ie):oe===FILTER_SECONDARY?ce.filter(le=>get$5(le,"lowest_price_listing.seller_address")!==ie):oe===FILTER_NOT_FOR_SALE?ce.filter(le=>get$5(le,"lowest_price_listing")===null):ce,query:distExports.gql`
            ${BaseTokenFieldsFragment}
            query creatorGallery($address: String!) {
              artist_tokens: tokens(
                where: {
                  artist_address: { _eq: $address }
                  editions: { _gt: 0 }
                  fa2_address: { _eq: "${HEN_CONTRACT_FA2}" }
                  metadata_status: { _eq: "processed" }
                }
                order_by: { minted_at: desc }
              ) {
                ...baseTokenFields
                lowest_price_listing
              }
              artist_single_collabs: teia_shareholders(
                where: { 
                  shareholder_address: { _eq: $address}, 
                  holder_type: { _eq: "core_participant" } 
                }) {
                split_contract{
                  shareholders(where:{holder_type:{_eq:"core_participant"}}) {
                    shareholder_address
                  }
                  created_tokens(where:{editions:{_gt:"0"}, teia_meta:{is_signed:{_eq:true}}}){
                    ...baseTokenFields
                    lowest_price_listing
                  }
                }
              }
            }
          `})]})}function Collabs(){const{showRestricted:re,address:ee,overrideProtections:ne}=useOutletContext(),[ie,oe]=reactExports.useState(!1),[ae,ce]=reactExports.useState(!1);return jsxs(Fragment,{children:[ie?jsx$1("div",{className:styles$u.tools,children:jsx$1(Checkbox$1,{small:!0,checked:ae,onCheck:ce,label:"Include unverified OBJKTs"})}):null,jsx$1(TokenCollection,{showRestricted:re,overrideProtections:ne,label:"Artist's Collabs",namespace:"collabs",swrParams:[ee],variables:{address:ee},emptyMessage:"no collabs",maxItems:null,extractTokensFromResponse:le=>{const ue=le.teia_shareholders.map(he=>get$5(he,"split_contract.created_tokens",[])).flat();return oe(ue.some(he=>!get$5(he,"teia_meta.is_signed"))),orderBy$1(ue,["minted_at"]).reverse().filter(he=>ae||get$5(he,"teia_meta.is_signed")).map(he=>({...he,key:he.token_id}))},query:distExports.gql`
          ${BaseTokenFieldsFragment}
          query GetCollabTokens($address: String!) {
            teia_shareholders(
              where: {
                shareholder_address: { _eq: $address }
                holder_type: { _eq: "core_participant" }
              }
            ) {
              split_contract {
                created_tokens(where: { editions: { _gt: "0" } }) {
                  ...baseTokenFields
                }
              }
            }
          }
        `})]})}function Sync(){const re=useLocation(),[ee,ne,ie,oe]=useUserStore(ce=>[ce.address,ce.setAccount,ce.proxyAddress,ce.sync],shallow);reactExports.useEffect(()=>{(async()=>{ee||await oe(),await ne()})().catch(console.error)},[ee]);const ae=ce=>{const le=ie||ee;switch(ce){case"/tz":case"/feed/friends":return`${ce}/${le}`;case"/settings":case"/subjkt":case"/mint":case"/collaborate":return ce;default:return"/"}};return ee?jsx$1(Navigate,{to:ae(re.state),replace:!0}):jsxs(Page,{title:"",children:[jsx$1(Loading,{message:"Requesting Permissions"}),jsx$1(Button,{to:"/sync",children:"try again?"})]})}const Terms=()=>{const{language:re}=useLanguage(),[ee,ne]=reactExports.useState(""),ie=reactExports.useCallback(()=>{const oe=`/languages/documents/terms-${re}.md`;fetch(oe).then(ae=>ae.text()).then(ae=>{ne(ae)})},[re]);return reactExports.useEffect(()=>{ie()},[ie]),jsx$1(Page,{title:"terms",large:!0,children:jsx$1(Container$3,{children:ee&&jsx$1(Markdown$1,{options:{forceBlock:!0},className:"markdown-doc",children:ee})})})};var client={},m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const debug="_debug_z2d7t_216",name="_name_z2d7t_231",storage="_storage_z2d7t_236",debug_center="_debug_center_z2d7t_243",cross="_cross_z2d7t_244",fill="_fill_z2d7t_256",styles$7={debug,name,storage,debug_center,cross,fill},container$1="_container_18hys_216",grid="_grid_18hys_223",fill_bg="_fill_bg_18hys_234",large="_large_18hys_237",left="_left_18hys_240",right="_right_18hys_247",separator="_separator_18hys_257",address="_address_18hys_261",logo="_logo_18hys_267",sync_label="_sync_label_18hys_271",styles$6={container:container$1,grid,fill_bg,large,left,right,separator,address,logo,sync_label},menu="_menu_6nzca_216",styles$5={menu},transition={duration:.5,ease:[.43,.13,.23,.96]},Menu=reactExports.memo(({isOpen:re=!1})=>{const ee=re?"opened":"closed",ne={closed:{rotate:0},opened:{rotate:45,translateY:3}},ie={closed:{opacity:1},opened:{opacity:0}},oe={closed:{rotate:0,translateY:0},opened:{rotate:-45,translateY:-3}},ae={strokeWidth:2,vectorEffect:"non-scaling-stroke",initial:"closed",animate:ee,transition};return jsx$1("div",{className:styles$5.menu,children:jsxs(motion.svg,{viewBox:"0 0 14 14",overflow:"visible",preserveAspectRatio:"none",children:[jsx$1(motion.line,{x1:"2",x2:"12",y1:"4",y2:"4",variants:ne,...ae}),jsx$1(motion.line,{x1:"2",x2:"12",y1:"7",y2:"7",variants:ie,...ae}),jsx$1(motion.line,{x1:"2",x2:"12",y1:"10",y2:"10",variants:oe,...ae})]})})}),MainMenu=()=>{const[re,ee,ne,ie]=useUserStore(ue=>[ue.address,ue.proxyName,ue.proxyAddress,ue.userInfo],shallow),[oe,ae]=useLocalSettings(ue=>[ue.zen,ue.setZen]),ce=ee||(ie==null?void 0:ie.name),le=ne||re;return jsxs(motion.div,{className:`${styles$U.menu}`,...fadeIn(),children:[jsxs("nav",{className:`${styles$U.content}`,children:[jsxs("div",{className:`${styles$U.menu_left}`,children:[jsx$1(MenuItem,{className:styles$U.menu_label,route:"search"}),jsx$1(MenuItem,{className:styles$U.menu_label,route:"about"}),jsx$1(MenuItem,{className:styles$U.menu_label,label:"F.A.Q",route:"faq"})]}),jsx$1(Line,{className:styles$U.line,vertical:!0}),jsxs("div",{className:styles$U.menu_right,children:[jsx$1("div",{className:styles$U.address,children:walletPreview(re)}),jsx$1(MenuItem,{className:styles$U.menu_label,label:"Mint",route:"mint",need_sync:!0}),jsx$1(MenuItem,{className:styles$U.menu_label,label:"Assets",route:`${ce||le}`||"tz",need_sync:!ce||!le}),jsx$1(MenuItem,{className:styles$U.menu_label,need_sync:!0,route:"collaborate"}),jsx$1(MenuItem,{className:styles$U.menu_label,label:"Profile",route:"subjkt",need_sync:!0}),jsx$1(MenuItem,{className:styles$U.menu_label,label:"DAO governance",route:"dao"}),jsx$1(MenuItem,{className:styles$U.menu_label,label:"Polls",route:"polls"}),jsxs("div",{className:styles$U.state_buttons,children:[jsx$1(Toggle,{box:!0,label:"ZEN",onToggle:ae,toggled:oe}),jsx$1(ThemeSelection,{className:styles$U.theme_selection})]})]})]}),jsx$1(Footer,{pin:!0})]})},bottom_banner="_bottom_banner_1bq7w_216",banner="_banner_1bq7w_232",close="_close_1bq7w_256",content="_content_1bq7w_262",styles$4={bottom_banner,banner,close,content},TopBanner=({children:re,color:ee})=>{const[ne,ie]=reactExports.useState(!0),{y:oe}=useWindowScroll$1();return reactExports.useEffect(()=>{ie(oe<50)},[oe]),jsx$1(AnimatePresence,{children:ne&&jsx$1(motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"40px",y:0},exit:{opacity:0,y:-100},className:styles$4.banner,children:re})})},EventBanner=()=>{const[re,ee]=reactExports.useState(),[ne,ie]=reactExports.useState(),[oe,ae]=useLocalSettings(ce=>[ce.has_seen_banner,ce.setHasSeenBanner]);return reactExports.useEffect(()=>{async function ce(){const ue=await(await fetch(`${BANNER_URL}/banner_config.json`)).text(),he=lib.parse(ue);if(ie(he),he.enable<=0)return;const me=await(await fetch(`${BANNER_URL}/banner.md`)).text();ee(me)}try{ce()}catch(le){console.error(le)}},[]),jsx$1(Fragment,{children:re&&!oe&&jsxs(TopBanner,{color:ne==null?void 0:ne.color,children:[jsx$1(Markdown,{className:styles$4.content,children:re}),jsx$1(Button,{onClick:()=>{ae(!0)},className:styles$4.close,children:jsx$1(SvgClose,{fill:"var(--background-color)",width:"16"})})]})})},BottomBanner=({children:re=null})=>jsx$1("div",{className:styles$4.bottom_banner,children:re});reactExports.memo(BottomBanner);const sample_events=[{title:"Art4Artists",icon:"🖼️ ",link:"https://x.com/EggsUnknow/status/1848805355620602309",subtitle:"Art4Artists",content:"Tezos Ecosystem #Art4Artists Breadfond"},{title:"Objkt4Objkt (4th edition)",icon:"🖼️ ",link:"https://twitter.com/kikanicolela/status/1778112619066413422",subtitle:"Objkt4Objkt",content:"Community art event to celebrate the creativity and talent in the space, in an inclusive way!"},{title:"Anaverse Integration",icon:"🖼️ ",link:"https://blog.teia.art/blog/anaverse-integration-announcement",subtitle:"new feature",content:"Teia just received a nice little new feature: 3D previews for your NFTs! This new addition allows you to experience your tokens in a immersive genertive 3D space."},{title:"Tez4Pal",icon:"🇵🇸",feed:"tez4pal",link:"https://twitter.com/LN0ir/status/1745946304742576400",subtitle:"January 20 to February 20 2024",content:"The Tezos Fundraiser  #Tez4Pal, supporting Gaza civilians, is scheduled from Jan 20 to Feb 20."},{title:"TezQuakeAid - Morocco",icon:"🇲🇦 ",feed:"morocco-quake-aid",link:"https://app.joyn.xyz/space/tezquakeaid-ec7f1f650671",subtitle:"9th September 2023 - ",content:"In September 2023, Morocco has been hit by a devastating earthquake. The TezQuateAid team launched a fundraising campaign dedicated to assisting those who have been impacted by this tragic catastrophe."},{title:"Tezos Pride",icon:"🏳️‍🌈",feed:"tezospride",link:"https://github.com/teia-community/teia-docs/wiki/Tezospride",subtitle:"throughout June and beyond every year",content:"TezosPride is a continuous event to celebrate and support the 2SLGBTQ+ community in the Tezos ecosystem. The main event spans Pride Month (June) annually."},{title:"TezQuakeAid - Turkey/Syria",icon:"🇹🇷🇸🇾 ",feed:"quake-aid",link:"https://app.joyn.xyz/space/tezquakeaid-ec7f1f650671",subtitle:"8st February 2023 - March 2023",content:"The earthquakes in Turkey and Syria in February 2023 have caused immense devastation. The Tezos community has set up donation opportunities to recognised, independent relief organisations. Donations after April 2023 will be directed towards the current flood relief event for Morocco"},{title:"Tezos for Iran",icon:"🇮🇷 ",feed:"iran",link:"https://github.com/teia-community/teia-docs/wiki/Tezos-for-Iran",subtitle:"25 October - 1st January 2022",content:"In the wake of the historic protests against the killing of young Iranian women, Teia has set up a charity fundraiser in solidarity with the protests and to raise awareness for womens rights in Iran."},{title:"Pakistan Fundraiser",icon:"🇵🇰 ",feed:"pakistan",link:"https://github.com/teia-community/teia-docs/wiki/Pakistan-Fundraiser",subtitle:"1st October - 2nd December 2022",content:"In late August, torrential monsoon triggered the biggest climate related disasters in history: a third of Pakistans landmass is submerged in water affecting tens of millions of people, washing away houses, destroying crops, hospitals, schools. To date, more than 1,500 people have lost their lives to the floods, including 552 children. Currently, 73% of the flood victims have inadequate access to necessities like food, water, medical aid, etc."},{title:"Ukraine",feed:"ukraine",icon:"🇺🇦 ",link:"https://github.com/teia-community/teia-docs/wiki/Ukranian-Fundraising",subtitle:"Mid November - Late December 2022",content:`In support for our Ukrainian friends,
brothers and sisters, [Veqtor](https://twitter.com/Veqtor/status/1497167740146266112?s=20&t=mmvu8KPxybOa0TQXX32nFw)
from [Versum](https://twitter.com/versumofficial) in conjunction with [FxHash](https://twitter.com/fx_hash_/status/1497113572085751810?s=20&t=mmvu8KPxybOa0TQXX32nFw)
set up a [shared donation contract](https://tzkt.io/KT1DWnLiUkNtAQDErXxudFEH63JC6mqg3HEx/info),
that will redirect tezos to multiple charity orgs (listed below) in support of Ukraine relief, and we want to help support this initiative.
you can find the source code on [github](https://github.com/ciphrd/public-contracts/blob/master/donations_ukraine.py)`}],event_card="_event_card_ngueb_216",event_content="_event_content_ngueb_236",event_tag_line="_event_tag_line_ngueb_237",event_icon="_event_icon_ngueb_243",styles$3={event_card,event_content,event_tag_line,event_icon},EventCard=({event:re})=>{const ee={hidden:{opacity:0,x:-100,transition:{ease:"easeOut"}},show:{opacity:1,x:0,transition:{ease:"easeOut"}}};return jsxs("article",{className:styles$3.event_card,children:[jsx$1(motion.h1,{variants:ee,children:re.feed?jsxs(Button,{to:`/feed/${re.feed}`,children:[re.title," ",re.icon&&jsx$1("span",{className:styles$3.event_icon,children:re.icon})]}):jsxs(Fragment,{children:[re.title,re.icon&&jsx$1("span",{className:styles$3.event_icon,children:re.icon})]})}),jsx$1(motion.p,{variants:ee,className:styles$3.event_tag_line,children:re.subtitle}),jsxs(motion.div,{variants:ee,className:styles$3.event_content,children:[jsx$1(Markdown,{children:re.content}),re.link&&jsx$1("a",{target:"_blank",rel:"noreferrer",href:re.link,children:"More info >> "})]})]})},Header=()=>{const[re,ee,ne,ie,oe,ae,ce,le]=useUserStore(Le=>[Le.address,Le.setAccount,Le.proxyName,Le.proxyAddress,Le.userInfo,Le.unsync,Le.sync,Le.resetProxy],shallow),[ue,he,fe]=useModalStore(Le=>[Le.collapsed,Le.setCollapsed,Le.toggleMenu],shallow);reactExports.useEffect(()=>{const Le=useLocalSettings.getState().applyTheme;return useLocalSettings.subscribe(ze=>ze.theme,Le,{fireImmediately:!0})},[]),reactExports.useEffect(()=>{const Le=document.body.parentElement;Le&&(Le.style.overflowY=ue?"":"scroll",Le.style.position=ue?"":"fixed")},[ue]);const me=useNavigate(),ge=useLocation(),ve=useMedia$1("(min-width: 600px)"),[ye,be]=reactExports.useState(),[Ce,Se]=reactExports.useState(),[$e,Te]=reactExports.useState("Sync"),[Ne,Ie]=reactExports.useState(""),[ke,De]=reactExports.useState("");reactExports.useEffect(()=>{ee(),be(Math.floor(Math.random()*150))},[]),reactExports.useEffect(()=>{Se(ge.pathname==="/")},[ge.pathname]),reactExports.useEffect(()=>{const Le=([je,ze,Ve,He])=>{if(Te(je?"Unsync":"Sync"),je&&ue){const We=ze?` (${Ve||walletPreview(ze)})`:"",Ye=He!=null&&He.name?`(${He.name})`:"";Ie(()=>walletPreview(je)+(We||Ye)),De(()=>$e.slice($e.length-5,$e.length).split("").join(" "))}};return useUserStore.subscribe(je=>[je.address,je.proxyAddress,je.proxyName,je.userInfo],Le)},[]);const Oe=(Le,je)=>{he(!0),me(Le,{state:je})},Be=()=>{if(re)if(ue){const Le=ne||(oe==null?void 0:oe.name),je=ie||re;Oe(Le?`/${Le}`:`${PATH.ISSUER}/${je}`)}else ae();else ce()},Me=classNames$1({[styles$6.grid]:!0,[styles$6.fill_bg]:!ue});return jsxs(Fragment,{children:[jsx$1(EventBanner,{}),jsx$1(AnimatePresence,{children:!ue&&jsx$1(MainMenu,{})}),jsxs("header",{className:`${styles$6.container}`,children:[jsxs("div",{className:Me,children:[jsx$1("div",{className:styles$6.left,children:jsx$1(DropdownButton$1,{alt:"events dropdown",className:styles$6.events_button,icon:jsx$1(SvgEvents,{}),menuID:"events",label:ve?"Events":"",id:`events-${ge.pathname}`,children:jsx$1(DropDown$1,{menuID:"events",vertical:!0,children:sample_events==null?void 0:sample_events.map(Le=>jsx$1(EventCard,{event:Le},`${Le.title} - ${Le.subtitle}`))})})}),jsx$1(Button,{alt:"teia logo",to:Ce?null:"/",onTo:()=>{he(!0),Se(Ce)},onClick:()=>{be(Math.random()*100)},children:jsx$1(RotatingLogo$1,{seed:ye,className:styles$6.logo})}),jsxs("div",{className:styles$6.right,children:[!ue&&jsx$1(Fragment,{children:jsxs(Button,{alt:"local settings",to:"/settings",onTo:()=>he(!0),className:styles$6.config_button,children:[jsx$1(SvgConfig,{fill:"var(--text-color)",width:16,height:16}),ve&&"Config"]})}),!ue&&ie&&jsxs(Fragment,{children:[jsx$1(Line,{className:styles$6.separator,vertical:!0}),jsx$1(Button,{alt:"exit collab",small:!0,onClick:()=>le(),secondary:!0,children:"Exit collab"}),jsx$1(Line,{className:styles$6.separator,vertical:!0})]}),jsx$1(Button,{onClick:Be,className:styles$6.sync_label,secondary:!0,alt:ue?ke?`wallet account ending in ${ke}`:"sync wallet":ke?"unsync":"sync",children:!ue||!re?jsx$1("span",{children:$e},"synclabel"):jsx$1("span",{children:Ne},"")}),jsx$1(Button,{alt:`${ue?"show":"hide"} menu`,onClick:fe,secondary:!0,children:jsx$1(Menu,{isOpen:!ue})})]})]}),jsx$1(Line,{})]})]})};function useFool(re=-2,ee=2){const[ne]=useLocalSettings(ie=>[ie.tilted]);reactExports.useEffect(()=>{let ie=document.getElementById("page-styles");ie||(ie=document.createElement("style"),ie.setAttribute("id","page-styles"),document.head.appendChild(ie));let oe="";if(ne){let ae=0;for(;Math.abs(ae)<.3;)ae=Math.random()*(ee-re)+re;oe=`*:not(.no-fool):not([id^="beacon-alert-wrapper-"]):not(main):not(body):not(html):not(#root) { transition: transform 500ms; rotate:${ae}deg; }`}ie.innerHTML=oe},[ne,re,ee])}const App=()=>{const{isLoading:re}=useSettings();return useFool(),re?jsx$1(Loading,{}):jsxs(Fragment,{children:[!1,jsx$1(ScrollRestoration,{getKey:ee=>ee.key}),jsxs(AnimatePresence,{mode:"wait",initial:!1,children:[jsx$1(Header,{},"header"),jsx$1(Outlet,{})]})]})};window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/);function unregister(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(re=>{re.unregister()}).catch(re=>{console.error(re.message)})}const index="";function HTMLWarning(){return jsxs("div",{className:styles$H.warning,children:[jsx$1("p",{children:"IMPORTANT: Please read the guide before minting!"}),jsx$1(Button,{href:"https://github.com/teia-community/teia-docs/wiki/Interactive-OBJKTs",children:jsx$1("strong",{children:"Interactive OBJKTs Guide"})})]})}const container="_container_1xgzz_1",field$2="_field_1xgzz_5",media="_media_1xgzz_8",info="_info_1xgzz_9",attributes="_attributes_1xgzz_17",label="_label_1xgzz_22",title="_title_1xgzz_56",styles$2={container,field:field$2,media,info,attributes,label,title},text_field_error="_text_field_error_dbqms_1",error="_error_dbqms_7",field$1="_field_dbqms_11",typed_field="_typed_field_dbqms_15",typed_preview="_typed_preview_dbqms_28",mono="_mono_dbqms_36",modalInfoIcon="_modalInfoIcon_dbqms_40",local_styles={text_field_error,error,field:field$1,typed_field,typed_preview,mono,modalInfoIcon},copyrightModalText={overview:`
        <p>Copyright laws are over complex and conflicting - which is why in most cases, is handled by a case-by-case basis. In order for NFT Copyright to be admissible in courts, it's important for both Creators and Owners to understand the scope of what these Agreements can and cannot do.</p>
        <p>Copyright clauses are normally legally defined with traditional contracts and may involve agreements that specify the geographical areas, specific platforms, and duration for which the broadcasting is allowed. The "scope" of NFT mints are globalThis contracts here are currently set to "globalThis", "in perpetuity", and are "unlimited". They are, in essence, a "lump sum" estimation of how much the rights might be worth in total for the Work's entire life cycle. (Exclusivity is possible, and rights are also transferable based on ownership.)</p>
        <ul>
            <li><strong>Geographical Coverage:</strong> The rights are set globally, allowing for usage across all regions without any restrictions.</li>
            <li><strong>Duration of Rights:</strong> Rights are granted in perpetuity, meaning there is no expiration on the privileges and permissions granted to Owners after purchase.</li>
            <li><strong>Frequency of Rights:</strong> Rights are unlimited, not restricted by the number of broadcasts or platforms.</li>
            <li><strong>Exclusivity:</strong> Exclusive rights Agreements (priviledges granted exclusive to one individual or entity and no one else), are possible using the number of Editions owned as a mechanism to facilitate these types of arrangements. (By default, all rights bestowed upon by the Creator are non-exclusive.)</li>
            <li><strong>Transferability:</strong> Rights are transferable because they are defined by the condition of ownership, allowing rights and associated privileges to be passed to others, unless stated otherwise.</li>
            <li><strong>Royalties:</strong> Royalties upon secondary sales still apply during transfers of ownership, which allows for Creators to earn "passive income", similar to deals that occur in traditional arts/entertainment industries.</li>
        </ul>
        <p>Note that some digital mediums (e.g. software, websites, video games) often fall into several categories, depending on how it's use. If you want a "permissive" contract, choose as many as applicable. If you want more granularity, think about use-cases and scope them as necessary. (e.g. for video games, reproduction rights will allow the developer to sell assets like art and music directly, whereas broadcasting rights will only allow to "use" them in-game.)
        <p>If geography, timelines (i.e. expiration dates), or frequency of usage (e.g. each Owner is only allowed to make X copies) is of importance, Creators can add those details in the Addendum sections to scope the Agreement as necessary.</p>
        <p>In all cases, the written text in this document will take precident over any data or metadata displays as the authoritative permissions for the Work, applied to both the Creator(s) and Owner(s), with the statements in the Addendums having the ability to overrule or nullify statements in the auto-generated portions of the document itself in cases of conflicts or inconsistencies. (Though it is recommended that you don't create contradictions in the document itself to avoid misunderstandings or misinterpretations.)</p>
    `,reproduce:`
        <p>This right allows the Owner of the Work to make direct copies of the work, for both commercial and non-commercial purposes.</p>
        <p>This applies to both digital and physical reproductions - prints, books and publications, merchandise, digital assets (e.g. for use in video games and software applications), educational use, and so on.</p>
        <p>For code-based works (e.g. application/x-directory), if you have your Work stored on a public repository, be careful not to create contradictions or conflicts with your licenses there and here, or it may lead to issues later that may be difficult to untangle.</p>
        <p>Reproduction rights are typically used for direct sales of the artwork, "as is". In music, record/album sales are typically done through reproduction rights, whereas the permissions to use in playback through broadcasting rights. Add more specificity to the Addendum sections if more granularity is required.</p>
        `,broadcast:`
        <p>This right allows the holder to broadcast the work to the public, across a variety of media platforms, both traditional and digital, for both commercial and non-commercial purposes.</p>
        <p>For traditional media, this includes the airing of works on television and radio, encompassing both entertainment and informational content. It also covers the broadcasting of live events such as concerts and sports.</p>
        <p>In the digital realm, the right extends to online streaming platforms, enabling the work to be shared globally. It also includes the use of social media platforms for live streaming events, sharing video clips, or hosting webinars and podcasts.</p>
        <p>Note that NFT ecosystems currently do not support tracking of plays, views, or interactions (for gaming, etc.) - yet. When these features eventually become integrated with on-chain ledgers, more options for Agreement types will open up for both Creators and Owners alike.</p>
        <p>If you're not sure how to set the initial price of license sales, it is recommended that you start low and let secondary sales determine an estimate for demand - Creators will still get paid through the royalties mechanism, which helps to mitigate some of the risk.</p>
        `,publicDisplay:`
        <p>This right allows the holder to display the work publicly, across various venues and platforms, encompassing both physical and digital displays.</p>
        <p>Physical displays can include exhibitions in art galleries, museums, or public spaces where artworks are shown to the public. It also covers the use of works in public areas like billboards, digital signage, and displays in commercial establishments like stores or restaurants.</p>
        <p>Digitally, this right extends to the display of works on websites, digital galleries, or other online platforms where the public can view them. This includes the use of images, videos, or other digital content on platforms intended for wide public reach.</p>
        <p>The public display rights are outlined in legal agreements that specify the scope of where and how the work can be displayed, and may include restrictions based on location, duration, or specific contexts. These rights are typically non-exclusive but can be negotiated depending on the creator's preferences and the nature of the display.</p>
        <p>As with other rights, the right to public display is transferable, allowing the holder to grant permissions to others under agreed terms.</p>
        <p>Note that there may be cases where reproduction and public display rights overlap - if more granularity is required, the Creator may consider specifying the scope (e.g. displays in museums are allowed, websites are not allowed) to avoid confusion.</p>
        `,createDerivativeWorks:`
        <p>This right allows the holder to make derivative works based on the original, for both commercial and non-commercial purposes. This includes modifications, adaptations, and new creations inspired by the original work and is often an Agreement between the Creator and other Creator(s) who are interested in using ideas or concepts from previously created Works.</p>
        <p>Derivative works can range from literary adaptations, such as turning a novel into a screenplay or a children's book, to artistic transformations, such as creating a sculpture based on a painting. It also includes technological adaptations like developing a video game based on a film or creating augmented reality experiences based on traditional media.</p>
        <p>In the digital domain, this right extends to remixing songs, re-editing videos for different platforms, or using existing software code to develop new applications.</p>
        <p>The agreements for derivative works specify the extent of modification allowed and may include limitations to ensure the original creator's vision and intellectual property are respected. These rights are typically negotiated on a case-by-case basis and can be exclusive or non-exclusive, depending on the agreement between the original creator and the rights holder.</p>
        <p>As with other intellectual property rights, the right to create derivative works is transferable. If the Creator wants to set limits or how their work is used by others, they may also choose to specify it in the Addendum section(s) as well.</p>
        `,exclusiveRights:`
        <p>Most Agreements will default to "No Exclusive Rights", but the Edition number system allows for Creators to create conditions with their Work that allows them to give exclusive rights to one individual or entity, if desired. (Especially if the Creator is concerned about how the Work will be used or represented by "unauthorized" dealers.)</p>
        <ul>
            <li><strong>Majority Share:</strong> Ownership of more than 50% of the editions confers exclusive rights to the owner.</li>
            <li><strong>Super-Majority Share:</strong> Ownership of 66.667% or more (approximately two-thirds) of the editions confers enhanced exclusive rights.</li>
            <li><strong>Rights Affected:</strong> The exclusive rights may include reproduction, broadcasting, public display, and creation of derivative works, depending on the percentage of ownership.</li>
            <li><strong>Transferability:</strong> These exclusive rights are transferable along with the ownership of the NFTs, which may cause certain rights and clauses to become "active". (A collector may decide to buy out the Editions from the other Owners out there, for example.) Rights, privledges, and permissions granted in this way is effective immediately after the transaction that triggered that condition to occur.</li>
            <li><strong>Retention of Creator's Rights:</strong> Despite the transfer or assignment of exclusive rights, creators may retain certain rights under specified conditions.</li>
        </ul>
        <p>Note: If you're unsure if you may or may not want the option to formulate exclusive deals for your Work, one option is to set it to majority share, then release 49% or less Editions to the public, which allows Creators to continue their sales while also keeping the option open in the future.</p>
        `,retainCreatorRights:`
        <p>This right allows Creators to retain all permissions, privledges, rights, even when exclusive rights are granted to another party. (The original definition of "selling out" actually comes from the act of Creators losing control over their own work, in exchange for money, which is something that can still happen today.)</p>
        <p>In most cases, it is recommended to keep this option checked, unless there is a specific reason to do otherwise. Some companies prefer "taking over" the management of the Work, or do partial allocations of rights (e.g. the Creator retains it for personal/educational use, whereas the company focuses on commercial, etc.) but that type of granularity is rare, especially with NFTs.</p>
        `,releasePublicDomain:`
        <p>This clause allows the work to be released to the public domain, effectively removing all copyright restrictions associated with it.</p>
        <p>By releasing the work to the public domain, the creator permits anyone to use, modify, and distribute the work without needing to seek permission or pay royalties. This can be a strategic decision for creators who wish to maximize the work's exposure and accessibility.</p>
        <p>Public domain release is often irrevocable, meaning once a work is released to the public domain, the creator cannot reclaim the rights. Therefore, it's crucial for Creators to carefully consider the implications before making such a decision, especially since it can be easily referenced on the blockchain itself. ("Announcements" made on social media or other privately-owned platforms often do not constitute</p>
        <p>This option can be particularly beneficial for educational, cultural, or philanthropic purposes, contributing to the broader public good by freely sharing creative works.</p>
        `,requireAttribution:`
        <p>This is simply a requirement that whenever the work is displayed in public settings (which includes broadcasts, events, social media posts, etc.) that the Owner of the work is required to give attribution to the original Creator(s) in some way, shape, or form.</p>
        <p>Many curators, content creators, and fans will do this out of courtesy to the artist, but there are times (like logos) where attribution may not be necessary, or even undesirable. Leaving this section blank leaves it up to the Owner as to what they want to do, but it's generally a good idea to make explicit what the usage rights are, if the artist has a preference for how they want their works used in public contexts.</p>
        <p>If you want more granularity in the way attributions are done, you may want to consider using the Addendum portions of the Custom License or reference Creative Commons licenses to get an idea of how these clauses are applied in practice. (Note: Once a work goes to Public Domain, attributions are no longer required.)</p>
        `,rightsAreTransferable:`
        <p>When rights are transferable, the Owner(s) of the Work are granted the ability to pass on their rights and privileges to subsequent Owners upon a sale. (i.e. "Secondary Sales") This transferability includes all forms of public display, reproduction, and sale, ensuring that rights can dynamically move within the marketplace while still respecting the original agreements set forth by the Creator(s).</p>
        <p>Transferable rights are particularly valuable in dynamic markets and industries where ownership frequently changes hands. They allow for continued use and enjoyment of the Work across different owners and contexts. However, it's important for each Owner to understand that the transfer of these rights must still adhere to the terms of the original contract, particularly concerning attribution and royalty obligations.</p>
        <p>If rights are *not* transferable, the original Owner (usually the Creator) retains exclusive control over the use of the Work, and any attempt to transfer these rights without explicit approval from the Creator is void. This setup ensures that the Creator can maintain a closer relationship with the usage of their Work, limiting the potential for unauthorized uses or dilution of the Work’s value in contexts they did not consent to.</p>
        <p>In either case, Creators and Owners should clearly understand the terms of transferability and its implications since it potentially has long-term ramifications, especially when there is no expiration date attached to each clause.</p>
        `,expirationDate:`
        <p>This is the date where all rights given to Owner(s) upon the ownership of each edition/license expires, effectively returning the privledges and rights granted through the Work back to the Creator.</p>
        <p>In professional contexts, expiration dates are typically set on a case-to-case basis (when an artist signs a "deal" with a label or company these details come into play), but if the Creator wants to create a blanket policy for their rights to be effective only during a limited time period, this option can be used to set a standard for all editions that apply to all Owners at once.</p>
    `,customUri:`
        <p>This feature allows creators to set a custom URI/URL for additional resources or information related to the NFT.</p>
        <p>The custom URI can link to a variety of content, such as detailed metadata, licensing information, or the creator's personal website.</p>
        <p>Note that the reference to the URI itself may be permanent (a link to someone's website, for example), but the destination itself may be editable, so unless modularity is what is needed, treat HTTP-based Custom URIs. (Destination links could be edited, or disappear.)</p>
        <p>Custom URIs can be made fully decentralized by using IPFS CIDs (hashes) or other decentralized storage systems, for full immutability.</p>`},modalOverlay="_modalOverlay_1xbub_216",modalContent="_modalContent_1xbub_229",styles$1={modalOverlay,modalContent},InfoModal=({isOpen:re,title:ee,content:ne,onClose:ie})=>(reactExports.useEffect(()=>{const oe=ae=>{ae.target===document.getElementById("modal-overlay")&&ie()};return document.addEventListener("mousedown",oe),()=>document.removeEventListener("mousedown",oe)},[ie]),re?jsx$1("div",{id:"modal-overlay",className:styles$1.modalOverlay,children:jsxs("div",{className:styles$1.modalContent,children:[jsx$1("h2",{children:ee}),jsx$1("div",{children:ne})]})}):null),initialClauses={reproduce:!1,broadcast:!1,publicDisplay:!1,createDerivativeWorks:!1,exclusiveRights:"none",retainCreatorRights:!0,releasePublicDomain:!1,requireAttribution:!1,rightsAreTransferable:!0,expirationDate:"",expirationDateExists:!1,customUriEnabled:!1,customUri:"",addendum:""},clauseLabels={reproduce:"Right to Reproduce",broadcast:"Right to Broadcast",publicDisplay:"Right to Public Display",createDerivativeWorks:"Right to Create Derivative Works",exclusiveRights:"Exclusive Rights Based on Ownership Share",retainCreatorRights:"Creator Retains Rights Even When Exclusive",releasePublicDomain:"Release to Public Domain",requireAttribution:"Require Attribution on Use",rightsAreTransferable:"Rights are Transferable",expirationDateExists:"Clauses Have Expiration Date",expirationDate:"Date of Expiration",customUriEnabled:"Custom URI",overview:"Copyright Overview"},exclusiveRightsOptions=[{value:"none",label:" 🚫 None (No Exclusive Rights To Any Party)"},{value:"majority",label:" ⚖️ Majority Share (50%+ Editions Owned = Exclusive Rights)"},{value:"superMajority",label:" ⚖️ Super-Majority Share (66.667%+ Editions Owned = Exclusive Rights)"}],ClausesDescriptions=({clauses:re})=>{const ee={reproduce:{true:"✅ Yes",false:"🚫 No"},broadcast:{true:"✅ Yes",false:"🚫 No"},publicDisplay:{true:"✅ Yes",false:"🚫 No"},createDerivativeWorks:{true:"✅ Yes",false:"🚫 No"},releasePublicDomain:{true:"✅ Yes",false:"🚫 No"},requireAttribution:{true:"✅ Yes",false:"🚫 No"},rightsAreTransferable:{true:"✅ Yes",false:"🚫 No"},expirationDateExists:{true:"✅ Yes",false:"🚫 No"},expirationDate:{null:"None",default:new Date(re==null?void 0:re.expirationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})},customUriEnabled:{true:"📝 Yes",false:"🚫 No"},retainCreatorRights:{true:"✅ Yes",false:"⚠️ No"}};return jsxs("div",{children:[jsx$1("strong",{children:"Copyright Permissions Granted on Ownership:"}),jsx$1("ul",{children:re!=null&&re.customUriEnabled?jsxs(Fragment,{children:[jsxs("li",{children:["Custom URI Enabled: ",ee==null?void 0:ee.customUriEnabled[!0]]},"customUriEnabled"),jsxs("li",{children:["Custom URI: ",(re==null?void 0:re.customUri)||"No URI Set"]},"customUri")]}):Object.entries(re).map(([ne,ie])=>{var oe,ae;if(ne==="exclusiveRights"){const ce=((oe=exclusiveRightsOptions.find(le=>(le==null?void 0:le.value)===ie))==null?void 0:oe.label)||"None";return jsxs("li",{children:["Exclusive Rights: ",ce]},ne)}else{if(ne==="customUri"||ne==="expirationDate")return null;if(ne==="expirationDateExists")return jsxs(Fragment,{children:[jsxs("li",{children:[clauseLabels[ne],": ",ee[ne][ie]]},ne),jsxs("li",{children:[clauseLabels.expirationDate,":"," ",re.expirationDateExists&&re.expirationDate?new Date(re.expirationDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"None"]},"expirationDate")]});if(ne==="addendum")return jsxs("li",{children:["Addendum: ",ie?"✅ Yes":"🚫 No"]},ne);{const ce=((ae=ee[ne])==null?void 0:ae[ie])||"Unknown Status";return jsxs("li",{children:[clauseLabels[ne],": ",ce]},ne)}}})}),jsx$1("br",{})]})};function CustomCopyrightForm({onChange:re,value:ee}){const{watch:ne}=useFormContext(),{license:ie,minterName:oe,address:ae}=useOutletContext(),[ce,le]=reactExports.useState(initialClauses),[ue,he]=reactExports.useState("No Permissions Chosen"),[fe,me]=reactExports.useState("No Permissions Chosen"),[ge,ve]=reactExports.useState(""),ye=useMintStore(Me=>Me.updateCustomLicenseData);let be=1;const Ce=reactExports.useCallback(()=>{let Le=`This Custom License Agreement ("Agreement") is granted by the creator ("Creator") of the Non-Fungible Token ("NFT") identified by the owner of wallet address ${oe?`[${oe}, ${ae}]`:`[${ae}]`} ("Wallet Address") for the Work "${ne("title")}" under the Minting Contract managed by the TEIA DAO LLC [${HEN_CONTRACT_FA2}]. This Agreement outlines the rights and obligations associated with the ownership and use of the NFT's likeness and any derivatives thereof ("Work").

“Editions” refers to the total number of authorized copies of the NFT that the Creator issues at the time of minting. Each copy represents an "Edition" of the NFT, allowing multiple Owners (or one Owner holding multiple copies) to hold rights to the Work under the terms of this Agreement.`;if(Le+=`

In all cases, the written text in this document will take precedence over any data or metadata displays on or off-chain as the authoritative permissions for the Work, applied to both the Creator(s) and Owner(s). Statements in the Addendums have the ability to overrule or nullify statements in the auto-generated portions of this document in cases of conflicts or inconsistencies.`,Le+=`

In cases where multiple Creators or Collaborators have contributed to the creation of the Work, the rights and obligations stipulated herein apply equally to all Creators. Each Creator is entitled to the rights granted under this Agreement, and such rights are shared collectively among all Creators unless specified otherwise.`,ce.releasePublicDomain?Le+=`

${be++}. Release to Public Domain:
The Creator hereby releases all copyright and related rights, title, and interest in and to the Work into the public domain, free from any copyright restrictions. This release applies globally, allowing for the free use, reproduction, and modification of the Work without any compensation due to the Creator.`:(ce.reproduce&&(Le+=`

${be++}. Right to Reproduce:
The Creator hereby grants to each owner of the NFT ("Owner") a worldwide license to use the Work for both commercial and non-commercial reproduction purposes.`),ce.broadcast&&(Le+=`

${be++}. Right to Broadcast:
The Creator grants to each Owner a worldwide license to use the Work for broadcasting purposes for both commercial and non-commercial use.`),ce.publicDisplay&&(Le+=`

${be++}. Right to Public Display:
The Creator grants to each Owner a worldwide license to publicly display the Work, either as a physical display or as a performance for live events. This license does not permit the monetization of the Work by the Owner and requires the Owner to provide full attribution to the Creator.`),ce.createDerivativeWorks&&(Le+=`

${be++}. Right to Create Derivative Works:
The Creator grants to each Owner a worldwide license to publicly display the Work, either as a physical display or as a performance for live events. This license does not permit the monetization of the Work by the Owner and requires the Owner to provide full attribution to the Creator.`),ce.requireAttribution&&(Le+=`

${be++}. Requirement for Attribution:
The Owner(s) of the Work are required to give proper and visible attribution to the Creator(s) whenever the Work is used in public settings, broadcasts, or any other form of public display or performance.acknowledge the Creator(s) by name or wallet address, unless otherwise agreed upon in writing by all parties involved. Failure to provide such attribution constitutes a breach of this Agreement, subject to the remedies available under applicable law.`),ce.rightsAreTransferable&&(ce.reproduce||ce.broadcast||ce.publicDisplay||ce.createDerivativeWorks)?Le+=`

${be++}. Transferable Rights:
The rights granted under this Agreement to the Owner(s) of the Work are transferable. The Owner(s) may assign, transfer, or sublicense the rights to the Work, subject to maintaining proper and visible attribution to the Creator(s) whenever the Work is used in public settings, broadcasts, or any other form of public display or performance. This clause is applicable to all sales and edition numbers (unless stated otherwise), including both primary and secondary sales, promoting continuous and flexible utilization of the Work across different owners. In case of a dispute, ledger records from sales transactions will serve to confirm or deny claims as necessary. Failure to comply with attribution requirements constitutes a breach of this Agreement, subject to the remedies available under applicable law.`:!ce.rightsAreTransferable&&(ce.reproduce||ce.broadcast||ce.publicDisplay||ce.createDerivativeWorks)&&(Le+=`

${be++}. Non-Transferable Rights:
The rights granted under this Agreement to the Owner(s) of the Work are non-transferable. Any attempt to transfer, assign, or sublicense the rights without explicit written consent from the Creator(s) is void. The Owner(s) must maintain proper and visible attribution to the Creator(s) whenever the Work is used in public settings, broadcasts, or any other form of public display or performance. This clause is applicable to Primary Sales, as defined as a direct sale from the Creator(s) to the first Owner(s) of an Edition of the Work from any Marketplace Contract. Upon any Secondary Sale, the rights and privileges initially granted are nullified. In case of a dispute, ledger records from sales transactions will serve to confirm or deny claims as necessary.`)),!ce.publicDisplay&&!ce.reproduce&&!ce.broadcast&&!ce.createDerivativeWorks&&!ce.releasePublicDomain&&!ce.requireAttribution&&(Le+=`

${be++}. All Rights Reserved: 
No rights are granted under this Agreement. All rights for the Work are reserved solely by the Creator.`),ce.exclusiveRights==="none")Le+=`

${be++}. Exclusive Rights:
No exclusive rights are granted under this Agreement. All rights are non-exclusive and shared among all rightful owners or licensees - or in cases of "All Rights Reserved", exclusivity is granted solely to the Creator themselves.`;else if(ce.reproduce||ce.broadcast||ce.publicDisplay||ce.createDerivativeWorks){const je=ce.exclusiveRights==="majority"?"majority share (over 50%)":"super-majority share (66.667%+ or exactly 2/3rds)";Le+=`

${be++}. Exclusive Rights:
The Creator grants exclusive rights as outlined in this Agreement to the Owner(s) holding a ${je} of the editions of the NFT at the time of its original mint. If no single party holds such a share, the rights outlined in this Agreement apply non-exclusively to all Owners. (In some cases, the Creator themselves may be the exclusive Owner.)`}if(ce.exclusiveRights!=="none"&&ce.retainCreatorRights&&(Le+=`

${be++}. Retention of Creator's Rights:
Despite reaching the threshold for exclusive rights, the Creator retains certain rights as specified under this Agreement, even if exclusivity conditions are met by other Owners. The rights are then split equally between the Creator and Owner which has been granted exclusive rights over the other Owner(s) of the Work, effective immediately after the date in which the condition for exclusivity has been met.`),ce.expirationDate&&ce.expirationDateExists){const je=new Date(ce.expirationDate).toLocaleDateString();Le+=`

${be++}. Expiration Date:
This Agreement is effective until the date of ${je} (relative to the time of mint of the Work), after which the rights granted herein will terminate unless expressly renewed or extended in writing by the Creator. Upon expiration, all rights (including exclusive rights) returns back to the Creator's ownership and control.`}return Le+=`

${be++}. Jurisdiction and Legal Authority:
This Agreement is subject to and shall be interpreted in accordance with the laws of the jurisdiction in which the Creator and Owner(s) are domiciled. The rights granted hereunder are subject to any applicable international, national, and local copyright and distribution laws.`,Le+=`

${be++}. Identification and Representation:
Each Owner (including the Creator and all Collaborators) affirms that the wallet address provided is under their control or under the control of the party they legitimately represent. Each Owner accepts all responsibility for validating their ownership or representative authority of the said wallet address. It is the Owner's duty to provide satisfactory proof of ownership or authorization as may be required to establish their connection to the wallet address in question. Failure to conclusively demonstrate such ownership or authority may result in denial of access to services, rights, or privileges associated with the wallet address under this Agreement.`,Le+=`

${be++}. Amendments and Modifications:
This Agreement may be amended or modified only by a written document signed by both the Creator and the Owner(s) holding the relevant majority or super-majority share, as applicable.`,Le+=`

${be++}. Proof of Ownership and Responsibility:
Each individual claiming ownership ("Claimant") must conclusively prove that they are the legitimate Owner or Creator of the specified wallet address associated with this Agreement. It is the sole responsibility of the Claimant to provide irrefutable evidence supporting their claim. This proof may include, but is not limited to, cryptographic signatures, transaction histories, and other blockchain-based verifications that establish an undeniable link between the Claimant and the wallet address in question. Failure to provide satisfactory evidence will result in the denial of any rights, privileges, or access purportedly associated with the wallet address under the terms of this Agreement.`,Le+=`

${be++}. Limitation of Platform Responsibility:
This Agreement is entered into solely between the Creator and the Owner(s) of the Non-Fungible Token ("NFT") and the associated digital or physical artwork ("Work"). TEIA (teia.art), formally operating under TEIA DAO LLC, and its affiliated members, collectively referred to as "Platform," do not bear any responsibility for the enforcement, execution, or maintenance of this Agreement. The Platform serves only as a venue for the creation, display, and trading of NFTs and does not participate in any legal relationships established under this Agreement between the Creator and the Owner(s). All responsibilities related to the enforcement and adherence to the terms of this Agreement rest solely with the Creator and the Owner(s). The Platform disclaims all liability for any actions or omissions of any user related to the provisions of this Agreement.`,Le+=`

${be++}. Perpetuity of Agreement:
Unless stated otherwise (in this Agreement itself), this Agreement remains effective in perpetuity as long as the Owner(s) can conclusively demonstrate proof of ownership of the NFT representing the Work, beyond reasonable doubt. Proof of ownership must be substantiated through reliable and verifiable means, which may include, but are not limited to, transaction records, cryptographic proofs, or any other blockchain-based evidence that unequivocally establishes ownership. This perpetual license ensures that the rights and privileges granted under this Agreement persist as long as the ownership criteria are met and validated.`,ce.addendum&&(Le+=`

Addendum By Creator:
${ce==null?void 0:ce.addendum}`),Le},[ae,be,ce,oe]),Se=reactExports.useCallback((Me,Le)=>{let je;Me==null?je="":typeof Me=="object"&&"value"in Me?je=Me.value:je=Me,le(Le==="customUriEnabled"?je?ze=>({...ze,reproduce:null,broadcast:null,publicDisplay:null,createDerivativeWorks:null,exclusiveRights:null,retainCreatorRights:null,requireAttribution:null,rightsAreTransferable:null,expirationDateExists:null,expirationDate:"",releasePublicDomain:null,customUriEnabled:!0}):ze=>({...ze,customUriEnabled:!1,customUri:ze.customUri}):Le==="releasePublicDomain"&&je===!0?{reproduce:!1,broadcast:!1,publicDisplay:!1,createDerivativeWorks:!1,exclusiveRights:"none",retainCreatorRights:!1,rightsAreTransferable:!1,expirationDateExists:!1,expirationDate:"",releasePublicDomain:!0,customUriEnabled:!1,customUri:""}:ze=>({...ze,[Le]:je,...Le!=="releasePublicDomain"&&ze.releasePublicDomain?{releasePublicDomain:!1}:null}))},[]),$e=Me=>{const Le=Me.target?Me.target.value:Me;function je(ze){try{return new URL(ze),!0}catch{return!1}}je(Le)?le(ze=>({...ze,customUri:Le})):console.error("Invalid URI")},Te=Me=>{var ze,Ve;let Le,je;Me!=null&&Me.target?(Le=((ze=Me==null?void 0:Me.target)==null?void 0:ze.name)||"",je=((Ve=Me==null?void 0:Me.target)==null?void 0:Ve.value)||""):(Le="addendum"|"",je=Me|""),le(He=>({...He,[Le]:je||""}))};reactExports.useEffect(()=>{let Me;const Le=ce.reproduce||ce.broadcast||ce.publicDisplay||ce.createDerivativeWorks||ce.releasePublicDomain||ce.requireAttribution;ce.customUriEnabled?Me=`Custom URI: ${ce.customUri}`:Le?Me=Ce():Me="No Permissions Chosen (For Addendum or Expiration Date sections to show, choose at least one option in the checkboxes above.)",me(Me),he(Me),ye({clauses:ce,documentText:Me})},[ce==null?void 0:ce.reproduce,ce==null?void 0:ce.broadcast,ce==null?void 0:ce.publicDisplay,ce==null?void 0:ce.createDerivativeWorks,ce==null?void 0:ce.exclusiveRights,ce==null?void 0:ce.releasePublicDomain,ce==null?void 0:ce.requireAttribution,ce==null?void 0:ce.rightsAreTransferable,ce==null?void 0:ce.expirationDate,ce==null?void 0:ce.expirationDateExists,Se,Ce,ye]),reactExports.useEffect(()=>{re({clauses:ce,documentText:fe})},[ce,fe,re]);const Ne=["reproduce","broadcast","publicDisplay","createDerivativeWorks","requireAttribution","rightsAreTransferable","releasePublicDomain"],[Ie,ke]=reactExports.useState({isOpen:!1,title:"",content:""}),De=Me=>{const Le=copyrightModalText[Me];ke({isOpen:!0,title:clauseLabels[Me],content:Le||"No detailed information available."})},Oe=(Me,Le)=>{(Me.key==="Enter"||Me.key===" ")&&(Me.preventDefault(),De(Le))},Be=Me=>{le(Le=>({...Le,expirationDateExists:Me}))};return jsxs("div",{style:{borderBottom:"1px solid var(--gray-20)"},children:[jsxs("h3",{children:["Custom License Generation Form",jsx$1("span",{style:{marginLeft:"0.5em"},role:"button",tabIndex:0,onClick:()=>De("overview"),onKeyPress:Me=>Oe(Me,clauseLabels.overview),children:"(?)"})]}),jsxs("div",{style:{marginTop:"1em"},children:[Ne.map(Me=>jsxs("div",{style:{display:"flex"},children:[jsx$1(Checkbox$1,{name:Me,label:clauseLabels[Me],checked:ce[Me],onCheck:Le=>Se(Le,Me),disabled:ce.customUriEnabled||ce.releasePublicDomain&&Me!=="releasePublicDomain"},Me),jsx$1("span",{role:"button",tabIndex:0,className:local_styles.modalInfoIcon,onClick:()=>De(Me),onKeyPress:Le=>Oe(Le,clauseLabels[Me]),children:"(?)"})]},Me)),Ie.isOpen&&jsx$1(InfoModal,{isOpen:Ie.isOpen,title:Ie.title,content:jsx$1("div",{dangerouslySetInnerHTML:{__html:Ie.content}}),onClose:()=>ke(Me=>({...Me,isOpen:!1}))}),jsxs("div",{className:"select-container",style:{marginTop:"2em"},children:[jsxs("div",{style:{display:"flex"},children:[jsx$1("h4",{children:clauseLabels.exclusiveRights}),jsx$1("span",{role:"button",tabIndex:0,className:local_styles.modalInfoIcon,onClick:()=>De("exclusiveRights"),onKeyPress:Me=>Oe(Me,clauseLabels.exclusiveRights),children:"(?)"})]}),jsx$1(ReactSelect,{name:"exclusiveRights",options:exclusiveRightsOptions,value:exclusiveRightsOptions.find(Me=>Me.value===ce.exclusiveRights),onChange:Me=>Se(Me,"exclusiveRights"),placeholder:"Select Ownership Share Type",isDisabled:ce.customUriEnabled||!Object.values(ce).some(Me=>Me&&Me!=="none"),styles:style$1,theme,className:local_styles.container,classNamePrefix:"react_select"}),["majority","superMajority"].includes(ce.exclusiveRights)&&jsxs(Fragment,{children:[jsx$1("br",{}),jsx$1(Checkbox$1,{name:"retainCreatorRights",label:"Creator Retains Their Rights Even When Exclusivity is Reached",checked:ce.retainCreatorRights,onCheck:Me=>Se(Me,"retainCreatorRights"),className:local_styles.field})]})]}),jsxs("div",{style:{marginTop:"1em",display:"flex"},children:[jsx$1(Checkbox$1,{name:"expirationDateExists",label:"Add an Expiration Date to Clauses",checked:ce.expirationDateExists,onCheck:Be,className:local_styles.field}),jsx$1("span",{role:"button",tabIndex:0,className:local_styles.modalInfoIcon,onClick:()=>De("exclusiveRights"),onKeyPress:Me=>Oe(Me,clauseLabels.exclusiveRights),children:"(?)"})]}),ce.expirationDateExists&&jsxs("div",{style:{marginTop:"1em"},children:[jsx$1("h4",{children:clauseLabels.expirationDate}),jsx$1(Input$2,{type:"date",value:ce.expirationDate,onChange:Me=>Se(Me,"expirationDate"),className:local_styles.field})]}),ce&&jsxs("div",{style:{marginTop:"1em"},children:[jsx$1("h4",{children:"Addendum/Notes"}),jsx$1(Textarea$1,{type:"text",name:"addendum",value:(ce==null?void 0:ce.addendum)||"",onChange:Te,placeholder:"Add additional notes, clauses, restrictions, scopes, etc.",className:local_styles.field})]}),jsxs("div",{style:{marginTop:"1em"},children:[jsxs("div",{style:{display:"flex"},children:[jsx$1(Checkbox$1,{name:"customUriEnabled",label:"Use Custom URI",checked:ce==null?void 0:ce.customUriEnabled,onCheck:Me=>Se(Me,"customUriEnabled"),className:local_styles.field}),jsx$1("span",{role:"button",tabIndex:0,className:local_styles.modalInfoIcon,onClick:()=>De(clauseLabels.customUriEnabled),onKeyPress:Me=>Oe(Me,clauseLabels.customUriEnabled),children:"(?)"})]}),(ce==null?void 0:ce.customUriEnabled)&&jsx$1(Input$2,{type:"text",value:(ce==null?void 0:ce.customUri)||"",onChange:Me=>$e(Me),placeholder:"Paste URI/URL Here (ipfs://, http://, https://)",className:local_styles.field}),ge&&jsx$1("div",{className:local_styles.errorText,children:ge})]})]}),jsxs("div",{style:{maxWidth:"100%",overflow:"auto",padding:"15px",margin:"20px 0",border:"1px solid #ccc",whiteSpace:"pre-wrap"},children:[jsx$1("h2",{children:"Custom License Agreement"}),jsx$1("pre",{style:{whiteSpace:"pre-wrap",overflowWrap:"break-word",wordWrap:"break-word"},children:ue})]})]})}function isHTML(re){return re===MIMETYPE.ZIP||re===MIMETYPE.ZIP1||re===MIMETYPE.ZIP2}const Attribute=({title:re,children:ee})=>ee&&jsxs("div",{className:styles$2.attributes,children:[jsxs("strong",{children:[re,":"]}),ee]}),Field=({title:re,value:ee})=>ee&&jsxs("div",{className:styles$2.field,children:[jsxs("strong",{children:[re,":"]}),jsx$1("p",{children:ee})]}),Preview=()=>{const[re,ee,ne,ie,oe,ae,ce,le,ue,he,fe,me,ge]=useMintStore(be=>[be.tags,be.title,be.description,be.artifact,be.cover,be.license,be.customLicenseData,be.royalties,be.language,be.photosensitive,be.nsfw,be.editions,be.isMonoType]);console.log("customLicenseData in Preview",ce);const{ignoreUriMap:ve}=useSettings(),ye=re?re===""?[]:re.replace(/\s/g,"").split(","):[];return ie?jsxs(motion.div,{className:styles$2.container,style:{width:"100%"},initial:{x:"20%"},animate:{x:0},exit:{x:"20%"},transition:{ease:"easeInOut"},children:[isHTML(ie.mimeType)&&jsx$1(HTMLWarning,{}),jsx$1("div",{className:styles$2.media,children:jsx$1(RenderMediaType,{displayView:!0,nft:{mime_type:ie.mimeType,is_mono_type:!!ge},previewUri:ie.reader,previewDisplayUri:oe==null?void 0:oe.reader})}),jsxs("div",{className:styles$2.info,children:[jsxs("div",{className:styles$2.title,children:[jsx$1("strong",{children:"Title:"}),ee]}),jsx$1(Field,{title:"Description",value:ne}),jsx$1(Field,{title:"License",value:ae==null?void 0:ae.label}),(ce==null?void 0:ce.clauses)&&(ae==null?void 0:ae.label)==="Custom License"&&jsxs("div",{children:[jsx$1(ClausesDescriptions,{clauses:ce==null?void 0:ce.clauses}),jsx$1(Field,{title:"Copyright License Agreement",value:ce==null?void 0:ce.documentText})]}),jsx$1(Field,{title:"Language",value:ue==null?void 0:ue.label}),(he||fe)&&jsxs("div",{className:styles$2.attributes,children:[jsx$1("strong",{children:"Attributes:"}),fe&&jsx$1("span",{className:styles$2.label,title:"This artwork is NSFW",children:"NSFW"}),he&&jsx$1("span",{className:styles$2.label,title:"This artwork can cause seizures",children:"Photo Sensitive Seizure Warning!"})]}),jsx$1(Attribute,{title:"Tags",children:(ye==null?void 0:ye.length)>0&&jsx$1(Tags,{tags:ye})}),jsx$1(Attribute,{title:"Editions",children:me}),jsxs(Attribute,{title:"Royalties",children:[le,"%"]})]}),jsx$1(Button,{onClick:()=>useMintStore.getState().mint(ve),shadow_box:!0,fit:!0,children:"Mint"})]}):jsx$1(motion.div,{style:{width:"100%"},initial:{x:"20%"},animate:{x:0},exit:{x:"20%"},transition:{ease:"easeInOut"},children:jsx$1("p",{children:"No file provided for preview"})})},FieldError=reactExports.memo(({error:re,text:ee})=>{const ne=classNames$1({[local_styles.error]:!0,[local_styles.text_field_error]:ee});return jsx$1("p",{className:ne,children:re})}),FormFields=({value:re,field:ee,error:ne,register:ie,control:oe})=>{const ae=ee.name;switch(ee.type){case"text":case"number":return jsxs(Input$2,{className:local_styles.field,name:ae,type:ee.type,label:ee.label,placeholder:ee.placeholder,...ie(ae,ee.rules),children:[jsx$1(Line,{}),ne&&jsx$1(FieldError,{text:!0,error:ne.message})]});case"textarea":return jsxs(Textarea$1,{className:local_styles.field,label:ee.label,placeholder:ee.placeholder,...ie(ae,ee.rules),children:[jsx$1(Line,{}),ne&&jsx$1(FieldError,{text:!0,error:ne.message})]});case"typed-textarea":return jsxs(Textarea$1,{className:local_styles.typed_field,label:ee.label,placeholder:ee.placeholder,...ie(ae,ee.rules),children:[jsx$1(Line,{}),ne&&jsx$1(FieldError,{text:!0,error:ne.message})]});case"select":case"select-search":return jsx$1(Controller,{control:oe,defaultValue:ee.defaultValue,name:ae,rules:ee.rules,render:({field:{onChange:ce,value:le,name:ue,ref:he}})=>jsx$1(Select,{inputRef:he,className:local_styles.field,options:ee.options,value:le,search:ee.type==="select-search",label:ee.label,placeholder:ee.placeholder,onChange:ce})});case"checkbox":return jsx$1(Controller,{control:oe,defaultValue:ee.defaultValue,name:ae,rules:ee.rules,render:({field:{onChange:ce,value:le,name:ue,ref:he}})=>jsx$1(Checkbox$1,{ref:he,className:local_styles.field,label:ee.label,checked:le,onCheck:fe=>ce(fe)})});case"file":return jsx$1(Controller,{control:oe,defaultValue:ee.defaultValue,name:ae,rules:ee.rules,render:({field:{onChange:ce,value:le,name:ue,ref:he}})=>{var fe;return jsx$1(Upload,{ref:he,name:ue,file:le==null?void 0:le.file,label:ee.label,placeHolder:le?(fe=le==null?void 0:le.file)==null?void 0:fe.name:ee.placeHolder,className:local_styles.field,onChange:ce,allowedTypesLabel:ALLOWED_FILETYPES_LABEL,children:ne&&jsx$1(FieldError,{error:ne.message})})}});case"cover-file":return jsx$1(Controller,{control:oe,defaultValue:ee.defaultValue,name:ae,rules:ee.rules,render:({field:{onChange:ce,value:le,name:ue,ref:he}})=>{var fe;return jsx$1(Upload,{ref:he,name:ue,file:le==null?void 0:le.file,label:ee.label,placeHolder:le?(fe=le==null?void 0:le.file)==null?void 0:fe.name:ee.placeHolder,className:local_styles.field,onChange:ce,allowedTypesLabel:ALLOWED_COVER_FILETYPES_LABEL,children:ne&&jsx$1(FieldError,{error:ne.message})})}});case"customCopyrightForm":return jsx$1(Controller,{control:oe,name:"customLicenseData",defaultValue:ee.defaultValue,rules:ee.rules,render:({field:{onChange:ce,value:le}})=>jsx$1(CustomCopyrightForm,{onChange:ce,value:le})});default:return jsxs("p",{children:["Unknown field ",ee.label," of type ",ee.type]})}};function Form({fields:re,defaultValues:ee,children:ne,onSubmit:ie,onReset:oe}){const{register:ae,control:ce,handleSubmit:le,watch:ue,reset:he,formState:{errors:fe}}=useFormContext();return jsxs("form",{style:{width:"100%"},onSubmit:le(ie),children:[re.map(me=>{const ge=me.watch?ue(me.name):null;return jsx$1(FormFields,{register:ae,value:ge,control:ce,field:me,error:lodashExports.get(fe,me.name)},me.name)}),ne,jsx$1(Button,{onClick:()=>{oe==null||oe(),he(ee)},type:"button",children:"Clear Fields"}),jsx$1(Button,{fit:!0,shadow_box:!0,disabled:Object.keys(fe).length>0,children:"Submit"})]})}const Form$1=reactExports.memo(Form),fields=[{label:"Title",type:"text",placeholder:"Max 500 characters (optional)",rules:{maxLength:{value:500,message:"Title must be 500 characters or less"}}},{label:"This is a text mint",name:"isTyped",type:"checkbox",watch:!0},{label:"Description",type:"textarea",enable_if:"showArtifact",placeholder:"Max 5000 characters (optional)",rules:{value:5e3,message:"Description must be 5000 characters or less"}},{label:"Tags",type:"text",placeholder:"Comma separated. example: illustration, digital (optional)",rules:{setValueAs:re=>lodashExports.join(lodashExports.uniq(re.split(",").map(ee=>ee.trim()).filter(ee=>ee)),",")}},{label:"Editions",type:"number",placeholder:`No. editions, 1-${MAX_EDITIONS}`,rules:{required:"You need at least 1 edition",min:{value:1,message:"You need at least 1 edition"},max:{value:MAX_EDITIONS,message:`You can only mint ${MAX_EDITIONS} editions at once.`}}},{label:"Royalties",type:"number",placeholder:`After each sale (between ${MIN_ROYALTIES}-${MAX_ROYALTIES}%)`,rules:{required:`Royalties cannot be left empty, choose a value between ${MIN_ROYALTIES}% and ${MAX_ROYALTIES}%`,min:{value:MIN_ROYALTIES,message:`Royalties must be greater than ${MIN_ROYALTIES}%`},max:{value:MAX_ROYALTIES,message:`Royalties must be less than ${MAX_ROYALTIES}%`}}},{label:"License",placeholder:"(optional)",type:"select",alt:"license selection",options:LICENSE_TYPES_OPTIONS},{label:"Custom License",name:"customLicenseData",enable_if:"useCustomLicense",type:"customCopyrightForm"},{label:"Language",placeholder:"(optional)",rules:{valueAs:re=>re.value},type:"select-search",alt:"token language",options:LANGUAGES_OPTIONS},{label:"NSFW",type:"checkbox"},{label:"Photo Sensitive Seizure Warning",name:"photosensitive",type:"checkbox"},{label:"Monospace Font Required",name:"isMonoType",type:"checkbox",enable_if:"isTyped",watch:!0},{label:"Artifact",placeHolder:"Upload OBJKT",name:"artifact",type:"file",watch:!0,enable_if:"showArtifact",rules:{required:"You did not select a valid file"}},{label:"Typed Art Input",name:"typedinput",type:"typed-textarea",watch:!0,enable_if:"isTyped",rules:{required:"Typed art mints cannot be empty."}},{label:"Cover Image",placeHolder:"Upload Cover image",name:"cover",type:"cover-file",watch:!0,enable_if:"needsCover",rules:{required:"No cover provided"}}],getFields=re=>{const ee=Object.keys(re);return fields.map(ne=>(ne.name=ne.name||lodashExports.kebabCase(ne.label),ne)).filter(ne=>ne.enable_if&&ee.includes(ne.enable_if)?lodashExports.get(re,ne.enable_if):!0)},CollabSwitch=({address:re,name:ee,className:ne})=>{const[ie,oe]=reactExports.useState([]),[ae,ce]=reactExports.useState(!1);reactExports.useEffect(()=>{fetchGraphQL(getCollabsForAddress,"GetCollabs",{address:re}).then(({data:ue,errors:he})=>{if(ue){const fe=ue.split_contracts;oe(fe||[])}})},[re]);const le=classNames$1(collabStyles.flex,collabStyles.flexBetween,ne);return jsxs(Fragment,{children:[ie.length>0&&jsxs("div",{className:le,children:[jsxs("p",{children:[jsx$1("span",{style:{opacity:.5},children:"minting as"})," ",ee]}),jsx$1(Button,{shadow_box:!0,onClick:()=>ce(!ae),children:ae?"Cancel":"Change"})]}),ae&&jsx$1(CollabContractsOverview,{showAdminOnly:!0})]})},fundsWarning="_fundsWarning_dq9zo_216",attributes_checkboxes="_attributes_checkboxes_dq9zo_222",mint_form="_mint_form_dq9zo_240",field="_field_dq9zo_245",line="_line_dq9zo_249",collab_bar="_collab_bar_dq9zo_253",styles={fundsWarning,attributes_checkboxes,mint_form,field,line,collab_bar},processTypedInput=async re=>{if(!re.typedinput)throw Error("No typedinput");const ee=new Blob([re.typedinput],{type:"text/plain;charset=utf-8"}),ne=new File([ee],"typed.txt",{type:"text/plain",lastModified:Date.now()});re.artifact=await convertFileToFileForm(ne),re.artifact.reader=URL.createObjectURL(ee);const ie=await generateTypedArtCoverImage(re.typedinput,re.isMonoType===!0);re.cover=await convertFileToFileForm(ie);let oe=[],ae=[];if(re.tags&&(oe=re.tags.split(","),ae=oe.map(ce=>ce.toLowerCase())),re.isMonoType&&!ae.includes("monospace"))oe=[...oe,"monospace"],re.tags=oe.join(",");else if(!re.isMonoType&&ae.includes("monospace")){const ce=oe.filter(le=>le.toLowerCase()!=="monospace").join(",");re.tags=ce}return re.description=re.typedinput,re};function MintForm(){const{artifact:re,license:ee,minterName:ne,address:ie,balance:oe,isTyped:ae,typedinput:ce,isMonoType:le}=useOutletContext(),ue=useNavigate(),{control:he}=useFormContext(),{defaultValues:fe}=useFormState({control:he}),[me,ge]=reactExports.useState(!1),[ve,ye]=reactExports.useState(!1),[be,Ce]=reactExports.useState(null),Se=reactExports.useMemo(()=>getFields({needsCover:me,isTyped:ve,showArtifact:!ve,useCustomLicense:(ee==null?void 0:ee.value)==="custom"}),[me,ve,ee==null?void 0:ee.value]);reactExports.useEffect(()=>{var Ie;re&&ge(!((Ie=re==null?void 0:re.mimeType)!=null&&Ie.startsWith("image"))&&!AUTO_GENERATE_COVER_MIMETYPES.includes(re==null?void 0:re.mimeType)),ye(ae);let Ne=document.querySelector("textarea[name='typedinput']");Ne&&(Ne.style.fontFamily=le?"Iosevka, monospace":"Source Sans Pro, sans-serif")},[re,ae,le,Se]),reactExports.useEffect(()=>{ve?$e(ce):Ce(void 0)},[ve,ce,le]);const $e=async Ne=>{try{const Ie=await generateTypedArtCoverImage(Ne,le);Ce(Ie)}catch(Ie){console.error("Error generating cover image preview:",Ie.message),Ce(null)}},Te=async Ne=>{var Ie,ke,De;try{if(!AUTO_GENERATE_COVER_MIMETYPES.includes((Ie=Ne.artifact)==null?void 0:Ie.mimeType)&&Ne.artifact){if((ke=Ne.artifact.file)!=null&&ke.size&&((De=Ne.artifact.file)==null?void 0:De.size)/1e6>2e3)throw new Error(`File too big: ${Ne.artifact.file.size/1e6}mb`);const Oe=window.URL||window.webkitURL;Ne.artifact.reader=Oe.createObjectURL(Ne.artifact.file)}else Ne.typedinput?Ne=await processTypedInput(Ne):(Ne.artifact.mimeType=="audio/midi"||Ne.artifact.mimeType=="audio/mid")&&(Ne=await processMidiCover(Ne));useMintStore.setState({...Ne,isValid:!0}),ue("preview")}catch(Oe){useModalStore.getState().show(Oe.message)}};return jsxs(motion.div,{style:{width:"100%"},initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-20%",opacity:0},transition:{ease:"easeInOut"},children:[jsx$1(CollabSwitch,{address:ie,name:ne}),oe>0&&oe/1e6<.7&&jsx$1("div",{className:styles.fundsWarning,children:jsx$1("p",{children:`⚠️ You seem to be low on funds (${oe/1e6}ꜩ), mint will probably fail...`})}),jsx$1(Form$1,{defaultValues:fe,onSubmit:Te,onReset:useMintStore.getState().reset,fields:Se,children:be&&jsx$1("img",{className:local_styles.typed_preview,src:URL.createObjectURL(be),alt:"Typed Art Preview"})})]})}async function fetchList(re){return(await axios.get(re)).data.map(ne=>ne.toString())}const lists={"NSFW List":"https://lists.teia.art/nsfw.json","Photo Sensitive List":"https://lists.teia.art/photosensitive.json","Restricted OBJKTs (deprecated)":"https://lists.teia.art/restricted_objkt.json"};function ListsFeed(){const[re,ee]=reactExports.useState(""),[ne,ie]=reactExports.useState(""),{data:oe}=useSWR(["/feed/lists",ne],async()=>fetchList(ne),{revalidateIfStale:!1,revalidateOnFocus:!1});return jsxs(Fragment,{children:[jsx$1("div",{style:{display:"flex",gap:"1em"},children:Object.keys(lists).map(ae=>jsx$1(Button,{box:!0,onClick:()=>{ie(lists[ae]),ee(lists[ae])},children:ae}))}),jsxs("div",{style:{display:"flex",marginTop:"25px",alignItems:"center",alignContent:"center",justifyContent:"center",width:"100%"},children:[jsx$1(Input$2,{placeholder:"link to a json list of tokens",type:"text",value:re,onChange:ee}),jsx$1(Button,{onClick:()=>{ie(re)},shadow_box:!0,children:"Search"})]}),ne&&jsx$1(TokenCollection,{disable:!oe,label:"Lists Feed",namespace:"lists",variables:{ids:oe},swrParams:[ne],query:distExports.gql`
            ${BaseTokenFieldsFragment}
            query fromList($ids: [String!], $limit: Int!) {
              tokens(
                where: { token_id: { _in: $ids } }
                order_by: { minted_at: desc }
                limit: $limit
              ) {
                ...baseTokenFields
              }
            }
          `})]})}const display_routes=jsxs(Fragment,{children:[jsx$1(Route,{index:!0,element:jsx$1(Creations,{})}),jsx$1(Route,{exact:!0,path:"collection",element:jsx$1(Collections,{})}),jsx$1(Route,{exact:!0,path:"collabs",element:jsx$1(Collabs,{})})]}),router=createBrowserRouter(createRoutesFromChildren(jsxs(Route,{path:"*",errorElement:jsx$1(RootErrorBoundary,{}),element:jsx$1(App,{}),children:[jsx$1(Route,{path:"/*",index:!0,element:jsx$1(Home,{})}),jsxs(Route,{path:"feed/*",element:jsx$1(Home,{}),children:[jsx$1(Route,{path:"sales",element:jsx$1(RecentSalesFeed,{})}),jsx$1(Route,{path:"lists",element:jsx$1(ListsFeed,{})}),jsx$1(Route,{path:"tezospride",element:jsx$1(TagFeed,{tag:"tezospride",namespace:"tezospride"})}),jsx$1(Route,{path:"iran",element:jsx$1(IranFeed,{})}),jsx$1(Route,{path:"tez4pal",element:jsx$1(Tez4PalFeed,{})}),jsx$1(Route,{path:"art4artists",element:jsx$1(Art4ArtistsFeed,{})}),jsx$1(Route,{path:"morocco-quake-aid",element:jsx$1(MoroccoQuakeFeed,{})}),jsx$1(Route,{path:"quake-aid",element:jsx$1(QuakeFeed,{})}),jsx$1(Route,{path:"iran",element:jsx$1(IranFeed,{})}),jsx$1(Route,{path:"pakistan",element:jsx$1(PakistanFeed,{})}),jsx$1(Route,{path:"ukraine",element:jsx$1(UkraineFeed,{})}),jsx$1(Route,{path:"random",element:jsx$1(RandomFeed,{})}),jsx$1(Route,{path:"newobjkts",element:jsx$1(NewObjktsFeed,{})}),jsx$1(Route,{path:"glb",element:jsx$1(GlbFeed,{})}),jsx$1(Route,{path:"video",element:jsx$1(VideoFeed,{})}),jsx$1(Route,{path:"image",element:jsx$1(ImageFeed,{})}),jsx$1(Route,{path:"audio",element:jsx$1(AudioFeed,{})}),jsx$1(Route,{path:"html-svg",element:jsx$1(HtmlSvgFeed,{})}),jsx$1(Route,{path:"pdf",element:jsx$1(PdfFeed,{})}),jsx$1(Route,{path:"md",element:jsx$1(MarkdownFeed,{})}),jsx$1(Route,{path:"txt",element:jsx$1(TextFeed,{})}),jsx$1(Route,{path:"midi",element:jsx$1(MidiFeed,{})}),jsx$1(Route,{path:"gif",element:jsx$1(GifFeed,{})}),jsx$1(Route,{path:"friends/:address",element:jsx$1(FriendsFeed,{})})]}),jsx$1(Route,{path:"search/*",element:jsx$1(Home,{isSearch:!0})}),jsx$1(Route,{path:"kt/:address",element:jsx$1(Display,{}),children:jsx$1(Route,{index:!0,element:jsx$1(CollabDisplay,{})})}),jsx$1(Route,{path:"collab/:name",element:jsx$1(Display,{}),children:jsx$1(Route,{index:!0,element:jsx$1(CollabDisplay,{})})}),jsx$1(Route,{exact:!0,path:"about",element:jsx$1(About,{})}),jsx$1(Route,{exact:!0,path:"terms",element:jsx$1(Terms,{})}),jsx$1(Route,{exact:!0,path:"faq",element:jsx$1(FAQ,{})}),jsx$1(Route,{path:"sync",element:jsx$1(Sync,{})}),jsxs(Route,{exact:!0,path:"mint/*",element:jsx$1(Mint,{}),children:[jsx$1(Route,{index:!0,element:jsx$1(MintForm,{})}),jsx$1(Route,{path:"preview",element:jsx$1(Preview,{})})]}),jsxs(Route,{path:"collaborate/*",element:jsx$1(Collaborate,{}),children:[jsx$1(Route,{index:!0,element:jsx$1(CollabContractsOverview,{})}),jsx$1(Route,{path:"create",element:jsx$1(CreateCollaboration,{})})]}),jsxs(Route,{path:"objkt/:id/*",element:jsx$1(ObjktDisplay,{}),children:[jsx$1(Route,{index:!0,element:jsx$1(Info,{})}),jsx$1(Route,{path:"listings",element:jsx$1(Collectors,{})}),jsx$1(Route,{path:"history",element:jsx$1(History,{})}),jsx$1(Route,{path:"swap",element:jsx$1(Swap,{})}),jsx$1(Route,{path:"burn",element:jsx$1(Burn,{})}),jsx$1(Route,{path:"transfer",element:jsx$1(Transfer,{})}),jsx$1(Route,{path:"copyright",element:jsx$1(Copyright,{})})]}),jsx$1(Route,{path:"subjkt/*",element:jsx$1(Subjkt,{})}),jsx$1(Route,{path:"settings/*",element:jsx$1(Settings,{})}),jsx$1(Route,{path:"claim/*",element:jsx$1(Claim,{})}),jsxs(Route,{path:"dao/*",element:jsx$1(DAO,{}),children:[jsx$1(Route,{index:!0,element:jsx$1(DaoParameters,{})}),jsx$1(Route,{path:"proposals",element:jsx$1(DaoProposals,{})}),jsx$1(Route,{path:"submit",element:jsx$1(SubmitDaoProposals,{})}),jsx$1(Route,{path:"*",element:jsx$1(DaoParameters,{})})]}),jsx$1(Route,{path:"proposal/:id",element:jsx$1(ProposalDisplay,{})}),jsxs(Route,{path:"polls/*",element:jsx$1(TeiaPolls,{}),children:[jsx$1(Route,{index:!0,element:jsx$1(Polls,{})}),jsx$1(Route,{path:"create",element:jsx$1(CreatePolls,{})}),jsx$1(Route,{path:"*",element:jsx$1(Polls,{})})]}),jsx$1(Route,{path:"poll/:id",element:jsx$1(PollDisplay,{})}),jsx$1(Route,{path:"tags/:tag",element:jsx$1(Tags$1,{})}),jsx$1(Route,{path:"tz/:address/*",element:jsx$1(Display,{}),children:display_routes}),jsx$1(Route,{path:":name/*",element:jsx$1(Display,{}),children:display_routes})]})));client.createRoot(document.getElementById("root")).render(jsx$1(IconCache.Provider,{value:{},children:jsx$1(RouterProvider,{router})}));unregister();
